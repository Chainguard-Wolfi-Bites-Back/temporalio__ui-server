var E=Object.defineProperty,G=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var d=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&d(e,r,t[r]);if(i)for(var r of i(t))g.call(t,r)&&d(e,r,t[r]);return e},k=(e,t)=>G(e,h(t));var I=(e,t)=>{var r={};for(var s in e)w.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&i)for(var s of i(e))t.indexOf(s)<0&&g.call(e,s)&&(r[s]=e[s]);return r};import{d as a,r as _,w as c}from"./index-de429506.js";import{p as f}from"./stores-34c141af.js";import{a as S}from"./events-service-4ceb5e60.js";import{a as v,b as l}from"./event-view-6715ec5f.js";import{m as p}from"./route-for-0fcfcb54.js";import{w as q,d as H}from"./with-loading-22689bcc.js";import{g as O}from"./index-d27505fa.js";import{X as R}from"./index-a913e400.js";const j={events:[],eventGroups:[]},x=a([f],([e])=>e.params.namespace?p(e.params.namespace):""),C=a([f],([e])=>e.params.workflow?p(e.params.workflow):""),F=a([f],([e])=>e.params.run?p(e.params.run):""),L=a([f],([e])=>e.stuff.settings),b={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},P=c(b),$=()=>{P.set(b)},N=(e,t)=>{for(const n of["namespace","workflowId","runId"])if(!e[n])return!1;let r=!0;const s=R(t);for(const n of Object.keys(s))if(s[n]!==e[n]){r=!1;break}return r?!1:(t.set(e),!0)},T=a([x,C,F,v],([e,t,r,s])=>({namespace:e,workflowId:t,runId:r,sort:s})),U=a([T,L],([e,t])=>k(y({},e),{settings:t})),W=e=>U.subscribe(async t=>{const n=t,{settings:r}=n,s=I(n,["settings"]);N(s,P)&&q(A,z,async()=>{var u;const o=await S(t);(u=o==null?void 0:o.events)!=null&&u.length?e(o):setTimeout(()=>{e(o)},H)})}),m=_(j,W),X=c(null),ee=a([m,l,X],([e,t,r])=>{if(r)return r;const{events:s}=e;return t?s.filter(n=>n.category===t):s}),te=a([m,l],([e,t])=>{const{eventGroups:r}=e;return t?r.filter(s=>s.category===t):r}),re=a([m,v,l],([e,t,r])=>{const{events:s}=e,n=t==="descending"?s.slice().reverse():s,o=O(n);return r?o.filter(u=>u.category===r):o});a([m,v,l],([e,t,r])=>{const{events:s}=e,n=t==="descending"?s.slice().reverse():s;return r?n.filter(o=>o.category===r):n});const z=c(!0),A=c(!0);export{re as a,ee as b,$ as c,te as d,m as e,X as t,z as u};
