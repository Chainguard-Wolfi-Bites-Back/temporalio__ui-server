import{S as _,i as $,s as y,aX as h,e as g,k as S,w as b,c as w,m as E,x,b as p,g as u,y as C,R as F,q as I,o as N,d as f,B as k,t as B,h as J}from"./vendor-f1345faf.js";import{i as O}from"./route-for-c9edcdb4.js";import{g as T}from"./navigation-093db9e2.js";import{B as q}from"./button-68f0cca9.js";import{t as G}from"./index-f77763f9.js";import{n as v}from"./notifications-c541b06b.js";import{i as R,a as j}from"./import-events-65cfbd6e.js";function A(l){let e;return{c(){e=B("Import")},l(n){e=J(n,"Import")},m(n,o){u(n,e,o)},d(n){n&&f(e)}}}function H(l){let e,n,o,s,a,i;return o=new q({props:{icon:h,$$slots:{default:[A]},$$scope:{ctx:l}}}),o.$on("click",l[1]),{c(){e=g("input"),n=S(),b(o.$$.fragment),this.h()},l(t){e=w(t,"INPUT",{class:!0,type:!0,accept:!0}),n=E(t),x(o.$$.fragment,t),this.h()},h(){p(e,"class","import-input block border border-gray-200 rounded-md p-2"),p(e,"type","file"),p(e,"accept",".json")},m(t,r){u(t,e,r),u(t,n,r),C(o,t,r),s=!0,a||(i=F(e,"change",l[0]),a=!0)},p(t,[r]){const c={};r&8&&(c.$$scope={dirty:r,ctx:t}),o.$set(c)},i(t){s||(I(o.$$.fragment,t),s=!0)},o(t){N(o.$$.fragment,t),s=!1},d(t){t&&f(e),t&&f(n),k(o,t),a=!1,i()}}}function P(l){let e;return[async s=>{var a;const i=s.target,t=(a=i==null?void 0:i.files)===null||a===void 0?void 0:a[0],r=new FileReader;t&&(r.readAsText(t),r.onload=()=>{var c,m;try{const d=(m=(c=r==null?void 0:r.result)===null||c===void 0?void 0:c.toString())!==null&&m!==void 0?m:"";e=JSON.parse(d)}catch{v.add("error","Could not parse JSON")}})},async()=>{var s;try{const{events:a,eventGroups:i}=await G((s=e==null?void 0:e.events)!==null&&s!==void 0?s:e);R.set(a),j.set(i);const t=O({importType:"events",view:"summary"});T(t)}catch{v.add("error","Could not create event history from JSON")}}]}class Q extends _{constructor(e){super();$(this,e,P,H,y,{})}}export{Q as E};
