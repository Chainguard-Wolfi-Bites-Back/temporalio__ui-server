var R=Object.defineProperty;var _=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var $=(n,o,c)=>o in n?R(n,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[o]=c,l=(n,o)=>{for(var c in o||(o={}))S.call(o,c)&&$(n,c,o[c]);if(_)for(var c of _(o))y.call(o,c)&&$(n,c,o[c]);return n};import{g as A}from"./navigation-2df0726c.js";import{D as O}from"./vendor-c58cc9e7.js";import{n as d}from"./notifications-ac094b56.js";import{i as T}from"./is-network-error-ac7c8caf.js";import{b as v}from"./route-for-b549ed02.js";const q=!0,C=O(null),U=n=>{if(F(n)&&q){A(v());return}if(b(n)){d.add("error",`${n.statusCode} ${n.statusText}`);return}if(T(n))throw d.add("error",`${n.statusCode} ${n.statusText}`),C.set(n),n;typeof n=="string"&&d.add("error",n),n instanceof Error&&d.add("error",n.message)},F=n=>T(n)?n.statusCode===401:!1,b=n=>T(n)?n.statusCode===403:!1,N=n=>typeof n=="function",D=(n,o)=>{const c=o instanceof URLSearchParams;return o&&!c&&(o=new URLSearchParams(o)),o?`${n}?${o}`:n},Y=n=>n.message!==void 0&&typeof n.message=="string",K=async(n,o={},c=10)=>{const{params:t={},request:i=fetch,token:u,shouldRetry:k=!1,notifyOnError:e=!0,onError:E,retryInterval:P=5e3}=o;let{options:I}=o;const h=u?{next_page_token:u}:{},V=new URLSearchParams(l(l({},t),h)),x=D(n,V);try{I=M(I);const s=await i(x,I),f=await s.json(),{status:L,statusText:g}=s;if(!s.ok)if(E&&N(E))E({status:L,statusText:g,body:f});else throw{statusCode:s.status,statusText:s.statusText,response:s};return f}catch(s){if(e){if(U(s),k&&c>0)return new Promise(f=>{setTimeout(()=>{f(K(n,o,c-1))},P)})}else throw s}},M=n=>{const o=l({credentials:"include"},n);return o.headers=j(n==null?void 0:n.headers),o},j=n=>{n||(n={});const o="_csrf=",c="X-CSRF-TOKEN";try{let i=document.cookie.split(";").find(u=>u.includes(o));i&&!n[c]&&(i=i.trim().slice(o.length),n[c]=i)}catch(t){console.error(t)}return n};let w="";w.endsWith("/")&&(w=w.slice(0,-1));const B=n=>n.split("/").map(o=>encodeURIComponent(o)).join("/"),W=n=>(n.startsWith("/")&&(n=n.slice(1)),`${w}/api/v1/${B(n)}`);function Z(n,o){const c={cluster:"/cluster",settings:"/settings",user:"/me",namespaces:"/namespaces","task-queue":`/namespaces/${o==null?void 0:o.namespace}/task-queues/${o==null?void 0:o.queue}`,workflows:`/namespaces/${o==null?void 0:o.namespace}/workflows`,"workflows.archived":`/namespaces/${o==null?void 0:o.namespace}/workflows/archived`,workflow:`/namespaces/${o==null?void 0:o.namespace}/workflows/${o==null?void 0:o.executionId}/executions/${o==null?void 0:o.runId}`,"workflow.terminate":`/namespaces/${o==null?void 0:o.namespace}/workflows/${o==null?void 0:o.executionId}/executions/${o==null?void 0:o.runId}/terminate`,events:`/namespaces/${o==null?void 0:o.namespace}/workflows/${o==null?void 0:o.executionId}/executions/${o==null?void 0:o.runId}/events`,query:`/namespaces/${o==null?void 0:o.namespace}/workflows/${o==null?void 0:o.executionId}/executions/${o==null?void 0:o.runId}/query`};return W(c[n])}export{Z as a,q as b,N as c,U as h,Y as i,C as n,K as r};
