import{D as d,S as v,i as $,s as y,aU as h,e as b,k as g,w as S,c as w,m as E,x as I,b as m,g as p,y as x,R as C,q as F,o as N,d as u,B as k,t as B,h as J}from"./vendor-35e673e5.js";import{j as O}from"./route-for-a0c2e129.js";import{g as T}from"./navigation-2df0726c.js";import{B as j}from"./button-6a815484.js";import{t as q}from"./index-df0df581.js";import{n as f}from"./notifications-bbeaa14f.js";const G=d([]),R=d([]);function U(c){let e;return{c(){e=B("Import")},l(s){e=J(s,"Import")},m(s,o){p(s,e,o)},d(s){s&&u(e)}}}function A(c){let e,s,o,n,a,r;return o=new j({props:{classes:"import-btn",icon:h,$$slots:{default:[U]},$$scope:{ctx:c}}}),o.$on("click",c[1]),{c(){e=b("input"),s=g(),S(o.$$.fragment),this.h()},l(t){e=w(t,"INPUT",{class:!0,type:!0,accept:!0}),s=E(t),I(o.$$.fragment,t),this.h()},h(){m(e,"class","import-input block w-full border border-gray-200 rounded-md p-2"),m(e,"type","file"),m(e,"accept",".json")},m(t,i){p(t,e,i),p(t,s,i),x(o,t,i),n=!0,a||(r=C(e,"change",c[0]),a=!0)},p(t,[i]){const l={};i&8&&(l.$$scope={dirty:i,ctx:t}),o.$set(l)},i(t){n||(F(o.$$.fragment,t),n=!0)},o(t){N(o.$$.fragment,t),n=!1},d(t){t&&u(e),t&&u(s),k(o,t),a=!1,r()}}}function D(c){let e;return[async n=>{const a=n.target.files[0],r=new FileReader;r.readAsText(a),r.onload=()=>{try{const t=r.result.toString();e=JSON.parse(t)}catch{f.add("error","Could not parse JSON")}}},async()=>{var n,a,r;try{const{events:t,eventGroups:i}=await q((n=e==null?void 0:e.events)!==null&&n!==void 0?n:e);G.set(t),R.set(i);const l=(r=(a=t[0])===null||a===void 0?void 0:a.id)!==null&&r!==void 0?r:"1",_=O({importType:"events",eventId:l});T(_)}catch{f.add("error","Could not create event history from JSON")}}]}class Q extends v{constructor(e){super();$(this,e,D,A,y,{})}}export{Q as E,G as a,R as i};
