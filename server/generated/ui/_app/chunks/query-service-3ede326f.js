var d=Object.defineProperty,f=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var c=(t,r,e)=>r in t?d(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,s=(t,r)=>{for(var e in r||(r={}))m.call(r,e)&&c(t,e,r[e]);if(i)for(var e of i(r))l.call(r,e)&&c(t,e,r[e]);return t},y=(t,r)=>f(t,p(r));import{r as h,a as O,c as g}from"./route-for-api-164c4799.js";import{a as q}from"./atob-5f9d7101.js";const I=t=>{const r=t.indexOf("["),e=t.indexOf("]");return t.slice(r+1,e).split(" ").filter(n=>n!=="__stack_trace")},T=async(t,r)=>(r=await r,{namespace:t,workflowId:r.id,runId:r.runId});async function u({workflow:t,namespace:r,queryType:e},n=fetch,a){t=await t;const o=await T(r,t);return await h(O("query",o),{options:{method:"POST",body:JSON.stringify({execution:{workflowId:t.id,runId:t.runId},query:{queryType:e}})},request:n,onError:a,notifyOnError:!1})}async function S(t,r=fetch){return new Promise((e,n)=>{u(y(s({},t),{queryType:"@@temporal-internal__list"}),r,a=>{g(a.body)&&a.body.message.startsWith("unknown queryType")?e(I(a.body.message)):n(a)})})}async function _(t,r=fetch){return u(t,r).then(e=>{const{queryResult:n}=e!=null?e:{queryResult:{payloads:[]}};let a=n.payloads;try{return a[0]&&(a=q(n.payloads[0].data)),JSON.parse(a)}catch{return a}})}async function A(t,r=fetch){return _(y(s({},t),{queryType:"__stack_trace"}),r)}export{S as a,_ as b,A as g};
