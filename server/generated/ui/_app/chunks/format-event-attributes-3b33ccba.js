import{f as u}from"./format-date-ecf4453c.js";import{a as l}from"./index-d27505fa.js";const d=(t,e)=>{const r=t.charCodeAt(e);return r>=65&&r<=90},i=t=>t[0].toUpperCase()+t.slice(1),k=new Set(["workflowType"]),h=t=>k.has(t)?`${t}Name`:t,U=t=>{let e="",r=0;for(t=h(t);r<(t==null?void 0:t.length);){const n=t[r],s=t[r+1];if(r===0){e+=t[r].toUpperCase(),r++;continue}if(n+s==="Id"){e+=" ID",r+=2;continue}if(d(t,r)){e+=" ",e+=n.toUpperCase(),r++;continue}e+=n,r++}return e},p={key:"",value:""},w=new Set(["activityId","attempt","binaryChecksum","identity","parentInitiatedEventId","requestId","scheduledEventId","startedEventId","lastHeartbeatTime","scheduledTime","expirationTime"]),L=t=>w.has(t),a=(t,e)=>!(e===null||e===void 0||e===""||e==="0s"||t==="type"),x=t=>!(t===null||t===void 0||t===""||Array.isArray(t)&&!t.length),$=t=>{var e,r,n;return typeof t=="string"?t:(n=(r=(e=t==null?void 0:t.payloads)!=null?e:t==null?void 0:t.indexedFields)!=null?r:t==null?void 0:t.points)!=null?n:t},E=["baseRunId","continuedExecutionRunId","firstExecutionRunId","newExecutionRunId","newRunId","originalExecutionRunId"],V=t=>{for(const e of E)if(t===e)return!0;return!1},I=["taskQueueName"],W=t=>{for(const e of I)if(t===e)return!0;return!1},y=(t,e)=>{if(typeof e=="object"){const[r]=Object.keys(e);return{key:t+i(r),value:e[r]}}else return{key:t,value:e.toString()}},T=["failure","input","activityType","parentInitiatedEventId","workflowType","taskQueue"],S=({attributes:t})=>{for(const[e,r]of Object.entries(t))if(a(e,r))return y(e,r)},m=t=>{const e=S(t);for(const[r,n]of Object.entries(t.attributes))for(const s of T)if(r===s&&a(r,n))return y(r,n);return e},j=({lastEvent:t})=>m(t),q=t=>t?l(t)?j(t):m(t):p,D=new Set(["header"]),N=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution"]),O=new Set(["maximumAttempts"]),c="Unlimited",Q="No Expiration",z=(t,e)=>t===0?Q:e,B=(t,e)=>t===0?c:t-e,H=t=>t===0?c:t,C=(t,e)=>t==="maximumAttempts"&&e===0?c:e,G=(t,e)=>{if(N.has(e)&&typeof t[e]=="object"){for(const[r,n]of Object.entries(t[e]))x(n)&&(O.has(r)?t[`${e}${i(r)}`]=C(r,n):t[`${e}${i(r)}`]=n);delete t[e]}},M=(t,{compact:e}={compact:!1})=>{const r={};e&&(r.eventTime=u(t.eventTime));for(const[n,s]of Object.entries(t.attributes)){const o=a(n,s);!D.has(n)&&o&&(r[n]=s),G(r,n)}return r},f=["summary","parent","activity","taskQueue","schedule","retryPolicy","workflow","searchAttributes"],g={activity:{label:"Activity",color:"gray"},parent:{label:"Parent",color:"gray"},retryPolicy:{label:"Retry Policy",color:"gray"},schedule:{label:"Schedule",color:"gray"},searchAttributes:{label:"Search Attributes",color:"gray"},summary:{label:"Summary",color:"gray"},taskQueue:{label:"Task Queue",color:"gray"},workflow:{label:"Workflow",color:"gray"}},P=(t,e)=>{var r,n;t.category==="activity"&&((r=e==null?void 0:e.activity)==null?void 0:r.length)&&(e.summary=[...e==null?void 0:e.activity,...e.summary],e.activity=[]),t.category==="activity"&&((n=e==null?void 0:e.workflow)==null?void 0:n.length)&&(e.summary=[...e.summary,...e==null?void 0:e.workflow],e.workflow=[])},R=t=>{const e=new Set(["summary","searchAttributes"]);for(const[r,n]of Object.entries(t))n.length===1&&!e.has(r)&&(t.summary=[...t.summary,...n],t[r]=[])},J=(t,e)=>{const r={};f.forEach(n=>{n==="summary"?r[n]=Object.keys(e):r[n]=[]});for(const n of Object.keys(e)){const s=f.find(o=>n.includes(o));s&&(r[s]=[n,...r[s]],r.summary=r.summary.filter(o=>o!==n))}return P(t,r),R(r),r};export{B as a,W as b,i as c,U as d,L as e,z as f,$ as g,g as h,M as i,J as j,q as k,H as l,V as s};
