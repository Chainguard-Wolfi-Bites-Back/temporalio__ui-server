var z=Object.defineProperty;var E=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var v=(o,n,c)=>n in o?z(o,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):o[n]=c,h=(o,n)=>{for(var c in n||(n={}))L.call(n,c)&&v(o,c,n[c]);if(E)for(var c of E(n))N.call(n,c)&&v(o,c,n[c]);return o};import{d as k,e as w,t as S}from"./route-for-06f1921b.js";import{E as _}from"./index-68c8bf39.js";import{w as B}from"./index-f99f80f5.js";import{n as W}from"./notifications-518c18f6.js";import{i as I}from"./is-network-error-ac7c8caf.js";import{i as H}from"./is-function-b969a126.js";import{g as K}from"./get-api-origin-77892e82.js";const X=B(null),D=(o,n=W,c=X,i=w)=>{if(A(o)&&i){window.location.assign(k());return}if(C(o)&&i){window.location.assign(k());return}if(I(o))throw n.add("error",`${o.statusCode} ${o.statusText}`),c.set(o),o;typeof o=="string"&&n.add("error",o),o instanceof Error&&n.add("error",o.message)},sn=(o,n=w)=>{if(A(o)&&n){window.location.assign(k());return}if(C(o)&&n){window.location.assign(k());return}},A=o=>I(o)?o.statusCode===401:!1,C=o=>I(o)?o.statusCode===403:!1,un=o=>(o==null?void 0:o.message)!==void 0&&typeof(o==null?void 0:o.message)=="string",G=async(o,n={},c=10)=>{var y;const{params:i={},request:d=fetch,token:u,shouldRetry:g=!1,notifyOnError:U=!0,handleError:q=D,onRetry:x=_,onError:$,retryInterval:R=5e3,isBrowser:T=w}=n;let{options:l}=n;const F=u?{next_page_token:u}:{},O=new URLSearchParams(h(h({},i),F)),P=S(o,O);try{l=J(l,T),globalThis!=null&&globalThis.AccessToken&&(l.headers=await M(l==null?void 0:l.headers,globalThis.AccessToken,T));const s=await d(P,l),f=await s.json(),{status:t,statusText:b}=s;if(!s.ok)if($&&H($))$({status:t,statusText:b,body:f});else throw{statusCode:s.status,statusText:s.statusText,response:s,message:(y=f==null?void 0:f.message)!=null?y:s.statusText};return f}catch(s){if(U){if(q(s),g&&c>0)return new Promise(f=>{const t=c-1;x(t),setTimeout(()=>{f(G(o,n,t))},R)})}else throw s}},J=(o,n=w)=>{const c=h({credentials:"include"},o);return c.headers=Q(o==null?void 0:o.headers,n),c},M=async(o,n,c=w)=>{if(o||(o={}),!c)return o;try{const i=await n();i&&(o.Authorization=`Bearer ${i}`)}catch(i){console.error(i)}return o},Q=(o,n=w)=>{if(o||(o={}),!n)return o;const c="_csrf=",i="X-CSRF-TOKEN";try{let u=document.cookie.split(";").find(g=>g.includes(c));u&&!o[i]&&(u=u.trim().slice(c.length),o[i]=u)}catch(d){console.error(d)}return o},V=(o,n)=>o.replace("%namespace%",n),Y=o=>{var c;let n="";return((c=globalThis==null?void 0:globalThis.AppConfig)==null?void 0:c.apiUrl)&&o?n=V(globalThis.AppConfig.apiUrl,o):n=K(),n.endsWith("/")&&(n=n.slice(0,-1)),n},Z=(o,n)=>(o.startsWith("/")&&(o=o.slice(1)),`${Y(n)}/api/v1/${o}`),j=o=>Object.keys(o!=null?o:{}).reduce((n,c)=>(n[c]=encodeURIComponent(encodeURIComponent(o[c])),n),{namespace:"",workflowId:"",scheduleId:"",runId:"",queue:""});function ln(o,n,c=!0){c&&(n=j(n));const i={cluster:"/cluster","events.ascending":`/namespaces/${n==null?void 0:n.namespace}/workflows/${n==null?void 0:n.workflowId}/runs/${n==null?void 0:n.runId}/events`,"events.descending":`/namespaces/${n==null?void 0:n.namespace}/workflows/${n==null?void 0:n.workflowId}/runs/${n==null?void 0:n.runId}/events/reverse`,namespaces:"/namespaces",query:`/namespaces/${n==null?void 0:n.namespace}/workflows/${n==null?void 0:n.workflowId}/runs/${n==null?void 0:n.runId}/query`,"schedule.delete":`/namespaces/${n==null?void 0:n.namespace}/schedules/${n==null?void 0:n.scheduleId}`,schedule:`/namespaces/${n==null?void 0:n.namespace}/schedules/${n==null?void 0:n.scheduleId}`,schedules:`/namespaces/${n==null?void 0:n.namespace}/schedules`,"search-attributes":"/search-attributes",settings:"/settings","task-queue":`/namespaces/${n==null?void 0:n.namespace}/task-queues/${n==null?void 0:n.queue}`,user:"/me","workflow.terminate":`/namespaces/${n==null?void 0:n.namespace}/workflows/${n==null?void 0:n.workflowId}/runs/${n==null?void 0:n.runId}/terminate`,workflow:`/namespaces/${n==null?void 0:n.namespace}/workflows/${n==null?void 0:n.workflowId}/runs/${n==null?void 0:n.runId}`,"workflows.archived":`/namespaces/${n==null?void 0:n.namespace}/workflows/archived`,workflows:`/namespaces/${n==null?void 0:n.namespace}/workflows`};return Z(i[o],n==null?void 0:n.namespace)}export{ln as a,D as b,sn as h,un as i,X as n,G as r};
