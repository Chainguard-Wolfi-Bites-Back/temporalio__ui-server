var R=Object.defineProperty;var I=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;var h=(n,o,c)=>o in n?R(n,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[o]=c,l=(n,o)=>{for(var c in o||(o={}))v.call(o,c)&&h(n,c,o[c]);if(I)for(var c of I(o))e.call(o,c)&&h(n,c,o[c]);return n};import{C as q}from"./vendor-7695a512.js";import{n as $}from"./notifications-e48f3a87.js";import{i as A}from"./is-network-error-ac7c8caf.js";const S=q(null),L=n=>{if(A(n))throw $.add("error",`${n.statusCode} ${n.statusText}`),S.set(n),n;typeof n=="string"&&$.add("error",n),n instanceof Error&&$.add("error",n.message)},U=n=>typeof n=="function",V=(n,o)=>{const c=o instanceof URLSearchParams;return o&&!c&&(o=new URLSearchParams(o)),o?`${n}?${o}`:n},N=n=>n.message!==void 0&&typeof n.message=="string",C=async(n,o={},c=10)=>{const{params:u={},request:s=fetch,token:t,shouldRetry:E=!1,onError:d,retryInterval:x=5e3}=o;let{options:k}=o;const T=t?{next_page_token:t}:{},P=new URLSearchParams(l(l({},u),T)),y=V(n,P);try{k=O(k);const i=await s(y,k),f=await i.json(),{status:_,statusText:g}=i;if(!i.ok)if(d&&U(d))d({status:_,statusText:g,body:f});else throw{statusCode:i.status,statusText:i.statusText,response:i};return f}catch(i){if(L(i),E&&c>0)return new Promise(f=>{setTimeout(()=>{f(C(n,o,c-1))},x)})}},O=n=>{const o=l({credentials:"include"},n);return o.headers=j(n==null?void 0:n.headers),o},j=n=>{n||(n={});const o="_csrf=",c="X-CSRF-TOKEN";try{let s=document.cookie.split(";").find(t=>t.includes(o));s&&!n[c]&&(s=s.trim().slice(o.length),n[c]=s)}catch(u){console.error(u)}return n};let w="";w.endsWith("/")&&(w=w.slice(0,-1));const D=n=>n.split("/").map(o=>encodeURIComponent(o)).join("/"),F=n=>(n.startsWith("/")&&(n=n.slice(1)),`${w}/api/v1/${D(n)}`);function W(n,o){const c={cluster:"/cluster",settings:"/settings",user:"/me",namespaces:"/namespaces","task-queue":`/namespaces/${o==null?void 0:o.namespace}/task-queues/${o==null?void 0:o.queue}`,workflows:`/namespaces/${o==null?void 0:o.namespace}/workflows`,"workflows.archived":`/namespaces/${o==null?void 0:o.namespace}/workflows/archived`,workflow:`/namespaces/${o==null?void 0:o.namespace}/workflows/${o==null?void 0:o.executionId}/executions/${o==null?void 0:o.runId}`,"workflow.terminate":`/namespaces/${o==null?void 0:o.namespace}/workflows/${o==null?void 0:o.executionId}/executions/${o==null?void 0:o.runId}/terminate`,events:`/namespaces/${o==null?void 0:o.namespace}/workflows/${o==null?void 0:o.executionId}/executions/${o==null?void 0:o.runId}/events`,query:`/namespaces/${o==null?void 0:o.namespace}/workflows/${o==null?void 0:o.executionId}/executions/${o==null?void 0:o.runId}/query`};return F(c[n])}export{W as a,U as b,L as h,N as i,S as n,C as r};
