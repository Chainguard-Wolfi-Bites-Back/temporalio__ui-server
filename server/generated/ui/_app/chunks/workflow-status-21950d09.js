var W=Object.defineProperty,b=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var y=(t,e,o)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,g=(t,e)=>{for(var o in e||(e={}))F.call(e,o)&&y(t,o,e[o]);if(x)for(var o of x(e))v.call(e,o)&&y(t,o,e[o]);return t},h=(t,e)=>b(t,N(e));import{r as _,a as C}from"./route-for-api-8c8660d0.js";import{s as P}from"./simplify-attributes-7a858880.js";import{i as K,b as Q,t as R,c as $}from"./format-date-0917cdb3.js";import{S as D,i as O,s as j,e as B,t as L,c as V,a as z,h as G,d as T,b as E,a3 as p,g as H,T as J,j as M,E as I}from"./index-4f955b1f.js";const U=(t=[])=>t.map(e=>{const o=P(e),i=e.activityId;return h(g({},o),{id:i})}),S=t=>{var d,w,m,k;const e=t.workflowExecutionInfo.type.name,o=t.workflowExecutionInfo.execution.workflowId,i=t.workflowExecutionInfo.execution.runId,r=String(t.workflowExecutionInfo.startTime),n=String(t.workflowExecutionInfo.closeTime),s=t.workflowExecutionInfo.status,a=t.workflowExecutionInfo.historyLength,c=`/workflows/${o}/${i}`,l=(w=(d=t==null?void 0:t.executionConfig)==null?void 0:d.taskQueue)==null?void 0:w.name,u=(m=t==null?void 0:t.workflowExecutionInfo)==null?void 0:m.parentNamespaceId,f=(k=t==null?void 0:t.workflowExecutionInfo)==null?void 0:k.parentExecution,A=t.workflowExecutionInfo.stateTransitionCount,q=U(t.pendingActivities);return{name:e,id:o,runId:i,startTime:r,endTime:n,status:s,historyEvents:a,url:c,taskQueue:l,pendingActivities:q,parentNamespaceId:u,parent:f,stateTransitionCount:A}},X=t=>(t.executions||[]).map(e=>S({workflowExecutionInfo:e})),Y={workflowId:"WorkflowId",workflowType:"WorkflowType",timeRange:"StartTime",executionStatus:"ExecutionStatus",closeTime:"CloseTime"},Z=["workflowId","workflowType","timeRange","executionStatus","closeTime"],tt=t=>!(t===null||t===void 0||typeof t=="string"&&t==="undefined"),et=t=>{if(typeof t!="string")return!1;for(const e of Z)if(e===t)return!0;return!1},ot=(t,e)=>{const o=Y[t];return K(e)||Q(e)?`${o} BETWEEN "${R(e)}" AND "${$()}"`:`${o}="${e}"`},nt=t=>Object.entries(t).map(([e,o])=>{if(et(e)&&tt(o))return ot(e,o)}).filter(Boolean),rt=t=>nt(t).join(" and "),it=async(t,e,o=fetch,i=!1)=>{var u;const r=e.query||rt(e),n=i?"workflows.archived":"workflows";let s,a;e.query&&(s=f=>{a=f.body.message});const{executions:c,nextPageToken:l}=(u=await _(C(n,{namespace:t}),{params:{query:r},onError:s,request:o}))!=null?u:{executions:[],nextPageToken:""};return{workflows:X({executions:c}),nextPageToken:String(l),error:a}},wt=async(t,e,o=fetch)=>it(t,e,o,!0);async function mt(t,e=fetch){return _(C("workflow",t),{request:e}).then(S)}function st(t){let e,o,i;return{c(){e=B("span"),o=L(t[0]),this.h()},l(r){e=V(r,"SPAN",{class:!0});var n=z(e);o=G(n,t[0]),n.forEach(T),this.h()},h(){E(e,"class",i=p(`${t[1]} rounded-md text-center px-2 text-sm`)+" svelte-xqpq4y")},m(r,n){H(r,e,n),J(e,o)},p(r,[n]){n&1&&M(o,r[0]),n&2&&i!==(i=p(`${r[1]} rounded-md text-center px-2 text-sm`)+" svelte-xqpq4y")&&E(e,"class",i)},i:I,o:I,d(r){r&&T(e)}}}function at(t,e,o){let i,r,{status:n}=e;const s={Running:"Running",TimedOut:"Timed Out",Completed:"Completed",Failed:"Failed",ContinuedAsNew:"Continued as New",Canceled:"Canceled",Terminated:"Terminated"},a={Running:"blue",TimedOut:"red",Completed:"green",Failed:"red",ContinuedAsNew:"indigo",Canceled:"yellow",Terminated:"pink"};return t.$$set=c=>{"status"in c&&o(2,n=c.status)},t.$$.update=()=>{t.$$.dirty&4&&o(1,i=a[n]),t.$$.dirty&4&&o(0,r=s[n])},[r,i,n]}class kt extends D{constructor(e){super(),O(this,e,at,st,j,{status:2})}}export{kt as W,wt as a,it as b,mt as f};
