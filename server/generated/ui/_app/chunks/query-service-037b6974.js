var d=Object.defineProperty,f=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var u=(t,r,e)=>r in t?d(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,c=(t,r)=>{for(var e in r||(r={}))l.call(r,e)&&u(t,e,r[e]);if(y)for(var e of y(r))m.call(r,e)&&u(t,e,r[e]);return t},i=(t,r)=>f(t,p(r));import{r as h,a as g,i as O}from"./route-for-api-8ded0143.js";import{a as q}from"./atob-5f9d7101.js";const I=t=>{const r=t.indexOf("["),e=t.indexOf("]");return t.slice(r+1,e).split(" ").filter(n=>n!=="__stack_trace")},T=async(t,r)=>(r=await r,{namespace:t,executionId:r.id,runId:r.runId});async function o({workflow:t,namespace:r,queryType:e},n=fetch,a){try{t=await t;const s=await T(r,t);return await h(g("query",s),{options:{method:"POST",body:JSON.stringify({execution:{workflowId:t.id,runId:t.runId},query:{queryType:e}})},request:n,onError:a,notifyOnError:!1})}catch(s){console.log(s)}}async function S(t,r=fetch){return new Promise((e,n)=>{o(i(c({},t),{queryType:"@@temporal-internal__list"}),r,a=>{O(a.body)&&a.body.message.startsWith("unknown queryType")?e(I(a.body.message)):n(a)})})}async function _(t,r=fetch){return o(t,r).then(e=>{const{queryResult:n}=e!=null?e:{queryResult:{payloads:[]}};let a=n.payloads;try{return a[0]&&(a=q(n.payloads[0].data)),JSON.parse(a)}catch{return a}})}async function x(t,r=fetch){return _(i(c({},t),{queryType:"__stack_trace"}),r)}export{S as a,_ as b,x as g};
