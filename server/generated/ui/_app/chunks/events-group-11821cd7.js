const m=["ActivityTaskCanceled","ActivityTaskCancelRequested","ActivityTaskCompleted","ActivityTaskFailed","ActivityTaskScheduled","ActivityTaskStarted","ActivityTaskTimedOut"],f=["TimerStarted","TimerCanceled","TimerFired"],k=["WorkflowExecutionSignaled"],A=["MarkerRecorded"],g=["StartChildWorkflowExecutionInitiated","ChildWorkflowExecutionStarted","ChildWorkflowExecutionCompleted"],S=t=>!!(m.includes(t.eventType)||f.includes(t.eventType)||r(t)||d(t)||g.includes(t.eventType)),h=t=>t.eventType==="ActivityTaskScheduled",p=t=>t.eventType==="StartChildWorkflowExecutionInitiated",E=t=>t.eventType==="TimerStarted",r=t=>k.includes(t.eventType),d=t=>A.includes(t.eventType);class C{constructor(i){var s,a,c,o,l,u,n,T,y;this._events=new Map,h(i)&&(this.id=(s=i==null?void 0:i.activityTaskScheduledEventAttributes)==null?void 0:s.activityId,this.name=(c=(a=i==null?void 0:i.activityTaskScheduledEventAttributes)==null?void 0:a.activityType)==null?void 0:c.name),E(i)&&(this.id=i.id,this.name=`Timer ${(o=i==null?void 0:i.timerStartedEventAttributes)==null?void 0:o.timerId} (${(l=i==null?void 0:i.timerStartedEventAttributes)==null?void 0:l.startToFireTimeout})`),r(i)&&(this.id=i.id,this.name=`Signal: ${(u=i==null?void 0:i.workflowExecutionSignaledEventAttributes)==null?void 0:u.signalName}`),d(i)&&(this.id=i.id,this.name=`Marker: ${(n=i==null?void 0:i.markerRecordedEventAttributes)==null?void 0:n.markerName}`),p(i)&&(this.id=i.id,this.name=`Child Workflow: ${(y=(T=i==null?void 0:i.startChildWorkflowExecutionInitiatedEventAttributes)==null?void 0:T.workflowType)==null?void 0:y.name}`),this.set(i.eventType,i)}set(i,s){this._events.set(i,s)}get(i){return this._events.get(i)}toArray(){return[...this]}get events(){return[...this]}get length(){return this._events.size}get last(){let i;for(const s of this)i=s;return i}[Symbol.iterator](){return this._events.values()}}const e=class{constructor(t){this._groups=new Map,Array.isArray(t)?e.from(t,this):t&&this.add(t)}static async fromPromise(t){return e.from(await t)}get(t){return this._groups.get(String(t))}add(t){if(h(t)||E(t)||r(t)||d(t)||p(t)){const i=String(t.id);this._groups.set(i,new C(t))}if(t.eventType==="ActivityTaskStarted"){const{scheduledEventId:i}=t.activityTaskStartedEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="ActivityTaskCanceled"){const{scheduledEventId:i}=t.activityTaskCanceledEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="ActivityTaskCancelRequested"){const{scheduledEventId:i}=t.activityTaskCancelRequestedEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="ActivityTaskFailed"){const{scheduledEventId:i}=t.activityTaskFailedEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="ActivityTaskTimedOut"){const{scheduledEventId:i}=t.activityTaskTimedOutEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="ActivityTaskCompleted"){const{scheduledEventId:i}=t.activityTaskCompletedEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="ChildWorkflowExecutionStarted"){const{initiatedEventId:i}=t.childWorkflowExecutionStartedEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="ChildWorkflowExecutionCompleted"){const{initiatedEventId:i}=t.childWorkflowExecutionCompletedEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="TimerFired"){const{startedEventId:i}=t.timerFiredEventAttributes;this.get(i).set(t.eventType,t)}if(t.eventType==="TimerCanceled"){const{startedEventId:i}=t.timerCanceledEventAttributes;this.get(i).set(t.eventType,t)}}get length(){return this._groups.size}slice(...t){return[...this].slice(...t)}[Symbol.iterator](){return this._groups.values()}};let w=e;w.from=(t=[],i=new e)=>{for(const s of t)S(s)&&i.add(s);return i};export{w as E,C as a};
