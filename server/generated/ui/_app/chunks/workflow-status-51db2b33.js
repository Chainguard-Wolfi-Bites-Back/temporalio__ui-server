var N=Object.defineProperty,D=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var x=(t,e,n)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e)=>{for(var n in e||(e={}))P.call(e,n)&&x(t,n,e[n]);if(k)for(var n of k(e))j.call(e,n)&&x(t,n,e[n]);return t},g=(t,e)=>D(t,F(e));import{r as _,a as S}from"./route-for-api-c3684083.js";import{s as O}from"./simplify-attributes-7213a079.js";import{ak as C,al as Q,am as $,S as R,i as v,s as B,e as L,t as V,c as z,a as G,h as H,d as p,b as T,a7 as I,g as J,Q as M,j as U,K as E}from"./vendor-f1345faf.js";const X=(t=[])=>t.map(e=>{const n=O(e),o=e.activityId;return g(h({},n),{id:o})}),A=t=>{var d,m,w,y;const e=t.workflowExecutionInfo.type.name,n=t.workflowExecutionInfo.execution.workflowId,o=t.workflowExecutionInfo.execution.runId,s=String(t.workflowExecutionInfo.startTime),r=String(t.workflowExecutionInfo.closeTime),i=t.workflowExecutionInfo.status,a=t.workflowExecutionInfo.historyLength,u=`/workflows/${n}/${o}`,f=(m=(d=t==null?void 0:t.executionConfig)==null?void 0:d.taskQueue)==null?void 0:m.name,c=(w=t==null?void 0:t.workflowExecutionInfo)==null?void 0:w.parentNamespaceId,l=(y=t==null?void 0:t.workflowExecutionInfo)==null?void 0:y.parentExecution,W=t.workflowExecutionInfo.stateTransitionCount,K=X(t.pendingActivities);return{name:e,id:n,runId:o,startTime:s,endTime:r,status:i,historyEvents:a,url:u,taskQueue:f,pendingActivities:K,parentNamespaceId:c,parent:l,stateTransitionCount:W}},Y=t=>(t.executions||[]).map(e=>A({workflowExecutionInfo:e})),b=["years","months","weeks","days","hours","minutes","seconds"],gt=["10 minutes","60 minutes","3 hours","24 hours","3 days","7 days","30 days","90 days"],q=new RegExp(`(\\d+)\\s(${b.join("|")})`),Z=t=>{if(typeof t!="string")return!1;for(const e of b)if(e===t)return!0;return!1},tt=t=>{if(t===null||typeof t!="object")return!1;for(const e of Object.keys(t))if(!Z(e))return!1;return!0},et=t=>{if(t===null||typeof t!="string")return!1;const e=t.match(q);if(!e)return!1;const[,n,o]=e;return!!n&&!!o},nt=t=>{const[,e,n]=t.match(q);return{[n]:parseInt(e,10)}},ot=t=>{const e=typeof t=="string"?nt(t):t;return C(Q(new Date,e))},rt=()=>C($(new Date,{hours:24})),st={workflowId:"WorkflowId",workflowType:"WorkflowType",timeRange:"StartTime",executionStatus:"ExecutionStatus",closeTime:"CloseTime"},it=["workflowId","workflowType","timeRange","executionStatus","closeTime"],at=t=>!(t===null||t===void 0||typeof t=="string"&&t==="undefined"),ut=t=>{if(typeof t!="string")return!1;for(const e of it)if(e===t)return!0;return!1},ct=(t,e)=>{const n=st[t];return tt(e)||et(e)?`${n} BETWEEN "${ot(e)}" AND "${rt()}"`:`${n}="${e}"`},ft=t=>Object.entries(t).map(([e,n])=>{if(ut(e)&&at(n))return ct(e,n)}).filter(Boolean),lt=t=>ft(t).join(" and "),dt=async(t,e,n=fetch,o=!1)=>{var c;const s=e.query||lt(e),r=o?"workflows.archived":"workflows";let i,a;e.query&&(i=l=>{a=l.body.message});const{executions:u,nextPageToken:f}=(c=await _(S(r,{namespace:t}),{params:{query:s},onError:i,request:n}))!=null?c:{executions:[],nextPageToken:""};return{workflows:Y({executions:u}),nextPageToken:String(f),error:a}},pt=async(t,e,n=fetch)=>dt(t,e,n,!0);async function Tt(t,e=fetch){return _(S("workflow",t),{request:e}).then(A)}function mt(t){let e,n,o;return{c(){e=L("span"),n=V(t[0]),this.h()},l(s){e=z(s,"SPAN",{class:!0});var r=G(e);n=H(r,t[0]),r.forEach(p),this.h()},h(){T(e,"class",o=I(`${t[1]} rounded-md text-center px-2 text-sm`)+" svelte-xqpq4y")},m(s,r){J(s,e,r),M(e,n)},p(s,[r]){r&1&&U(n,s[0]),r&2&&o!==(o=I(`${s[1]} rounded-md text-center px-2 text-sm`)+" svelte-xqpq4y")&&T(e,"class",o)},i:E,o:E,d(s){s&&p(e)}}}function wt(t,e,n){let o,s,{status:r}=e;const i={Running:"Running",TimedOut:"Timed Out",Completed:"Completed",Failed:"Failed",ContinuedAsNew:"Continued as New",Canceled:"Canceled",Terminated:"Terminated"},a={Running:"blue",TimedOut:"red",Completed:"green",Failed:"red",ContinuedAsNew:"indigo",Canceled:"yellow",Terminated:"pink"};return t.$$set=u=>{"status"in u&&n(2,r=u.status)},t.$$.update=()=>{t.$$.dirty&4&&n(1,o=a[r]),t.$$.dirty&4&&n(0,s=i[r])},[s,o,r]}class It extends R{constructor(e){super();v(this,e,wt,mt,B,{status:2})}}export{It as W,Tt as a,pt as b,gt as d,dt as f};
