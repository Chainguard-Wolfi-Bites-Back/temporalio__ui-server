import{S as U,i as z,s as A,k as y,l as S,m as C,h as $,b as d,f as _,t as k,J as P,w as b,x as v,y as E,z as T,V,e as W,Y,q as h,r as w,K as g,B as F,a as q,c as D,n as I,u as j}from"../../../../../../../../../chunks/index-6bdaee4d.js";import{p as J}from"../../../../../../../../../chunks/stores-de421f88.js";import{w as G,W as H,a as B}from"../../../../../../../../../chunks/workflow-signal-enabled-4231f9f6.js";import{b as N}from"../../../../../../../../../chunks/query-service-b72a0704.js";import{C as M}from"../../../../../../../../../chunks/code-block-c0ad915e.js";import{B as X}from"../../../../../../../../../chunks/button-152cbc02.js";import{E as K}from"../../../../../../../../../chunks/empty-state-4bc5e943.js";import{L as Z}from"../../../../../../../../../chunks/loading-e952233b.js";import{L as x}from"../../../../../../../../../chunks/link-51c9d8f4.js";import{a as ee}from"../../../../../../../../../chunks/auth-user-73004d2e.js";import{P as te}from"../../../../../../../../../chunks/page-title-87d93540.js";import{e as Q,f as O}from"../../../../../../../../../chunks/workflow-terminate-enabled-8d536b96.js";function re(s){let e,r;return e=new K({props:{title:"No Stack Traces Found",dataCy:"query-stack-trace-empty",$$slots:{default:[le]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){E(e,t,n),r=!0},p(t,n){const a={};n&4096&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function ne(s){let e,r,t,n={ctx:s,current:null,token:null,hasCatch:!0,pending:ie,then:ce,catch:se,value:10,error:11,blocks:[,,,]};return V(r=s[1],n),{c(){e=W(),n.block.c()},l(a){e=W(),n.block.l(a)},m(a,o){d(a,e,o),n.block.m(a,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(a,o){s=a,n.ctx=s,o&2&&r!==(r=s[1])&&V(r,n)||Y(n,s,o)},i(a){t||(_(n.block),t=!0)},o(a){for(let o=0;o<3;o+=1){const l=n.blocks[o];k(l)}t=!1},d(a){a&&$(e),n.block.d(a),n.token=null,n=null}}}function ae(s){var m;let e,r,t,n,a=((m=s[2])==null?void 0:m.taskQueue)+"",o,l,c;return t=new x({props:{href:"https://docs.temporal.io/workflows#stack-trace-query",$$slots:{default:[oe]},$$scope:{ctx:s}}}),{c(){e=y("p"),r=h("To enable "),b(t.$$.fragment),n=h(", run a Worker on the "),o=h(a),l=h(" Task Queue.")},l(i){e=S(i,"P",{});var u=C(e);r=w(u,"To enable "),v(t.$$.fragment,u),n=w(u,", run a Worker on the "),o=w(u,a),l=w(u," Task Queue."),u.forEach($)},m(i,u){d(i,e,u),g(e,r),E(t,e,null),g(e,n),g(e,o),g(e,l),c=!0},p(i,u){const f={};u&4096&&(f.$$scope={dirty:u,ctx:i}),t.$set(f)},i(i){c||(_(t.$$.fragment,i),c=!0)},o(i){k(t.$$.fragment,i),c=!1},d(i){i&&$(e),T(t)}}}function oe(s){let e;return{c(){e=h("stack traces")},l(r){e=w(r,"stack traces")},m(r,t){d(r,e,t)},d(r){r&&$(e)}}}function le(s){var n,a,o;let e,r,t=((n=s[2])==null?void 0:n.isRunning)&&((o=(a=s[3])==null?void 0:a.pollers)==null?void 0:o.length)===0&&ae(s);return{c(){t&&t.c(),e=W()},l(l){t&&t.l(l),e=W()},m(l,c){t&&t.m(l,c),d(l,e,c),r=!0},p(l,c){var m,i,u;(m=l[2])!=null&&m.isRunning&&((u=(i=l[3])==null?void 0:i.pollers)==null?void 0:u.length)===0&&t.p(l,c)},i(l){r||(_(t),r=!0)},o(l){k(t),r=!1},d(l){t&&t.d(l),l&&$(e)}}}function se(s){let e,r;return e=new K({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){E(e,t,n),r=!0},p:F,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function ce(s){let e,r,t,n,a,o=s[0].toLocaleTimeString()+"",l,c,m,i,u;return r=new X({props:{icon:"retry",loading:me,$$slots:{default:[fe]},$$scope:{ctx:s}}}),r.$on("click",s[4]),i=new M({props:{content:s[10],language:"text",dataCy:"query-stack-trace"}}),{c(){e=y("div"),b(r.$$.fragment),t=q(),n=y("p"),a=h("Stack Trace at "),l=h(o),c=q(),m=y("div"),b(i.$$.fragment),this.h()},l(f){e=S(f,"DIV",{class:!0});var p=C(e);v(r.$$.fragment,p),t=D(p),n=S(p,"P",{});var R=C(n);a=w(R,"Stack Trace at "),l=w(R,o),R.forEach($),p.forEach($),c=D(f),m=S(f,"DIV",{class:!0});var L=C(m);v(i.$$.fragment,L),L.forEach($),this.h()},h(){I(e,"class","flex items-center gap-4"),I(m,"class","flex items-start h-full")},m(f,p){d(f,e,p),E(r,e,null),g(e,t),g(e,n),g(n,a),g(n,l),d(f,c,p),d(f,m,p),E(i,m,null),u=!0},p(f,p){const R={};p&4096&&(R.$$scope={dirty:p,ctx:f}),r.$set(R),(!u||p&1)&&o!==(o=f[0].toLocaleTimeString()+"")&&j(l,o);const L={};p&2&&(L.content=f[10]),i.$set(L)},i(f){u||(_(r.$$.fragment,f),_(i.$$.fragment,f),u=!0)},o(f){k(r.$$.fragment,f),k(i.$$.fragment,f),u=!1},d(f){f&&$(e),T(r),f&&$(c),f&&$(m),T(i)}}}function fe(s){let e;return{c(){e=h("Refresh")},l(r){e=w(r,"Refresh")},m(r,t){d(r,e,t)},d(r){r&&$(e)}}}function ie(s){let e,r,t,n,a,o;return r=new Z({}),{c(){e=y("div"),b(r.$$.fragment),t=q(),n=y("p"),a=h("(This will fail if you have no workers running.)"),this.h()},l(l){e=S(l,"DIV",{class:!0});var c=C(e);v(r.$$.fragment,c),t=D(c),n=S(c,"P",{});var m=C(n);a=w(m,"(This will fail if you have no workers running.)"),m.forEach($),c.forEach($),this.h()},h(){I(e,"class","text-center")},m(l,c){d(l,e,c),E(r,e,null),g(e,t),g(e,n),g(n,a),o=!0},p:F,i(l){o||(_(r.$$.fragment,l),o=!0)},o(l){k(r.$$.fragment,l),o=!1},d(l){l&&$(e),T(r)}}}function ue(s){let e,r,t,n;const a=[ne,re],o=[];function l(c,m){var i,u,f;return(i=c[2])!=null&&i.isRunning&&((f=(u=c[3])==null?void 0:u.pollers)==null?void 0:f.length)>0?0:1}return r=l(s),t=o[r]=a[r](s),{c(){e=y("section"),t.c()},l(c){e=S(c,"SECTION",{});var m=C(e);t.l(m),m.forEach($)},m(c,m){d(c,e,m),o[r].m(e,null),n=!0},p(c,[m]){t.p(c,m)},i(c){n||(_(t),n=!0)},o(c){k(t),n=!1},d(c){c&&$(e),o[r].d()}}}let me=!1;function pe(s,e,r){let t,n,a;P(s,ee,p=>r(5,t=p)),P(s,J,p=>r(6,n=p)),P(s,G,p=>r(7,a=p));const{namespace:o}=n.params,{workflow:l,workers:c}=a;let m=new Date;const i=()=>{var p;return N({workflow:l,namespace:o},(p=n.data)===null||p===void 0?void 0:p.settings,t==null?void 0:t.accessToken)};let u;const f=()=>{var p;r(1,u=N({workflow:l,namespace:o},(p=n.data)===null||p===void 0?void 0:p.settings,t==null?void 0:t.accessToken)),u.then(()=>{r(0,m=new Date)})};return l.isRunning&&r(1,u=i()),[m,u,l,c,f]}class $e extends U{constructor(e){super(),z(this,e,pe,ue,A,{})}}function _e(s){let e,r;return e=new $e({}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){E(e,t,n),r=!0},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function ke(s){let e,r,t,n;return e=new te({props:{title:`Stack Trace | ${s[1]}`,url:s[0].url.href}}),t=new H({props:{cancelEnabled:Q(s[0].data.settings),signalEnabled:B(s[0].data.settings),terminateEnabled:O(s[0].data.settings),$$slots:{default:[_e]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),r=q(),b(t.$$.fragment)},l(a){v(e.$$.fragment,a),r=D(a),v(t.$$.fragment,a)},m(a,o){E(e,a,o),d(a,r,o),E(t,a,o),n=!0},p(a,[o]){const l={};o&1&&(l.url=a[0].url.href),e.$set(l);const c={};o&1&&(c.cancelEnabled=Q(a[0].data.settings)),o&1&&(c.signalEnabled=B(a[0].data.settings)),o&1&&(c.terminateEnabled=O(a[0].data.settings)),o&4&&(c.$$scope={dirty:o,ctx:a}),t.$set(c)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){k(e.$$.fragment,a),k(t.$$.fragment,a),n=!1},d(a){T(e,a),a&&$(r),T(t,a)}}}function ge(s,e,r){let t;P(s,J,a=>r(0,t=a));const n=t.params.workflow;return[t,n]}class Pe extends U{constructor(e){super(),z(this,e,ge,ke,A,{})}}export{Pe as default};
