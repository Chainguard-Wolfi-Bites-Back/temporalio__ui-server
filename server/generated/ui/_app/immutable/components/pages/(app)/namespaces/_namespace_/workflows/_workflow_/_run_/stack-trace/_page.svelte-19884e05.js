import{S as N,i as Q,s as O,k as E,l as S,m as C,h as $,b as d,f as _,t as k,J as P,w as b,x as v,y as T,z as y,V,e as q,Y as F,q as h,r as w,K as g,B as U,a as W,c as D,n as I,u as J}from"../../../../../../../../../chunks/index-a4b23632.js";import{p as z}from"../../../../../../../../../chunks/stores-bfb28fb9.js";import{w as K,W as Y}from"../../../../../../../../../chunks/workflow-run-layout-3761adc1.js";import{b as B}from"../../../../../../../../../chunks/query-service-3604c0ef.js";import{C as j}from"../../../../../../../../../chunks/code-block-5a0bd169.js";import{B as G}from"../../../../../../../../../chunks/button-6025b0ce.js";import{E as A}from"../../../../../../../../../chunks/empty-state-b771d0ab.js";import{L as H}from"../../../../../../../../../chunks/loading-9f4eb273.js";import{L as M}from"../../../../../../../../../chunks/link-3ec35267.js";import{a as X}from"../../../../../../../../../chunks/auth-user-8a53b420.js";import{P as Z}from"../../../../../../../../../chunks/page-title-94993ae8.js";function x(l){let e,r;return e=new A({props:{title:"No Stack Traces Found",dataCy:"query-stack-trace-empty",$$slots:{default:[ne]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){T(e,t,n),r=!0},p(t,n){const a={};n&4096&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function ee(l){let e,r,t,n={ctx:l,current:null,token:null,hasCatch:!0,pending:se,then:oe,catch:ae,value:10,error:11,blocks:[,,,]};return V(r=l[1],n),{c(){e=q(),n.block.c()},l(a){e=q(),n.block.l(a)},m(a,o){d(a,e,o),n.block.m(a,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(a,o){l=a,n.ctx=l,o&2&&r!==(r=l[1])&&V(r,n)||F(n,l,o)},i(a){t||(_(n.block),t=!0)},o(a){for(let o=0;o<3;o+=1){const c=n.blocks[o];k(c)}t=!1},d(a){a&&$(e),n.block.d(a),n.token=null,n=null}}}function te(l){var u;let e,r,t,n,a=((u=l[2])==null?void 0:u.taskQueue)+"",o,c,s;return t=new M({props:{href:"https://docs.temporal.io/concepts/what-is-a-query/#stack-trace-query",$$slots:{default:[re]},$$scope:{ctx:l}}}),{c(){e=E("p"),r=h("To enable "),b(t.$$.fragment),n=h(", run a Worker on the "),o=h(a),c=h(" Task Queue.")},l(m){e=S(m,"P",{});var p=C(e);r=w(p,"To enable "),v(t.$$.fragment,p),n=w(p,", run a Worker on the "),o=w(p,a),c=w(p," Task Queue."),p.forEach($)},m(m,p){d(m,e,p),g(e,r),T(t,e,null),g(e,n),g(e,o),g(e,c),s=!0},p(m,p){const f={};p&4096&&(f.$$scope={dirty:p,ctx:m}),t.$set(f)},i(m){s||(_(t.$$.fragment,m),s=!0)},o(m){k(t.$$.fragment,m),s=!1},d(m){m&&$(e),y(t)}}}function re(l){let e;return{c(){e=h("stack traces")},l(r){e=w(r,"stack traces")},m(r,t){d(r,e,t)},d(r){r&&$(e)}}}function ne(l){var n,a;let e,r,t=l[2].isRunning&&((a=(n=l[3])==null?void 0:n.pollers)==null?void 0:a.length)===0&&te(l);return{c(){t&&t.c(),e=q()},l(o){t&&t.l(o),e=q()},m(o,c){t&&t.m(o,c),d(o,e,c),r=!0},p(o,c){var s,u;o[2].isRunning&&((u=(s=o[3])==null?void 0:s.pollers)==null?void 0:u.length)===0&&t.p(o,c)},i(o){r||(_(t),r=!0)},o(o){k(t),r=!1},d(o){t&&t.d(o),o&&$(e)}}}function ae(l){let e,r;return e=new A({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){T(e,t,n),r=!0},p:U,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function oe(l){let e,r,t,n,a,o=l[0].toLocaleTimeString()+"",c,s,u,m,p;return r=new G({props:{icon:"retry",loading:ue,$$slots:{default:[le]},$$scope:{ctx:l}}}),r.$on("click",l[4]),m=new j({props:{content:l[10],language:"text",dataCy:"query-stack-trace"}}),{c(){e=E("div"),b(r.$$.fragment),t=W(),n=E("p"),a=h("Stack Trace at "),c=h(o),s=W(),u=E("div"),b(m.$$.fragment),this.h()},l(f){e=S(f,"DIV",{class:!0});var i=C(e);v(r.$$.fragment,i),t=D(i),n=S(i,"P",{});var R=C(n);a=w(R,"Stack Trace at "),c=w(R,o),R.forEach($),i.forEach($),s=D(f),u=S(f,"DIV",{class:!0});var L=C(u);v(m.$$.fragment,L),L.forEach($),this.h()},h(){I(e,"class","flex items-center gap-4"),I(u,"class","flex items-start h-full")},m(f,i){d(f,e,i),T(r,e,null),g(e,t),g(e,n),g(n,a),g(n,c),d(f,s,i),d(f,u,i),T(m,u,null),p=!0},p(f,i){const R={};i&4096&&(R.$$scope={dirty:i,ctx:f}),r.$set(R),(!p||i&1)&&o!==(o=f[0].toLocaleTimeString()+"")&&J(c,o);const L={};i&2&&(L.content=f[10]),m.$set(L)},i(f){p||(_(r.$$.fragment,f),_(m.$$.fragment,f),p=!0)},o(f){k(r.$$.fragment,f),k(m.$$.fragment,f),p=!1},d(f){f&&$(e),y(r),f&&$(s),f&&$(u),y(m)}}}function le(l){let e;return{c(){e=h("Refresh")},l(r){e=w(r,"Refresh")},m(r,t){d(r,e,t)},d(r){r&&$(e)}}}function se(l){let e,r,t,n,a,o;return r=new H({}),{c(){e=E("div"),b(r.$$.fragment),t=W(),n=E("p"),a=h("(This will fail if you have no workers running.)"),this.h()},l(c){e=S(c,"DIV",{class:!0});var s=C(e);v(r.$$.fragment,s),t=D(s),n=S(s,"P",{});var u=C(n);a=w(u,"(This will fail if you have no workers running.)"),u.forEach($),s.forEach($),this.h()},h(){I(e,"class","text-center")},m(c,s){d(c,e,s),T(r,e,null),g(e,t),g(e,n),g(n,a),o=!0},p:U,i(c){o||(_(r.$$.fragment,c),o=!0)},o(c){k(r.$$.fragment,c),o=!1},d(c){c&&$(e),y(r)}}}function ce(l){let e,r,t,n;const a=[ee,x],o=[];function c(s,u){var m,p;return s[2].isRunning&&((p=(m=s[3])==null?void 0:m.pollers)==null?void 0:p.length)>0?0:1}return r=c(l),t=o[r]=a[r](l),{c(){e=E("section"),t.c()},l(s){e=S(s,"SECTION",{});var u=C(e);t.l(u),u.forEach($)},m(s,u){d(s,e,u),o[r].m(e,null),n=!0},p(s,[u]){t.p(s,u)},i(s){n||(_(t),n=!0)},o(s){k(t),n=!1},d(s){s&&$(e),o[r].d()}}}let ue=!1;function ie(l,e,r){let t,n,a;P(l,X,i=>r(5,t=i)),P(l,z,i=>r(6,n=i)),P(l,K,i=>r(7,a=i));const{namespace:o}=n.params,{workflow:c,workers:s}=a;let u=new Date;const m=()=>{var i;return B({workflow:c,namespace:o},(i=n.data)===null||i===void 0?void 0:i.settings,t==null?void 0:t.accessToken)};let p;const f=()=>{var i;r(1,p=B({workflow:c,namespace:o},(i=n.data)===null||i===void 0?void 0:i.settings,t==null?void 0:t.accessToken)),p.then(()=>{r(0,u=new Date)})};return c.isRunning&&r(1,p=m()),[u,p,c,s,f]}class fe extends N{constructor(e){super(),Q(this,e,ie,ce,O,{})}}function me(l){let e,r;return e=new fe({}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,n){T(e,t,n),r=!0},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function pe(l){let e,r,t,n;return e=new Z({props:{title:`Stack Trace | ${l[2]}`,url:l[0].url.href}}),t=new Y({props:{cancelEnabled:!l[1],signalEnabled:!l[1],$$slots:{default:[me]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),r=W(),b(t.$$.fragment)},l(a){v(e.$$.fragment,a),r=D(a),v(t.$$.fragment,a)},m(a,o){T(e,a,o),d(a,r,o),T(t,a,o),n=!0},p(a,[o]){const c={};o&1&&(c.url=a[0].url.href),e.$set(c);const s={};o&2&&(s.cancelEnabled=!a[1]),o&2&&(s.signalEnabled=!a[1]),o&64&&(s.$$scope={dirty:o,ctx:a}),t.$set(s)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){k(e.$$.fragment,a),k(t.$$.fragment,a),n=!1},d(a){y(e,a),a&&$(r),y(t,a)}}}function $e(l,e,r){let t,n;P(l,z,u=>r(0,n=u));var a,o,c;const s=n.params.workflow;return l.$$.update=()=>{l.$$.dirty&57&&r(1,t=r(5,c=r(4,o=r(3,a=n.data)===null||a===void 0?void 0:a.settings)===null||o===void 0?void 0:o.runtimeEnvironment)===null||c===void 0?void 0:c.isCloud)},[n,t,s,a,o,c]}class Se extends N{constructor(e){super(),Q(this,e,$e,pe,O,{})}}export{Se as default};
