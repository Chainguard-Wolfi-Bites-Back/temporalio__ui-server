import{S as oe,i as ae,s as se,J as ye,l as y,m as I,n as A,h as m,b as S,K as Ie,L as Ee,M as Te,f as p,ag as Xe,ah as et,t as g,ai as tt,x as $,a as M,e as Le,y as k,c as R,z as b,g as pe,d as he,C as v,O as q,r as z,u as O,p as d,N as w,F as ie,a0 as rt,a8 as nt,a9 as ot,a4 as j,E as at,U as Fe,H as st,X as lt,I as it,v as ft,o as Ye,aq as Ae,ak as Ve}from"../../../../../../chunks/index-a7390e4f.js";import{p as Ge}from"../../../../../../chunks/stores-77f5a84f.js";import{r as ne,w as Ze,l as ut}from"../../../../../../chunks/workflow-run-85ecd4eb.js";import{e as ct,t as Ne,c as mt}from"../../../../../../chunks/events-1e9ee7ff.js";import{f as _e}from"../../../../../../chunks/index-b9071518.js";import{I as pt}from"../../../../../../chunks/icon-01236aa5.js";import{a as me,e as ht,b as Ue}from"../../../../../../chunks/event-view-bfed4a5d.js";import{t as _t,w as gt}from"../../../../../../chunks/terminate-service-32700d13.js";import{g as ce,h as de,i as $e,j as ke,k as be,l as Be}from"../../../../../../chunks/route-for-ec0d3387.js";import{w as wt,c as dt,t as $t}from"../../../../../../chunks/workflow-service-db97a79b.js";import{c as kt,W as bt}from"../../../../../../chunks/core-user-4d86fcab.js";import{s as vt}from"../../../../../../chunks/settings-73de400d.js";import{M as Qe}from"../../../../../../chunks/modal-eeed290f.js";import{T as xe}from"../../../../../../chunks/tooltip-4bf5d09e.js";import{S as yt}from"../../../../../../chunks/split-button-1b7ef784.js";import{M as It}from"../../../../../../chunks/menu-item-2beb828e.js";import{t as ve}from"../../../../../../chunks/toaster-e5937319.js";import{I as Et}from"../../../../../../chunks/input-3ef69522.js";import{T as ue}from"../../../../../../chunks/tab-01c80580.js";import{A as Tt}from"../../../../../../chunks/alert-ad763c80.js";import{L as At}from"../../../../../../chunks/loading-3b8b668e.js";import"../../../../../../chunks/index-523d4e79.js";import"../../../../../../chunks/with-loading-f07bedaf.js";import"../../../../../../chunks/pollers-service-4f6bb656.js";import"../../../../../../chunks/route-for-api-6aaa2188.js";import"../../../../../../chunks/auth-user-ff2d5f64.js";import"../../../../../../chunks/persist-store-e90e9771.js";import"../../../../../../chunks/parse-with-big-int-561ccb8b.js";import"../../../../../../chunks/notifications-c6db3b68.js";import"../../../../../../chunks/is-network-error-5f9e2367.js";import"../../../../../../chunks/is-http-23096744.js";import"../../../../../../chunks/get-codec-3c5a1e4e.js";import"../../../../../../chunks/data-converter-config-f8bd6697.js";import"../../../../../../chunks/atob-7f23bde9.js";import"../../../../../../chunks/events-service-15f52f4b.js";import"../../../../../../chunks/paginated-3c6dfff3.js";import"../../../../../../chunks/index-971762ca.js";import"../../../../../../chunks/format-date-c1755997.js";import"../../../../../../chunks/format-time-d031c2bc.js";import"../../../../../../chunks/is-44021919.js";import"../../../../../../chunks/index-7ac5c549.js";import"../../../../../../chunks/has-c7a26a56.js";import"../../../../../../chunks/get-event-categorization-2cfb578f.js";import"../../../../../../chunks/simplify-attributes-055c76f2.js";import"../../../../../../chunks/versions-505b0ae3.js";import"../../../../../../chunks/version-check-aea68515.js";import"../../../../../../chunks/v4-f2cd1a04.js";import"../../../../../../chunks/button-62a552db.js";import"../../../../../../chunks/badge-461873dc.js";import"../../../../../../chunks/copy-to-clipboard-b8d63b4e.js";import"../../../../../../chunks/menu-e574f19f.js";import"../../../../../../chunks/icon-button-11b605c1.js";function Wt(o){let e,r,t,s;const n=o[1].default,a=ye(n,o,o[0],null);return{c(){e=y("div"),a&&a.c()},l(l){e=I(l,"DIV",{});var i=A(e);a&&a.l(i),i.forEach(m)},m(l,i){S(l,e,i),a&&a.m(e,null),s=!0},p(l,[i]){a&&a.p&&(!s||i&1)&&Ie(a,n,l,l[0],s?Te(n,l[0],i,null):Ee(l[0]),null)},i(l){s||(p(a,l),Xe(()=>{t&&t.end(1),r=et(e,_e,{y:-50,duration:150,delay:50}),r.start()}),s=!0)},o(l){g(a,l),r&&r.invalidate(),t=tt(e,_e,{y:-50,duration:150}),s=!1},d(l){l&&m(e),a&&a.d(l),l&&t&&t.end()}}}function Ct(o,e,r){let{$$slots:t={},$$scope:s}=e;return o.$$set=n=>{"$$scope"in n&&r(0,s=n.$$scope)},[s,t]}class Pt extends oe{constructor(e){super(),ae(this,e,Ct,Wt,se,{})}}function St(o){let e;return{c(){e=z("Terminate")},l(r){e=O(r,"Terminate")},m(r,t){S(r,e,t)},d(r){r&&m(e)}}}function Dt(o){let e,r;return e=new It({props:{destructive:!0,disabled:o[5],dataCy:"terminate-button",$$slots:{default:[St]},$$scope:{ctx:o}}}),e.$on("click",o[6]),{c(){$(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,s){b(e,t,s),r=!0},p(t,s){const n={};s&32&&(n.disabled=t[5]),s&1048576&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Mt(o){let e,r;return e=new yt({props:{primaryActionDisabled:o[0],disabled:o[5],label:"Request Cancellation",id:"workflow-actions",$$slots:{default:[Dt]},$$scope:{ctx:o}}}),e.$on("click",o[8]),{c(){$(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,s){b(e,t,s),r=!0},p(t,s){const n={};s&1&&(n.primaryActionDisabled=t[0]),s&32&&(n.disabled=t[5]),s&1048608&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function je(o){let e,r,t,s;return e=new Qe({props:{open:o[3],loading:o[4],confirmType:"destructive",$$slots:{content:[qt],title:[Rt]},$$scope:{ctx:o}}}),e.$on("cancelModal",o[9]),e.$on("confirmModal",o[11]),t=new Qe({props:{open:o[2],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[Lt],title:[Ht]},$$scope:{ctx:o}}}),t.$on("cancelModal",o[7]),t.$on("confirmModal",o[10]),{c(){$(e.$$.fragment),r=M(),$(t.$$.fragment)},l(n){k(e.$$.fragment,n),r=R(n),k(t.$$.fragment,n)},m(n,a){b(e,n,a),S(n,r,a),b(t,n,a),s=!0},p(n,a){const l={};a&8&&(l.open=n[3]),a&16&&(l.loading=n[4]),a&1048576&&(l.$$scope={dirty:a,ctx:n}),e.$set(l);const i={};a&4&&(i.open=n[2]),a&1048578&&(i.$$scope={dirty:a,ctx:n}),t.$set(i)},i(n){s||(p(e.$$.fragment,n),p(t.$$.fragment,n),s=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),s=!1},d(n){v(e,n),n&&m(r),v(t,n)}}}function Rt(o){let e,r;return{c(){e=y("h3"),r=z("Cancel Workflow"),this.h()},l(t){e=I(t,"H3",{slot:!0});var s=A(e);r=O(s,"Cancel Workflow"),s.forEach(m),this.h()},h(){d(e,"slot","title")},m(t,s){S(t,e,s),w(e,r)},p:ie,d(t){t&&m(e)}}}function qt(o){let e,r;return{c(){e=y("p"),r=z(`Are you sure you want to cancel this workflow? This action cannot be
        undone.`)},l(t){e=I(t,"P",{});var s=A(e);r=O(s,`Are you sure you want to cancel this workflow? This action cannot be
        undone.`),s.forEach(m)},m(t,s){S(t,e,s),w(e,r)},p:ie,d(t){t&&m(e)}}}function Ht(o){let e,r;return{c(){e=y("h3"),r=z("Terminate Workflow"),this.h()},l(t){e=I(t,"H3",{slot:!0});var s=A(e);r=O(s,"Terminate Workflow"),s.forEach(m),this.h()},h(){d(e,"slot","title")},m(t,s){S(t,e,s),w(e,r)},p:ie,d(t){t&&m(e)}}}function Lt(o){let e,r,t,s,n,a,l;function i(c){o[16](c)}let _={id:"workflow-termination-reason",class:"mt-4",placeholder:"Enter a reason"};return o[1]!==void 0&&(_.value=o[1]),n=new Et({props:_}),rt.push(()=>nt(n,"value",i)),{c(){e=y("div"),r=y("p"),t=z(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),s=M(),$(n.$$.fragment),this.h()},l(c){e=I(c,"DIV",{slot:!0});var u=A(e);r=I(u,"P",{});var C=A(r);t=O(C,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),C.forEach(m),s=R(u),k(n.$$.fragment,u),u.forEach(m),this.h()},h(){d(e,"slot","content")},m(c,u){S(c,e,u),w(e,r),w(r,t),w(e,s),b(n,e,null),l=!0},p(c,u){const C={};!a&&u&2&&(a=!0,C.value=c[1],ot(()=>a=!1)),n.$set(C)},i(c){l||(p(n.$$.fragment,c),l=!0)},o(c){g(n.$$.fragment,c),l=!1},d(c){c&&m(e),v(n)}}}function Ft(o){let e,r,t,s;e=new xe({props:{bottomLeft:!0,hide:!o[5],width:200,text:"You do not have permission to edit this workflow. Contact your admin for assistance.",$$slots:{default:[Mt]},$$scope:{ctx:o}}});let n=!o[5]&&je(o);return{c(){$(e.$$.fragment),r=M(),n&&n.c(),t=Le()},l(a){k(e.$$.fragment,a),r=R(a),n&&n.l(a),t=Le()},m(a,l){b(e,a,l),S(a,r,l),n&&n.m(a,l),S(a,t,l),s=!0},p(a,[l]){const i={};l&32&&(i.hide=!a[5]),l&1048609&&(i.$$scope={dirty:l,ctx:a}),e.$set(i),a[5]?n&&(pe(),g(n,1,1,()=>{n=null}),he()):n?(n.p(a,l),l&32&&p(n,1)):(n=je(a),n.c(),p(n,1),n.m(t.parentNode,t))},i(a){s||(p(e.$$.fragment,a),p(n),s=!0)},o(a){g(e.$$.fragment,a),g(n),s=!1},d(a){v(e,a),a&&m(r),n&&n.d(a),a&&m(t)}}}function Vt(o,e,r){let t,s,n;q(o,ne,D=>r(17,n=D));let{workflow:a}=e,{namespace:l}=e,{cancelInProgress:i}=e,_="",c=!1,u=!1,C=!1;const F=()=>r(2,c=!0),V=()=>r(2,c=!1),Q=()=>r(3,u=!0),H=()=>r(3,u=!1),x=async()=>{r(2,c=!1),r(1,_=""),j(ne,n=Date.now(),n),await at(),ve.push({id:"workflow-termination-success-toast",message:"Workflow terminated.",variant:"success",yPosition:"top"})},J=()=>{r(2,c=!1),r(1,_=""),ve.push({message:"Cannot terminate workflow.",variant:"error"})},P=()=>{!a.canBeTerminated||_t({workflow:a,namespace:l,reason:_}).then(x).catch(J)},N=async()=>{r(4,C=!0);try{await dt({namespace:l,workflowId:a.id,runId:a.runId}),r(4,C=!1),r(3,u=!1),j(ne,n=Date.now(),n)}catch{ve.push({yPosition:"top",variant:"error",message:"Unable to cancel workflow."})}};let K=kt();q(o,K,D=>r(15,s=D));function h(D){_=D,r(1,_)}return o.$$set=D=>{"workflow"in D&&r(13,a=D.workflow),"namespace"in D&&r(14,l=D.namespace),"cancelInProgress"in D&&r(0,i=D.cancelInProgress)},o.$$.update=()=>{o.$$.dirty&49152&&r(5,t=s.namespaceWriteDisabled(l)||!wt(vt))},[i,_,c,u,C,t,F,V,Q,H,P,N,K,a,l,s,h]}class Nt extends oe{constructor(e){super(),ae(this,e,Vt,Ft,se,{workflow:13,namespace:14,cancelInProgress:0})}}const ze=o=>{const e=o==null?void 0:o.indexOf("?");return e>-1?o.slice(0,e):o},B=(o,e,r=!1)=>{const t=ze(o).split("/"),s=ze(e).split("/");if(r&&t.length!==s.length)return!1;for(let n=0;n<t.length;n++){const a=t[n],l=s[n];if(a!==l)return!1}return!0};function Ut(o){let e,r,t,s,n,a;return{c(){e=y("label"),r=y("input"),t=M(),s=y("span"),this.h()},l(l){e=I(l,"LABEL",{for:!0,class:!0});var i=A(e);r=I(i,"INPUT",{id:!0,type:!0,class:!0}),t=R(i),s=I(i,"SPAN",{class:!0}),A(s).forEach(m),i.forEach(m),this.h()},h(){d(r,"id",o[1]),d(r,"type","checkbox"),d(r,"class","hidden svelte-1ie64yz"),d(s,"class","slider svelte-1ie64yz"),d(e,"for",o[1]),d(e,"class","switch svelte-1ie64yz")},m(l,i){S(l,e,i),w(e,r),r.checked=o[0],w(e,t),w(e,s),n||(a=[Fe(r,"change",o[2]),Fe(r,"change",o[3])],n=!0)},p(l,[i]){i&2&&d(r,"id",l[1]),i&1&&(r.checked=l[0]),i&2&&d(e,"for",l[1])},i:ie,o:ie,d(l){l&&m(e),n=!1,st(a)}}}function Bt(o,e,r){let{checked:t=!1}=e,{id:s}=e;function n(l){lt.call(this,o,l)}function a(){t=this.checked,r(0,t)}return o.$$set=l=>{"checked"in l&&r(0,t=l.checked),"id"in l&&r(1,s=l.id)},[t,s,n,a]}class Qt extends oe{constructor(e){super(),ae(this,e,Bt,Ut,se,{checked:0,id:1})}}function jt(o){let e,r;return e=new Qt({props:{id:"autorefresh",checked:o[1]}}),e.$on("change",function(){it(o[0])&&o[0].apply(this,arguments)}),{c(){$(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,s){b(e,t,s),r=!0},p(t,s){o=t;const n={};s&2&&(n.checked=o[1]),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function zt(o){let e,r,t,s,n;return s=new xe({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[jt]},$$scope:{ctx:o}}}),{c(){e=y("label"),r=z("Auto refresh"),t=M(),$(s.$$.fragment),this.h()},l(a){e=I(a,"LABEL",{for:!0,class:!0});var l=A(e);r=O(l,"Auto refresh"),l.forEach(m),t=R(a),k(s.$$.fragment,a),this.h()},h(){d(e,"for","autorefresh"),d(e,"class","font-secondary text-sm")},m(a,l){S(a,e,l),w(e,r),S(a,t,l),b(s,a,l),n=!0},p(a,[l]){const i={};l&11&&(i.$$scope={dirty:l,ctx:a}),s.$set(i)},i(a){n||(p(s.$$.fragment,a),n=!0)},o(a){g(s.$$.fragment,a),n=!1},d(a){a&&m(e),a&&m(t),v(s,a)}}}function Ot(o,e,r){let t,s;q(o,me,a=>r(2,s=a));let{onChange:n}=e;return o.$$set=a=>{"onChange"in a&&r(0,n=a.onChange)},o.$$.update=()=>{o.$$.dirty&4&&r(1,t=s==="on")},[n,t,s]}class Jt extends oe{constructor(e){super(),ae(this,e,Ot,zt,se,{onChange:0})}}function Oe(o){let e,r,t,s,n;return r=new Jt({props:{onChange:o[10]}}),s=new Nt({props:{cancelInProgress:o[4],workflow:o[1],namespace:o[0]}}),{c(){e=y("div"),$(r.$$.fragment),t=M(),$(s.$$.fragment),this.h()},l(a){e=I(a,"DIV",{class:!0});var l=A(e);k(r.$$.fragment,l),t=R(l),k(s.$$.fragment,l),l.forEach(m),this.h()},h(){d(e,"class","flex items-center justify-start gap-4 xl:justify-end")},m(a,l){S(a,e,l),b(r,e,null),w(e,t),b(s,e,null),n=!0},p(a,l){const i={};l&16&&(i.cancelInProgress=a[4]),l&2&&(i.workflow=a[1]),l&1&&(i.namespace=a[0]),s.$set(i)},i(a){n||(p(r.$$.fragment,a),p(s.$$.fragment,a),n=!0)},o(a){g(r.$$.fragment,a),g(s.$$.fragment,a),n=!1},d(a){a&&m(e),v(r),v(s)}}}function Je(o){let e,r,t,s;return r=new Tt({props:{icon:"info",intent:"info",title:"Cancel Request Sent",$$slots:{default:[Kt]},$$scope:{ctx:o}}}),{c(){e=y("div"),$(r.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var a=A(e);k(r.$$.fragment,a),a.forEach(m),this.h()},h(){d(e,"class","-mt-4 mb-4")},m(n,a){S(n,e,a),b(r,e,null),s=!0},i(n){s||(p(r.$$.fragment,n),Xe(()=>{t||(t=Ve(e,_e,{duration:200,delay:100},!0)),t.run(1)}),s=!0)},o(n){g(r.$$.fragment,n),t||(t=Ve(e,_e,{duration:200,delay:100},!1)),t.run(0),s=!1},d(n){n&&m(e),v(r),n&&t&&t.end()}}}function Kt(o){let e;return{c(){e=z(`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},l(r){e=O(r,`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},m(r,t){S(r,e,t)},d(r){r&&m(e)}}}function Xt(o){var We,Ce,Pe,Se,De;let e,r,t,s,n,a,l,i,_,c,u,C,F,V=o[1].id+"",Q,H,x,J,P,N,K,h,D,X,ge,Y,we,G,le;n=new pt({props:{name:"chevron-left",class:"inline"}}),u=new bt({props:{status:(We=o[1])==null?void 0:We.status}});let E=o[3]&&Oe(o),W=o[4]&&Je(o);return N=new ue({props:{label:"History",href:ce({view:o[5],...o[7]}),amount:(Ce=o[1])==null?void 0:Ce.historyEvents,dataCy:"history-tab",active:B(o[6].url.pathname,ce({view:o[5],...o[7]}))}}),h=new ue({props:{label:"Workers",href:de(o[7]),amount:(Se=(Pe=o[2])==null?void 0:Pe.pollers)==null?void 0:Se.length,dataCy:"workers-tab",active:B(o[6].url.pathname,de(o[7]))}}),X=new ue({props:{label:"Pending Activities",href:$e(o[7]),amount:(De=o[1].pendingActivities)==null?void 0:De.length,dataCy:"pending-activities-tab",active:B(o[6].url.pathname,$e(o[7]))}}),Y=new ue({props:{label:"Stack Trace",href:ke(o[7]),dataCy:"stack-trace-tab",active:B(o[6].url.pathname,ke(o[7]))}}),G=new ue({props:{label:"Queries",href:be(o[7]),dataCy:"queries-tab",active:B(o[6].url.pathname,be(o[7]))}}),{c(){e=y("header"),r=y("main"),t=y("div"),s=y("a"),$(n.$$.fragment),a=z("Back to Workflows"),i=M(),_=y("div"),c=y("h1"),$(u.$$.fragment),C=M(),F=y("span"),Q=z(V),H=M(),E&&E.c(),x=M(),W&&W.c(),J=M(),P=y("nav"),$(N.$$.fragment),K=M(),$(h.$$.fragment),D=M(),$(X.$$.fragment),ge=M(),$(Y.$$.fragment),we=M(),$(G.$$.fragment),this.h()},l(f){e=I(f,"HEADER",{class:!0});var T=A(e);r=I(T,"MAIN",{class:!0});var U=A(r);t=I(U,"DIV",{class:!0});var ee=A(t);s=I(ee,"A",{href:!0,"data-cy":!0,class:!0});var te=A(s);k(n.$$.fragment,te),a=O(te,"Back to Workflows"),te.forEach(m),ee.forEach(m),i=R(U),_=I(U,"DIV",{class:!0});var Z=A(_);c=I(Z,"H1",{"data-cy":!0,class:!0});var re=A(c);k(u.$$.fragment,re),C=R(re),F=I(re,"SPAN",{class:!0});var fe=A(F);Q=O(fe,V),fe.forEach(m),re.forEach(m),H=R(Z),E&&E.l(Z),Z.forEach(m),x=R(U),W&&W.l(U),J=R(U),P=I(U,"NAV",{class:!0});var L=A(P);k(N.$$.fragment,L),K=R(L),k(h.$$.fragment,L),D=R(L),k(X.$$.fragment,L),ge=R(L),k(Y.$$.fragment,L),we=R(L),k(G.$$.fragment,L),L.forEach(m),U.forEach(m),T.forEach(m),this.h()},h(){d(s,"href",l=Be({namespace:o[0],query:o[9],search:o[8]})),d(s,"data-cy","back-to-workflows"),d(s,"class","back-to-workflows svelte-st9g8m"),d(t,"class","-mt-3 -ml-2 mb-4 block"),d(F,"class","select-all font-medium"),d(c,"data-cy","workflow-id-heading"),d(c,"class","relative flex items-center gap-4 text-2xl"),d(_,"class","mb-8 flex flex-col items-center justify-between gap-4 xl:flex-row xl:gap-0"),d(P,"class","flex flex-wrap gap-6"),d(r,"class","relative flex flex-col gap-1"),d(e,"class","mb-4 flex flex-col gap-4")},m(f,T){S(f,e,T),w(e,r),w(r,t),w(t,s),b(n,s,null),w(s,a),w(r,i),w(r,_),w(_,c),b(u,c,null),w(c,C),w(c,F),w(F,Q),w(_,H),E&&E.m(_,null),w(r,x),W&&W.m(r,null),w(r,J),w(r,P),b(N,P,null),w(P,K),b(h,P,null),w(P,D),b(X,P,null),w(P,ge),b(Y,P,null),w(P,we),b(G,P,null),le=!0},p(f,[T]){var L,Me,Re,qe,He;(!le||T&1&&l!==(l=Be({namespace:f[0],query:f[9],search:f[8]})))&&d(s,"href",l);const U={};T&2&&(U.status=(L=f[1])==null?void 0:L.status),u.$set(U),(!le||T&2)&&V!==(V=f[1].id+"")&&ft(Q,V),f[3]?E?(E.p(f,T),T&8&&p(E,1)):(E=Oe(f),E.c(),p(E,1),E.m(_,null)):E&&(pe(),g(E,1,1,()=>{E=null}),he()),f[4]?W?T&16&&p(W,1):(W=Je(f),W.c(),p(W,1),W.m(r,J)):W&&(pe(),g(W,1,1,()=>{W=null}),he());const ee={};T&32&&(ee.href=ce({view:f[5],...f[7]})),T&2&&(ee.amount=(Me=f[1])==null?void 0:Me.historyEvents),T&96&&(ee.active=B(f[6].url.pathname,ce({view:f[5],...f[7]}))),N.$set(ee);const te={};T&4&&(te.amount=(qe=(Re=f[2])==null?void 0:Re.pollers)==null?void 0:qe.length),T&64&&(te.active=B(f[6].url.pathname,de(f[7]))),h.$set(te);const Z={};T&2&&(Z.amount=(He=f[1].pendingActivities)==null?void 0:He.length),T&64&&(Z.active=B(f[6].url.pathname,$e(f[7]))),X.$set(Z);const re={};T&64&&(re.active=B(f[6].url.pathname,ke(f[7]))),Y.$set(re);const fe={};T&64&&(fe.active=B(f[6].url.pathname,be(f[7]))),G.$set(fe)},i(f){le||(p(n.$$.fragment,f),p(u.$$.fragment,f),p(E),p(W),p(N.$$.fragment,f),p(h.$$.fragment,f),p(X.$$.fragment,f),p(Y.$$.fragment,f),p(G.$$.fragment,f),le=!0)},o(f){g(n.$$.fragment,f),g(u.$$.fragment,f),g(E),g(W),g(N.$$.fragment,f),g(h.$$.fragment,f),g(X.$$.fragment,f),g(Y.$$.fragment,f),g(G.$$.fragment,f),le=!1},d(f){f&&m(e),v(n),v(u),E&&E.d(),W&&W.d(),v(N),v(h),v(X),v(Y),v(G)}}}const Ke=15e3;function Yt(o,e,r){let t,s,n,a,l,i,_,c,u;q(o,ct,h=>r(13,n=h)),q(o,Ze,h=>r(14,a=h)),q(o,ne,h=>r(15,l=h)),q(o,me,h=>r(16,i=h)),q(o,gt,h=>r(17,_=h)),q(o,ht,h=>r(5,c=h)),q(o,Ge,h=>r(6,u=h));var C;let{namespace:F}=e,{workflow:V}=e,{workers:Q}=e,H;const x={namespace:F,workflow:V.id,run:V.runId},{parameters:J,searchType:P}=_,N=$t(J);Ye(()=>{t&&i==="on"&&(clearInterval(H),r(12,H=setInterval(()=>j(ne,l=Date.now(),l),Ke)))});const K=()=>{i==="on"?(j(me,i="off",i),clearInterval(H)):(j(ne,l=Date.now(),l),j(me,i="on",i),clearInterval(H),r(12,H=setInterval(()=>j(ne,l=Date.now(),l),Ke)))};return Ae(()=>{clearInterval(H)}),o.$$set=h=>{"namespace"in h&&r(0,F=h.namespace),"workflow"in h&&r(1,V=h.workflow),"workers"in h&&r(2,Q=h.workers)},o.$$.update=()=>{o.$$.dirty&16384&&r(3,t=a.workflow.isRunning),o.$$.dirty&4104&&(t||clearInterval(H)),o.$$.dirty&26624&&r(4,s=(r(11,C=a==null?void 0:a.workflow)===null||C===void 0?void 0:C.status)==="Running"&&n.events.some(h=>(h==null?void 0:h.eventType)==="WorkflowExecutionCancelRequested"))},[F,V,Q,t,s,c,u,x,P,N,K,C,H,n,a]}class Gt extends oe{constructor(e){super(),ae(this,e,Yt,Xt,se,{namespace:0,workflow:1,workers:2})}}function Zt(o){let e,r;return e=new Pt({props:{$$slots:{default:[er]},$$scope:{ctx:o}}}),{c(){$(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,s){b(e,t,s),r=!0},p(t,s){const n={};s&18&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function xt(o){let e,r;return e=new At({}),{c(){$(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,s){b(e,t,s),r=!0},p:ie,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function er(o){let e,r,t;e=new Gt({props:{namespace:o[2],workflow:o[1].workflow,workers:o[1].workers}});const s=o[3].default,n=ye(s,o,o[4],null);return{c(){$(e.$$.fragment),r=M(),n&&n.c()},l(a){k(e.$$.fragment,a),r=R(a),n&&n.l(a)},m(a,l){b(e,a,l),S(a,r,l),n&&n.m(a,l),t=!0},p(a,l){const i={};l&2&&(i.workflow=a[1].workflow),l&2&&(i.workers=a[1].workers),e.$set(i),n&&n.p&&(!t||l&16)&&Ie(n,s,a,a[4],t?Te(s,a[4],l,null):Ee(a[4]),null)},i(a){t||(p(e.$$.fragment,a),p(n,a),t=!0)},o(a){g(e.$$.fragment,a),g(n,a),t=!1},d(a){v(e,a),a&&m(r),n&&n.d(a)}}}function tr(o){let e,r,t,s;const n=[xt,Zt],a=[];function l(i,_){return i[0]?0:1}return r=l(o),t=a[r]=n[r](o),{c(){e=y("main"),t.c(),this.h()},l(i){e=I(i,"MAIN",{class:!0});var _=A(e);t.l(_),_.forEach(m),this.h()},h(){d(e,"class","flex h-full flex-col gap-6")},m(i,_){S(i,e,_),a[r].m(e,null),s=!0},p(i,[_]){let c=r;r=l(i),r===c?a[r].p(i,_):(pe(),g(a[c],1,1,()=>{a[c]=null}),he(),t=a[r],t?t.p(i,_):(t=a[r]=n[r](i),t.c()),p(t,1),t.m(e,null))},i(i){s||(p(t),s=!0)},o(i){g(t),s=!1},d(i){i&&m(e),a[r].d()}}}function rr(o,e,r){let t,s,n,a,l;q(o,Ne,u=>r(5,t=u)),q(o,Ue,u=>r(6,s=u)),q(o,Ge,u=>r(7,n=u)),q(o,ut,u=>r(0,a=u)),q(o,Ze,u=>r(1,l=u));let{$$slots:i={},$$scope:_}=e;const{namespace:c}=n.params;return Ye(()=>{const u=n.url.searchParams.get("sort");u&&j(Ue,s=u,s)}),Ae(()=>{j(Ne,t=null,t)}),o.$$set=u=>{"$$scope"in u&&r(4,_=u.$$scope)},[a,l,c,i,_]}class nr extends oe{constructor(e){super(),ae(this,e,rr,tr,se,{})}}function or(o){let e;const r=o[0].default,t=ye(r,o,o[1],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&2)&&Ie(t,r,s,s[1],e?Te(r,s[1],n,null):Ee(s[1]),null)},i(s){e||(p(t,s),e=!0)},o(s){g(t,s),e=!1},d(s){t&&t.d(s)}}}function ar(o){let e,r;return e=new nr({props:{$$slots:{default:[or]},$$scope:{ctx:o}}}),{c(){$(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,s){b(e,t,s),r=!0},p(t,[s]){const n={};s&2&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function sr(o,e,r){let{$$slots:t={},$$scope:s}=e;return Ae(()=>{mt()}),o.$$set=n=>{"$$scope"in n&&r(1,s=n.$$scope)},[t,s]}class an extends oe{constructor(e){super(),ae(this,e,sr,ar,se,{})}}export{an as default};
