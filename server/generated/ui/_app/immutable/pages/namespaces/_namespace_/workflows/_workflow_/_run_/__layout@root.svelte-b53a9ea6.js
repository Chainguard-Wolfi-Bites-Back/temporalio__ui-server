import{S as oe,i as ae,s as se,J as ye,l as I,m as E,n as W,h as p,b as P,K as Ie,L as Ee,M as Te,f as h,ag as Ye,ah as et,t as w,ai as tt,x as k,a as M,e as Le,y as v,c as R,z as b,g as de,d as ge,C as y,O as q,r as J,u as K,p as d,N as _,F as fe,a0 as rt,a8 as nt,a9 as ot,a4 as z,E as at,W as Ve,H as st,T as lt,I as it,v as ft,o as Ge,aq as We,ak as Fe}from"../../../../../../chunks/index-0a89fd56.js";import{p as Xe}from"../../../../../../chunks/stores-cc75c44f.js";import{r as ne,w as Ze,l as ut}from"../../../../../../chunks/workflow-run-003d9f43.js";import{e as ct,t as Ne,c as mt}from"../../../../../../chunks/events-ec544b69.js";import{f as $e}from"../../../../../../chunks/index-f35a5be1.js";import{I as pt}from"../../../../../../chunks/icon-547f7300.js";import{a as _e,e as ht,b as je}from"../../../../../../chunks/event-view-393ad965.js";import{t as wt,w as _t}from"../../../../../../chunks/terminate-service-932fcdd3.js";import{g as ce,h as me,i as pe,j as he,k as we,l as Be}from"../../../../../../chunks/route-for-369a155d.js";import{w as dt,c as gt,t as $t}from"../../../../../../chunks/workflow-service-97d19ce2.js";import{c as kt,W as vt}from"../../../../../../chunks/core-user-bf063500.js";import{s as bt}from"../../../../../../chunks/settings-b2c21ef9.js";import{M as Qe}from"../../../../../../chunks/modal-71d77350.js";import{T as xe}from"../../../../../../chunks/tooltip-3d438461.js";import{S as yt}from"../../../../../../chunks/split-button-c0f86599.js";import{M as It}from"../../../../../../chunks/menu-item-77ab93d1.js";import{t as be}from"../../../../../../chunks/toaster-e2f6943e.js";import{I as Et}from"../../../../../../chunks/input-25d2def7.js";import{T as ue}from"../../../../../../chunks/tab-d8def6a3.js";import{A as Tt}from"../../../../../../chunks/alert-d9741adf.js";import{L as Wt}from"../../../../../../chunks/loading-8c11a580.js";import"../../../../../../chunks/index-ecd41ae6.js";import"../../../../../../chunks/with-loading-f07bedaf.js";import"../../../../../../chunks/pollers-service-66684067.js";import"../../../../../../chunks/route-for-api-d725efb6.js";import"../../../../../../chunks/auth-user-b924a14a.js";import"../../../../../../chunks/persist-store-07cc3f48.js";import"../../../../../../chunks/parse-with-big-int-561ccb8b.js";import"../../../../../../chunks/notifications-72686422.js";import"../../../../../../chunks/is-network-error-5f9e2367.js";import"../../../../../../chunks/is-http-fad8c7a8.js";import"../../../../../../chunks/get-codec-2ae1f1d2.js";import"../../../../../../chunks/data-converter-config-141aa000.js";import"../../../../../../chunks/atob-ffa71835.js";import"../../../../../../chunks/events-service-e3a1e60f.js";import"../../../../../../chunks/paginated-f114a424.js";import"../../../../../../chunks/index-296b4109.js";import"../../../../../../chunks/format-date-c1755997.js";import"../../../../../../chunks/format-time-d031c2bc.js";import"../../../../../../chunks/is-44021919.js";import"../../../../../../chunks/index-7ac5c549.js";import"../../../../../../chunks/has-c7a26a56.js";import"../../../../../../chunks/get-event-categorization-2cfb578f.js";import"../../../../../../chunks/simplify-attributes-055c76f2.js";import"../../../../../../chunks/version-check-ac887ec2.js";import"../../../../../../chunks/v4-f2cd1a04.js";import"../../../../../../chunks/button-68ea4e9d.js";import"../../../../../../chunks/badge-111dc3a0.js";import"../../../../../../chunks/copy-to-clipboard-c13b766f.js";import"../../../../../../chunks/menu-efd189a5.js";import"../../../../../../chunks/icon-button-c9f64fdf.js";function At(o){let e,r,t,a;const n=o[1].default,s=ye(n,o,o[0],null);return{c(){e=I("div"),s&&s.c()},l(l){e=E(l,"DIV",{});var i=W(e);s&&s.l(i),i.forEach(p)},m(l,i){P(l,e,i),s&&s.m(e,null),a=!0},p(l,[i]){s&&s.p&&(!a||i&1)&&Ie(s,n,l,l[0],a?Te(n,l[0],i,null):Ee(l[0]),null)},i(l){a||(h(s,l),Ye(()=>{t&&t.end(1),r=et(e,$e,{y:-50,duration:150,delay:50}),r.start()}),a=!0)},o(l){w(s,l),r&&r.invalidate(),t=tt(e,$e,{y:-50,duration:150}),a=!1},d(l){l&&p(e),s&&s.d(l),l&&t&&t.end()}}}function Ct(o,e,r){let{$$slots:t={},$$scope:a}=e;return o.$$set=n=>{"$$scope"in n&&r(0,a=n.$$scope)},[a,t]}class Pt extends oe{constructor(e){super(),ae(this,e,Ct,At,se,{})}}function St(o){let e;return{c(){e=J("Terminate")},l(r){e=K(r,"Terminate")},m(r,t){P(r,e,t)},d(r){r&&p(e)}}}function Dt(o){let e,r;return e=new It({props:{destructive:!0,disabled:o[5],dataCy:"terminate-button",$$slots:{default:[St]},$$scope:{ctx:o}}}),e.$on("click",o[6]),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){b(e,t,a),r=!0},p(t,a){const n={};a&32&&(n.disabled=t[5]),a&1048576&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Mt(o){let e,r;return e=new yt({props:{primaryActionDisabled:o[0],disabled:o[5],label:"Request Cancellation",id:"workflow-actions",$$slots:{default:[Dt]},$$scope:{ctx:o}}}),e.$on("click",o[8]),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){b(e,t,a),r=!0},p(t,a){const n={};a&1&&(n.primaryActionDisabled=t[0]),a&32&&(n.disabled=t[5]),a&1048608&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Ue(o){let e,r,t,a;return e=new Qe({props:{open:o[3],loading:o[4],confirmType:"destructive",$$slots:{content:[qt],title:[Rt]},$$scope:{ctx:o}}}),e.$on("cancelModal",o[9]),e.$on("confirmModal",o[11]),t=new Qe({props:{open:o[2],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[Lt],title:[Ht]},$$scope:{ctx:o}}}),t.$on("cancelModal",o[7]),t.$on("confirmModal",o[10]),{c(){k(e.$$.fragment),r=M(),k(t.$$.fragment)},l(n){v(e.$$.fragment,n),r=R(n),v(t.$$.fragment,n)},m(n,s){b(e,n,s),P(n,r,s),b(t,n,s),a=!0},p(n,s){const l={};s&8&&(l.open=n[3]),s&16&&(l.loading=n[4]),s&1048576&&(l.$$scope={dirty:s,ctx:n}),e.$set(l);const i={};s&4&&(i.open=n[2]),s&1048578&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){a||(h(e.$$.fragment,n),h(t.$$.fragment,n),a=!0)},o(n){w(e.$$.fragment,n),w(t.$$.fragment,n),a=!1},d(n){y(e,n),n&&p(r),y(t,n)}}}function Rt(o){let e,r;return{c(){e=I("h3"),r=J("Cancel Workflow"),this.h()},l(t){e=E(t,"H3",{slot:!0});var a=W(e);r=K(a,"Cancel Workflow"),a.forEach(p),this.h()},h(){d(e,"slot","title")},m(t,a){P(t,e,a),_(e,r)},p:fe,d(t){t&&p(e)}}}function qt(o){let e,r;return{c(){e=I("p"),r=J(`Are you sure you want to cancel this workflow? This action cannot be
        undone.`)},l(t){e=E(t,"P",{});var a=W(e);r=K(a,`Are you sure you want to cancel this workflow? This action cannot be
        undone.`),a.forEach(p)},m(t,a){P(t,e,a),_(e,r)},p:fe,d(t){t&&p(e)}}}function Ht(o){let e,r;return{c(){e=I("h3"),r=J("Terminate Workflow"),this.h()},l(t){e=E(t,"H3",{slot:!0});var a=W(e);r=K(a,"Terminate Workflow"),a.forEach(p),this.h()},h(){d(e,"slot","title")},m(t,a){P(t,e,a),_(e,r)},p:fe,d(t){t&&p(e)}}}function Lt(o){let e,r,t,a,n,s,l;function i(u){o[16](u)}let m={id:"workflow-termination-reason",class:"mt-4",placeholder:"Enter a reason"};return o[1]!==void 0&&(m.value=o[1]),n=new Et({props:m}),rt.push(()=>nt(n,"value",i)),{c(){e=I("div"),r=I("p"),t=J(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=M(),k(n.$$.fragment),this.h()},l(u){e=E(u,"DIV",{slot:!0});var g=W(e);r=E(g,"P",{});var S=W(r);t=K(S,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),S.forEach(p),a=R(g),v(n.$$.fragment,g),g.forEach(p),this.h()},h(){d(e,"slot","content")},m(u,g){P(u,e,g),_(e,r),_(r,t),_(e,a),b(n,e,null),l=!0},p(u,g){const S={};!s&&g&2&&(s=!0,S.value=u[1],ot(()=>s=!1)),n.$set(S)},i(u){l||(h(n.$$.fragment,u),l=!0)},o(u){w(n.$$.fragment,u),l=!1},d(u){u&&p(e),y(n)}}}function Vt(o){let e,r,t,a;e=new xe({props:{bottomLeft:!0,hide:!o[5],width:200,text:"You do not have permission to edit this workflow. Contact your admin for assistance.",$$slots:{default:[Mt]},$$scope:{ctx:o}}});let n=!o[5]&&Ue(o);return{c(){k(e.$$.fragment),r=M(),n&&n.c(),t=Le()},l(s){v(e.$$.fragment,s),r=R(s),n&&n.l(s),t=Le()},m(s,l){b(e,s,l),P(s,r,l),n&&n.m(s,l),P(s,t,l),a=!0},p(s,[l]){const i={};l&32&&(i.hide=!s[5]),l&1048609&&(i.$$scope={dirty:l,ctx:s}),e.$set(i),s[5]?n&&(de(),w(n,1,1,()=>{n=null}),ge()):n?(n.p(s,l),l&32&&h(n,1)):(n=Ue(s),n.c(),h(n,1),n.m(t.parentNode,t))},i(s){a||(h(e.$$.fragment,s),h(n),a=!0)},o(s){w(e.$$.fragment,s),w(n),a=!1},d(s){y(e,s),s&&p(r),n&&n.d(s),s&&p(t)}}}function Ft(o,e,r){let t,a,n;q(o,ne,c=>r(17,n=c));let{workflow:s}=e,{namespace:l}=e,{cancelInProgress:i}=e,m="",u=!1,g=!1,S=!1;const H=()=>r(2,u=!0),F=()=>r(2,u=!1),Q=()=>r(3,g=!0),L=()=>r(3,g=!1),Y=async()=>{r(2,u=!1),r(1,m=""),z(ne,n=Date.now(),n),await at(),be.push({id:"workflow-termination-success-toast",message:"Workflow terminated.",variant:"success",yPosition:"top"})},D=()=>{r(2,u=!1),r(1,m=""),be.push({message:"Cannot terminate workflow.",variant:"error"})},C=()=>{!s.canBeTerminated||wt({workflow:s,namespace:l,reason:m}).then(Y).catch(D)},N=async()=>{r(4,S=!0);try{await gt({namespace:l,workflowId:s.id,runId:s.runId}),r(4,S=!1),r(3,g=!1),z(ne,n=Date.now(),n)}catch{be.push({yPosition:"top",variant:"error",message:"Unable to cancel workflow."})}};let G=kt();q(o,G,c=>r(15,a=c));function j(c){m=c,r(1,m)}return o.$$set=c=>{"workflow"in c&&r(13,s=c.workflow),"namespace"in c&&r(14,l=c.namespace),"cancelInProgress"in c&&r(0,i=c.cancelInProgress)},o.$$.update=()=>{o.$$.dirty&49152&&r(5,t=a.namespaceWriteDisabled(l)||!dt(bt))},[i,m,u,g,S,t,H,F,Q,L,C,N,G,s,l,a,j]}class Nt extends oe{constructor(e){super(),ae(this,e,Ft,Vt,se,{workflow:13,namespace:14,cancelInProgress:0})}}const Oe=o=>{const e=o==null?void 0:o.indexOf("?");return e>-1?o.slice(0,e):o},U=(o,e,r=!1)=>{const t=Oe(o).split("/"),a=Oe(e).split("/");if(r&&t.length!==a.length)return!1;for(let n=0;n<t.length;n++){const s=t[n],l=a[n];if(s!==l)return!1}return!0};function jt(o){let e,r,t,a,n,s;return{c(){e=I("label"),r=I("input"),t=M(),a=I("span"),this.h()},l(l){e=E(l,"LABEL",{for:!0,class:!0});var i=W(e);r=E(i,"INPUT",{id:!0,type:!0,class:!0}),t=R(i),a=E(i,"SPAN",{class:!0}),W(a).forEach(p),i.forEach(p),this.h()},h(){d(r,"id",o[1]),d(r,"type","checkbox"),d(r,"class","hidden svelte-1s95c4s"),d(a,"class","slider svelte-1s95c4s"),d(e,"for",o[1]),d(e,"class","switch svelte-1s95c4s")},m(l,i){P(l,e,i),_(e,r),r.checked=o[0],_(e,t),_(e,a),n||(s=[Ve(r,"change",o[2]),Ve(r,"change",o[3])],n=!0)},p(l,[i]){i&2&&d(r,"id",l[1]),i&1&&(r.checked=l[0]),i&2&&d(e,"for",l[1])},i:fe,o:fe,d(l){l&&p(e),n=!1,st(s)}}}function Bt(o,e,r){let{checked:t=!1}=e,{id:a}=e;function n(l){lt.call(this,o,l)}function s(){t=this.checked,r(0,t)}return o.$$set=l=>{"checked"in l&&r(0,t=l.checked),"id"in l&&r(1,a=l.id)},[t,a,n,s]}class Qt extends oe{constructor(e){super(),ae(this,e,Bt,jt,se,{checked:0,id:1})}}function Ut(o){let e,r;return e=new Qt({props:{id:"autorefresh",checked:o[1]}}),e.$on("change",function(){it(o[0])&&o[0].apply(this,arguments)}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){b(e,t,a),r=!0},p(t,a){o=t;const n={};a&2&&(n.checked=o[1]),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Ot(o){let e,r,t,a;return t=new xe({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[Ut]},$$scope:{ctx:o}}}),{c(){e=I("label"),r=J(`Auto refresh
  `),k(t.$$.fragment),this.h()},l(n){e=E(n,"LABEL",{for:!0,class:!0});var s=W(e);r=K(s,`Auto refresh
  `),v(t.$$.fragment,s),s.forEach(p),this.h()},h(){d(e,"for","autorefresh"),d(e,"class","flex items-center gap-4 font-secondary text-sm")},m(n,s){P(n,e,s),_(e,r),b(t,e,null),a=!0},p(n,[s]){const l={};s&11&&(l.$$scope={dirty:s,ctx:n}),t.$set(l)},i(n){a||(h(t.$$.fragment,n),a=!0)},o(n){w(t.$$.fragment,n),a=!1},d(n){n&&p(e),y(t)}}}function zt(o,e,r){let t,a;q(o,_e,s=>r(2,a=s));let{onChange:n}=e;return o.$$set=s=>{"onChange"in s&&r(0,n=s.onChange)},o.$$.update=()=>{o.$$.dirty&4&&r(1,t=a==="on")},[n,t,a]}class Jt extends oe{constructor(e){super(),ae(this,e,zt,Ot,se,{onChange:0})}}function ze(o){let e,r,t,a,n;return r=new Jt({props:{onChange:o[10]}}),a=new Nt({props:{cancelInProgress:o[4],workflow:o[1],namespace:o[0]}}),{c(){e=I("div"),k(r.$$.fragment),t=M(),k(a.$$.fragment),this.h()},l(s){e=E(s,"DIV",{class:!0});var l=W(e);v(r.$$.fragment,l),t=R(l),v(a.$$.fragment,l),l.forEach(p),this.h()},h(){d(e,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end")},m(s,l){P(s,e,l),b(r,e,null),_(e,t),b(a,e,null),n=!0},p(s,l){const i={};l&16&&(i.cancelInProgress=s[4]),l&2&&(i.workflow=s[1]),l&1&&(i.namespace=s[0]),a.$set(i)},i(s){n||(h(r.$$.fragment,s),h(a.$$.fragment,s),n=!0)},o(s){w(r.$$.fragment,s),w(a.$$.fragment,s),n=!1},d(s){s&&p(e),y(r),y(a)}}}function Je(o){let e,r,t,a;return r=new Tt({props:{icon:"info",intent:"info",title:"Cancel Request Sent",$$slots:{default:[Kt]},$$scope:{ctx:o}}}),{c(){e=I("div"),k(r.$$.fragment),this.h()},l(n){e=E(n,"DIV",{class:!0});var s=W(e);v(r.$$.fragment,s),s.forEach(p),this.h()},h(){d(e,"class","-mt-4 mb-4")},m(n,s){P(n,e,s),b(r,e,null),a=!0},i(n){a||(h(r.$$.fragment,n),Ye(()=>{t||(t=Fe(e,$e,{duration:200,delay:100},!0)),t.run(1)}),a=!0)},o(n){w(r.$$.fragment,n),t||(t=Fe(e,$e,{duration:200,delay:100},!1)),t.run(0),a=!1},d(n){n&&p(e),y(r),n&&t&&t.end()}}}function Kt(o){let e;return{c(){e=J(`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},l(r){e=K(r,`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},m(r,t){P(r,e,t)},d(r){r&&p(e)}}}function Yt(o){var Ae,Ce,Pe,Se,De;let e,r,t,a,n,s,l,i,m,u,g,S,H,F=o[1].id+"",Q,L,Y,D,C,N,G,j,c,X,ke,Z,ve,x,le;n=new pt({props:{name:"chevron-left",class:"inline"}}),g=new vt({props:{status:(Ae=o[1])==null?void 0:Ae.status}});let T=o[3]&&ze(o),A=o[4]&&Je(o);return N=new ue({props:{label:"History",href:ce({view:o[6],...o[5]}),amount:(Ce=o[1])==null?void 0:Ce.historyEvents,dataCy:"history-tab",active:U(o[7].url.pathname,ce({view:o[6],...o[5]}))}}),j=new ue({props:{label:"Workers",href:me(o[5]),amount:(Se=(Pe=o[2])==null?void 0:Pe.pollers)==null?void 0:Se.length,dataCy:"workers-tab",active:U(o[7].url.pathname,me(o[5]))}}),X=new ue({props:{label:"Pending Activities",href:pe(o[5]),amount:(De=o[1].pendingActivities)==null?void 0:De.length,dataCy:"pending-activities-tab",active:U(o[7].url.pathname,pe(o[5]))}}),Z=new ue({props:{label:"Stack Trace",href:he(o[5]),dataCy:"stack-trace-tab",active:U(o[7].url.pathname,he(o[5]))}}),x=new ue({props:{label:"Queries",href:we(o[5]),dataCy:"queries-tab",active:U(o[7].url.pathname,we(o[5]))}}),{c(){e=I("header"),r=I("main"),t=I("div"),a=I("a"),k(n.$$.fragment),s=J("Back to Workflows"),i=M(),m=I("div"),u=I("div"),k(g.$$.fragment),S=M(),H=I("h1"),Q=J(F),L=M(),T&&T.c(),Y=M(),A&&A.c(),D=M(),C=I("nav"),k(N.$$.fragment),G=M(),k(j.$$.fragment),c=M(),k(X.$$.fragment),ke=M(),k(Z.$$.fragment),ve=M(),k(x.$$.fragment),this.h()},l(f){e=E(f,"HEADER",{class:!0});var $=W(e);r=E($,"MAIN",{class:!0});var B=W(r);t=E(B,"DIV",{class:!0});var re=W(t);a=E(re,"A",{href:!0,"data-cy":!0,class:!0});var ee=W(a);v(n.$$.fragment,ee),s=K(ee,"Back to Workflows"),ee.forEach(p),re.forEach(p),i=R(B),m=E(B,"DIV",{class:!0});var O=W(m);u=E(O,"DIV",{class:!0});var te=W(u);v(g.$$.fragment,te),S=R(te),H=E(te,"H1",{"data-cy":!0,class:!0});var ie=W(H);Q=K(ie,F),ie.forEach(p),te.forEach(p),L=R(O),T&&T.l(O),O.forEach(p),Y=R(B),A&&A.l(B),D=R(B),C=E(B,"NAV",{class:!0});var V=W(C);v(N.$$.fragment,V),G=R(V),v(j.$$.fragment,V),c=R(V),v(X.$$.fragment,V),ke=R(V),v(Z.$$.fragment,V),ve=R(V),v(x.$$.fragment,V),V.forEach(p),B.forEach(p),$.forEach(p),this.h()},h(){d(a,"href",l=Be({namespace:o[0],query:o[9],search:o[8]})),d(a,"data-cy","back-to-workflows"),d(a,"class","back-to-workflows svelte-st9g8m"),d(t,"class","-mt-3 -ml-2 mb-4 block"),d(H,"data-cy","workflow-id-heading"),d(H,"class","select-all overflow-hidden text-ellipsis text-2xl font-medium"),d(u,"class","flex w-full items-center justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),d(m,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),d(C,"class","flex flex-wrap gap-6"),d(r,"class","relative flex flex-col gap-1"),d(e,"class","mb-4 flex flex-col gap-4")},m(f,$){P(f,e,$),_(e,r),_(r,t),_(t,a),b(n,a,null),_(a,s),_(r,i),_(r,m),_(m,u),b(g,u,null),_(u,S),_(u,H),_(H,Q),_(m,L),T&&T.m(m,null),_(r,Y),A&&A.m(r,null),_(r,D),_(r,C),b(N,C,null),_(C,G),b(j,C,null),_(C,c),b(X,C,null),_(C,ke),b(Z,C,null),_(C,ve),b(x,C,null),le=!0},p(f,[$]){var V,Me,Re,qe,He;(!le||$&1&&l!==(l=Be({namespace:f[0],query:f[9],search:f[8]})))&&d(a,"href",l);const B={};$&2&&(B.status=(V=f[1])==null?void 0:V.status),g.$set(B),(!le||$&2)&&F!==(F=f[1].id+"")&&ft(Q,F),f[3]?T?(T.p(f,$),$&8&&h(T,1)):(T=ze(f),T.c(),h(T,1),T.m(m,null)):T&&(de(),w(T,1,1,()=>{T=null}),ge()),f[4]?A?$&16&&h(A,1):(A=Je(f),A.c(),h(A,1),A.m(r,D)):A&&(de(),w(A,1,1,()=>{A=null}),ge());const re={};$&96&&(re.href=ce({view:f[6],...f[5]})),$&2&&(re.amount=(Me=f[1])==null?void 0:Me.historyEvents),$&224&&(re.active=U(f[7].url.pathname,ce({view:f[6],...f[5]}))),N.$set(re);const ee={};$&32&&(ee.href=me(f[5])),$&4&&(ee.amount=(qe=(Re=f[2])==null?void 0:Re.pollers)==null?void 0:qe.length),$&160&&(ee.active=U(f[7].url.pathname,me(f[5]))),j.$set(ee);const O={};$&32&&(O.href=pe(f[5])),$&2&&(O.amount=(He=f[1].pendingActivities)==null?void 0:He.length),$&160&&(O.active=U(f[7].url.pathname,pe(f[5]))),X.$set(O);const te={};$&32&&(te.href=he(f[5])),$&160&&(te.active=U(f[7].url.pathname,he(f[5]))),Z.$set(te);const ie={};$&32&&(ie.href=we(f[5])),$&160&&(ie.active=U(f[7].url.pathname,we(f[5]))),x.$set(ie)},i(f){le||(h(n.$$.fragment,f),h(g.$$.fragment,f),h(T),h(A),h(N.$$.fragment,f),h(j.$$.fragment,f),h(X.$$.fragment,f),h(Z.$$.fragment,f),h(x.$$.fragment,f),le=!0)},o(f){w(n.$$.fragment,f),w(g.$$.fragment,f),w(T),w(A),w(N.$$.fragment,f),w(j.$$.fragment,f),w(X.$$.fragment,f),w(Z.$$.fragment,f),w(x.$$.fragment,f),le=!1},d(f){f&&p(e),y(n),y(g),T&&T.d(),A&&A.d(),y(N),y(j),y(X),y(Z),y(x)}}}const Ke=15e3;function Gt(o,e,r){let t,a,n,s,l,i,m,u,g,S;q(o,ct,c=>r(14,s=c)),q(o,Ze,c=>r(15,l=c)),q(o,ne,c=>r(16,i=c)),q(o,_e,c=>r(17,m=c)),q(o,_t,c=>r(18,u=c)),q(o,ht,c=>r(6,g=c)),q(o,Xe,c=>r(7,S=c));var H,F;let{namespace:Q}=e,{workflow:L}=e,{workers:Y}=e,D;const{parameters:C,searchType:N}=u,G=$t(C);Ge(()=>{a&&m==="on"&&(clearInterval(D),r(13,D=setInterval(()=>z(ne,i=Date.now(),i),Ke)))});const j=()=>{m==="on"?(z(_e,m="off",m),clearInterval(D)):(z(ne,i=Date.now(),i),z(_e,m="on",m),clearInterval(D),r(13,D=setInterval(()=>z(ne,i=Date.now(),i),Ke)))};return We(()=>{clearInterval(D)}),o.$$set=c=>{"namespace"in c&&r(0,Q=c.namespace),"workflow"in c&&r(1,L=c.workflow),"workers"in c&&r(2,Y=c.workers)},o.$$.update=()=>{o.$$.dirty&3&&r(5,t={namespace:Q,workflow:L==null?void 0:L.id,run:L==null?void 0:L.runId}),o.$$.dirty&34816&&r(3,a=r(11,H=l==null?void 0:l.workflow)===null||H===void 0?void 0:H.isRunning),o.$$.dirty&8200&&(a||clearInterval(D)),o.$$.dirty&53248&&r(4,n=(r(12,F=l==null?void 0:l.workflow)===null||F===void 0?void 0:F.status)==="Running"&&s.events.some(c=>(c==null?void 0:c.eventType)==="WorkflowExecutionCancelRequested"))},[Q,L,Y,a,n,t,g,S,N,G,j,H,F,D,s,l]}class Xt extends oe{constructor(e){super(),ae(this,e,Gt,Yt,se,{namespace:0,workflow:1,workers:2})}}function Zt(o){let e,r;return e=new Pt({props:{$$slots:{default:[er]},$$scope:{ctx:o}}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){b(e,t,a),r=!0},p(t,a){const n={};a&21&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function xt(o){let e,r;return e=new Wt({}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){b(e,t,a),r=!0},p:fe,i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function er(o){let e,r,t;e=new Xt({props:{namespace:o[0].params.namespace,workflow:o[2].workflow,workers:o[2].workers}});const a=o[3].default,n=ye(a,o,o[4],null);return{c(){k(e.$$.fragment),r=M(),n&&n.c()},l(s){v(e.$$.fragment,s),r=R(s),n&&n.l(s)},m(s,l){b(e,s,l),P(s,r,l),n&&n.m(s,l),t=!0},p(s,l){const i={};l&1&&(i.namespace=s[0].params.namespace),l&4&&(i.workflow=s[2].workflow),l&4&&(i.workers=s[2].workers),e.$set(i),n&&n.p&&(!t||l&16)&&Ie(n,a,s,s[4],t?Te(a,s[4],l,null):Ee(s[4]),null)},i(s){t||(h(e.$$.fragment,s),h(n,s),t=!0)},o(s){w(e.$$.fragment,s),w(n,s),t=!1},d(s){y(e,s),s&&p(r),n&&n.d(s)}}}function tr(o){let e,r,t,a;const n=[xt,Zt],s=[];function l(i,m){return i[1]?0:1}return r=l(o),t=s[r]=n[r](o),{c(){e=I("main"),t.c(),this.h()},l(i){e=E(i,"MAIN",{class:!0});var m=W(e);t.l(m),m.forEach(p),this.h()},h(){d(e,"class","flex h-full flex-col gap-6")},m(i,m){P(i,e,m),s[r].m(e,null),a=!0},p(i,[m]){let u=r;r=l(i),r===u?s[r].p(i,m):(de(),w(s[u],1,1,()=>{s[u]=null}),ge(),t=s[r],t?t.p(i,m):(t=s[r]=n[r](i),t.c()),h(t,1),t.m(e,null))},i(i){a||(h(t),a=!0)},o(i){w(t),a=!1},d(i){i&&p(e),s[r].d()}}}function rr(o,e,r){let t,a,n,s,l;q(o,Ne,u=>r(5,t=u)),q(o,je,u=>r(6,a=u)),q(o,Xe,u=>r(0,n=u)),q(o,ut,u=>r(1,s=u)),q(o,Ze,u=>r(2,l=u));let{$$slots:i={},$$scope:m}=e;return Ge(()=>{const u=n.url.searchParams.get("sort");u&&z(je,a=u,a)}),We(()=>{z(Ne,t=null,t)}),o.$$set=u=>{"$$scope"in u&&r(4,m=u.$$scope)},[n,s,l,i,m]}class nr extends oe{constructor(e){super(),ae(this,e,rr,tr,se,{})}}function or(o){let e;const r=o[0].default,t=ye(r,o,o[1],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&2)&&Ie(t,r,a,a[1],e?Te(r,a[1],n,null):Ee(a[1]),null)},i(a){e||(h(t,a),e=!0)},o(a){w(t,a),e=!1},d(a){t&&t.d(a)}}}function ar(o){let e,r;return e=new nr({props:{$$slots:{default:[or]},$$scope:{ctx:o}}}),{c(){k(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){b(e,t,a),r=!0},p(t,[a]){const n={};a&2&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function sr(o,e,r){let{$$slots:t={},$$scope:a}=e;return We(()=>{mt()}),o.$$set=n=>{"$$scope"in n&&r(1,a=n.$$scope)},[t,a]}class on extends oe{constructor(e){super(),ae(this,e,sr,ar,se,{})}}export{on as default};
