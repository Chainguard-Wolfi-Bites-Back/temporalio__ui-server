import{S as Q,i as V,s as B,l as S,m as E,n as C,h as $,b as h,f as _,t as k,O as P,x as b,y as v,z as T,C as y,Y as N,e as W,$ as A,r as d,u as w,N as g,F,a as q,c as D,p as I,v as Y}from"../../../../../../chunks/index-0b369c75.js";import{p as U}from"../../../../../../chunks/stores-5674b937.js";import{w as j}from"../../../../../../chunks/previous-events-31f27496.js";import{b as O}from"../../../../../../chunks/query-service-9b18401d.js";import{C as G}from"../../../../../../chunks/code-block-4d490d97.js";import{B as H}from"../../../../../../chunks/button-ca5c6c86.js";import{E as z}from"../../../../../../chunks/empty-state-0322ba06.js";import{L as J}from"../../../../../../chunks/loading-54a8cebb.js";import{L as K}from"../../../../../../chunks/link-60074c3c.js";import{a as M}from"../../../../../../chunks/auth-user-8d8472d7.js";import{P as X}from"../../../../../../chunks/page-title-2518fdab.js";import{W as Z}from"../../../../../../chunks/workflow-run-layout-f3e51710.js";import"../../../../../../chunks/index-8c6be68a.js";import"../../../../../../chunks/with-loading-f07bedaf.js";import"../../../../../../chunks/workflow-service-82cd2181.js";import"../../../../../../chunks/settings-be4fa165.js";import"../../../../../../chunks/simplify-attributes-e2395256.js";import"../../../../../../chunks/format-date-e74858c6.js";import"../../../../../../chunks/format-time-1c3c6192.js";import"../../../../../../chunks/is-b4c8f655.js";import"../../../../../../chunks/route-for-api-cb3151e3.js";import"../../../../../../chunks/route-for-198cbbe1.js";import"../../../../../../chunks/notifications-64e4d8bf.js";import"../../../../../../chunks/is-network-error-5f9e2367.js";import"../../../../../../chunks/persist-store-35c981b5.js";import"../../../../../../chunks/parse-with-big-int-561ccb8b.js";import"../../../../../../chunks/pollers-service-804671ff.js";import"../../../../../../chunks/is-http-ad557a83.js";import"../../../../../../chunks/get-codec-02146431.js";import"../../../../../../chunks/data-converter-config-d291dbd4.js";import"../../../../../../chunks/atob-163a4bda.js";import"../../../../../../chunks/icon-7d330c0b.js";import"../../../../../../chunks/copy-to-clipboard-2eb414b9.js";import"../../../../../../chunks/events-abab7368.js";import"../../../../../../chunks/paginated-ecb0f58e.js";import"../../../../../../chunks/index-f415d6e5.js";import"../../../../../../chunks/has-68876cdc.js";import"../../../../../../chunks/event-view-8263e942.js";import"../../../../../../chunks/versions-02c70e25.js";import"../../../../../../chunks/version-check-0f5c0d26.js";import"../../../../../../chunks/index-8a8c6b93.js";import"../../../../../../chunks/workflows-3385d596.js";import"../../../../../../chunks/workflow-status-06c001e2.js";import"../../../../../../chunks/modal-58682d62.js";import"../../../../../../chunks/core-user-a1ba6fc9.js";import"../../../../../../chunks/tooltip-d45064b8.js";import"../../../../../../chunks/split-button-83dcdc9b.js";import"../../../../../../chunks/menu-3bdbd175.js";import"../../../../../../chunks/menu-item-7d491ac7.js";import"../../../../../../chunks/toaster-18495b6a.js";import"../../../../../../chunks/icon-button-43682765.js";import"../../../../../../chunks/v4-43adb29c.js";import"../../../../../../chunks/input-e1d72b9e.js";import"../../../../../../chunks/feature-guard-dd07df03.js";import"../../../../../../chunks/tab-5fcbe899.js";function x(l){let t,r;return t=new z({props:{title:"No Stack Traces Found",dataCy:"query-stack-trace-empty",$$slots:{default:[ot]},$$scope:{ctx:l}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,o){T(t,e,o),r=!0},p(e,o){const n={};o&4096&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){y(t,e)}}}function tt(l){let t,r,e,o={ctx:l,current:null,token:null,hasCatch:!0,pending:st,then:at,catch:nt,value:10,error:11,blocks:[,,,]};return N(r=l[1],o),{c(){t=W(),o.block.c()},l(n){t=W(),o.block.l(n)},m(n,a){h(n,t,a),o.block.m(n,o.anchor=a),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(n,a){l=n,o.ctx=l,a&2&&r!==(r=l[1])&&N(r,o)||A(o,l,a)},i(n){e||(_(o.block),e=!0)},o(n){for(let a=0;a<3;a+=1){const i=o.blocks[a];k(i)}e=!1},d(n){n&&$(t),o.block.d(n),o.token=null,o=null}}}function et(l){var c;let t,r,e,o,n=((c=l[2])==null?void 0:c.taskQueue)+"",a,i,s;return e=new K({props:{href:"https://docs.temporal.io/concepts/what-is-a-query/#stack-trace-query",$$slots:{default:[rt]},$$scope:{ctx:l}}}),{c(){t=S("p"),r=d("To enable "),b(e.$$.fragment),o=d(", run a Worker on the "),a=d(n),i=d(" Task Queue.")},l(u){t=E(u,"P",{});var m=C(t);r=w(m,"To enable "),v(e.$$.fragment,m),o=w(m,", run a Worker on the "),a=w(m,n),i=w(m," Task Queue."),m.forEach($)},m(u,m){h(u,t,m),g(t,r),T(e,t,null),g(t,o),g(t,a),g(t,i),s=!0},p(u,m){const f={};m&4096&&(f.$$scope={dirty:m,ctx:u}),e.$set(f)},i(u){s||(_(e.$$.fragment,u),s=!0)},o(u){k(e.$$.fragment,u),s=!1},d(u){u&&$(t),y(e)}}}function rt(l){let t;return{c(){t=d("stack traces")},l(r){t=w(r,"stack traces")},m(r,e){h(r,t,e)},d(r){r&&$(t)}}}function ot(l){var o,n;let t,r,e=l[2].isRunning&&((n=(o=l[3])==null?void 0:o.pollers)==null?void 0:n.length)===0&&et(l);return{c(){e&&e.c(),t=W()},l(a){e&&e.l(a),t=W()},m(a,i){e&&e.m(a,i),h(a,t,i),r=!0},p(a,i){var s,c;a[2].isRunning&&((c=(s=a[3])==null?void 0:s.pollers)==null?void 0:c.length)===0&&e.p(a,i)},i(a){r||(_(e),r=!0)},o(a){k(e),r=!1},d(a){e&&e.d(a),a&&$(t)}}}function nt(l){let t,r;return t=new z({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,o){T(t,e,o),r=!0},p:F,i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){y(t,e)}}}function at(l){let t,r,e,o,n,a=l[0].toLocaleTimeString()+"",i,s,c,u,m;return r=new H({props:{icon:"retry",loading:ct,$$slots:{default:[lt]},$$scope:{ctx:l}}}),r.$on("click",l[4]),u=new G({props:{content:l[10],language:"text",dataCy:"query-stack-trace"}}),{c(){t=S("div"),b(r.$$.fragment),e=q(),o=S("p"),n=d("Stack Trace at "),i=d(a),s=q(),c=S("div"),b(u.$$.fragment),this.h()},l(f){t=E(f,"DIV",{class:!0});var p=C(t);v(r.$$.fragment,p),e=D(p),o=E(p,"P",{});var R=C(o);n=w(R,"Stack Trace at "),i=w(R,a),R.forEach($),p.forEach($),s=D(f),c=E(f,"DIV",{class:!0});var L=C(c);v(u.$$.fragment,L),L.forEach($),this.h()},h(){I(t,"class","flex items-center gap-4"),I(c,"class","flex items-start h-full")},m(f,p){h(f,t,p),T(r,t,null),g(t,e),g(t,o),g(o,n),g(o,i),h(f,s,p),h(f,c,p),T(u,c,null),m=!0},p(f,p){const R={};p&4096&&(R.$$scope={dirty:p,ctx:f}),r.$set(R),(!m||p&1)&&a!==(a=f[0].toLocaleTimeString()+"")&&Y(i,a);const L={};p&2&&(L.content=f[10]),u.$set(L)},i(f){m||(_(r.$$.fragment,f),_(u.$$.fragment,f),m=!0)},o(f){k(r.$$.fragment,f),k(u.$$.fragment,f),m=!1},d(f){f&&$(t),y(r),f&&$(s),f&&$(c),y(u)}}}function lt(l){let t;return{c(){t=d("Refresh")},l(r){t=w(r,"Refresh")},m(r,e){h(r,t,e)},d(r){r&&$(t)}}}function st(l){let t,r,e,o,n,a;return r=new J({}),{c(){t=S("div"),b(r.$$.fragment),e=q(),o=S("p"),n=d("(This will fail if you have no workers running.)"),this.h()},l(i){t=E(i,"DIV",{class:!0});var s=C(t);v(r.$$.fragment,s),e=D(s),o=E(s,"P",{});var c=C(o);n=w(c,"(This will fail if you have no workers running.)"),c.forEach($),s.forEach($),this.h()},h(){I(t,"class","text-center")},m(i,s){h(i,t,s),T(r,t,null),g(t,e),g(t,o),g(o,n),a=!0},p:F,i(i){a||(_(r.$$.fragment,i),a=!0)},o(i){k(r.$$.fragment,i),a=!1},d(i){i&&$(t),y(r)}}}function it(l){let t,r,e,o;const n=[tt,x],a=[];function i(s,c){var u,m;return s[2].isRunning&&((m=(u=s[3])==null?void 0:u.pollers)==null?void 0:m.length)>0?0:1}return r=i(l),e=a[r]=n[r](l),{c(){t=S("section"),e.c()},l(s){t=E(s,"SECTION",{});var c=C(t);e.l(c),c.forEach($)},m(s,c){h(s,t,c),a[r].m(t,null),o=!0},p(s,[c]){e.p(s,c)},i(s){o||(_(e),o=!0)},o(s){k(e),o=!1},d(s){s&&$(t),a[r].d()}}}let ct=!1;function ft(l,t,r){let e,o,n;P(l,M,p=>r(5,e=p)),P(l,U,p=>r(6,o=p)),P(l,j,p=>r(7,n=p));const{namespace:a}=o.params,{workflow:i,workers:s}=n;let c=new Date;const u=()=>O({workflow:i,namespace:a},o.stuff.settings,e==null?void 0:e.accessToken);let m;const f=()=>{r(1,m=O({workflow:i,namespace:a},o.stuff.settings,e==null?void 0:e.accessToken)),m.then(()=>{r(0,c=new Date)})};return i.isRunning&&r(1,m=u()),[c,m,i,s,f]}class ut extends Q{constructor(t){super(),V(this,t,ft,it,B,{})}}function mt(l){let t,r;return t=new ut({}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,o){T(t,e,o),r=!0},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){y(t,e)}}}function pt(l){let t,r,e,o;return t=new X({props:{title:`Stack Trace | ${l[1]}`,url:l[0].url.href}}),e=new Z({props:{cancelEnabled:!0,$$slots:{default:[mt]},$$scope:{ctx:l}}}),{c(){b(t.$$.fragment),r=q(),b(e.$$.fragment)},l(n){v(t.$$.fragment,n),r=D(n),v(e.$$.fragment,n)},m(n,a){T(t,n,a),h(n,r,a),T(e,n,a),o=!0},p(n,[a]){const i={};a&1&&(i.url=n[0].url.href),t.$set(i);const s={};a&4&&(s.$$scope={dirty:a,ctx:n}),e.$set(s)},i(n){o||(_(t.$$.fragment,n),_(e.$$.fragment,n),o=!0)},o(n){k(t.$$.fragment,n),k(e.$$.fragment,n),o=!1},d(n){y(t,n),n&&$(r),y(e,n)}}}function $t(l,t,r){let e;P(l,U,n=>r(0,e=n));const o=e.params.workflow;return[e,o]}class ke extends Q{constructor(t){super(),V(this,t,$t,pt,B,{})}}export{ke as default};
