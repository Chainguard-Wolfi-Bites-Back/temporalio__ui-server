import{S as oe,i as se,s as le,J as Ee,l as y,m as T,n as A,h as p,b as D,K as Ie,L as ye,M as Te,f as m,ag as Ye,ah as et,t as d,ai as tt,x as b,a as q,e as He,y as v,c as F,z as E,g as we,d as $e,C as I,O as R,r as O,u as z,p as w,N as _,F as ue,a0 as nt,a8 as rt,a9 as at,a4 as G,E as ot,W as Le,H as st,T as lt,I as ft,v as it,o as Ge,ar as We,ak as Ve}from"../../../../../../chunks/index-92fe1086.js";import{p as Xe}from"../../../../../../chunks/stores-0ab38b9a.js";import{r as ae,w as Ze,l as ut}from"../../../../../../chunks/workflow-run-7a24dae8.js";import{e as ct,t as Be,c as mt}from"../../../../../../chunks/events-c47ff2f0.js";import{f as ke}from"../../../../../../chunks/index-59004533.js";import{I as pt}from"../../../../../../chunks/icon-ede9a021.js";import{a as _e,e as ht,b as Ne}from"../../../../../../chunks/event-view-7fadd508.js";import{t as dt,w as gt,a as _t}from"../../../../../../chunks/terminate-service-bc2799d6.js";import{g as me,h as pe,i as he,j as de,k as ge,l as Qe}from"../../../../../../chunks/route-for-369a155d.js";import{w as wt,c as $t,t as kt}from"../../../../../../chunks/workflow-service-a7e335ae.js";import{W as bt}from"../../../../../../chunks/workflow-status-2701b284.js";import{s as vt}from"../../../../../../chunks/settings-094bc836.js";import{M as je}from"../../../../../../chunks/modal-424b8e2e.js";import{c as Et}from"../../../../../../chunks/core-user-4102eece.js";import{T as xe}from"../../../../../../chunks/tooltip-7227e211.js";import{S as It}from"../../../../../../chunks/split-button-42a94206.js";import{M as yt}from"../../../../../../chunks/menu-item-1cc91925.js";import{t as ve}from"../../../../../../chunks/toaster-1df07eda.js";import{I as Tt}from"../../../../../../chunks/input-36b30505.js";import{F as Wt}from"../../../../../../chunks/feature-guard-c8a82b9a.js";import{B as At}from"../../../../../../chunks/button-fa4a50e2.js";import{T as ce}from"../../../../../../chunks/tab-e38fe8c8.js";import{A as Ct}from"../../../../../../chunks/alert-7665f6e1.js";import{L as Pt}from"../../../../../../chunks/loading-286979cb.js";import"../../../../../../chunks/index-f75d6a2a.js";import"../../../../../../chunks/with-loading-f07bedaf.js";import"../../../../../../chunks/pollers-service-6a2ee70f.js";import"../../../../../../chunks/route-for-api-31ba547b.js";import"../../../../../../chunks/auth-user-283647a9.js";import"../../../../../../chunks/persist-store-7b24a5e5.js";import"../../../../../../chunks/parse-with-big-int-561ccb8b.js";import"../../../../../../chunks/notifications-3f5807c6.js";import"../../../../../../chunks/is-network-error-5f9e2367.js";import"../../../../../../chunks/is-http-9481dd79.js";import"../../../../../../chunks/get-codec-c9457d10.js";import"../../../../../../chunks/data-converter-config-d2d27073.js";import"../../../../../../chunks/atob-ffa71835.js";import"../../../../../../chunks/events-service-389bc32a.js";import"../../../../../../chunks/paginated-044d78e8.js";import"../../../../../../chunks/index-59e1e98a.js";import"../../../../../../chunks/format-date-8d85ffcd.js";import"../../../../../../chunks/format-time-63ab2d37.js";import"../../../../../../chunks/is-b4c8f655.js";import"../../../../../../chunks/index-25c64365.js";import"../../../../../../chunks/has-68876cdc.js";import"../../../../../../chunks/get-event-categorization-2cfb578f.js";import"../../../../../../chunks/simplify-attributes-e9cbffa0.js";import"../../../../../../chunks/version-check-652b3f87.js";import"../../../../../../chunks/v4-f2cd1a04.js";import"../../../../../../chunks/copy-to-clipboard-396987ed.js";import"../../../../../../chunks/menu-2543832f.js";import"../../../../../../chunks/icon-button-1063104b.js";import"../../../../../../chunks/badge-296d1274.js";function St(a){let e,n,t,o;const r=a[1].default,s=Ee(r,a,a[0],null);return{c(){e=y("div"),s&&s.c()},l(l){e=T(l,"DIV",{});var f=A(e);s&&s.l(f),f.forEach(p)},m(l,f){D(l,e,f),s&&s.m(e,null),o=!0},p(l,[f]){s&&s.p&&(!o||f&1)&&Ie(s,r,l,l[0],o?Te(r,l[0],f,null):ye(l[0]),null)},i(l){o||(m(s,l),Ye(()=>{t&&t.end(1),n=et(e,ke,{y:-50,duration:150,delay:50}),n.start()}),o=!0)},o(l){d(s,l),n&&n.invalidate(),t=tt(e,ke,{y:-50,duration:150}),o=!1},d(l){l&&p(e),s&&s.d(l),l&&t&&t.end()}}}function Dt(a,e,n){let{$$slots:t={},$$scope:o}=e;return a.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,t]}class Mt extends oe{constructor(e){super(),se(this,e,Dt,St,le,{})}}function Rt(a){let e;return{c(){e=O("Terminate")},l(n){e=z(n,"Terminate")},m(n,t){D(n,e,t)},d(n){n&&p(e)}}}function qt(a){let e,n;return e=new yt({props:{destructive:!0,disabled:a[6],dataCy:"terminate-button",$$slots:{default:[Rt]},$$scope:{ctx:a}}}),e.$on("click",a[7]),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p(t,o){const r={};o&64&&(r.disabled=t[6]),o&2097152&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Ft(a){let e,n;return e=new It({props:{primaryActionDisabled:a[0],disabled:a[6],label:"Request Cancellation",id:"workflow-actions",$$slots:{default:[qt]},$$scope:{ctx:a}}}),e.$on("click",a[9]),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p(t,o){const r={};o&1&&(r.primaryActionDisabled=t[0]),o&64&&(r.disabled=t[6]),o&2097216&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Ht(a){let e;return{c(){e=O("Terminate")},l(n){e=z(n,"Terminate")},m(n,t){D(n,e,t)},d(n){n&&p(e)}}}function Lt(a){let e,n;return e=new At({props:{slot:"fallback",variant:"destructive",disabled:a[6],dataCy:"terminate-button",$$slots:{default:[Ht]},$$scope:{ctx:a}}}),e.$on("click",a[7]),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p(t,o){const r={};o&64&&(r.disabled=t[6]),o&2097152&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Vt(a){let e,n;return e=new Wt({props:{enabled:a[1],$$slots:{fallback:[Lt],default:[Ft]},$$scope:{ctx:a}}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p(t,o){const r={};o&2&&(r.enabled=t[1]),o&2097217&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Ue(a){let e,n,t,o;return e=new je({props:{open:a[4],loading:a[5],confirmType:"destructive",$$slots:{content:[Nt],title:[Bt]},$$scope:{ctx:a}}}),e.$on("cancelModal",a[10]),e.$on("confirmModal",a[12]),t=new je({props:{open:a[3],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[jt],title:[Qt]},$$scope:{ctx:a}}}),t.$on("cancelModal",a[8]),t.$on("confirmModal",a[11]),{c(){b(e.$$.fragment),n=q(),b(t.$$.fragment)},l(r){v(e.$$.fragment,r),n=F(r),v(t.$$.fragment,r)},m(r,s){E(e,r,s),D(r,n,s),E(t,r,s),o=!0},p(r,s){const l={};s&16&&(l.open=r[4]),s&32&&(l.loading=r[5]),s&2097152&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const f={};s&8&&(f.open=r[3]),s&2097156&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){o||(m(e.$$.fragment,r),m(t.$$.fragment,r),o=!0)},o(r){d(e.$$.fragment,r),d(t.$$.fragment,r),o=!1},d(r){I(e,r),r&&p(n),I(t,r)}}}function Bt(a){let e,n;return{c(){e=y("h3"),n=O("Cancel Workflow"),this.h()},l(t){e=T(t,"H3",{slot:!0});var o=A(e);n=z(o,"Cancel Workflow"),o.forEach(p),this.h()},h(){w(e,"slot","title")},m(t,o){D(t,e,o),_(e,n)},p:ue,d(t){t&&p(e)}}}function Nt(a){let e,n;return{c(){e=y("p"),n=O(`Are you sure you want to cancel this workflow? This action cannot be
        undone.`)},l(t){e=T(t,"P",{});var o=A(e);n=z(o,`Are you sure you want to cancel this workflow? This action cannot be
        undone.`),o.forEach(p)},m(t,o){D(t,e,o),_(e,n)},p:ue,d(t){t&&p(e)}}}function Qt(a){let e,n;return{c(){e=y("h3"),n=O("Terminate Workflow"),this.h()},l(t){e=T(t,"H3",{slot:!0});var o=A(e);n=z(o,"Terminate Workflow"),o.forEach(p),this.h()},h(){w(e,"slot","title")},m(t,o){D(t,e,o),_(e,n)},p:ue,d(t){t&&p(e)}}}function jt(a){let e,n,t,o,r,s,l;function f(c){a[17](c)}let h={id:"workflow-termination-reason",class:"mt-4",placeholder:"Enter a reason"};return a[2]!==void 0&&(h.value=a[2]),r=new Tt({props:h}),nt.push(()=>rt(r,"value",f)),{c(){e=y("div"),n=y("p"),t=O(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),o=q(),b(r.$$.fragment),this.h()},l(c){e=T(c,"DIV",{slot:!0});var u=A(e);n=T(u,"P",{});var M=A(n);t=z(M,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),M.forEach(p),o=F(u),v(r.$$.fragment,u),u.forEach(p),this.h()},h(){w(e,"slot","content")},m(c,u){D(c,e,u),_(e,n),_(n,t),_(e,o),E(r,e,null),l=!0},p(c,u){const M={};!s&&u&4&&(s=!0,M.value=c[2],at(()=>s=!1)),r.$set(M)},i(c){l||(m(r.$$.fragment,c),l=!0)},o(c){d(r.$$.fragment,c),l=!1},d(c){c&&p(e),I(r)}}}function Ut(a){let e,n,t,o;e=new xe({props:{bottomLeft:!0,hide:!a[6],width:200,text:"You do not have permission to edit this workflow. Contact your admin for assistance.",$$slots:{default:[Vt]},$$scope:{ctx:a}}});let r=!a[6]&&Ue(a);return{c(){b(e.$$.fragment),n=q(),r&&r.c(),t=He()},l(s){v(e.$$.fragment,s),n=F(s),r&&r.l(s),t=He()},m(s,l){E(e,s,l),D(s,n,l),r&&r.m(s,l),D(s,t,l),o=!0},p(s,[l]){const f={};l&64&&(f.hide=!s[6]),l&2097219&&(f.$$scope={dirty:l,ctx:s}),e.$set(f),s[6]?r&&(we(),d(r,1,1,()=>{r=null}),$e()):r?(r.p(s,l),l&64&&m(r,1)):(r=Ue(s),r.c(),m(r,1),r.m(t.parentNode,t))},i(s){o||(m(e.$$.fragment,s),m(r),o=!0)},o(s){d(e.$$.fragment,s),d(r),o=!1},d(s){I(e,s),s&&p(n),r&&r.d(s),s&&p(t)}}}function Ot(a,e,n){let t,o,r;R(a,ae,$=>n(18,r=$));let{workflow:s}=e,{namespace:l}=e,{cancelInProgress:f}=e,{cancelEnabled:h}=e,c="",u=!1,M=!1,H=!1;const N=()=>n(3,u=!0),Q=()=>n(3,u=!1),J=()=>n(4,M=!0),L=()=>n(4,M=!1),K=async()=>{n(3,u=!1),n(2,c=""),G(ae,r=Date.now(),r),await ot(),ve.push({id:"workflow-termination-success-toast",message:"Workflow terminated.",variant:"success",yPosition:"top"})},C=()=>{n(3,u=!1),n(2,c=""),ve.push({message:"Cannot terminate workflow.",variant:"error"})},P=()=>{!s.canBeTerminated||dt({workflow:s,namespace:l,reason:c}).then(K).catch(C)},te=async()=>{n(5,H=!0);try{await $t({namespace:l,workflowId:s.id,runId:s.runId}),n(5,H=!1),n(4,M=!1),G(ae,r=Date.now(),r)}catch{ve.push({yPosition:"top",variant:"error",message:"Unable to cancel workflow."})}};let V=Et();R(a,V,$=>n(16,o=$));function ne($){c=$,n(2,c)}return a.$$set=$=>{"workflow"in $&&n(14,s=$.workflow),"namespace"in $&&n(15,l=$.namespace),"cancelInProgress"in $&&n(0,f=$.cancelInProgress),"cancelEnabled"in $&&n(1,h=$.cancelEnabled)},a.$$.update=()=>{a.$$.dirty&98304&&n(6,t=o.namespaceWriteDisabled(l)||!wt(vt))},[f,h,c,u,M,H,t,N,Q,J,L,P,te,V,s,l,o,ne]}class zt extends oe{constructor(e){super(),se(this,e,Ot,Ut,le,{workflow:14,namespace:15,cancelInProgress:0,cancelEnabled:1})}}const Oe=a=>{const e=a==null?void 0:a.indexOf("?");return e>-1?a.slice(0,e):a},U=(a,e,n=!1)=>{const t=Oe(a).split("/"),o=Oe(e).split("/");if(n&&t.length!==o.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],l=o[r];if(s!==l)return!1}return!0};function Jt(a){let e,n,t,o,r,s;return{c(){e=y("label"),n=y("input"),t=q(),o=y("span"),this.h()},l(l){e=T(l,"LABEL",{for:!0,class:!0});var f=A(e);n=T(f,"INPUT",{id:!0,type:!0,class:!0}),t=F(f),o=T(f,"SPAN",{class:!0}),A(o).forEach(p),f.forEach(p),this.h()},h(){w(n,"id",a[1]),w(n,"type","checkbox"),w(n,"class","hidden svelte-1s95c4s"),w(o,"class","slider svelte-1s95c4s"),w(e,"for",a[1]),w(e,"class","switch svelte-1s95c4s")},m(l,f){D(l,e,f),_(e,n),n.checked=a[0],_(e,t),_(e,o),r||(s=[Le(n,"change",a[2]),Le(n,"change",a[3])],r=!0)},p(l,[f]){f&2&&w(n,"id",l[1]),f&1&&(n.checked=l[0]),f&2&&w(e,"for",l[1])},i:ue,o:ue,d(l){l&&p(e),r=!1,st(s)}}}function Kt(a,e,n){let{checked:t=!1}=e,{id:o}=e;function r(l){lt.call(this,a,l)}function s(){t=this.checked,n(0,t)}return a.$$set=l=>{"checked"in l&&n(0,t=l.checked),"id"in l&&n(1,o=l.id)},[t,o,r,s]}class Yt extends oe{constructor(e){super(),se(this,e,Kt,Jt,le,{checked:0,id:1})}}function Gt(a){let e,n;return e=new Yt({props:{id:"autorefresh",checked:a[1]}}),e.$on("change",function(){ft(a[0])&&a[0].apply(this,arguments)}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p(t,o){a=t;const r={};o&2&&(r.checked=a[1]),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Xt(a){let e,n,t,o;return t=new xe({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[Gt]},$$scope:{ctx:a}}}),{c(){e=y("label"),n=O(`Auto refresh
  `),b(t.$$.fragment),this.h()},l(r){e=T(r,"LABEL",{for:!0,class:!0});var s=A(e);n=z(s,`Auto refresh
  `),v(t.$$.fragment,s),s.forEach(p),this.h()},h(){w(e,"for","autorefresh"),w(e,"class","flex items-center gap-4 font-secondary text-sm")},m(r,s){D(r,e,s),_(e,n),E(t,e,null),o=!0},p(r,[s]){const l={};s&11&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){o||(m(t.$$.fragment,r),o=!0)},o(r){d(t.$$.fragment,r),o=!1},d(r){r&&p(e),I(t)}}}function Zt(a,e,n){let t,o;R(a,_e,s=>n(2,o=s));let{onChange:r}=e;return a.$$set=s=>{"onChange"in s&&n(0,r=s.onChange)},a.$$.update=()=>{a.$$.dirty&4&&n(1,t=o==="on")},[r,t,o]}class xt extends oe{constructor(e){super(),se(this,e,Zt,Xt,le,{onChange:0})}}function ze(a){let e,n,t,o,r;return n=new xt({props:{onChange:a[12]}}),o=new zt({props:{cancelEnabled:a[3],cancelInProgress:a[5],workflow:a[1],namespace:a[0]}}),{c(){e=y("div"),b(n.$$.fragment),t=q(),b(o.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var l=A(e);v(n.$$.fragment,l),t=F(l),v(o.$$.fragment,l),l.forEach(p),this.h()},h(){w(e,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end")},m(s,l){D(s,e,l),E(n,e,null),_(e,t),E(o,e,null),r=!0},p(s,l){const f={};l&8&&(f.cancelEnabled=s[3]),l&32&&(f.cancelInProgress=s[5]),l&2&&(f.workflow=s[1]),l&1&&(f.namespace=s[0]),o.$set(f)},i(s){r||(m(n.$$.fragment,s),m(o.$$.fragment,s),r=!0)},o(s){d(n.$$.fragment,s),d(o.$$.fragment,s),r=!1},d(s){s&&p(e),I(n),I(o)}}}function Je(a){let e,n,t,o;return n=new Ct({props:{icon:"info",intent:"info",title:"Cancel Request Sent",$$slots:{default:[en]},$$scope:{ctx:a}}}),{c(){e=y("div"),b(n.$$.fragment),this.h()},l(r){e=T(r,"DIV",{class:!0});var s=A(e);v(n.$$.fragment,s),s.forEach(p),this.h()},h(){w(e,"class","-mt-4 mb-4")},m(r,s){D(r,e,s),E(n,e,null),o=!0},i(r){o||(m(n.$$.fragment,r),Ye(()=>{t||(t=Ve(e,ke,{duration:200,delay:100},!0)),t.run(1)}),o=!0)},o(r){d(n.$$.fragment,r),t||(t=Ve(e,ke,{duration:200,delay:100},!1)),t.run(0),o=!1},d(r){r&&p(e),I(n),r&&t&&t.end()}}}function en(a){let e;return{c(){e=O(`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},l(n){e=z(n,`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},m(n,t){D(n,e,t)},d(n){n&&p(e)}}}function tn(a){var Ae,Ce,Pe,Se,De;let e,n,t,o,r,s,l,f,h,c,u,M,H,N=a[1].id+"",Q,J,L,K,C,P,te,V,ne,$,g,X,be,Z,fe;r=new pt({props:{name:"chevron-left",class:"inline"}}),u=new bt({props:{status:(Ae=a[1])==null?void 0:Ae.status}});let W=a[4]&&ze(a),S=a[5]&&Je(a);return P=new ce({props:{label:"History",href:me({view:a[8],...a[6]}),amount:(Ce=a[1])==null?void 0:Ce.historyEvents,dataCy:"history-tab",active:U(a[9].url.pathname,me({view:a[8],...a[6]}))}}),V=new ce({props:{label:"Workers",href:pe(a[6]),amount:(Se=(Pe=a[2])==null?void 0:Pe.pollers)==null?void 0:Se.length,dataCy:"workers-tab",active:U(a[9].url.pathname,pe(a[6]))}}),$=new ce({props:{label:"Pending Activities",href:he(a[6]),amount:(De=a[1].pendingActivities)==null?void 0:De.length,dataCy:"pending-activities-tab",active:U(a[9].url.pathname,he(a[6]))}}),X=new ce({props:{label:"Stack Trace",href:de(a[6]),dataCy:"stack-trace-tab",active:U(a[9].url.pathname,de(a[6]))}}),Z=new ce({props:{label:"Queries",href:ge(a[6]),dataCy:"queries-tab",active:U(a[9].url.pathname,ge(a[6]))}}),{c(){e=y("header"),n=y("main"),t=y("div"),o=y("a"),b(r.$$.fragment),s=O("Back to Workflows"),f=q(),h=y("div"),c=y("div"),b(u.$$.fragment),M=q(),H=y("h1"),Q=O(N),J=q(),W&&W.c(),L=q(),S&&S.c(),K=q(),C=y("nav"),b(P.$$.fragment),te=q(),b(V.$$.fragment),ne=q(),b($.$$.fragment),g=q(),b(X.$$.fragment),be=q(),b(Z.$$.fragment),this.h()},l(i){e=T(i,"HEADER",{class:!0});var k=A(e);n=T(k,"MAIN",{class:!0});var j=A(n);t=T(j,"DIV",{class:!0});var re=A(t);o=T(re,"A",{href:!0,"data-cy":!0,class:!0});var x=A(o);v(r.$$.fragment,x),s=z(x,"Back to Workflows"),x.forEach(p),re.forEach(p),f=F(j),h=T(j,"DIV",{class:!0});var Y=A(h);c=T(Y,"DIV",{class:!0});var ee=A(c);v(u.$$.fragment,ee),M=F(ee),H=T(ee,"H1",{"data-cy":!0,class:!0});var ie=A(H);Q=z(ie,N),ie.forEach(p),ee.forEach(p),J=F(Y),W&&W.l(Y),Y.forEach(p),L=F(j),S&&S.l(j),K=F(j),C=T(j,"NAV",{class:!0});var B=A(C);v(P.$$.fragment,B),te=F(B),v(V.$$.fragment,B),ne=F(B),v($.$$.fragment,B),g=F(B),v(X.$$.fragment,B),be=F(B),v(Z.$$.fragment,B),B.forEach(p),j.forEach(p),k.forEach(p),this.h()},h(){w(o,"href",l=Qe({namespace:a[0],query:a[7]||a[11],search:a[10]})),w(o,"data-cy","back-to-workflows"),w(o,"class","back-to-workflows svelte-st9g8m"),w(t,"class","-mt-3 -ml-2 mb-4 block"),w(H,"data-cy","workflow-id-heading"),w(H,"class","select-all overflow-hidden text-ellipsis text-2xl font-medium"),w(c,"class","flex w-full items-center justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),w(h,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),w(C,"class","flex flex-wrap gap-6"),w(n,"class","relative flex flex-col gap-1"),w(e,"class","mb-4 flex flex-col gap-4")},m(i,k){D(i,e,k),_(e,n),_(n,t),_(t,o),E(r,o,null),_(o,s),_(n,f),_(n,h),_(h,c),E(u,c,null),_(c,M),_(c,H),_(H,Q),_(h,J),W&&W.m(h,null),_(n,L),S&&S.m(n,null),_(n,K),_(n,C),E(P,C,null),_(C,te),E(V,C,null),_(C,ne),E($,C,null),_(C,g),E(X,C,null),_(C,be),E(Z,C,null),fe=!0},p(i,[k]){var B,Me,Re,qe,Fe;(!fe||k&129&&l!==(l=Qe({namespace:i[0],query:i[7]||i[11],search:i[10]})))&&w(o,"href",l);const j={};k&2&&(j.status=(B=i[1])==null?void 0:B.status),u.$set(j),(!fe||k&2)&&N!==(N=i[1].id+"")&&it(Q,N),i[4]?W?(W.p(i,k),k&16&&m(W,1)):(W=ze(i),W.c(),m(W,1),W.m(h,null)):W&&(we(),d(W,1,1,()=>{W=null}),$e()),i[5]?S?k&32&&m(S,1):(S=Je(i),S.c(),m(S,1),S.m(n,K)):S&&(we(),d(S,1,1,()=>{S=null}),$e());const re={};k&320&&(re.href=me({view:i[8],...i[6]})),k&2&&(re.amount=(Me=i[1])==null?void 0:Me.historyEvents),k&832&&(re.active=U(i[9].url.pathname,me({view:i[8],...i[6]}))),P.$set(re);const x={};k&64&&(x.href=pe(i[6])),k&4&&(x.amount=(qe=(Re=i[2])==null?void 0:Re.pollers)==null?void 0:qe.length),k&576&&(x.active=U(i[9].url.pathname,pe(i[6]))),V.$set(x);const Y={};k&64&&(Y.href=he(i[6])),k&2&&(Y.amount=(Fe=i[1].pendingActivities)==null?void 0:Fe.length),k&576&&(Y.active=U(i[9].url.pathname,he(i[6]))),$.$set(Y);const ee={};k&64&&(ee.href=de(i[6])),k&576&&(ee.active=U(i[9].url.pathname,de(i[6]))),X.$set(ee);const ie={};k&64&&(ie.href=ge(i[6])),k&576&&(ie.active=U(i[9].url.pathname,ge(i[6]))),Z.$set(ie)},i(i){fe||(m(r.$$.fragment,i),m(u.$$.fragment,i),m(W),m(S),m(P.$$.fragment,i),m(V.$$.fragment,i),m($.$$.fragment,i),m(X.$$.fragment,i),m(Z.$$.fragment,i),fe=!0)},o(i){d(r.$$.fragment,i),d(u.$$.fragment,i),d(W),d(S),d(P.$$.fragment,i),d(V.$$.fragment,i),d($.$$.fragment,i),d(X.$$.fragment,i),d(Z.$$.fragment,i),fe=!1},d(i){i&&p(e),I(r),I(u),W&&W.d(),S&&S.d(),I(P),I(V),I($),I(X),I(Z)}}}const Ke=15e3;function nn(a,e,n){let t,o,r,s,l,f,h,c,u,M,H;R(a,ct,g=>n(16,s=g)),R(a,Ze,g=>n(17,l=g)),R(a,ae,g=>n(18,f=g)),R(a,_e,g=>n(19,h=g)),R(a,gt,g=>n(20,c=g)),R(a,_t,g=>n(7,u=g)),R(a,ht,g=>n(8,M=g)),R(a,Xe,g=>n(9,H=g));var N,Q;let{namespace:J}=e,{workflow:L}=e,{workers:K}=e,{cancelEnabled:C=!0}=e,P;const{parameters:te,searchType:V}=c,ne=kt(te);Ge(()=>{o&&h==="on"&&(clearInterval(P),n(15,P=setInterval(()=>G(ae,f=Date.now(),f),Ke)))});const $=()=>{h==="on"?(G(_e,h="off",h),clearInterval(P)):(G(ae,f=Date.now(),f),G(_e,h="on",h),clearInterval(P),n(15,P=setInterval(()=>G(ae,f=Date.now(),f),Ke)))};return We(()=>{clearInterval(P)}),a.$$set=g=>{"namespace"in g&&n(0,J=g.namespace),"workflow"in g&&n(1,L=g.workflow),"workers"in g&&n(2,K=g.workers),"cancelEnabled"in g&&n(3,C=g.cancelEnabled)},a.$$.update=()=>{a.$$.dirty&3&&n(6,t={namespace:J,workflow:L==null?void 0:L.id,run:L==null?void 0:L.runId}),a.$$.dirty&139264&&n(4,o=n(13,N=l==null?void 0:l.workflow)===null||N===void 0?void 0:N.isRunning),a.$$.dirty&32784&&(o||clearInterval(P)),a.$$.dirty&212992&&n(5,r=(n(14,Q=l==null?void 0:l.workflow)===null||Q===void 0?void 0:Q.status)==="Running"&&s.events.some(g=>(g==null?void 0:g.eventType)==="WorkflowExecutionCancelRequested"))},[J,L,K,C,o,r,t,u,M,H,V,ne,$,N,Q,P,s,l]}class rn extends oe{constructor(e){super(),se(this,e,nn,tn,le,{namespace:0,workflow:1,workers:2,cancelEnabled:3})}}function an(a){let e,n;return e=new Mt({props:{$$slots:{default:[sn]},$$scope:{ctx:a}}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p(t,o){const r={};o&43&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function on(a){let e,n;return e=new Pt({}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p:ue,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function sn(a){let e,n,t;e=new rn({props:{namespace:a[1].params.namespace,workflow:a[3].workflow,workers:a[3].workers,cancelEnabled:a[0]}});const o=a[4].default,r=Ee(o,a,a[5],null);return{c(){b(e.$$.fragment),n=q(),r&&r.c()},l(s){v(e.$$.fragment,s),n=F(s),r&&r.l(s)},m(s,l){E(e,s,l),D(s,n,l),r&&r.m(s,l),t=!0},p(s,l){const f={};l&2&&(f.namespace=s[1].params.namespace),l&8&&(f.workflow=s[3].workflow),l&8&&(f.workers=s[3].workers),l&1&&(f.cancelEnabled=s[0]),e.$set(f),r&&r.p&&(!t||l&32)&&Ie(r,o,s,s[5],t?Te(o,s[5],l,null):ye(s[5]),null)},i(s){t||(m(e.$$.fragment,s),m(r,s),t=!0)},o(s){d(e.$$.fragment,s),d(r,s),t=!1},d(s){I(e,s),s&&p(n),r&&r.d(s)}}}function ln(a){let e,n,t,o;const r=[on,an],s=[];function l(f,h){return f[2]?0:1}return n=l(a),t=s[n]=r[n](a),{c(){e=y("main"),t.c(),this.h()},l(f){e=T(f,"MAIN",{class:!0});var h=A(e);t.l(h),h.forEach(p),this.h()},h(){w(e,"class","flex h-full flex-col gap-6")},m(f,h){D(f,e,h),s[n].m(e,null),o=!0},p(f,[h]){let c=n;n=l(f),n===c?s[n].p(f,h):(we(),d(s[c],1,1,()=>{s[c]=null}),$e(),t=s[n],t?t.p(f,h):(t=s[n]=r[n](f),t.c()),m(t,1),t.m(e,null))},i(f){o||(m(t),o=!0)},o(f){d(t),o=!1},d(f){f&&p(e),s[n].d()}}}function fn(a,e,n){let t,o,r,s,l;R(a,Be,u=>n(6,t=u)),R(a,Ne,u=>n(7,o=u)),R(a,Xe,u=>n(1,r=u)),R(a,ut,u=>n(2,s=u)),R(a,Ze,u=>n(3,l=u));let{$$slots:f={},$$scope:h}=e,{cancelEnabled:c=!0}=e;return Ge(()=>{const u=r.url.searchParams.get("sort");u&&G(Ne,o=u,o)}),We(()=>{G(Be,t=null,t)}),a.$$set=u=>{"cancelEnabled"in u&&n(0,c=u.cancelEnabled),"$$scope"in u&&n(5,h=u.$$scope)},[c,r,s,l,f,h]}class un extends oe{constructor(e){super(),se(this,e,fn,ln,le,{cancelEnabled:0})}}function cn(a){let e;const n=a[0].default,t=Ee(n,a,a[1],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||r&2)&&Ie(t,n,o,o[1],e?Te(n,o[1],r,null):ye(o[1]),null)},i(o){e||(m(t,o),e=!0)},o(o){d(t,o),e=!1},d(o){t&&t.d(o)}}}function mn(a){let e,n;return e=new un({props:{$$slots:{default:[cn]},$$scope:{ctx:a}}}),{c(){b(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p(t,[o]){const r={};o&2&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function pn(a,e,n){let{$$slots:t={},$$scope:o}=e;return We(()=>{mt()}),a.$$set=r=>{"$$scope"in r&&n(1,o=r.$$scope)},[t,o]}class pr extends oe{constructor(e){super(),se(this,e,pn,mn,le,{})}}export{pr as default};
