import{S as Y,i as Z,s as G,J as $e,l as k,m as $,n as v,h as c,b as w,K as ve,L as ye,M as Ee,f as _,ag as tt,ah as rt,t as g,ai as nt,an as at,Q as st,e as ce,g as Te,d as Ie,O as R,x as T,a as P,y as I,c as D,z as C,C as A,r as B,u as L,p as m,N as p,F as oe,Z as Le,U as me,a4 as J,E as ot,D as Me,W as Ue,X as Ye,T as X,v as ne,H as lt,I as ft,o as Ze,ao as Ce}from"../../../../../../chunks/index-681506b4.js";import{p as Ge}from"../../../../../../chunks/stores-6139b3d6.js";import{r as se,w as xe,l as it}from"../../../../../../chunks/workflow-run-e462555c.js";import{t as Ve,c as ut}from"../../../../../../chunks/events-9a13139a.js";import{f as qe}from"../../../../../../chunks/index-365ec00a.js";import{I as ct}from"../../../../../../chunks/icon-f119ac4d.js";import{a as ue,e as mt,b as He}from"../../../../../../chunks/event-view-2294bc17.js";import{w as ht}from"../../../../../../chunks/workflows-602f5b1e.js";import{g as ie,h as ge,i as we,j as be,k as ke,l as Qe}from"../../../../../../chunks/route-for-06e4a074.js";import{t as pt}from"../../../../../../chunks/workflow-service-5c016f96.js";import{W as _t}from"../../../../../../chunks/workflow-status-ee1566ad.js";import{n as je}from"../../../../../../chunks/notifications-98a8add6.js";import{s as dt}from"../../../../../../chunks/parse-with-big-int-561ccb8b.js";import{r as gt,a as wt}from"../../../../../../chunks/route-for-api-45689f42.js";import{B as bt}from"../../../../../../chunks/button-16b13172.js";import{M as kt}from"../../../../../../chunks/modal-e0a8aebd.js";import{r as $t}from"../../../../../../chunks/index-b4b51db3.js";import{T as et}from"../../../../../../chunks/tooltip-fe0c93aa.js";import{L as vt}from"../../../../../../chunks/loading-77a0047b.js";import"../../../../../../chunks/with-loading-f07bedaf.js";import"../../../../../../chunks/pollers-service-6b2981e9.js";import"../../../../../../chunks/is-http-27f6a3ea.js";import"../../../../../../chunks/persist-store-97aab428.js";import"../../../../../../chunks/get-encoder-endpoint-22632fb2.js";import"../../../../../../chunks/data-converter-config-96b1af32.js";import"../../../../../../chunks/atob-0f2ea7f7.js";import"../../../../../../chunks/auth-user-1dab4aa1.js";import"../../../../../../chunks/events-service-39074572.js";import"../../../../../../chunks/paginated-8a39dfa8.js";import"../../../../../../chunks/index-51607d78.js";import"../../../../../../chunks/format-date-c1755997.js";import"../../../../../../chunks/format-time-d031c2bc.js";import"../../../../../../chunks/is-44021919.js";import"../../../../../../chunks/index-7e3f25d2.js";import"../../../../../../chunks/has-c7a26a56.js";import"../../../../../../chunks/get-event-categorization-2cfb578f.js";import"../../../../../../chunks/simplify-attributes-055c76f2.js";import"../../../../../../chunks/settings-98c2e5c7.js";import"../../../../../../chunks/version-check-cee44a57.js";import"../../../../../../chunks/is-network-error-5f9e2367.js";import"../../../../../../chunks/badge-1d283657.js";import"../../../../../../chunks/copyable-7bcaedb0.js";import"../../../../../../chunks/copy-to-clipboard-7b0b1626.js";function yt(s){let e,r,t,a;const n=s[1].default,o=$e(n,s,s[0],null);return{c(){e=k("div"),o&&o.c()},l(l){e=$(l,"DIV",{});var f=v(e);o&&o.l(f),f.forEach(c)},m(l,f){w(l,e,f),o&&o.m(e,null),a=!0},p(l,[f]){o&&o.p&&(!a||f&1)&&ve(o,n,l,l[0],a?Ee(n,l[0],f,null):ye(l[0]),null)},i(l){a||(_(o,l),tt(()=>{t&&t.end(1),r=rt(e,qe,{y:-50,duration:150,delay:50}),r.start()}),a=!0)},o(l){g(o,l),r&&r.invalidate(),t=nt(e,qe,{y:-50,duration:150}),a=!1},d(l){l&&c(e),o&&o.d(l),l&&t&&t.end()}}}function Et(s,e,r){let{$$slots:t={},$$scope:a}=e;return s.$$set=n=>{"$$scope"in n&&r(0,a=n.$$scope)},[a,t]}class Tt extends Y{constructor(e){super(),Z(this,e,Et,yt,G,{})}}async function It({workflow:s,namespace:e,reason:r}){const t=await gt("workflow.terminate",{namespace:e,workflowId:s.id,runId:s.runId});return await wt(t,{options:{method:"POST",body:dt({reason:r})},shouldRetry:!1,notifyOnError:!1})}const ze="CoreUser",Ct=$t({terminateDisabled:()=>!1}),At=()=>at(ze)?st(ze):Ct;function Oe(s){let e,r,t,a;return e=new et({props:{bottomLeft:!0,hide:!s[3],width:200,text:"You do not have permission to terminate this workflow. Contact your admin for assistance.",$$slots:{default:[St]},$$scope:{ctx:s}}}),t=new kt({props:{open:s[2],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[Dt],title:[Pt]},$$scope:{ctx:s}}}),t.$on("cancelModal",s[5]),t.$on("confirmModal",s[6]),{c(){T(e.$$.fragment),r=P(),T(t.$$.fragment)},l(n){I(e.$$.fragment,n),r=D(n),I(t.$$.fragment,n)},m(n,o){C(e,n,o),w(n,r,o),C(t,n,o),a=!0},p(n,o){const l={};o&8&&(l.hide=!n[3]),o&16392&&(l.$$scope={dirty:o,ctx:n}),e.$set(l);const f={};o&4&&(f.open=n[2]),o&16386&&(f.$$scope={dirty:o,ctx:n}),t.$set(f)},i(n){a||(_(e.$$.fragment,n),_(t.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),a=!1},d(n){A(e,n),n&&c(r),A(t,n)}}}function Wt(s){let e;return{c(){e=B("Terminate")},l(r){e=L(r,"Terminate")},m(r,t){w(r,e,t)},d(r){r&&c(e)}}}function St(s){let e,r;return e=new bt({props:{variant:"destructive",disabled:s[3],dataCy:"terminate-button",$$slots:{default:[Wt]},$$scope:{ctx:s}}}),e.$on("click",s[4]),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){C(e,t,a),r=!0},p(t,a){const n={};a&8&&(n.disabled=t[3]),a&16384&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){A(e,t)}}}function Pt(s){let e,r;return{c(){e=k("h3"),r=B("Terminate Workflow"),this.h()},l(t){e=$(t,"H3",{slot:!0});var a=v(e);r=L(a,"Terminate Workflow"),a.forEach(c),this.h()},h(){m(e,"slot","title")},m(t,a){w(t,e,a),p(e,r)},p:oe,d(t){t&&c(e)}}}function Dt(s){let e,r,t,a,n,o,l;return{c(){e=k("div"),r=k("p"),t=B(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=P(),n=k("input"),this.h()},l(f){e=$(f,"DIV",{slot:!0});var i=v(e);r=$(i,"P",{});var b=v(r);t=L(b,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),b.forEach(c),a=D(i),n=$(i,"INPUT",{class:!0,placeholder:!0}),i.forEach(c),this.h()},h(){m(n,"class","mt-4 block w-full rounded-md border border-gray-200 p-2"),m(n,"placeholder","Enter a reason"),m(e,"slot","content")},m(f,i){w(f,e,i),p(e,r),p(r,t),p(e,a),p(e,n),Le(n,s[1]),o||(l=me(n,"input",s[10]),o=!0)},p(f,i){i&2&&n.value!==f[1]&&Le(n,f[1])},d(f){f&&c(e),o=!1,l()}}}function Nt(s){let e,r,t=s[0].canBeTerminated&&Oe(s);return{c(){t&&t.c(),e=ce()},l(a){t&&t.l(a),e=ce()},m(a,n){t&&t.m(a,n),w(a,e,n),r=!0},p(a,[n]){a[0].canBeTerminated?t?(t.p(a,n),n&1&&_(t,1)):(t=Oe(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(Te(),g(t,1,1,()=>{t=null}),Ie())},i(a){r||(_(t),r=!0)},o(a){g(t),r=!1},d(a){t&&t.d(a),a&&c(e)}}}function Rt(s,e,r){let t,a,n;R(s,se,N=>r(11,n=N));let{workflow:o}=e,{namespace:l}=e,f="",i=!1;const b=()=>r(2,i=!0),h=()=>r(2,i=!1),H=async()=>{r(2,i=!1),r(1,f=""),J(se,n=Date.now(),n),await ot(),je.add("success","Workflow Terminated")},W=()=>{r(2,i=!1),r(1,f=""),je.add("error","Cannot Terminate Workflow")},U=()=>{!o.canBeTerminated||It({workflow:o,namespace:l,reason:f}).then(H).catch(W)};let V=At();R(s,V,N=>r(9,a=N));function x(){f=this.value,r(1,f)}return s.$$set=N=>{"workflow"in N&&r(0,o=N.workflow),"namespace"in N&&r(8,l=N.namespace)},s.$$.update=()=>{s.$$.dirty&768&&r(3,t=a.terminateDisabled(l))},[o,f,i,t,b,h,U,V,l,a,x]}class Ft extends Y{constructor(e){super(),Z(this,e,Rt,Nt,G,{workflow:0,namespace:8})}}function Bt(s){let e,r,t,a;function n(f,i){return f[2]||f[2]===0?Ut:Mt}let o=n(s),l=o(s);return{c(){e=k("div"),l.c(),this.h()},l(f){e=$(f,"DIV",{class:!0,"data-cy":!0});var i=v(e);l.l(i),i.forEach(c),this.h()},h(){m(e,"class","block cursor-pointer whitespace-nowrap border-b-2 border-white text-sm hover:border-b-2 hover:border-blue-700 md:text-base svelte-1gctro0"),m(e,"data-cy",r=s[5].dataCy),X(e,"active",s[3]),X(e,"disabled",s[4])},m(f,i){w(f,e,i),l.m(e,null),t||(a=me(e,"click",s[6]),t=!0)},p(f,i){o===(o=n(f))&&l?l.p(f,i):(l.d(1),l=o(f),l&&(l.c(),l.m(e,null))),i&32&&r!==(r=f[5].dataCy)&&m(e,"data-cy",r),i&8&&X(e,"active",f[3]),i&16&&X(e,"disabled",f[4])},d(f){f&&c(e),l.d(),t=!1,a()}}}function Lt(s){let e,r;function t(o,l){return o[2]||o[2]===0?qt:Vt}let a=t(s),n=a(s);return{c(){e=k("a"),n.c(),this.h()},l(o){e=$(o,"A",{class:!0,href:!0,"data-cy":!0});var l=v(e);n.l(l),l.forEach(c),this.h()},h(){m(e,"class","block whitespace-nowrap border-b-2 border-white text-sm hover:border-b-2 hover:border-blue-700 md:text-base svelte-1gctro0"),m(e,"href",s[0]),m(e,"data-cy",r=s[5].dataCy),X(e,"active",s[3]),X(e,"disabled",s[4])},m(o,l){w(o,e,l),n.m(e,null)},p(o,l){a===(a=t(o))&&n?n.p(o,l):(n.d(1),n=a(o),n&&(n.c(),n.m(e,null))),l&1&&m(e,"href",o[0]),l&32&&r!==(r=o[5].dataCy)&&m(e,"data-cy",r),l&8&&X(e,"active",o[3]),l&16&&X(e,"disabled",o[4])},d(o){o&&c(e),n.d()}}}function Mt(s){let e;return{c(){e=B(s[1])},l(r){e=L(r,s[1])},m(r,t){w(r,e,t)},p(r,t){t&2&&ne(e,r[1])},d(r){r&&c(e)}}}function Ut(s){let e,r,t,a;return{c(){e=B(s[1]),r=P(),t=k("span"),a=B(s[2]),this.h()},l(n){e=L(n,s[1]),r=D(n),t=$(n,"SPAN",{class:!0});var o=v(t);a=L(o,s[2]),o.forEach(c),this.h()},h(){m(t,"class","rounded-sm bg-blue-100 px-2 text-blue-700")},m(n,o){w(n,e,o),w(n,r,o),w(n,t,o),p(t,a)},p(n,o){o&2&&ne(e,n[1]),o&4&&ne(a,n[2])},d(n){n&&c(e),n&&c(r),n&&c(t)}}}function Vt(s){let e;return{c(){e=B(s[1])},l(r){e=L(r,s[1])},m(r,t){w(r,e,t)},p(r,t){t&2&&ne(e,r[1])},d(r){r&&c(e)}}}function qt(s){let e,r,t,a;return{c(){e=B(s[1]),r=P(),t=k("span"),a=B(s[2]),this.h()},l(n){e=L(n,s[1]),r=D(n),t=$(n,"SPAN",{class:!0});var o=v(t);a=L(o,s[2]),o.forEach(c),this.h()},h(){m(t,"class","rounded-sm bg-blue-100 px-2 text-blue-700")},m(n,o){w(n,e,o),w(n,r,o),w(n,t,o),p(t,a)},p(n,o){o&2&&ne(e,n[1]),o&4&&ne(a,n[2])},d(n){n&&c(e),n&&c(r),n&&c(t)}}}function Ht(s){let e;function r(n,o){return n[0]?Lt:Bt}let t=r(s),a=t(s);return{c(){a.c(),e=ce()},l(n){a.l(n),e=ce()},m(n,o){a.m(n,o),w(n,e,o)},p(n,[o]){t===(t=r(n))&&a?a.p(n,o):(a.d(1),a=t(n),a&&(a.c(),a.m(e.parentNode,e)))},i:oe,o:oe,d(n){a.d(n),n&&c(e)}}}function Qt(s,e,r){let{href:t=""}=e,{label:a}=e,{amount:n=null}=e,{active:o=!1}=e,{disabled:l=!1}=e;function f(i){Ye.call(this,s,i)}return s.$$set=i=>{r(5,e=Me(Me({},e),Ue(i))),"href"in i&&r(0,t=i.href),"label"in i&&r(1,a=i.label),"amount"in i&&r(2,n=i.amount),"active"in i&&r(3,o=i.active),"disabled"in i&&r(4,l=i.disabled)},e=Ue(e),[t,a,n,o,l,e,f]}class fe extends Y{constructor(e){super(),Z(this,e,Qt,Ht,G,{href:0,label:1,amount:2,active:3,disabled:4})}}const Ke=s=>{const e=s==null?void 0:s.indexOf("?");return e>-1?s.slice(0,e):s},M=(s,e,r=!1)=>{const t=Ke(s).split("/"),a=Ke(e).split("/");if(r&&t.length!==a.length)return!1;for(let n=0;n<t.length;n++){const o=t[n],l=a[n];if(o!==l)return!1}return!0};function jt(s){let e,r,t,a,n,o;return{c(){e=k("label"),r=k("input"),t=P(),a=k("span"),this.h()},l(l){e=$(l,"LABEL",{for:!0,class:!0});var f=v(e);r=$(f,"INPUT",{id:!0,type:!0,class:!0}),t=D(f),a=$(f,"SPAN",{class:!0}),v(a).forEach(c),f.forEach(c),this.h()},h(){m(r,"id",s[1]),m(r,"type","checkbox"),m(r,"class","hidden svelte-1ie64yz"),m(a,"class","slider svelte-1ie64yz"),m(e,"for",s[1]),m(e,"class","switch svelte-1ie64yz")},m(l,f){w(l,e,f),p(e,r),r.checked=s[0],p(e,t),p(e,a),n||(o=[me(r,"change",s[2]),me(r,"change",s[3])],n=!0)},p(l,[f]){f&2&&m(r,"id",l[1]),f&1&&(r.checked=l[0]),f&2&&m(e,"for",l[1])},i:oe,o:oe,d(l){l&&c(e),n=!1,lt(o)}}}function zt(s,e,r){let{checked:t=!1}=e,{id:a}=e;function n(l){Ye.call(this,s,l)}function o(){t=this.checked,r(0,t)}return s.$$set=l=>{"checked"in l&&r(0,t=l.checked),"id"in l&&r(1,a=l.id)},[t,a,n,o]}class Ot extends Y{constructor(e){super(),Z(this,e,zt,jt,G,{checked:0,id:1})}}function Kt(s){let e,r;return e=new Ot({props:{id:"autorefresh",checked:s[1]}}),e.$on("change",function(){ft(s[0])&&s[0].apply(this,arguments)}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){C(e,t,a),r=!0},p(t,a){s=t;const n={};a&2&&(n.checked=s[1]),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){A(e,t)}}}function Jt(s){let e,r,t,a,n;return a=new et({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[Kt]},$$scope:{ctx:s}}}),{c(){e=k("label"),r=B("Auto refresh"),t=P(),T(a.$$.fragment),this.h()},l(o){e=$(o,"LABEL",{for:!0,class:!0});var l=v(e);r=L(l,"Auto refresh"),l.forEach(c),t=D(o),I(a.$$.fragment,o),this.h()},h(){m(e,"for","autorefresh"),m(e,"class","font-secondary text-sm")},m(o,l){w(o,e,l),p(e,r),w(o,t,l),C(a,o,l),n=!0},p(o,[l]){const f={};l&11&&(f.$$scope={dirty:l,ctx:o}),a.$set(f)},i(o){n||(_(a.$$.fragment,o),n=!0)},o(o){g(a.$$.fragment,o),n=!1},d(o){o&&c(e),o&&c(t),A(a,o)}}}function Xt(s,e,r){let t,a;R(s,ue,o=>r(2,a=o));let{onChange:n}=e;return s.$$set=o=>{"onChange"in o&&r(0,n=o.onChange)},s.$$.update=()=>{s.$$.dirty&4&&r(1,t=a==="on")},[n,t,a]}class Yt extends Y{constructor(e){super(),Z(this,e,Xt,Jt,G,{onChange:0})}}function Je(s){let e,r,t,a,n;return r=new Yt({props:{onChange:s[9]}}),a=new Ft({props:{workflow:s[1],namespace:s[0]}}),{c(){e=k("div"),T(r.$$.fragment),t=P(),T(a.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var l=v(e);I(r.$$.fragment,l),t=D(l),I(a.$$.fragment,l),l.forEach(c),this.h()},h(){m(e,"class","flex w-96 items-center justify-start gap-4 xl:justify-end")},m(o,l){w(o,e,l),C(r,e,null),p(e,t),C(a,e,null),n=!0},p(o,l){const f={};l&2&&(f.workflow=o[1]),l&1&&(f.namespace=o[0]),a.$set(f)},i(o){n||(_(r.$$.fragment,o),_(a.$$.fragment,o),n=!0)},o(o){g(r.$$.fragment,o),g(a.$$.fragment,o),n=!1},d(o){o&&c(e),A(r),A(a)}}}function Zt(s){var Ae,We,Se,Pe,De;let e,r,t,a,n,o,l,f,i,b,h,H,W,U=s[1].id+"",V,x,N,S,d,he,Q,pe,j,_e,z,de,O,ae;n=new ct({props:{name:"chevron-left",class:"inline"}}),h=new _t({props:{status:(Ae=s[1])==null?void 0:Ae.status}});let y=s[3]&&Je(s);return d=new fe({props:{label:"History",href:ie({view:s[4],...s[6]}),amount:(We=s[1])==null?void 0:We.historyEvents,dataCy:"history-tab",active:M(s[5].url.pathname,ie({view:s[4],...s[6]}))}}),Q=new fe({props:{label:"Workers",href:ge(s[6]),amount:(Pe=(Se=s[2])==null?void 0:Se.pollers)==null?void 0:Pe.length,dataCy:"workers-tab",active:M(s[5].url.pathname,ge(s[6]))}}),j=new fe({props:{label:"Pending Activities",href:we(s[6]),amount:(De=s[1].pendingActivities)==null?void 0:De.length,dataCy:"pending-activities-tab",active:M(s[5].url.pathname,we(s[6]))}}),z=new fe({props:{label:"Stack Trace",href:be(s[6]),dataCy:"stack-trace-tab",active:M(s[5].url.pathname,be(s[6]))}}),O=new fe({props:{label:"Queries",href:ke(s[6]),dataCy:"queries-tab",active:M(s[5].url.pathname,ke(s[6]))}}),{c(){e=k("header"),r=k("main"),t=k("div"),a=k("a"),T(n.$$.fragment),o=B("Back to Workflows"),f=P(),i=k("div"),b=k("h1"),T(h.$$.fragment),H=P(),W=k("span"),V=B(U),x=P(),y&&y.c(),N=P(),S=k("nav"),T(d.$$.fragment),he=P(),T(Q.$$.fragment),pe=P(),T(j.$$.fragment),_e=P(),T(z.$$.fragment),de=P(),T(O.$$.fragment),this.h()},l(u){e=$(u,"HEADER",{class:!0});var E=v(e);r=$(E,"MAIN",{class:!0});var q=v(r);t=$(q,"DIV",{class:!0});var ee=v(t);a=$(ee,"A",{href:!0,"data-cy":!0,class:!0});var te=v(a);I(n.$$.fragment,te),o=L(te,"Back to Workflows"),te.forEach(c),ee.forEach(c),f=D(q),i=$(q,"DIV",{class:!0});var K=v(i);b=$(K,"H1",{class:!0});var re=v(b);I(h.$$.fragment,re),H=D(re),W=$(re,"SPAN",{class:!0});var le=v(W);V=L(le,U),le.forEach(c),re.forEach(c),x=D(K),y&&y.l(K),K.forEach(c),N=D(q),S=$(q,"NAV",{class:!0});var F=v(S);I(d.$$.fragment,F),he=D(F),I(Q.$$.fragment,F),pe=D(F),I(j.$$.fragment,F),_e=D(F),I(z.$$.fragment,F),de=D(F),I(O.$$.fragment,F),F.forEach(c),q.forEach(c),E.forEach(c),this.h()},h(){m(a,"href",l=Qe({namespace:s[0],query:s[8],search:s[7]})),m(a,"data-cy","back-to-workflows"),m(a,"class","back-to-workflows svelte-st9g8m"),m(t,"class","-mt-3 -ml-2 mb-4 block"),m(W,"class","select-all font-medium"),m(b,"class","relative flex items-center gap-4 text-2xl"),m(i,"class","mb-8 flex flex-col items-start justify-between gap-4 xl:flex-row xl:gap-0"),m(S,"class","flex flex-wrap gap-6"),m(r,"class","relative flex flex-col gap-1"),m(e,"class","mb-4 flex flex-col gap-4")},m(u,E){w(u,e,E),p(e,r),p(r,t),p(t,a),C(n,a,null),p(a,o),p(r,f),p(r,i),p(i,b),C(h,b,null),p(b,H),p(b,W),p(W,V),p(i,x),y&&y.m(i,null),p(r,N),p(r,S),C(d,S,null),p(S,he),C(Q,S,null),p(S,pe),C(j,S,null),p(S,_e),C(z,S,null),p(S,de),C(O,S,null),ae=!0},p(u,[E]){var F,Ne,Re,Fe,Be;(!ae||E&1&&l!==(l=Qe({namespace:u[0],query:u[8],search:u[7]})))&&m(a,"href",l);const q={};E&2&&(q.status=(F=u[1])==null?void 0:F.status),h.$set(q),(!ae||E&2)&&U!==(U=u[1].id+"")&&ne(V,U),u[3]?y?(y.p(u,E),E&8&&_(y,1)):(y=Je(u),y.c(),_(y,1),y.m(i,null)):y&&(Te(),g(y,1,1,()=>{y=null}),Ie());const ee={};E&16&&(ee.href=ie({view:u[4],...u[6]})),E&2&&(ee.amount=(Ne=u[1])==null?void 0:Ne.historyEvents),E&48&&(ee.active=M(u[5].url.pathname,ie({view:u[4],...u[6]}))),d.$set(ee);const te={};E&4&&(te.amount=(Fe=(Re=u[2])==null?void 0:Re.pollers)==null?void 0:Fe.length),E&32&&(te.active=M(u[5].url.pathname,ge(u[6]))),Q.$set(te);const K={};E&2&&(K.amount=(Be=u[1].pendingActivities)==null?void 0:Be.length),E&32&&(K.active=M(u[5].url.pathname,we(u[6]))),j.$set(K);const re={};E&32&&(re.active=M(u[5].url.pathname,be(u[6]))),z.$set(re);const le={};E&32&&(le.active=M(u[5].url.pathname,ke(u[6]))),O.$set(le)},i(u){ae||(_(n.$$.fragment,u),_(h.$$.fragment,u),_(y),_(d.$$.fragment,u),_(Q.$$.fragment,u),_(j.$$.fragment,u),_(z.$$.fragment,u),_(O.$$.fragment,u),ae=!0)},o(u){g(n.$$.fragment,u),g(h.$$.fragment,u),g(y),g(d.$$.fragment,u),g(Q.$$.fragment,u),g(j.$$.fragment,u),g(z.$$.fragment,u),g(O.$$.fragment,u),ae=!1},d(u){u&&c(e),A(n),A(h),y&&y.d(),A(d),A(Q),A(j),A(z),A(O)}}}const Xe=15e3;function Gt(s,e,r){let t,a,n,o,l,f,i;R(s,se,d=>r(12,a=d)),R(s,ue,d=>r(13,n=d)),R(s,xe,d=>r(11,o=d)),R(s,ht,d=>r(14,l=d)),R(s,mt,d=>r(4,f=d)),R(s,Ge,d=>r(5,i=d));let{namespace:b}=e,{workflow:h}=e,{workers:H}=e,W;const U={namespace:b,workflow:h.id,run:h.runId},{parameters:V,searchType:x}=l,N=pt(V);Ze(()=>{t&&n==="on"&&(clearInterval(W),r(10,W=setInterval(()=>J(se,a=Date.now(),a),Xe)))});const S=()=>{n==="on"?(J(ue,n="off",n),clearInterval(W)):(J(se,a=Date.now(),a),J(ue,n="on",n),clearInterval(W),r(10,W=setInterval(()=>J(se,a=Date.now(),a),Xe)))};return Ce(()=>{clearInterval(W)}),s.$$set=d=>{"namespace"in d&&r(0,b=d.namespace),"workflow"in d&&r(1,h=d.workflow),"workers"in d&&r(2,H=d.workers)},s.$$.update=()=>{s.$$.dirty&2048&&r(3,t=o.workflow.isRunning),s.$$.dirty&1032&&(t||clearInterval(W))},[b,h,H,t,f,i,U,x,N,S,W,o]}class xt extends Y{constructor(e){super(),Z(this,e,Gt,Zt,G,{namespace:0,workflow:1,workers:2})}}function er(s){let e,r;return e=new Tt({props:{$$slots:{default:[rr]},$$scope:{ctx:s}}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){C(e,t,a),r=!0},p(t,a){const n={};a&18&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){A(e,t)}}}function tr(s){let e,r;return e=new vt({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){C(e,t,a),r=!0},p:oe,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){A(e,t)}}}function rr(s){let e,r,t;e=new xt({props:{namespace:s[2],workflow:s[1].workflow,workers:s[1].workers}});const a=s[3].default,n=$e(a,s,s[4],null);return{c(){T(e.$$.fragment),r=P(),n&&n.c()},l(o){I(e.$$.fragment,o),r=D(o),n&&n.l(o)},m(o,l){C(e,o,l),w(o,r,l),n&&n.m(o,l),t=!0},p(o,l){const f={};l&2&&(f.workflow=o[1].workflow),l&2&&(f.workers=o[1].workers),e.$set(f),n&&n.p&&(!t||l&16)&&ve(n,a,o,o[4],t?Ee(a,o[4],l,null):ye(o[4]),null)},i(o){t||(_(e.$$.fragment,o),_(n,o),t=!0)},o(o){g(e.$$.fragment,o),g(n,o),t=!1},d(o){A(e,o),o&&c(r),n&&n.d(o)}}}function nr(s){let e,r,t,a;const n=[tr,er],o=[];function l(f,i){return f[0]?0:1}return r=l(s),t=o[r]=n[r](s),{c(){e=k("main"),t.c(),this.h()},l(f){e=$(f,"MAIN",{class:!0});var i=v(e);t.l(i),i.forEach(c),this.h()},h(){m(e,"class","flex h-full flex-col gap-6")},m(f,i){w(f,e,i),o[r].m(e,null),a=!0},p(f,[i]){let b=r;r=l(f),r===b?o[r].p(f,i):(Te(),g(o[b],1,1,()=>{o[b]=null}),Ie(),t=o[r],t?t.p(f,i):(t=o[r]=n[r](f),t.c()),_(t,1),t.m(e,null))},i(f){a||(_(t),a=!0)},o(f){g(t),a=!1},d(f){f&&c(e),o[r].d()}}}function ar(s,e,r){let t,a,n,o,l;R(s,Ve,h=>r(5,t=h)),R(s,He,h=>r(6,a=h)),R(s,Ge,h=>r(7,n=h)),R(s,it,h=>r(0,o=h)),R(s,xe,h=>r(1,l=h));let{$$slots:f={},$$scope:i}=e;const{namespace:b}=n.params;return Ze(()=>{const h=n.url.searchParams.get("sort");h&&J(He,a=h,a)}),Ce(()=>{J(Ve,t=null,t)}),s.$$set=h=>{"$$scope"in h&&r(4,i=h.$$scope)},[o,l,b,f,i]}class sr extends Y{constructor(e){super(),Z(this,e,ar,nr,G,{})}}function or(s){let e;const r=s[0].default,t=$e(r,s,s[1],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&2)&&ve(t,r,a,a[1],e?Ee(r,a[1],n,null):ye(a[1]),null)},i(a){e||(_(t,a),e=!0)},o(a){g(t,a),e=!1},d(a){t&&t.d(a)}}}function lr(s){let e,r;return e=new sr({props:{$$slots:{default:[or]},$$scope:{ctx:s}}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){C(e,t,a),r=!0},p(t,[a]){const n={};a&2&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){A(e,t)}}}function fr(s,e,r){let{$$slots:t={},$$scope:a}=e;return Ce(()=>{ut()}),s.$$set=n=>{"$$scope"in n&&r(1,a=n.$$scope)},[t,a]}class Gr extends Y{constructor(e){super(),Z(this,e,fr,lr,G,{})}}export{Gr as default};
