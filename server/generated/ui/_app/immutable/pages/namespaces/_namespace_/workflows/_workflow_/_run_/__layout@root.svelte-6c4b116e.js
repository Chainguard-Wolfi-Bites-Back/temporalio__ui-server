import{S as oe,i as ae,s as se,J as ye,l as I,m as E,n as W,h as p,b as P,K as Ie,L as Ee,M as Te,f as h,ag as Ye,ah as et,t as _,ai as tt,x as k,a as D,e as Le,y as b,c as M,z as v,g as we,d as de,C as y,O as q,r as J,u as K,p as w,N as g,F as fe,a0 as rt,a8 as nt,a9 as ot,a4 as O,E as at,W as Fe,H as st,T as lt,I as it,v as ft,o as Ge,aq as We,ak as Ve}from"../../../../../../chunks/index-0a89fd56.js";import{p as Xe}from"../../../../../../chunks/stores-cc75c44f.js";import{r as ne,w as Ze,l as ut}from"../../../../../../chunks/workflow-run-003d9f43.js";import{e as ct,t as Ne,c as mt}from"../../../../../../chunks/events-ec544b69.js";import{f as $e}from"../../../../../../chunks/index-f35a5be1.js";import{I as pt}from"../../../../../../chunks/icon-547f7300.js";import{a as ge,e as ht,b as Be}from"../../../../../../chunks/event-view-393ad965.js";import{t as _t,w as gt}from"../../../../../../chunks/terminate-service-932fcdd3.js";import{g as ce,h as me,i as pe,j as he,k as _e,l as Qe}from"../../../../../../chunks/route-for-369a155d.js";import{w as wt,c as dt,t as $t}from"../../../../../../chunks/workflow-service-97d19ce2.js";import{c as kt,W as bt}from"../../../../../../chunks/core-user-bf063500.js";import{s as vt}from"../../../../../../chunks/settings-b2c21ef9.js";import{M as Ue}from"../../../../../../chunks/modal-71d77350.js";import{T as xe}from"../../../../../../chunks/tooltip-3d438461.js";import{S as yt}from"../../../../../../chunks/split-button-c0f86599.js";import{M as It}from"../../../../../../chunks/menu-item-77ab93d1.js";import{t as ve}from"../../../../../../chunks/toaster-e2f6943e.js";import{I as Et}from"../../../../../../chunks/input-25d2def7.js";import{T as ue}from"../../../../../../chunks/tab-d8def6a3.js";import{A as Tt}from"../../../../../../chunks/alert-d9741adf.js";import{L as Wt}from"../../../../../../chunks/loading-8c11a580.js";import"../../../../../../chunks/index-ecd41ae6.js";import"../../../../../../chunks/with-loading-f07bedaf.js";import"../../../../../../chunks/pollers-service-66684067.js";import"../../../../../../chunks/route-for-api-d725efb6.js";import"../../../../../../chunks/auth-user-b924a14a.js";import"../../../../../../chunks/persist-store-07cc3f48.js";import"../../../../../../chunks/parse-with-big-int-561ccb8b.js";import"../../../../../../chunks/notifications-72686422.js";import"../../../../../../chunks/is-network-error-5f9e2367.js";import"../../../../../../chunks/is-http-fad8c7a8.js";import"../../../../../../chunks/get-codec-2ae1f1d2.js";import"../../../../../../chunks/data-converter-config-141aa000.js";import"../../../../../../chunks/atob-ffa71835.js";import"../../../../../../chunks/events-service-e3a1e60f.js";import"../../../../../../chunks/paginated-f114a424.js";import"../../../../../../chunks/index-296b4109.js";import"../../../../../../chunks/format-date-c1755997.js";import"../../../../../../chunks/format-time-d031c2bc.js";import"../../../../../../chunks/is-44021919.js";import"../../../../../../chunks/index-7ac5c549.js";import"../../../../../../chunks/has-c7a26a56.js";import"../../../../../../chunks/get-event-categorization-2cfb578f.js";import"../../../../../../chunks/simplify-attributes-055c76f2.js";import"../../../../../../chunks/version-check-ac887ec2.js";import"../../../../../../chunks/v4-f2cd1a04.js";import"../../../../../../chunks/button-68ea4e9d.js";import"../../../../../../chunks/badge-111dc3a0.js";import"../../../../../../chunks/copy-to-clipboard-c13b766f.js";import"../../../../../../chunks/menu-efd189a5.js";import"../../../../../../chunks/icon-button-c9f64fdf.js";function At(n){let e,r,t,a;const o=n[1].default,s=ye(o,n,n[0],null);return{c(){e=I("div"),s&&s.c()},l(l){e=E(l,"DIV",{});var i=W(e);s&&s.l(i),i.forEach(p)},m(l,i){P(l,e,i),s&&s.m(e,null),a=!0},p(l,[i]){s&&s.p&&(!a||i&1)&&Ie(s,o,l,l[0],a?Te(o,l[0],i,null):Ee(l[0]),null)},i(l){a||(h(s,l),Ye(()=>{t&&t.end(1),r=et(e,$e,{y:-50,duration:150,delay:50}),r.start()}),a=!0)},o(l){_(s,l),r&&r.invalidate(),t=tt(e,$e,{y:-50,duration:150}),a=!1},d(l){l&&p(e),s&&s.d(l),l&&t&&t.end()}}}function Ct(n,e,r){let{$$slots:t={},$$scope:a}=e;return n.$$set=o=>{"$$scope"in o&&r(0,a=o.$$scope)},[a,t]}class Pt extends oe{constructor(e){super(),ae(this,e,Ct,At,se,{})}}function St(n){let e;return{c(){e=J("Terminate")},l(r){e=K(r,"Terminate")},m(r,t){P(r,e,t)},d(r){r&&p(e)}}}function Dt(n){let e,r;return e=new It({props:{destructive:!0,disabled:n[5],dataCy:"terminate-button",$$slots:{default:[St]},$$scope:{ctx:n}}}),e.$on("click",n[6]),{c(){k(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){v(e,t,a),r=!0},p(t,a){const o={};a&32&&(o.disabled=t[5]),a&1048576&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function Mt(n){let e,r;return e=new yt({props:{primaryActionDisabled:n[0],disabled:n[5],label:"Request Cancellation",id:"workflow-actions",$$slots:{default:[Dt]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){k(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){v(e,t,a),r=!0},p(t,a){const o={};a&1&&(o.primaryActionDisabled=t[0]),a&32&&(o.disabled=t[5]),a&1048608&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function je(n){let e,r,t,a;return e=new Ue({props:{open:n[3],loading:n[4],confirmType:"destructive",$$slots:{content:[qt],title:[Rt]},$$scope:{ctx:n}}}),e.$on("cancelModal",n[9]),e.$on("confirmModal",n[11]),t=new Ue({props:{open:n[2],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[Lt],title:[Ht]},$$scope:{ctx:n}}}),t.$on("cancelModal",n[7]),t.$on("confirmModal",n[10]),{c(){k(e.$$.fragment),r=D(),k(t.$$.fragment)},l(o){b(e.$$.fragment,o),r=M(o),b(t.$$.fragment,o)},m(o,s){v(e,o,s),P(o,r,s),v(t,o,s),a=!0},p(o,s){const l={};s&8&&(l.open=o[3]),s&16&&(l.loading=o[4]),s&1048576&&(l.$$scope={dirty:s,ctx:o}),e.$set(l);const i={};s&4&&(i.open=o[2]),s&1048578&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){a||(h(e.$$.fragment,o),h(t.$$.fragment,o),a=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),a=!1},d(o){y(e,o),o&&p(r),y(t,o)}}}function Rt(n){let e,r;return{c(){e=I("h3"),r=J("Cancel Workflow"),this.h()},l(t){e=E(t,"H3",{slot:!0});var a=W(e);r=K(a,"Cancel Workflow"),a.forEach(p),this.h()},h(){w(e,"slot","title")},m(t,a){P(t,e,a),g(e,r)},p:fe,d(t){t&&p(e)}}}function qt(n){let e,r;return{c(){e=I("p"),r=J(`Are you sure you want to cancel this workflow? This action cannot be
        undone.`)},l(t){e=E(t,"P",{});var a=W(e);r=K(a,`Are you sure you want to cancel this workflow? This action cannot be
        undone.`),a.forEach(p)},m(t,a){P(t,e,a),g(e,r)},p:fe,d(t){t&&p(e)}}}function Ht(n){let e,r;return{c(){e=I("h3"),r=J("Terminate Workflow"),this.h()},l(t){e=E(t,"H3",{slot:!0});var a=W(e);r=K(a,"Terminate Workflow"),a.forEach(p),this.h()},h(){w(e,"slot","title")},m(t,a){P(t,e,a),g(e,r)},p:fe,d(t){t&&p(e)}}}function Lt(n){let e,r,t,a,o,s,l;function i(f){n[16](f)}let m={id:"workflow-termination-reason",class:"mt-4",placeholder:"Enter a reason"};return n[1]!==void 0&&(m.value=n[1]),o=new Et({props:m}),rt.push(()=>nt(o,"value",i)),{c(){e=I("div"),r=I("p"),t=J(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=D(),k(o.$$.fragment),this.h()},l(f){e=E(f,"DIV",{slot:!0});var d=W(e);r=E(d,"P",{});var S=W(r);t=K(S,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),S.forEach(p),a=M(d),b(o.$$.fragment,d),d.forEach(p),this.h()},h(){w(e,"slot","content")},m(f,d){P(f,e,d),g(e,r),g(r,t),g(e,a),v(o,e,null),l=!0},p(f,d){const S={};!s&&d&2&&(s=!0,S.value=f[1],ot(()=>s=!1)),o.$set(S)},i(f){l||(h(o.$$.fragment,f),l=!0)},o(f){_(o.$$.fragment,f),l=!1},d(f){f&&p(e),y(o)}}}function Ft(n){let e,r,t,a;e=new xe({props:{bottomLeft:!0,hide:!n[5],width:200,text:"You do not have permission to edit this workflow. Contact your admin for assistance.",$$slots:{default:[Mt]},$$scope:{ctx:n}}});let o=!n[5]&&je(n);return{c(){k(e.$$.fragment),r=D(),o&&o.c(),t=Le()},l(s){b(e.$$.fragment,s),r=M(s),o&&o.l(s),t=Le()},m(s,l){v(e,s,l),P(s,r,l),o&&o.m(s,l),P(s,t,l),a=!0},p(s,[l]){const i={};l&32&&(i.hide=!s[5]),l&1048609&&(i.$$scope={dirty:l,ctx:s}),e.$set(i),s[5]?o&&(we(),_(o,1,1,()=>{o=null}),de()):o?(o.p(s,l),l&32&&h(o,1)):(o=je(s),o.c(),h(o,1),o.m(t.parentNode,t))},i(s){a||(h(e.$$.fragment,s),h(o),a=!0)},o(s){_(e.$$.fragment,s),_(o),a=!1},d(s){y(e,s),s&&p(r),o&&o.d(s),s&&p(t)}}}function Vt(n,e,r){let t,a,o;q(n,ne,c=>r(17,o=c));let{workflow:s}=e,{namespace:l}=e,{cancelInProgress:i}=e,m="",f=!1,d=!1,S=!1;const L=()=>r(2,f=!0),V=()=>r(2,f=!1),U=()=>r(3,d=!0),H=()=>r(3,d=!1),Y=async()=>{r(2,f=!1),r(1,m=""),O(ne,o=Date.now(),o),await at(),ve.push({id:"workflow-termination-success-toast",message:"Workflow terminated.",variant:"success",yPosition:"top"})},R=()=>{r(2,f=!1),r(1,m=""),ve.push({message:"Cannot terminate workflow.",variant:"error"})},C=()=>{!s.canBeTerminated||_t({workflow:s,namespace:l,reason:m}).then(Y).catch(R)},N=async()=>{r(4,S=!0);try{await dt({namespace:l,workflowId:s.id,runId:s.runId}),r(4,S=!1),r(3,d=!1),O(ne,o=Date.now(),o)}catch{ve.push({yPosition:"top",variant:"error",message:"Unable to cancel workflow."})}};let G=kt();q(n,G,c=>r(15,a=c));function B(c){m=c,r(1,m)}return n.$$set=c=>{"workflow"in c&&r(13,s=c.workflow),"namespace"in c&&r(14,l=c.namespace),"cancelInProgress"in c&&r(0,i=c.cancelInProgress)},n.$$.update=()=>{n.$$.dirty&49152&&r(5,t=a.namespaceWriteDisabled(l)||!wt(vt))},[i,m,f,d,S,t,L,V,U,H,C,N,G,s,l,a,B]}class Nt extends oe{constructor(e){super(),ae(this,e,Vt,Ft,se,{workflow:13,namespace:14,cancelInProgress:0})}}const ze=n=>{const e=n==null?void 0:n.indexOf("?");return e>-1?n.slice(0,e):n},j=(n,e,r=!1)=>{const t=ze(n).split("/"),a=ze(e).split("/");if(r&&t.length!==a.length)return!1;for(let o=0;o<t.length;o++){const s=t[o],l=a[o];if(s!==l)return!1}return!0};function Bt(n){let e,r,t,a,o,s;return{c(){e=I("label"),r=I("input"),t=D(),a=I("span"),this.h()},l(l){e=E(l,"LABEL",{for:!0,class:!0});var i=W(e);r=E(i,"INPUT",{id:!0,type:!0,class:!0}),t=M(i),a=E(i,"SPAN",{class:!0}),W(a).forEach(p),i.forEach(p),this.h()},h(){w(r,"id",n[1]),w(r,"type","checkbox"),w(r,"class","hidden svelte-1ie64yz"),w(a,"class","slider svelte-1ie64yz"),w(e,"for",n[1]),w(e,"class","switch svelte-1ie64yz")},m(l,i){P(l,e,i),g(e,r),r.checked=n[0],g(e,t),g(e,a),o||(s=[Fe(r,"change",n[2]),Fe(r,"change",n[3])],o=!0)},p(l,[i]){i&2&&w(r,"id",l[1]),i&1&&(r.checked=l[0]),i&2&&w(e,"for",l[1])},i:fe,o:fe,d(l){l&&p(e),o=!1,st(s)}}}function Qt(n,e,r){let{checked:t=!1}=e,{id:a}=e;function o(l){lt.call(this,n,l)}function s(){t=this.checked,r(0,t)}return n.$$set=l=>{"checked"in l&&r(0,t=l.checked),"id"in l&&r(1,a=l.id)},[t,a,o,s]}class Ut extends oe{constructor(e){super(),ae(this,e,Qt,Bt,se,{checked:0,id:1})}}function jt(n){let e,r;return e=new Ut({props:{id:"autorefresh",checked:n[1]}}),e.$on("change",function(){it(n[0])&&n[0].apply(this,arguments)}),{c(){k(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){v(e,t,a),r=!0},p(t,a){n=t;const o={};a&2&&(o.checked=n[1]),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function zt(n){let e,r,t,a,o;return a=new xe({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[jt]},$$scope:{ctx:n}}}),{c(){e=I("label"),r=J("Auto refresh"),t=D(),k(a.$$.fragment),this.h()},l(s){e=E(s,"LABEL",{for:!0,class:!0});var l=W(e);r=K(l,"Auto refresh"),l.forEach(p),t=M(s),b(a.$$.fragment,s),this.h()},h(){w(e,"for","autorefresh"),w(e,"class","font-secondary text-sm")},m(s,l){P(s,e,l),g(e,r),P(s,t,l),v(a,s,l),o=!0},p(s,[l]){const i={};l&11&&(i.$$scope={dirty:l,ctx:s}),a.$set(i)},i(s){o||(h(a.$$.fragment,s),o=!0)},o(s){_(a.$$.fragment,s),o=!1},d(s){s&&p(e),s&&p(t),y(a,s)}}}function Ot(n,e,r){let t,a;q(n,ge,s=>r(2,a=s));let{onChange:o}=e;return n.$$set=s=>{"onChange"in s&&r(0,o=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&r(1,t=a==="on")},[o,t,a]}class Jt extends oe{constructor(e){super(),ae(this,e,Ot,zt,se,{onChange:0})}}function Oe(n){let e,r,t,a,o;return r=new Jt({props:{onChange:n[10]}}),a=new Nt({props:{cancelInProgress:n[4],workflow:n[1],namespace:n[0]}}),{c(){e=I("div"),k(r.$$.fragment),t=D(),k(a.$$.fragment),this.h()},l(s){e=E(s,"DIV",{class:!0});var l=W(e);b(r.$$.fragment,l),t=M(l),b(a.$$.fragment,l),l.forEach(p),this.h()},h(){w(e,"class","flex items-center justify-start gap-4 xl:justify-end")},m(s,l){P(s,e,l),v(r,e,null),g(e,t),v(a,e,null),o=!0},p(s,l){const i={};l&16&&(i.cancelInProgress=s[4]),l&2&&(i.workflow=s[1]),l&1&&(i.namespace=s[0]),a.$set(i)},i(s){o||(h(r.$$.fragment,s),h(a.$$.fragment,s),o=!0)},o(s){_(r.$$.fragment,s),_(a.$$.fragment,s),o=!1},d(s){s&&p(e),y(r),y(a)}}}function Je(n){let e,r,t,a;return r=new Tt({props:{icon:"info",intent:"info",title:"Cancel Request Sent",$$slots:{default:[Kt]},$$scope:{ctx:n}}}),{c(){e=I("div"),k(r.$$.fragment),this.h()},l(o){e=E(o,"DIV",{class:!0});var s=W(e);b(r.$$.fragment,s),s.forEach(p),this.h()},h(){w(e,"class","-mt-4 mb-4")},m(o,s){P(o,e,s),v(r,e,null),a=!0},i(o){a||(h(r.$$.fragment,o),Ye(()=>{t||(t=Ve(e,$e,{duration:200,delay:100},!0)),t.run(1)}),a=!0)},o(o){_(r.$$.fragment,o),t||(t=Ve(e,$e,{duration:200,delay:100},!1)),t.run(0),a=!1},d(o){o&&p(e),y(r),o&&t&&t.end()}}}function Kt(n){let e;return{c(){e=J(`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},l(r){e=K(r,`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},m(r,t){P(r,e,t)},d(r){r&&p(e)}}}function Yt(n){var Ae,Ce,Pe,Se,De;let e,r,t,a,o,s,l,i,m,f,d,S,L,V=n[1].id+"",U,H,Y,R,C,N,G,B,c,X,ke,Z,be,x,le;o=new pt({props:{name:"chevron-left",class:"inline"}}),d=new bt({props:{status:(Ae=n[1])==null?void 0:Ae.status}});let T=n[3]&&Oe(n),A=n[4]&&Je(n);return N=new ue({props:{label:"History",href:ce({view:n[6],...n[5]}),amount:(Ce=n[1])==null?void 0:Ce.historyEvents,dataCy:"history-tab",active:j(n[7].url.pathname,ce({view:n[6],...n[5]}))}}),B=new ue({props:{label:"Workers",href:me(n[5]),amount:(Se=(Pe=n[2])==null?void 0:Pe.pollers)==null?void 0:Se.length,dataCy:"workers-tab",active:j(n[7].url.pathname,me(n[5]))}}),X=new ue({props:{label:"Pending Activities",href:pe(n[5]),amount:(De=n[1].pendingActivities)==null?void 0:De.length,dataCy:"pending-activities-tab",active:j(n[7].url.pathname,pe(n[5]))}}),Z=new ue({props:{label:"Stack Trace",href:he(n[5]),dataCy:"stack-trace-tab",active:j(n[7].url.pathname,he(n[5]))}}),x=new ue({props:{label:"Queries",href:_e(n[5]),dataCy:"queries-tab",active:j(n[7].url.pathname,_e(n[5]))}}),{c(){e=I("header"),r=I("main"),t=I("div"),a=I("a"),k(o.$$.fragment),s=J("Back to Workflows"),i=D(),m=I("div"),f=I("h1"),k(d.$$.fragment),S=D(),L=I("span"),U=J(V),H=D(),T&&T.c(),Y=D(),A&&A.c(),R=D(),C=I("nav"),k(N.$$.fragment),G=D(),k(B.$$.fragment),c=D(),k(X.$$.fragment),ke=D(),k(Z.$$.fragment),be=D(),k(x.$$.fragment),this.h()},l(u){e=E(u,"HEADER",{class:!0});var $=W(e);r=E($,"MAIN",{class:!0});var Q=W(r);t=E(Q,"DIV",{class:!0});var re=W(t);a=E(re,"A",{href:!0,"data-cy":!0,class:!0});var ee=W(a);b(o.$$.fragment,ee),s=K(ee,"Back to Workflows"),ee.forEach(p),re.forEach(p),i=M(Q),m=E(Q,"DIV",{class:!0});var z=W(m);f=E(z,"H1",{"data-cy":!0,class:!0});var te=W(f);b(d.$$.fragment,te),S=M(te),L=E(te,"SPAN",{class:!0});var ie=W(L);U=K(ie,V),ie.forEach(p),te.forEach(p),H=M(z),T&&T.l(z),z.forEach(p),Y=M(Q),A&&A.l(Q),R=M(Q),C=E(Q,"NAV",{class:!0});var F=W(C);b(N.$$.fragment,F),G=M(F),b(B.$$.fragment,F),c=M(F),b(X.$$.fragment,F),ke=M(F),b(Z.$$.fragment,F),be=M(F),b(x.$$.fragment,F),F.forEach(p),Q.forEach(p),$.forEach(p),this.h()},h(){w(a,"href",l=Qe({namespace:n[0],query:n[9],search:n[8]})),w(a,"data-cy","back-to-workflows"),w(a,"class","back-to-workflows svelte-st9g8m"),w(t,"class","-mt-3 -ml-2 mb-4 block"),w(L,"class","select-all font-medium"),w(f,"data-cy","workflow-id-heading"),w(f,"class","relative flex items-center gap-4 text-2xl"),w(m,"class","mb-8 flex flex-col items-center justify-between gap-4 xl:flex-row xl:gap-0"),w(C,"class","flex flex-wrap gap-6"),w(r,"class","relative flex flex-col gap-1"),w(e,"class","mb-4 flex flex-col gap-4")},m(u,$){P(u,e,$),g(e,r),g(r,t),g(t,a),v(o,a,null),g(a,s),g(r,i),g(r,m),g(m,f),v(d,f,null),g(f,S),g(f,L),g(L,U),g(m,H),T&&T.m(m,null),g(r,Y),A&&A.m(r,null),g(r,R),g(r,C),v(N,C,null),g(C,G),v(B,C,null),g(C,c),v(X,C,null),g(C,ke),v(Z,C,null),g(C,be),v(x,C,null),le=!0},p(u,[$]){var F,Me,Re,qe,He;(!le||$&1&&l!==(l=Qe({namespace:u[0],query:u[9],search:u[8]})))&&w(a,"href",l);const Q={};$&2&&(Q.status=(F=u[1])==null?void 0:F.status),d.$set(Q),(!le||$&2)&&V!==(V=u[1].id+"")&&ft(U,V),u[3]?T?(T.p(u,$),$&8&&h(T,1)):(T=Oe(u),T.c(),h(T,1),T.m(m,null)):T&&(we(),_(T,1,1,()=>{T=null}),de()),u[4]?A?$&16&&h(A,1):(A=Je(u),A.c(),h(A,1),A.m(r,R)):A&&(we(),_(A,1,1,()=>{A=null}),de());const re={};$&96&&(re.href=ce({view:u[6],...u[5]})),$&2&&(re.amount=(Me=u[1])==null?void 0:Me.historyEvents),$&224&&(re.active=j(u[7].url.pathname,ce({view:u[6],...u[5]}))),N.$set(re);const ee={};$&32&&(ee.href=me(u[5])),$&4&&(ee.amount=(qe=(Re=u[2])==null?void 0:Re.pollers)==null?void 0:qe.length),$&160&&(ee.active=j(u[7].url.pathname,me(u[5]))),B.$set(ee);const z={};$&32&&(z.href=pe(u[5])),$&2&&(z.amount=(He=u[1].pendingActivities)==null?void 0:He.length),$&160&&(z.active=j(u[7].url.pathname,pe(u[5]))),X.$set(z);const te={};$&32&&(te.href=he(u[5])),$&160&&(te.active=j(u[7].url.pathname,he(u[5]))),Z.$set(te);const ie={};$&32&&(ie.href=_e(u[5])),$&160&&(ie.active=j(u[7].url.pathname,_e(u[5]))),x.$set(ie)},i(u){le||(h(o.$$.fragment,u),h(d.$$.fragment,u),h(T),h(A),h(N.$$.fragment,u),h(B.$$.fragment,u),h(X.$$.fragment,u),h(Z.$$.fragment,u),h(x.$$.fragment,u),le=!0)},o(u){_(o.$$.fragment,u),_(d.$$.fragment,u),_(T),_(A),_(N.$$.fragment,u),_(B.$$.fragment,u),_(X.$$.fragment,u),_(Z.$$.fragment,u),_(x.$$.fragment,u),le=!1},d(u){u&&p(e),y(o),y(d),T&&T.d(),A&&A.d(),y(N),y(B),y(X),y(Z),y(x)}}}const Ke=15e3;function Gt(n,e,r){let t,a,o,s,l,i,m,f,d,S;q(n,ct,c=>r(14,s=c)),q(n,Ze,c=>r(15,l=c)),q(n,ne,c=>r(16,i=c)),q(n,ge,c=>r(17,m=c)),q(n,gt,c=>r(18,f=c)),q(n,ht,c=>r(6,d=c)),q(n,Xe,c=>r(7,S=c));var L,V;let{namespace:U}=e,{workflow:H}=e,{workers:Y}=e,R;const{parameters:C,searchType:N}=f,G=$t(C);Ge(()=>{a&&m==="on"&&(clearInterval(R),r(13,R=setInterval(()=>O(ne,i=Date.now(),i),Ke)))});const B=()=>{m==="on"?(O(ge,m="off",m),clearInterval(R)):(O(ne,i=Date.now(),i),O(ge,m="on",m),clearInterval(R),r(13,R=setInterval(()=>O(ne,i=Date.now(),i),Ke)))};return We(()=>{clearInterval(R)}),n.$$set=c=>{"namespace"in c&&r(0,U=c.namespace),"workflow"in c&&r(1,H=c.workflow),"workers"in c&&r(2,Y=c.workers)},n.$$.update=()=>{n.$$.dirty&3&&r(5,t={namespace:U,workflow:H==null?void 0:H.id,run:H==null?void 0:H.runId}),n.$$.dirty&34816&&r(3,a=r(11,L=l==null?void 0:l.workflow)===null||L===void 0?void 0:L.isRunning),n.$$.dirty&8200&&(a||clearInterval(R)),n.$$.dirty&53248&&r(4,o=(r(12,V=l==null?void 0:l.workflow)===null||V===void 0?void 0:V.status)==="Running"&&s.events.some(c=>(c==null?void 0:c.eventType)==="WorkflowExecutionCancelRequested"))},[U,H,Y,a,o,t,d,S,N,G,B,L,V,R,s,l]}class Xt extends oe{constructor(e){super(),ae(this,e,Gt,Yt,se,{namespace:0,workflow:1,workers:2})}}function Zt(n){let e,r;return e=new Pt({props:{$$slots:{default:[er]},$$scope:{ctx:n}}}),{c(){k(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){v(e,t,a),r=!0},p(t,a){const o={};a&21&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function xt(n){let e,r;return e=new Wt({}),{c(){k(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){v(e,t,a),r=!0},p:fe,i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function er(n){let e,r,t;e=new Xt({props:{namespace:n[0].params.namespace,workflow:n[2].workflow,workers:n[2].workers}});const a=n[3].default,o=ye(a,n,n[4],null);return{c(){k(e.$$.fragment),r=D(),o&&o.c()},l(s){b(e.$$.fragment,s),r=M(s),o&&o.l(s)},m(s,l){v(e,s,l),P(s,r,l),o&&o.m(s,l),t=!0},p(s,l){const i={};l&1&&(i.namespace=s[0].params.namespace),l&4&&(i.workflow=s[2].workflow),l&4&&(i.workers=s[2].workers),e.$set(i),o&&o.p&&(!t||l&16)&&Ie(o,a,s,s[4],t?Te(a,s[4],l,null):Ee(s[4]),null)},i(s){t||(h(e.$$.fragment,s),h(o,s),t=!0)},o(s){_(e.$$.fragment,s),_(o,s),t=!1},d(s){y(e,s),s&&p(r),o&&o.d(s)}}}function tr(n){let e,r,t,a;const o=[xt,Zt],s=[];function l(i,m){return i[1]?0:1}return r=l(n),t=s[r]=o[r](n),{c(){e=I("main"),t.c(),this.h()},l(i){e=E(i,"MAIN",{class:!0});var m=W(e);t.l(m),m.forEach(p),this.h()},h(){w(e,"class","flex h-full flex-col gap-6")},m(i,m){P(i,e,m),s[r].m(e,null),a=!0},p(i,[m]){let f=r;r=l(i),r===f?s[r].p(i,m):(we(),_(s[f],1,1,()=>{s[f]=null}),de(),t=s[r],t?t.p(i,m):(t=s[r]=o[r](i),t.c()),h(t,1),t.m(e,null))},i(i){a||(h(t),a=!0)},o(i){_(t),a=!1},d(i){i&&p(e),s[r].d()}}}function rr(n,e,r){let t,a,o,s,l;q(n,Ne,f=>r(5,t=f)),q(n,Be,f=>r(6,a=f)),q(n,Xe,f=>r(0,o=f)),q(n,ut,f=>r(1,s=f)),q(n,Ze,f=>r(2,l=f));let{$$slots:i={},$$scope:m}=e;return Ge(()=>{const f=o.url.searchParams.get("sort");f&&O(Be,a=f,a)}),We(()=>{O(Ne,t=null,t)}),n.$$set=f=>{"$$scope"in f&&r(4,m=f.$$scope)},[o,s,l,i,m]}class nr extends oe{constructor(e){super(),ae(this,e,rr,tr,se,{})}}function or(n){let e;const r=n[0].default,t=ye(r,n,n[1],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,o){t&&t.m(a,o),e=!0},p(a,o){t&&t.p&&(!e||o&2)&&Ie(t,r,a,a[1],e?Te(r,a[1],o,null):Ee(a[1]),null)},i(a){e||(h(t,a),e=!0)},o(a){_(t,a),e=!1},d(a){t&&t.d(a)}}}function ar(n){let e,r;return e=new nr({props:{$$slots:{default:[or]},$$scope:{ctx:n}}}),{c(){k(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){v(e,t,a),r=!0},p(t,[a]){const o={};a&2&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function sr(n,e,r){let{$$slots:t={},$$scope:a}=e;return We(()=>{mt()}),n.$$set=o=>{"$$scope"in o&&r(1,a=o.$$scope)},[t,a]}class on extends oe{constructor(e){super(),ae(this,e,sr,ar,se,{})}}export{on as default};
