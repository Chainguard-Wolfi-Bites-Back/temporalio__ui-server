import{S as G,i as J,s as X,I as $e,l as b,m as k,n as $,h as c,b as w,J as ve,K as ye,L as Ee,f as _,af as xe,ag as et,t as g,ah as tt,al as rt,P as nt,e as ce,g as Te,d as Ie,N as B,w as E,a as W,x as T,c as D,y as I,B as C,r as L,u as V,p as m,M as p,E as oe,Y as Le,T as me,a3 as re,D as at,C as Ve,V as Me,W as Ye,R as Y,v as ne,G as st,H as ot,o as lt,am as Ge}from"../../../../../../chunks/index-9d69cec5.js";import{p as Je}from"../../../../../../chunks/stores-d806cb81.js";import{r as se,w as Xe,l as ft}from"../../../../../../chunks/workflow-run-f8d190b9.js";import{t as Ue}from"../../../../../../chunks/events-6399389f.js";import{f as Fe}from"../../../../../../chunks/index-000e3276.js";import{I as it}from"../../../../../../chunks/icon-c89f2c4c.js";import{a as ue,e as ut}from"../../../../../../chunks/event-view-4b136c06.js";import{w as ct}from"../../../../../../chunks/workflows-a6c4b9e2.js";import{g as ie,h as ge,i as we,j as be,k as ke,l as qe}from"../../../../../../chunks/route-for-ad343b08.js";import{t as mt}from"../../../../../../chunks/workflow-service-d5b3fd40.js";import{W as ht}from"../../../../../../chunks/workflow-status-64bfdcec.js";import{n as He}from"../../../../../../chunks/notifications-677e5039.js";import{s as pt}from"../../../../../../chunks/parse-with-big-int-561ccb8b.js";import{r as _t,a as dt}from"../../../../../../chunks/route-for-api-d16befb1.js";import{B as gt}from"../../../../../../chunks/button-944065b3.js";import{M as wt}from"../../../../../../chunks/modal-b15ea2ae.js";import{r as bt}from"../../../../../../chunks/index-ad6f072e.js";import{T as Ze}from"../../../../../../chunks/tooltip-7d2e6ead.js";import{L as kt}from"../../../../../../chunks/loading-95abebb2.js";import"../../../../../../chunks/with-loading-f07bedaf.js";import"../../../../../../chunks/pollers-service-af03a4b1.js";import"../../../../../../chunks/is-http-4ef54e59.js";import"../../../../../../chunks/persist-store-7662fc0b.js";import"../../../../../../chunks/get-encoder-endpoint-67862a53.js";import"../../../../../../chunks/data-converter-config-eb31d046.js";import"../../../../../../chunks/atob-9a7280e8.js";import"../../../../../../chunks/auth-user-db7289b0.js";import"../../../../../../chunks/events-service-6a240926.js";import"../../../../../../chunks/paginated-a8b919d6.js";import"../../../../../../chunks/index-456a4419.js";import"../../../../../../chunks/format-date-eb94f038.js";import"../../../../../../chunks/is-44021919.js";import"../../../../../../chunks/index-7e3f25d2.js";import"../../../../../../chunks/has-c7a26a56.js";import"../../../../../../chunks/get-event-categorization-2cfb578f.js";import"../../../../../../chunks/simplify-attributes-db1e2585.js";import"../../../../../../chunks/settings-34c5dae2.js";import"../../../../../../chunks/version-check-64d780a1.js";import"../../../../../../chunks/is-network-error-5f9e2367.js";import"../../../../../../chunks/badge-6bbe0435.js";import"../../../../../../chunks/copyable-d698f3ab.js";import"../../../../../../chunks/copy-to-clipboard-b3dfa6fa.js";function $t(s){let e,r,t,a;const n=s[1].default,o=$e(n,s,s[0],null);return{c(){e=b("div"),o&&o.c()},l(l){e=k(l,"DIV",{});var f=$(e);o&&o.l(f),f.forEach(c)},m(l,f){w(l,e,f),o&&o.m(e,null),a=!0},p(l,[f]){o&&o.p&&(!a||f&1)&&ve(o,n,l,l[0],a?Ee(n,l[0],f,null):ye(l[0]),null)},i(l){a||(_(o,l),xe(()=>{t&&t.end(1),r=et(e,Fe,{y:-50,duration:150,delay:50}),r.start()}),a=!0)},o(l){g(o,l),r&&r.invalidate(),t=tt(e,Fe,{y:-50,duration:150}),a=!1},d(l){l&&c(e),o&&o.d(l),l&&t&&t.end()}}}function vt(s,e,r){let{$$slots:t={},$$scope:a}=e;return s.$$set=n=>{"$$scope"in n&&r(0,a=n.$$scope)},[a,t]}class yt extends G{constructor(e){super(),J(this,e,vt,$t,X,{})}}async function Et({workflow:s,namespace:e,reason:r}){const t=await _t("workflow.terminate",{namespace:e,workflowId:s.id,runId:s.runId});return await dt(t,{options:{method:"POST",body:pt({reason:r})},shouldRetry:!1,notifyOnError:!1})}const je="CoreUser",Tt=bt({terminateDisabled:()=>!1}),It=()=>rt(je)?nt(je):Tt;function Qe(s){let e,r,t,a;return e=new Ze({props:{bottomLeft:!0,hide:!s[3],width:200,text:"You do not have permission to terminate this workflow. Contact your admin for assistance.",$$slots:{default:[At]},$$scope:{ctx:s}}}),t=new wt({props:{open:s[2],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[Wt],title:[St]},$$scope:{ctx:s}}}),t.$on("cancelModal",s[5]),t.$on("confirmModal",s[6]),{c(){E(e.$$.fragment),r=W(),E(t.$$.fragment)},l(n){T(e.$$.fragment,n),r=D(n),T(t.$$.fragment,n)},m(n,o){I(e,n,o),w(n,r,o),I(t,n,o),a=!0},p(n,o){const l={};o&8&&(l.hide=!n[3]),o&16392&&(l.$$scope={dirty:o,ctx:n}),e.$set(l);const f={};o&4&&(f.open=n[2]),o&16386&&(f.$$scope={dirty:o,ctx:n}),t.$set(f)},i(n){a||(_(e.$$.fragment,n),_(t.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),a=!1},d(n){C(e,n),n&&c(r),C(t,n)}}}function Ct(s){let e;return{c(){e=L("Terminate")},l(r){e=V(r,"Terminate")},m(r,t){w(r,e,t)},d(r){r&&c(e)}}}function At(s){let e,r;return e=new gt({props:{variant:"destructive",disabled:s[3],dataCy:"terminate-button",$$slots:{default:[Ct]},$$scope:{ctx:s}}}),e.$on("click",s[4]),{c(){E(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,a){I(e,t,a),r=!0},p(t,a){const n={};a&8&&(n.disabled=t[3]),a&16384&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function St(s){let e,r;return{c(){e=b("h3"),r=L("Terminate Workflow"),this.h()},l(t){e=k(t,"H3",{slot:!0});var a=$(e);r=V(a,"Terminate Workflow"),a.forEach(c),this.h()},h(){m(e,"slot","title")},m(t,a){w(t,e,a),p(e,r)},p:oe,d(t){t&&c(e)}}}function Wt(s){let e,r,t,a,n,o,l;return{c(){e=b("div"),r=b("p"),t=L(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=W(),n=b("input"),this.h()},l(f){e=k(f,"DIV",{slot:!0});var i=$(e);r=k(i,"P",{});var h=$(r);t=V(h,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),h.forEach(c),a=D(i),n=k(i,"INPUT",{class:!0,placeholder:!0}),i.forEach(c),this.h()},h(){m(n,"class","mt-4 block w-full rounded-md border border-gray-200 p-2"),m(n,"placeholder","Enter a reason"),m(e,"slot","content")},m(f,i){w(f,e,i),p(e,r),p(r,t),p(e,a),p(e,n),Le(n,s[1]),o||(l=me(n,"input",s[10]),o=!0)},p(f,i){i&2&&n.value!==f[1]&&Le(n,f[1])},d(f){f&&c(e),o=!1,l()}}}function Dt(s){let e,r,t=s[0].canBeTerminated&&Qe(s);return{c(){t&&t.c(),e=ce()},l(a){t&&t.l(a),e=ce()},m(a,n){t&&t.m(a,n),w(a,e,n),r=!0},p(a,[n]){a[0].canBeTerminated?t?(t.p(a,n),n&1&&_(t,1)):(t=Qe(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(Te(),g(t,1,1,()=>{t=null}),Ie())},i(a){r||(_(t),r=!0)},o(a){g(t),r=!1},d(a){t&&t.d(a),a&&c(e)}}}function Pt(s,e,r){let t,a,n;B(s,se,R=>r(11,n=R));let{workflow:o}=e,{namespace:l}=e,f="",i=!1;const h=()=>r(2,i=!0),P=()=>r(2,i=!1),H=async()=>{r(2,i=!1),r(1,f=""),re(se,n=Date.now(),n),await at(),He.add("success","Workflow Terminated")},A=()=>{r(2,i=!1),r(1,f=""),He.add("error","Cannot Terminate Workflow")},U=()=>{!o.canBeTerminated||Et({workflow:o,namespace:l,reason:f}).then(H).catch(A)};let F=It();B(s,F,R=>r(9,a=R));function Z(){f=this.value,r(1,f)}return s.$$set=R=>{"workflow"in R&&r(0,o=R.workflow),"namespace"in R&&r(8,l=R.namespace)},s.$$.update=()=>{s.$$.dirty&768&&r(3,t=a.terminateDisabled(l))},[o,f,i,t,h,P,U,F,l,a,Z]}class Rt extends G{constructor(e){super(),J(this,e,Pt,Dt,X,{workflow:0,namespace:8})}}function Nt(s){let e,r,t,a;function n(f,i){return f[2]||f[2]===0?Vt:Lt}let o=n(s),l=o(s);return{c(){e=b("div"),l.c(),this.h()},l(f){e=k(f,"DIV",{class:!0,"data-cy":!0});var i=$(e);l.l(i),i.forEach(c),this.h()},h(){m(e,"class","block cursor-pointer whitespace-nowrap border-b-2 border-white text-sm hover:border-b-2 hover:border-blue-700 md:text-base svelte-1gctro0"),m(e,"data-cy",r=s[5].dataCy),Y(e,"active",s[3]),Y(e,"disabled",s[4])},m(f,i){w(f,e,i),l.m(e,null),t||(a=me(e,"click",s[6]),t=!0)},p(f,i){o===(o=n(f))&&l?l.p(f,i):(l.d(1),l=o(f),l&&(l.c(),l.m(e,null))),i&32&&r!==(r=f[5].dataCy)&&m(e,"data-cy",r),i&8&&Y(e,"active",f[3]),i&16&&Y(e,"disabled",f[4])},d(f){f&&c(e),l.d(),t=!1,a()}}}function Bt(s){let e,r;function t(o,l){return o[2]||o[2]===0?Ut:Mt}let a=t(s),n=a(s);return{c(){e=b("a"),n.c(),this.h()},l(o){e=k(o,"A",{class:!0,href:!0,"data-cy":!0});var l=$(e);n.l(l),l.forEach(c),this.h()},h(){m(e,"class","block whitespace-nowrap border-b-2 border-white text-sm hover:border-b-2 hover:border-blue-700 md:text-base svelte-1gctro0"),m(e,"href",s[0]),m(e,"data-cy",r=s[5].dataCy),Y(e,"active",s[3]),Y(e,"disabled",s[4])},m(o,l){w(o,e,l),n.m(e,null)},p(o,l){a===(a=t(o))&&n?n.p(o,l):(n.d(1),n=a(o),n&&(n.c(),n.m(e,null))),l&1&&m(e,"href",o[0]),l&32&&r!==(r=o[5].dataCy)&&m(e,"data-cy",r),l&8&&Y(e,"active",o[3]),l&16&&Y(e,"disabled",o[4])},d(o){o&&c(e),n.d()}}}function Lt(s){let e;return{c(){e=L(s[1])},l(r){e=V(r,s[1])},m(r,t){w(r,e,t)},p(r,t){t&2&&ne(e,r[1])},d(r){r&&c(e)}}}function Vt(s){let e,r,t,a;return{c(){e=L(s[1]),r=W(),t=b("span"),a=L(s[2]),this.h()},l(n){e=V(n,s[1]),r=D(n),t=k(n,"SPAN",{class:!0});var o=$(t);a=V(o,s[2]),o.forEach(c),this.h()},h(){m(t,"class","rounded-sm bg-blue-100 px-2 text-blue-700")},m(n,o){w(n,e,o),w(n,r,o),w(n,t,o),p(t,a)},p(n,o){o&2&&ne(e,n[1]),o&4&&ne(a,n[2])},d(n){n&&c(e),n&&c(r),n&&c(t)}}}function Mt(s){let e;return{c(){e=L(s[1])},l(r){e=V(r,s[1])},m(r,t){w(r,e,t)},p(r,t){t&2&&ne(e,r[1])},d(r){r&&c(e)}}}function Ut(s){let e,r,t,a;return{c(){e=L(s[1]),r=W(),t=b("span"),a=L(s[2]),this.h()},l(n){e=V(n,s[1]),r=D(n),t=k(n,"SPAN",{class:!0});var o=$(t);a=V(o,s[2]),o.forEach(c),this.h()},h(){m(t,"class","rounded-sm bg-blue-100 px-2 text-blue-700")},m(n,o){w(n,e,o),w(n,r,o),w(n,t,o),p(t,a)},p(n,o){o&2&&ne(e,n[1]),o&4&&ne(a,n[2])},d(n){n&&c(e),n&&c(r),n&&c(t)}}}function Ft(s){let e;function r(n,o){return n[0]?Bt:Nt}let t=r(s),a=t(s);return{c(){a.c(),e=ce()},l(n){a.l(n),e=ce()},m(n,o){a.m(n,o),w(n,e,o)},p(n,[o]){t===(t=r(n))&&a?a.p(n,o):(a.d(1),a=t(n),a&&(a.c(),a.m(e.parentNode,e)))},i:oe,o:oe,d(n){a.d(n),n&&c(e)}}}function qt(s,e,r){let{href:t=""}=e,{label:a}=e,{amount:n=null}=e,{active:o=!1}=e,{disabled:l=!1}=e;function f(i){Ye.call(this,s,i)}return s.$$set=i=>{r(5,e=Ve(Ve({},e),Me(i))),"href"in i&&r(0,t=i.href),"label"in i&&r(1,a=i.label),"amount"in i&&r(2,n=i.amount),"active"in i&&r(3,o=i.active),"disabled"in i&&r(4,l=i.disabled)},e=Me(e),[t,a,n,o,l,e,f]}class fe extends G{constructor(e){super(),J(this,e,qt,Ft,X,{href:0,label:1,amount:2,active:3,disabled:4})}}const ze=s=>{const e=s==null?void 0:s.indexOf("?");return e>-1?s.slice(0,e):s},M=(s,e,r=!1)=>{const t=ze(s).split("/"),a=ze(e).split("/");if(r&&t.length!==a.length)return!1;for(let n=0;n<t.length;n++){const o=t[n],l=a[n];if(o!==l)return!1}return!0};function Ht(s){let e,r,t,a,n,o;return{c(){e=b("label"),r=b("input"),t=W(),a=b("span"),this.h()},l(l){e=k(l,"LABEL",{for:!0,class:!0});var f=$(e);r=k(f,"INPUT",{id:!0,type:!0,class:!0}),t=D(f),a=k(f,"SPAN",{class:!0}),$(a).forEach(c),f.forEach(c),this.h()},h(){m(r,"id",s[1]),m(r,"type","checkbox"),m(r,"class","hidden svelte-1ie64yz"),m(a,"class","slider svelte-1ie64yz"),m(e,"for",s[1]),m(e,"class","switch svelte-1ie64yz")},m(l,f){w(l,e,f),p(e,r),r.checked=s[0],p(e,t),p(e,a),n||(o=[me(r,"change",s[2]),me(r,"change",s[3])],n=!0)},p(l,[f]){f&2&&m(r,"id",l[1]),f&1&&(r.checked=l[0]),f&2&&m(e,"for",l[1])},i:oe,o:oe,d(l){l&&c(e),n=!1,st(o)}}}function jt(s,e,r){let{checked:t=!1}=e,{id:a}=e;function n(l){Ye.call(this,s,l)}function o(){t=this.checked,r(0,t)}return s.$$set=l=>{"checked"in l&&r(0,t=l.checked),"id"in l&&r(1,a=l.id)},[t,a,n,o]}class Qt extends G{constructor(e){super(),J(this,e,jt,Ht,X,{checked:0,id:1})}}function zt(s){let e,r;return e=new Qt({props:{id:"autorefresh",checked:s[1]}}),e.$on("change",function(){ot(s[0])&&s[0].apply(this,arguments)}),{c(){E(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,a){I(e,t,a),r=!0},p(t,a){s=t;const n={};a&2&&(n.checked=s[1]),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function Ot(s){let e,r,t,a,n;return a=new Ze({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[zt]},$$scope:{ctx:s}}}),{c(){e=b("label"),r=L("Auto refresh"),t=W(),E(a.$$.fragment),this.h()},l(o){e=k(o,"LABEL",{for:!0,class:!0});var l=$(e);r=V(l,"Auto refresh"),l.forEach(c),t=D(o),T(a.$$.fragment,o),this.h()},h(){m(e,"for","autorefresh"),m(e,"class","font-secondary text-sm")},m(o,l){w(o,e,l),p(e,r),w(o,t,l),I(a,o,l),n=!0},p(o,[l]){const f={};l&11&&(f.$$scope={dirty:l,ctx:o}),a.$set(f)},i(o){n||(_(a.$$.fragment,o),n=!0)},o(o){g(a.$$.fragment,o),n=!1},d(o){o&&c(e),o&&c(t),C(a,o)}}}function Kt(s,e,r){let t,a;B(s,ue,o=>r(2,a=o));let{onChange:n}=e;return s.$$set=o=>{"onChange"in o&&r(0,n=o.onChange)},s.$$.update=()=>{s.$$.dirty&4&&r(1,t=a==="on")},[n,t,a]}class Yt extends G{constructor(e){super(),J(this,e,Kt,Ot,X,{onChange:0})}}function Oe(s){let e,r,t,a,n;return r=new Yt({props:{onChange:s[9]}}),a=new Rt({props:{workflow:s[1],namespace:s[0]}}),{c(){e=b("div"),E(r.$$.fragment),t=W(),E(a.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var l=$(e);T(r.$$.fragment,l),t=D(l),T(a.$$.fragment,l),l.forEach(c),this.h()},h(){m(e,"class","flex w-96 items-center justify-start gap-4 xl:justify-end")},m(o,l){w(o,e,l),I(r,e,null),p(e,t),I(a,e,null),n=!0},p(o,l){const f={};l&2&&(f.workflow=o[1]),l&1&&(f.namespace=o[0]),a.$set(f)},i(o){n||(_(r.$$.fragment,o),_(a.$$.fragment,o),n=!0)},o(o){g(r.$$.fragment,o),g(a.$$.fragment,o),n=!1},d(o){o&&c(e),C(r),C(a)}}}function Gt(s){var Ce,Ae,Se,We,De;let e,r,t,a,n,o,l,f,i,h,P,H,A,U=s[1].id+"",F,Z,R,S,d,he,j,pe,Q,_e,z,de,O,ae;n=new it({props:{name:"chevron-left",class:"inline"}}),P=new ht({props:{status:(Ce=s[1])==null?void 0:Ce.status}});let v=s[3]&&Oe(s);return d=new fe({props:{label:"History",href:ie({view:s[4],...s[6]}),amount:(Ae=s[1])==null?void 0:Ae.historyEvents,dataCy:"history-tab",active:M(s[5].url.pathname,ie({view:s[4],...s[6]}))}}),j=new fe({props:{label:"Workers",href:ge(s[6]),amount:(We=(Se=s[2])==null?void 0:Se.pollers)==null?void 0:We.length,dataCy:"workers-tab",active:M(s[5].url.pathname,ge(s[6]))}}),Q=new fe({props:{label:"Pending Activities",href:we(s[6]),amount:(De=s[1].pendingActivities)==null?void 0:De.length,dataCy:"pending-activities-tab",active:M(s[5].url.pathname,we(s[6]))}}),z=new fe({props:{label:"Stack Trace",href:be(s[6]),dataCy:"stack-trace-tab",active:M(s[5].url.pathname,be(s[6]))}}),O=new fe({props:{label:"Queries",href:ke(s[6]),dataCy:"queries-tab",active:M(s[5].url.pathname,ke(s[6]))}}),{c(){e=b("header"),r=b("main"),t=b("div"),a=b("a"),E(n.$$.fragment),o=L("Back to Workflows"),f=W(),i=b("div"),h=b("h1"),E(P.$$.fragment),H=W(),A=b("span"),F=L(U),Z=W(),v&&v.c(),R=W(),S=b("nav"),E(d.$$.fragment),he=W(),E(j.$$.fragment),pe=W(),E(Q.$$.fragment),_e=W(),E(z.$$.fragment),de=W(),E(O.$$.fragment),this.h()},l(u){e=k(u,"HEADER",{class:!0});var y=$(e);r=k(y,"MAIN",{class:!0});var q=$(r);t=k(q,"DIV",{class:!0});var x=$(t);a=k(x,"A",{href:!0,"data-cy":!0,class:!0});var ee=$(a);T(n.$$.fragment,ee),o=V(ee,"Back to Workflows"),ee.forEach(c),x.forEach(c),f=D(q),i=k(q,"DIV",{class:!0});var K=$(i);h=k(K,"H1",{class:!0});var te=$(h);T(P.$$.fragment,te),H=D(te),A=k(te,"SPAN",{class:!0});var le=$(A);F=V(le,U),le.forEach(c),te.forEach(c),Z=D(K),v&&v.l(K),K.forEach(c),R=D(q),S=k(q,"NAV",{class:!0});var N=$(S);T(d.$$.fragment,N),he=D(N),T(j.$$.fragment,N),pe=D(N),T(Q.$$.fragment,N),_e=D(N),T(z.$$.fragment,N),de=D(N),T(O.$$.fragment,N),N.forEach(c),q.forEach(c),y.forEach(c),this.h()},h(){m(a,"href",l=`/namespaces/${s[0]}/workflows?query=${qe(s[8])}&search=${s[7]}`),m(a,"data-cy","back-to-workflows"),m(a,"class","back-to-workflows svelte-st9g8m"),m(t,"class","-mt-3 -ml-2 mb-4 block"),m(A,"class","select-all font-medium"),m(h,"class","relative flex items-center gap-4 text-2xl"),m(i,"class","mb-8 flex flex-col items-start justify-between gap-4 xl:flex-row xl:gap-0"),m(S,"class","flex flex-wrap gap-6"),m(r,"class","relative flex flex-col gap-1"),m(e,"class","mb-4 flex flex-col gap-4")},m(u,y){w(u,e,y),p(e,r),p(r,t),p(t,a),I(n,a,null),p(a,o),p(r,f),p(r,i),p(i,h),I(P,h,null),p(h,H),p(h,A),p(A,F),p(i,Z),v&&v.m(i,null),p(r,R),p(r,S),I(d,S,null),p(S,he),I(j,S,null),p(S,pe),I(Q,S,null),p(S,_e),I(z,S,null),p(S,de),I(O,S,null),ae=!0},p(u,[y]){var N,Pe,Re,Ne,Be;(!ae||y&1&&l!==(l=`/namespaces/${u[0]}/workflows?query=${qe(u[8])}&search=${u[7]}`))&&m(a,"href",l);const q={};y&2&&(q.status=(N=u[1])==null?void 0:N.status),P.$set(q),(!ae||y&2)&&U!==(U=u[1].id+"")&&ne(F,U),u[3]?v?(v.p(u,y),y&8&&_(v,1)):(v=Oe(u),v.c(),_(v,1),v.m(i,null)):v&&(Te(),g(v,1,1,()=>{v=null}),Ie());const x={};y&16&&(x.href=ie({view:u[4],...u[6]})),y&2&&(x.amount=(Pe=u[1])==null?void 0:Pe.historyEvents),y&48&&(x.active=M(u[5].url.pathname,ie({view:u[4],...u[6]}))),d.$set(x);const ee={};y&4&&(ee.amount=(Ne=(Re=u[2])==null?void 0:Re.pollers)==null?void 0:Ne.length),y&32&&(ee.active=M(u[5].url.pathname,ge(u[6]))),j.$set(ee);const K={};y&2&&(K.amount=(Be=u[1].pendingActivities)==null?void 0:Be.length),y&32&&(K.active=M(u[5].url.pathname,we(u[6]))),Q.$set(K);const te={};y&32&&(te.active=M(u[5].url.pathname,be(u[6]))),z.$set(te);const le={};y&32&&(le.active=M(u[5].url.pathname,ke(u[6]))),O.$set(le)},i(u){ae||(_(n.$$.fragment,u),_(P.$$.fragment,u),_(v),_(d.$$.fragment,u),_(j.$$.fragment,u),_(Q.$$.fragment,u),_(z.$$.fragment,u),_(O.$$.fragment,u),ae=!0)},o(u){g(n.$$.fragment,u),g(P.$$.fragment,u),g(v),g(d.$$.fragment,u),g(j.$$.fragment,u),g(Q.$$.fragment,u),g(z.$$.fragment,u),g(O.$$.fragment,u),ae=!1},d(u){u&&c(e),C(n),C(P),v&&v.d(),C(d),C(j),C(Q),C(z),C(O)}}}const Ke=15e3;function Jt(s,e,r){let t,a,n,o,l,f,i;B(s,se,d=>r(12,a=d)),B(s,ue,d=>r(13,n=d)),B(s,Xe,d=>r(11,o=d)),B(s,ct,d=>r(14,l=d)),B(s,ut,d=>r(4,f=d)),B(s,Je,d=>r(5,i=d));let{namespace:h}=e,{workflow:P}=e,{workers:H}=e,A;const U={namespace:h,workflow:P.id,run:P.runId},{parameters:F,searchType:Z}=l,R=mt(F);lt(()=>{t&&n==="on"&&(clearInterval(A),r(10,A=setInterval(()=>re(se,a=Date.now(),a),Ke)))});const S=()=>{n==="on"?(re(ue,n="off",n),clearInterval(A)):(re(se,a=Date.now(),a),re(ue,n="on",n),clearInterval(A),r(10,A=setInterval(()=>re(se,a=Date.now(),a),Ke)))};return Ge(()=>{clearInterval(A)}),s.$$set=d=>{"namespace"in d&&r(0,h=d.namespace),"workflow"in d&&r(1,P=d.workflow),"workers"in d&&r(2,H=d.workers)},s.$$.update=()=>{s.$$.dirty&2048&&r(3,t=o.workflow.isRunning),s.$$.dirty&1032&&(t||clearInterval(A))},[h,P,H,t,f,i,U,Z,R,S,A,o]}class Xt extends G{constructor(e){super(),J(this,e,Jt,Gt,X,{namespace:0,workflow:1,workers:2})}}function Zt(s){let e,r;return e=new yt({props:{$$slots:{default:[er]},$$scope:{ctx:s}}}),{c(){E(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,a){I(e,t,a),r=!0},p(t,a){const n={};a&18&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function xt(s){let e,r;return e=new kt({}),{c(){E(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,a){I(e,t,a),r=!0},p:oe,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function er(s){let e,r,t;e=new Xt({props:{namespace:s[2],workflow:s[1].workflow,workers:s[1].workers}});const a=s[3].default,n=$e(a,s,s[4],null);return{c(){E(e.$$.fragment),r=W(),n&&n.c()},l(o){T(e.$$.fragment,o),r=D(o),n&&n.l(o)},m(o,l){I(e,o,l),w(o,r,l),n&&n.m(o,l),t=!0},p(o,l){const f={};l&2&&(f.workflow=o[1].workflow),l&2&&(f.workers=o[1].workers),e.$set(f),n&&n.p&&(!t||l&16)&&ve(n,a,o,o[4],t?Ee(a,o[4],l,null):ye(o[4]),null)},i(o){t||(_(e.$$.fragment,o),_(n,o),t=!0)},o(o){g(e.$$.fragment,o),g(n,o),t=!1},d(o){C(e,o),o&&c(r),n&&n.d(o)}}}function tr(s){let e,r,t,a;const n=[xt,Zt],o=[];function l(f,i){return f[0]?0:1}return r=l(s),t=o[r]=n[r](s),{c(){e=b("main"),t.c(),this.h()},l(f){e=k(f,"MAIN",{class:!0});var i=$(e);t.l(i),i.forEach(c),this.h()},h(){m(e,"class","flex h-full flex-col gap-6")},m(f,i){w(f,e,i),o[r].m(e,null),a=!0},p(f,[i]){let h=r;r=l(f),r===h?o[r].p(f,i):(Te(),g(o[h],1,1,()=>{o[h]=null}),Ie(),t=o[r],t?t.p(f,i):(t=o[r]=n[r](f),t.c()),_(t,1),t.m(e,null))},i(f){a||(_(t),a=!0)},o(f){g(t),a=!1},d(f){f&&c(e),o[r].d()}}}function rr(s,e,r){let t,a,n,o;B(s,Ue,h=>r(5,t=h)),B(s,Je,h=>r(6,a=h)),B(s,ft,h=>r(0,n=h)),B(s,Xe,h=>r(1,o=h));let{$$slots:l={},$$scope:f}=e;const{namespace:i}=a.params;return Ge(()=>{re(Ue,t=null,t)}),s.$$set=h=>{"$$scope"in h&&r(4,f=h.$$scope)},[n,o,i,l,f]}class nr extends G{constructor(e){super(),J(this,e,rr,tr,X,{})}}function ar(s){let e;const r=s[0].default,t=$e(r,s,s[1],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&2)&&ve(t,r,a,a[1],e?Ee(r,a[1],n,null):ye(a[1]),null)},i(a){e||(_(t,a),e=!0)},o(a){g(t,a),e=!1},d(a){t&&t.d(a)}}}function sr(s){let e,r;return e=new nr({props:{$$slots:{default:[ar]},$$scope:{ctx:s}}}),{c(){E(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,a){I(e,t,a),r=!0},p(t,[a]){const n={};a&2&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function or(s,e,r){let{$$slots:t={},$$scope:a}=e;return s.$$set=n=>{"$$scope"in n&&r(1,a=n.$$scope)},[t,a]}class Gr extends G{constructor(e){super(),J(this,e,or,sr,X,{})}}export{Gr as default};
