import{r as I,a as C}from"./route-for-api-14542cb7.js";import{s as q}from"./parse-with-big-int-561ccb8b.js";import{v as N}from"./v4-f2cd1a04.js";import{S as A,i as D,s as z,J as U,l as E,m as S,n as T,h as _,p as m,b as y,K as W,L as F,M as H,f as v,t as g,D as k,W as p,a as X,c as G,a2 as J,T as w,N as L,_ as x,U as j,au as $,g as Q,d as Y,I as ee,H as te,x as ae,y as le,z as se,C as ne,X as oe,e as R,ag as ie,ah as ue,F as O,r as M,u as P,v as re}from"./index-89809c17.js";import{I as ce}from"./icon-356cfdd5.js";import{f as fe}from"./index-2cacf65d.js";const Ne=async(o,e=fetch)=>{var i;let s="";const n=u=>{var d,r;return s=(r=(d=u==null?void 0:u.body)==null?void 0:d.message)!=null?r:`Error fetching schedules: ${u.status}: ${u.statusText}`},l=await I("schedules",{namespace:o}),{schedules:a,nextPageToken:t}=(i=await C(l,{params:{},onError:n,request:e}))!=null?i:{schedules:[],nextPageToken:""};return{schedules:a,nextPageToken:String(t),error:s}};async function Ae(o,e=fetch){const s=await I("schedule",o);return C(s,{request:e})}async function De(o,e=fetch){const s=await I("schedule.delete",o);return C(s,{request:e,options:{method:"DELETE"}})}async function ze({namespace:o,body:e}){let s="";const n=t=>{var i,u;return s=(u=(i=t==null?void 0:t.body)==null?void 0:i.message)!=null?u:`Error creating schedule: ${t.status}: ${t.statusText}`},l=await I("schedules",{namespace:o}),{conflictToken:a}=await C(l,{options:{method:"POST",body:q({request_id:N(),...e})},shouldRetry:!1,onError:n});return{conflictToken:a,error:s}}async function je({namespace:o,scheduleId:e,body:s}){let n="";const l=t=>{var i,u;return n=(u=(i=t==null?void 0:t.body)==null?void 0:i.message)!=null?u:`Error editing schedule: ${t.status}: ${t.statusText}`},a=await I("schedule",{namespace:o,scheduleId:e});return await C(a,{options:{method:"POST",body:q({request_id:N(),...s})},shouldRetry:!1,onError:l}),{error:n}}async function Oe({namespace:o,scheduleId:e,reason:s}){const n={patch:{pause:s}},l=await I("schedule",{namespace:o,scheduleId:e});return await C(l,{options:{method:"PATCH",body:q({...n,request_id:N()})},shouldRetry:!1,onError:a=>console.error(a)})}async function Ue({namespace:o,scheduleId:e,reason:s}){const n={patch:{unpause:s}},l=await I("schedule",{namespace:o,scheduleId:e});return await C(l,{options:{method:"PATCH",body:q({...n,request_id:N()})},shouldRetry:!1})}const de=[{label:"Every month",value:"*"},{label:"January",value:"1"},{label:"February",value:"2"},{label:"March",value:"3"},{label:"April",value:"4"},{label:"May",value:"5"},{label:"June",value:"6"},{label:"July",value:"7"},{label:"August",value:"8"},{label:"September",value:"9"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],he=[{label:"Everyday",value:"*"},{label:"Weekdays",value:"1,2,3,4,5"},{label:"Weekends",value:"6,7"}],me=[{label:"Sunday",value:"7"},{label:"Monday",value:"1"},{label:"Tuesday",value:"2"},{label:"Wednesday",value:"3"},{label:"Thursday",value:"4"},{label:"Friday",value:"5"},{label:"Saturday",value:"6"}],We=({preset:o,month:e,dayOfMonth:s,dayOfWeek:n,hour:l,minute:a})=>{let t="";const i=!l||!parseInt(l)||parseInt(l)<12?"am":"pm",d=`${(!l||!parseInt(l)?"12":parseInt(l)<=12?l:(parseInt(l)-12).toString()).padStart(2,"0")}:${a?a.padStart(2,"0"):"00"}${i}`;if(o==="week"){const r=he.find(f=>f.value===n);r?t=`${r.label} at ${d}`:t=`${n.split(",").map(h=>me.find(Z=>Z.value===h).label).join(", ")} at ${d}`}else if(o==="month")if(e==="*")t=`Every ${s} of the month at ${d}`;else{const f=e.split(",").map(c=>de.find(b=>b.value===c).label).join(", ");t=`Every ${s} of ${f} at ${d}`}return t},B=(o="",e=!1)=>{let s="";if(!o)return s;const n=parseInt(o.slice(0,-1)),l=Math.floor(n/(60*60*24));let a=n-(l>0?l*60*60*24:0);const t=Math.floor(a/(60*60));a=a-(t>0?t*60*60:0);const i=Math.floor(a/60),u=i>0?a-i*60:a,d=`${t?t.toString().padStart(2,"0"):"00"}hrs`,r=`${i?i.toString().padStart(2,"0"):"00"}min`,f=`${u?u.toString().padStart(2,"0"):"00"}sec`,c=e?"Offset":"Every";return l?s=`${c} ${l}days:${d}:${r}:${f}`:t?s=`${c} ${d}:${r}:${f}`:i?s=`${c} ${r}:${f}`:u&&(s=`${c} ${f}`),s};function be(o){let e,s,n;const l=o[2].default,a=U(l,o,o[1],null);return{c(){e=E("div"),a&&a.c(),this.h()},l(t){e=S(t,"DIV",{class:!0});var i=T(e);a&&a.l(i),i.forEach(_),this.h()},h(){m(e,"class",s="relative inline-block "+o[0].class)},m(t,i){y(t,e,i),a&&a.m(e,null),n=!0},p(t,[i]){a&&a.p&&(!n||i&2)&&W(a,l,t,t[1],n?H(l,t[1],i,null):F(t[1]),null),(!n||i&1&&s!==(s="relative inline-block "+t[0].class))&&m(e,"class",s)},i(t){n||(v(a,t),n=!0)},o(t){g(a,t),n=!1},d(t){t&&_(e),a&&a.d(t)}}}function _e(o,e,s){let{$$slots:n={},$$scope:l}=e;return o.$$set=a=>{s(0,e=k(k({},e),p(a))),"$$scope"in a&&s(1,l=a.$$scope)},e=p(e),[e,l,n]}class Fe extends A{constructor(e){super(),D(this,e,_e,be,z,{})}}const ve=(o,e)=>{const s=()=>{o.dispatchEvent(new CustomEvent("toggle-menu"))},n=a=>{var i;let t=(i=a.path)!=null&&i.length?a.path[0]:a.target;!t&&a.relatedTarget&&(t=a.relatedTarget),o&&!o.contains(t)&&o.ariaExpanded==="true"&&!e&&(o.dispatchEvent(new CustomEvent("close-menu")),a.stopPropagation())},l=a=>{(a==null?void 0:a.key)==="Escape"&&o.dispatchEvent(new CustomEvent("close-menu"))};return o.setAttribute("tabindex","0"),o.addEventListener("click",s,!1),document.addEventListener("click",n,!1),document.addEventListener("keyup",l,!1),{update(a){e=a},destroy(){o.removeEventListener("click",s,!1),document.removeEventListener("click",n,!1),document.removeEventListener("keyup",l,!1)}}};function K(o){let e,s;return e=new ce({props:{class:"pointer-events-none",name:o[0]?"chevron-up":"chevron-down"}}),{c(){ae(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,l){se(e,n,l),s=!0},p(n,l){const a={};l&1&&(a.name=n[0]?"chevron-up":"chevron-down"),e.$set(a)},i(n){s||(v(e.$$.fragment,n),s=!0)},o(n){g(e.$$.fragment,n),s=!1},d(n){ne(e,n)}}}function ye(o){let e,s,n,l,a,t,i,u;const d=o[10].default,r=U(d,o,o[9],null);let f=o[4]&&K(o);return{c(){e=E("button"),r&&r.c(),s=X(),f&&f.c(),this.h()},l(c){e=S(c,"BUTTON",{type:!0,"aria-haspopup":!0,"aria-controls":!0,"aria-expanded":!0,class:!0});var h=T(e);r&&r.l(h),s=G(h),f&&f.l(h),h.forEach(_),this.h()},h(){m(e,"type","button"),m(e,"aria-haspopup",n=!o[3]),m(e,"aria-controls",o[1]),m(e,"aria-expanded",o[0]),m(e,"class",l=J(o[8].class)+" svelte-jjrza"),e.disabled=o[3],w(e,"dark",o[2]),w(e,"show",o[0])},m(c,h){y(c,e,h),r&&r.m(e,null),L(e,s),f&&f.m(e,null),t=!0,i||(u=[x(a=ve.call(null,e,o[5])),j(e,"close-menu",o[6]),j(e,"toggle-menu",o[7]),j(e,"click",$(o[11]))],i=!0)},p(c,[h]){r&&r.p&&(!t||h&512)&&W(r,d,c,c[9],t?H(d,c[9],h,null):F(c[9]),null),c[4]?f?(f.p(c,h),h&16&&v(f,1)):(f=K(c),f.c(),v(f,1),f.m(e,null)):f&&(Q(),g(f,1,1,()=>{f=null}),Y()),(!t||h&8&&n!==(n=!c[3]))&&m(e,"aria-haspopup",n),(!t||h&2)&&m(e,"aria-controls",c[1]),(!t||h&1)&&m(e,"aria-expanded",c[0]),(!t||h&256&&l!==(l=J(c[8].class)+" svelte-jjrza"))&&m(e,"class",l),(!t||h&8)&&(e.disabled=c[3]),a&&ee(a.update)&&h&32&&a.update.call(null,c[5]),(!t||h&260)&&w(e,"dark",c[2]),(!t||h&257)&&w(e,"show",c[0])},i(c){t||(v(r,c),v(f),t=!0)},o(c){g(r,c),g(f),t=!1},d(c){c&&_(e),r&&r.d(c),f&&f.d(),i=!1,te(u)}}}function ge(o,e,s){let{$$slots:n={},$$scope:l}=e,{show:a}=e,{controls:t}=e,{dark:i=!1}=e,{disabled:u=!1}=e,{hasIndicator:d=!1}=e,{keepOpen:r=!1}=e;const f=()=>{!u&&s(0,a=!1)},c=()=>{!u&&s(0,a=!a)};function h(b){oe.call(this,o,b)}return o.$$set=b=>{s(8,e=k(k({},e),p(b))),"show"in b&&s(0,a=b.show),"controls"in b&&s(1,t=b.controls),"dark"in b&&s(2,i=b.dark),"disabled"in b&&s(3,u=b.disabled),"hasIndicator"in b&&s(4,d=b.hasIndicator),"keepOpen"in b&&s(5,r=b.keepOpen),"$$scope"in b&&s(9,l=b.$$scope)},e=p(e),[a,t,i,u,d,r,f,c,e,l,n,h]}class He extends A{constructor(e){super(),D(this,e,ge,ye,z,{show:0,controls:1,dark:2,disabled:3,hasIndicator:4,keepOpen:5})}}function V(o){let e,s,n,l;const a=o[7].default,t=U(a,o,o[6],null);return{c(){e=E("ul"),t&&t.c(),this.h()},l(i){e=S(i,"UL",{role:!0,class:!0,"aria-labelledby":!0,width:!0,id:!0});var u=T(e);t&&t.l(u),u.forEach(_),this.h()},h(){m(e,"role","menu"),m(e,"class",s="absolute z-50 mt-1 w-full list-none overflow-y-scroll rounded border border-gray-300 bg-white text-primary shadow "+o[3]+" "+o[5].class+" svelte-zt7cn"),m(e,"aria-labelledby",o[0]),m(e,"width",o[4]),m(e,"id",o[0]),w(e,"dark",o[2])},m(i,u){y(i,e,u),t&&t.m(e,null),l=!0},p(i,u){t&&t.p&&(!l||u&64)&&W(t,a,i,i[6],l?H(a,i[6],u,null):F(i[6]),null),(!l||u&40&&s!==(s="absolute z-50 mt-1 w-full list-none overflow-y-scroll rounded border border-gray-300 bg-white text-primary shadow "+i[3]+" "+i[5].class+" svelte-zt7cn"))&&m(e,"class",s),(!l||u&1)&&m(e,"aria-labelledby",i[0]),(!l||u&1)&&m(e,"id",i[0]),(!l||u&44)&&w(e,"dark",i[2])},i(i){l||(v(t,i),n||ie(()=>{n=ue(e,fe,{duration:100}),n.start()}),l=!0)},o(i){g(t,i),l=!1},d(i){i&&_(e),t&&t.d(i)}}}function ke(o){let e,s,n=o[1]&&V(o);return{c(){n&&n.c(),e=R()},l(l){n&&n.l(l),e=R()},m(l,a){n&&n.m(l,a),y(l,e,a),s=!0},p(l,[a]){l[1]?n?(n.p(l,a),a&2&&v(n,1)):(n=V(l),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(Q(),g(n,1,1,()=>{n=null}),Y())},i(l){s||(v(n),s=!0)},o(l){g(n),s=!1},d(l){n&&n.d(l),l&&_(e)}}}function pe(o,e,s){let{$$slots:n={},$$scope:l}=e,{id:a}=e,{show:t=!1}=e,{dark:i=!1}=e,{position:u="left"}=e,d;return o.$$set=r=>{s(5,e=k(k({},e),p(r))),"id"in r&&s(0,a=r.id),"show"in r&&s(1,t=r.show),"dark"in r&&s(2,i=r.dark),"position"in r&&s(3,u=r.position),"$$scope"in r&&s(6,l=r.$$scope)},e=p(e),[a,t,i,u,d,e,l,n]}class Je extends A{constructor(e){super(),D(this,e,pe,ke,z,{id:0,show:1,dark:2,position:3})}}function Ee(o){let e,s=B(o[1])+"",n,l,a,t=B(o[2],!0)+"",i;return{c(){e=E("p"),n=M(s),l=X(),a=E("p"),i=M(t),this.h()},l(u){e=S(u,"P",{"data-cy":!0});var d=T(e);n=P(d,s),d.forEach(_),l=G(u),a=S(u,"P",{"data-cy":!0});var r=T(a);i=P(r,t),r.forEach(_),this.h()},h(){m(e,"data-cy","schedule-interval-frequency"),m(a,"data-cy","schedule-phase-frequency")},m(u,d){y(u,e,d),L(e,n),y(u,l,d),y(u,a,d),L(a,i)},p:O,d(u){u&&_(e),u&&_(l),u&&_(a)}}}function Se(o){var a,t;let e,s=((t=(a=o[0])==null?void 0:a.comment)!=null?t:"")+"",n,l;return{c(){e=E("p"),n=M(s),l=M(" UTC"),this.h()},l(i){e=S(i,"P",{"data-cy":!0});var u=T(e);n=P(u,s),l=P(u," UTC"),u.forEach(_),this.h()},h(){m(e,"data-cy","schedule-calendar-frequency")},m(i,u){y(i,e,u),L(e,n),L(e,l)},p(i,u){var d,r;u&1&&s!==(s=((r=(d=i[0])==null?void 0:d.comment)!=null?r:"")+"")&&re(n,s)},d(i){i&&_(e)}}}function Te(o){let e,s;function n(t,i){return t[0]?Se:Ee}let l=n(o),a=l(o);return{c(){e=E("div"),a.c(),this.h()},l(t){e=S(t,"DIV",{class:!0});var i=T(e);a.l(i),i.forEach(_),this.h()},h(){m(e,"class",s="flex flex-col "+o[3].class)},m(t,i){y(t,e,i),a.m(e,null)},p(t,[i]){l===(l=n(t))&&a?a.p(t,i):(a.d(1),a=l(t),a&&(a.c(),a.m(e,null))),i&8&&s!==(s="flex flex-col "+t[3].class)&&m(e,"class",s)},i:O,o:O,d(t){t&&_(e),a.d()}}}function Ie(o,e,s){let{calendar:n=void 0}=e,{interval:l=void 0}=e;const a=l==null?void 0:l.interval,t=l==null?void 0:l.phase;return o.$$set=i=>{s(3,e=k(k({},e),p(i))),"calendar"in i&&s(0,n=i.calendar),"interval"in i&&s(4,l=i.interval)},e=p(e),[n,a,t,e,l]}class Re extends A{constructor(e){super(),D(this,e,Ie,Te,z,{calendar:0,interval:4})}}export{Fe as M,Re as S,We as a,He as b,ze as c,Je as d,je as e,Ae as f,he as g,De as h,Ne as i,de as m,Oe as p,Ue as u,me as w};
