import{f as l}from"./format-date-c1755997.js";import{a as m}from"./index-7e3f25d2.js";const d=(t,e)=>{const o=t.charCodeAt(e);return o>=65&&o<=90},i=t=>t[0].toUpperCase()+t.slice(1),k=new Set(["workflowType"]),w=t=>k.has(t)?`${t}Name`:t,K=t=>{let e="",o=0;for(t=w(t);o<(t==null?void 0:t.length);){const r=t[o],n=t[o+1];if(o===0){e+=t[o].toUpperCase(),o++;continue}if(r+n==="Id"){e+=" ID",o+=2;continue}if(d(t,o)){e+=" ",e+=r.toUpperCase(),o++;continue}e+=r,o++}return e},h={key:"",value:""},p=new Set(["activityId","attempt","binaryChecksum","identity","parentInitiatedEventId","requestId","scheduledEventId","startedEventId","lastHeartbeatTime","scheduledTime","expirationTime"]),A=t=>p.has(t),c=(t,e)=>!(e===null||e===void 0||e===""||e==="0s"||t==="type"),x=t=>!(t===null||t===void 0||t===""||Array.isArray(t)&&!t.length),F=t=>{var e,o,r;return typeof t=="string"?t:(r=(o=(e=t==null?void 0:t.payloads)!=null?e:t==null?void 0:t.indexedFields)!=null?o:t==null?void 0:t.points)!=null?r:t},E=["baseRunId","continuedExecutionRunId","firstExecutionRunId","newExecutionRunId","newRunId","originalExecutionRunId"],U=t=>{for(const e of E)if(t===e)return!0;return!1},I=["taskQueueName"],$=t=>{for(const e of I)if(t===e)return!0;return!1},T=["workflowExecutionWorkflowId","workflowExecutionRunId"],V=(t,e)=>{const o=Boolean((e==null?void 0:e.workflowExecutionWorkflowId)&&(e==null?void 0:e.workflowExecutionRunId));for(const r of T)if(t===r&&o)return!0;return!1},u=(t,e)=>{if(typeof e=="object"){const[o]=Object.keys(e);return{key:t+i(o),value:e[o]}}else return{key:t,value:e.toString()}},S=["failure","input","activityType","parentInitiatedEventId","workflowExecution","workflowType","taskQueue"],D=({attributes:t})=>{for(const[e,o]of Object.entries(t))if(c(e,o))return u(e,o)},y=t=>{const e=D(t);for(const[o,r]of Object.entries(t.attributes))for(const n of S)if(o===n&&c(o,r))return u(o,r);return e},j=({lastEvent:t})=>y(t),B=t=>t?m(t)?j(t):y(t):h,N=new Set(["header"]),C=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution"]),R=new Set(["maximumAttempts"]),a="Unlimited",O="No Expiration",q=(t,e)=>t===0?O:e,z=(t,e)=>t===0?a:t-e,H=t=>t===0?a:t,Q=(t,e)=>t==="maximumAttempts"&&e===0?a:e,g=(t,e)=>{if(C.has(e)&&typeof t[e]=="object"){for(const[o,r]of Object.entries(t[e]))x(r)&&(R.has(o)?t[`${e}${i(o)}`]=Q(o,r):t[`${e}${i(o)}`]=r);delete t[e]}},M=(t,{compact:e}={compact:!1})=>{const o={};e&&(o.eventTime=l(t.eventTime));for(const[r,n]of Object.entries(t.attributes)){const s=c(r,n);!N.has(r)&&s&&(o[r]=n),g(o,r)}return o},f=["summary","parent","activity","taskQueue","schedule","retryPolicy","workflow","searchAttributes"],J={activity:{label:"Activity",color:"gray"},parent:{label:"Parent",color:"gray"},retryPolicy:{label:"Retry Policy",color:"gray"},schedule:{label:"Schedule",color:"gray"},searchAttributes:{label:"Search Attributes",color:"gray"},summary:{label:"Summary",color:"gray"},taskQueue:{label:"Task Queue",color:"gray"},workflow:{label:"Workflow",color:"gray"}},G=(t,e)=>{var o,r;t.category==="activity"&&((o=e==null?void 0:e.activity)==null?void 0:o.length)&&(e.summary=[...e.activity,...e.summary],e.activity=[]),t.category==="activity"&&((r=e==null?void 0:e.workflow)==null?void 0:r.length)&&(e.summary=[...e.summary,...e.workflow],e.workflow=[])},L=t=>{const e=new Set(["summary","searchAttributes"]);for(const[o,r]of Object.entries(t))r.length===1&&!e.has(o)&&(t.summary=[...t.summary,...r],t[o]=[])},X=(t,e)=>{const o={};f.forEach(r=>{r==="summary"?o[r]=Object.keys(e):o[r]=[]});for(const r of Object.keys(e)){const n=f.find(s=>r.includes(s));n&&(o[n]=[r,...o[n]],o.summary=o.summary.filter(s=>s!==r))}return G(t,o),L(o),o};export{z as a,V as b,i as c,$ as d,K as e,q as f,A as g,F as h,J as i,M as j,X as k,B as l,H as m,U as s};
