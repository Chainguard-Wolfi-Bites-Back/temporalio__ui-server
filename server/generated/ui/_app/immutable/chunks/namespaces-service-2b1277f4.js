import{t as c}from"./toaster-7990e2ff.js";import{n as o}from"./namespaces-2ac6f928.js";import{p as f}from"./paginated-8fdd6ac7.js";import{r as p,a as i}from"./route-for-api-b7e90108.js";const u={namespaces:[]};async function v(r,s=fetch){if(r.runtimeEnvironment.isCloud){o.set([]);return}try{const t=await p("namespaces"),e=await f(async a=>i(t,{request:s,token:a,onError:()=>c.push({variant:"error",message:"Unable to fetch namespaces"})})),{showTemporalSystemNamespace:n}=r,m=((e==null?void 0:e.namespaces)??[]).filter(a=>n||a.namespaceInfo.name!=="temporal-system");o.set(m)}catch{o.set([])}}async function E(r,s,t=fetch){var a;const[e]=u.namespaces;if((a=s==null?void 0:s.runtimeEnvironment)!=null&&a.isCloud)return e;const n=await p("namespace",{namespace:r});return await i(n,{request:t,onError:()=>c.push({variant:"error",message:"Unable to fetch namespaces"})})??e}export{E as a,v as f};
