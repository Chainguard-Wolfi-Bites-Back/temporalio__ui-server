import{S as $,i as y,s as h,l as b,a as g,w as S,m as w,c as N,x as E,p,b as u,y as C,T as x,f as O,t as T,h as f,B as A,r as F,u as I}from"./index-9ea626a2.js";import{f as k}from"./route-for-62d7d3b1.js";import{g as B}from"./navigation-fbe70647.js";import{B as J}from"./button-55b2a96e.js";import{t as U}from"./index-a5de7c0a.js";import{n as v}from"./notifications-92f665fe.js";import{i as G,a as L}from"./import-events-79336736.js";const _={auth:{enabled:!1,options:[]},baseUrl:"base",codec:{},defaultNamespace:"namespace",disableWriteActions:!1,showTemporalSystemNamespace:!1,notifyOnNewVersion:!1,feedbackURL:"",runtimeEnvironment:{isCloud:!1,isLocal:!0,envOverride:!1},version:"2.0.0"};function R(l){let e;return{c(){e=F("Import")},l(n){e=I(n,"Import")},m(n,o){u(n,e,o)},d(n){n&&f(e)}}}function j(l){let e,n,o,r,a,i;return o=new J({props:{icon:"file-upload",$$slots:{default:[R]},$$scope:{ctx:l}}}),o.$on("click",l[1]),{c(){e=b("input"),n=g(),S(o.$$.fragment),this.h()},l(t){e=w(t,"INPUT",{class:!0,type:!0,accept:!0}),n=N(t),E(o.$$.fragment,t),this.h()},h(){p(e,"class","import-input block rounded-md border border-gray-200 p-2"),p(e,"type","file"),p(e,"accept",".json")},m(t,s){u(t,e,s),u(t,n,s),C(o,t,s),r=!0,a||(i=x(e,"change",l[0]),a=!0)},p(t,[s]){const c={};s&8&&(c.$$scope={dirty:s,ctx:t}),o.$set(c)},i(t){r||(O(o.$$.fragment,t),r=!0)},o(t){T(o.$$.fragment,t),r=!1},d(t){t&&f(e),t&&f(n),A(o,t),a=!1,i()}}}function q(l){let e;return[async r=>{var a;const i=r.target,t=(a=i==null?void 0:i.files)===null||a===void 0?void 0:a[0],s=new FileReader;t&&(s.readAsText(t),s.onload=()=>{var c,m;try{const d=(m=(c=s==null?void 0:s.result)===null||c===void 0?void 0:c.toString())!==null&&m!==void 0?m:"";e=JSON.parse(d)}catch{v.add("error","Could not parse JSON")}})},async()=>{try{const{events:r,eventGroups:a}=await U({response:Array.isArray(e)?e:e==null?void 0:e.events,namespace:_.defaultNamespace,settings:_});G.set(r),L.set(a);const i=k({importType:"events",view:"feed"});B(i)}catch(r){console.error(r),v.add("error","Could not create event history from JSON")}}]}class M extends ${constructor(e){super(),y(this,e,q,j,h,{})}}export{M as E};
