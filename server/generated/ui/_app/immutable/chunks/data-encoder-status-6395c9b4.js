import{S as Q,i as Y,s as x,Z as W,a6 as X,k as E,q,a as A,w as T,l as v,m as w,r as B,h as p,c as I,x as C,n as m,b as P,K as g,y as D,W as F,R as L,U as le,a7 as Z,f as b,t as k,z as S,D as ce,J as U,u as ie,e as z,O as fe,B as j,a2 as K,g as ue,d as de}from"./index-9c2f34db.js";import{I as V}from"./icon-8db9aa9d.js";import{d as me,w as _e}from"./index-73e3ae8e.js";import{p as he}from"./stores-ae349ac7.js";import{d as ne,l as ge}from"./data-converter-config-0a443c32.js";import{c as G,l as $e,p as oe,v as be,a as ke}from"./is-http-fb97cc49.js";import{a as Ee}from"./auth-user-867edd3a.js";import{T as ee}from"./tooltip-0487bf95.js";import{M as ve}from"./modal-e4ddf251.js";import{C as we}from"./checkbox-8e8f0f7a.js";const pe=me([he,G,$e,ne,ge,Ee],([a,e,t,n,o,r])=>{var M,O,u;const l=a.params.namespace,d=(u=(O=(M=a==null?void 0:a.data)==null?void 0:M.settings)==null?void 0:O.codec)==null?void 0:u.endpoint,s=e||d,c=r==null?void 0:r.accessToken;return{namespace:l,settingsEndpoint:d,endpoint:s,accessToken:c,hasNotRequested:s?t==="notRequested":o==="notRequested",hasError:s?t==="error":o==="error",hasSuccess:s?t==="success":o==="success",hasEndpointAndPortConfigured:s&&n,hasEndpointOrPortConfigured:s||n}}),te=_e(!1);function se(a){let e,t;return{c(){e=E("small"),t=q(a[2]),this.h()},l(n){e=v(n,"SMALL",{"data-cy":!0,class:!0});var o=w(e);t=B(o,a[2]),o.forEach(p),this.h()},h(){m(e,"data-cy","data-encoder-endpoint-error"),m(e,"class","text-red-700")},m(n,o){P(n,e,o),g(e,t)},p(n,o){o&4&&ie(t,n[2])},d(n){n&&p(e)}}}function re(a){let e,t,n=a[3].settingsEndpoint+"",o,r,l,d,s,c,i=a[4]&&ae();return{c(){e=E("div"),t=E("p"),o=q(n),r=A(),l=E("p"),d=q("Site setting"),s=A(),i&&i.c(),c=z(),this.h()},l(f){e=v(f,"DIV",{class:!0});var _=w(e);t=v(_,"P",{"data-cy":!0});var y=w(t);o=B(y,n),y.forEach(p),r=I(_),l=v(_,"P",{"data-cy":!0});var N=w(l);d=B(N,"Site setting"),N.forEach(p),_.forEach(p),s=I(f),i&&i.l(f),c=z(),this.h()},h(){m(t,"data-cy","data-encoder-site-endpoint"),m(l,"data-cy","data-encoder-site-settings"),m(e,"class","flex items-center justify-between")},m(f,_){P(f,e,_),g(e,t),g(t,o),g(e,r),g(e,l),g(l,d),P(f,s,_),i&&i.m(f,_),P(f,c,_)},p(f,_){_&8&&n!==(n=f[3].settingsEndpoint+"")&&ie(o,n),f[4]?i||(i=ae(),i.c(),i.m(c.parentNode,c)):i&&(i.d(1),i=null)},d(f){f&&p(e),f&&p(s),i&&i.d(f),f&&p(c)}}}function ae(a){let e,t;return{c(){e=E("small"),t=q("Set endpoint overrides site setting endpoint."),this.h()},l(n){e=v(n,"SMALL",{class:!0,"data-cy":!0});var o=w(e);t=B(o,"Set endpoint overrides site setting endpoint."),o.forEach(p),this.h()},h(){m(e,"class","text-yellow-700"),m(e,"data-cy","data-encoder-endpoint-info")},m(n,o){P(n,e,o),g(e,t)},d(n){n&&p(e)}}}function ye(a){let e,t,n,o,r,l,d,s,c,i,f,_,y,N;function M($){a[6]($)}let O={"data-cy":"data-encoder-pass-access-token",label:"Pass access token",class:"mt-2 mb-2 block h-5 w-full"};a[1]!==void 0&&(O.checked=a[1]),l=new we({props:O}),W.push(()=>X(l,"checked",M));let u=a[2]&&se(a),h=a[3].settingsEndpoint&&re(a);return{c(){e=E("div"),t=E("h3"),n=q("Remote Codec Endpoint"),o=A(),r=E("div"),T(l.$$.fragment),s=A(),c=E("textarea"),i=A(),u&&u.c(),f=A(),h&&h.c(),this.h()},l($){e=v($,"DIV",{class:!0});var R=w(e);t=v(R,"H3",{class:!0,"data-cy":!0});var J=w(t);n=B(J,"Remote Codec Endpoint"),J.forEach(p),o=I(R),r=v(R,"DIV",{class:!0});var H=w(r);C(l.$$.fragment,H),s=I(H),c=v(H,"TEXTAREA",{class:!0,rows:!0,placeholder:!0,"data-cy":!0}),w(c).forEach(p),i=I(H),u&&u.l(H),f=I(H),h&&h.l(H),H.forEach(p),R.forEach(p),this.h()},h(){m(t,"class","text-lg"),m(t,"data-cy","data-encoder-endpoint-title"),m(c,"class","block w-full rounded-md border border-gray-200 p-2"),m(c,"rows",3),m(c,"placeholder","Endpoint"),m(c,"data-cy","data-encoder-endpoint-input"),m(r,"class","flex flex-col gap-2"),m(e,"class","mb-8")},m($,R){P($,e,R),g(e,t),g(t,n),g(e,o),g(e,r),D(l,r,null),g(r,s),g(r,c),F(c,a[0]),g(r,i),u&&u.m(r,null),g(r,f),h&&h.m(r,null),_=!0,y||(N=[L(c,"input",a[7]),L(c,"keydown",le(a[5]))],y=!0)},p($,[R]){const J={};!d&&R&2&&(d=!0,J.checked=$[1],Z(()=>d=!1)),l.$set(J),R&1&&F(c,$[0]),$[2]?u?u.p($,R):(u=se($),u.c(),u.m(r,f)):u&&(u.d(1),u=null),$[3].settingsEndpoint?h?h.p($,R):(h=re($),h.c(),h.m(r,null)):h&&(h.d(1),h=null)},i($){_||(b(l.$$.fragment,$),_=!0)},o($){k(l.$$.fragment,$),_=!1},d($){$&&p(e),S(l),u&&u.d(),h&&h.d(),y=!1,ce(N)}}}function Te(a,e,t){let n,o;U(a,pe,f=>t(3,n=f)),U(a,G,f=>t(4,o=f));let{endpoint:r=""}=e,{passToken:l=!1}=e,{error:d=""}=e;function s(f){fe.call(this,a,f)}function c(f){l=f,t(1,l)}function i(){r=this.value,t(0,r)}return a.$$set=f=>{"endpoint"in f&&t(0,r=f.endpoint),"passToken"in f&&t(1,l=f.passToken),"error"in f&&t(2,d=f.error)},[r,l,d,n,o,s,c,i]}class Ce extends Q{constructor(e){super(),Y(this,e,Te,ye,x,{endpoint:0,passToken:1,error:2})}}function De(a){let e,t,n,o,r,l,d,s,c;return{c(){e=E("div"),t=E("h3"),n=q("tctl plugin port "),o=E("span"),r=q("DEPRECATED"),l=A(),d=E("input"),this.h()},l(i){e=v(i,"DIV",{class:!0});var f=w(e);t=v(f,"H3",{class:!0,"data-cy":!0});var _=w(t);n=B(_,"tctl plugin port "),o=v(_,"SPAN",{class:!0});var y=w(o);r=B(y,"DEPRECATED"),y.forEach(p),_.forEach(p),l=I(f),d=v(f,"INPUT",{class:!0,placeholder:!0,"data-cy":!0}),f.forEach(p),this.h()},h(){m(o,"class","rounded-lg bg-orange-100 px-1 text-sm text-orange-500"),m(t,"class","text-lg"),m(t,"data-cy","data-encoder-port-title"),m(d,"class","block w-24 rounded-md border border-gray-200 p-2"),m(d,"placeholder","Port"),m(d,"data-cy","data-encoder-port-input"),m(e,"class","my-4")},m(i,f){P(i,e,f),g(e,t),g(t,n),g(t,o),g(o,r),g(e,l),g(e,d),F(d,a[0]),s||(c=[L(d,"input",a[2]),L(d,"keydown",le(a[1]))],s=!0)},p(i,[f]){f&1&&d.value!==i[0]&&F(d,i[0])},i:j,o:j,d(i){i&&p(e),s=!1,ce(c)}}}function Se(a,e,t){let{port:n=""}=e;function o(l){fe.call(this,a,l)}function r(){n=this.value,t(0,n)}return a.$$set=l=>{"port"in l&&t(0,n=l.port)},[n,o,r]}class Pe extends Q{constructor(e){super(),Y(this,e,Se,De,x,{port:0})}}function Re(a){let e,t;return{c(){e=E("h3"),t=q("Data Encoder"),this.h()},l(n){e=v(n,"H3",{slot:!0,"data-cy":!0});var o=w(e);t=B(o,"Data Encoder"),o.forEach(p),this.h()},h(){m(e,"slot","title"),m(e,"data-cy","data-encoder-title")},m(n,o){P(n,e,o),g(e,t)},p:j,d(n){n&&p(e)}}}function Ae(a){let e,t,n,o,r,l,d,s,c,i,f;function _(u){a[8](u)}function y(u){a[9](u)}let N={error:a[4]};a[1]!==void 0&&(N.endpoint=a[1]),a[2]!==void 0&&(N.passToken=a[2]),t=new Ce({props:N}),W.push(()=>X(t,"endpoint",_)),W.push(()=>X(t,"passToken",y));function M(u){a[10](u)}let O={};return a[3]!==void 0&&(O.port=a[3]),l=new Pe({props:O}),W.push(()=>X(l,"port",M)),{c(){e=E("div"),T(t.$$.fragment),r=A(),T(l.$$.fragment),s=A(),c=E("small"),i=q("If both are set, the Remote Codec Endpoint will be used."),this.h()},l(u){e=v(u,"DIV",{slot:!0});var h=w(e);C(t.$$.fragment,h),r=I(h),C(l.$$.fragment,h),s=I(h),c=v(h,"SMALL",{"data-cy":!0});var $=w(c);i=B($,"If both are set, the Remote Codec Endpoint will be used."),$.forEach(p),h.forEach(p),this.h()},h(){m(c,"data-cy","data-encoder-info"),m(e,"slot","content")},m(u,h){P(u,e,h),D(t,e,null),g(e,r),D(l,e,null),g(e,s),g(e,c),g(c,i),f=!0},p(u,h){const $={};h&16&&($.error=u[4]),!n&&h&2&&(n=!0,$.endpoint=u[1],Z(()=>n=!1)),!o&&h&4&&(o=!0,$.passToken=u[2],Z(()=>o=!1)),t.$set($);const R={};!d&&h&8&&(d=!0,R.port=u[3],Z(()=>d=!1)),l.$set(R)},i(u){f||(b(t.$$.fragment,u),b(l.$$.fragment,u),f=!0)},o(u){k(t.$$.fragment,u),k(l.$$.fragment,u),f=!1},d(u){u&&p(e),S(t),S(l)}}}function Ie(a){let e,t;return e=new ve({props:{open:a[0],cancelText:"Cancel",confirmDisabled:Boolean(a[4]),$$slots:{content:[Ae],title:[Re]},$$scope:{ctx:a}}}),e.$on("cancelModal",a[5]),e.$on("confirmModal",a[6]),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,[o]){const r={};o&1&&(r.open=n[0]),o&16&&(r.confirmDisabled=Boolean(n[4])),o&16414&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Ne(a,e,t){let n,o,r,l;U(a,ne,u=>t(11,o=u)),U(a,oe,u=>t(12,r=u)),U(a,G,u=>t(13,l=u));let{showSettings:d}=e,{onClose:s}=e,c=l??"",i=o??"",f=r??!1;const _=()=>{t(1,c=l??""),t(3,i=o??""),t(2,f=r??!1),s()},y=()=>{t(4,n=""),K(G,l=c,l),K(oe,r=f,r),K(ne,o=i,o),s()};function N(u){c=u,t(1,c)}function M(u){f=u,t(2,f)}function O(u){i=u,t(3,i)}return a.$$set=u=>{"showSettings"in u&&t(0,d=u.showSettings),"onClose"in u&&t(7,s=u.onClose)},a.$$.update=()=>{a.$$.dirty&6&&(f&&!be(c)?t(4,n="Endpoint must be https:// if passing access token"):c&&!ke(c)?t(4,n="Endpoint must start with http:// or https://"):t(4,n=""))},t(4,n=""),[d,c,f,i,n,_,y,s,N,M,O]}class Oe extends Q{constructor(e){super(),Y(this,e,Ne,Ie,x,{showSettings:0,onClose:7})}}function qe(a){let e,t;return e=new ee({props:{right:!0,text:"Configure data encoder",$$slots:{default:[Me]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Be(a){let e,t,n,o;const r=[Ve,Le,He],l=[];function d(s,c){var i;return(i=s[1])!=null&&i.hasNotRequested?0:s[1].hasError?1:s[1].hasSuccess?2:-1}return~(e=d(a))&&(t=l[e]=r[e](a)),{c(){t&&t.c(),n=z()},l(s){t&&t.l(s),n=z()},m(s,c){~e&&l[e].m(s,c),P(s,n,c),o=!0},p(s,c){let i=e;e=d(s),e===i?~e&&l[e].p(s,c):(t&&(ue(),k(l[i],1,1,()=>{l[i]=null}),de()),~e?(t=l[e],t?t.p(s,c):(t=l[e]=r[e](s),t.c()),b(t,1),t.m(n.parentNode,n)):t=null)},i(s){o||(b(t),o=!0)},o(s){k(t),o=!1},d(s){~e&&l[e].d(s),s&&p(n)}}}function Me(a){let e,t,n,o,r,l,d;return t=new V({props:{name:"converter-down",class:"-ml-1 text-gray-400"}}),o=new V({props:{name:"converter-up",class:"absolute left-1 text-gray-400"}}),{c(){e=E("button"),T(t.$$.fragment),n=A(),T(o.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-cy":!0});var c=w(e);C(t.$$.fragment,c),n=I(c),C(o.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","relative flex cursor-pointer"),m(e,"data-cy","data-encoder-status")},m(s,c){P(s,e,c),D(t,e,null),g(e,n),D(o,e,null),r=!0,l||(d=L(e,"click",a[2]),l=!0)},p:j,i(s){r||(b(t.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),k(o.$$.fragment,s),r=!1},d(s){s&&p(e),S(t),S(o),l=!1,d()}}}function He(a){let e,t;return e=new ee({props:{right:!0,text:"Data encoder succesfully converted content",$$slots:{default:[Ue]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Le(a){let e,t;return e=new ee({props:{right:!0,text:"Data encoder couldn't connect to the remote encoder",$$slots:{default:[je]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Ve(a){let e,t;return e=new ee({props:{right:!0,text:"Data encoder is configured",$$slots:{default:[ze]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Ue(a){let e,t,n,o,r,l,d;return t=new V({props:{name:"converter-down",class:"-ml-1 text-green-400"}}),o=new V({props:{name:"converter-up",class:"absolute left-1 text-green-400"}}),{c(){e=E("button"),T(t.$$.fragment),n=A(),T(o.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-cy":!0});var c=w(e);C(t.$$.fragment,c),n=I(c),C(o.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","relative flex cursor-pointer"),m(e,"data-cy","data-encoder-status-success")},m(s,c){P(s,e,c),D(t,e,null),g(e,n),D(o,e,null),r=!0,l||(d=L(e,"click",a[2]),l=!0)},p:j,i(s){r||(b(t.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),k(o.$$.fragment,s),r=!1},d(s){s&&p(e),S(t),S(o),l=!1,d()}}}function je(a){let e,t,n,o,r,l,d;return t=new V({props:{name:"converter-down",class:"-ml-1 text-red-400"}}),o=new V({props:{name:"converter-up",class:"absolute left-1 text-red-400"}}),{c(){e=E("button"),T(t.$$.fragment),n=A(),T(o.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-cy":!0});var c=w(e);C(t.$$.fragment,c),n=I(c),C(o.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","relative flex cursor-pointer"),m(e,"data-cy","data-encoder-status-error")},m(s,c){P(s,e,c),D(t,e,null),g(e,n),D(o,e,null),r=!0,l||(d=L(e,"click",a[2]),l=!0)},p:j,i(s){r||(b(t.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),k(o.$$.fragment,s),r=!1},d(s){s&&p(e),S(t),S(o),l=!1,d()}}}function ze(a){let e,t,n,o,r,l,d;return t=new V({props:{name:"converter-down",class:"-ml-1 text-blue-200"}}),o=new V({props:{name:"converter-up",class:"absolute left-1 text-blue-200"}}),{c(){e=E("button"),T(t.$$.fragment),n=A(),T(o.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-cy":!0});var c=w(e);C(t.$$.fragment,c),n=I(c),C(o.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","relative flex cursor-pointer"),m(e,"data-cy","data-encoder-status-configured")},m(s,c){P(s,e,c),D(t,e,null),g(e,n),D(o,e,null),r=!0,l||(d=L(e,"click",a[2]),l=!0)},p:j,i(s){r||(b(t.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),k(o.$$.fragment,s),r=!1},d(s){s&&p(e),S(t),S(o),l=!1,d()}}}function Je(a){let e,t,n,o,r,l;e=new Oe({props:{showSettings:a[0],onClose:a[3]}});const d=[Be,qe],s=[];function c(i,f){var _;return(_=i[1])!=null&&_.hasEndpointOrPortConfigured?0:1}return n=c(a),o=s[n]=d[n](a),{c(){T(e.$$.fragment),t=A(),o.c(),r=z()},l(i){C(e.$$.fragment,i),t=I(i),o.l(i),r=z()},m(i,f){D(e,i,f),P(i,t,f),s[n].m(i,f),P(i,r,f),l=!0},p(i,[f]){const _={};f&1&&(_.showSettings=i[0]),e.$set(_);let y=n;n=c(i),n===y?s[n].p(i,f):(ue(),k(s[y],1,1,()=>{s[y]=null}),de(),o=s[n],o?o.p(i,f):(o=s[n]=d[n](i),o.c()),b(o,1),o.m(r.parentNode,r))},i(i){l||(b(e.$$.fragment,i),b(o),l=!0)},o(i){k(e.$$.fragment,i),k(o),l=!1},d(i){S(e,i),i&&p(t),s[n].d(i),i&&p(r)}}}function Ke(a,e,t){let n,o;return U(a,te,d=>t(0,n=d)),U(a,pe,d=>t(1,o=d)),[n,o,()=>K(te,n=!0,n),()=>K(te,n=!1,n)]}class nt extends Q{constructor(e){super(),Y(this,e,Ke,Je,x,{})}}export{nt as D,te as s};
