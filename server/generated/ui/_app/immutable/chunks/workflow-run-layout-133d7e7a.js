import{S as ce,i as ue,s as me,x as T,a as q,e as Pe,y,c as F,z as W,b as D,f as d,g as oe,t as g,d as fe,C as A,h,O as H,l as $,r as j,m as v,n as I,u as O,p,N as _,F as ie,a0 as at,a8 as rt,a9 as lt,a4 as G,E as st,W as Se,H as ot,T as ft,I as it,v as ze,an as ct,D as Me,R as Re,J as Je,K as Ke,L as Ye,M as Ge,o as Xe,ar as Ze,ag as ut,ah as mt}from"./index-0b369c75.js";import{p as xe}from"./stores-5674b937.js";import{r as re,b as ht,u as dt,w as et,t as qe}from"./events-81b78350.js";import{l as gt}from"./previous-events-a7f0213c.js";import{I as tt}from"./icon-7d330c0b.js";import{f as _t}from"./index-8a8c6b93.js";import{g as ke,b as Fe}from"./event-view-049f8eb1.js";import{w as pt,a as wt}from"./workflows-16b18cc3.js";import{h as de,q as ge,o as _e,s as pe,u as we,v as He}from"./route-for-8f480fc8.js";import{w as kt,d as bt,e as $t,t as vt}from"./workflow-service-4046df16.js";import{W as Et}from"./workflow-status-4a0b82d2.js";import{s as It}from"./settings-be4fa165.js";import{M as Ve}from"./modal-58682d62.js";import{c as Tt}from"./core-user-a1ba6fc9.js";import{T as nt}from"./tooltip-d45064b8.js";import{S as yt}from"./split-button-83dcdc9b.js";import{M as Wt}from"./menu-item-7d491ac7.js";import{t as $e}from"./toaster-18495b6a.js";import{I as At}from"./input-e1d72b9e.js";import{F as Ct}from"./feature-guard-dd07df03.js";import{B as Dt}from"./button-ca5c6c86.js";import{T as he}from"./tab-5fcbe899.js";import{L as Pt}from"./loading-54a8cebb.js";function St(r){let e;return{c(){e=j("Terminate")},l(t){e=O(t,"Terminate")},m(t,n){D(t,e,n)},d(t){t&&h(e)}}}function Mt(r){let e,t;return e=new Wt({props:{destructive:!0,disabled:r[6],dataCy:"terminate-button",$$slots:{default:[St]},$$scope:{ctx:r}}}),e.$on("click",r[7]),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){const a={};l&64&&(a.disabled=n[6]),l&2097152&&(a.$$scope={dirty:l,ctx:n}),e.$set(a)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Rt(r){let e,t;return e=new yt({props:{primaryActionDisabled:r[0],disabled:r[6],label:"Request Cancellation",id:"workflow-actions",$$slots:{default:[Mt]},$$scope:{ctx:r}}}),e.$on("click",r[9]),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){const a={};l&1&&(a.primaryActionDisabled=n[0]),l&64&&(a.disabled=n[6]),l&2097216&&(a.$$scope={dirty:l,ctx:n}),e.$set(a)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function qt(r){let e;return{c(){e=j("Terminate")},l(t){e=O(t,"Terminate")},m(t,n){D(t,e,n)},d(t){t&&h(e)}}}function Ft(r){let e,t;return e=new Dt({props:{slot:"fallback",variant:"destructive",disabled:r[6],dataCy:"terminate-button",$$slots:{default:[qt]},$$scope:{ctx:r}}}),e.$on("click",r[7]),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){const a={};l&64&&(a.disabled=n[6]),l&2097152&&(a.$$scope={dirty:l,ctx:n}),e.$set(a)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ht(r){let e,t;return e=new Ct({props:{enabled:r[1],$$slots:{fallback:[Ft],default:[Rt]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){const a={};l&2&&(a.enabled=n[1]),l&2097217&&(a.$$scope={dirty:l,ctx:n}),e.$set(a)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Le(r){let e,t,n,l;return e=new Ve({props:{open:r[4],loading:r[5],confirmType:"destructive",$$slots:{content:[Lt],title:[Vt]},$$scope:{ctx:r}}}),e.$on("cancelModal",r[10]),e.$on("confirmModal",r[12]),n=new Ve({props:{open:r[3],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[Nt],title:[Bt]},$$scope:{ctx:r}}}),n.$on("cancelModal",r[8]),n.$on("confirmModal",r[11]),{c(){T(e.$$.fragment),t=q(),T(n.$$.fragment)},l(a){y(e.$$.fragment,a),t=F(a),y(n.$$.fragment,a)},m(a,s){W(e,a,s),D(a,t,s),W(n,a,s),l=!0},p(a,s){const o={};s&16&&(o.open=a[4]),s&32&&(o.loading=a[5]),s&2097152&&(o.$$scope={dirty:s,ctx:a}),e.$set(o);const f={};s&8&&(f.open=a[3]),s&2097156&&(f.$$scope={dirty:s,ctx:a}),n.$set(f)},i(a){l||(d(e.$$.fragment,a),d(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){A(e,a),a&&h(t),A(n,a)}}}function Vt(r){let e,t;return{c(){e=$("h3"),t=j("Cancel Workflow"),this.h()},l(n){e=v(n,"H3",{slot:!0});var l=I(e);t=O(l,"Cancel Workflow"),l.forEach(h),this.h()},h(){p(e,"slot","title")},m(n,l){D(n,e,l),_(e,t)},p:ie,d(n){n&&h(e)}}}function Lt(r){let e,t;return{c(){e=$("p"),t=j(`Are you sure you want to cancel this workflow? This action cannot be
        undone.`)},l(n){e=v(n,"P",{});var l=I(e);t=O(l,`Are you sure you want to cancel this workflow? This action cannot be
        undone.`),l.forEach(h)},m(n,l){D(n,e,l),_(e,t)},p:ie,d(n){n&&h(e)}}}function Bt(r){let e,t;return{c(){e=$("h3"),t=j("Terminate Workflow"),this.h()},l(n){e=v(n,"H3",{slot:!0});var l=I(e);t=O(l,"Terminate Workflow"),l.forEach(h),this.h()},h(){p(e,"slot","title")},m(n,l){D(n,e,l),_(e,t)},p:ie,d(n){n&&h(e)}}}function Nt(r){let e,t,n,l,a,s,o;function f(c){r[17](c)}let i={id:"workflow-termination-reason",class:"mt-4",placeholder:"Enter a reason"};return r[2]!==void 0&&(i.value=r[2]),a=new At({props:i}),at.push(()=>rt(a,"value",f)),{c(){e=$("div"),t=$("p"),n=j(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),l=q(),T(a.$$.fragment),this.h()},l(c){e=v(c,"DIV",{slot:!0});var u=I(e);t=v(u,"P",{});var k=I(t);n=O(k,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),k.forEach(h),l=F(u),y(a.$$.fragment,u),u.forEach(h),this.h()},h(){p(e,"slot","content")},m(c,u){D(c,e,u),_(e,t),_(t,n),_(e,l),W(a,e,null),o=!0},p(c,u){const k={};!s&&u&4&&(s=!0,k.value=c[2],lt(()=>s=!1)),a.$set(k)},i(c){o||(d(a.$$.fragment,c),o=!0)},o(c){g(a.$$.fragment,c),o=!1},d(c){c&&h(e),A(a)}}}function Qt(r){let e,t,n,l;e=new nt({props:{bottomLeft:!0,hide:!r[6],width:200,text:"You do not have permission to edit this workflow. Contact your admin for assistance.",$$slots:{default:[Ht]},$$scope:{ctx:r}}});let a=!r[6]&&Le(r);return{c(){T(e.$$.fragment),t=q(),a&&a.c(),n=Pe()},l(s){y(e.$$.fragment,s),t=F(s),a&&a.l(s),n=Pe()},m(s,o){W(e,s,o),D(s,t,o),a&&a.m(s,o),D(s,n,o),l=!0},p(s,[o]){const f={};o&64&&(f.hide=!s[6]),o&2097219&&(f.$$scope={dirty:o,ctx:s}),e.$set(f),s[6]?a&&(oe(),g(a,1,1,()=>{a=null}),fe()):a?(a.p(s,o),o&64&&d(a,1)):(a=Le(s),a.c(),d(a,1),a.m(n.parentNode,n))},i(s){l||(d(e.$$.fragment,s),d(a),l=!0)},o(s){g(e.$$.fragment,s),g(a),l=!1},d(s){A(e,s),s&&h(t),a&&a.d(s),s&&h(n)}}}function Ut(r,e,t){let n,l,a;H(r,re,b=>t(18,a=b));let{workflow:s}=e,{namespace:o}=e,{cancelInProgress:f}=e,{cancelEnabled:i}=e,c="",u=!1,k=!1,P=!1;const V=()=>t(3,u=!0),Q=()=>t(3,u=!1),J=()=>t(4,k=!0),L=()=>t(4,k=!1),K=async()=>{t(3,u=!1),t(2,c=""),G(re,a=Date.now(),a),await st(),$e.push({id:"workflow-termination-success-toast",message:"Workflow terminated.",variant:"success",yPosition:"top"})},S=()=>{t(3,u=!1),t(2,c=""),$e.push({message:"Cannot terminate workflow.",variant:"error"})},M=()=>{!s.canBeTerminated||bt({workflow:s,namespace:o,reason:c}).then(K).catch(S)},te=async()=>{t(5,P=!0);try{await $t({namespace:o,workflowId:s.id,runId:s.runId}),t(5,P=!1),t(4,k=!1),G(re,a=Date.now(),a)}catch{$e.push({yPosition:"top",variant:"error",message:"Unable to cancel workflow."})}};let B=Tt();H(r,B,b=>t(16,l=b));function ne(b){c=b,t(2,c)}return r.$$set=b=>{"workflow"in b&&t(14,s=b.workflow),"namespace"in b&&t(15,o=b.namespace),"cancelInProgress"in b&&t(0,f=b.cancelInProgress),"cancelEnabled"in b&&t(1,i=b.cancelEnabled)},r.$$.update=()=>{r.$$.dirty&98304&&t(6,n=l.namespaceWriteDisabled(o)||!kt(It))},[f,i,c,u,k,P,n,V,Q,J,L,M,te,B,s,o,l,ne]}class jt extends ce{constructor(e){super(),ue(this,e,Ut,Qt,me,{workflow:14,namespace:15,cancelInProgress:0,cancelEnabled:1})}}const Be=r=>{const e=r==null?void 0:r.indexOf("?");return e>-1?r.slice(0,e):r},z=(r,e,t=!1)=>{const n=Be(r).split("/"),l=Be(e).split("/");if(t&&n.length!==l.length)return!1;for(let a=0;a<n.length;a++){const s=n[a],o=l[a];if(s!==o)return!1}return!0};function Ot(r){let e,t,n,l,a,s;return{c(){e=$("label"),t=$("input"),n=q(),l=$("span"),this.h()},l(o){e=v(o,"LABEL",{for:!0,class:!0});var f=I(e);t=v(f,"INPUT",{id:!0,type:!0,class:!0}),n=F(f),l=v(f,"SPAN",{class:!0}),I(l).forEach(h),f.forEach(h),this.h()},h(){p(t,"id",r[1]),p(t,"type","checkbox"),p(t,"class","hidden svelte-1s95c4s"),p(l,"class","slider svelte-1s95c4s"),p(e,"for",r[1]),p(e,"class","switch svelte-1s95c4s")},m(o,f){D(o,e,f),_(e,t),t.checked=r[0],_(e,n),_(e,l),a||(s=[Se(t,"change",r[2]),Se(t,"change",r[3])],a=!0)},p(o,[f]){f&2&&p(t,"id",o[1]),f&1&&(t.checked=o[0]),f&2&&p(e,"for",o[1])},i:ie,o:ie,d(o){o&&h(e),a=!1,ot(s)}}}function zt(r,e,t){let{checked:n=!1}=e,{id:l}=e;function a(o){ft.call(this,r,o)}function s(){n=this.checked,t(0,n)}return r.$$set=o=>{"checked"in o&&t(0,n=o.checked),"id"in o&&t(1,l=o.id)},[n,l,a,s]}class Jt extends ce{constructor(e){super(),ue(this,e,zt,Ot,me,{checked:0,id:1})}}function Kt(r){let e,t;return e=new Jt({props:{id:"autorefresh",checked:r[1]}}),e.$on("change",function(){it(r[0])&&r[0].apply(this,arguments)}),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){r=n;const a={};l&2&&(a.checked=r[1]),e.$set(a)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Yt(r){let e,t,n,l;return n=new nt({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[Kt]},$$scope:{ctx:r}}}),{c(){e=$("label"),t=j(`Auto refresh
  `),T(n.$$.fragment),this.h()},l(a){e=v(a,"LABEL",{for:!0,class:!0});var s=I(e);t=O(s,`Auto refresh
  `),y(n.$$.fragment,s),s.forEach(h),this.h()},h(){p(e,"for","autorefresh"),p(e,"class","flex items-center gap-4 font-secondary text-sm")},m(a,s){D(a,e,s),_(e,t),W(n,e,null),l=!0},p(a,[s]){const o={};s&11&&(o.$$scope={dirty:s,ctx:a}),n.$set(o)},i(a){l||(d(n.$$.fragment,a),l=!0)},o(a){g(n.$$.fragment,a),l=!1},d(a){a&&h(e),A(n)}}}function Gt(r,e,t){let n,l;H(r,ke,s=>t(2,l=s));let{onChange:a}=e;return r.$$set=s=>{"onChange"in s&&t(0,a=s.onChange)},r.$$.update=()=>{r.$$.dirty&4&&t(1,n=l==="on")},[a,n,l]}class Xt extends ce{constructor(e){super(),ue(this,e,Gt,Yt,me,{onChange:0})}}function Ne(r){let e,t,n;return t=new tt({props:{name:r[2]}}),{c(){e=$("div"),T(t.$$.fragment)},l(l){e=v(l,"DIV",{});var a=I(e);y(t.$$.fragment,a),a.forEach(h)},m(l,a){D(l,e,a),W(t,e,null),n=!0},p(l,a){const s={};a&4&&(s.name=l[2]),t.$set(s)},i(l){n||(d(t.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),n=!1},d(l){l&&h(e),A(t)}}}function Qe(r){let e,t;const n=r[6].default,l=Je(n,r,r[5],null);return{c(){e=$("div"),l&&l.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var s=I(e);l&&l.l(s),s.forEach(h),this.h()},h(){p(e,"class","content svelte-72m7xy")},m(a,s){D(a,e,s),l&&l.m(e,null),t=!0},p(a,s){l&&l.p&&(!t||s&32)&&Ke(l,n,a,a[5],t?Ge(n,a[5],s,null):Ye(a[5]),null)},i(a){t||(d(l,a),t=!0)},o(a){g(l,a),t=!1},d(a){a&&h(e),l&&l.d(a)}}}function Zt(r){let e,t,n,l,a,s,o,f,i=r[2]&&Ne(r),c=r[4].default&&Qe(r);return{c(){e=$("div"),i&&i.c(),t=q(),n=$("div"),l=$("h5"),a=j(r[1]),s=q(),c&&c.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var k=I(e);i&&i.l(k),t=F(k),n=v(k,"DIV",{class:!0});var P=I(n);l=v(P,"H5",{class:!0});var V=I(l);a=O(V,r[1]),V.forEach(h),s=F(P),c&&c.l(P),P.forEach(h),k.forEach(h),this.h()},h(){p(l,"class","font-semibold leading-6"),p(n,"class","ml-1"),p(e,"class",o="alert "+r[0]+" "+r[3].class+" svelte-72m7xy")},m(u,k){D(u,e,k),i&&i.m(e,null),_(e,t),_(e,n),_(n,l),_(l,a),_(n,s),c&&c.m(n,null),f=!0},p(u,[k]){u[2]?i?(i.p(u,k),k&4&&d(i,1)):(i=Ne(u),i.c(),d(i,1),i.m(e,t)):i&&(oe(),g(i,1,1,()=>{i=null}),fe()),(!f||k&2)&&ze(a,u[1]),u[4].default?c?(c.p(u,k),k&16&&d(c,1)):(c=Qe(u),c.c(),d(c,1),c.m(n,null)):c&&(oe(),g(c,1,1,()=>{c=null}),fe()),(!f||k&9&&o!==(o="alert "+u[0]+" "+u[3].class+" svelte-72m7xy"))&&p(e,"class",o)},i(u){f||(d(i),d(c),f=!0)},o(u){g(i),g(c),f=!1},d(u){u&&h(e),i&&i.d(),c&&c.d()}}}function xt(r,e,t){let{$$slots:n={},$$scope:l}=e;const a=ct(n);let{intent:s}=e,{title:o}=e,{icon:f=null}=e;return r.$$set=i=>{t(3,e=Me(Me({},e),Re(i))),"intent"in i&&t(0,s=i.intent),"title"in i&&t(1,o=i.title),"icon"in i&&t(2,f=i.icon),"$$scope"in i&&t(5,l=i.$$scope)},e=Re(e),[s,o,f,e,a,l,n]}class en extends ce{constructor(e){super(),ue(this,e,xt,Zt,me,{intent:0,title:1,icon:2})}}function Ue(r){let e,t,n,l,a;return t=new Xt({props:{onChange:r[11]}}),l=new jt({props:{cancelEnabled:r[3],cancelInProgress:r[5],workflow:r[1],namespace:r[0]}}),{c(){e=$("div"),T(t.$$.fragment),n=q(),T(l.$$.fragment),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=I(e);y(t.$$.fragment,o),n=F(o),y(l.$$.fragment,o),o.forEach(h),this.h()},h(){p(e,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end")},m(s,o){D(s,e,o),W(t,e,null),_(e,n),W(l,e,null),a=!0},p(s,o){const f={};o&8&&(f.cancelEnabled=s[3]),o&32&&(f.cancelInProgress=s[5]),o&2&&(f.workflow=s[1]),o&1&&(f.namespace=s[0]),l.$set(f)},i(s){a||(d(t.$$.fragment,s),d(l.$$.fragment,s),a=!0)},o(s){g(t.$$.fragment,s),g(l.$$.fragment,s),a=!1},d(s){s&&h(e),A(t),A(l)}}}function je(r){let e,t,n,l;return t=new en({props:{icon:"info",intent:"info",title:"Cancel Request Sent",$$slots:{default:[tn]},$$scope:{ctx:r}}}),{c(){e=$("div"),T(t.$$.fragment),this.h()},l(a){e=v(a,"DIV",{class:!0});var s=I(e);y(t.$$.fragment,s),s.forEach(h),this.h()},h(){p(e,"class","-mt-4 mb-4")},m(a,s){D(a,e,s),W(t,e,null),l=!0},i(a){l||(d(t.$$.fragment,a),n||ut(()=>{n=mt(e,_t,{duration:200,delay:100}),n.start()}),l=!0)},o(a){g(t.$$.fragment,a),l=!1},d(a){a&&h(e),A(t)}}}function tn(r){let e;return{c(){e=j(`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},l(t){e=O(t,`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},m(t,n){D(t,e,n)},d(t){t&&h(e)}}}function nn(r){var ve,Ee,Ie,Te,ye;let e,t,n,l,a,s,o,f,i,c,u,k,P,V=r[1].id+"",Q,J,L,K,S,M,te,B,ne,b,w,X,be,Z,le;a=new tt({props:{name:"chevron-left",class:"inline"}}),u=new Et({props:{status:(ve=r[1])==null?void 0:ve.status}});let C=r[4]&&Ue(r),R=r[5]&&je(r);return M=new he({props:{label:"History",href:de({...r[6]}),amount:(Ee=r[1])==null?void 0:Ee.historyEvents,dataCy:"history-tab",active:z(r[8].url.pathname,de({...r[6]}))}}),B=new he({props:{label:"Workers",href:ge(r[6]),amount:(Te=(Ie=r[2])==null?void 0:Ie.pollers)==null?void 0:Te.length,dataCy:"workers-tab",active:z(r[8].url.pathname,ge(r[6]))}}),b=new he({props:{label:"Pending Activities",href:_e(r[6]),amount:(ye=r[1].pendingActivities)==null?void 0:ye.length,dataCy:"pending-activities-tab",active:z(r[8].url.pathname,_e(r[6]))}}),X=new he({props:{label:"Stack Trace",href:pe(r[6]),dataCy:"stack-trace-tab",active:z(r[8].url.pathname,pe(r[6]))}}),Z=new he({props:{label:"Queries",href:we(r[6]),dataCy:"queries-tab",active:z(r[8].url.pathname,we(r[6]))}}),{c(){e=$("header"),t=$("main"),n=$("div"),l=$("a"),T(a.$$.fragment),s=j("Back to Workflows"),f=q(),i=$("div"),c=$("div"),T(u.$$.fragment),k=q(),P=$("h1"),Q=j(V),J=q(),C&&C.c(),L=q(),R&&R.c(),K=q(),S=$("nav"),T(M.$$.fragment),te=q(),T(B.$$.fragment),ne=q(),T(b.$$.fragment),w=q(),T(X.$$.fragment),be=q(),T(Z.$$.fragment),this.h()},l(m){e=v(m,"HEADER",{class:!0});var E=I(e);t=v(E,"MAIN",{class:!0});var U=I(t);n=v(U,"DIV",{class:!0});var ae=I(n);l=v(ae,"A",{href:!0,"data-cy":!0,class:!0});var x=I(l);y(a.$$.fragment,x),s=O(x,"Back to Workflows"),x.forEach(h),ae.forEach(h),f=F(U),i=v(U,"DIV",{class:!0});var Y=I(i);c=v(Y,"DIV",{class:!0});var ee=I(c);y(u.$$.fragment,ee),k=F(ee),P=v(ee,"H1",{"data-cy":!0,class:!0});var se=I(P);Q=O(se,V),se.forEach(h),ee.forEach(h),J=F(Y),C&&C.l(Y),Y.forEach(h),L=F(U),R&&R.l(U),K=F(U),S=v(U,"NAV",{class:!0});var N=I(S);y(M.$$.fragment,N),te=F(N),y(B.$$.fragment,N),ne=F(N),y(b.$$.fragment,N),w=F(N),y(X.$$.fragment,N),be=F(N),y(Z.$$.fragment,N),N.forEach(h),U.forEach(h),E.forEach(h),this.h()},h(){p(l,"href",o=He({namespace:r[0],query:r[7]||r[10],search:r[9]})),p(l,"data-cy","back-to-workflows"),p(l,"class","back-to-workflows svelte-st9g8m"),p(n,"class","-mt-3 -ml-2 mb-4 block"),p(P,"data-cy","workflow-id-heading"),p(P,"class","select-all overflow-hidden text-ellipsis text-2xl font-medium"),p(c,"class","flex w-full items-center justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),p(i,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),p(S,"class","flex flex-wrap gap-6"),p(t,"class","relative flex flex-col gap-1"),p(e,"class","mb-4 flex flex-col gap-4")},m(m,E){D(m,e,E),_(e,t),_(t,n),_(n,l),W(a,l,null),_(l,s),_(t,f),_(t,i),_(i,c),W(u,c,null),_(c,k),_(c,P),_(P,Q),_(i,J),C&&C.m(i,null),_(t,L),R&&R.m(t,null),_(t,K),_(t,S),W(M,S,null),_(S,te),W(B,S,null),_(S,ne),W(b,S,null),_(S,w),W(X,S,null),_(S,be),W(Z,S,null),le=!0},p(m,[E]){var N,We,Ae,Ce,De;(!le||E&129&&o!==(o=He({namespace:m[0],query:m[7]||m[10],search:m[9]})))&&p(l,"href",o);const U={};E&2&&(U.status=(N=m[1])==null?void 0:N.status),u.$set(U),(!le||E&2)&&V!==(V=m[1].id+"")&&ze(Q,V),m[4]?C?(C.p(m,E),E&16&&d(C,1)):(C=Ue(m),C.c(),d(C,1),C.m(i,null)):C&&(oe(),g(C,1,1,()=>{C=null}),fe()),m[5]?R?E&32&&d(R,1):(R=je(m),R.c(),d(R,1),R.m(t,K)):R&&(oe(),g(R,1,1,()=>{R=null}),fe());const ae={};E&64&&(ae.href=de({...m[6]})),E&2&&(ae.amount=(We=m[1])==null?void 0:We.historyEvents),E&320&&(ae.active=z(m[8].url.pathname,de({...m[6]}))),M.$set(ae);const x={};E&64&&(x.href=ge(m[6])),E&4&&(x.amount=(Ce=(Ae=m[2])==null?void 0:Ae.pollers)==null?void 0:Ce.length),E&320&&(x.active=z(m[8].url.pathname,ge(m[6]))),B.$set(x);const Y={};E&64&&(Y.href=_e(m[6])),E&2&&(Y.amount=(De=m[1].pendingActivities)==null?void 0:De.length),E&320&&(Y.active=z(m[8].url.pathname,_e(m[6]))),b.$set(Y);const ee={};E&64&&(ee.href=pe(m[6])),E&320&&(ee.active=z(m[8].url.pathname,pe(m[6]))),X.$set(ee);const se={};E&64&&(se.href=we(m[6])),E&320&&(se.active=z(m[8].url.pathname,we(m[6]))),Z.$set(se)},i(m){le||(d(a.$$.fragment,m),d(u.$$.fragment,m),d(C),d(R),d(M.$$.fragment,m),d(B.$$.fragment,m),d(b.$$.fragment,m),d(X.$$.fragment,m),d(Z.$$.fragment,m),le=!0)},o(m){g(a.$$.fragment,m),g(u.$$.fragment,m),g(C),g(R),g(M.$$.fragment,m),g(B.$$.fragment,m),g(b.$$.fragment,m),g(X.$$.fragment,m),g(Z.$$.fragment,m),le=!1},d(m){m&&h(e),A(a),A(u),C&&C.d(),R&&R.d(),A(M),A(B),A(b),A(X),A(Z)}}}const Oe=15e3;function an(r,e,t){let n,l,a,s,o,f,i,c,u,k,P;H(r,ht,w=>t(15,s=w)),H(r,dt,w=>t(16,o=w)),H(r,et,w=>t(17,f=w)),H(r,re,w=>t(18,i=w)),H(r,ke,w=>t(19,c=w)),H(r,pt,w=>t(20,u=w)),H(r,wt,w=>t(7,k=w)),H(r,xe,w=>t(8,P=w));var V,Q;let{namespace:J}=e,{workflow:L}=e,{workers:K}=e,{cancelEnabled:S=!1}=e,M;const{parameters:te,searchType:B}=u,ne=vt(te);Xe(()=>{l&&c==="on"&&(clearInterval(M),t(14,M=setInterval(()=>G(re,i=Date.now(),i),Oe)))});const b=()=>{c==="on"?(G(ke,c="off",c),clearInterval(M)):(G(re,i=Date.now(),i),G(ke,c="on",c),clearInterval(M),t(14,M=setInterval(()=>G(re,i=Date.now(),i),Oe)))};return Ze(()=>{clearInterval(M)}),r.$$set=w=>{"namespace"in w&&t(0,J=w.namespace),"workflow"in w&&t(1,L=w.workflow),"workers"in w&&t(2,K=w.workers),"cancelEnabled"in w&&t(3,S=w.cancelEnabled)},r.$$.update=()=>{r.$$.dirty&3&&t(6,n={namespace:J,workflow:L==null?void 0:L.id,run:L==null?void 0:L.runId}),r.$$.dirty&135168&&t(4,l=t(12,V=f==null?void 0:f.workflow)===null||V===void 0?void 0:V.isRunning),r.$$.dirty&16400&&(l||clearInterval(M)),r.$$.dirty&237568&&t(5,a=(t(13,Q=f==null?void 0:f.workflow)===null||Q===void 0?void 0:Q.status)==="Running"&&!o&&s.events.some(w=>(w==null?void 0:w.eventType)==="WorkflowExecutionCancelRequested"))},[J,L,K,S,l,a,n,k,P,B,ne,b,V,Q,M,s,o,f]}class rn extends ce{constructor(e){super(),ue(this,e,an,nn,me,{namespace:0,workflow:1,workers:2,cancelEnabled:3})}}function ln(r){let e,t,n;e=new rn({props:{namespace:r[1].params.namespace,workflow:r[3].workflow,workers:r[3].workers,cancelEnabled:r[0]}});const l=r[5].default,a=Je(l,r,r[4],null);return{c(){T(e.$$.fragment),t=q(),a&&a.c()},l(s){y(e.$$.fragment,s),t=F(s),a&&a.l(s)},m(s,o){W(e,s,o),D(s,t,o),a&&a.m(s,o),n=!0},p(s,o){const f={};o&2&&(f.namespace=s[1].params.namespace),o&8&&(f.workflow=s[3].workflow),o&8&&(f.workers=s[3].workers),o&1&&(f.cancelEnabled=s[0]),e.$set(f),a&&a.p&&(!n||o&16)&&Ke(a,l,s,s[4],n?Ge(l,s[4],o,null):Ye(s[4]),null)},i(s){n||(d(e.$$.fragment,s),d(a,s),n=!0)},o(s){g(e.$$.fragment,s),g(a,s),n=!1},d(s){A(e,s),s&&h(t),a&&a.d(s)}}}function sn(r){let e,t;return e=new Pt({}),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p:ie,i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function on(r){let e,t,n,l;const a=[sn,ln],s=[];function o(f,i){return f[2]?0:1}return t=o(r),n=s[t]=a[t](r),{c(){e=$("main"),n.c(),this.h()},l(f){e=v(f,"MAIN",{class:!0});var i=I(e);n.l(i),i.forEach(h),this.h()},h(){p(e,"class","flex h-full flex-col gap-6")},m(f,i){D(f,e,i),s[t].m(e,null),l=!0},p(f,[i]){let c=t;t=o(f),t===c?s[t].p(f,i):(oe(),g(s[c],1,1,()=>{s[c]=null}),fe(),n=s[t],n?n.p(f,i):(n=s[t]=a[t](f),n.c()),d(n,1),n.m(e,null))},i(f){l||(d(n),l=!0)},o(f){g(n),l=!1},d(f){f&&h(e),s[t].d()}}}function fn(r,e,t){let n,l,a,s,o;H(r,qe,u=>t(6,n=u)),H(r,Fe,u=>t(7,l=u)),H(r,xe,u=>t(1,a=u)),H(r,gt,u=>t(2,s=u)),H(r,et,u=>t(3,o=u));let{$$slots:f={},$$scope:i}=e,{cancelEnabled:c=!1}=e;return Xe(()=>{const u=a.url.searchParams.get("sort");u&&G(Fe,l=u,l)}),Ze(()=>{G(qe,n=null,n)}),r.$$set=u=>{"cancelEnabled"in u&&t(0,c=u.cancelEnabled),"$$scope"in u&&t(4,i=u.$$scope)},[c,a,s,o,i,f]}class Mn extends ce{constructor(e){super(),ue(this,e,fn,on,me,{cancelEnabled:0})}}export{en as A,Mn as W};
