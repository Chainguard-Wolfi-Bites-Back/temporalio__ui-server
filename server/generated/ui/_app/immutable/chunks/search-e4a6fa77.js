import{S as we,i as ke,s as ie,x as M,y as j,z,f as E,t as I,C as K,J as Je,K as Xe,L as Ge,M as Ye,l as T,r as H,a as C,m as y,n as F,u as L,h as c,c as N,p as k,b as g,N as w,F as ve,e as Be,g as fe,d as ue,O as Se,W as B,X as ge,at as ce,I as Ze,v as Z,H as Ke,T as Ae}from"./index-6c7cd618.js";import{T as $e,a as xe}from"./table-header-row-bc4ea74b.js";import{p as et}from"./stores-1b77fd24.js";import{f as Y}from"./format-date-8d85ffcd.js";import{q as tt,s as lt,u as st,v as Ue}from"./format-time-63ab2d37.js";import{g as rt}from"./route-for-369a155d.js";import{u as at}from"./pagination-76e2a2b3.js";import{a as Oe}from"./workflow-service-5eb5ccce.js";import{c as ot,d as Ee,e as nt,f as ft,g as ut}from"./is-b4c8f655.js";import{W as it}from"./workflow-status-79f88c70.js";import{I as Fe}from"./icon-5a9d4a54.js";import{c as ct}from"./copy-to-clipboard-6fea1ca1.js";import{T as mt}from"./table-row-fa40e182.js";import{e as _t}from"./event-view-00f745e7.js";import{B as dt}from"./button-ecd8a229.js";function ht(r){let e;const s=r[1].default,t=Je(s,r,r[2],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&4)&&Xe(t,s,l,l[2],e?Ye(s,l[2],o,null):Ge(l[2]),null)},i(l){e||(E(t,l),e=!0)},o(l){I(t,l),e=!1},d(l){t&&t.d(l)}}}function pt(r){let e,s,t,l,o,a,n,i,f,d,p,P,b,m,_,W,A;return{c(){e=T("th"),s=H("Status"),t=C(),l=T("th"),o=H("Workflow ID"),a=C(),n=T("th"),i=H("Type"),f=C(),d=T("th"),p=H("Start"),P=C(),b=T("th"),m=H("End"),_=C(),W=T("th"),A=H("Summary"),this.h()},l(h){e=y(h,"TH",{class:!0});var S=F(e);s=L(S,"Status"),S.forEach(c),t=N(h),l=y(h,"TH",{class:!0});var R=F(l);o=L(R,"Workflow ID"),R.forEach(c),a=N(h),n=y(h,"TH",{class:!0});var D=F(n);i=L(D,"Type"),D.forEach(c),f=N(h),d=y(h,"TH",{class:!0});var J=F(d);p=L(J,"Start"),J.forEach(c),P=N(h),b=y(h,"TH",{class:!0});var q=F(b);m=L(q,"End"),q.forEach(c),_=N(h),W=y(h,"TH",{class:!0,colspan:!0});var U=F(W);A=L(U,"Summary"),U.forEach(c),this.h()},h(){k(e,"class","hidden w-32 md:table-cell"),k(l,"class","hidden md:table-cell md:w-auto"),k(n,"class","hidden md:table-cell xl:w-60"),k(d,"class","hidden xl:table-cell xl:w-60"),k(b,"class","hidden xl:table-cell xl:w-60"),k(W,"class","table-cell md:hidden"),k(W,"colspan","3")},m(h,S){g(h,e,S),w(e,s),g(h,t,S),g(h,l,S),w(l,o),g(h,a,S),g(h,n,S),w(n,i),g(h,f,S),g(h,d,S),w(d,p),g(h,P,S),g(h,b,S),w(b,m),g(h,_,S),g(h,W,S),w(W,A)},p:ve,d(h){h&&c(e),h&&c(t),h&&c(l),h&&c(a),h&&c(n),h&&c(f),h&&c(d),h&&c(P),h&&c(b),h&&c(_),h&&c(W)}}}function bt(r){let e,s;return e=new xe({props:{slot:"headers",$$slots:{default:[pt]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,l){const o={};l&4&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function wt(r){let e,s;return e=new $e({props:{class:"w-full md:table-fixed",updating:r[0],$$slots:{headers:[bt],default:[ht]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,[l]){const o={};l&1&&(o.updating=t[0]),l&4&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function kt(r,e,s){let{$$slots:t={},$$scope:l}=e,{updating:o=!1}=e;return r.$$set=a=>{"updating"in a&&s(0,o=a.updating),"$$scope"in a&&s(2,l=a.$$scope)},[o,t,l]}class Zt extends we{constructor(e){super(),ke(this,e,kt,wt,ie,{updating:0})}}const vt=r=>{const e=[],s=()=>{t&&(e.push(t),t="")};let t="",l=0;for(;l<r.length;){const o=r[l];if(ot(o)){t+=o,s(),l++;continue}if(Ee(o)){const a=`${r[l]}${r[l+1]}`,n=`${r[l]}${r[l+1]}${r[l+2]}`;if(Ee(n)){s(),t+=n,l+=3;continue}else if(Ee(a)){s(),t+=a,l+=2;continue}else{s(),t+=o,l++;continue}}if(nt(o)||ft(o)){s(),l++;continue}t+=o,l++}return s(),e},Te=r=>e=>e.toLowerCase()===r.toLowerCase(),be=(r,e)=>r[e+2],gt=r=>{if(!!r){for(const e of st)if(r[e])return{[e]:r[e]}}},Tt=Te("WorkflowType"),yt=Te("WorkflowId"),Et=Te("StartTime"),St=Te("ExecutionStatus"),Ft=r=>{const e=vt(r),s={workflowId:"",workflowType:"",executionStatus:null,timeRange:null};return e.forEach((t,l)=>{if(yt(t)&&(s.workflowId=be(e,l)),Tt(t)&&(s.workflowType=be(e,l)),St(t)){const o=be(e,l);ut(o)&&(s.executionStatus=o)}if(Et(t)){const o=be(e,l);try{const a=tt(o),n=gt(a);s.timeRange=lt(n)}catch(a){console.error("Error parsing StartTime from query",a)}}}),s};function Re(r){let e,s,t,l,o,a,n=r[1]&&Qe(r),i=r[2]&&Me(r);return{c(){e=T("div"),n&&n.c(),s=C(),i&&i.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var d=F(e);n&&n.l(d),s=N(d),i&&i.l(d),d.forEach(c),this.h()},h(){k(e,"class",t="copy-or-filter "+r[6]+" svelte-kisf2b")},m(f,d){g(f,e,d),n&&n.m(e,null),w(e,s),i&&i.m(e,null),l=!0,o||(a=B(e,"click",ge(ce(ve))),o=!0)},p(f,d){f[1]?n?(n.p(f,d),d&2&&E(n,1)):(n=Qe(f),n.c(),E(n,1),n.m(e,s)):n&&(fe(),I(n,1,1,()=>{n=null}),ue()),f[2]?i?(i.p(f,d),d&4&&E(i,1)):(i=Me(f),i.c(),E(i,1),i.m(e,null)):i&&(fe(),I(i,1,1,()=>{i=null}),ue()),(!l||d&64&&t!==(t="copy-or-filter "+f[6]+" svelte-kisf2b"))&&k(e,"class",t)},i(f){l||(E(n),E(i),l=!0)},o(f){I(n),I(i),l=!1},d(f){f&&c(e),n&&n.d(),i&&i.d(),o=!1,a()}}}function Qe(r){let e,s=r[5],t,l,o,a=Ve(r);return{c(){e=T("button"),a.c()},l(n){e=y(n,"BUTTON",{});var i=F(e);a.l(i),i.forEach(c)},m(n,i){g(n,e,i),a.m(e,null),t=!0,l||(o=B(e,"click",ge(ce(function(){Ze(r[4])&&r[4].apply(this,arguments)}))),l=!0)},p(n,i){r=n,i&32&&ie(s,s=r[5])?(fe(),I(a,1,1,ve),ue(),a=Ve(r),a.c(),E(a,1),a.m(e,null)):a.p(r,i)},i(n){t||(E(a),t=!0)},o(n){I(a),t=!1},d(n){n&&c(e),a.d(n),l=!1,o()}}}function Ve(r){let e,s;return e=new Fe({props:{name:"filter",class:"h-4 w-4 rounded-sm "+(r[5]?"bg-gray-900 text-white":"")}}),{c(){M(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,l){const o={};l&32&&(o.class="h-4 w-4 rounded-sm "+(t[5]?"bg-gray-900 text-white":"")),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function Me(r){let e,s,t,l,o;return s=new Fe({props:{name:r[7]?"checkmark":"copy",stroke:"#000"}}),{c(){e=T("button"),M(s.$$.fragment)},l(a){e=y(a,"BUTTON",{});var n=F(e);j(s.$$.fragment,n),n.forEach(c)},m(a,n){g(a,e,n),z(s,e,null),t=!0,l||(o=B(e,"click",ge(ce(r[10]))),l=!0)},p(a,n){const i={};n&128&&(i.name=a[7]?"checkmark":"copy"),s.$set(i)},i(a){t||(E(s.$$.fragment,a),t=!0)},o(a){I(s.$$.fragment,a),t=!1},d(a){a&&c(e),K(s),l=!1,o()}}}function Wt(r){let e,s,t=r[0]&&Re(r);return{c(){t&&t.c(),e=Be()},l(l){t&&t.l(l),e=Be()},m(l,o){t&&t.m(l,o),g(l,e,o),s=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&E(t,1)):(t=Re(l),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(fe(),I(t,1,1,()=>{t=null}),ue())},i(l){s||(E(t),s=!0)},o(l){I(t),s=!1},d(l){t&&t.d(l),l&&c(e)}}}function Dt(r,e,s){let t,{show:l=!1}=e,{filterable:o=!0}=e,{copyable:a=!0}=e,{content:n}=e,{onFilter:i=ve}=e,{filtered:f=!1}=e,{class:d=""}=e;const{copy:p,copied:P}=ct(700);Se(r,P,m=>s(7,t=m));const b=m=>p(m,n);return r.$$set=m=>{"show"in m&&s(0,l=m.show),"filterable"in m&&s(1,o=m.filterable),"copyable"in m&&s(2,a=m.copyable),"content"in m&&s(3,n=m.content),"onFilter"in m&&s(4,i=m.onFilter),"filtered"in m&&s(5,f=m.filtered),"class"in m&&s(6,d=m.class)},[l,o,a,n,i,f,d,t,p,P,b]}class je extends we{constructor(e){super(),ke(this,e,Dt,Wt,ie,{show:0,filterable:1,copyable:2,content:3,onFilter:4,filtered:5,class:6})}}function It(r){var De,Ie,Pe;let e,s,t,l,o,a=r[0].id+"",n,i,f,d,p,P=Y(r[0].startTime,r[1])+"",b,m,_,W,A,h,S,R=r[0].name+"",D,J,q,U,X,$=Y(r[0].endTime,r[1])+"",me,_e,x,le,se=Y(r[0].startTime,r[1])+"",de,he,ee,re,ae=Y(r[0].endTime,r[1])+"",pe,Q,ye,We;return s=new it({props:{status:r[0].status,delay:Ue(r[0].startTime)}}),f=new je({props:{show:r[2],content:r[0].id,filterable:!1,class:"bg-gradient-to-b from-blue-100 to-purple-100"}}),q=new je({props:{show:r[2],content:r[0].name,onFilter:r[13],filtered:(Pe=(Ie=(De=r[4].url)==null?void 0:De.searchParams)==null?void 0:Ie.get("query"))==null?void 0:Pe.includes(r[0].name),class:"bg-gradient-to-b from-blue-100 to-purple-100"}}),{c(){e=T("td"),M(s.$$.fragment),t=C(),l=T("td"),o=T("span"),n=H(a),i=C(),M(f.$$.fragment),d=C(),p=T("p"),b=H(P),m=C(),_=T("td"),W=T("h3"),A=H("Workflow Name:"),h=C(),S=T("span"),D=H(R),J=C(),M(q.$$.fragment),U=C(),X=T("p"),me=H($),_e=C(),x=T("td"),le=T("p"),de=H(se),he=C(),ee=T("td"),re=T("p"),pe=H(ae),this.h()},l(u){e=y(u,"TD",{});var v=F(e);j(s.$$.fragment,v),v.forEach(c),t=N(u),l=y(u,"TD",{class:!0});var V=F(l);o=y(V,"SPAN",{class:!0});var te=F(o);n=L(te,a),te.forEach(c),i=N(V),j(f.$$.fragment,V),d=N(V),p=y(V,"P",{class:!0});var G=F(p);b=L(G,P),G.forEach(c),V.forEach(c),m=N(u),_=y(u,"TD",{class:!0});var O=F(_);W=y(O,"H3",{class:!0});var oe=F(W);A=L(oe,"Workflow Name:"),oe.forEach(c),h=N(O),S=y(O,"SPAN",{class:!0});var ne=F(S);D=L(ne,R),ne.forEach(c),J=N(O),j(q.$$.fragment,O),U=N(O),X=y(O,"P",{class:!0});var Ce=F(X);me=L(Ce,$),Ce.forEach(c),O.forEach(c),_e=N(u),x=y(u,"TD",{class:!0});var Ne=F(x);le=y(Ne,"P",{});var qe=F(le);de=L(qe,se),qe.forEach(c),Ne.forEach(c),he=N(u),ee=y(u,"TD",{class:!0});var He=F(ee);re=y(He,"P",{});var Le=F(re);pe=L(Le,ae),Le.forEach(c),He.forEach(c),this.h()},h(){k(o,"class","table-link svelte-126d7un"),k(p,"class","inline-time-cell svelte-126d7un"),k(l,"class","relative break-words pr-4"),k(W,"class","md:hidden"),k(S,"class","table-link svelte-126d7un"),k(X,"class","inline-time-cell svelte-126d7un"),k(_,"class","relative truncate"),k(x,"class","time-cell svelte-126d7un"),k(ee,"class","time-cell svelte-126d7un")},m(u,v){g(u,e,v),z(s,e,null),g(u,t,v),g(u,l,v),w(l,o),w(o,n),w(l,i),z(f,l,null),w(l,d),w(l,p),w(p,b),g(u,m,v),g(u,_,v),w(_,W),w(W,A),w(_,h),w(_,S),w(S,D),w(_,J),z(q,_,null),w(_,U),w(_,X),w(X,me),g(u,_e,v),g(u,x,v),w(x,le),w(le,de),g(u,he,v),g(u,ee,v),w(ee,re),w(re,pe),Q=!0,ye||(We=[B(l,"mouseover",r[8]),B(l,"focus",r[9]),B(l,"mouseleave",r[10]),B(l,"blur",r[11]),B(S,"click",ge(ce(r[12]))),B(_,"mouseover",r[14]),B(_,"focus",r[15]),B(_,"mouseleave",r[16]),B(_,"blur",r[17])],ye=!0)},p(u,v){var O,oe,ne;const V={};v&1&&(V.status=u[0].status),v&1&&(V.delay=Ue(u[0].startTime)),s.$set(V),(!Q||v&1)&&a!==(a=u[0].id+"")&&Z(n,a);const te={};v&4&&(te.show=u[2]),v&1&&(te.content=u[0].id),f.$set(te),(!Q||v&3)&&P!==(P=Y(u[0].startTime,u[1])+"")&&Z(b,P),(!Q||v&1)&&R!==(R=u[0].name+"")&&Z(D,R);const G={};v&4&&(G.show=u[2]),v&1&&(G.content=u[0].name),v&1&&(G.onFilter=u[13]),v&17&&(G.filtered=(ne=(oe=(O=u[4].url)==null?void 0:O.searchParams)==null?void 0:oe.get("query"))==null?void 0:ne.includes(u[0].name)),q.$set(G),(!Q||v&3)&&$!==($=Y(u[0].endTime,u[1])+"")&&Z(me,$),(!Q||v&3)&&se!==(se=Y(u[0].startTime,u[1])+"")&&Z(de,se),(!Q||v&3)&&ae!==(ae=Y(u[0].endTime,u[1])+"")&&Z(pe,ae)},i(u){Q||(E(s.$$.fragment,u),E(f.$$.fragment,u),E(q.$$.fragment,u),Q=!0)},o(u){I(s.$$.fragment,u),I(f.$$.fragment,u),I(q.$$.fragment,u),Q=!1},d(u){u&&c(e),K(s),u&&c(t),u&&c(l),K(f),u&&c(m),u&&c(_),K(q),u&&c(_e),u&&c(x),u&&c(he),u&&c(ee),ye=!1,Ke(We)}}}function Pt(r){let e,s;return e=new mt({props:{href:r[3],class:"workflow-summary-row",$$slots:{default:[It]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},p(t,[l]){const o={};l&8&&(o.href=t[3]),l&262167&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function Ct(r,e,s){let t,l,o;Se(r,et,D=>s(4,l=D)),Se(r,_t,D=>s(7,o=D));let{namespace:a}=e,{workflow:n}=e,{timeFormat:i}=e,f=!1;const d=D=>{const J=Oe({timeRange:"All"}),q=l.url.searchParams.get("query"),U=Ft(q!=null?q:J),X=(U==null?void 0:U.workflowType)===D?"":D,$=Oe({...U,workflowType:X});at({url:l.url,parameter:"query",value:$,allowEmpty:!0})},p=()=>s(2,f=!0),P=()=>s(2,f=!0),b=()=>s(2,f=!1),m=()=>s(2,f=!1),_=()=>d(n.name),W=()=>d(n.name),A=()=>s(2,f=!0),h=()=>s(2,f=!0),S=()=>s(2,f=!1),R=()=>s(2,f=!1);return r.$$set=D=>{"namespace"in D&&s(6,a=D.namespace),"workflow"in D&&s(0,n=D.workflow),"timeFormat"in D&&s(1,i=D.timeFormat)},r.$$.update=()=>{r.$$.dirty&193&&s(3,t=rt({view:o,namespace:a,workflow:n.id,run:n.runId}))},[n,i,f,t,l,d,a,o,p,P,b,m,_,W,A,h,S,R]}class $t extends we{constructor(e){super(),ke(this,e,Ct,Pt,ie,{namespace:6,workflow:0,timeFormat:1})}}var xt=Nt;function Nt(r,e,s,t){var l,o,a;return function(){if(a=this,o=Array.prototype.slice.call(arguments),l&&(s||t))return;if(!s)return f(),l=setTimeout(i,e),l;l=setTimeout(f,e),r.apply(a,o);function i(){f(),r.apply(a,o)}function f(){clearTimeout(l),l=null}}}function ze(r){let e,s;return e=new Fe({props:{name:"search",class:"ml-4 flex items-center text-gray-700"}}),{c(){M(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){z(e,t,l),s=!0},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function qt(r){let e;return{c(){e=H(r[2])},l(s){e=L(s,r[2])},m(s,t){g(s,e,t)},p(s,t){t&4&&Z(e,s[2])},d(s){s&&c(e)}}}function Ht(r){let e,s,t,l,o,a,n,i,f,d,p,P,b=r[4]&&ze();return f=new dt({props:{class:"m-2",type:"submit",$$slots:{default:[qt]},$$scope:{ctx:r}}}),{c(){e=T("form"),b&&b.c(),s=C(),t=T("label"),l=H(r[2]),o=C(),a=T("input"),n=C(),i=T("div"),M(f.$$.fragment),this.h()},l(m){e=y(m,"FORM",{class:!0});var _=F(e);b&&b.l(_),s=N(_),t=y(_,"LABEL",{for:!0,class:!0});var W=F(t);l=L(W,r[2]),W.forEach(c),o=N(_),a=y(_,"INPUT",{id:!0,type:!0,class:!0,name:!0,placeholder:!0,autocomplete:!0}),n=N(_),i=y(_,"DIV",{});var A=F(i);j(f.$$.fragment,A),A.forEach(c),_.forEach(c),this.h()},h(){k(t,"for",r[5]),k(t,"class","hidden"),k(a,"id",r[5]),k(a,"type","text"),k(a,"class","w-full rounded-l-lg px-4 focus:outline-none"),k(a,"name",r[3]),a.value=r[1],k(a,"placeholder",r[0]),k(a,"autocomplete","off"),k(e,"class","relative flex items-center rounded-lg border-2 transition-colors focus-within:border-blue-700")},m(m,_){g(m,e,_),b&&b.m(e,null),w(e,s),w(e,t),w(t,l),w(e,o),w(e,a),w(e,n),w(e,i),z(f,i,null),d=!0,p||(P=[B(a,"input",r[7]),B(e,"submit",ce(r[6]))],p=!0)},p(m,[_]){m[4]?b?_&16&&E(b,1):(b=ze(),b.c(),E(b,1),b.m(e,s)):b&&(fe(),I(b,1,1,()=>{b=null}),ue()),(!d||_&4)&&Z(l,m[2]),(!d||_&32)&&k(t,"for",m[5]),(!d||_&32)&&k(a,"id",m[5]),(!d||_&8)&&k(a,"name",m[3]),(!d||_&2&&a.value!==m[1])&&(a.value=m[1]),(!d||_&1)&&k(a,"placeholder",m[0]);const W={};_&260&&(W.$$scope={dirty:_,ctx:m}),f.$set(W)},i(m){d||(E(b),E(f.$$.fragment,m),d=!0)},o(m){I(b),I(f.$$.fragment,m),d=!1},d(m){m&&c(e),b&&b.d(),K(f),p=!1,Ke(P)}}}function Lt(r,e,s){let{placeholder:t=""}=e,{value:l=""}=e,{label:o="Search"}=e,{name:a="query"}=e,{icon:n=!1}=e,{id:i=`${o.toLocaleUpperCase()}-input`}=e;function f(p){Ae.call(this,r,p)}function d(p){Ae.call(this,r,p)}return r.$$set=p=>{"placeholder"in p&&s(0,t=p.placeholder),"value"in p&&s(1,l=p.value),"label"in p&&s(2,o=p.label),"name"in p&&s(3,a=p.name),"icon"in p&&s(4,n=p.icon),"id"in p&&s(5,i=p.id)},[t,l,o,a,n,i,f,d]}class el extends we{constructor(e){super(),ke(this,e,Lt,Ht,ie,{placeholder:0,value:1,label:2,name:3,icon:4,id:5})}}export{je as F,el as S,Zt as W,$t as a,vt as b,xt as j,Ft as t};
