import{S as be,i as ke,s as ie,x as $,y as z,z as M,f as E,t as D,C as V,J as Ke,K as Je,L as Xe,M as Ge,l as g,r as N,a as P,m as y,n as W,u as H,h as c,c as C,p as b,b as T,N as p,F as ve,e as He,g as fe,d as ue,O as Ve,U as B,V as Te,ak as ce,I as Ye,v as Y,H as je,X as Be}from"./index-681506b4.js";import{T as Ze,a as xe,b as et}from"./table-row-c8ed1c31.js";import{p as tt}from"./stores-6139b3d6.js";import{f as G}from"./format-date-c1755997.js";import{q as lt,s as st,u as rt,v as Ue}from"./format-time-d031c2bc.js";import{n as ot}from"./route-for-06e4a074.js";import{u as at}from"./pagination-9b2ffa0e.js";import{t as Ae}from"./workflow-service-5c016f96.js";import{c as nt,d as Ee,e as ft,f as ut,g as it}from"./is-44021919.js";import{W as ct}from"./workflow-status-ee1566ad.js";import{I as Se}from"./icon-f119ac4d.js";import{c as mt}from"./copy-to-clipboard-7b0b1626.js";import{B as _t}from"./button-16b13172.js";function dt(r){let e;const s=r[1].default,t=Ke(s,r,r[2],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&4)&&Je(t,s,l,l[2],e?Ge(s,l[2],a,null):Xe(l[2]),null)},i(l){e||(E(t,l),e=!0)},o(l){D(t,l),e=!1},d(l){t&&t.d(l)}}}function ht(r){let e,s,t,l,a,o,n,f,m,k,h,q,i,w,_,F,U;return{c(){e=g("th"),s=N("Status"),t=P(),l=g("th"),a=N("Workflow ID"),o=P(),n=g("th"),f=N("Type"),m=P(),k=g("th"),h=N("Start"),q=P(),i=g("th"),w=N("End"),_=P(),F=g("th"),U=N("Summary"),this.h()},l(d){e=y(d,"TH",{class:!0});var S=W(e);s=H(S,"Status"),S.forEach(c),t=C(d),l=y(d,"TH",{class:!0});var I=W(l);a=H(I,"Workflow ID"),I.forEach(c),o=C(d),n=y(d,"TH",{class:!0});var j=W(n);f=H(j,"Type"),j.forEach(c),m=C(d),k=y(d,"TH",{class:!0});var O=W(k);h=H(O,"Start"),O.forEach(c),q=C(d),i=y(d,"TH",{class:!0});var L=W(i);w=H(L,"End"),L.forEach(c),_=C(d),F=y(d,"TH",{class:!0,colspan:!0});var K=W(F);U=H(K,"Summary"),K.forEach(c),this.h()},h(){b(e,"class","hidden w-48 md:table-cell"),b(l,"class","hidden md:table-cell md:w-60 xl:w-auto"),b(n,"class","hidden md:table-cell md:w-60 xl:w-80"),b(k,"class","hidden xl:table-cell xl:w-60"),b(i,"class","hidden xl:table-cell xl:w-60"),b(F,"class","table-cell md:hidden"),b(F,"colspan","3")},m(d,S){T(d,e,S),p(e,s),T(d,t,S),T(d,l,S),p(l,a),T(d,o,S),T(d,n,S),p(n,f),T(d,m,S),T(d,k,S),p(k,h),T(d,q,S),T(d,i,S),p(i,w),T(d,_,S),T(d,F,S),p(F,U)},p:ve,d(d){d&&c(e),d&&c(t),d&&c(l),d&&c(o),d&&c(n),d&&c(m),d&&c(k),d&&c(q),d&&c(i),d&&c(_),d&&c(F)}}}function pt(r){let e,s;return e=new xe({props:{slot:"headers",$$slots:{default:[ht]},$$scope:{ctx:r}}}),{c(){$(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},p(t,l){const a={};l&4&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function wt(r){let e,s;return e=new Ze({props:{class:"w-full md:table-fixed",updating:r[0],$$slots:{headers:[pt],default:[dt]},$$scope:{ctx:r}}}),{c(){$(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},p(t,[l]){const a={};l&1&&(a.updating=t[0]),l&4&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function bt(r,e,s){let{$$slots:t={},$$scope:l}=e,{updating:a=!1}=e;return r.$$set=o=>{"updating"in o&&s(0,a=o.updating),"$$scope"in o&&s(2,l=o.$$scope)},[a,t,l]}class Jt extends be{constructor(e){super(),ke(this,e,bt,wt,ie,{updating:0})}}const kt=r=>{const e=[],s=()=>{t&&(e.push(t),t="")};let t="",l=0;for(;l<r.length;){const a=r[l];if(nt(a)){t+=a,s(),l++;continue}if(Ee(a)){const o=`${r[l]}${r[l+1]}`,n=`${r[l]}${r[l+1]}${r[l+2]}`;if(Ee(n)){s(),t+=n,l+=3;continue}else if(Ee(o)){s(),t+=o,l+=2;continue}else{s(),t+=a,l++;continue}}if(ft(a)||ut(a)){s(),l++;continue}t+=a,l++}return s(),e},ge=r=>e=>e.toLowerCase()===r.toLowerCase(),we=(r,e)=>r[e+2],vt=r=>{if(!!r){for(const e of rt)if(r[e])return{[e]:r[e]}}},Tt=ge("WorkflowType"),gt=ge("WorkflowId"),yt=ge("StartTime"),Et=ge("ExecutionStatus"),St=r=>{const e=kt(r),s={workflowId:"",workflowType:"",executionStatus:null,timeRange:null};return e.forEach((t,l)=>{if(gt(t)&&(s.workflowId=we(e,l)),Tt(t)&&(s.workflowType=we(e,l)),Et(t)){const a=we(e,l);it(a)&&(s.executionStatus=a)}if(yt(t)){const a=we(e,l);try{const o=lt(a),n=vt(o);s.timeRange=st(n)}catch(o){console.error("Error parsing StartTime from query",o)}}}),s};function Oe(r){let e,s,t,l,a,o=r[1]&&Re(r),n=r[2]&&$e(r);return{c(){e=g("div"),o&&o.c(),s=P(),n&&n.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var m=W(e);o&&o.l(m),s=C(m),n&&n.l(m),m.forEach(c),this.h()},h(){b(e,"class","copy-or-filter svelte-uzo6ow")},m(f,m){T(f,e,m),o&&o.m(e,null),p(e,s),n&&n.m(e,null),t=!0,l||(a=B(e,"click",Te(ce(ve))),l=!0)},p(f,m){f[1]?o?(o.p(f,m),m&2&&E(o,1)):(o=Re(f),o.c(),E(o,1),o.m(e,s)):o&&(fe(),D(o,1,1,()=>{o=null}),ue()),f[2]?n?(n.p(f,m),m&4&&E(n,1)):(n=$e(f),n.c(),E(n,1),n.m(e,null)):n&&(fe(),D(n,1,1,()=>{n=null}),ue())},i(f){t||(E(o),E(n),t=!0)},o(f){D(o),D(n),t=!1},d(f){f&&c(e),o&&o.d(),n&&n.d(),l=!1,a()}}}function Re(r){let e,s=r[5],t,l,a,o=Qe(r);return{c(){e=g("button"),o.c()},l(n){e=y(n,"BUTTON",{});var f=W(e);o.l(f),f.forEach(c)},m(n,f){T(n,e,f),o.m(e,null),t=!0,l||(a=B(e,"click",Te(ce(function(){Ye(r[4])&&r[4].apply(this,arguments)}))),l=!0)},p(n,f){r=n,f&32&&ie(s,s=r[5])?(fe(),D(o,1,1,ve),ue(),o=Qe(r),o.c(),E(o,1),o.m(e,null)):o.p(r,f)},i(n){t||(E(o),t=!0)},o(n){D(o),t=!1},d(n){n&&c(e),o.d(n),l=!1,a()}}}function Qe(r){let e,s;return e=new Se({props:{name:"filter",class:"h-4 w-4 rounded-sm "+(r[5]?"bg-gray-900 text-white":"")}}),{c(){$(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},p(t,l){const a={};l&32&&(a.class="h-4 w-4 rounded-sm "+(t[5]?"bg-gray-900 text-white":"")),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function $e(r){let e,s,t,l,a;return s=new Se({props:{name:r[6]?"checkmark":"copy",stroke:"#000"}}),{c(){e=g("button"),$(s.$$.fragment)},l(o){e=y(o,"BUTTON",{});var n=W(e);z(s.$$.fragment,n),n.forEach(c)},m(o,n){T(o,e,n),M(s,e,null),t=!0,l||(a=B(e,"click",Te(ce(r[9]))),l=!0)},p(o,n){const f={};n&64&&(f.name=o[6]?"checkmark":"copy"),s.$set(f)},i(o){t||(E(s.$$.fragment,o),t=!0)},o(o){D(s.$$.fragment,o),t=!1},d(o){o&&c(e),V(s),l=!1,a()}}}function Wt(r){let e,s,t=r[0]&&Oe(r);return{c(){t&&t.c(),e=He()},l(l){t&&t.l(l),e=He()},m(l,a){t&&t.m(l,a),T(l,e,a),s=!0},p(l,[a]){l[0]?t?(t.p(l,a),a&1&&E(t,1)):(t=Oe(l),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(fe(),D(t,1,1,()=>{t=null}),ue())},i(l){s||(E(t),s=!0)},o(l){D(t),s=!1},d(l){t&&t.d(l),l&&c(e)}}}function Ft(r,e,s){let t,{show:l=!1}=e,{filterable:a=!0}=e,{copyable:o=!0}=e,{content:n}=e,{onFilter:f=ve}=e,{filtered:m=!1}=e;const{copy:k,copied:h}=mt(700);Ve(r,h,i=>s(6,t=i));const q=i=>k(i,n);return r.$$set=i=>{"show"in i&&s(0,l=i.show),"filterable"in i&&s(1,a=i.filterable),"copyable"in i&&s(2,o=i.copyable),"content"in i&&s(3,n=i.content),"onFilter"in i&&s(4,f=i.onFilter),"filtered"in i&&s(5,m=i.filtered)},[l,a,o,n,f,m,t,k,h,q]}class ze extends be{constructor(e){super(),ke(this,e,Ft,Wt,ie,{show:0,filterable:1,copyable:2,content:3,onFilter:4,filtered:5})}}function Dt(r){var Fe,De,Ie;let e,s,t,l,a,o=r[0].id+"",n,f,m,k,h,q=G(r[0].startTime,r[1])+"",i,w,_,F,U,d,S,I=r[0].name+"",j,O,L,K,J,te=G(r[0].endTime,r[1])+"",me,_e,Z,le,se=G(r[0].startTime,r[1])+"",de,he,x,re,oe=G(r[0].endTime,r[1])+"",pe,R,ye,We;return s=new ct({props:{status:r[0].status,delay:Ue(r[0].startTime)}}),m=new ze({props:{show:r[2],content:r[0].id,filterable:!1}}),L=new ze({props:{show:r[2],content:r[0].name,onFilter:r[12],filtered:(Ie=(De=(Fe=r[4].url)==null?void 0:Fe.searchParams)==null?void 0:De.get("query"))==null?void 0:Ie.includes(r[0].name)}}),{c(){e=g("td"),$(s.$$.fragment),t=P(),l=g("td"),a=g("span"),n=N(o),f=P(),$(m.$$.fragment),k=P(),h=g("p"),i=N(q),w=P(),_=g("td"),F=g("h3"),U=N("Workflow Name:"),d=P(),S=g("span"),j=N(I),O=P(),$(L.$$.fragment),K=P(),J=g("p"),me=N(te),_e=P(),Z=g("td"),le=g("p"),de=N(se),he=P(),x=g("td"),re=g("p"),pe=N(oe),this.h()},l(u){e=y(u,"TD",{});var v=W(e);z(s.$$.fragment,v),v.forEach(c),t=C(u),l=y(u,"TD",{class:!0});var Q=W(l);a=y(Q,"SPAN",{class:!0});var ee=W(a);n=H(ee,o),ee.forEach(c),f=C(Q),z(m.$$.fragment,Q),k=C(Q),h=y(Q,"P",{class:!0});var X=W(h);i=H(X,q),X.forEach(c),Q.forEach(c),w=C(u),_=y(u,"TD",{class:!0});var A=W(_);F=y(A,"H3",{class:!0});var ae=W(F);U=H(ae,"Workflow Name:"),ae.forEach(c),d=C(A),S=y(A,"SPAN",{class:!0});var ne=W(S);j=H(ne,I),ne.forEach(c),O=C(A),z(L.$$.fragment,A),K=C(A),J=y(A,"P",{class:!0});var Pe=W(J);me=H(Pe,te),Pe.forEach(c),A.forEach(c),_e=C(u),Z=y(u,"TD",{class:!0});var Ce=W(Z);le=y(Ce,"P",{});var qe=W(le);de=H(qe,se),qe.forEach(c),Ce.forEach(c),he=C(u),x=y(u,"TD",{class:!0});var Le=W(x);re=y(Le,"P",{});var Ne=W(re);pe=H(Ne,oe),Ne.forEach(c),Le.forEach(c),this.h()},h(){b(a,"class","table-link svelte-si1lto"),b(h,"class","inline-time-cell svelte-si1lto"),b(l,"class","relative truncate"),b(F,"class","md:hidden"),b(S,"class","table-link svelte-si1lto"),b(J,"class","inline-time-cell svelte-si1lto"),b(_,"class","relative truncate"),b(Z,"class","time-cell svelte-si1lto"),b(x,"class","time-cell svelte-si1lto")},m(u,v){T(u,e,v),M(s,e,null),T(u,t,v),T(u,l,v),p(l,a),p(a,n),p(l,f),M(m,l,null),p(l,k),p(l,h),p(h,i),T(u,w,v),T(u,_,v),p(_,F),p(F,U),p(_,d),p(_,S),p(S,j),p(_,O),M(L,_,null),p(_,K),p(_,J),p(J,me),T(u,_e,v),T(u,Z,v),p(Z,le),p(le,de),T(u,he,v),T(u,x,v),p(x,re),p(re,pe),R=!0,ye||(We=[B(l,"mouseover",r[7]),B(l,"focus",r[8]),B(l,"mouseleave",r[9]),B(l,"blur",r[10]),B(S,"click",Te(ce(r[11]))),B(_,"mouseover",r[13]),B(_,"focus",r[14]),B(_,"mouseleave",r[15]),B(_,"blur",r[16])],ye=!0)},p(u,v){var A,ae,ne;const Q={};v&1&&(Q.status=u[0].status),v&1&&(Q.delay=Ue(u[0].startTime)),s.$set(Q),(!R||v&1)&&o!==(o=u[0].id+"")&&Y(n,o);const ee={};v&4&&(ee.show=u[2]),v&1&&(ee.content=u[0].id),m.$set(ee),(!R||v&3)&&q!==(q=G(u[0].startTime,u[1])+"")&&Y(i,q),(!R||v&1)&&I!==(I=u[0].name+"")&&Y(j,I);const X={};v&4&&(X.show=u[2]),v&1&&(X.content=u[0].name),v&1&&(X.onFilter=u[12]),v&17&&(X.filtered=(ne=(ae=(A=u[4].url)==null?void 0:A.searchParams)==null?void 0:ae.get("query"))==null?void 0:ne.includes(u[0].name)),L.$set(X),(!R||v&3)&&te!==(te=G(u[0].endTime,u[1])+"")&&Y(me,te),(!R||v&3)&&se!==(se=G(u[0].startTime,u[1])+"")&&Y(de,se),(!R||v&3)&&oe!==(oe=G(u[0].endTime,u[1])+"")&&Y(pe,oe)},i(u){R||(E(s.$$.fragment,u),E(m.$$.fragment,u),E(L.$$.fragment,u),R=!0)},o(u){D(s.$$.fragment,u),D(m.$$.fragment,u),D(L.$$.fragment,u),R=!1},d(u){u&&c(e),V(s),u&&c(t),u&&c(l),V(m),u&&c(w),u&&c(_),V(L),u&&c(_e),u&&c(Z),u&&c(he),u&&c(x),ye=!1,je(We)}}}function It(r){let e,s;return e=new et({props:{href:r[3],class:"workflow-summary-row",$$slots:{default:[Dt]},$$scope:{ctx:r}}}),{c(){$(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},p(t,[l]){const a={};l&8&&(a.href=t[3]),l&131095&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function Pt(r,e,s){let t,l;Ve(r,tt,I=>s(4,l=I));let{namespace:a}=e,{workflow:o}=e,{timeFormat:n}=e,f=!1;const m=I=>{const j=Ae({timeRange:"All"}),O=l.url.searchParams.get("query"),L=St(O!=null?O:j),K=(L==null?void 0:L.workflowType)===I?"":I,J=Ae({...L,workflowType:K});at({url:l.url,parameter:"query",value:J,allowEmpty:!0})},k=()=>s(2,f=!0),h=()=>s(2,f=!0),q=()=>s(2,f=!1),i=()=>s(2,f=!1),w=()=>m(o.name),_=()=>m(o.name),F=()=>s(2,f=!0),U=()=>s(2,f=!0),d=()=>s(2,f=!1),S=()=>s(2,f=!1);return r.$$set=I=>{"namespace"in I&&s(6,a=I.namespace),"workflow"in I&&s(0,o=I.workflow),"timeFormat"in I&&s(1,n=I.timeFormat)},r.$$.update=()=>{r.$$.dirty&65&&s(3,t=ot({namespace:a,workflow:o.id,run:o.runId}))},[o,n,f,t,l,m,a,k,h,q,i,w,_,F,U,d,S]}class Xt extends be{constructor(e){super(),ke(this,e,Pt,It,ie,{namespace:6,workflow:0,timeFormat:1})}}var Gt=Ct;function Ct(r,e,s,t){var l,a,o;return function(){if(o=this,a=Array.prototype.slice.call(arguments),l&&(s||t))return;if(!s)return m(),l=setTimeout(f,e),l;l=setTimeout(m,e),r.apply(o,a);function f(){m(),r.apply(o,a)}function m(){clearTimeout(l),l=null}}}function Me(r){let e,s;return e=new Se({props:{name:"search",class:"ml-4 flex items-center text-gray-700"}}),{c(){$(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function qt(r){let e;return{c(){e=N(r[2])},l(s){e=H(s,r[2])},m(s,t){T(s,e,t)},p(s,t){t&4&&Y(e,s[2])},d(s){s&&c(e)}}}function Lt(r){let e,s,t,l,a,o,n,f,m,k,h,q,i=r[4]&&Me();return m=new _t({props:{class:"m-2",type:"submit",$$slots:{default:[qt]},$$scope:{ctx:r}}}),{c(){e=g("form"),i&&i.c(),s=P(),t=g("label"),l=N(r[2]),a=P(),o=g("input"),n=P(),f=g("div"),$(m.$$.fragment),this.h()},l(w){e=y(w,"FORM",{class:!0});var _=W(e);i&&i.l(_),s=C(_),t=y(_,"LABEL",{for:!0,class:!0});var F=W(t);l=H(F,r[2]),F.forEach(c),a=C(_),o=y(_,"INPUT",{id:!0,type:!0,class:!0,name:!0,placeholder:!0,autocomplete:!0}),n=C(_),f=y(_,"DIV",{});var U=W(f);z(m.$$.fragment,U),U.forEach(c),_.forEach(c),this.h()},h(){b(t,"for",r[5]),b(t,"class","hidden"),b(o,"id",r[5]),b(o,"type","text"),b(o,"class","w-full rounded-l-lg px-4 focus:outline-none"),b(o,"name",r[3]),o.value=r[1],b(o,"placeholder",r[0]),b(o,"autocomplete","off"),b(e,"class","relative flex items-center rounded-lg border-2 transition-colors focus-within:border-blue-700")},m(w,_){T(w,e,_),i&&i.m(e,null),p(e,s),p(e,t),p(t,l),p(e,a),p(e,o),p(e,n),p(e,f),M(m,f,null),k=!0,h||(q=[B(o,"input",r[7]),B(e,"submit",ce(r[6]))],h=!0)},p(w,[_]){w[4]?i?_&16&&E(i,1):(i=Me(),i.c(),E(i,1),i.m(e,s)):i&&(fe(),D(i,1,1,()=>{i=null}),ue()),(!k||_&4)&&Y(l,w[2]),(!k||_&32)&&b(t,"for",w[5]),(!k||_&32)&&b(o,"id",w[5]),(!k||_&8)&&b(o,"name",w[3]),(!k||_&2&&o.value!==w[1])&&(o.value=w[1]),(!k||_&1)&&b(o,"placeholder",w[0]);const F={};_&260&&(F.$$scope={dirty:_,ctx:w}),m.$set(F)},i(w){k||(E(i),E(m.$$.fragment,w),k=!0)},o(w){D(i),D(m.$$.fragment,w),k=!1},d(w){w&&c(e),i&&i.d(),V(m),h=!1,je(q)}}}function Nt(r,e,s){let{placeholder:t=""}=e,{value:l=""}=e,{label:a="Search"}=e,{name:o="query"}=e,{icon:n=!1}=e,{id:f=`${a.toLocaleUpperCase()}-input`}=e;function m(h){Be.call(this,r,h)}function k(h){Be.call(this,r,h)}return r.$$set=h=>{"placeholder"in h&&s(0,t=h.placeholder),"value"in h&&s(1,l=h.value),"label"in h&&s(2,a=h.label),"name"in h&&s(3,o=h.name),"icon"in h&&s(4,n=h.icon),"id"in h&&s(5,f=h.id)},[t,l,a,o,n,f,m,k]}class Yt extends be{constructor(e){super(),ke(this,e,Nt,Lt,ie,{placeholder:0,value:1,label:2,name:3,icon:4,id:5})}}export{Yt as S,Jt as W,Xt as a,Gt as j,St as t};
