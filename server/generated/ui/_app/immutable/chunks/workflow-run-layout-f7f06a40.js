import{S as ie,i as ce,s as ue,x as T,a as M,e as Pe,y,c as R,z as W,b as P,f as _,g as se,t as g,d as oe,C as A,h as d,O as F,l as $,r as Q,m as v,n as I,u as U,p as w,N as p,F as fe,a0 as lt,a8 as st,a9 as ot,a4 as K,E as ft,W as Se,H as it,T as ct,I as ut,v as Ke,an as mt,D as Me,R as Re,J as Ye,K as Ge,L as Xe,M as Ze,o as xe,ar as et,ag as ht,ak as qe}from"./index-0b369c75.js";import{p as tt}from"./stores-5674b937.js";import{r as ae,b as dt,w as nt,t as Fe}from"./events-3faf7923.js";import{l as _t}from"./previous-events-a7f0213c.js";import{I as at}from"./icon-7d330c0b.js";import{f as He}from"./index-8a8c6b93.js";import{g as we,b as Ve}from"./event-view-8263e942.js";import{w as gt,a as pt}from"./workflows-7e842837.js";import{h as he,q as de,o as _e,s as ge,u as pe,v as Le}from"./route-for-8f480fc8.js";import{w as wt,d as kt,e as bt,t as $t}from"./workflow-service-bc8932bd.js";import{W as vt}from"./workflow-status-06c001e2.js";import{s as Et}from"./settings-be4fa165.js";import{M as Be}from"./modal-58682d62.js";import{c as It}from"./core-user-a1ba6fc9.js";import{T as rt}from"./tooltip-d45064b8.js";import{S as Tt}from"./split-button-83dcdc9b.js";import{M as yt}from"./menu-item-7d491ac7.js";import{t as $e}from"./toaster-18495b6a.js";import{I as Wt}from"./input-e1d72b9e.js";import{F as At}from"./feature-guard-dd07df03.js";import{B as Ct}from"./button-ca5c6c86.js";import{T as me}from"./tab-5fcbe899.js";import{L as Dt}from"./loading-54a8cebb.js";function Pt(r){let e;return{c(){e=Q("Terminate")},l(t){e=U(t,"Terminate")},m(t,n){P(t,e,n)},d(t){t&&d(e)}}}function St(r){let e,t;return e=new yt({props:{destructive:!0,disabled:r[6],dataCy:"terminate-button",$$slots:{default:[Pt]},$$scope:{ctx:r}}}),e.$on("click",r[7]),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){const a={};l&64&&(a.disabled=n[6]),l&2097152&&(a.$$scope={dirty:l,ctx:n}),e.$set(a)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Mt(r){let e,t;return e=new Tt({props:{primaryActionDisabled:r[0],disabled:r[6],label:"Request Cancellation",id:"workflow-actions",$$slots:{default:[St]},$$scope:{ctx:r}}}),e.$on("click",r[9]),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){const a={};l&1&&(a.primaryActionDisabled=n[0]),l&64&&(a.disabled=n[6]),l&2097216&&(a.$$scope={dirty:l,ctx:n}),e.$set(a)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Rt(r){let e;return{c(){e=Q("Terminate")},l(t){e=U(t,"Terminate")},m(t,n){P(t,e,n)},d(t){t&&d(e)}}}function qt(r){let e,t;return e=new Ct({props:{slot:"fallback",variant:"destructive",disabled:r[6],dataCy:"terminate-button",$$slots:{default:[Rt]},$$scope:{ctx:r}}}),e.$on("click",r[7]),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){const a={};l&64&&(a.disabled=n[6]),l&2097152&&(a.$$scope={dirty:l,ctx:n}),e.$set(a)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ft(r){let e,t;return e=new At({props:{enabled:r[1],$$slots:{fallback:[qt],default:[Mt]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){const a={};l&2&&(a.enabled=n[1]),l&2097217&&(a.$$scope={dirty:l,ctx:n}),e.$set(a)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ne(r){let e,t,n,l;return e=new Be({props:{open:r[4],loading:r[5],confirmType:"destructive",$$slots:{content:[Vt],title:[Ht]},$$scope:{ctx:r}}}),e.$on("cancelModal",r[10]),e.$on("confirmModal",r[12]),n=new Be({props:{open:r[3],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[Bt],title:[Lt]},$$scope:{ctx:r}}}),n.$on("cancelModal",r[8]),n.$on("confirmModal",r[11]),{c(){T(e.$$.fragment),t=M(),T(n.$$.fragment)},l(a){y(e.$$.fragment,a),t=R(a),y(n.$$.fragment,a)},m(a,s){W(e,a,s),P(a,t,s),W(n,a,s),l=!0},p(a,s){const o={};s&16&&(o.open=a[4]),s&32&&(o.loading=a[5]),s&2097152&&(o.$$scope={dirty:s,ctx:a}),e.$set(o);const f={};s&8&&(f.open=a[3]),s&2097156&&(f.$$scope={dirty:s,ctx:a}),n.$set(f)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){A(e,a),a&&d(t),A(n,a)}}}function Ht(r){let e,t;return{c(){e=$("h3"),t=Q("Cancel Workflow"),this.h()},l(n){e=v(n,"H3",{slot:!0});var l=I(e);t=U(l,"Cancel Workflow"),l.forEach(d),this.h()},h(){w(e,"slot","title")},m(n,l){P(n,e,l),p(e,t)},p:fe,d(n){n&&d(e)}}}function Vt(r){let e,t;return{c(){e=$("p"),t=Q(`Are you sure you want to cancel this workflow? This action cannot be
        undone.`)},l(n){e=v(n,"P",{});var l=I(e);t=U(l,`Are you sure you want to cancel this workflow? This action cannot be
        undone.`),l.forEach(d)},m(n,l){P(n,e,l),p(e,t)},p:fe,d(n){n&&d(e)}}}function Lt(r){let e,t;return{c(){e=$("h3"),t=Q("Terminate Workflow"),this.h()},l(n){e=v(n,"H3",{slot:!0});var l=I(e);t=U(l,"Terminate Workflow"),l.forEach(d),this.h()},h(){w(e,"slot","title")},m(n,l){P(n,e,l),p(e,t)},p:fe,d(n){n&&d(e)}}}function Bt(r){let e,t,n,l,a,s,o;function f(u){r[17](u)}let i={id:"workflow-termination-reason",class:"mt-4",placeholder:"Enter a reason"};return r[2]!==void 0&&(i.value=r[2]),a=new Wt({props:i}),lt.push(()=>st(a,"value",f)),{c(){e=$("div"),t=$("p"),n=Q(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),l=M(),T(a.$$.fragment),this.h()},l(u){e=v(u,"DIV",{slot:!0});var c=I(e);t=v(c,"P",{});var k=I(t);n=U(k,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),k.forEach(d),l=R(c),y(a.$$.fragment,c),c.forEach(d),this.h()},h(){w(e,"slot","content")},m(u,c){P(u,e,c),p(e,t),p(t,n),p(e,l),W(a,e,null),o=!0},p(u,c){const k={};!s&&c&4&&(s=!0,k.value=u[2],ot(()=>s=!1)),a.$set(k)},i(u){o||(_(a.$$.fragment,u),o=!0)},o(u){g(a.$$.fragment,u),o=!1},d(u){u&&d(e),A(a)}}}function Nt(r){let e,t,n,l;e=new rt({props:{bottomLeft:!0,hide:!r[6],width:200,text:"You do not have permission to edit this workflow. Contact your admin for assistance.",$$slots:{default:[Ft]},$$scope:{ctx:r}}});let a=!r[6]&&Ne(r);return{c(){T(e.$$.fragment),t=M(),a&&a.c(),n=Pe()},l(s){y(e.$$.fragment,s),t=R(s),a&&a.l(s),n=Pe()},m(s,o){W(e,s,o),P(s,t,o),a&&a.m(s,o),P(s,n,o),l=!0},p(s,[o]){const f={};o&64&&(f.hide=!s[6]),o&2097219&&(f.$$scope={dirty:o,ctx:s}),e.$set(f),s[6]?a&&(se(),g(a,1,1,()=>{a=null}),oe()):a?(a.p(s,o),o&64&&_(a,1)):(a=Ne(s),a.c(),_(a,1),a.m(n.parentNode,n))},i(s){l||(_(e.$$.fragment,s),_(a),l=!0)},o(s){g(e.$$.fragment,s),g(a),l=!1},d(s){A(e,s),s&&d(t),a&&a.d(s),s&&d(n)}}}function Qt(r,e,t){let n,l,a;F(r,ae,h=>t(18,a=h));let{workflow:s}=e,{namespace:o}=e,{cancelInProgress:f}=e,{cancelEnabled:i}=e,u="",c=!1,k=!1,C=!1;const q=()=>t(3,c=!0),j=()=>t(3,c=!1),H=()=>t(4,k=!0),Y=()=>t(4,k=!1),z=async()=>{t(3,c=!1),t(2,u=""),K(ae,a=Date.now(),a),await ft(),$e.push({id:"workflow-termination-success-toast",message:"Workflow terminated.",variant:"success",yPosition:"top"})},b=()=>{t(3,c=!1),t(2,u=""),$e.push({message:"Cannot terminate workflow.",variant:"error"})},B=()=>{!s.canBeTerminated||kt({workflow:s,namespace:o,reason:u}).then(z).catch(b)},ee=async()=>{t(5,C=!0);try{await bt({namespace:o,workflowId:s.id,runId:s.runId}),t(5,C=!1),t(4,k=!1),K(ae,a=Date.now(),a)}catch{$e.push({yPosition:"top",variant:"error",message:"Unable to cancel workflow."})}};let V=It();F(r,V,h=>t(16,l=h));function te(h){u=h,t(2,u)}return r.$$set=h=>{"workflow"in h&&t(14,s=h.workflow),"namespace"in h&&t(15,o=h.namespace),"cancelInProgress"in h&&t(0,f=h.cancelInProgress),"cancelEnabled"in h&&t(1,i=h.cancelEnabled)},r.$$.update=()=>{r.$$.dirty&98304&&t(6,n=l.namespaceWriteDisabled(o)||!wt(Et))},[f,i,u,c,k,C,n,q,j,H,Y,B,ee,V,s,o,l,te]}class Ut extends ie{constructor(e){super(),ce(this,e,Qt,Nt,ue,{workflow:14,namespace:15,cancelInProgress:0,cancelEnabled:1})}}const Qe=r=>{const e=r==null?void 0:r.indexOf("?");return e>-1?r.slice(0,e):r},O=(r,e,t=!1)=>{const n=Qe(r).split("/"),l=Qe(e).split("/");if(t&&n.length!==l.length)return!1;for(let a=0;a<n.length;a++){const s=n[a],o=l[a];if(s!==o)return!1}return!0};function jt(r){let e,t,n,l,a,s;return{c(){e=$("label"),t=$("input"),n=M(),l=$("span"),this.h()},l(o){e=v(o,"LABEL",{for:!0,class:!0});var f=I(e);t=v(f,"INPUT",{id:!0,type:!0,class:!0}),n=R(f),l=v(f,"SPAN",{class:!0}),I(l).forEach(d),f.forEach(d),this.h()},h(){w(t,"id",r[1]),w(t,"type","checkbox"),w(t,"class","hidden svelte-1s95c4s"),w(l,"class","slider svelte-1s95c4s"),w(e,"for",r[1]),w(e,"class","switch svelte-1s95c4s")},m(o,f){P(o,e,f),p(e,t),t.checked=r[0],p(e,n),p(e,l),a||(s=[Se(t,"change",r[2]),Se(t,"change",r[3])],a=!0)},p(o,[f]){f&2&&w(t,"id",o[1]),f&1&&(t.checked=o[0]),f&2&&w(e,"for",o[1])},i:fe,o:fe,d(o){o&&d(e),a=!1,it(s)}}}function Ot(r,e,t){let{checked:n=!1}=e,{id:l}=e;function a(o){ct.call(this,r,o)}function s(){n=this.checked,t(0,n)}return r.$$set=o=>{"checked"in o&&t(0,n=o.checked),"id"in o&&t(1,l=o.id)},[n,l,a,s]}class zt extends ie{constructor(e){super(),ce(this,e,Ot,jt,ue,{checked:0,id:1})}}function Jt(r){let e,t;return e=new zt({props:{id:"autorefresh",checked:r[1]}}),e.$on("change",function(){ut(r[0])&&r[0].apply(this,arguments)}),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p(n,l){r=n;const a={};l&2&&(a.checked=r[1]),e.$set(a)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Kt(r){let e,t,n,l;return n=new rt({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[Jt]},$$scope:{ctx:r}}}),{c(){e=$("label"),t=Q(`Auto refresh
  `),T(n.$$.fragment),this.h()},l(a){e=v(a,"LABEL",{for:!0,class:!0});var s=I(e);t=U(s,`Auto refresh
  `),y(n.$$.fragment,s),s.forEach(d),this.h()},h(){w(e,"for","autorefresh"),w(e,"class","flex items-center gap-4 font-secondary text-sm")},m(a,s){P(a,e,s),p(e,t),W(n,e,null),l=!0},p(a,[s]){const o={};s&11&&(o.$$scope={dirty:s,ctx:a}),n.$set(o)},i(a){l||(_(n.$$.fragment,a),l=!0)},o(a){g(n.$$.fragment,a),l=!1},d(a){a&&d(e),A(n)}}}function Yt(r,e,t){let n,l;F(r,we,s=>t(2,l=s));let{onChange:a}=e;return r.$$set=s=>{"onChange"in s&&t(0,a=s.onChange)},r.$$.update=()=>{r.$$.dirty&4&&t(1,n=l==="on")},[a,n,l]}class Gt extends ie{constructor(e){super(),ce(this,e,Yt,Kt,ue,{onChange:0})}}function Ue(r){let e,t,n;return t=new at({props:{name:r[2]}}),{c(){e=$("div"),T(t.$$.fragment)},l(l){e=v(l,"DIV",{});var a=I(e);y(t.$$.fragment,a),a.forEach(d)},m(l,a){P(l,e,a),W(t,e,null),n=!0},p(l,a){const s={};a&4&&(s.name=l[2]),t.$set(s)},i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),n=!1},d(l){l&&d(e),A(t)}}}function je(r){let e,t;const n=r[6].default,l=Ye(n,r,r[5],null);return{c(){e=$("div"),l&&l.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var s=I(e);l&&l.l(s),s.forEach(d),this.h()},h(){w(e,"class","content svelte-72m7xy")},m(a,s){P(a,e,s),l&&l.m(e,null),t=!0},p(a,s){l&&l.p&&(!t||s&32)&&Ge(l,n,a,a[5],t?Ze(n,a[5],s,null):Xe(a[5]),null)},i(a){t||(_(l,a),t=!0)},o(a){g(l,a),t=!1},d(a){a&&d(e),l&&l.d(a)}}}function Xt(r){let e,t,n,l,a,s,o,f,i=r[2]&&Ue(r),u=r[4].default&&je(r);return{c(){e=$("div"),i&&i.c(),t=M(),n=$("div"),l=$("h5"),a=Q(r[1]),s=M(),u&&u.c(),this.h()},l(c){e=v(c,"DIV",{class:!0});var k=I(e);i&&i.l(k),t=R(k),n=v(k,"DIV",{class:!0});var C=I(n);l=v(C,"H5",{class:!0});var q=I(l);a=U(q,r[1]),q.forEach(d),s=R(C),u&&u.l(C),C.forEach(d),k.forEach(d),this.h()},h(){w(l,"class","font-semibold leading-6"),w(n,"class","ml-1"),w(e,"class",o="alert "+r[0]+" "+r[3].class+" svelte-72m7xy")},m(c,k){P(c,e,k),i&&i.m(e,null),p(e,t),p(e,n),p(n,l),p(l,a),p(n,s),u&&u.m(n,null),f=!0},p(c,[k]){c[2]?i?(i.p(c,k),k&4&&_(i,1)):(i=Ue(c),i.c(),_(i,1),i.m(e,t)):i&&(se(),g(i,1,1,()=>{i=null}),oe()),(!f||k&2)&&Ke(a,c[1]),c[4].default?u?(u.p(c,k),k&16&&_(u,1)):(u=je(c),u.c(),_(u,1),u.m(n,null)):u&&(se(),g(u,1,1,()=>{u=null}),oe()),(!f||k&9&&o!==(o="alert "+c[0]+" "+c[3].class+" svelte-72m7xy"))&&w(e,"class",o)},i(c){f||(_(i),_(u),f=!0)},o(c){g(i),g(u),f=!1},d(c){c&&d(e),i&&i.d(),u&&u.d()}}}function Zt(r,e,t){let{$$slots:n={},$$scope:l}=e;const a=mt(n);let{intent:s}=e,{title:o}=e,{icon:f=null}=e;return r.$$set=i=>{t(3,e=Me(Me({},e),Re(i))),"intent"in i&&t(0,s=i.intent),"title"in i&&t(1,o=i.title),"icon"in i&&t(2,f=i.icon),"$$scope"in i&&t(5,l=i.$$scope)},e=Re(e),[s,o,f,e,a,l,n]}class xt extends ie{constructor(e){super(),ce(this,e,Zt,Xt,ue,{intent:0,title:1,icon:2})}}function Oe(r){let e,t,n,l,a;return t=new Gt({props:{onChange:r[11]}}),l=new Ut({props:{cancelEnabled:r[3],cancelInProgress:r[5],workflow:r[1],namespace:r[0]}}),{c(){e=$("div"),T(t.$$.fragment),n=M(),T(l.$$.fragment),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=I(e);y(t.$$.fragment,o),n=R(o),y(l.$$.fragment,o),o.forEach(d),this.h()},h(){w(e,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end")},m(s,o){P(s,e,o),W(t,e,null),p(e,n),W(l,e,null),a=!0},p(s,o){const f={};o&8&&(f.cancelEnabled=s[3]),o&32&&(f.cancelInProgress=s[5]),o&2&&(f.workflow=s[1]),o&1&&(f.namespace=s[0]),l.$set(f)},i(s){a||(_(t.$$.fragment,s),_(l.$$.fragment,s),a=!0)},o(s){g(t.$$.fragment,s),g(l.$$.fragment,s),a=!1},d(s){s&&d(e),A(t),A(l)}}}function ze(r){let e,t,n,l;return t=new xt({props:{icon:"info",intent:"info",title:"Cancel Request Sent",$$slots:{default:[en]},$$scope:{ctx:r}}}),{c(){e=$("div"),T(t.$$.fragment),this.h()},l(a){e=v(a,"DIV",{class:!0});var s=I(e);y(t.$$.fragment,s),s.forEach(d),this.h()},h(){w(e,"class","-mt-4 mb-4")},m(a,s){P(a,e,s),W(t,e,null),l=!0},i(a){l||(_(t.$$.fragment,a),ht(()=>{n||(n=qe(e,He,{duration:200,delay:100},!0)),n.run(1)}),l=!0)},o(a){g(t.$$.fragment,a),n||(n=qe(e,He,{duration:200,delay:100},!1)),n.run(0),l=!1},d(a){a&&d(e),A(t),a&&n&&n.end()}}}function en(r){let e;return{c(){e=Q(`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},l(t){e=U(t,`The request to cancel this Workflow Execution has been sent. If the
          Workflow uses the cancellation API, it'll cancel at the next available
          opportunity.`)},m(t,n){P(t,e,n)},d(t){t&&d(e)}}}function tn(r){var ve,Ee,Ie,Te,ye;let e,t,n,l,a,s,o,f,i,u,c,k,C,q=r[1].id+"",j,H,Y,z,b,B,ee,V,te,h,ke,G,be,X,re;a=new at({props:{name:"chevron-left",class:"inline"}}),c=new vt({props:{status:(ve=r[1])==null?void 0:ve.status}});let D=r[4]&&Oe(r),S=r[5]&&ze(r);return B=new me({props:{label:"History",href:he({...r[6]}),amount:(Ee=r[1])==null?void 0:Ee.historyEvents,dataCy:"history-tab",active:O(r[8].url.pathname,he({...r[6]}))}}),V=new me({props:{label:"Workers",href:de(r[6]),amount:(Te=(Ie=r[2])==null?void 0:Ie.pollers)==null?void 0:Te.length,dataCy:"workers-tab",active:O(r[8].url.pathname,de(r[6]))}}),h=new me({props:{label:"Pending Activities",href:_e(r[6]),amount:(ye=r[1].pendingActivities)==null?void 0:ye.length,dataCy:"pending-activities-tab",active:O(r[8].url.pathname,_e(r[6]))}}),G=new me({props:{label:"Stack Trace",href:ge(r[6]),dataCy:"stack-trace-tab",active:O(r[8].url.pathname,ge(r[6]))}}),X=new me({props:{label:"Queries",href:pe(r[6]),dataCy:"queries-tab",active:O(r[8].url.pathname,pe(r[6]))}}),{c(){e=$("header"),t=$("main"),n=$("div"),l=$("a"),T(a.$$.fragment),s=Q("Back to Workflows"),f=M(),i=$("div"),u=$("div"),T(c.$$.fragment),k=M(),C=$("h1"),j=Q(q),H=M(),D&&D.c(),Y=M(),S&&S.c(),z=M(),b=$("nav"),T(B.$$.fragment),ee=M(),T(V.$$.fragment),te=M(),T(h.$$.fragment),ke=M(),T(G.$$.fragment),be=M(),T(X.$$.fragment),this.h()},l(m){e=v(m,"HEADER",{class:!0});var E=I(e);t=v(E,"MAIN",{class:!0});var N=I(t);n=v(N,"DIV",{class:!0});var ne=I(n);l=v(ne,"A",{href:!0,"data-cy":!0,class:!0});var Z=I(l);y(a.$$.fragment,Z),s=U(Z,"Back to Workflows"),Z.forEach(d),ne.forEach(d),f=R(N),i=v(N,"DIV",{class:!0});var J=I(i);u=v(J,"DIV",{class:!0});var x=I(u);y(c.$$.fragment,x),k=R(x),C=v(x,"H1",{"data-cy":!0,class:!0});var le=I(C);j=U(le,q),le.forEach(d),x.forEach(d),H=R(J),D&&D.l(J),J.forEach(d),Y=R(N),S&&S.l(N),z=R(N),b=v(N,"NAV",{class:!0});var L=I(b);y(B.$$.fragment,L),ee=R(L),y(V.$$.fragment,L),te=R(L),y(h.$$.fragment,L),ke=R(L),y(G.$$.fragment,L),be=R(L),y(X.$$.fragment,L),L.forEach(d),N.forEach(d),E.forEach(d),this.h()},h(){w(l,"href",o=Le({namespace:r[0],query:r[7]||r[10],search:r[9]})),w(l,"data-cy","back-to-workflows"),w(l,"class","back-to-workflows svelte-st9g8m"),w(n,"class","-mt-3 -ml-2 mb-4 block"),w(C,"data-cy","workflow-id-heading"),w(C,"class","select-all overflow-hidden text-ellipsis text-2xl font-medium"),w(u,"class","flex w-full items-center justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),w(i,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),w(b,"class","flex flex-wrap gap-6"),w(t,"class","relative flex flex-col gap-1"),w(e,"class","mb-4 flex flex-col gap-4")},m(m,E){P(m,e,E),p(e,t),p(t,n),p(n,l),W(a,l,null),p(l,s),p(t,f),p(t,i),p(i,u),W(c,u,null),p(u,k),p(u,C),p(C,j),p(i,H),D&&D.m(i,null),p(t,Y),S&&S.m(t,null),p(t,z),p(t,b),W(B,b,null),p(b,ee),W(V,b,null),p(b,te),W(h,b,null),p(b,ke),W(G,b,null),p(b,be),W(X,b,null),re=!0},p(m,[E]){var L,We,Ae,Ce,De;(!re||E&129&&o!==(o=Le({namespace:m[0],query:m[7]||m[10],search:m[9]})))&&w(l,"href",o);const N={};E&2&&(N.status=(L=m[1])==null?void 0:L.status),c.$set(N),(!re||E&2)&&q!==(q=m[1].id+"")&&Ke(j,q),m[4]?D?(D.p(m,E),E&16&&_(D,1)):(D=Oe(m),D.c(),_(D,1),D.m(i,null)):D&&(se(),g(D,1,1,()=>{D=null}),oe()),m[5]?S?E&32&&_(S,1):(S=ze(m),S.c(),_(S,1),S.m(t,z)):S&&(se(),g(S,1,1,()=>{S=null}),oe());const ne={};E&64&&(ne.href=he({...m[6]})),E&2&&(ne.amount=(We=m[1])==null?void 0:We.historyEvents),E&320&&(ne.active=O(m[8].url.pathname,he({...m[6]}))),B.$set(ne);const Z={};E&64&&(Z.href=de(m[6])),E&4&&(Z.amount=(Ce=(Ae=m[2])==null?void 0:Ae.pollers)==null?void 0:Ce.length),E&320&&(Z.active=O(m[8].url.pathname,de(m[6]))),V.$set(Z);const J={};E&64&&(J.href=_e(m[6])),E&2&&(J.amount=(De=m[1].pendingActivities)==null?void 0:De.length),E&320&&(J.active=O(m[8].url.pathname,_e(m[6]))),h.$set(J);const x={};E&64&&(x.href=ge(m[6])),E&320&&(x.active=O(m[8].url.pathname,ge(m[6]))),G.$set(x);const le={};E&64&&(le.href=pe(m[6])),E&320&&(le.active=O(m[8].url.pathname,pe(m[6]))),X.$set(le)},i(m){re||(_(a.$$.fragment,m),_(c.$$.fragment,m),_(D),_(S),_(B.$$.fragment,m),_(V.$$.fragment,m),_(h.$$.fragment,m),_(G.$$.fragment,m),_(X.$$.fragment,m),re=!0)},o(m){g(a.$$.fragment,m),g(c.$$.fragment,m),g(D),g(S),g(B.$$.fragment,m),g(V.$$.fragment,m),g(h.$$.fragment,m),g(G.$$.fragment,m),g(X.$$.fragment,m),re=!1},d(m){m&&d(e),A(a),A(c),D&&D.d(),S&&S.d(),A(B),A(V),A(h),A(G),A(X)}}}const Je=15e3;function nn(r,e,t){let n,l,a,s,o,f,i,u,c,k;F(r,dt,h=>t(15,s=h)),F(r,nt,h=>t(16,o=h)),F(r,ae,h=>t(17,f=h)),F(r,we,h=>t(18,i=h)),F(r,gt,h=>t(19,u=h)),F(r,pt,h=>t(7,c=h)),F(r,tt,h=>t(8,k=h));var C,q;let{namespace:j}=e,{workflow:H}=e,{workers:Y}=e,{cancelEnabled:z=!1}=e,b;const{parameters:B,searchType:ee}=u,V=$t(B);xe(()=>{l&&i==="on"&&(clearInterval(b),t(14,b=setInterval(()=>K(ae,f=Date.now(),f),Je)))});const te=()=>{i==="on"?(K(we,i="off",i),clearInterval(b)):(K(ae,f=Date.now(),f),K(we,i="on",i),clearInterval(b),t(14,b=setInterval(()=>K(ae,f=Date.now(),f),Je)))};return et(()=>{clearInterval(b)}),r.$$set=h=>{"namespace"in h&&t(0,j=h.namespace),"workflow"in h&&t(1,H=h.workflow),"workers"in h&&t(2,Y=h.workers),"cancelEnabled"in h&&t(3,z=h.cancelEnabled)},r.$$.update=()=>{r.$$.dirty&3&&t(6,n={namespace:j,workflow:H==null?void 0:H.id,run:H==null?void 0:H.runId}),r.$$.dirty&69632&&t(4,l=t(12,C=o==null?void 0:o.workflow)===null||C===void 0?void 0:C.isRunning),r.$$.dirty&16400&&(l||clearInterval(b)),r.$$.dirty&106496&&t(5,a=(t(13,q=o==null?void 0:o.workflow)===null||q===void 0?void 0:q.status)==="Running"&&s.events.some(h=>(h==null?void 0:h.eventType)==="WorkflowExecutionCancelRequested"))},[j,H,Y,z,l,a,n,c,k,ee,V,te,C,q,b,s,o]}class an extends ie{constructor(e){super(),ce(this,e,nn,tn,ue,{namespace:0,workflow:1,workers:2,cancelEnabled:3})}}function rn(r){let e,t,n;e=new an({props:{namespace:r[1].params.namespace,workflow:r[3].workflow,workers:r[3].workers,cancelEnabled:r[0]}});const l=r[5].default,a=Ye(l,r,r[4],null);return{c(){T(e.$$.fragment),t=M(),a&&a.c()},l(s){y(e.$$.fragment,s),t=R(s),a&&a.l(s)},m(s,o){W(e,s,o),P(s,t,o),a&&a.m(s,o),n=!0},p(s,o){const f={};o&2&&(f.namespace=s[1].params.namespace),o&8&&(f.workflow=s[3].workflow),o&8&&(f.workers=s[3].workers),o&1&&(f.cancelEnabled=s[0]),e.$set(f),a&&a.p&&(!n||o&16)&&Ge(a,l,s,s[4],n?Ze(l,s[4],o,null):Xe(s[4]),null)},i(s){n||(_(e.$$.fragment,s),_(a,s),n=!0)},o(s){g(e.$$.fragment,s),g(a,s),n=!1},d(s){A(e,s),s&&d(t),a&&a.d(s)}}}function ln(r){let e,t;return e=new Dt({}),{c(){T(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){W(e,n,l),t=!0},p:fe,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function sn(r){let e,t,n,l;const a=[ln,rn],s=[];function o(f,i){return f[2]?0:1}return t=o(r),n=s[t]=a[t](r),{c(){e=$("main"),n.c(),this.h()},l(f){e=v(f,"MAIN",{class:!0});var i=I(e);n.l(i),i.forEach(d),this.h()},h(){w(e,"class","flex h-full flex-col gap-6")},m(f,i){P(f,e,i),s[t].m(e,null),l=!0},p(f,[i]){let u=t;t=o(f),t===u?s[t].p(f,i):(se(),g(s[u],1,1,()=>{s[u]=null}),oe(),n=s[t],n?n.p(f,i):(n=s[t]=a[t](f),n.c()),_(n,1),n.m(e,null))},i(f){l||(_(n),l=!0)},o(f){g(n),l=!1},d(f){f&&d(e),s[t].d()}}}function on(r,e,t){let n,l,a,s,o;F(r,Fe,c=>t(6,n=c)),F(r,Ve,c=>t(7,l=c)),F(r,tt,c=>t(1,a=c)),F(r,_t,c=>t(2,s=c)),F(r,nt,c=>t(3,o=c));let{$$slots:f={},$$scope:i}=e,{cancelEnabled:u=!1}=e;return xe(()=>{const c=a.url.searchParams.get("sort");c&&K(Ve,l=c,l)}),et(()=>{K(Fe,n=null,n)}),r.$$set=c=>{"cancelEnabled"in c&&t(0,u=c.cancelEnabled),"$$scope"in c&&t(4,i=c.$$scope)},[u,a,s,o,i,f]}class Sn extends ie{constructor(e){super(),ce(this,e,on,sn,ue,{cancelEnabled:0})}}export{xt as A,Sn as W};
