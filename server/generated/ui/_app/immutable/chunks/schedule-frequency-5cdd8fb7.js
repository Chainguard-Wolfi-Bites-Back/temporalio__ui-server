import{r as m,a as p}from"./route-for-api-d725efb6.js";import{s as k}from"./parse-with-big-int-561ccb8b.js";import{v as $}from"./v4-f2cd1a04.js";import{S as C,i as D,s as F,l as b,m as _,n as S,h as f,p as y,b as v,F as w,D as x,R as I,r as g,a as M,u as E,c as R,N as T,v as W}from"./index-0a89fd56.js";const Q=async(c,e=fetch)=>{var l;let s="";const r=o=>{var u,i;return s=(i=(u=o==null?void 0:o.body)==null?void 0:u.message)!=null?i:`Error fetching schedules: ${o.status}: ${o.statusText}`},t=await m("schedules",{namespace:c}),{schedules:n,nextPageToken:a}=(l=await p(t,{params:{},onError:r,request:e}))!=null?l:{schedules:[],nextPageToken:""};return{schedules:n,nextPageToken:String(a),error:s}};async function X(c,e=fetch){const s=await m("schedule",c);return p(s,{request:e})}async function Y(c,e=fetch){const s=await m("schedule.delete",c);return p(s,{request:e,options:{method:"DELETE"}})}async function Z({namespace:c,body:e}){let s="";const r=a=>{var l,o;return s=(o=(l=a==null?void 0:a.body)==null?void 0:l.message)!=null?o:`Error creating schedule: ${a.status}: ${a.statusText}`},t=await m("schedules",{namespace:c}),{conflictToken:n}=await p(t,{options:{method:"POST",body:k({request_id:$(),...e})},shouldRetry:!1,onError:r});return{conflictToken:n,error:s}}async function ee({namespace:c,scheduleId:e,body:s}){let r="";const t=a=>{var l,o;return r=(o=(l=a==null?void 0:a.body)==null?void 0:l.message)!=null?o:`Error editing schedule: ${a.status}: ${a.statusText}`},n=await m("schedule",{namespace:c,scheduleId:e});return await p(n,{options:{method:"POST",body:k({request_id:$(),...s})},shouldRetry:!1,onError:t}),{error:r}}async function te({namespace:c,scheduleId:e,reason:s}){const r={patch:{pause:s}},t=await m("schedule",{namespace:c,scheduleId:e});return await p(t,{options:{method:"PATCH",body:k({...r,request_id:$()})},shouldRetry:!1,onError:n=>console.error(n)})}async function ae({namespace:c,scheduleId:e,reason:s}){const r={patch:{unpause:s}},t=await m("schedule",{namespace:c,scheduleId:e});return await p(t,{options:{method:"PATCH",body:k({...r,request_id:$()})},shouldRetry:!1})}const H=[{label:"Every month",value:"*"},{label:"January",value:"1"},{label:"February",value:"2"},{label:"March",value:"3"},{label:"April",value:"4"},{label:"May",value:"5"},{label:"June",value:"6"},{label:"July",value:"7"},{label:"August",value:"8"},{label:"September",value:"9"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],L=[{label:"Everyday",value:"*"},{label:"Weekdays",value:"1,2,3,4,5"},{label:"Weekends",value:"6,7"}],J=[{label:"Sunday",value:"7"},{label:"Monday",value:"1"},{label:"Tuesday",value:"2"},{label:"Wednesday",value:"3"},{label:"Thursday",value:"4"},{label:"Friday",value:"5"},{label:"Saturday",value:"6"}],se=({preset:c,month:e,dayOfMonth:s,dayOfWeek:r,hour:t,minute:n})=>{let a="";const l=!t||!parseInt(t)||parseInt(t)<12?"am":"pm",u=`${(!t||!parseInt(t)?"12":parseInt(t)<=12?t:(parseInt(t)-12).toString()).padStart(2,"0")}:${n?n.padStart(2,"0"):"00"}${l}`;if(c==="week"){const i=L.find(d=>d.value===r);i?a=`${i.label} at ${u}`:a=`${r.split(",").map(P=>J.find(N=>N.value===P).label).join(", ")} at ${u}`}else if(c==="month")if(e==="*")a=`Every ${s} of the month at ${u}`;else{const d=e.split(",").map(h=>H.find(q=>q.value===h).label).join(", ");a=`Every ${s} of ${d} at ${u}`}return a},A=(c="",e=!1)=>{let s="";if(!c)return s;const r=parseInt(c.slice(0,-1)),t=Math.floor(r/(60*60*24));let n=r-(t>0?t*60*60*24:0);const a=Math.floor(n/(60*60));n=n-(a>0?a*60*60:0);const l=Math.floor(n/60),o=l>0?n-l*60:n,u=`${a?a.toString().padStart(2,"0"):"00"}hrs`,i=`${l?l.toString().padStart(2,"0"):"00"}min`,d=`${o?o.toString().padStart(2,"0"):"00"}sec`,h=e?"Offset":"Every";return t?s=`${h} ${t}days:${u}:${i}:${d}`:a?s=`${h} ${u}:${i}:${d}`:l?s=`${h} ${i}:${d}`:o&&(s=`${h} ${d}`),s};function j(c){let e,s=A(c[1])+"",r,t,n,a=A(c[2],!0)+"",l;return{c(){e=b("p"),r=g(s),t=M(),n=b("p"),l=g(a),this.h()},l(o){e=_(o,"P",{"data-cy":!0});var u=S(e);r=E(u,s),u.forEach(f),t=R(o),n=_(o,"P",{"data-cy":!0});var i=S(n);l=E(i,a),i.forEach(f),this.h()},h(){y(e,"data-cy","schedule-interval-frequency"),y(n,"data-cy","schedule-phase-frequency")},m(o,u){v(o,e,u),T(e,r),v(o,t,u),v(o,n,u),T(n,l)},p:w,d(o){o&&f(e),o&&f(t),o&&f(n)}}}function O(c){var n,a;let e,s=((a=(n=c[0])==null?void 0:n.comment)!=null?a:"")+"",r,t;return{c(){e=b("p"),r=g(s),t=g(" UTC"),this.h()},l(l){e=_(l,"P",{"data-cy":!0});var o=S(e);r=E(o,s),t=E(o," UTC"),o.forEach(f),this.h()},h(){y(e,"data-cy","schedule-calendar-frequency")},m(l,o){v(l,e,o),T(e,r),T(e,t)},p(l,o){var u,i;o&1&&s!==(s=((i=(u=l[0])==null?void 0:u.comment)!=null?i:"")+"")&&W(r,s)},d(l){l&&f(e)}}}function U(c){let e,s;function r(a,l){return a[0]?O:j}let t=r(c),n=t(c);return{c(){e=b("div"),n.c(),this.h()},l(a){e=_(a,"DIV",{class:!0});var l=S(e);n.l(l),l.forEach(f),this.h()},h(){y(e,"class",s="flex flex-col "+c[3].class)},m(a,l){v(a,e,l),n.m(e,null)},p(a,[l]){t===(t=r(a))&&n?n.p(a,l):(n.d(1),n=t(a),n&&(n.c(),n.m(e,null))),l&8&&s!==(s="flex flex-col "+a[3].class)&&y(e,"class",s)},i:w,o:w,d(a){a&&f(e),n.d()}}}function B(c,e,s){let{calendar:r=void 0}=e,{interval:t=void 0}=e;const n=t==null?void 0:t.interval,a=t==null?void 0:t.phase;return c.$$set=l=>{s(3,e=x(x({},e),I(l))),"calendar"in l&&s(0,r=l.calendar),"interval"in l&&s(4,t=l.interval)},e=I(e),[r,n,a,e,t]}class le extends C{constructor(e){super(),D(this,e,B,U,F,{calendar:0,interval:4})}}export{le as S,se as a,Q as b,Z as c,Y as d,ee as e,X as f,L as g,H as m,te as p,ae as u,J as w};
