import{S as Z,i as G,s as J,x as k,y as E,z as v,f as g,t as b,C as w,O as q,l as y,r as R,m as T,n as S,u as H,h as m,p as $,b as C,N as h,F as I,a as D,c as N,Z as j,U as O,a4 as F,v as K,e as B,g as Q,d as W}from"./index-e693a59e.js";import{I as M}from"./icon-9e3c01e3.js";import{d as ee,w as te}from"./index-8f8207c2.js";import{p as ne}from"./stores-e2727ac0.js";import{d as P,l as se,v as re,a as oe}from"./is-http-135b6a03.js";import{a as ae}from"./notifications-b26a159d.js";import{T as L}from"./tooltip-793f2f21.js";import{M as le}from"./modal-2063dfe4.js";const Y=ee([ne,P,se,ae],([l,e,n,t])=>{var d,p,A,_,U,V;const s=l.params.namespace,o=(A=(p=(d=l==null?void 0:l.stuff)==null?void 0:d.settings)==null?void 0:p.codec)==null?void 0:A.endpoint,i=e||o,u=(V=(U=(_=l.stuff)==null?void 0:_.settings)==null?void 0:U.codec)==null?void 0:V.passAccessToken,r=t==null?void 0:t.accessToken;return{namespace:s,settingsEndpoint:o,endpoint:i,passAccessToken:u,accessToken:r,hasNotRequested:n==="notRequested",hasError:n==="error",hasSuccess:n==="success"}}),x=te(!1);function ce(l){let e,n;return{c(){e=y("h3"),n=R("Data Encoder"),this.h()},l(t){e=T(t,"H3",{slot:!0,"data-cy":!0});var s=S(e);n=H(s,"Data Encoder"),s.forEach(m),this.h()},h(){$(e,"slot","title"),$(e,"data-cy","data-encoder-title")},m(t,s){C(t,e,s),h(e,n)},p:I,d(t){t&&m(e)}}}function z(l){let e,n;return{c(){e=y("small"),n=R(l[2]),this.h()},l(t){e=T(t,"SMALL",{"data-cy":!0,class:!0});var s=S(e);n=H(s,l[2]),s.forEach(m),this.h()},h(){$(e,"data-cy","data-encoder-endpoint-error"),$(e,"class","text-red-700")},m(t,s){C(t,e,s),h(e,n)},p(t,s){s&4&&K(n,t[2])},d(t){t&&m(e)}}}function X(l){let e,n,t=l[4].settingsEndpoint+"",s,o,i,u,r,c,a;return{c(){e=y("div"),n=y("p"),s=R(t),o=D(),i=y("p"),u=R("Site setting"),r=D(),c=y("small"),a=R("Set endpoint overrides site setting endpoint."),this.h()},l(f){e=T(f,"DIV",{class:!0});var d=S(e);n=T(d,"P",{"data-cy":!0});var p=S(n);s=H(p,t),p.forEach(m),o=N(d),i=T(d,"P",{"data-cy":!0});var A=S(i);u=H(A,"Site setting"),A.forEach(m),d.forEach(m),r=N(f),c=T(f,"SMALL",{class:!0,"data-cy":!0});var _=S(c);a=H(_,"Set endpoint overrides site setting endpoint."),_.forEach(m),this.h()},h(){$(n,"data-cy","data-encoder-site-endpoint"),$(i,"data-cy","data-encoder-site-settings"),$(e,"class","mt-4 flex items-center justify-between"),$(c,"class","text-yellow-700"),$(c,"data-cy","data-encoder-endpoint-info")},m(f,d){C(f,e,d),h(e,n),h(n,s),h(e,o),h(e,i),h(i,u),C(f,r,d),C(f,c,d),h(c,a)},p(f,d){d&16&&t!==(t=f[4].settingsEndpoint+"")&&K(s,t)},d(f){f&&m(e),f&&m(r),f&&m(c)}}}function ie(l){let e,n,t,s,o,i,u,r,c,a=l[2]&&z(l),f=l[4].settingsEndpoint&&X(l);return{c(){e=y("div"),n=y("h3"),t=R("Remote Codec Endpoint"),s=D(),o=y("textarea"),i=D(),a&&a.c(),u=D(),f&&f.c(),this.h()},l(d){e=T(d,"DIV",{slot:!0});var p=S(e);n=T(p,"H3",{class:!0,"data-cy":!0});var A=S(n);t=H(A,"Remote Codec Endpoint"),A.forEach(m),s=N(p),o=T(p,"TEXTAREA",{class:!0,rows:!0,placeholder:!0,"data-cy":!0}),S(o).forEach(m),i=N(p),a&&a.l(p),u=N(p),f&&f.l(p),p.forEach(m),this.h()},h(){$(n,"class","font-medium"),$(n,"data-cy","data-encoder-endpoint-title"),$(o,"class","block w-full rounded-md border border-gray-200 p-2"),$(o,"rows",3),$(o,"placeholder","Endpoint"),$(o,"data-cy","data-encoder-endpoint-input"),$(e,"slot","content")},m(d,p){C(d,e,p),h(e,n),h(n,t),h(e,s),h(e,o),j(o,l[1]),h(e,i),a&&a.m(e,null),h(e,u),f&&f.m(e,null),r||(c=O(o,"input",l[9]),r=!0)},p(d,p){p&2&&j(o,d[1]),d[2]?a?a.p(d,p):(a=z(d),a.c(),a.m(e,u)):a&&(a.d(1),a=null),d[4].settingsEndpoint?f?f.p(d,p):(f=X(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(d){d&&m(e),a&&a.d(),f&&f.d(),r=!1,c()}}}function fe(l){let e,n;return e=new le({props:{open:l[0],confirmText:"Set Endpoint",$$slots:{content:[ie],title:[ce]},$$scope:{ctx:l}}}),e.$on("cancelModal",l[10]),e.$on("confirmModal",l[6]),{c(){k(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,s){v(e,t,s),n=!0},p(t,[s]){const o={};s&1&&(o.open=t[0]),s&4118&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ue(l,e,n){let t,s;q(l,P,_=>n(3,t=_)),q(l,Y,_=>n(4,s=_));let{showSettings:o}=e,{passAccessToken:i}=e,{onCancel:u}=e,r=t||"",c="";const a=_=>{F(P,t=_,t),n(2,c=""),u()},f=()=>{oe(r)?a(r):n(2,c="Endpoint must start with https:// to authenticate")},d=()=>{r===""?a(null):re(r)?i?f():a(r):n(2,c="Endpoint must start with http:// or https://")};function p(){r=this.value,n(1,r)}const A=()=>a(t);return l.$$set=_=>{"showSettings"in _&&n(0,o=_.showSettings),"passAccessToken"in _&&n(7,i=_.passAccessToken),"onCancel"in _&&n(8,u=_.onCancel)},[o,r,c,t,s,a,d,i,u,p,A]}class de extends Z{constructor(e){super(),G(this,e,ue,fe,J,{showSettings:0,passAccessToken:7,onCancel:8})}}function pe(l){let e,n;return e=new L({props:{right:!0,text:"Configure data encoder",$$slots:{default:[$e]},$$scope:{ctx:l}}}),{c(){k(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,s){v(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function me(l){let e,n,t,s;const o=[ge,he,_e],i=[];function u(r,c){var a;return(a=r[1])!=null&&a.hasNotRequested?0:r[1].hasError?1:r[1].hasSuccess?2:-1}return~(e=u(l))&&(n=i[e]=o[e](l)),{c(){n&&n.c(),t=B()},l(r){n&&n.l(r),t=B()},m(r,c){~e&&i[e].m(r,c),C(r,t,c),s=!0},p(r,c){let a=e;e=u(r),e===a?~e&&i[e].p(r,c):(n&&(Q(),b(i[a],1,1,()=>{i[a]=null}),W()),~e?(n=i[e],n?n.p(r,c):(n=i[e]=o[e](r),n.c()),g(n,1),n.m(t.parentNode,t)):n=null)},i(r){s||(g(n),s=!0)},o(r){b(n),s=!1},d(r){~e&&i[e].d(r),r&&m(t)}}}function $e(l){let e,n,t,s,o,i,u;return n=new M({props:{name:"converter-down",class:"-ml-1 text-gray-400"}}),s=new M({props:{name:"converter-up",class:"absolute left-1 text-gray-400"}}),{c(){e=y("button"),k(n.$$.fragment),t=D(),k(s.$$.fragment),this.h()},l(r){e=T(r,"BUTTON",{class:!0,"data-cy":!0});var c=S(e);E(n.$$.fragment,c),t=N(c),E(s.$$.fragment,c),c.forEach(m),this.h()},h(){$(e,"class","relative flex cursor-pointer"),$(e,"data-cy","data-encoder-status")},m(r,c){C(r,e,c),v(n,e,null),h(e,t),v(s,e,null),o=!0,i||(u=O(e,"click",l[2]),i=!0)},p:I,i(r){o||(g(n.$$.fragment,r),g(s.$$.fragment,r),o=!0)},o(r){b(n.$$.fragment,r),b(s.$$.fragment,r),o=!1},d(r){r&&m(e),w(n),w(s),i=!1,u()}}}function _e(l){let e,n;return e=new L({props:{right:!0,text:"Data encoder succesfully converted content",$$slots:{default:[be]},$$scope:{ctx:l}}}),{c(){k(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,s){v(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function he(l){let e,n;return e=new L({props:{right:!0,text:"Data encoder couldn't connect to the remote encoder",$$slots:{default:[ke]},$$scope:{ctx:l}}}),{c(){k(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,s){v(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ge(l){let e,n;return e=new L({props:{right:!0,text:"Data encoder is configured",$$slots:{default:[Ee]},$$scope:{ctx:l}}}),{c(){k(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,s){v(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function be(l){let e,n,t,s,o,i,u;return n=new M({props:{name:"converter-down",class:"-ml-1 text-green-400"}}),s=new M({props:{name:"converter-up",class:"absolute left-1 text-green-400"}}),{c(){e=y("button"),k(n.$$.fragment),t=D(),k(s.$$.fragment),this.h()},l(r){e=T(r,"BUTTON",{class:!0,"data-cy":!0});var c=S(e);E(n.$$.fragment,c),t=N(c),E(s.$$.fragment,c),c.forEach(m),this.h()},h(){$(e,"class","relative flex cursor-pointer"),$(e,"data-cy","data-encoder-status-success")},m(r,c){C(r,e,c),v(n,e,null),h(e,t),v(s,e,null),o=!0,i||(u=O(e,"click",l[2]),i=!0)},p:I,i(r){o||(g(n.$$.fragment,r),g(s.$$.fragment,r),o=!0)},o(r){b(n.$$.fragment,r),b(s.$$.fragment,r),o=!1},d(r){r&&m(e),w(n),w(s),i=!1,u()}}}function ke(l){let e,n,t,s,o,i,u;return n=new M({props:{name:"converter-down",class:"-ml-1 text-red-400"}}),s=new M({props:{name:"converter-up",class:"absolute left-1 text-red-400"}}),{c(){e=y("button"),k(n.$$.fragment),t=D(),k(s.$$.fragment),this.h()},l(r){e=T(r,"BUTTON",{class:!0,"data-cy":!0});var c=S(e);E(n.$$.fragment,c),t=N(c),E(s.$$.fragment,c),c.forEach(m),this.h()},h(){$(e,"class","relative flex cursor-pointer"),$(e,"data-cy","data-encoder-status-error")},m(r,c){C(r,e,c),v(n,e,null),h(e,t),v(s,e,null),o=!0,i||(u=O(e,"click",l[2]),i=!0)},p:I,i(r){o||(g(n.$$.fragment,r),g(s.$$.fragment,r),o=!0)},o(r){b(n.$$.fragment,r),b(s.$$.fragment,r),o=!1},d(r){r&&m(e),w(n),w(s),i=!1,u()}}}function Ee(l){let e,n,t,s,o,i,u;return n=new M({props:{name:"converter-down",class:"-ml-1 text-blue-200"}}),s=new M({props:{name:"converter-up",class:"absolute left-1 text-blue-200"}}),{c(){e=y("button"),k(n.$$.fragment),t=D(),k(s.$$.fragment),this.h()},l(r){e=T(r,"BUTTON",{class:!0,"data-cy":!0});var c=S(e);E(n.$$.fragment,c),t=N(c),E(s.$$.fragment,c),c.forEach(m),this.h()},h(){$(e,"class","relative flex cursor-pointer"),$(e,"data-cy","data-encoder-status-configured")},m(r,c){C(r,e,c),v(n,e,null),h(e,t),v(s,e,null),o=!0,i||(u=O(e,"click",l[2]),i=!0)},p:I,i(r){o||(g(n.$$.fragment,r),g(s.$$.fragment,r),o=!0)},o(r){b(n.$$.fragment,r),b(s.$$.fragment,r),o=!1},d(r){r&&m(e),w(n),w(s),i=!1,u()}}}function ve(l){let e,n,t,s,o,i;e=new de({props:{showSettings:l[0],onCancel:l[3],passAccessToken:l[1].passAccessToken}});const u=[me,pe],r=[];function c(a,f){var d;return(d=a[1])!=null&&d.endpoint?0:1}return t=c(l),s=r[t]=u[t](l),{c(){k(e.$$.fragment),n=D(),s.c(),o=B()},l(a){E(e.$$.fragment,a),n=N(a),s.l(a),o=B()},m(a,f){v(e,a,f),C(a,n,f),r[t].m(a,f),C(a,o,f),i=!0},p(a,[f]){const d={};f&1&&(d.showSettings=a[0]),f&2&&(d.passAccessToken=a[1].passAccessToken),e.$set(d);let p=t;t=c(a),t===p?r[t].p(a,f):(Q(),b(r[p],1,1,()=>{r[p]=null}),W(),s=r[t],s?s.p(a,f):(s=r[t]=u[t](a),s.c()),g(s,1),s.m(o.parentNode,o))},i(a){i||(g(e.$$.fragment,a),g(s),i=!0)},o(a){b(e.$$.fragment,a),b(s),i=!1},d(a){w(e,a),a&&m(n),r[t].d(a),a&&m(o)}}}function we(l,e,n){let t,s;return q(l,x,u=>n(0,t=u)),q(l,Y,u=>n(1,s=u)),[t,s,()=>F(x,t=!0,t),()=>F(x,t=!1,t)]}class Re extends Z{constructor(e){super(),G(this,e,we,ve,J,{})}}export{Re as D,x as s};
