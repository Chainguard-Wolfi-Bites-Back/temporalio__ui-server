import{S as W,i as Y,s as x,a0 as Z,a8 as G,l as E,r as M,a as A,x as T,m as v,n as w,u as q,h as p,c as I,y as C,p as m,b as P,N as g,z as D,Z as K,U as z,a9 as J,f as b,t as k,C as S,O as V,v as le,e as j,F as U,a4 as X,g as ce,d as ie}from"./index-a7390e4f.js";import{I as L}from"./icon-01236aa5.js";import{d as ue,w as de}from"./index-523d4e79.js";import{p as pe}from"./stores-77f5a84f.js";import{d as ne,l as me}from"./data-converter-config-f8bd6697.js";import{c as Q,l as _e,p as oe,v as he,a as ge}from"./is-http-23096744.js";import{a as $e}from"./auth-user-ff2d5f64.js";import{T as ee}from"./tooltip-4bf5d09e.js";import{M as be}from"./modal-eeed290f.js";import{C as ke}from"./checkbox-69e4e037.js";const fe=ue([pe,Q,_e,ne,me,$e],([a,e,t,n,o,r])=>{var B,O,f;const i=a.params.namespace,u=(f=(O=(B=a==null?void 0:a.stuff)==null?void 0:B.settings)==null?void 0:O.codec)==null?void 0:f.endpoint,s=e||u,c=r==null?void 0:r.accessToken;return{namespace:i,settingsEndpoint:u,endpoint:s,accessToken:c,hasNotRequested:s?t==="notRequested":o==="notRequested",hasError:s?t==="error":o==="error",hasSuccess:s?t==="success":o==="success",hasEndpointAndPortConfigured:s&&n,hasEndpointOrPortConfigured:s||n}}),te=de(!1);function se(a){let e,t;return{c(){e=E("small"),t=M(a[2]),this.h()},l(n){e=v(n,"SMALL",{"data-cy":!0,class:!0});var o=w(e);t=q(o,a[2]),o.forEach(p),this.h()},h(){m(e,"data-cy","data-encoder-endpoint-error"),m(e,"class","text-red-700")},m(n,o){P(n,e,o),g(e,t)},p(n,o){o&4&&le(t,n[2])},d(n){n&&p(e)}}}function re(a){let e,t,n=a[3].settingsEndpoint+"",o,r,i,u,s,c,l=a[4]&&ae();return{c(){e=E("div"),t=E("p"),o=M(n),r=A(),i=E("p"),u=M("Site setting"),s=A(),l&&l.c(),c=j(),this.h()},l(d){e=v(d,"DIV",{class:!0});var _=w(e);t=v(_,"P",{"data-cy":!0});var y=w(t);o=q(y,n),y.forEach(p),r=I(_),i=v(_,"P",{"data-cy":!0});var R=w(i);u=q(R,"Site setting"),R.forEach(p),_.forEach(p),s=I(d),l&&l.l(d),c=j(),this.h()},h(){m(t,"data-cy","data-encoder-site-endpoint"),m(i,"data-cy","data-encoder-site-settings"),m(e,"class","flex items-center justify-between")},m(d,_){P(d,e,_),g(e,t),g(t,o),g(e,r),g(e,i),g(i,u),P(d,s,_),l&&l.m(d,_),P(d,c,_)},p(d,_){_&8&&n!==(n=d[3].settingsEndpoint+"")&&le(o,n),d[4]?l||(l=ae(),l.c(),l.m(c.parentNode,c)):l&&(l.d(1),l=null)},d(d){d&&p(e),d&&p(s),l&&l.d(d),d&&p(c)}}}function ae(a){let e,t;return{c(){e=E("small"),t=M("Set endpoint overrides site setting endpoint."),this.h()},l(n){e=v(n,"SMALL",{class:!0,"data-cy":!0});var o=w(e);t=q(o,"Set endpoint overrides site setting endpoint."),o.forEach(p),this.h()},h(){m(e,"class","text-yellow-700"),m(e,"data-cy","data-encoder-endpoint-info")},m(n,o){P(n,e,o),g(e,t)},d(n){n&&p(e)}}}function Ee(a){let e,t,n,o,r,i,u,s,c,l,d,_,y,R;function B($){a[5]($)}let O={"data-cy":"data-encoder-pass-access-token",label:"Pass access token",class:"mt-2 mb-2 block h-5 w-full"};a[1]!==void 0&&(O.checked=a[1]),i=new ke({props:O}),Z.push(()=>G(i,"checked",B));let f=a[2]&&se(a),h=a[3].settingsEndpoint&&re(a);return{c(){e=E("div"),t=E("h3"),n=M("Remote Codec Endpoint"),o=A(),r=E("div"),T(i.$$.fragment),s=A(),c=E("textarea"),l=A(),f&&f.c(),d=A(),h&&h.c(),this.h()},l($){e=v($,"DIV",{class:!0});var N=w(e);t=v(N,"H3",{class:!0,"data-cy":!0});var F=w(t);n=q(F,"Remote Codec Endpoint"),F.forEach(p),o=I(N),r=v(N,"DIV",{class:!0});var H=w(r);C(i.$$.fragment,H),s=I(H),c=v(H,"TEXTAREA",{class:!0,rows:!0,placeholder:!0,"data-cy":!0}),w(c).forEach(p),l=I(H),f&&f.l(H),d=I(H),h&&h.l(H),H.forEach(p),N.forEach(p),this.h()},h(){m(t,"class","text-lg"),m(t,"data-cy","data-encoder-endpoint-title"),m(c,"class","block w-full rounded-md border border-gray-200 p-2"),m(c,"rows",3),m(c,"placeholder","Endpoint"),m(c,"data-cy","data-encoder-endpoint-input"),m(r,"class","flex flex-col gap-2"),m(e,"class","mb-8")},m($,N){P($,e,N),g(e,t),g(t,n),g(e,o),g(e,r),D(i,r,null),g(r,s),g(r,c),K(c,a[0]),g(r,l),f&&f.m(r,null),g(r,d),h&&h.m(r,null),_=!0,y||(R=z(c,"input",a[6]),y=!0)},p($,[N]){const F={};!u&&N&2&&(u=!0,F.checked=$[1],J(()=>u=!1)),i.$set(F),N&1&&K(c,$[0]),$[2]?f?f.p($,N):(f=se($),f.c(),f.m(r,d)):f&&(f.d(1),f=null),$[3].settingsEndpoint?h?h.p($,N):(h=re($),h.c(),h.m(r,null)):h&&(h.d(1),h=null)},i($){_||(b(i.$$.fragment,$),_=!0)},o($){k(i.$$.fragment,$),_=!1},d($){$&&p(e),S(i),f&&f.d(),h&&h.d(),y=!1,R()}}}function ve(a,e,t){let n,o;V(a,fe,l=>t(3,n=l)),V(a,Q,l=>t(4,o=l));let{endpoint:r=""}=e,{passToken:i=!1}=e,{error:u=""}=e;function s(l){i=l,t(1,i)}function c(){r=this.value,t(0,r)}return a.$$set=l=>{"endpoint"in l&&t(0,r=l.endpoint),"passToken"in l&&t(1,i=l.passToken),"error"in l&&t(2,u=l.error)},[r,i,u,n,o,s,c]}class we extends W{constructor(e){super(),Y(this,e,ve,Ee,x,{endpoint:0,passToken:1,error:2})}}function ye(a){let e,t,n,o,r,i,u,s,c;return{c(){e=E("div"),t=E("h3"),n=M("tctl plugin port "),o=E("span"),r=M("DEPRECATED"),i=A(),u=E("input"),this.h()},l(l){e=v(l,"DIV",{class:!0});var d=w(e);t=v(d,"H3",{class:!0,"data-cy":!0});var _=w(t);n=q(_,"tctl plugin port "),o=v(_,"SPAN",{class:!0});var y=w(o);r=q(y,"DEPRECATED"),y.forEach(p),_.forEach(p),i=I(d),u=v(d,"INPUT",{class:!0,placeholder:!0,"data-cy":!0}),d.forEach(p),this.h()},h(){m(o,"class","rounded-lg bg-orange-100 px-1 text-sm text-orange-500"),m(t,"class","text-lg"),m(t,"data-cy","data-encoder-port-title"),m(u,"class","block w-24 rounded-md border border-gray-200 p-2"),m(u,"placeholder","Port"),m(u,"data-cy","data-encoder-port-input"),m(e,"class","my-4")},m(l,d){P(l,e,d),g(e,t),g(t,n),g(t,o),g(o,r),g(e,i),g(e,u),K(u,a[0]),s||(c=z(u,"input",a[1]),s=!0)},p(l,[d]){d&1&&u.value!==l[0]&&K(u,l[0])},i:U,o:U,d(l){l&&p(e),s=!1,c()}}}function Te(a,e,t){let{port:n=""}=e;function o(){n=this.value,t(0,n)}return a.$$set=r=>{"port"in r&&t(0,n=r.port)},[n,o]}class Ce extends W{constructor(e){super(),Y(this,e,Te,ye,x,{port:0})}}function De(a){let e,t;return{c(){e=E("h3"),t=M("Data Encoder"),this.h()},l(n){e=v(n,"H3",{slot:!0,"data-cy":!0});var o=w(e);t=q(o,"Data Encoder"),o.forEach(p),this.h()},h(){m(e,"slot","title"),m(e,"data-cy","data-encoder-title")},m(n,o){P(n,e,o),g(e,t)},p:U,d(n){n&&p(e)}}}function Se(a){let e,t,n,o,r,i,u,s,c,l,d;function _(f){a[8](f)}function y(f){a[9](f)}let R={error:a[4]};a[1]!==void 0&&(R.endpoint=a[1]),a[2]!==void 0&&(R.passToken=a[2]),t=new we({props:R}),Z.push(()=>G(t,"endpoint",_)),Z.push(()=>G(t,"passToken",y));function B(f){a[10](f)}let O={};return a[3]!==void 0&&(O.port=a[3]),i=new Ce({props:O}),Z.push(()=>G(i,"port",B)),{c(){e=E("div"),T(t.$$.fragment),r=A(),T(i.$$.fragment),s=A(),c=E("small"),l=M("If both are set, the Remote Codec Endpoint will be used."),this.h()},l(f){e=v(f,"DIV",{slot:!0});var h=w(e);C(t.$$.fragment,h),r=I(h),C(i.$$.fragment,h),s=I(h),c=v(h,"SMALL",{"data-cy":!0});var $=w(c);l=q($,"If both are set, the Remote Codec Endpoint will be used."),$.forEach(p),h.forEach(p),this.h()},h(){m(c,"data-cy","data-encoder-info"),m(e,"slot","content")},m(f,h){P(f,e,h),D(t,e,null),g(e,r),D(i,e,null),g(e,s),g(e,c),g(c,l),d=!0},p(f,h){const $={};h&16&&($.error=f[4]),!n&&h&2&&(n=!0,$.endpoint=f[1],J(()=>n=!1)),!o&&h&4&&(o=!0,$.passToken=f[2],J(()=>o=!1)),t.$set($);const N={};!u&&h&8&&(u=!0,N.port=f[3],J(()=>u=!1)),i.$set(N)},i(f){d||(b(t.$$.fragment,f),b(i.$$.fragment,f),d=!0)},o(f){k(t.$$.fragment,f),k(i.$$.fragment,f),d=!1},d(f){f&&p(e),S(t),S(i)}}}function Pe(a){let e,t;return e=new be({props:{open:a[0],cancelText:"Cancel",confirmDisabled:Boolean(a[4]),$$slots:{content:[Se],title:[De]},$$scope:{ctx:a}}}),e.$on("cancelModal",a[5]),e.$on("confirmModal",a[6]),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,[o]){const r={};o&1&&(r.open=n[0]),o&16&&(r.confirmDisabled=Boolean(n[4])),o&16414&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Ne(a,e,t){let n,o,r,i;V(a,ne,f=>t(11,o=f)),V(a,oe,f=>t(12,r=f)),V(a,Q,f=>t(13,i=f));let{showSettings:u}=e,{onClose:s}=e,c=i!=null?i:"",l=o!=null?o:"",d=r!=null?r:!1;const _=()=>{t(1,c=i!=null?i:""),t(3,l=o!=null?o:""),t(2,d=r!=null?r:!1),s()},y=()=>{t(4,n=""),X(Q,i=c,i),X(oe,r=d,r),X(ne,o=l,o),s()};function R(f){c=f,t(1,c)}function B(f){d=f,t(2,d)}function O(f){l=f,t(3,l)}return a.$$set=f=>{"showSettings"in f&&t(0,u=f.showSettings),"onClose"in f&&t(7,s=f.onClose)},a.$$.update=()=>{a.$$.dirty&6&&(d&&!he(c)?t(4,n="Endpoint must be https:// if passing access token"):c&&!ge(c)?t(4,n="Endpoint must start with http:// or https://"):t(4,n=""))},t(4,n=""),[u,c,d,l,n,_,y,s,R,B,O]}class Ae extends W{constructor(e){super(),Y(this,e,Ne,Pe,x,{showSettings:0,onClose:7})}}function Ie(a){let e,t;return e=new ee({props:{right:!0,text:"Configure data encoder",$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Re(a){let e,t,n,o;const r=[Be,qe,Me],i=[];function u(s,c){var l;return(l=s[1])!=null&&l.hasNotRequested?0:s[1].hasError?1:s[1].hasSuccess?2:-1}return~(e=u(a))&&(t=i[e]=r[e](a)),{c(){t&&t.c(),n=j()},l(s){t&&t.l(s),n=j()},m(s,c){~e&&i[e].m(s,c),P(s,n,c),o=!0},p(s,c){let l=e;e=u(s),e===l?~e&&i[e].p(s,c):(t&&(ce(),k(i[l],1,1,()=>{i[l]=null}),ie()),~e?(t=i[e],t?t.p(s,c):(t=i[e]=r[e](s),t.c()),b(t,1),t.m(n.parentNode,n)):t=null)},i(s){o||(b(t),o=!0)},o(s){k(t),o=!1},d(s){~e&&i[e].d(s),s&&p(n)}}}function Oe(a){let e,t,n,o,r,i,u;return t=new L({props:{name:"converter-down",class:"-ml-1 text-gray-400"}}),o=new L({props:{name:"converter-up",class:"absolute left-1 text-gray-400"}}),{c(){e=E("button"),T(t.$$.fragment),n=A(),T(o.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-cy":!0});var c=w(e);C(t.$$.fragment,c),n=I(c),C(o.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","relative flex cursor-pointer"),m(e,"data-cy","data-encoder-status")},m(s,c){P(s,e,c),D(t,e,null),g(e,n),D(o,e,null),r=!0,i||(u=z(e,"click",a[2]),i=!0)},p:U,i(s){r||(b(t.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),k(o.$$.fragment,s),r=!1},d(s){s&&p(e),S(t),S(o),i=!1,u()}}}function Me(a){let e,t;return e=new ee({props:{right:!0,text:"Data encoder succesfully converted content",$$slots:{default:[He]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function qe(a){let e,t;return e=new ee({props:{right:!0,text:"Data encoder couldn't connect to the remote encoder",$$slots:{default:[Le]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Be(a){let e,t;return e=new ee({props:{right:!0,text:"Data encoder is configured",$$slots:{default:[Ve]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){D(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function He(a){let e,t,n,o,r,i,u;return t=new L({props:{name:"converter-down",class:"-ml-1 text-green-400"}}),o=new L({props:{name:"converter-up",class:"absolute left-1 text-green-400"}}),{c(){e=E("button"),T(t.$$.fragment),n=A(),T(o.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-cy":!0});var c=w(e);C(t.$$.fragment,c),n=I(c),C(o.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","relative flex cursor-pointer"),m(e,"data-cy","data-encoder-status-success")},m(s,c){P(s,e,c),D(t,e,null),g(e,n),D(o,e,null),r=!0,i||(u=z(e,"click",a[2]),i=!0)},p:U,i(s){r||(b(t.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),k(o.$$.fragment,s),r=!1},d(s){s&&p(e),S(t),S(o),i=!1,u()}}}function Le(a){let e,t,n,o,r,i,u;return t=new L({props:{name:"converter-down",class:"-ml-1 text-red-400"}}),o=new L({props:{name:"converter-up",class:"absolute left-1 text-red-400"}}),{c(){e=E("button"),T(t.$$.fragment),n=A(),T(o.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-cy":!0});var c=w(e);C(t.$$.fragment,c),n=I(c),C(o.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","relative flex cursor-pointer"),m(e,"data-cy","data-encoder-status-error")},m(s,c){P(s,e,c),D(t,e,null),g(e,n),D(o,e,null),r=!0,i||(u=z(e,"click",a[2]),i=!0)},p:U,i(s){r||(b(t.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),k(o.$$.fragment,s),r=!1},d(s){s&&p(e),S(t),S(o),i=!1,u()}}}function Ve(a){let e,t,n,o,r,i,u;return t=new L({props:{name:"converter-down",class:"-ml-1 text-blue-200"}}),o=new L({props:{name:"converter-up",class:"absolute left-1 text-blue-200"}}),{c(){e=E("button"),T(t.$$.fragment),n=A(),T(o.$$.fragment),this.h()},l(s){e=v(s,"BUTTON",{class:!0,"data-cy":!0});var c=w(e);C(t.$$.fragment,c),n=I(c),C(o.$$.fragment,c),c.forEach(p),this.h()},h(){m(e,"class","relative flex cursor-pointer"),m(e,"data-cy","data-encoder-status-configured")},m(s,c){P(s,e,c),D(t,e,null),g(e,n),D(o,e,null),r=!0,i||(u=z(e,"click",a[2]),i=!0)},p:U,i(s){r||(b(t.$$.fragment,s),b(o.$$.fragment,s),r=!0)},o(s){k(t.$$.fragment,s),k(o.$$.fragment,s),r=!1},d(s){s&&p(e),S(t),S(o),i=!1,u()}}}function Ue(a){let e,t,n,o,r,i;e=new Ae({props:{showSettings:a[0],onClose:a[3]}});const u=[Re,Ie],s=[];function c(l,d){var _;return(_=l[1])!=null&&_.hasEndpointOrPortConfigured?0:1}return n=c(a),o=s[n]=u[n](a),{c(){T(e.$$.fragment),t=A(),o.c(),r=j()},l(l){C(e.$$.fragment,l),t=I(l),o.l(l),r=j()},m(l,d){D(e,l,d),P(l,t,d),s[n].m(l,d),P(l,r,d),i=!0},p(l,[d]){const _={};d&1&&(_.showSettings=l[0]),e.$set(_);let y=n;n=c(l),n===y?s[n].p(l,d):(ce(),k(s[y],1,1,()=>{s[y]=null}),ie(),o=s[n],o?o.p(l,d):(o=s[n]=u[n](l),o.c()),b(o,1),o.m(r.parentNode,r))},i(l){i||(b(e.$$.fragment,l),b(o),i=!0)},o(l){k(e.$$.fragment,l),k(o),i=!1},d(l){S(e,l),l&&p(t),s[n].d(l),l&&p(r)}}}function je(a,e,t){let n,o;return V(a,te,u=>t(0,n=u)),V(a,fe,u=>t(1,o=u)),[n,o,()=>X(te,n=!0,n),()=>X(te,n=!1,n)]}class xe extends W{constructor(e){super(),Y(this,e,je,Ue,x,{})}}export{xe as D,te as s};
