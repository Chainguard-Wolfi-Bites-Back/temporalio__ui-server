import{a7 as c}from"./index-e693a59e.js";import{p as l}from"./persist-store-1e827ec5.js";import{w as u}from"./index-8f8207c2.js";const a=l("AuthUser",{}),U=()=>c(a),k=t=>{const{accessToken:e,idToken:s,name:o,email:n,picture:i}=t;if(!e)throw new Error("No access token");a.set({accessToken:e,idToken:s,name:o,email:n,picture:i})},v=()=>{a.set({})},d=(globalThis==null?void 0:globalThis.requestIdleCallback)||(t=>{setTimeout(t,0)}),r=u([],()=>{const t=setInterval(()=>{d(()=>{const e=Date.now();r.update(s=>s.filter(o=>o.expiration<e))})},5e3);return()=>{clearInterval(t)}}),p=(t,e,s=30)=>{const o=Date.now();return{id:String(o+Math.random()),type:t,message:e,expiration:o+s*1e3}},m=(t,e,s=30)=>{r.update(o=>[...o,p(t,e,s)])},h=t=>{r.update(e=>e.filter(s=>s.id!==t))},w=()=>{r.set([])},A={subscribe:r.subscribe,add:m,dismiss:h,clear:w};export{a,v as c,U as g,A as n,k as s};
