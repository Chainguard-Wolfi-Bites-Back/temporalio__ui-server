import{S as be,i as ke,s as ie,x as z,y as M,z as j,f as E,t as I,C as K,J as Je,K as Xe,L as $e,M as Ge,l as g,r as L,a as P,m as y,n as F,u as N,h as m,c as C,p as k,b as T,N as p,F as ve,e as Be,g as fe,d as ue,O as Se,W as B,X as Te,at as ce,I as Ye,v as Y,H as Ke,T as Ae}from"./index-6c7cd618.js";import{T as Ze,a as xe}from"./table-header-row-bc4ea74b.js";import{p as et}from"./stores-1b77fd24.js";import{f as G}from"./format-date-8d85ffcd.js";import{q as tt,s as lt,u as st,v as Ue}from"./format-time-63ab2d37.js";import{g as rt}from"./route-for-369a155d.js";import{u as ot}from"./pagination-76e2a2b3.js";import{a as Oe}from"./workflow-service-5eb5ccce.js";import{c as at,d as Ee,e as nt,f as ft,g as ut}from"./is-b4c8f655.js";import{W as it}from"./workflow-status-79f88c70.js";import{I as Fe}from"./icon-5a9d4a54.js";import{c as ct}from"./copy-to-clipboard-6fea1ca1.js";import{T as mt}from"./table-row-fa40e182.js";import{e as _t}from"./event-view-00f745e7.js";import{B as dt}from"./button-ecd8a229.js";function ht(r){let e;const s=r[1].default,t=Je(s,r,r[2],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&4)&&Xe(t,s,l,l[2],e?Ge(s,l[2],a,null):$e(l[2]),null)},i(l){e||(E(t,l),e=!0)},o(l){I(t,l),e=!1},d(l){t&&t.d(l)}}}function pt(r){let e,s,t,l,a,o,n,c,u,w,h,q,i,b,_,W,A;return{c(){e=g("th"),s=L("Status"),t=P(),l=g("th"),a=L("Workflow ID"),o=P(),n=g("th"),c=L("Type"),u=P(),w=g("th"),h=L("Start"),q=P(),i=g("th"),b=L("End"),_=P(),W=g("th"),A=L("Summary"),this.h()},l(d){e=y(d,"TH",{class:!0});var S=F(e);s=N(S,"Status"),S.forEach(m),t=C(d),l=y(d,"TH",{class:!0});var R=F(l);a=N(R,"Workflow ID"),R.forEach(m),o=C(d),n=y(d,"TH",{class:!0});var D=F(n);c=N(D,"Type"),D.forEach(m),u=C(d),w=y(d,"TH",{class:!0});var J=F(w);h=N(J,"Start"),J.forEach(m),q=C(d),i=y(d,"TH",{class:!0});var H=F(i);b=N(H,"End"),H.forEach(m),_=C(d),W=y(d,"TH",{class:!0,colspan:!0});var U=F(W);A=N(U,"Summary"),U.forEach(m),this.h()},h(){k(e,"class","hidden w-32 md:table-cell"),k(l,"class","hidden md:table-cell md:w-60 xl:w-auto"),k(n,"class","hidden md:table-cell md:w-60 xl:w-80"),k(w,"class","hidden xl:table-cell xl:w-60"),k(i,"class","hidden xl:table-cell xl:w-60"),k(W,"class","table-cell md:hidden"),k(W,"colspan","3")},m(d,S){T(d,e,S),p(e,s),T(d,t,S),T(d,l,S),p(l,a),T(d,o,S),T(d,n,S),p(n,c),T(d,u,S),T(d,w,S),p(w,h),T(d,q,S),T(d,i,S),p(i,b),T(d,_,S),T(d,W,S),p(W,A)},p:ve,d(d){d&&m(e),d&&m(t),d&&m(l),d&&m(o),d&&m(n),d&&m(u),d&&m(w),d&&m(q),d&&m(i),d&&m(_),d&&m(W)}}}function wt(r){let e,s;return e=new xe({props:{slot:"headers",$$slots:{default:[pt]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,l){const a={};l&4&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function bt(r){let e,s;return e=new Ze({props:{class:"w-full md:table-fixed",updating:r[0],$$slots:{headers:[wt],default:[ht]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,[l]){const a={};l&1&&(a.updating=t[0]),l&4&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function kt(r,e,s){let{$$slots:t={},$$scope:l}=e,{updating:a=!1}=e;return r.$$set=o=>{"updating"in o&&s(0,a=o.updating),"$$scope"in o&&s(2,l=o.$$scope)},[a,t,l]}class Yt extends be{constructor(e){super(),ke(this,e,kt,bt,ie,{updating:0})}}const vt=r=>{const e=[],s=()=>{t&&(e.push(t),t="")};let t="",l=0;for(;l<r.length;){const a=r[l];if(at(a)){t+=a,s(),l++;continue}if(Ee(a)){const o=`${r[l]}${r[l+1]}`,n=`${r[l]}${r[l+1]}${r[l+2]}`;if(Ee(n)){s(),t+=n,l+=3;continue}else if(Ee(o)){s(),t+=o,l+=2;continue}else{s(),t+=a,l++;continue}}if(nt(a)||ft(a)){s(),l++;continue}t+=a,l++}return s(),e},ge=r=>e=>e.toLowerCase()===r.toLowerCase(),we=(r,e)=>r[e+2],Tt=r=>{if(!!r){for(const e of st)if(r[e])return{[e]:r[e]}}},gt=ge("WorkflowType"),yt=ge("WorkflowId"),Et=ge("StartTime"),St=ge("ExecutionStatus"),Ft=r=>{const e=vt(r),s={workflowId:"",workflowType:"",executionStatus:null,timeRange:null};return e.forEach((t,l)=>{if(yt(t)&&(s.workflowId=we(e,l)),gt(t)&&(s.workflowType=we(e,l)),St(t)){const a=we(e,l);ut(a)&&(s.executionStatus=a)}if(Et(t)){const a=we(e,l);try{const o=tt(a),n=Tt(o);s.timeRange=lt(n)}catch(o){console.error("Error parsing StartTime from query",o)}}}),s};function Re(r){let e,s,t,l,a,o=r[1]&&Qe(r),n=r[2]&&ze(r);return{c(){e=g("div"),o&&o.c(),s=P(),n&&n.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var u=F(e);o&&o.l(u),s=C(u),n&&n.l(u),u.forEach(m),this.h()},h(){k(e,"class","copy-or-filter svelte-uzo6ow")},m(c,u){T(c,e,u),o&&o.m(e,null),p(e,s),n&&n.m(e,null),t=!0,l||(a=B(e,"click",Te(ce(ve))),l=!0)},p(c,u){c[1]?o?(o.p(c,u),u&2&&E(o,1)):(o=Qe(c),o.c(),E(o,1),o.m(e,s)):o&&(fe(),I(o,1,1,()=>{o=null}),ue()),c[2]?n?(n.p(c,u),u&4&&E(n,1)):(n=ze(c),n.c(),E(n,1),n.m(e,null)):n&&(fe(),I(n,1,1,()=>{n=null}),ue())},i(c){t||(E(o),E(n),t=!0)},o(c){I(o),I(n),t=!1},d(c){c&&m(e),o&&o.d(),n&&n.d(),l=!1,a()}}}function Qe(r){let e,s=r[5],t,l,a,o=Ve(r);return{c(){e=g("button"),o.c()},l(n){e=y(n,"BUTTON",{});var c=F(e);o.l(c),c.forEach(m)},m(n,c){T(n,e,c),o.m(e,null),t=!0,l||(a=B(e,"click",Te(ce(function(){Ye(r[4])&&r[4].apply(this,arguments)}))),l=!0)},p(n,c){r=n,c&32&&ie(s,s=r[5])?(fe(),I(o,1,1,ve),ue(),o=Ve(r),o.c(),E(o,1),o.m(e,null)):o.p(r,c)},i(n){t||(E(o),t=!0)},o(n){I(o),t=!1},d(n){n&&m(e),o.d(n),l=!1,a()}}}function Ve(r){let e,s;return e=new Fe({props:{name:"filter",class:"h-4 w-4 rounded-sm "+(r[5]?"bg-gray-900 text-white":"")}}),{c(){z(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,l){const a={};l&32&&(a.class="h-4 w-4 rounded-sm "+(t[5]?"bg-gray-900 text-white":"")),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function ze(r){let e,s,t,l,a;return s=new Fe({props:{name:r[6]?"checkmark":"copy",stroke:"#000"}}),{c(){e=g("button"),z(s.$$.fragment)},l(o){e=y(o,"BUTTON",{});var n=F(e);M(s.$$.fragment,n),n.forEach(m)},m(o,n){T(o,e,n),j(s,e,null),t=!0,l||(a=B(e,"click",Te(ce(r[9]))),l=!0)},p(o,n){const c={};n&64&&(c.name=o[6]?"checkmark":"copy"),s.$set(c)},i(o){t||(E(s.$$.fragment,o),t=!0)},o(o){I(s.$$.fragment,o),t=!1},d(o){o&&m(e),K(s),l=!1,a()}}}function Wt(r){let e,s,t=r[0]&&Re(r);return{c(){t&&t.c(),e=Be()},l(l){t&&t.l(l),e=Be()},m(l,a){t&&t.m(l,a),T(l,e,a),s=!0},p(l,[a]){l[0]?t?(t.p(l,a),a&1&&E(t,1)):(t=Re(l),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(fe(),I(t,1,1,()=>{t=null}),ue())},i(l){s||(E(t),s=!0)},o(l){I(t),s=!1},d(l){t&&t.d(l),l&&m(e)}}}function Dt(r,e,s){let t,{show:l=!1}=e,{filterable:a=!0}=e,{copyable:o=!0}=e,{content:n}=e,{onFilter:c=ve}=e,{filtered:u=!1}=e;const{copy:w,copied:h}=ct(700);Se(r,h,i=>s(6,t=i));const q=i=>w(i,n);return r.$$set=i=>{"show"in i&&s(0,l=i.show),"filterable"in i&&s(1,a=i.filterable),"copyable"in i&&s(2,o=i.copyable),"content"in i&&s(3,n=i.content),"onFilter"in i&&s(4,c=i.onFilter),"filtered"in i&&s(5,u=i.filtered)},[l,a,o,n,c,u,t,w,h,q]}class Me extends be{constructor(e){super(),ke(this,e,Dt,Wt,ie,{show:0,filterable:1,copyable:2,content:3,onFilter:4,filtered:5})}}function It(r){var De,Ie,Pe;let e,s,t,l,a,o=r[0].id+"",n,c,u,w,h,q=G(r[0].startTime,r[1])+"",i,b,_,W,A,d,S,R=r[0].name+"",D,J,H,U,X,Z=G(r[0].endTime,r[1])+"",me,_e,x,le,se=G(r[0].startTime,r[1])+"",de,he,ee,re,oe=G(r[0].endTime,r[1])+"",pe,Q,ye,We;return s=new it({props:{status:r[0].status,delay:Ue(r[0].startTime)}}),u=new Me({props:{show:r[2],content:r[0].id,filterable:!1}}),H=new Me({props:{show:r[2],content:r[0].name,onFilter:r[13],filtered:(Pe=(Ie=(De=r[4].url)==null?void 0:De.searchParams)==null?void 0:Ie.get("query"))==null?void 0:Pe.includes(r[0].name)}}),{c(){e=g("td"),z(s.$$.fragment),t=P(),l=g("td"),a=g("span"),n=L(o),c=P(),z(u.$$.fragment),w=P(),h=g("p"),i=L(q),b=P(),_=g("td"),W=g("h3"),A=L("Workflow Name:"),d=P(),S=g("span"),D=L(R),J=P(),z(H.$$.fragment),U=P(),X=g("p"),me=L(Z),_e=P(),x=g("td"),le=g("p"),de=L(se),he=P(),ee=g("td"),re=g("p"),pe=L(oe),this.h()},l(f){e=y(f,"TD",{});var v=F(e);M(s.$$.fragment,v),v.forEach(m),t=C(f),l=y(f,"TD",{class:!0});var V=F(l);a=y(V,"SPAN",{class:!0});var te=F(a);n=N(te,o),te.forEach(m),c=C(V),M(u.$$.fragment,V),w=C(V),h=y(V,"P",{class:!0});var $=F(h);i=N($,q),$.forEach(m),V.forEach(m),b=C(f),_=y(f,"TD",{class:!0});var O=F(_);W=y(O,"H3",{class:!0});var ae=F(W);A=N(ae,"Workflow Name:"),ae.forEach(m),d=C(O),S=y(O,"SPAN",{class:!0});var ne=F(S);D=N(ne,R),ne.forEach(m),J=C(O),M(H.$$.fragment,O),U=C(O),X=y(O,"P",{class:!0});var Ce=F(X);me=N(Ce,Z),Ce.forEach(m),O.forEach(m),_e=C(f),x=y(f,"TD",{class:!0});var qe=F(x);le=y(qe,"P",{});var He=F(le);de=N(He,se),He.forEach(m),qe.forEach(m),he=C(f),ee=y(f,"TD",{class:!0});var Le=F(ee);re=y(Le,"P",{});var Ne=F(re);pe=N(Ne,oe),Ne.forEach(m),Le.forEach(m),this.h()},h(){k(a,"class","table-link svelte-si1lto"),k(h,"class","inline-time-cell svelte-si1lto"),k(l,"class","relative truncate"),k(W,"class","md:hidden"),k(S,"class","table-link svelte-si1lto"),k(X,"class","inline-time-cell svelte-si1lto"),k(_,"class","relative truncate"),k(x,"class","time-cell svelte-si1lto"),k(ee,"class","time-cell svelte-si1lto")},m(f,v){T(f,e,v),j(s,e,null),T(f,t,v),T(f,l,v),p(l,a),p(a,n),p(l,c),j(u,l,null),p(l,w),p(l,h),p(h,i),T(f,b,v),T(f,_,v),p(_,W),p(W,A),p(_,d),p(_,S),p(S,D),p(_,J),j(H,_,null),p(_,U),p(_,X),p(X,me),T(f,_e,v),T(f,x,v),p(x,le),p(le,de),T(f,he,v),T(f,ee,v),p(ee,re),p(re,pe),Q=!0,ye||(We=[B(l,"mouseover",r[8]),B(l,"focus",r[9]),B(l,"mouseleave",r[10]),B(l,"blur",r[11]),B(S,"click",Te(ce(r[12]))),B(_,"mouseover",r[14]),B(_,"focus",r[15]),B(_,"mouseleave",r[16]),B(_,"blur",r[17])],ye=!0)},p(f,v){var O,ae,ne;const V={};v&1&&(V.status=f[0].status),v&1&&(V.delay=Ue(f[0].startTime)),s.$set(V),(!Q||v&1)&&o!==(o=f[0].id+"")&&Y(n,o);const te={};v&4&&(te.show=f[2]),v&1&&(te.content=f[0].id),u.$set(te),(!Q||v&3)&&q!==(q=G(f[0].startTime,f[1])+"")&&Y(i,q),(!Q||v&1)&&R!==(R=f[0].name+"")&&Y(D,R);const $={};v&4&&($.show=f[2]),v&1&&($.content=f[0].name),v&1&&($.onFilter=f[13]),v&17&&($.filtered=(ne=(ae=(O=f[4].url)==null?void 0:O.searchParams)==null?void 0:ae.get("query"))==null?void 0:ne.includes(f[0].name)),H.$set($),(!Q||v&3)&&Z!==(Z=G(f[0].endTime,f[1])+"")&&Y(me,Z),(!Q||v&3)&&se!==(se=G(f[0].startTime,f[1])+"")&&Y(de,se),(!Q||v&3)&&oe!==(oe=G(f[0].endTime,f[1])+"")&&Y(pe,oe)},i(f){Q||(E(s.$$.fragment,f),E(u.$$.fragment,f),E(H.$$.fragment,f),Q=!0)},o(f){I(s.$$.fragment,f),I(u.$$.fragment,f),I(H.$$.fragment,f),Q=!1},d(f){f&&m(e),K(s),f&&m(t),f&&m(l),K(u),f&&m(b),f&&m(_),K(H),f&&m(_e),f&&m(x),f&&m(he),f&&m(ee),ye=!1,Ke(We)}}}function Pt(r){let e,s;return e=new mt({props:{href:r[3],class:"workflow-summary-row",$$slots:{default:[It]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,[l]){const a={};l&8&&(a.href=t[3]),l&262167&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function Ct(r,e,s){let t,l,a;Se(r,et,D=>s(4,l=D)),Se(r,_t,D=>s(7,a=D));let{namespace:o}=e,{workflow:n}=e,{timeFormat:c}=e,u=!1;const w=D=>{const J=Oe({timeRange:"All"}),H=l.url.searchParams.get("query"),U=Ft(H!=null?H:J),X=(U==null?void 0:U.workflowType)===D?"":D,Z=Oe({...U,workflowType:X});ot({url:l.url,parameter:"query",value:Z,allowEmpty:!0})},h=()=>s(2,u=!0),q=()=>s(2,u=!0),i=()=>s(2,u=!1),b=()=>s(2,u=!1),_=()=>w(n.name),W=()=>w(n.name),A=()=>s(2,u=!0),d=()=>s(2,u=!0),S=()=>s(2,u=!1),R=()=>s(2,u=!1);return r.$$set=D=>{"namespace"in D&&s(6,o=D.namespace),"workflow"in D&&s(0,n=D.workflow),"timeFormat"in D&&s(1,c=D.timeFormat)},r.$$.update=()=>{r.$$.dirty&193&&s(3,t=rt({view:a,namespace:o,workflow:n.id,run:n.runId}))},[n,c,u,t,l,w,o,a,h,q,i,b,_,W,A,d,S,R]}class Zt extends be{constructor(e){super(),ke(this,e,Ct,Pt,ie,{namespace:6,workflow:0,timeFormat:1})}}var xt=qt;function qt(r,e,s,t){var l,a,o;return function(){if(o=this,a=Array.prototype.slice.call(arguments),l&&(s||t))return;if(!s)return u(),l=setTimeout(c,e),l;l=setTimeout(u,e),r.apply(o,a);function c(){u(),r.apply(o,a)}function u(){clearTimeout(l),l=null}}}function je(r){let e,s;return e=new Fe({props:{name:"search",class:"ml-4 flex items-center text-gray-700"}}),{c(){z(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function Ht(r){let e;return{c(){e=L(r[2])},l(s){e=N(s,r[2])},m(s,t){T(s,e,t)},p(s,t){t&4&&Y(e,s[2])},d(s){s&&m(e)}}}function Lt(r){let e,s,t,l,a,o,n,c,u,w,h,q,i=r[4]&&je();return u=new dt({props:{class:"m-2",type:"submit",$$slots:{default:[Ht]},$$scope:{ctx:r}}}),{c(){e=g("form"),i&&i.c(),s=P(),t=g("label"),l=L(r[2]),a=P(),o=g("input"),n=P(),c=g("div"),z(u.$$.fragment),this.h()},l(b){e=y(b,"FORM",{class:!0});var _=F(e);i&&i.l(_),s=C(_),t=y(_,"LABEL",{for:!0,class:!0});var W=F(t);l=N(W,r[2]),W.forEach(m),a=C(_),o=y(_,"INPUT",{id:!0,type:!0,class:!0,name:!0,placeholder:!0,autocomplete:!0}),n=C(_),c=y(_,"DIV",{});var A=F(c);M(u.$$.fragment,A),A.forEach(m),_.forEach(m),this.h()},h(){k(t,"for",r[5]),k(t,"class","hidden"),k(o,"id",r[5]),k(o,"type","text"),k(o,"class","w-full rounded-l-lg px-4 focus:outline-none"),k(o,"name",r[3]),o.value=r[1],k(o,"placeholder",r[0]),k(o,"autocomplete","off"),k(e,"class","relative flex items-center rounded-lg border-2 transition-colors focus-within:border-blue-700")},m(b,_){T(b,e,_),i&&i.m(e,null),p(e,s),p(e,t),p(t,l),p(e,a),p(e,o),p(e,n),p(e,c),j(u,c,null),w=!0,h||(q=[B(o,"input",r[7]),B(e,"submit",ce(r[6]))],h=!0)},p(b,[_]){b[4]?i?_&16&&E(i,1):(i=je(),i.c(),E(i,1),i.m(e,s)):i&&(fe(),I(i,1,1,()=>{i=null}),ue()),(!w||_&4)&&Y(l,b[2]),(!w||_&32)&&k(t,"for",b[5]),(!w||_&32)&&k(o,"id",b[5]),(!w||_&8)&&k(o,"name",b[3]),(!w||_&2&&o.value!==b[1])&&(o.value=b[1]),(!w||_&1)&&k(o,"placeholder",b[0]);const W={};_&260&&(W.$$scope={dirty:_,ctx:b}),u.$set(W)},i(b){w||(E(i),E(u.$$.fragment,b),w=!0)},o(b){I(i),I(u.$$.fragment,b),w=!1},d(b){b&&m(e),i&&i.d(),K(u),h=!1,Ke(q)}}}function Nt(r,e,s){let{placeholder:t=""}=e,{value:l=""}=e,{label:a="Search"}=e,{name:o="query"}=e,{icon:n=!1}=e,{id:c=`${a.toLocaleUpperCase()}-input`}=e;function u(h){Ae.call(this,r,h)}function w(h){Ae.call(this,r,h)}return r.$$set=h=>{"placeholder"in h&&s(0,t=h.placeholder),"value"in h&&s(1,l=h.value),"label"in h&&s(2,a=h.label),"name"in h&&s(3,o=h.name),"icon"in h&&s(4,n=h.icon),"id"in h&&s(5,c=h.id)},[t,l,a,o,n,c,u,w]}class el extends be{constructor(e){super(),ke(this,e,Nt,Lt,ie,{placeholder:0,value:1,label:2,name:3,icon:4,id:5})}}export{Me as F,el as S,Yt as W,Zt as a,vt as b,xt as j,Ft as t};
