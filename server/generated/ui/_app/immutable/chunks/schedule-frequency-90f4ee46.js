import{r as m,a as p}from"./route-for-api-413b73f0.js";import{s as $}from"./parse-with-big-int-561ccb8b.js";import{v as k}from"./v4-43adb29c.js";import{S as A,i as D,s as R,l as _,m as S,n as b,h as f,p as v,b as y,F as w,D as x,R as I,r as g,a as H,u as E,c as L,N as T,v as F}from"./index-6c7cd618.js";import{g as j,w as M,m as U}from"./calendar-a32d73c2.js";const X=async(l,e=fetch)=>{var n;let a="";const i=c=>{var r,u;return a=(u=(r=c==null?void 0:c.body)==null?void 0:r.message)!=null?u:`Error fetching schedules: ${c.status}: ${c.statusText}`},t=await m("schedules",{namespace:l}),{schedules:o,nextPageToken:s}=(n=await p(t,{params:{},onError:i,request:e}))!=null?n:{schedules:[],nextPageToken:""};return{schedules:o,nextPageToken:String(s),error:a}};async function Y(l,e=fetch){const a=await m("schedule",l);return p(a,{request:e})}async function Z(l,e=fetch){const a=await m("schedule.delete",l);return p(a,{request:e,options:{method:"DELETE"}})}async function ee({namespace:l,body:e}){let a="";const i=s=>{var n,c;return a=(c=(n=s==null?void 0:s.body)==null?void 0:n.message)!=null?c:`Error creating schedule: ${s.status}: ${s.statusText}`},t=await m("schedules",{namespace:l}),{conflictToken:o}=await p(t,{options:{method:"POST",body:$({request_id:k(),...e})},shouldRetry:!1,onError:i});return{conflictToken:o,error:a}}async function te({namespace:l,scheduleId:e,body:a}){let i="";const t=s=>{var n,c;return i=(c=(n=s==null?void 0:s.body)==null?void 0:n.message)!=null?c:`Error editing schedule: ${s.status}: ${s.statusText}`},o=await m("schedule",{namespace:l,scheduleId:e});return await p(o,{options:{method:"POST",body:$({request_id:k(),...a})},shouldRetry:!1,onError:t}),{error:i}}async function se({namespace:l,scheduleId:e,reason:a}){const i={patch:{pause:a}},t=await m("schedule",{namespace:l,scheduleId:e});return await p(t,{options:{method:"PATCH",body:$({...i,request_id:k()})},shouldRetry:!1,onError:o=>console.error(o)})}async function ae({namespace:l,scheduleId:e,reason:a}){const i={patch:{unpause:a}},t=await m("schedule",{namespace:l,scheduleId:e});return await p(t,{options:{method:"PATCH",body:$({...i,request_id:k()})},shouldRetry:!1})}const ne=({preset:l,month:e,dayOfMonth:a,dayOfWeek:i,hour:t,minute:o})=>{let s="";const n=!t||!parseInt(t)||parseInt(t)<12?"am":"pm",r=`${(!t||!parseInt(t)?"12":parseInt(t)<=12?t:(parseInt(t)-12).toString()).padStart(2,"0")}:${o?o.padStart(2,"0"):"00"}${n}`;if(l==="week"){const u=j.find(d=>d.value===i);u?s=`${u.label} at ${r}`:s=`${i.split(",").map(P=>M.find(N=>N.value===P).label).join(", ")} at ${r}`}else if(l==="month")if(e==="*")s=`Every ${a} of the month at ${r}`;else{const d=e.split(",").map(h=>U.find(q=>q.value===h).label).join(", ");s=`Every ${a} of ${d} at ${r}`}return s},C=(l="",e=!1)=>{let a="";if(!l)return a;const i=parseInt(l.slice(0,-1)),t=Math.floor(i/(60*60*24));let o=i-(t>0?t*60*60*24:0);const s=Math.floor(o/(60*60));o=o-(s>0?s*60*60:0);const n=Math.floor(o/60),c=n>0?o-n*60:o,r=`${s?s.toString().padStart(2,"0"):"00"}hrs`,u=`${n?n.toString().padStart(2,"0"):"00"}min`,d=`${c?c.toString().padStart(2,"0"):"00"}sec`,h=e?"Offset":"Every";return t?a=`${h} ${t}days:${r}:${u}:${d}`:s?a=`${h} ${r}:${u}:${d}`:n?a=`${h} ${u}:${d}`:c&&(a=`${h} ${d}`),a};function W(l){let e,a=C(l[1])+"",i,t,o,s=C(l[2],!0)+"",n;return{c(){e=_("p"),i=g(a),t=H(),o=_("p"),n=g(s),this.h()},l(c){e=S(c,"P",{"data-cy":!0});var r=b(e);i=E(r,a),r.forEach(f),t=L(c),o=S(c,"P",{"data-cy":!0});var u=b(o);n=E(u,s),u.forEach(f),this.h()},h(){v(e,"data-cy","schedule-interval-frequency"),v(o,"data-cy","schedule-phase-frequency")},m(c,r){y(c,e,r),T(e,i),y(c,t,r),y(c,o,r),T(o,n)},p:w,d(c){c&&f(e),c&&f(t),c&&f(o)}}}function B(l){var o,s;let e,a=((s=(o=l[0])==null?void 0:o.comment)!=null?s:"")+"",i,t;return{c(){e=_("p"),i=g(a),t=g(" UTC"),this.h()},l(n){e=S(n,"P",{"data-cy":!0});var c=b(e);i=E(c,a),t=E(c," UTC"),c.forEach(f),this.h()},h(){v(e,"data-cy","schedule-calendar-frequency")},m(n,c){y(n,e,c),T(e,i),T(e,t)},p(n,c){var r,u;c&1&&a!==(a=((u=(r=n[0])==null?void 0:r.comment)!=null?u:"")+"")&&F(i,a)},d(n){n&&f(e)}}}function O(l){let e,a;function i(s,n){return s[0]?B:W}let t=i(l),o=t(l);return{c(){e=_("div"),o.c(),this.h()},l(s){e=S(s,"DIV",{class:!0});var n=b(e);o.l(n),n.forEach(f),this.h()},h(){v(e,"class",a="flex flex-col "+l[3].class)},m(s,n){y(s,e,n),o.m(e,null)},p(s,[n]){t===(t=i(s))&&o?o.p(s,n):(o.d(1),o=t(s),o&&(o.c(),o.m(e,null))),n&8&&a!==(a="flex flex-col "+s[3].class)&&v(e,"class",a)},i:w,o:w,d(s){s&&f(e),o.d()}}}function V(l,e,a){let{calendar:i=void 0}=e,{interval:t=void 0}=e;const o=t==null?void 0:t.interval,s=t==null?void 0:t.phase;return l.$$set=n=>{a(3,e=x(x({},e),I(n))),"calendar"in n&&a(0,i=n.calendar),"interval"in n&&a(4,t=n.interval)},e=I(e),[i,o,s,e,t]}class oe extends A{constructor(e){super(),D(this,e,V,O,R,{calendar:0,interval:4})}}export{oe as S,ne as a,X as b,ee as c,Z as d,te as e,Y as f,se as p,ae as u};
