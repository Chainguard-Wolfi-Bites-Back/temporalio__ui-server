import{w as d}from"./index-e5247e3a.js";const g=t=>typeof t=="function";function S(t,r=null,f=!1){var l,a,i;let s=g(r)?r():r,o;try{(l=window==null?void 0:window.localStorage)!=null&&l.getItem(t)&&(s=JSON.parse((i=(a=window==null?void 0:window.localStorage)==null?void 0:a.getItem(t))!=null?i:""))}catch{s=null}const{subscribe:p,set:n}=d(s);if(f)try{o=new BroadcastChannel(`persist-store-${t}`),o==null||o.addEventListener("message",e=>{n(e.data)})}catch{console.error("Browser does not support BroadcastChannel")}return{subscribe:p,set:e=>{var c,w;o&&o.postMessage(e),e===null?(c=window==null?void 0:window.localStorage)==null||c.removeItem(t):(w=window==null?void 0:window.localStorage)==null||w.setItem(t,JSON.stringify(e)),n(e)}}}export{g as i,S as p};
