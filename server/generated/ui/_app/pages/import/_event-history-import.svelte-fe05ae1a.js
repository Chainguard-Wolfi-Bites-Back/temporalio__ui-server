import{S as $,i as y,s as h,e as g,k as b,w as S,c as w,m as N,x as C,b as c,g as u,y as E,T as x,q as O,o as T,d as f,B as k,t as F,h as I}from"../../chunks/index-c85ade65.js";import{f as U}from"../../chunks/route-for-767137f5.js";import{g as A}from"../../chunks/navigation-6709cf39.js";import{B}from"../../chunks/button-6823eb61.js";import{t as J}from"../../chunks/index-253217d3.js";import{n as v}from"../../chunks/notifications-9d24bb07.js";import{i as q,a as G}from"../../chunks/import-events-cf01b60a.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/index-c8da0ebb.js";import"../../chunks/badge-aff3796f.js";import"../../chunks/is-http-249a0663.js";import"../../chunks/index-203c0d43.js";import"../../chunks/persist-store-9b44ce28.js";import"../../chunks/is-function-b969a126.js";import"../../chunks/data-converter-config-b3e1b826.js";import"../../chunks/atob-02b88f56.js";import"../../chunks/format-date-ecf4453c.js";import"../../chunks/to-duration-6d22e6d2.js";import"../../chunks/is-419a79e8.js";import"../../chunks/index-d27505fa.js";import"../../chunks/has-b7e06397.js";import"../../chunks/get-event-categorization-997d5ab1.js";import"../../chunks/simplify-attributes-018c5a8d.js";const _={auth:{enabled:!1,options:[]},baseUrl:"base",codec:{},defaultNamespace:"namespace",showTemporalSystemNamespace:!1,notifyOnNewVersion:!1,feedbackURL:"",runtimeEnvironment:{isCloud:!1,isLocal:!0,envOverride:!1},version:"2.0.0"};function L(m){let t;return{c(){t=F("Import")},l(s){t=I(s,"Import")},m(s,o){u(s,t,o)},d(s){s&&f(t)}}}function R(m){let t,s,o,n,a,i;return o=new B({props:{icon:"fileUpload",$$slots:{default:[L]},$$scope:{ctx:m}}}),o.$on("click",m[1]),{c(){t=g("input"),s=b(),S(o.$$.fragment),this.h()},l(e){t=w(e,"INPUT",{class:!0,type:!0,accept:!0}),s=N(e),C(o.$$.fragment,e),this.h()},h(){c(t,"class","import-input block rounded-md border border-gray-200 p-2"),c(t,"type","file"),c(t,"accept",".json")},m(e,r){u(e,t,r),u(e,s,r),E(o,e,r),n=!0,a||(i=x(t,"change",m[0]),a=!0)},p(e,[r]){const l={};r&8&&(l.$$scope={dirty:r,ctx:e}),o.$set(l)},i(e){n||(O(o.$$.fragment,e),n=!0)},o(e){T(o.$$.fragment,e),n=!1},d(e){e&&f(t),e&&f(s),k(o,e),a=!1,i()}}}function j(m){let t;return[async n=>{var a;const i=n.target,e=(a=i==null?void 0:i.files)===null||a===void 0?void 0:a[0],r=new FileReader;e&&(r.readAsText(e),r.onload=()=>{var l,p;try{const d=(p=(l=r==null?void 0:r.result)===null||l===void 0?void 0:l.toString())!==null&&p!==void 0?p:"";t=JSON.parse(d)}catch{v.add("error","Could not parse JSON")}})},async()=>{try{const{events:n,eventGroups:a}=await J({response:Array.isArray(t)?t:t==null?void 0:t.events,namespace:_.defaultNamespace,settings:_});q.set(n),G.set(a);const i=U({importType:"events",view:"feed"});A(i)}catch(n){console.error(n),v.add("error","Could not create event history from JSON")}}]}class ct extends ${constructor(t){super(),y(this,t,j,R,h,{})}}export{ct as default};
