import{S as K,i as M,s as O,l as W,f as w,u as v,w as R,x as h,d as b,r as V,e as q,t as N,k as F,j as g,c as T,a as C,g as H,n as D,m as E,J as S,o as j,v as A,b as P,D as X,E as Y,ag as Q,F as Z,ah as x,Q as y,ai as ee}from"../../../../chunks/vendor-7695a512.js";import{b as U}from"../../../../chunks/workflow-status-487fd9de.js";import{W as te,a as le,b as re,c as ae}from"../../../../chunks/_workflows-loading-52e814fb.js";import{E as oe}from"../../../../chunks/empty-state-a21eaeee.js";import{C as z}from"../../../../chunks/code-block-701d5f9b.js";import"../../../../chunks/route-for-api-5db90934.js";import"../../../../chunks/notifications-e48f3a87.js";import"../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../chunks/format-date-ced8063a.js";import"../../../../chunks/namespace-56dad3ef.js";import"../../../../chunks/stores-4910e5d2.js";import"../../../../chunks/route-for-11851a4f.js";import"../../../../chunks/navigation-51f4a605.js";import"../../../../chunks/singletons-12a22614.js";import"../../../../chunks/select-24218981.js";import"../../../../chunks/filter-select-14435650.js";import"../../../../chunks/append-query-parameters-b8619cc0.js";function B(n){n[8]=n[9].workflows}function ne(n){let e,l,t,r,s,o,f,a,u,k,d,m,c,p;f=new z({props:{content:"tctl --namespace default namespace update --has enabled",language:"text"}});let _=!n[1]&&G();return{c(){e=q("h2"),l=N("This namespace is currently not enabled for archival."),t=F(),r=q("p"),s=N("Run this command to enable Archival for Event Histories:"),o=F(),g(f.$$.fragment),a=F(),_&&_.c(),u=F(),k=q("p"),d=N("For more details please check out "),m=q("a"),c=N("Archival Docs"),this.h()},l(i){e=T(i,"H2",{class:!0});var $=C(e);l=H($,"This namespace is currently not enabled for archival."),$.forEach(b),t=D(i),r=T(i,"P",{});var J=C(r);s=H(J,"Run this command to enable Archival for Event Histories:"),J.forEach(b),o=D(i),E(f.$$.fragment,i),a=D(i),_&&_.l(i),u=D(i),k=T(i,"P",{});var I=C(k);d=H(I,"For more details please check out "),m=T(I,"A",{class:!0,href:!0});var L=C(m);c=H(L,"Archival Docs"),L.forEach(b),I.forEach(b),this.h()},h(){P(e,"class","text-2xl"),P(m,"class","text-blue-700 underline"),P(m,"href","https://docs.temporal.io/docs/server/archive-data/")},m(i,$){w(i,e,$),S(e,l),w(i,t,$),w(i,r,$),S(r,s),w(i,o,$),j(f,i,$),w(i,a,$),_&&_.m(i,$),w(i,u,$),w(i,k,$),S(k,d),S(k,m),S(m,c),p=!0},p(i,$){i[1]?_&&(V(),v(_,1,1,()=>{_=null}),R()):_?$&2&&h(_,1):(_=G(),_.c(),h(_,1),_.m(u.parentNode,u))},i(i){p||(h(f.$$.fragment,i),h(_),p=!0)},o(i){v(f.$$.fragment,i),v(_),p=!1},d(i){i&&b(e),i&&b(t),i&&b(r),i&&b(o),A(f,i),i&&b(a),_&&_.d(i),i&&b(u),i&&b(k)}}}function se(n){let e,l,t,r,s,o,f,a,u;function k(c){n[7](c)}let d={};n[2]!==void 0&&(d.timeFormat=n[2]),r=new te({props:d}),X.push(()=>Y(r,"timeFormat",k));let m={ctx:n,current:null,token:null,hasCatch:!1,pending:pe,then:ce,catch:ie,value:9,blocks:[,,,]};return Q(a=n[3],m),{c(){e=q("h2"),l=N("Archived Workflows"),t=F(),g(r.$$.fragment),o=F(),f=W(),m.block.c(),this.h()},l(c){e=T(c,"H2",{class:!0});var p=C(e);l=H(p,"Archived Workflows"),p.forEach(b),t=D(c),E(r.$$.fragment,c),o=D(c),f=W(),m.block.l(c),this.h()},h(){P(e,"class","text-2xl")},m(c,p){w(c,e,p),S(e,l),w(c,t,p),j(r,c,p),w(c,o,p),w(c,f,p),m.block.m(c,m.anchor=p),m.mount=()=>f.parentNode,m.anchor=f,u=!0},p(c,p){n=c;const _={};!s&&p&4&&(s=!0,_.timeFormat=n[2],Z(()=>s=!1)),r.$set(_),m.ctx=n,p&8&&a!==(a=n[3])&&Q(a,m)||x(m,n,p)},i(c){u||(h(r.$$.fragment,c),h(m.block),u=!0)},o(c){v(r.$$.fragment,c);for(let p=0;p<3;p+=1){const _=m.blocks[p];v(_)}u=!1},d(c){c&&b(e),c&&b(t),A(r,c),c&&b(o),c&&b(f),m.block.d(c),m.token=null,m=null}}}function G(n){let e,l,t,r,s;return r=new z({props:{content:"tctl --namespace default namespace update -vas enabled",language:"text"}}),{c(){e=q("p"),l=N("To enable Visibility Archival:"),t=F(),g(r.$$.fragment)},l(o){e=T(o,"P",{});var f=C(e);l=H(f,"To enable Visibility Archival:"),f.forEach(b),t=D(o),E(r.$$.fragment,o)},m(o,f){w(o,e,f),S(e,l),w(o,t,f),j(r,o,f),s=!0},i(o){s||(h(r.$$.fragment,o),s=!0)},o(o){v(r.$$.fragment,o),s=!1},d(o){o&&b(e),o&&b(t),A(r,o)}}}function ie(n){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function ce(n){B(n);let e,l,t,r;const s=[ue,fe],o=[];function f(a,u){return a[8].length?0:1}return e=f(n),l=o[e]=s[e](n),{c(){l.c(),t=W()},l(a){l.l(a),t=W()},m(a,u){o[e].m(a,u),w(a,t,u),r=!0},p(a,u){B(a);let k=e;e=f(a),e===k?o[e].p(a,u):(V(),v(o[k],1,1,()=>{o[k]=null}),R(),l=o[e],l?l.p(a,u):(l=o[e]=s[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){r||(h(l),r=!0)},o(a){v(l),r=!1},d(a){o[e].d(a),a&&b(t)}}}function fe(n){let e,l;return e=new oe({props:{title:"No Workflows Found",content:"If you have filters applied, try adjusting them."}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){j(e,t,r),l=!0},p:y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ue(n){let e,l;return e=new re({props:{$$slots:{default:[_e]},$$scope:{ctx:n}}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){j(e,t,r),l=!0},p(t,r){const s={};r&2060&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function me(n){let e,l;return e=new ae({props:{workflow:n[10],timeFormat:n[2]}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){j(e,t,r),l=!0},p(t,r){const s={};r&1024&&(s.workflow=t[10]),r&4&&(s.timeFormat=t[2]),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function _e(n){let e,l;return e=new ee({props:{items:n[8],$$slots:{default:[me,({item:t})=>({10:t}),({item:t})=>t?1024:0]},$$scope:{ctx:n}}}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){j(e,t,r),l=!0},p(t,r){const s={};r&8&&(s.items=t[8]),r&3076&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function pe(n){let e,l;return e=new le({}),{c(){g(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,r){j(e,t,r),l=!0},p:y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ke(n){let e,l,t,r;const s=[se,ne],o=[];function f(a,u){return a[0]?0:1}return e=f(n),l=o[e]=s[e](n),{c(){l.c(),t=W()},l(a){l.l(a),t=W()},m(a,u){o[e].m(a,u),w(a,t,u),r=!0},p(a,[u]){let k=e;e=f(a),e===k?o[e].p(a,u):(V(),v(o[k],1,1,()=>{o[k]=null}),R(),l=o[e],l?l.p(a,u):(l=o[e]=s[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){r||(h(l),r=!0)},o(a){v(l),r=!1},d(a){o[e].d(a),a&&b(t)}}}async function Ce({page:n,fetch:e,stuff:l}){var t,r;n.query.has("time-range")||n.query.set("time-range","24 hours");const s=n.params.namespace,o=n.query.get("workflow-id"),f=n.query.get("workflow-type"),a=n.query.get("time-range"),u=n.query.get("status"),k={workflowId:o,workflowType:f,closeTime:a,executionStatus:u},m=l.namespaces.find(i=>i.namespaceInfo.name===s),c=((t=m==null?void 0:m.config)===null||t===void 0?void 0:t.historyArchivalState)==="Enabled",p=((r=m==null?void 0:m.config)===null||r===void 0?void 0:r.visibilityArchivalState)==="Enabled";return{props:{initialData:c?await U(s,k,e):Promise.resolve(null),namespace:s,parameters:k,archivalEnabled:c,visibilityArchivalEnabled:p}}}function be(n,e,l){let{namespace:t}=e,{initialData:r}=e,{parameters:s}=e,{archivalEnabled:o=!1}=e,{visibilityArchivalEnabled:f=!1}=e,a="UTC",u=r;function k(d){a=d,l(2,a)}return n.$$set=d=>{"namespace"in d&&l(4,t=d.namespace),"initialData"in d&&l(5,r=d.initialData),"parameters"in d&&l(6,s=d.parameters),"archivalEnabled"in d&&l(0,o=d.archivalEnabled),"visibilityArchivalEnabled"in d&&l(1,f=d.visibilityArchivalEnabled)},n.$$.update=()=>{n.$$.dirty&81&&o&&l(3,u=U(t,s))},[o,f,a,u,t,r,s,k]}class He extends K{constructor(e){super();M(this,e,be,ke,O,{namespace:4,initialData:5,parameters:6,archivalEnabled:0,visibilityArchivalEnabled:1})}}export{He as default,Ce as load};
