import{S as le,i as ae,s as ie,e as H,k as C,c as I,a as N,m as P,d,ar as ee,g as v,M as F,J as de,K as be,L as ge,q as y,o as E,f as J,Y as ke,aq as ve,N as we,n as Z,a3 as ye,af as Ee,p as $,v as Te,I as Ae,t as V,h as W,D as x,R as te,b as D,E as L,l as K,w as M,x as U,y as q,B as z,T as Se,ah as re,U as Le,ai as Fe}from"../../../../chunks/index-208d16bf.js";import{a as ue}from"../../../../chunks/workflow-status-f49142dd.js";import{W as He,a as Ie,b as Ne}from"../../../../chunks/_workflow-filters-a7db4ca2.js";import{E as Ve}from"../../../../chunks/empty-state-41a8fee2.js";import{C as _e}from"../../../../chunks/code-block-65693d9a.js";import"../../../../chunks/route-for-api-5f7d15f7.js";import"../../../../chunks/navigation-3f1ea447.js";import"../../../../chunks/singletons-d1fb5791.js";import"../../../../chunks/index-b3caf0f7.js";import"../../../../chunks/notifications-e1f2ba54.js";import"../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../chunks/route-for-d606e623.js";import"../../../../chunks/simplify-attributes-42eef498.js";import"../../../../chunks/format-date-a3b7d511.js";import"../../../../chunks/copyable-8868f814.js";import"../../../../chunks/index.es-b78271c9.js";import"../../../../chunks/stores-e98c925f.js";import"../../../../chunks/select-c6c5551c.js";import"../../../../chunks/filter-select-6d51ec99.js";import"../../../../chunks/button-8b9c554f.js";function se(r,e,t){const l=r.slice();return l[23]=e[t],l}const We=r=>({item:r&16}),ne=r=>({item:r[23].data});function De(r){let e;return{c(){e=V("Missing template")},l(t){e=W(t,"Missing template")},m(t,l){v(t,e,l)},d(t){t&&d(e)}}}function oe(r,e){let t,l,i;const n=e[14].default,s=Ae(n,e,e[13],ne),c=s||De();return{key:r,first:null,c(){t=H("svelte-virtual-list-row"),c&&c.c(),l=C(),this.h()},l(a){t=I(a,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var f=N(t);c&&c.l(f),l=P(f),f.forEach(d),this.h()},h(){ee(t,"class","svelte-1kdxoed"),this.first=t},m(a,f){v(a,t,f),c&&c.m(t,null),F(t,l),i=!0},p(a,f){e=a,s&&s.p&&(!i||f&8208)&&de(s,n,e,e[13],i?ge(n,e[13],f,We):be(e[13]),ne)},i(a){i||(y(c,a),i=!0)},o(a){E(c,a),i=!1},d(a){a&&d(t),c&&c.d(a)}}}function Re(r){let e,t,l=[],i=new Map,n,s,c,a,f=r[4];const p=u=>u[23].index;for(let u=0;u<f.length;u+=1){let o=se(r,f,u),_=p(o);i.set(_,l[u]=oe(_,o))}return{c(){e=H("svelte-virtual-list-viewport"),t=H("svelte-virtual-list-contents");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=I(u,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var o=N(e);t=I(o,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=N(t);for(let h=0;h<l.length;h+=1)l[h].l(_);_.forEach(d),o.forEach(d),this.h()},h(){J(t,"padding-top",r[5]+"px"),J(t,"padding-bottom",r[6]+"px"),ee(t,"class","svelte-1kdxoed"),J(e,"height",r[0]),ee(e,"class","svelte-1kdxoed"),ke(()=>r[17].call(e))},m(u,o){v(u,e,o),F(e,t);for(let _=0;_<l.length;_+=1)l[_].m(t,null);r[15](t),r[16](e),n=ve(e,r[17].bind(e)),s=!0,c||(a=we(e,"scroll",r[7]),c=!0)},p(u,[o]){o&8208&&(f=u[4],Z(),l=ye(l,o,p,1,u,f,i,t,Ee,oe,null,se),$()),(!s||o&32)&&J(t,"padding-top",u[5]+"px"),(!s||o&64)&&J(t,"padding-bottom",u[6]+"px"),(!s||o&1)&&J(e,"height",u[0])},i(u){if(!s){for(let o=0;o<f.length;o+=1)y(l[o]);s=!0}},o(u){for(let o=0;o<l.length;o+=1)E(l[o]);s=!1},d(u){u&&d(e);for(let o=0;o<l.length;o+=1)l[o].d();r[15](null),r[16](null),n(),c=!1,a()}}}function Ce(r,e,t){let{$$slots:l={},$$scope:i}=e,{items:n}=e,{height:s="100%"}=e,{itemHeight:c=void 0}=e,{start:a=0}=e,{end:f=0}=e,p=[],u,o,_,h=0,T,g,m=0,k=0,A;async function O(b,B,S){const{scrollTop:R}=o;await x();let Y=m-R,w=a;for(;Y<B&&w<b.length;){let G=u[w-a];G||(t(9,f=w+1),await x(),G=u[w-a]),Y+=p[w]=S||G.offsetHeight,w+=1}t(9,f=w);const X=b.length-f;A=(m+Y)/f,t(6,k=X*A),p.length=b.length}async function Q(){const{scrollTop:b}=o,B=a;for(let w=0;w<u.length;w+=1)p[a+w]=c||u[w].offsetHeight;let S=0,R=0;for(;S<n.length;){const w=p[S]||A;if(R+w>b){t(8,a=S),t(5,m=R);break}R+=w,S+=1}for(;S<n.length&&(R+=p[S]||A,S+=1,!(R>b+h)););t(9,f=S);const Y=n.length-f;for(A=R/f;S<n.length;)p[S++]=A;if(t(6,k=Y*A),a<B){await x();let w=0,X=0;for(let j=a;j<B;j+=1)u[j-a]&&(w+=p[j],X+=c||u[j-a].offsetHeight);const G=X-w;o.scrollTo(0,b+G)}}Te(()=>{u=_.getElementsByTagName("svelte-virtual-list-row"),t(12,g=!0)});function me(b){te[b?"unshift":"push"](()=>{_=b,t(3,_)})}function he(b){te[b?"unshift":"push"](()=>{o=b,t(2,o)})}function pe(){h=this.offsetHeight,t(1,h)}return r.$$set=b=>{"items"in b&&t(10,n=b.items),"height"in b&&t(0,s=b.height),"itemHeight"in b&&t(11,c=b.itemHeight),"start"in b&&t(8,a=b.start),"end"in b&&t(9,f=b.end),"$$scope"in b&&t(13,i=b.$$scope)},r.$$.update=()=>{r.$$.dirty&1792&&t(4,T=n.slice(a,f).map((b,B)=>({index:B+a,data:b}))),r.$$.dirty&7170&&g&&O(n,h,c)},[s,h,o,_,T,m,k,Q,a,f,n,c,g,i,l,me,he,pe]}class Pe extends le{constructor(e){super(),ae(this,e,Ce,Re,ie,{items:10,height:0,itemHeight:11,start:8,end:9})}}function Me(r){let e,t,l;return{c(){e=H("tr"),t=H("td"),l=V("Loading"),this.h()},l(i){e=I(i,"TR",{});var n=N(e);t=I(n,"TD",{colspan:!0,class:!0});var s=N(t);l=W(s,"Loading"),s.forEach(d),n.forEach(d),this.h()},h(){D(t,"colspan","5"),D(t,"class","m-auto p-12 text-center font-extralight text-2xl")},m(i,n){v(i,e,n),F(e,t),F(t,l)},p:L,i:L,o:L,d(i){i&&d(e)}}}class Ue extends le{constructor(e){super(),ae(this,e,null,Me,ie,{})}}function ce(r){r[8]=r[9].workflows}function qe(r){let e,t,l,i,n,s,c,a,f,p,u,o,_,h,T;c=new _e({props:{content:`tctl --namespace ${r[0]} namespace update --has enabled`,language:"text",inline:!0}});let g=!r[2]&&fe(r);return{c(){e=H("h2"),t=V("This namespace is currently not enabled for archival."),l=C(),i=H("p"),n=V("Run this command to enable Archival for Event Histories:"),s=C(),M(c.$$.fragment),a=C(),g&&g.c(),f=C(),p=H("p"),u=V("For more details please check out "),o=H("a"),_=V("Archival Docs"),h=V("."),this.h()},l(m){e=I(m,"H2",{class:!0,"data-test":!0});var k=N(e);t=W(k,"This namespace is currently not enabled for archival."),k.forEach(d),l=P(m),i=I(m,"P",{});var A=N(i);n=W(A,"Run this command to enable Archival for Event Histories:"),A.forEach(d),s=P(m),U(c.$$.fragment,m),a=P(m),g&&g.l(m),f=P(m),p=I(m,"P",{});var O=N(p);u=W(O,"For more details please check out "),o=I(O,"A",{class:!0,href:!0,target:!0});var Q=N(o);_=W(Q,"Archival Docs"),Q.forEach(d),h=W(O,"."),O.forEach(d),this.h()},h(){D(e,"class","text-2xl"),D(e,"data-test","archived-disabled-title"),D(o,"class","text-blue-700 underline"),D(o,"href","https://docs.temporal.io/docs/server/archive-data/"),D(o,"target","_blank")},m(m,k){v(m,e,k),F(e,t),v(m,l,k),v(m,i,k),F(i,n),v(m,s,k),q(c,m,k),v(m,a,k),g&&g.m(m,k),v(m,f,k),v(m,p,k),F(p,u),F(p,o),F(o,_),F(p,h),T=!0},p(m,k){const A={};k&1&&(A.content=`tctl --namespace ${m[0]} namespace update --has enabled`),c.$set(A),m[2]?g&&(Z(),E(g,1,1,()=>{g=null}),$()):g?(g.p(m,k),k&4&&y(g,1)):(g=fe(m),g.c(),y(g,1),g.m(f.parentNode,f))},i(m){T||(y(c.$$.fragment,m),y(g),T=!0)},o(m){E(c.$$.fragment,m),E(g),T=!1},d(m){m&&d(e),m&&d(l),m&&d(i),m&&d(s),z(c,m),m&&d(a),g&&g.d(m),m&&d(f),m&&d(p)}}}function ze(r){let e,t,l,i,n,s,c,a,f;function p(_){r[7](_)}let u={};r[3]!==void 0&&(u.timeFormat=r[3]),i=new He({props:u}),te.push(()=>Se(i,"timeFormat",p));let o={ctx:r,current:null,token:null,hasCatch:!1,pending:Ge,then:Be,catch:Oe,value:9,blocks:[,,,]};return re(a=r[4],o),{c(){e=H("h2"),t=V("Archived Workflows"),l=C(),M(i.$$.fragment),s=C(),c=K(),o.block.c(),this.h()},l(_){e=I(_,"H2",{class:!0,"data-test":!0});var h=N(e);t=W(h,"Archived Workflows"),h.forEach(d),l=P(_),U(i.$$.fragment,_),s=P(_),c=K(),o.block.l(_),this.h()},h(){D(e,"class","text-2xl"),D(e,"data-test","archived-enabled-title")},m(_,h){v(_,e,h),F(e,t),v(_,l,h),q(i,_,h),v(_,s,h),v(_,c,h),o.block.m(_,o.anchor=h),o.mount=()=>c.parentNode,o.anchor=c,f=!0},p(_,h){r=_;const T={};!n&&h&8&&(n=!0,T.timeFormat=r[3],Le(()=>n=!1)),i.$set(T),o.ctx=r,h&16&&a!==(a=r[4])&&re(a,o)||Fe(o,r,h)},i(_){f||(y(i.$$.fragment,_),y(o.block),f=!0)},o(_){E(i.$$.fragment,_);for(let h=0;h<3;h+=1){const T=o.blocks[h];E(T)}f=!1},d(_){_&&d(e),_&&d(l),z(i,_),_&&d(s),_&&d(c),o.block.d(_),o.token=null,o=null}}}function fe(r){let e,t,l,i,n;return i=new _e({props:{content:`tctl --namespace ${r[0]} namespace update -vas enabled`,language:"text",inline:!0}}),{c(){e=H("p"),t=V("To enable Visibility Archival:"),l=C(),M(i.$$.fragment)},l(s){e=I(s,"P",{});var c=N(e);t=W(c,"To enable Visibility Archival:"),c.forEach(d),l=P(s),U(i.$$.fragment,s)},m(s,c){v(s,e,c),F(e,t),v(s,l,c),q(i,s,c),n=!0},p(s,c){const a={};c&1&&(a.content=`tctl --namespace ${s[0]} namespace update -vas enabled`),i.$set(a)},i(s){n||(y(i.$$.fragment,s),n=!0)},o(s){E(i.$$.fragment,s),n=!1},d(s){s&&d(e),s&&d(l),z(i,s)}}}function Oe(r){return{c:L,l:L,m:L,p:L,i:L,o:L,d:L}}function Be(r){ce(r);let e,t,l,i;const n=[Je,je],s=[];function c(a,f){return a[8].length?0:1}return e=c(r),t=s[e]=n[e](r),{c(){t.c(),l=K()},l(a){t.l(a),l=K()},m(a,f){s[e].m(a,f),v(a,l,f),i=!0},p(a,f){ce(a);let p=e;e=c(a),e===p?s[e].p(a,f):(Z(),E(s[p],1,1,()=>{s[p]=null}),$(),t=s[e],t?t.p(a,f):(t=s[e]=n[e](a),t.c()),y(t,1),t.m(l.parentNode,l))},i(a){i||(y(t),i=!0)},o(a){E(t),i=!1},d(a){s[e].d(a),a&&d(l)}}}function je(r){let e,t;return e=new Ve({props:{title:"No Workflows Found",content:"If you have filters applied, try adjusting them."}}),{c(){M(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p:L,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Je(r){let e,t;return e=new Ie({props:{$$slots:{default:[Ye]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const n={};i&2073&&(n.$$scope={dirty:i,ctx:l}),e.$set(n)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Ke(r){let e,t;return e=new Ne({props:{workflow:r[10],namespace:r[0],timeFormat:r[3]}}),{c(){M(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const n={};i&1024&&(n.workflow=l[10]),i&1&&(n.namespace=l[0]),i&8&&(n.timeFormat=l[3]),e.$set(n)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Ye(r){let e,t;return e=new Pe({props:{items:r[8],$$slots:{default:[Ke,({item:l})=>({10:l}),({item:l})=>l?1024:0]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const n={};i&16&&(n.items=l[8]),i&3081&&(n.$$scope={dirty:i,ctx:l}),e.$set(n)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Ge(r){let e,t;return e=new Ue({}),{c(){M(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p:L,i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Qe(r){let e,t,l,i;const n=[ze,qe],s=[];function c(a,f){return a[1]?0:1}return e=c(r),t=s[e]=n[e](r),{c(){t.c(),l=K()},l(a){t.l(a),l=K()},m(a,f){s[e].m(a,f),v(a,l,f),i=!0},p(a,[f]){let p=e;e=c(a),e===p?s[e].p(a,f):(Z(),E(s[p],1,1,()=>{s[p]=null}),$(),t=s[e],t?t.p(a,f):(t=s[e]=n[e](a),t.c()),y(t,1),t.m(l.parentNode,l))},i(a){i||(y(t),i=!0)},o(a){E(t),i=!1},d(a){s[e].d(a),a&&d(l)}}}const bt=async function({params:r,url:e,stuff:t}){var l,i;const{searchParams:n}=e;n.has("time-range")||n.set("time-range","24 hours");const s=r.namespace,c=n.get("workflow-id"),a=n.get("workflow-type"),f=n.get("time-range"),p=n.get("status"),u={workflowId:c,workflowType:a,closeTime:f,executionStatus:p},_=t.namespaces.find(m=>m.namespaceInfo.name===s),h=((l=_==null?void 0:_.config)===null||l===void 0?void 0:l.historyArchivalState)==="Enabled",T=((i=_==null?void 0:_.config)===null||i===void 0?void 0:i.visibilityArchivalState)==="Enabled";return{props:{initialData:h?await ue(s,u,fetch):Promise.resolve(null),namespace:s,parameters:u,archivalEnabled:h,visibilityArchivalEnabled:T}}};function Xe(r,e,t){let{namespace:l}=e,{initialData:i}=e,{parameters:n}=e,{archivalEnabled:s=!1}=e,{visibilityArchivalEnabled:c=!1}=e,a="UTC",f=i;function p(u){a=u,t(3,a)}return r.$$set=u=>{"namespace"in u&&t(0,l=u.namespace),"initialData"in u&&t(5,i=u.initialData),"parameters"in u&&t(6,n=u.parameters),"archivalEnabled"in u&&t(1,s=u.archivalEnabled),"visibilityArchivalEnabled"in u&&t(2,c=u.visibilityArchivalEnabled)},r.$$.update=()=>{r.$$.dirty&67&&s&&t(4,f=ue(l,n))},[l,s,c,a,f,i,n,p]}class gt extends le{constructor(e){super(),ae(this,e,Xe,Qe,ie,{namespace:0,initialData:5,parameters:6,archivalEnabled:1,visibilityArchivalEnabled:2})}}export{gt as default,bt as load};
