import{S as te,i as le,s as ae,e as H,k as C,c as I,a as N,m as P,d as h,ar as ee,g as v,M as L,J as de,K as be,L as ge,q as w,o as y,f as J,Y as ve,aq as ke,N as we,n as Z,a3 as ye,ag as Ee,p as x,v as Te,I as Ae,t as W,h as D,D as $,R as ie,b as R,E as S,l as K,O as Se,w as M,x as O,y as q,B as z,ai as re,aj as Le}from"../../../../chunks/index-e3f4fa3b.js";import{a as ue}from"../../../../chunks/workflow-status-dd506442.js";import{W as He,a as Ie,b as Ne}from"../../../../chunks/_workflow-filters-4c0e5da0.js";import{E as Ve}from"../../../../chunks/empty-state-4b21eaea.js";import{C as _e}from"../../../../chunks/code-block-5bf99af8.js";import{t as We}from"../../../../chunks/time-format-f43bcf6a.js";import"../../../../chunks/route-for-api-8775e9bf.js";import"../../../../chunks/navigation-3f1ea447.js";import"../../../../chunks/singletons-d1fb5791.js";import"../../../../chunks/index-d28ebc24.js";import"../../../../chunks/notifications-736aa513.js";import"../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../chunks/route-for-395a6648.js";import"../../../../chunks/simplify-attributes-425c0027.js";import"../../../../chunks/format-date-5178fba5.js";import"../../../../chunks/tooltip-17b776d3.js";import"../../../../chunks/copyable-4b8cf855.js";import"../../../../chunks/index.es-159da191.js";import"../../../../chunks/stores-1c428733.js";import"../../../../chunks/select-77c892ca.js";import"../../../../chunks/button-5b59e270.js";import"../../../../chunks/persist-store-789d3dc3.js";function ne(n,e,t){const l=n.slice();return l[23]=e[t],l}const De=n=>({item:n&16}),se=n=>({item:n[23].data});function Re(n){let e;return{c(){e=W("Missing template")},l(t){e=D(t,"Missing template")},m(t,l){v(t,e,l)},d(t){t&&h(e)}}}function oe(n,e){let t,l,i;const c=e[14].default,r=Ae(c,e,e[13],se),u=r||Re();return{key:n,first:null,c(){t=H("svelte-virtual-list-row"),u&&u.c(),l=C(),this.h()},l(a){t=I(a,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var o=N(t);u&&u.l(o),l=P(o),o.forEach(h),this.h()},h(){ee(t,"class","svelte-1kdxoed"),this.first=t},m(a,o){v(a,t,o),u&&u.m(t,null),L(t,l),i=!0},p(a,o){e=a,r&&r.p&&(!i||o&8208)&&de(r,c,e,e[13],i?ge(c,e[13],o,De):be(e[13]),se)},i(a){i||(w(u,a),i=!0)},o(a){y(u,a),i=!1},d(a){a&&h(t),u&&u.d(a)}}}function Fe(n){let e,t,l=[],i=new Map,c,r,u,a,o=n[4];const s=f=>f[23].index;for(let f=0;f<o.length;f+=1){let m=ne(n,o,f),d=s(m);i.set(d,l[f]=oe(d,m))}return{c(){e=H("svelte-virtual-list-viewport"),t=H("svelte-virtual-list-contents");for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){e=I(f,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var m=N(e);t=I(m,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var d=N(t);for(let E=0;E<l.length;E+=1)l[E].l(d);d.forEach(h),m.forEach(h),this.h()},h(){J(t,"padding-top",n[5]+"px"),J(t,"padding-bottom",n[6]+"px"),ee(t,"class","svelte-1kdxoed"),J(e,"height",n[0]),ee(e,"class","svelte-1kdxoed"),ve(()=>n[17].call(e))},m(f,m){v(f,e,m),L(e,t);for(let d=0;d<l.length;d+=1)l[d].m(t,null);n[15](t),n[16](e),c=ke(e,n[17].bind(e)),r=!0,u||(a=we(e,"scroll",n[7]),u=!0)},p(f,[m]){m&8208&&(o=f[4],Z(),l=ye(l,m,s,1,f,o,i,t,Ee,oe,null,ne),x()),(!r||m&32)&&J(t,"padding-top",f[5]+"px"),(!r||m&64)&&J(t,"padding-bottom",f[6]+"px"),(!r||m&1)&&J(e,"height",f[0])},i(f){if(!r){for(let m=0;m<o.length;m+=1)w(l[m]);r=!0}},o(f){for(let m=0;m<l.length;m+=1)y(l[m]);r=!1},d(f){f&&h(e);for(let m=0;m<l.length;m+=1)l[m].d();n[15](null),n[16](null),c(),u=!1,a()}}}function Ce(n,e,t){let{$$slots:l={},$$scope:i}=e,{items:c}=e,{height:r="100%"}=e,{itemHeight:u=void 0}=e,{start:a=0}=e,{end:o=0}=e,s=[],f,m,d,E=0,V,b,_=0,g=0,T;async function U(p,j,A){const{scrollTop:F}=m;await $();let Y=_-F,k=a;for(;Y<j&&k<p.length;){let G=f[k-a];G||(t(9,o=k+1),await $(),G=f[k-a]),Y+=s[k]=A||G.offsetHeight,k+=1}t(9,o=k);const X=p.length-o;T=(_+Y)/o,t(6,g=X*T),s.length=p.length}async function Q(){const{scrollTop:p}=m,j=a;for(let k=0;k<f.length;k+=1)s[a+k]=u||f[k].offsetHeight;let A=0,F=0;for(;A<c.length;){const k=s[A]||T;if(F+k>p){t(8,a=A),t(5,_=F);break}F+=k,A+=1}for(;A<c.length&&(F+=s[A]||T,A+=1,!(F>p+E)););t(9,o=A);const Y=c.length-o;for(T=F/o;A<c.length;)s[A++]=T;if(t(6,g=Y*T),a<j){await $();let k=0,X=0;for(let B=a;B<j;B+=1)f[B-a]&&(k+=s[B],X+=u||f[B-a].offsetHeight);const G=X-k;m.scrollTo(0,p+G)}}Te(()=>{f=d.getElementsByTagName("svelte-virtual-list-row"),t(12,b=!0)});function me(p){ie[p?"unshift":"push"](()=>{d=p,t(3,d)})}function he(p){ie[p?"unshift":"push"](()=>{m=p,t(2,m)})}function pe(){E=this.offsetHeight,t(1,E)}return n.$$set=p=>{"items"in p&&t(10,c=p.items),"height"in p&&t(0,r=p.height),"itemHeight"in p&&t(11,u=p.itemHeight),"start"in p&&t(8,a=p.start),"end"in p&&t(9,o=p.end),"$$scope"in p&&t(13,i=p.$$scope)},n.$$.update=()=>{n.$$.dirty&1792&&t(4,V=c.slice(a,o).map((p,j)=>({index:j+a,data:p}))),n.$$.dirty&7170&&b&&U(c,E,u)},[r,E,m,d,V,_,g,Q,a,o,c,u,b,i,l,me,he,pe]}class Pe extends te{constructor(e){super(),le(this,e,Ce,Fe,ae,{items:10,height:0,itemHeight:11,start:8,end:9})}}function Me(n){let e,t,l;return{c(){e=H("tr"),t=H("td"),l=W("Loading"),this.h()},l(i){e=I(i,"TR",{});var c=N(e);t=I(c,"TD",{colspan:!0,class:!0});var r=N(t);l=D(r,"Loading"),r.forEach(h),c.forEach(h),this.h()},h(){R(t,"colspan","5"),R(t,"class","m-auto p-12 text-center font-extralight text-2xl")},m(i,c){v(i,e,c),L(e,t),L(t,l)},p:S,i:S,o:S,d(i){i&&h(e)}}}class Oe extends te{constructor(e){super(),le(this,e,null,Me,ae,{})}}function ce(n){n[7]=n[8].workflows}function qe(n){let e,t,l,i,c,r,u,a,o,s,f,m,d,E,V;u=new _e({props:{content:`tctl --namespace ${n[0]} namespace update --has enabled`,language:"text",inline:!0}});let b=!n[2]&&fe(n);return{c(){e=H("h2"),t=W("This namespace is currently not enabled for archival."),l=C(),i=H("p"),c=W("Run this command to enable Archival for Event Histories:"),r=C(),M(u.$$.fragment),a=C(),b&&b.c(),o=C(),s=H("p"),f=W("For more details please check out "),m=H("a"),d=W("Archival Docs"),E=W("."),this.h()},l(_){e=I(_,"H2",{class:!0,"data-cy":!0});var g=N(e);t=D(g,"This namespace is currently not enabled for archival."),g.forEach(h),l=P(_),i=I(_,"P",{});var T=N(i);c=D(T,"Run this command to enable Archival for Event Histories:"),T.forEach(h),r=P(_),O(u.$$.fragment,_),a=P(_),b&&b.l(_),o=P(_),s=I(_,"P",{});var U=N(s);f=D(U,"For more details please check out "),m=I(U,"A",{class:!0,href:!0,target:!0});var Q=N(m);d=D(Q,"Archival Docs"),Q.forEach(h),E=D(U,"."),U.forEach(h),this.h()},h(){R(e,"class","text-2xl"),R(e,"data-cy","archived-disabled-title"),R(m,"class","text-blue-700 underline"),R(m,"href","https://docs.temporal.io/docs/server/archive-data/"),R(m,"target","_blank")},m(_,g){v(_,e,g),L(e,t),v(_,l,g),v(_,i,g),L(i,c),v(_,r,g),q(u,_,g),v(_,a,g),b&&b.m(_,g),v(_,o,g),v(_,s,g),L(s,f),L(s,m),L(m,d),L(s,E),V=!0},p(_,g){const T={};g&1&&(T.content=`tctl --namespace ${_[0]} namespace update --has enabled`),u.$set(T),_[2]?b&&(Z(),y(b,1,1,()=>{b=null}),x()):b?(b.p(_,g),g&4&&w(b,1)):(b=fe(_),b.c(),w(b,1),b.m(o.parentNode,o))},i(_){V||(w(u.$$.fragment,_),w(b),V=!0)},o(_){y(u.$$.fragment,_),y(b),V=!1},d(_){_&&h(e),_&&h(l),_&&h(i),_&&h(r),z(u,_),_&&h(a),b&&b.d(_),_&&h(o),_&&h(s)}}}function ze(n){let e,t,l,i,c,r,u,a;i=new He({});let o={ctx:n,current:null,token:null,hasCatch:!1,pending:Ge,then:je,catch:Ue,value:8,blocks:[,,,]};return re(u=n[3],o),{c(){e=H("h2"),t=W("Archived Workflows"),l=C(),M(i.$$.fragment),c=C(),r=K(),o.block.c(),this.h()},l(s){e=I(s,"H2",{class:!0,"data-cy":!0});var f=N(e);t=D(f,"Archived Workflows"),f.forEach(h),l=P(s),O(i.$$.fragment,s),c=P(s),r=K(),o.block.l(s),this.h()},h(){R(e,"class","text-2xl"),R(e,"data-cy","archived-enabled-title")},m(s,f){v(s,e,f),L(e,t),v(s,l,f),q(i,s,f),v(s,c,f),v(s,r,f),o.block.m(s,o.anchor=f),o.mount=()=>r.parentNode,o.anchor=r,a=!0},p(s,f){n=s,o.ctx=n,f&8&&u!==(u=n[3])&&re(u,o)||Le(o,n,f)},i(s){a||(w(i.$$.fragment,s),w(o.block),a=!0)},o(s){y(i.$$.fragment,s);for(let f=0;f<3;f+=1){const m=o.blocks[f];y(m)}a=!1},d(s){s&&h(e),s&&h(l),z(i,s),s&&h(c),s&&h(r),o.block.d(s),o.token=null,o=null}}}function fe(n){let e,t,l,i,c;return i=new _e({props:{content:`tctl --namespace ${n[0]} namespace update -vas enabled`,language:"text",inline:!0}}),{c(){e=H("p"),t=W("To enable Visibility Archival:"),l=C(),M(i.$$.fragment)},l(r){e=I(r,"P",{});var u=N(e);t=D(u,"To enable Visibility Archival:"),u.forEach(h),l=P(r),O(i.$$.fragment,r)},m(r,u){v(r,e,u),L(e,t),v(r,l,u),q(i,r,u),c=!0},p(r,u){const a={};u&1&&(a.content=`tctl --namespace ${r[0]} namespace update -vas enabled`),i.$set(a)},i(r){c||(w(i.$$.fragment,r),c=!0)},o(r){y(i.$$.fragment,r),c=!1},d(r){r&&h(e),r&&h(l),z(i,r)}}}function Ue(n){return{c:S,l:S,m:S,p:S,i:S,o:S,d:S}}function je(n){ce(n);let e,t,l,i;const c=[Je,Be],r=[];function u(a,o){return a[7].length?0:1}return e=u(n),t=r[e]=c[e](n),{c(){t.c(),l=K()},l(a){t.l(a),l=K()},m(a,o){r[e].m(a,o),v(a,l,o),i=!0},p(a,o){ce(a);let s=e;e=u(a),e===s?r[e].p(a,o):(Z(),y(r[s],1,1,()=>{r[s]=null}),x(),t=r[e],t?t.p(a,o):(t=r[e]=c[e](a),t.c()),w(t,1),t.m(l.parentNode,l))},i(a){i||(w(t),i=!0)},o(a){y(t),i=!1},d(a){r[e].d(a),a&&h(l)}}}function Be(n){let e,t;return e=new Ve({props:{title:"No Workflows Found",content:"If you have filters applied, try adjusting them."}}),{c(){M(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p:S,i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Je(n){let e,t;return e=new Ie({props:{$$slots:{default:[Ye]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const c={};i&1049&&(c.$$scope={dirty:i,ctx:l}),e.$set(c)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Ke(n){let e,t;return e=new Ne({props:{workflow:n[9],namespace:n[0],timeFormat:n[4]}}),{c(){M(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const c={};i&512&&(c.workflow=l[9]),i&1&&(c.namespace=l[0]),i&16&&(c.timeFormat=l[4]),e.$set(c)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Ye(n){let e,t;return e=new Pe({props:{items:n[7],$$slots:{default:[Ke,({item:l})=>({9:l}),({item:l})=>l?512:0]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p(l,i){const c={};i&8&&(c.items=l[7]),i&1553&&(c.$$scope={dirty:i,ctx:l}),e.$set(c)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Ge(n){let e,t;return e=new Oe({}),{c(){M(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,i){q(e,l,i),t=!0},p:S,i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){y(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Qe(n){let e,t,l,i;const c=[ze,qe],r=[];function u(a,o){return a[1]?0:1}return e=u(n),t=r[e]=c[e](n),{c(){t.c(),l=K()},l(a){t.l(a),l=K()},m(a,o){r[e].m(a,o),v(a,l,o),i=!0},p(a,[o]){let s=e;e=u(a),e===s?r[e].p(a,o):(Z(),y(r[s],1,1,()=>{r[s]=null}),x(),t=r[e],t?t.p(a,o):(t=r[e]=c[e](a),t.c()),w(t,1),t.m(l.parentNode,l))},i(a){i||(w(t),i=!0)},o(a){y(t),i=!1},d(a){r[e].d(a),a&&h(l)}}}const vt=async function({params:n,url:e,stuff:t}){var l,i;const{searchParams:c}=e;c.has("time-range")||c.set("time-range","24 hours");const r=n.namespace,u=c.get("workflow-id"),a=c.get("workflow-type"),o=c.get("time-range"),s=c.get("status"),f={workflowId:u,workflowType:a,closeTime:o,executionStatus:s},d=t.namespaces.find(_=>_.namespaceInfo.name===r),E=((l=d==null?void 0:d.config)===null||l===void 0?void 0:l.historyArchivalState)==="Enabled",V=((i=d==null?void 0:d.config)===null||i===void 0?void 0:i.visibilityArchivalState)==="Enabled";return{props:{initialData:E?await ue(r,f,fetch):Promise.resolve(null),namespace:r,parameters:f,archivalEnabled:E,visibilityArchivalEnabled:V}}};function Xe(n,e,t){let l;Se(n,We,s=>t(4,l=s));let{namespace:i}=e,{initialData:c}=e,{parameters:r}=e,{archivalEnabled:u=!1}=e,{visibilityArchivalEnabled:a=!1}=e,o=c;return n.$$set=s=>{"namespace"in s&&t(0,i=s.namespace),"initialData"in s&&t(5,c=s.initialData),"parameters"in s&&t(6,r=s.parameters),"archivalEnabled"in s&&t(1,u=s.archivalEnabled),"visibilityArchivalEnabled"in s&&t(2,a=s.visibilityArchivalEnabled)},n.$$.update=()=>{n.$$.dirty&67&&u&&t(3,o=ue(i,r))},[i,u,a,o,l,c,r]}class kt extends te{constructor(e){super(),le(this,e,Xe,Qe,ae,{namespace:0,initialData:5,parameters:6,archivalEnabled:1,visibilityArchivalEnabled:2})}}export{kt as default,vt as load};
