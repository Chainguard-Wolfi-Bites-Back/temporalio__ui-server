import{S as U,i as z,s as J,e as W,t as A,c as D,a as S,h as F,d as p,b as P,g as h,Q as E,K as g,l as I,o as v,p as V,q as w,n as j,k as R,w as T,m as x,x as N,y as C,B as H,F as X,G as Y,ai as G,H as Z,aj as ee,aW as te}from"../../../../chunks/vendor-f1345faf.js";import{b as M}from"../../../../chunks/workflow-status-cb9a757c.js";import{W as le,a as ae,b as re}from"../../../../chunks/_workflow-filters-7b4e3617.js";import{E as oe}from"../../../../chunks/empty-state-17839c9c.js";import{C as O}from"../../../../chunks/code-block-b9710f7b.js";import"../../../../chunks/route-for-api-cede362a.js";import"../../../../chunks/navigation-093db9e2.js";import"../../../../chunks/singletons-a6a7384f.js";import"../../../../chunks/notifications-c541b06b.js";import"../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../chunks/route-for-c9edcdb4.js";import"../../../../chunks/format-date-4fd39826.js";import"../../../../chunks/filter-select-9a044303.js";import"../../../../chunks/stores-e17ef8a9.js";import"../../../../chunks/select-3337efbd.js";function ie(n){let e,l,t;return{c(){e=W("tr"),l=W("td"),t=A("Loading"),this.h()},l(a){e=D(a,"TR",{});var i=S(e);l=D(i,"TD",{colspan:!0,class:!0});var r=S(l);t=F(r,"Loading"),r.forEach(p),i.forEach(p),this.h()},h(){P(l,"colspan","5"),P(l,"class","m-auto p-12 text-center font-extralight text-2xl")},m(a,i){h(a,e,i),E(e,l),E(l,t)},p:g,i:g,o:g,d(a){a&&p(e)}}}class ne extends U{constructor(e){super();z(this,e,null,ie,J,{})}}function K(n){n[8]=n[9].workflows}function se(n){let e,l,t,a,i,r,f,o,m,b,d,u,s,_,y;f=new O({props:{content:"tctl --namespace default namespace update --has enabled",language:"text"}});let k=!n[2]&&Q();return{c(){e=W("h2"),l=A("This namespace is currently not enabled for archival."),t=R(),a=W("p"),i=A("Run this command to enable Archival for Event Histories:"),r=R(),T(f.$$.fragment),o=R(),k&&k.c(),m=R(),b=W("p"),d=A("For more details please check out "),u=W("a"),s=A("Archival Docs"),_=A("."),this.h()},l(c){e=D(c,"H2",{class:!0});var $=S(e);l=F($,"This namespace is currently not enabled for archival."),$.forEach(p),t=x(c),a=D(c,"P",{});var q=S(a);i=F(q,"Run this command to enable Archival for Event Histories:"),q.forEach(p),r=x(c),N(f.$$.fragment,c),o=x(c),k&&k.l(c),m=x(c),b=D(c,"P",{});var L=S(b);d=F(L,"For more details please check out "),u=D(L,"A",{class:!0,href:!0,target:!0});var B=S(u);s=F(B,"Archival Docs"),B.forEach(p),_=F(L,"."),L.forEach(p),this.h()},h(){P(e,"class","text-2xl"),P(u,"class","text-blue-700 underline"),P(u,"href","https://docs.temporal.io/docs/server/archive-data/"),P(u,"target","_blank")},m(c,$){h(c,e,$),E(e,l),h(c,t,$),h(c,a,$),E(a,i),h(c,r,$),C(f,c,$),h(c,o,$),k&&k.m(c,$),h(c,m,$),h(c,b,$),E(b,d),E(b,u),E(u,s),E(b,_),y=!0},p(c,$){c[2]?k&&(j(),v(k,1,1,()=>{k=null}),V()):k?$&4&&w(k,1):(k=Q(),k.c(),w(k,1),k.m(m.parentNode,m))},i(c){y||(w(f.$$.fragment,c),w(k),y=!0)},o(c){v(f.$$.fragment,c),v(k),y=!1},d(c){c&&p(e),c&&p(t),c&&p(a),c&&p(r),H(f,c),c&&p(o),k&&k.d(c),c&&p(m),c&&p(b)}}}function ce(n){let e,l,t,a,i,r,f,o,m;function b(s){n[7](s)}let d={};n[3]!==void 0&&(d.timeFormat=n[3]),a=new le({props:d}),X.push(()=>Y(a,"timeFormat",b));let u={ctx:n,current:null,token:null,hasCatch:!1,pending:de,then:me,catch:fe,value:9,blocks:[,,,]};return G(o=n[4],u),{c(){e=W("h2"),l=A("Archived Workflows"),t=R(),T(a.$$.fragment),r=R(),f=I(),u.block.c(),this.h()},l(s){e=D(s,"H2",{class:!0});var _=S(e);l=F(_,"Archived Workflows"),_.forEach(p),t=x(s),N(a.$$.fragment,s),r=x(s),f=I(),u.block.l(s),this.h()},h(){P(e,"class","text-2xl")},m(s,_){h(s,e,_),E(e,l),h(s,t,_),C(a,s,_),h(s,r,_),h(s,f,_),u.block.m(s,u.anchor=_),u.mount=()=>f.parentNode,u.anchor=f,m=!0},p(s,_){n=s;const y={};!i&&_&8&&(i=!0,y.timeFormat=n[3],Z(()=>i=!1)),a.$set(y),u.ctx=n,_&16&&o!==(o=n[4])&&G(o,u)||ee(u,n,_)},i(s){m||(w(a.$$.fragment,s),w(u.block),m=!0)},o(s){v(a.$$.fragment,s);for(let _=0;_<3;_+=1){const y=u.blocks[_];v(y)}m=!1},d(s){s&&p(e),s&&p(t),H(a,s),s&&p(r),s&&p(f),u.block.d(s),u.token=null,u=null}}}function Q(n){let e,l,t,a,i;return a=new O({props:{content:"tctl --namespace default namespace update -vas enabled",language:"text"}}),{c(){e=W("p"),l=A("To enable Visibility Archival:"),t=R(),T(a.$$.fragment)},l(r){e=D(r,"P",{});var f=S(e);l=F(f,"To enable Visibility Archival:"),f.forEach(p),t=x(r),N(a.$$.fragment,r)},m(r,f){h(r,e,f),E(e,l),h(r,t,f),C(a,r,f),i=!0},i(r){i||(w(a.$$.fragment,r),i=!0)},o(r){v(a.$$.fragment,r),i=!1},d(r){r&&p(e),r&&p(t),H(a,r)}}}function fe(n){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function me(n){K(n);let e,l,t,a;const i=[_e,ue],r=[];function f(o,m){return o[8].length?0:1}return e=f(n),l=r[e]=i[e](n),{c(){l.c(),t=I()},l(o){l.l(o),t=I()},m(o,m){r[e].m(o,m),h(o,t,m),a=!0},p(o,m){K(o);let b=e;e=f(o),e===b?r[e].p(o,m):(j(),v(r[b],1,1,()=>{r[b]=null}),V(),l=r[e],l?l.p(o,m):(l=r[e]=i[e](o),l.c()),w(l,1),l.m(t.parentNode,t))},i(o){a||(w(l),a=!0)},o(o){v(l),a=!1},d(o){r[e].d(o),o&&p(t)}}}function ue(n){let e,l;return e=new oe({props:{title:"No Workflows Found",content:"If you have filters applied, try adjusting them."}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){C(e,t,a),l=!0},p:g,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function _e(n){let e,l;return e=new ae({props:{$$slots:{default:[be]},$$scope:{ctx:n}}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){C(e,t,a),l=!0},p(t,a){const i={};a&2073&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function pe(n){let e,l;return e=new re({props:{workflow:n[10],namespace:n[0],timeFormat:n[3]}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){C(e,t,a),l=!0},p(t,a){const i={};a&1024&&(i.workflow=t[10]),a&1&&(i.namespace=t[0]),a&8&&(i.timeFormat=t[3]),e.$set(i)},i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function be(n){let e,l;return e=new te({props:{items:n[8],$$slots:{default:[pe,({item:t})=>({10:t}),({item:t})=>t?1024:0]},$$scope:{ctx:n}}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){C(e,t,a),l=!0},p(t,a){const i={};a&16&&(i.items=t[8]),a&3081&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function de(n){let e,l;return e=new ne({}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,a){C(e,t,a),l=!0},p:g,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){H(e,t)}}}function ke(n){let e,l,t,a;const i=[ce,se],r=[];function f(o,m){return o[1]?0:1}return e=f(n),l=r[e]=i[e](n),{c(){l.c(),t=I()},l(o){l.l(o),t=I()},m(o,m){r[e].m(o,m),h(o,t,m),a=!0},p(o,[m]){let b=e;e=f(o),e===b?r[e].p(o,m):(j(),v(r[b],1,1,()=>{r[b]=null}),V(),l=r[e],l?l.p(o,m):(l=r[e]=i[e](o),l.c()),w(l,1),l.m(t.parentNode,t))},i(o){a||(w(l),a=!0)},o(o){v(l),a=!1},d(o){r[e].d(o),o&&p(t)}}}const Pe=async function({params:n,url:e,stuff:l}){var t,a;const{searchParams:i}=e;i.has("time-range")||i.set("time-range","24 hours");const r=n.namespace,f=i.get("workflow-id"),o=i.get("workflow-type"),m=i.get("time-range"),b=i.get("status"),d={workflowId:f,workflowType:o,closeTime:m,executionStatus:b},s=l.namespaces.find(c=>c.namespaceInfo.name===r),_=((t=s==null?void 0:s.config)===null||t===void 0?void 0:t.historyArchivalState)==="Enabled",y=((a=s==null?void 0:s.config)===null||a===void 0?void 0:a.visibilityArchivalState)==="Enabled";return{props:{initialData:_?await M(r,d,fetch):Promise.resolve(null),namespace:r,parameters:d,archivalEnabled:_,visibilityArchivalEnabled:y}}};function he(n,e,l){let{namespace:t}=e,{initialData:a}=e,{parameters:i}=e,{archivalEnabled:r=!1}=e,{visibilityArchivalEnabled:f=!1}=e,o="UTC",m=a;function b(d){o=d,l(3,o)}return n.$$set=d=>{"namespace"in d&&l(0,t=d.namespace),"initialData"in d&&l(5,a=d.initialData),"parameters"in d&&l(6,i=d.parameters),"archivalEnabled"in d&&l(1,r=d.archivalEnabled),"visibilityArchivalEnabled"in d&&l(2,f=d.visibilityArchivalEnabled)},n.$$.update=()=>{n.$$.dirty&67&&r&&l(4,m=M(t,i))},[t,r,f,o,m,a,i,b]}class Re extends U{constructor(e){super();z(this,e,he,ke,J,{namespace:0,initialData:5,parameters:6,archivalEnabled:1,visibilityArchivalEnabled:2})}}export{Re as default,Pe as load};
