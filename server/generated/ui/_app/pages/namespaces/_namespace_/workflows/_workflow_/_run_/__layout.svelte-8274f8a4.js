import{S as $e,i as ke,s as ve,e as p,k as T,w as B,c as _,a as h,d as f,m as E,x as J,b as d,g as I,T as i,y as K,U as ut,O as We,P as Ve,Q as Fe,q as b,o as P,B as Y,l as ye,n as Qe,p as Ce,ac as dt,N as Re,t as D,h as Q,j as fe,ae as et,L as Oe,W as tt,E as st,f as ht}from"../../../../../../chunks/index-4f955b1f.js";import{r as je,a as He,h as wt}from"../../../../../../chunks/route-for-api-e81b76bd.js";import{W as $t,f as kt}from"../../../../../../chunks/workflow-status-12793ebe.js";import{F as ct,i as vt,j as gt,k as bt}from"../../../../../../chunks/index.es-3f7bba01.js";import{p as Le}from"../../../../../../chunks/stores-8f54f2cb.js";import{d as mt,e as pt,f as Tt,g as Et,h as It,i as nt}from"../../../../../../chunks/route-for-a8f6a277.js";import{f as Ne}from"../../../../../../chunks/format-date-0917cdb3.js";import{L as _t}from"../../../../../../chunks/link-cbe110dd.js";import{n as At}from"../../../../../../chunks/notifications-2d1c3827.js";import{B as De}from"../../../../../../chunks/button-25cd39d5.js";import{f as Pt}from"../../../../../../chunks/events-service-dbc7f93b.js";import"../../../../../../chunks/navigation-3f1ea447.js";import"../../../../../../chunks/singletons-d1fb5791.js";import"../../../../../../chunks/index-eae5a65e.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/simplify-attributes-7a858880.js";import"../../../../../../chunks/index-a81b8c9e.js";import"../../../../../../chunks/data-converter-config-728a6f58.js";import"../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../chunks/index-a8ee0a5c.js";import"../../../../../../chunks/get-event-categorization-b2bce139.js";async function St(l,e=fetch){const t=await je(He("task-queue",l),{request:e,params:{taskQueueType:"1"}}),s=await je(He("task-queue",l),{request:e,params:{taskQueueType:"2"}});s.pollers.forEach(a=>{a.taskQueueTypes=["ACTIVITY"]}),t.pollers.forEach(a=>{a.taskQueueTypes=["WORKFLOW"]});const n=a=>(r,u)=>{const o=r[u.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return r[u.identity]={lastAccessTime:!o.lastAccessTime||o.lastAccessTime<u.lastAccessTime?u.lastAccessTime:o.lastAccessTime,taskQueueTypes:o.taskQueueTypes.concat([a])},r};return s.pollers.filter(a=>t.pollers.some(r=>{if(a.identity===r.identity)return a.taskQueueTypes=[...r.taskQueueTypes,...a.taskQueueTypes],a})),s.pollers.reduce(n("ACTIVITY"),t.pollers.reduce(n("WORKFLOW"),{})),{pollers:s.pollers,taskQueueStatus:s.taskQueueStatus}}async function Nt({workflow:l,namespace:e,reason:t}){return await je(He("workflow.terminate",{namespace:e,workflowId:l.id,runId:l.runId}),{options:{method:"POST",body:JSON.stringify({reason:t})},shouldRetry:!1})}const yt=l=>({}),at=l=>({}),Dt=l=>({}),lt=l=>({});function rt(l){let e,t,s,n,a,r,u,o,c,k,A,g,v,H,C,j,z,M;r=new ct({props:{icon:vt}});const x=l[4].title,F=Re(x,l,l[8],lt),R=F||Qt(),ee=l[4].content,U=Re(ee,l,l[8],at),q=U||Ct();return v=new De({props:{secondary:!0,$$slots:{default:[Wt]},$$scope:{ctx:l}}}),v.$on("click",l[6]),C=new De({props:{destroy:!0,disabled:l[2],$$slots:{default:[Vt]},$$scope:{ctx:l}}}),C.$on("click",l[7]),{c(){e=p("div"),t=p("div"),s=T(),n=p("div"),a=p("div"),B(r.$$.fragment),u=T(),o=p("div"),R&&R.c(),c=T(),k=p("div"),q&&q.c(),A=T(),g=p("div"),B(v.$$.fragment),H=T(),B(C.$$.fragment),this.h()},l(w){e=_(w,"DIV",{class:!0});var S=h(e);t=_(S,"DIV",{class:!0}),h(t).forEach(f),s=E(S),n=_(S,"DIV",{class:!0});var N=h(n);a=_(N,"DIV",{class:!0});var te=h(a);J(r.$$.fragment,te),te.forEach(f),u=E(N),o=_(N,"DIV",{class:!0});var se=h(o);R&&R.l(se),se.forEach(f),c=E(N),k=_(N,"DIV",{class:!0});var ae=h(k);q&&q.l(ae),ae.forEach(f),A=E(N),g=_(N,"DIV",{class:!0});var G=h(g);J(v.$$.fragment,G),H=E(G),J(C.$$.fragment,G),G.forEach(f),N.forEach(f),S.forEach(f),this.h()},h(){d(t,"class","overlay svelte-p12tlm"),d(a,"class","float-right cursor-pointer p-6"),d(o,"class","title svelte-p12tlm"),d(k,"class","content svelte-p12tlm"),d(g,"class","flex justify-end items-center p-6 space-x-2"),d(n,"class","body svelte-p12tlm"),d(e,"class","modal svelte-p12tlm")},m(w,S){I(w,e,S),i(e,t),i(e,s),i(e,n),i(n,a),K(r,a,null),i(n,u),i(n,o),R&&R.m(o,null),i(n,c),i(n,k),q&&q.m(k,null),i(n,A),i(n,g),K(v,g,null),i(g,H),K(C,g,null),j=!0,z||(M=ut(a,"click",l[5]),z=!0)},p(w,S){F&&F.p&&(!j||S&256)&&We(F,x,w,w[8],j?Fe(x,w[8],S,Dt):Ve(w[8]),lt),U&&U.p&&(!j||S&256)&&We(U,ee,w,w[8],j?Fe(ee,w[8],S,yt):Ve(w[8]),at);const N={};S&256&&(N.$$scope={dirty:S,ctx:w}),v.$set(N);const te={};S&4&&(te.disabled=w[2]),S&258&&(te.$$scope={dirty:S,ctx:w}),C.$set(te)},i(w){j||(b(r.$$.fragment,w),b(R,w),b(q,w),b(v.$$.fragment,w),b(C.$$.fragment,w),j=!0)},o(w){P(r.$$.fragment,w),P(R,w),P(q,w),P(v.$$.fragment,w),P(C.$$.fragment,w),j=!1},d(w){w&&f(e),Y(r),R&&R.d(w),q&&q.d(w),Y(v),Y(C),z=!1,M()}}}function Qt(l){let e,t;return{c(){e=p("h3"),t=D("Title")},l(s){e=_(s,"H3",{});var n=h(e);t=Q(n,"Title"),n.forEach(f)},m(s,n){I(s,e,n),i(e,t)},d(s){s&&f(e)}}}function Ct(l){let e,t;return{c(){e=p("span"),t=D("Content")},l(s){e=_(s,"SPAN",{});var n=h(e);t=Q(n,"Content"),n.forEach(f)},m(s,n){I(s,e,n),i(e,t)},d(s){s&&f(e)}}}function Wt(l){let e;return{c(){e=D("Cancel")},l(t){e=Q(t,"Cancel")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Vt(l){let e;return{c(){e=D(l[1])},l(t){e=Q(t,l[1])},m(t,s){I(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function Ft(l){let e,t,s=l[0]&&rt(l);return{c(){s&&s.c(),e=ye()},l(n){s&&s.l(n),e=ye()},m(n,a){s&&s.m(n,a),I(n,e,a),t=!0},p(n,[a]){n[0]?s?(s.p(n,a),a&1&&b(s,1)):(s=rt(n),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(Qe(),P(s,1,1,()=>{s=null}),Ce())},i(n){t||(b(s),t=!0)},o(n){P(s),t=!1},d(n){s&&s.d(n),n&&f(e)}}}function Rt(l,e,t){let{$$slots:s={},$$scope:n}=e,{open:a=!1}=e,{confirmText:r="Confirm"}=e,{confirmDisabled:u=!1}=e;const o=dt(),c=()=>o("cancelModal",{}),k=()=>o("cancelModal",{}),A=()=>o("confirmModal",{});return l.$$set=g=>{"open"in g&&t(0,a=g.open),"confirmText"in g&&t(1,r=g.confirmText),"confirmDisabled"in g&&t(2,u=g.confirmDisabled),"$$scope"in g&&t(8,n=g.$$scope)},[a,r,u,o,s,c,k,A,n]}class jt extends $e{constructor(e){super(),ke(this,e,Rt,Ft,ve,{open:0,confirmText:1,confirmDisabled:2})}}function ot(l){let e,t,s,n;return e=new De({props:{destroy:!0,thin:!0,$$slots:{default:[Ht]},$$scope:{ctx:l}}}),e.$on("click",l[3]),s=new jt({props:{open:l[2],confirmText:"Terminate",$$slots:{content:[Lt],title:[Ot]},$$scope:{ctx:l}}}),s.$on("cancelModal",l[4]),s.$on("confirmModal",l[6]),{c(){B(e.$$.fragment),t=T(),B(s.$$.fragment)},l(a){J(e.$$.fragment,a),t=E(a),J(s.$$.fragment,a)},m(a,r){K(e,a,r),I(a,t,r),K(s,a,r),n=!0},p(a,r){const u={};r&1024&&(u.$$scope={dirty:r,ctx:a}),e.$set(u);const o={};r&4&&(o.open=a[2]),r&1026&&(o.$$scope={dirty:r,ctx:a}),s.$set(o)},i(a){n||(b(e.$$.fragment,a),b(s.$$.fragment,a),n=!0)},o(a){P(e.$$.fragment,a),P(s.$$.fragment,a),n=!1},d(a){Y(e,a),a&&f(t),Y(s,a)}}}function Ht(l){let e;return{c(){e=D("Terminate")},l(t){e=Q(t,"Terminate")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Ot(l){let e,t;return{c(){e=p("h3"),t=D("Terminate Workflow"),this.h()},l(s){e=_(s,"H3",{slot:!0});var n=h(e);t=Q(n,"Terminate Workflow"),n.forEach(f),this.h()},h(){d(e,"slot","title")},m(s,n){I(s,e,n),i(e,t)},d(s){s&&f(e)}}}function Lt(l){let e,t,s,n,a,r,u;return{c(){e=p("div"),t=p("p"),s=D(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),n=T(),a=p("input"),this.h()},l(o){e=_(o,"DIV",{slot:!0});var c=h(e);t=_(c,"P",{});var k=h(t);s=Q(k,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),k.forEach(f),n=E(c),a=_(c,"INPUT",{class:!0,placeholder:!0}),c.forEach(f),this.h()},h(){d(a,"class","block w-full border border-gray-200 rounded-md p-2 mt-4"),d(a,"placeholder","Enter a reason"),d(e,"slot","content")},m(o,c){I(o,e,c),i(e,t),i(t,s),i(e,n),i(e,a),et(a,l[1]),r||(u=ut(a,"input",l[8]),r=!0)},p(o,c){c&2&&a.value!==o[1]&&et(a,o[1])},d(o){o&&f(e),r=!1,u()}}}function Mt(l){let e=l[5](l[0]),t,s,n=e&&ot(l);return{c(){n&&n.c(),t=ye()},l(a){n&&n.l(a),t=ye()},m(a,r){n&&n.m(a,r),I(a,t,r),s=!0},p(a,[r]){r&1&&(e=a[5](a[0])),e?n?(n.p(a,r),r&1&&b(n,1)):(n=ot(a),n.c(),b(n,1),n.m(t.parentNode,t)):n&&(Qe(),P(n,1,1,()=>{n=null}),Ce())},i(a){s||(b(n),s=!0)},o(a){P(n),s=!1},d(a){n&&n.d(a),a&&f(t)}}}function Ut(l,e,t){let{workflow:s}=e,{namespace:n}=e,a="",r=!1;const u=()=>t(2,r=!0),o=()=>t(2,r=!1),c=v=>String(v.status)==="Running",k=()=>{t(2,r=!1),t(1,a=""),At.add("success","Workflow Terminated"),window.location.reload()},A=()=>{Nt({workflow:s,namespace:n,reason:a}).then(k).catch(wt)};function g(){a=this.value,t(1,a)}return l.$$set=v=>{"workflow"in v&&t(0,s=v.workflow),"namespace"in v&&t(7,n=v.namespace)},[s,a,r,u,o,c,A,n,g]}class qt extends $e{constructor(e){super(),ke(this,e,Ut,Mt,ve,{workflow:0,namespace:7})}}function Bt(l){let e;return{c(){e=D("Download")},l(t){e=Q(t,"Download")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Jt(l){let e,t;return e=new De({props:{thin:!0,secondary:!0,icon:gt,$$slots:{default:[Bt]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){B(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,n){K(e,s,n),t=!0},p(s,[n]){const a={};n&32&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Kt(l,e,t){let s;Oe(l,Le,o=>t(1,s=o));const{workflow:n,run:a,namespace:r}=s.params;return[async()=>{const o=await Pt({namespace:r,workflowId:n,runId:a}),c=JSON.stringify({events:o},null,2);k(c,`${a}/events.json`,"text/plain");function k(A,g,v){const H=document.createElement("a"),C=new Blob([A],{type:v});H.href=URL.createObjectURL(C),H.download=g,H.click()}}]}class Yt extends $e{constructor(e){super(),ke(this,e,Kt,Jt,ve,{})}}function zt(l){let e;return{c(){e=D(l[1])},l(t){e=Q(t,l[1])},m(t,s){I(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function Gt(l){let e,t,s,n;return{c(){e=D(l[1]),t=T(),s=p("span"),n=D(l[2]),this.h()},l(a){e=Q(a,l[1]),t=E(a),s=_(a,"SPAN",{class:!0});var r=h(s);n=Q(r,l[2]),r.forEach(f),this.h()},h(){d(s,"class","px-2 text-blue-700 bg-blue-100 rounded-sm")},m(a,r){I(a,e,r),I(a,t,r),I(a,s,r),i(s,n)},p(a,r){r&2&&fe(e,a[1]),r&4&&fe(n,a[2])},d(a){a&&f(e),a&&f(t),a&&f(s)}}}function Xt(l){let e;function t(a,r){return a[2]||a[2]===0?Gt:zt}let s=t(l),n=s(l);return{c(){e=p("a"),n.c(),this.h()},l(a){e=_(a,"A",{class:!0,href:!0});var r=h(e);n.l(r),r.forEach(f),this.h()},h(){d(e,"class","block svelte-sf1jtj"),d(e,"href",l[0]),tt(e,"active",l[3])},m(a,r){I(a,e,r),n.m(e,null)},p(a,[r]){s===(s=t(a))&&n?n.p(a,r):(n.d(1),n=s(a),n&&(n.c(),n.m(e,null))),r&1&&d(e,"href",a[0]),r&8&&tt(e,"active",a[3])},i:st,o:st,d(a){a&&f(e),n.d()}}}function Zt(l,e,t){let s,n;Oe(l,Le,o=>t(4,n=o));let{href:a}=e,{label:r}=e,{amount:u=null}=e;return l.$$set=o=>{"href"in o&&t(0,a=o.href),"label"in o&&t(1,r=o.label),"amount"in o&&t(2,u=o.amount)},l.$$.update=()=>{l.$$.dirty&17&&t(3,s=n.url.pathname.includes(a))},[a,r,u,s,n]}class Te extends $e{constructor(e){super(),ke(this,e,Zt,Xt,ve,{href:0,label:1,amount:2})}}function ft(l){var Me,Ue;let e,t,s,n,a,r=l[1].name+"",u,o,c,k,A,g,v,H=l[1].runId+"",C,j,z,M,x,F,R,ee,U=Ne(l[1].startTime,"UTC")+"",q,w,S,N,te,se,ae,G=Ne(l[1].endTime,"UTC")+"",W,pe,re,ue,he,we,$,V,Z,le,X,ne,ce,ie,O,me=l[1].stateTransitionCount+"",_e,oe;V=new _t({props:{href:pt(l[4]),$$slots:{default:[xt]},$$scope:{ctx:l}}});let L=((Me=l[1])==null?void 0:Me.parentNamespaceId)&&((Ue=l[1])==null?void 0:Ue.parent)&&it(l);return{c(){e=p("p"),t=p("span"),s=D("Workflow Type:"),n=T(),a=p("span"),u=D(r),o=T(),c=p("p"),k=p("span"),A=D("Run ID:"),g=T(),v=p("span"),C=D(H),j=T(),z=p("div"),M=p("p"),x=p("span"),F=D("Start Time:"),R=T(),ee=p("span"),q=D(U),w=T(),S=p("p"),N=p("span"),te=D("Closed Time:"),se=T(),ae=p("span"),W=D(G),pe=T(),re=p("p"),ue=p("span"),he=D("Task Queue:"),we=T(),$=p("span"),B(V.$$.fragment),Z=T(),L&&L.c(),le=T(),X=p("p"),ne=p("span"),ce=D("State Transitions:"),ie=T(),O=p("span"),_e=D(me),this.h()},l(m){e=_(m,"P",{class:!0});var y=h(e);t=_(y,"SPAN",{class:!0});var ge=h(t);s=Q(ge,"Workflow Type:"),ge.forEach(f),n=E(y),a=_(y,"SPAN",{class:!0});var be=h(a);u=Q(be,r),be.forEach(f),y.forEach(f),o=E(m),c=_(m,"P",{class:!0});var de=h(c);k=_(de,"SPAN",{class:!0});var qe=h(k);A=Q(qe,"Run ID:"),qe.forEach(f),g=E(de),v=_(de,"SPAN",{class:!0});var Be=h(v);C=Q(Be,H),Be.forEach(f),de.forEach(f),j=E(m),z=_(m,"DIV",{class:!0});var Ee=h(z);M=_(Ee,"P",{});var Ie=h(M);x=_(Ie,"SPAN",{class:!0});var Je=h(x);F=Q(Je,"Start Time:"),Je.forEach(f),R=E(Ie),ee=_(Ie,"SPAN",{class:!0});var Ke=h(ee);q=Q(Ke,U),Ke.forEach(f),Ie.forEach(f),w=E(Ee),S=_(Ee,"P",{});var Ae=h(S);N=_(Ae,"SPAN",{class:!0});var Ye=h(N);te=Q(Ye,"Closed Time:"),Ye.forEach(f),se=E(Ae),ae=_(Ae,"SPAN",{class:!0});var ze=h(ae);W=Q(ze,G),ze.forEach(f),Ae.forEach(f),Ee.forEach(f),pe=E(m),re=_(m,"P",{class:!0});var Pe=h(re);ue=_(Pe,"SPAN",{class:!0});var Ge=h(ue);he=Q(Ge,"Task Queue:"),Ge.forEach(f),we=E(Pe),$=_(Pe,"SPAN",{class:!0});var Xe=h($);J(V.$$.fragment,Xe),Xe.forEach(f),Pe.forEach(f),Z=E(m),L&&L.l(m),le=E(m),X=_(m,"P",{class:!0});var Se=h(X);ne=_(Se,"SPAN",{class:!0});var Ze=h(ne);ce=Q(Ze,"State Transitions:"),Ze.forEach(f),ie=E(Se),O=_(Se,"SPAN",{class:!0});var xe=h(O);_e=Q(xe,me),xe.forEach(f),Se.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(a,"class","ml-1"),d(e,"class","text-md"),d(k,"class","font-medium"),d(v,"class","ml-1"),d(c,"class","text-md"),d(x,"class","font-medium"),d(ee,"class","ml-1"),d(N,"class","font-medium"),d(ae,"class","ml-1"),d(z,"class","text-md flex gap-6"),d(ue,"class","font-medium"),d($,"class","ml-1"),d(re,"class","text-md"),d(ne,"class","font-medium"),d(O,"class","ml-1"),d(X,"class","text-md")},m(m,y){I(m,e,y),i(e,t),i(t,s),i(e,n),i(e,a),i(a,u),I(m,o,y),I(m,c,y),i(c,k),i(k,A),i(c,g),i(c,v),i(v,C),I(m,j,y),I(m,z,y),i(z,M),i(M,x),i(x,F),i(M,R),i(M,ee),i(ee,q),i(z,w),i(z,S),i(S,N),i(N,te),i(S,se),i(S,ae),i(ae,W),I(m,pe,y),I(m,re,y),i(re,ue),i(ue,he),i(re,we),i(re,$),K(V,$,null),I(m,Z,y),L&&L.m(m,y),I(m,le,y),I(m,X,y),i(X,ne),i(ne,ce),i(X,ie),i(X,O),i(O,_e),oe=!0},p(m,y){var be,de;(!oe||y&2)&&r!==(r=m[1].name+"")&&fe(u,r),(!oe||y&2)&&H!==(H=m[1].runId+"")&&fe(C,H),(!oe||y&2)&&U!==(U=Ne(m[1].startTime,"UTC")+"")&&fe(q,U),(!oe||y&2)&&G!==(G=Ne(m[1].endTime,"UTC")+"")&&fe(W,G);const ge={};y&66&&(ge.$$scope={dirty:y,ctx:m}),V.$set(ge),((be=m[1])==null?void 0:be.parentNamespaceId)&&((de=m[1])==null?void 0:de.parent)?L?(L.p(m,y),y&2&&b(L,1)):(L=it(m),L.c(),b(L,1),L.m(le.parentNode,le)):L&&(Qe(),P(L,1,1,()=>{L=null}),Ce()),(!oe||y&2)&&me!==(me=m[1].stateTransitionCount+"")&&fe(_e,me)},i(m){oe||(b(V.$$.fragment,m),b(L),oe=!0)},o(m){P(V.$$.fragment,m),P(L),oe=!1},d(m){m&&f(e),m&&f(o),m&&f(c),m&&f(j),m&&f(z),m&&f(pe),m&&f(re),Y(V),m&&f(Z),L&&L.d(m),m&&f(le),m&&f(X)}}}function xt(l){let e=l[1].taskQueue+"",t;return{c(){t=D(e)},l(s){t=Q(s,e)},m(s,n){I(s,t,n)},p(s,n){n&2&&e!==(e=s[1].taskQueue+"")&&fe(t,e)},d(s){s&&f(t)}}}function it(l){var o,c;let e,t,s,n,a,r,u;return r=new _t({props:{href:nt({namespace:l[1].parentNamespaceId,workflow:(o=l[1].parent)==null?void 0:o.workflowId,run:(c=l[1].parent)==null?void 0:c.runId}),$$slots:{default:[es]},$$scope:{ctx:l}}}),{c(){e=p("p"),t=p("span"),s=D("Parent:"),n=T(),a=p("span"),B(r.$$.fragment),this.h()},l(k){e=_(k,"P",{class:!0});var A=h(e);t=_(A,"SPAN",{class:!0});var g=h(t);s=Q(g,"Parent:"),g.forEach(f),n=E(A),a=_(A,"SPAN",{class:!0});var v=h(a);J(r.$$.fragment,v),v.forEach(f),A.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(a,"class","ml-1"),d(e,"class","text-md")},m(k,A){I(k,e,A),i(e,t),i(t,s),i(e,n),i(e,a),K(r,a,null),u=!0},p(k,A){var v,H;const g={};A&2&&(g.href=nt({namespace:k[1].parentNamespaceId,workflow:(v=k[1].parent)==null?void 0:v.workflowId,run:(H=k[1].parent)==null?void 0:H.runId})),A&66&&(g.$$scope={dirty:A,ctx:k}),r.$set(g)},i(k){u||(b(r.$$.fragment,k),u=!0)},o(k){P(r.$$.fragment,k),u=!1},d(k){k&&f(e),Y(r)}}}function es(l){var s;let e=((s=l[1].parent)==null?void 0:s.workflowId)+"",t;return{c(){t=D(e)},l(n){t=Q(n,e)},m(n,a){I(n,t,a)},p(n,a){var r;a&2&&e!==(e=((r=n[1].parent)==null?void 0:r.workflowId)+"")&&fe(t,e)},d(n){n&&f(t)}}}function ts(l){var pe,re,ue,he,we;let e,t,s,n,a,r,u,o,c,k=l[1].id+"",A,g,v,H,C,j,z,M,x,F,R,ee,U,q,w,S,N,te,se,ae,G;n=new ct({props:{icon:bt}}),v=new $t({props:{status:(pe=l[1])==null?void 0:pe.status}}),j=new Yt({}),M=new qt({props:{workflow:l[1],namespace:l[0]}}),R=new Te({props:{label:"History",href:mt(l[4]),amount:(re=l[1])==null?void 0:re.historyEvents}}),U=new Te({props:{label:"Workers",href:pt(l[4]),amount:(he=(ue=l[2])==null?void 0:ue.pollers)==null?void 0:he.length}}),w=new Te({props:{label:"Pending Activities",href:Tt(l[4]),amount:(we=l[1].pendingActivities)==null?void 0:we.length}}),N=new Te({props:{label:"Stack Trace",href:Et(l[4])}}),se=new Te({props:{label:"Queries",href:It(l[4])}});let W=l[3]&&ft(l);return{c(){e=p("header"),t=p("main"),s=p("a"),B(n.$$.fragment),r=T(),u=p("div"),o=p("h1"),c=p("span"),A=D(k),g=T(),B(v.$$.fragment),H=T(),C=p("div"),B(j.$$.fragment),z=T(),B(M.$$.fragment),x=T(),F=p("nav"),B(R.$$.fragment),ee=T(),B(U.$$.fragment),q=T(),B(w.$$.fragment),S=T(),B(N.$$.fragment),te=T(),B(se.$$.fragment),ae=T(),W&&W.c(),this.h()},l($){e=_($,"HEADER",{class:!0});var V=h(e);t=_(V,"MAIN",{class:!0});var Z=h(t);s=_(Z,"A",{href:!0,class:!0,style:!0});var le=h(s);J(n.$$.fragment,le),le.forEach(f),r=E(Z),u=_(Z,"DIV",{class:!0});var X=h(u);o=_(X,"H1",{class:!0});var ne=h(o);c=_(ne,"SPAN",{class:!0});var ce=h(c);A=Q(ce,k),ce.forEach(f),g=E(ne),J(v.$$.fragment,ne),ne.forEach(f),H=E(X),C=_(X,"DIV",{class:!0});var ie=h(C);J(j.$$.fragment,ie),z=E(ie),J(M.$$.fragment,ie),ie.forEach(f),X.forEach(f),x=E(Z),F=_(Z,"NAV",{class:!0});var O=h(F);J(R.$$.fragment,O),ee=E(O),J(U.$$.fragment,O),q=E(O),J(w.$$.fragment,O),S=E(O),J(N.$$.fragment,O),te=E(O),J(se.$$.fragment,O),O.forEach(f),ae=E(Z),W&&W.l(Z),Z.forEach(f),V.forEach(f),this.h()},h(){d(s,"href",a="/namespaces/"+l[0]+"/workflows"),d(s,"class","absolute top-2 back-to-workflows"),ht(s,"left","-1.5rem"),d(c,"class","font-medium"),d(o,"class","text-2xl relative"),d(C,"class","flex justify-end items-center gap-4"),d(u,"class","flex justify-between items-center mb-8"),d(F,"class","flex gap-6 mb-6"),d(t,"class","flex flex-col gap-1 relative"),d(e,"class","flex flex-col gap-4")},m($,V){I($,e,V),i(e,t),i(t,s),K(n,s,null),i(t,r),i(t,u),i(u,o),i(o,c),i(c,A),i(o,g),K(v,o,null),i(u,H),i(u,C),K(j,C,null),i(C,z),K(M,C,null),i(t,x),i(t,F),K(R,F,null),i(F,ee),K(U,F,null),i(F,q),K(w,F,null),i(F,S),K(N,F,null),i(F,te),K(se,F,null),i(t,ae),W&&W.m(t,null),G=!0},p($,[V]){var ie,O,me,_e,oe;(!G||V&1&&a!==(a="/namespaces/"+$[0]+"/workflows"))&&d(s,"href",a),(!G||V&2)&&k!==(k=$[1].id+"")&&fe(A,k);const Z={};V&2&&(Z.status=(ie=$[1])==null?void 0:ie.status),v.$set(Z);const le={};V&2&&(le.workflow=$[1]),V&1&&(le.namespace=$[0]),M.$set(le);const X={};V&2&&(X.amount=(O=$[1])==null?void 0:O.historyEvents),R.$set(X);const ne={};V&4&&(ne.amount=(_e=(me=$[2])==null?void 0:me.pollers)==null?void 0:_e.length),U.$set(ne);const ce={};V&2&&(ce.amount=(oe=$[1].pendingActivities)==null?void 0:oe.length),w.$set(ce),$[3]?W?(W.p($,V),V&8&&b(W,1)):(W=ft($),W.c(),b(W,1),W.m(t,null)):W&&(Qe(),P(W,1,1,()=>{W=null}),Ce())},i($){G||(b(n.$$.fragment,$),b(v.$$.fragment,$),b(j.$$.fragment,$),b(M.$$.fragment,$),b(R.$$.fragment,$),b(U.$$.fragment,$),b(w.$$.fragment,$),b(N.$$.fragment,$),b(se.$$.fragment,$),b(W),G=!0)},o($){P(n.$$.fragment,$),P(v.$$.fragment,$),P(j.$$.fragment,$),P(M.$$.fragment,$),P(R.$$.fragment,$),P(U.$$.fragment,$),P(w.$$.fragment,$),P(N.$$.fragment,$),P(se.$$.fragment,$),P(W),G=!1},d($){$&&f(e),Y(n),Y(v),Y(j),Y(M),Y(R),Y(U),Y(w),Y(N),Y(se),W&&W.d()}}}function ss(l,e,t){let s,n;Oe(l,Le,c=>t(5,n=c));let{namespace:a}=e,{workflow:r}=e,{workers:u}=e;const o={namespace:a,workflow:r.id,run:r.runId};return l.$$set=c=>{"namespace"in c&&t(0,a=c.namespace),"workflow"in c&&t(1,r=c.workflow),"workers"in c&&t(2,u=c.workers)},l.$$.update=()=>{l.$$.dirty&32&&t(3,s=n.url.pathname.includes(mt(o)))},[a,r,u,s,o,n]}class ns extends $e{constructor(e){super(),ke(this,e,ss,ts,ve,{namespace:0,workflow:1,workers:2})}}function as(l){let e,t,s,n;t=new ns({props:{namespace:l[1],workflow:l[0],workers:l[2]}});const a=l[4].default,r=Re(a,l,l[3],null);return{c(){e=p("main"),B(t.$$.fragment),s=T(),r&&r.c(),this.h()},l(u){e=_(u,"MAIN",{class:!0});var o=h(e);J(t.$$.fragment,o),s=E(o),r&&r.l(o),o.forEach(f),this.h()},h(){d(e,"class","flex flex-col gap-6 h-full")},m(u,o){I(u,e,o),K(t,e,null),i(e,s),r&&r.m(e,null),n=!0},p(u,[o]){const c={};o&2&&(c.namespace=u[1]),o&1&&(c.workflow=u[0]),o&4&&(c.workers=u[2]),t.$set(c),r&&r.p&&(!n||o&8)&&We(r,a,u,u[3],n?Fe(a,u[3],o,null):Ve(u[3]),null)},i(u){n||(b(t.$$.fragment,u),b(r,u),n=!0)},o(u){P(t.$$.fragment,u),P(r,u),n=!1},d(u){u&&f(e),Y(t),r&&r.d(u)}}}const Ps=async function({params:l,fetch:e}){const{workflow:t,run:s,namespace:n}=l,r=await kt({namespace:n,workflowId:t,runId:s},e),{taskQueue:u}=r,o=await St({queue:u,namespace:n});return{props:{workflow:r,namespace:n,workers:o},stuff:{workflow:r,workers:o}}};function ls(l,e,t){let{$$slots:s={},$$scope:n}=e,{workflow:a}=e,{namespace:r}=e,{workers:u}=e;return l.$$set=o=>{"workflow"in o&&t(0,a=o.workflow),"namespace"in o&&t(1,r=o.namespace),"workers"in o&&t(2,u=o.workers),"$$scope"in o&&t(3,n=o.$$scope)},[a,r,u,n,s]}class Ss extends $e{constructor(e){super(),ke(this,e,ls,as,ve,{workflow:0,namespace:1,workers:2})}}export{Ss as default,Ps as load};
