import{S as we,i as $e,s as ke,e as p,k as E,w as K,c as _,a as $,d as f,m as I,x as Y,b as d,g as A,M as i,y as z,N as it,J as Ve,K as Fe,L as Re,q as T,o as S,B as G,l as De,n as Qe,p as We,P as _t,I as je,t as D,h as C,E as Te,j as fe,ae as et,O as Oe,Y as tt,f as dt}from"../../../../../../chunks/index-f021a159.js";import{r as He,a as Me,h as ht}from"../../../../../../chunks/route-for-api-04e7f080.js";import{W as wt,f as $t}from"../../../../../../chunks/workflow-status-021e44c4.js";import{F as ut,i as kt,j as vt,k as gt}from"../../../../../../chunks/index.es-3049caa8.js";import{p as Le}from"../../../../../../chunks/stores-2e95f632.js";import{d as ct,e as mt,f as bt,g as Tt,h as Et,i as st}from"../../../../../../chunks/route-for-d606e623.js";import{f as Ne}from"../../../../../../chunks/format-date-a3b7d511.js";import{L as pt}from"../../../../../../chunks/link-f8fe0e86.js";import{n as It}from"../../../../../../chunks/notifications-0558c095.js";import{B as Ce}from"../../../../../../chunks/button-123e362f.js";import{f as At}from"../../../../../../chunks/events-service-75cd4bf5.js";import"../../../../../../chunks/navigation-3f1ea447.js";import"../../../../../../chunks/singletons-d1fb5791.js";import"../../../../../../chunks/index-cfbcd7ef.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/simplify-attributes-42eef498.js";import"../../../../../../chunks/index-04d70d1c.js";import"../../../../../../chunks/data-converter-config-fb2097df.js";import"../../../../../../chunks/persist-store-210df7c0.js";import"../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../chunks/index-a8ee0a5c.js";import"../../../../../../chunks/get-event-categorization-b2bce139.js";async function Pt(l,e=fetch){const t=await He(Me("task-queue",l),{request:e,params:{taskQueueType:"1"}}),s=await He(Me("task-queue",l),{request:e,params:{taskQueueType:"2"}});s.pollers.forEach(n=>{n.taskQueueTypes=["ACTIVITY"]}),t.pollers.forEach(n=>{n.taskQueueTypes=["WORKFLOW"]});const a=n=>(r,u)=>{const o=r[u.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return r[u.identity]={lastAccessTime:!o.lastAccessTime||o.lastAccessTime<u.lastAccessTime?u.lastAccessTime:o.lastAccessTime,taskQueueTypes:o.taskQueueTypes.concat([n])},r};return s.pollers.filter(n=>t.pollers.some(r=>{if(n.identity===r.identity)return n.taskQueueTypes=[...r.taskQueueTypes,...n.taskQueueTypes],n})),s.pollers.reduce(a("ACTIVITY"),t.pollers.reduce(a("WORKFLOW"),{})),{pollers:s.pollers,taskQueueStatus:s.taskQueueStatus}}async function St({workflow:l,namespace:e,reason:t}){return await He(Me("workflow.terminate",{namespace:e,workflowId:l.id,runId:l.runId}),{options:{method:"POST",body:JSON.stringify({reason:t})},shouldRetry:!1})}const yt=l=>({}),nt=l=>({}),Nt=l=>({}),at=l=>({});function lt(l){let e,t,s,a,n,r,u,o,c,h,y,k,g,j,M,F,H,x;r=new ut({props:{icon:kt}});const L=l[4].title,ae=je(L,l,l[8],at),P=ae||Dt(),U=l[4].content,ee=je(U,l,l[8],nt),W=ee||Ct();return g=new Ce({props:{secondary:!0,$$slots:{default:[Qt]},$$scope:{ctx:l}}}),g.$on("click",l[6]),M=new Ce({props:{destroy:!0,disabled:l[2],$$slots:{default:[Wt]},$$scope:{ctx:l}}}),M.$on("click",l[7]),{c(){e=p("div"),t=p("div"),s=E(),a=p("div"),n=p("div"),K(r.$$.fragment),u=E(),o=p("div"),P&&P.c(),c=E(),h=p("div"),W&&W.c(),y=E(),k=p("div"),K(g.$$.fragment),j=E(),K(M.$$.fragment),this.h()},l(v){e=_(v,"DIV",{class:!0});var b=$(e);t=_(b,"DIV",{class:!0}),$(t).forEach(f),s=I(b),a=_(b,"DIV",{class:!0});var R=$(a);n=_(R,"DIV",{class:!0});var q=$(n);Y(r.$$.fragment,q),q.forEach(f),u=I(R),o=_(R,"DIV",{class:!0});var ce=$(o);P&&P.l(ce),ce.forEach(f),c=I(R),h=_(R,"DIV",{class:!0});var X=$(h);W&&W.l(X),X.forEach(f),y=I(R),k=_(R,"DIV",{class:!0});var te=$(k);Y(g.$$.fragment,te),j=I(te),Y(M.$$.fragment,te),te.forEach(f),R.forEach(f),b.forEach(f),this.h()},h(){d(t,"class","overlay svelte-p12tlm"),d(n,"class","float-right cursor-pointer p-6"),d(o,"class","title svelte-p12tlm"),d(h,"class","content svelte-p12tlm"),d(k,"class","flex justify-end items-center p-6 space-x-2"),d(a,"class","body svelte-p12tlm"),d(e,"class","modal svelte-p12tlm")},m(v,b){A(v,e,b),i(e,t),i(e,s),i(e,a),i(a,n),z(r,n,null),i(a,u),i(a,o),P&&P.m(o,null),i(a,c),i(a,h),W&&W.m(h,null),i(a,y),i(a,k),z(g,k,null),i(k,j),z(M,k,null),F=!0,H||(x=it(n,"click",l[5]),H=!0)},p(v,b){ae&&ae.p&&(!F||b&256)&&Ve(ae,L,v,v[8],F?Re(L,v[8],b,Nt):Fe(v[8]),at),ee&&ee.p&&(!F||b&256)&&Ve(ee,U,v,v[8],F?Re(U,v[8],b,yt):Fe(v[8]),nt);const R={};b&256&&(R.$$scope={dirty:b,ctx:v}),g.$set(R);const q={};b&4&&(q.disabled=v[2]),b&258&&(q.$$scope={dirty:b,ctx:v}),M.$set(q)},i(v){F||(T(r.$$.fragment,v),T(P,v),T(W,v),T(g.$$.fragment,v),T(M.$$.fragment,v),F=!0)},o(v){S(r.$$.fragment,v),S(P,v),S(W,v),S(g.$$.fragment,v),S(M.$$.fragment,v),F=!1},d(v){v&&f(e),G(r),P&&P.d(v),W&&W.d(v),G(g),G(M),H=!1,x()}}}function Dt(l){let e,t;return{c(){e=p("h3"),t=D("Title")},l(s){e=_(s,"H3",{});var a=$(e);t=C(a,"Title"),a.forEach(f)},m(s,a){A(s,e,a),i(e,t)},p:Te,d(s){s&&f(e)}}}function Ct(l){let e,t;return{c(){e=p("span"),t=D("Content")},l(s){e=_(s,"SPAN",{});var a=$(e);t=C(a,"Content"),a.forEach(f)},m(s,a){A(s,e,a),i(e,t)},p:Te,d(s){s&&f(e)}}}function Qt(l){let e;return{c(){e=D("Cancel")},l(t){e=C(t,"Cancel")},m(t,s){A(t,e,s)},d(t){t&&f(e)}}}function Wt(l){let e;return{c(){e=D(l[1])},l(t){e=C(t,l[1])},m(t,s){A(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function Vt(l){let e,t,s=l[0]&&lt(l);return{c(){s&&s.c(),e=De()},l(a){s&&s.l(a),e=De()},m(a,n){s&&s.m(a,n),A(a,e,n),t=!0},p(a,[n]){a[0]?s?(s.p(a,n),n&1&&T(s,1)):(s=lt(a),s.c(),T(s,1),s.m(e.parentNode,e)):s&&(Qe(),S(s,1,1,()=>{s=null}),We())},i(a){t||(T(s),t=!0)},o(a){S(s),t=!1},d(a){s&&s.d(a),a&&f(e)}}}function Ft(l,e,t){let{$$slots:s={},$$scope:a}=e,{open:n=!1}=e,{confirmText:r="Confirm"}=e,{confirmDisabled:u=!1}=e;const o=_t(),c=()=>o("cancelModal",{}),h=()=>o("cancelModal",{}),y=()=>o("confirmModal",{});return l.$$set=k=>{"open"in k&&t(0,n=k.open),"confirmText"in k&&t(1,r=k.confirmText),"confirmDisabled"in k&&t(2,u=k.confirmDisabled),"$$scope"in k&&t(8,a=k.$$scope)},[n,r,u,o,s,c,h,y,a]}class Rt extends we{constructor(e){super(),$e(this,e,Ft,Vt,ke,{open:0,confirmText:1,confirmDisabled:2})}}function rt(l){let e,t,s,a;return e=new Ce({props:{destroy:!0,thin:!0,$$slots:{default:[jt]},$$scope:{ctx:l}}}),e.$on("click",l[3]),s=new Rt({props:{open:l[2],confirmText:"Terminate",$$slots:{content:[Mt],title:[Ht]},$$scope:{ctx:l}}}),s.$on("cancelModal",l[4]),s.$on("confirmModal",l[6]),{c(){K(e.$$.fragment),t=E(),K(s.$$.fragment)},l(n){Y(e.$$.fragment,n),t=I(n),Y(s.$$.fragment,n)},m(n,r){z(e,n,r),A(n,t,r),z(s,n,r),a=!0},p(n,r){const u={};r&1024&&(u.$$scope={dirty:r,ctx:n}),e.$set(u);const o={};r&4&&(o.open=n[2]),r&1026&&(o.$$scope={dirty:r,ctx:n}),s.$set(o)},i(n){a||(T(e.$$.fragment,n),T(s.$$.fragment,n),a=!0)},o(n){S(e.$$.fragment,n),S(s.$$.fragment,n),a=!1},d(n){G(e,n),n&&f(t),G(s,n)}}}function jt(l){let e;return{c(){e=D("Terminate")},l(t){e=C(t,"Terminate")},m(t,s){A(t,e,s)},d(t){t&&f(e)}}}function Ht(l){let e,t;return{c(){e=p("h3"),t=D("Terminate Workflow"),this.h()},l(s){e=_(s,"H3",{slot:!0});var a=$(e);t=C(a,"Terminate Workflow"),a.forEach(f),this.h()},h(){d(e,"slot","title")},m(s,a){A(s,e,a),i(e,t)},p:Te,d(s){s&&f(e)}}}function Mt(l){let e,t,s,a,n,r,u;return{c(){e=p("div"),t=p("p"),s=D(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=E(),n=p("input"),this.h()},l(o){e=_(o,"DIV",{slot:!0});var c=$(e);t=_(c,"P",{});var h=$(t);s=C(h,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),h.forEach(f),a=I(c),n=_(c,"INPUT",{class:!0,placeholder:!0}),c.forEach(f),this.h()},h(){d(n,"class","block w-full border border-gray-200 rounded-md p-2 mt-4"),d(n,"placeholder","Enter a reason"),d(e,"slot","content")},m(o,c){A(o,e,c),i(e,t),i(t,s),i(e,a),i(e,n),et(n,l[1]),r||(u=it(n,"input",l[8]),r=!0)},p(o,c){c&2&&n.value!==o[1]&&et(n,o[1])},d(o){o&&f(e),r=!1,u()}}}function Ot(l){let e=l[5](l[0]),t,s,a=e&&rt(l);return{c(){a&&a.c(),t=De()},l(n){a&&a.l(n),t=De()},m(n,r){a&&a.m(n,r),A(n,t,r),s=!0},p(n,[r]){r&1&&(e=n[5](n[0])),e?a?(a.p(n,r),r&1&&T(a,1)):(a=rt(n),a.c(),T(a,1),a.m(t.parentNode,t)):a&&(Qe(),S(a,1,1,()=>{a=null}),We())},i(n){s||(T(a),s=!0)},o(n){S(a),s=!1},d(n){a&&a.d(n),n&&f(t)}}}function Lt(l,e,t){let{workflow:s}=e,{namespace:a}=e,n="",r=!1;const u=()=>t(2,r=!0),o=()=>t(2,r=!1),c=g=>String(g.status)==="Running",h=()=>{t(2,r=!1),t(1,n=""),It.add("success","Workflow Terminated"),window.location.reload()},y=()=>{St({workflow:s,namespace:a,reason:n}).then(h).catch(ht)};function k(){n=this.value,t(1,n)}return l.$$set=g=>{"workflow"in g&&t(0,s=g.workflow),"namespace"in g&&t(7,a=g.namespace)},[s,n,r,u,o,c,y,a,k]}class Ut extends we{constructor(e){super(),$e(this,e,Lt,Ot,ke,{workflow:0,namespace:7})}}function qt(l){let e;return{c(){e=D("Download")},l(t){e=C(t,"Download")},m(t,s){A(t,e,s)},d(t){t&&f(e)}}}function Bt(l){let e,t;return e=new Ce({props:{thin:!0,secondary:!0,icon:vt,$$slots:{default:[qt]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){K(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const n={};a&32&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Jt(l,e,t){let s;Oe(l,Le,o=>t(1,s=o));const{workflow:a,run:n,namespace:r}=s.params;return[async()=>{const o=await At({namespace:r,workflowId:a,runId:n}),c=JSON.stringify({events:o},null,2);h(c,`${n}/events.json`,"text/plain");function h(y,k,g){const j=document.createElement("a"),M=new Blob([y],{type:g});j.href=URL.createObjectURL(M),j.download=k,j.click()}}]}class Kt extends we{constructor(e){super(),$e(this,e,Jt,Bt,ke,{})}}function Yt(l){let e;return{c(){e=D(l[1])},l(t){e=C(t,l[1])},m(t,s){A(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function zt(l){let e,t,s,a;return{c(){e=D(l[1]),t=E(),s=p("span"),a=D(l[2]),this.h()},l(n){e=C(n,l[1]),t=I(n),s=_(n,"SPAN",{class:!0});var r=$(s);a=C(r,l[2]),r.forEach(f),this.h()},h(){d(s,"class","px-2 text-blue-700 bg-blue-100 rounded-sm")},m(n,r){A(n,e,r),A(n,t,r),A(n,s,r),i(s,a)},p(n,r){r&2&&fe(e,n[1]),r&4&&fe(a,n[2])},d(n){n&&f(e),n&&f(t),n&&f(s)}}}function Gt(l){let e;function t(n,r){return n[2]||n[2]===0?zt:Yt}let s=t(l),a=s(l);return{c(){e=p("a"),a.c(),this.h()},l(n){e=_(n,"A",{class:!0,href:!0});var r=$(e);a.l(r),r.forEach(f),this.h()},h(){d(e,"class","block svelte-sf1jtj"),d(e,"href",l[0]),tt(e,"active",l[3])},m(n,r){A(n,e,r),a.m(e,null)},p(n,[r]){s===(s=t(n))&&a?a.p(n,r):(a.d(1),a=s(n),a&&(a.c(),a.m(e,null))),r&1&&d(e,"href",n[0]),r&8&&tt(e,"active",n[3])},i:Te,o:Te,d(n){n&&f(e),a.d()}}}function Xt(l,e,t){let s,a;Oe(l,Le,o=>t(4,a=o));let{href:n}=e,{label:r}=e,{amount:u=null}=e;return l.$$set=o=>{"href"in o&&t(0,n=o.href),"label"in o&&t(1,r=o.label),"amount"in o&&t(2,u=o.amount)},l.$$.update=()=>{l.$$.dirty&17&&t(3,s=a.url.pathname.includes(n))},[n,r,u,s,a]}class be extends we{constructor(e){super(),$e(this,e,Xt,Gt,ke,{href:0,label:1,amount:2})}}function ot(l){var Ue;let e,t,s,a,n,r=l[1].name+"",u,o,c,h,y,k,g,j=l[1].runId+"",M,F,H,x,L,ae,P,U,ee=Ne(l[1].startTime,"UTC")+"",W,v,b,R,q,ce,X,te=Ne(l[1].endTime,"UTC")+"",ie,Q,le,me,de,he,pe,w,O,B,Z,se,ue,_e,re,ne=l[1].stateTransitionCount+"",J,oe;w=new pt({props:{href:mt(l[4]),$$slots:{default:[Zt]},$$scope:{ctx:l}}});let V=((Ue=l[1])==null?void 0:Ue.parent)&&ft(l);return{c(){e=p("p"),t=p("span"),s=D("Workflow Type:"),a=E(),n=p("span"),u=D(r),o=E(),c=p("p"),h=p("span"),y=D("Run ID:"),k=E(),g=p("span"),M=D(j),F=E(),H=p("div"),x=p("p"),L=p("span"),ae=D("Start Time:"),P=E(),U=p("span"),W=D(ee),v=E(),b=p("p"),R=p("span"),q=D("Closed Time:"),ce=E(),X=p("span"),ie=D(te),Q=E(),le=p("p"),me=p("span"),de=D("Task Queue:"),he=E(),pe=p("span"),K(w.$$.fragment),O=E(),V&&V.c(),B=E(),Z=p("p"),se=p("span"),ue=D("State Transitions:"),_e=E(),re=p("span"),J=D(ne),this.h()},l(m){e=_(m,"P",{class:!0});var N=$(e);t=_(N,"SPAN",{class:!0});var ve=$(t);s=C(ve,"Workflow Type:"),ve.forEach(f),a=I(N),n=_(N,"SPAN",{class:!0});var ge=$(n);u=C(ge,r),ge.forEach(f),N.forEach(f),o=I(m),c=_(m,"P",{class:!0});var Ee=$(c);h=_(Ee,"SPAN",{class:!0});var qe=$(h);y=C(qe,"Run ID:"),qe.forEach(f),k=I(Ee),g=_(Ee,"SPAN",{class:!0});var Be=$(g);M=C(Be,j),Be.forEach(f),Ee.forEach(f),F=I(m),H=_(m,"DIV",{class:!0});var Ie=$(H);x=_(Ie,"P",{});var Ae=$(x);L=_(Ae,"SPAN",{class:!0});var Je=$(L);ae=C(Je,"Start Time:"),Je.forEach(f),P=I(Ae),U=_(Ae,"SPAN",{class:!0});var Ke=$(U);W=C(Ke,ee),Ke.forEach(f),Ae.forEach(f),v=I(Ie),b=_(Ie,"P",{});var Pe=$(b);R=_(Pe,"SPAN",{class:!0});var Ye=$(R);q=C(Ye,"Closed Time:"),Ye.forEach(f),ce=I(Pe),X=_(Pe,"SPAN",{class:!0});var ze=$(X);ie=C(ze,te),ze.forEach(f),Pe.forEach(f),Ie.forEach(f),Q=I(m),le=_(m,"P",{class:!0});var Se=$(le);me=_(Se,"SPAN",{class:!0});var Ge=$(me);de=C(Ge,"Task Queue:"),Ge.forEach(f),he=I(Se),pe=_(Se,"SPAN",{class:!0});var Xe=$(pe);Y(w.$$.fragment,Xe),Xe.forEach(f),Se.forEach(f),O=I(m),V&&V.l(m),B=I(m),Z=_(m,"P",{class:!0});var ye=$(Z);se=_(ye,"SPAN",{class:!0});var Ze=$(se);ue=C(Ze,"State Transitions:"),Ze.forEach(f),_e=I(ye),re=_(ye,"SPAN",{class:!0});var xe=$(re);J=C(xe,ne),xe.forEach(f),ye.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(n,"class","ml-1"),d(e,"class","text-md"),d(h,"class","font-medium"),d(g,"class","ml-1"),d(c,"class","text-md"),d(L,"class","font-medium"),d(U,"class","ml-1"),d(R,"class","font-medium"),d(X,"class","ml-1"),d(H,"class","text-md flex gap-6"),d(me,"class","font-medium"),d(pe,"class","ml-1"),d(le,"class","text-md"),d(se,"class","font-medium"),d(re,"class","ml-1"),d(Z,"class","text-md")},m(m,N){A(m,e,N),i(e,t),i(t,s),i(e,a),i(e,n),i(n,u),A(m,o,N),A(m,c,N),i(c,h),i(h,y),i(c,k),i(c,g),i(g,M),A(m,F,N),A(m,H,N),i(H,x),i(x,L),i(L,ae),i(x,P),i(x,U),i(U,W),i(H,v),i(H,b),i(b,R),i(R,q),i(b,ce),i(b,X),i(X,ie),A(m,Q,N),A(m,le,N),i(le,me),i(me,de),i(le,he),i(le,pe),z(w,pe,null),A(m,O,N),V&&V.m(m,N),A(m,B,N),A(m,Z,N),i(Z,se),i(se,ue),i(Z,_e),i(Z,re),i(re,J),oe=!0},p(m,N){var ge;(!oe||N&2)&&r!==(r=m[1].name+"")&&fe(u,r),(!oe||N&2)&&j!==(j=m[1].runId+"")&&fe(M,j),(!oe||N&2)&&ee!==(ee=Ne(m[1].startTime,"UTC")+"")&&fe(W,ee),(!oe||N&2)&&te!==(te=Ne(m[1].endTime,"UTC")+"")&&fe(ie,te);const ve={};N&66&&(ve.$$scope={dirty:N,ctx:m}),w.$set(ve),(ge=m[1])!=null&&ge.parent?V?(V.p(m,N),N&2&&T(V,1)):(V=ft(m),V.c(),T(V,1),V.m(B.parentNode,B)):V&&(Qe(),S(V,1,1,()=>{V=null}),We()),(!oe||N&2)&&ne!==(ne=m[1].stateTransitionCount+"")&&fe(J,ne)},i(m){oe||(T(w.$$.fragment,m),T(V),oe=!0)},o(m){S(w.$$.fragment,m),S(V),oe=!1},d(m){m&&f(e),m&&f(o),m&&f(c),m&&f(F),m&&f(H),m&&f(Q),m&&f(le),G(w),m&&f(O),V&&V.d(m),m&&f(B),m&&f(Z)}}}function Zt(l){let e=l[1].taskQueue+"",t;return{c(){t=D(e)},l(s){t=C(s,e)},m(s,a){A(s,t,a)},p(s,a){a&2&&e!==(e=s[1].taskQueue+"")&&fe(t,e)},d(s){s&&f(t)}}}function ft(l){var o,c;let e,t,s,a,n,r,u;return r=new pt({props:{href:st({namespace:l[0],workflow:(o=l[1].parent)==null?void 0:o.workflowId,run:(c=l[1].parent)==null?void 0:c.runId}),$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){e=p("p"),t=p("span"),s=D("Parent:"),a=E(),n=p("span"),K(r.$$.fragment),this.h()},l(h){e=_(h,"P",{class:!0});var y=$(e);t=_(y,"SPAN",{class:!0});var k=$(t);s=C(k,"Parent:"),k.forEach(f),a=I(y),n=_(y,"SPAN",{class:!0});var g=$(n);Y(r.$$.fragment,g),g.forEach(f),y.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(n,"class","ml-1"),d(e,"class","text-md")},m(h,y){A(h,e,y),i(e,t),i(t,s),i(e,a),i(e,n),z(r,n,null),u=!0},p(h,y){var g,j;const k={};y&3&&(k.href=st({namespace:h[0],workflow:(g=h[1].parent)==null?void 0:g.workflowId,run:(j=h[1].parent)==null?void 0:j.runId})),y&66&&(k.$$scope={dirty:y,ctx:h}),r.$set(k)},i(h){u||(T(r.$$.fragment,h),u=!0)},o(h){S(r.$$.fragment,h),u=!1},d(h){h&&f(e),G(r)}}}function xt(l){var s;let e=((s=l[1].parent)==null?void 0:s.workflowId)+"",t;return{c(){t=D(e)},l(a){t=C(a,e)},m(a,n){A(a,t,n)},p(a,n){var r;n&2&&e!==(e=((r=a[1].parent)==null?void 0:r.workflowId)+"")&&fe(t,e)},d(a){a&&f(t)}}}function es(l){var le,me,de,he,pe;let e,t,s,a,n,r,u,o,c,h,y,k,g=l[1].id+"",j,M,F,H,x,L,ae,P,U,ee,W,v,b,R,q,ce,X,te,ie;a=new ut({props:{icon:gt}}),h=new wt({props:{status:(le=l[1])==null?void 0:le.status,delay:0}}),H=new Kt({}),L=new Ut({props:{workflow:l[1],namespace:l[0]}}),U=new be({props:{label:"History",href:ct(l[4]),amount:(me=l[1])==null?void 0:me.historyEvents}}),W=new be({props:{label:"Workers",href:mt(l[4]),amount:(he=(de=l[2])==null?void 0:de.pollers)==null?void 0:he.length}}),b=new be({props:{label:"Pending Activities",href:bt(l[4]),amount:(pe=l[1].pendingActivities)==null?void 0:pe.length}}),q=new be({props:{label:"Stack Trace",href:Tt(l[4])}}),X=new be({props:{label:"Queries",href:Et(l[4])}});let Q=l[3]&&ot(l);return{c(){e=p("header"),t=p("main"),s=p("a"),K(a.$$.fragment),r=E(),u=p("div"),o=p("h1"),c=p("span"),K(h.$$.fragment),y=E(),k=p("span"),j=D(g),M=E(),F=p("div"),K(H.$$.fragment),x=E(),K(L.$$.fragment),ae=E(),P=p("nav"),K(U.$$.fragment),ee=E(),K(W.$$.fragment),v=E(),K(b.$$.fragment),R=E(),K(q.$$.fragment),ce=E(),K(X.$$.fragment),te=E(),Q&&Q.c(),this.h()},l(w){e=_(w,"HEADER",{class:!0});var O=$(e);t=_(O,"MAIN",{class:!0});var B=$(t);s=_(B,"A",{href:!0,class:!0,style:!0});var Z=$(s);Y(a.$$.fragment,Z),Z.forEach(f),r=I(B),u=_(B,"DIV",{class:!0});var se=$(u);o=_(se,"H1",{class:!0});var ue=$(o);c=_(ue,"SPAN",{class:!0});var _e=$(c);Y(h.$$.fragment,_e),_e.forEach(f),y=I(ue),k=_(ue,"SPAN",{class:!0});var re=$(k);j=C(re,g),re.forEach(f),ue.forEach(f),M=I(se),F=_(se,"DIV",{class:!0});var ne=$(F);Y(H.$$.fragment,ne),x=I(ne),Y(L.$$.fragment,ne),ne.forEach(f),se.forEach(f),ae=I(B),P=_(B,"NAV",{class:!0});var J=$(P);Y(U.$$.fragment,J),ee=I(J),Y(W.$$.fragment,J),v=I(J),Y(b.$$.fragment,J),R=I(J),Y(q.$$.fragment,J),ce=I(J),Y(X.$$.fragment,J),J.forEach(f),te=I(B),Q&&Q.l(B),B.forEach(f),O.forEach(f),this.h()},h(){d(s,"href",n="/namespaces/"+l[0]+"/workflows"),d(s,"class","absolute top-2 back-to-workflows"),dt(s,"left","-1.5rem"),d(c,"class","mr-2"),d(k,"class","font-medium"),d(o,"class","text-2xl flex relative items-center"),d(F,"class","flex justify-end items-center gap-4"),d(u,"class","flex justify-between items-center mb-8"),d(P,"class","flex gap-6 mb-6"),d(t,"class","flex flex-col gap-1 relative"),d(e,"class","flex flex-col gap-4")},m(w,O){A(w,e,O),i(e,t),i(t,s),z(a,s,null),i(t,r),i(t,u),i(u,o),i(o,c),z(h,c,null),i(o,y),i(o,k),i(k,j),i(u,M),i(u,F),z(H,F,null),i(F,x),z(L,F,null),i(t,ae),i(t,P),z(U,P,null),i(P,ee),z(W,P,null),i(P,v),z(b,P,null),i(P,R),z(q,P,null),i(P,ce),z(X,P,null),i(t,te),Q&&Q.m(t,null),ie=!0},p(w,[O]){var re,ne,J,oe,V;(!ie||O&1&&n!==(n="/namespaces/"+w[0]+"/workflows"))&&d(s,"href",n);const B={};O&2&&(B.status=(re=w[1])==null?void 0:re.status),h.$set(B),(!ie||O&2)&&g!==(g=w[1].id+"")&&fe(j,g);const Z={};O&2&&(Z.workflow=w[1]),O&1&&(Z.namespace=w[0]),L.$set(Z);const se={};O&2&&(se.amount=(ne=w[1])==null?void 0:ne.historyEvents),U.$set(se);const ue={};O&4&&(ue.amount=(oe=(J=w[2])==null?void 0:J.pollers)==null?void 0:oe.length),W.$set(ue);const _e={};O&2&&(_e.amount=(V=w[1].pendingActivities)==null?void 0:V.length),b.$set(_e),w[3]?Q?(Q.p(w,O),O&8&&T(Q,1)):(Q=ot(w),Q.c(),T(Q,1),Q.m(t,null)):Q&&(Qe(),S(Q,1,1,()=>{Q=null}),We())},i(w){ie||(T(a.$$.fragment,w),T(h.$$.fragment,w),T(H.$$.fragment,w),T(L.$$.fragment,w),T(U.$$.fragment,w),T(W.$$.fragment,w),T(b.$$.fragment,w),T(q.$$.fragment,w),T(X.$$.fragment,w),T(Q),ie=!0)},o(w){S(a.$$.fragment,w),S(h.$$.fragment,w),S(H.$$.fragment,w),S(L.$$.fragment,w),S(U.$$.fragment,w),S(W.$$.fragment,w),S(b.$$.fragment,w),S(q.$$.fragment,w),S(X.$$.fragment,w),S(Q),ie=!1},d(w){w&&f(e),G(a),G(h),G(H),G(L),G(U),G(W),G(b),G(q),G(X),Q&&Q.d()}}}function ts(l,e,t){let s,a;Oe(l,Le,c=>t(5,a=c));let{namespace:n}=e,{workflow:r}=e,{workers:u}=e;const o={namespace:n,workflow:r.id,run:r.runId};return l.$$set=c=>{"namespace"in c&&t(0,n=c.namespace),"workflow"in c&&t(1,r=c.workflow),"workers"in c&&t(2,u=c.workers)},l.$$.update=()=>{l.$$.dirty&32&&t(3,s=a.url.pathname.includes(ct(o)))},[n,r,u,s,o,a]}class ss extends we{constructor(e){super(),$e(this,e,ts,es,ke,{namespace:0,workflow:1,workers:2})}}function ns(l){let e,t,s,a;t=new ss({props:{namespace:l[1],workflow:l[0],workers:l[2]}});const n=l[4].default,r=je(n,l,l[3],null);return{c(){e=p("main"),K(t.$$.fragment),s=E(),r&&r.c(),this.h()},l(u){e=_(u,"MAIN",{class:!0});var o=$(e);Y(t.$$.fragment,o),s=I(o),r&&r.l(o),o.forEach(f),this.h()},h(){d(e,"class","flex flex-col gap-6 h-full")},m(u,o){A(u,e,o),z(t,e,null),i(e,s),r&&r.m(e,null),a=!0},p(u,[o]){const c={};o&2&&(c.namespace=u[1]),o&1&&(c.workflow=u[0]),o&4&&(c.workers=u[2]),t.$set(c),r&&r.p&&(!a||o&8)&&Ve(r,n,u,u[3],a?Re(n,u[3],o,null):Fe(u[3]),null)},i(u){a||(T(t.$$.fragment,u),T(r,u),a=!0)},o(u){S(t.$$.fragment,u),S(r,u),a=!1},d(u){u&&f(e),G(t),r&&r.d(u)}}}const Ps=async function({params:l,fetch:e}){const{workflow:t,run:s,namespace:a}=l,n={namespace:a,workflowId:decodeURIComponent(t),runId:s},r=await $t(n,e),{taskQueue:u}=r,o=await Pt({queue:u,namespace:a});return{props:{workflow:r,namespace:a,workers:o},stuff:{workflow:r,workers:o}}};function as(l,e,t){let{$$slots:s={},$$scope:a}=e,{workflow:n}=e,{namespace:r}=e,{workers:u}=e;return l.$$set=o=>{"workflow"in o&&t(0,n=o.workflow),"namespace"in o&&t(1,r=o.namespace),"workers"in o&&t(2,u=o.workers),"$$scope"in o&&t(3,a=o.$$scope)},[n,r,u,a,s]}class Ss extends we{constructor(e){super(),$e(this,e,as,ns,ke,{workflow:0,namespace:1,workers:2})}}export{Ss as default,Ps as load};
