import{S as ve,i as ge,s as be,e as p,k as T,w as J,c as _,a as h,d as f,m as E,x as X,b as d,g as A,Q as i,y as z,R as ft,M as Ce,N as We,O as Ve,q as I,o as y,B as G,l as ye,n as De,p as Qe,ah as dt,U as it,aC as ht,L as Fe,t as Q,h as C,j as oe,ao as Ze,X as xe,K as et,I as ut,aD as wt,f as kt}from"../../../../../../chunks/vendor-35e673e5.js";import{r as Me,a as Re,h as $t}from"../../../../../../chunks/route-for-api-9d839eb2.js";import{W as vt,a as gt}from"../../../../../../chunks/workflow-status-fa218eb5.js";import{p as ct}from"../../../../../../chunks/stores-668aa160.js";import{d as mt,e as pt,f as bt,g as Tt,h as Et,c as tt}from"../../../../../../chunks/route-for-a0c2e129.js";import{f as Ne}from"../../../../../../chunks/format-date-7efcccd1.js";import{n as It}from"../../../../../../chunks/notifications-bbeaa14f.js";import{B as He}from"../../../../../../chunks/button-6a815484.js";import{L as _t}from"../../../../../../chunks/link-f7dd30b0.js";import"../../../../../../chunks/navigation-2df0726c.js";import"../../../../../../chunks/singletons-a6a7384f.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";async function At(l,e=fetch){const t=await Me(Re("task-queue",l),{request:e,params:{taskQueueType:"1"}}),n=await Me(Re("task-queue",l),{request:e,params:{taskQueueType:"2"}});n.pollers.forEach(s=>{s.taskQueueTypes=["ACTIVITY"]}),t.pollers.forEach(s=>{s.taskQueueTypes=["WORKFLOW"]});const a=s=>(r,u)=>{const o=r[u.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return r[u.identity]={lastAccessTime:!o.lastAccessTime||o.lastAccessTime<u.lastAccessTime?u.lastAccessTime:o.lastAccessTime,taskQueueTypes:o.taskQueueTypes.concat([s])},r};return n.pollers.filter(s=>t.pollers.some(r=>{if(s.identity===r.identity)return s.taskQueueTypes=[...r.taskQueueTypes,...s.taskQueueTypes],s})),n.pollers.reduce(a("ACTIVITY"),t.pollers.reduce(a("WORKFLOW"),{})),{pollers:n.pollers,taskQueueStatus:n.taskQueueStatus}}async function Pt({workflow:l,namespace:e,reason:t}){return await Me(Re("workflow.terminate",{namespace:e,executionId:l.id,runId:l.runId}),{options:{method:"POST",body:JSON.stringify({reason:t})},shouldRetry:!1})}const St=l=>({}),st=l=>({}),Nt=l=>({}),at=l=>({});function nt(l){let e,t,n,a,s,r,u,o,c,k,S,g,v,K,W,j,P,H;r=new it({props:{icon:ht}});const x=l[4].title,q=Fe(x,l,l[8],at),U=q||yt(),O=l[4].content,ee=Fe(O,l,l[8],st),V=ee||Dt();return v=new He({props:{secondary:!0,$$slots:{default:[Qt]},$$scope:{ctx:l}}}),v.$on("click",l[6]),W=new He({props:{destroy:!0,disabled:l[2],$$slots:{default:[Ct]},$$scope:{ctx:l}}}),W.$on("click",l[7]),{c(){e=p("div"),t=p("div"),n=T(),a=p("div"),s=p("div"),J(r.$$.fragment),u=T(),o=p("div"),U&&U.c(),c=T(),k=p("div"),V&&V.c(),S=T(),g=p("div"),J(v.$$.fragment),K=T(),J(W.$$.fragment),this.h()},l($){e=_($,"DIV",{class:!0});var b=h(e);t=_(b,"DIV",{class:!0}),h(t).forEach(f),n=E(b),a=_(b,"DIV",{class:!0});var M=h(a);s=_(M,"DIV",{class:!0});var B=h(s);X(r.$$.fragment,B),B.forEach(f),u=E(M),o=_(M,"DIV",{class:!0});var N=h(o);U&&U.l(N),N.forEach(f),c=E(M),k=_(M,"DIV",{class:!0});var ae=h(k);V&&V.l(ae),ae.forEach(f),S=E(M),g=_(M,"DIV",{class:!0});var te=h(g);X(v.$$.fragment,te),K=E(te),X(W.$$.fragment,te),te.forEach(f),M.forEach(f),b.forEach(f),this.h()},h(){d(t,"class","overlay svelte-p12tlm"),d(s,"class","float-right cursor-pointer p-6"),d(o,"class","title svelte-p12tlm"),d(k,"class","content svelte-p12tlm"),d(g,"class","flex justify-end items-center p-6 space-x-2"),d(a,"class","body svelte-p12tlm"),d(e,"class","modal svelte-p12tlm")},m($,b){A($,e,b),i(e,t),i(e,n),i(e,a),i(a,s),z(r,s,null),i(a,u),i(a,o),U&&U.m(o,null),i(a,c),i(a,k),V&&V.m(k,null),i(a,S),i(a,g),z(v,g,null),i(g,K),z(W,g,null),j=!0,P||(H=ft(s,"click",l[5]),P=!0)},p($,b){q&&q.p&&(!j||b&256)&&Ce(q,x,$,$[8],j?Ve(x,$[8],b,Nt):We($[8]),at),ee&&ee.p&&(!j||b&256)&&Ce(ee,O,$,$[8],j?Ve(O,$[8],b,St):We($[8]),st);const M={};b&256&&(M.$$scope={dirty:b,ctx:$}),v.$set(M);const B={};b&4&&(B.disabled=$[2]),b&258&&(B.$$scope={dirty:b,ctx:$}),W.$set(B)},i($){j||(I(r.$$.fragment,$),I(U,$),I(V,$),I(v.$$.fragment,$),I(W.$$.fragment,$),j=!0)},o($){y(r.$$.fragment,$),y(U,$),y(V,$),y(v.$$.fragment,$),y(W.$$.fragment,$),j=!1},d($){$&&f(e),G(r),U&&U.d($),V&&V.d($),G(v),G(W),P=!1,H()}}}function yt(l){let e,t;return{c(){e=p("h3"),t=Q("Title")},l(n){e=_(n,"H3",{});var a=h(e);t=C(a,"Title"),a.forEach(f)},m(n,a){A(n,e,a),i(e,t)},d(n){n&&f(e)}}}function Dt(l){let e,t;return{c(){e=p("span"),t=Q("Content")},l(n){e=_(n,"SPAN",{});var a=h(e);t=C(a,"Content"),a.forEach(f)},m(n,a){A(n,e,a),i(e,t)},d(n){n&&f(e)}}}function Qt(l){let e;return{c(){e=Q("Cancel")},l(t){e=C(t,"Cancel")},m(t,n){A(t,e,n)},d(t){t&&f(e)}}}function Ct(l){let e;return{c(){e=Q(l[1])},l(t){e=C(t,l[1])},m(t,n){A(t,e,n)},p(t,n){n&2&&oe(e,t[1])},d(t){t&&f(e)}}}function Wt(l){let e,t,n=l[0]&&nt(l);return{c(){n&&n.c(),e=ye()},l(a){n&&n.l(a),e=ye()},m(a,s){n&&n.m(a,s),A(a,e,s),t=!0},p(a,[s]){a[0]?n?(n.p(a,s),s&1&&I(n,1)):(n=nt(a),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(De(),y(n,1,1,()=>{n=null}),Qe())},i(a){t||(I(n),t=!0)},o(a){y(n),t=!1},d(a){n&&n.d(a),a&&f(e)}}}function Vt(l,e,t){let{$$slots:n={},$$scope:a}=e,{open:s=!1}=e,{confirmText:r="Confirm"}=e,{confirmDisabled:u=!1}=e;const o=dt(),c=()=>o("cancelModal",{}),k=()=>o("cancelModal",{}),S=()=>o("confirmModal",{});return l.$$set=g=>{"open"in g&&t(0,s=g.open),"confirmText"in g&&t(1,r=g.confirmText),"confirmDisabled"in g&&t(2,u=g.confirmDisabled),"$$scope"in g&&t(8,a=g.$$scope)},[s,r,u,o,n,c,k,S,a]}class Ft extends ve{constructor(e){super();ge(this,e,Vt,Wt,be,{open:0,confirmText:1,confirmDisabled:2})}}function lt(l){let e,t,n,a;return e=new He({props:{destroy:!0,thin:!0,$$slots:{default:[Mt]},$$scope:{ctx:l}}}),e.$on("click",l[3]),n=new Ft({props:{open:l[2],confirmText:"Terminate",$$slots:{content:[Ht],title:[Rt]},$$scope:{ctx:l}}}),n.$on("cancelModal",l[4]),n.$on("confirmModal",l[6]),{c(){J(e.$$.fragment),t=T(),J(n.$$.fragment)},l(s){X(e.$$.fragment,s),t=E(s),X(n.$$.fragment,s)},m(s,r){z(e,s,r),A(s,t,r),z(n,s,r),a=!0},p(s,r){const u={};r&1024&&(u.$$scope={dirty:r,ctx:s}),e.$set(u);const o={};r&4&&(o.open=s[2]),r&1026&&(o.$$scope={dirty:r,ctx:s}),n.$set(o)},i(s){a||(I(e.$$.fragment,s),I(n.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),y(n.$$.fragment,s),a=!1},d(s){G(e,s),s&&f(t),G(n,s)}}}function Mt(l){let e;return{c(){e=Q("Terminate")},l(t){e=C(t,"Terminate")},m(t,n){A(t,e,n)},d(t){t&&f(e)}}}function Rt(l){let e,t;return{c(){e=p("h3"),t=Q("Terminate Workflow"),this.h()},l(n){e=_(n,"H3",{slot:!0});var a=h(e);t=C(a,"Terminate Workflow"),a.forEach(f),this.h()},h(){d(e,"slot","title")},m(n,a){A(n,e,a),i(e,t)},d(n){n&&f(e)}}}function Ht(l){let e,t,n,a,s,r,u;return{c(){e=p("div"),t=p("p"),n=Q(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=T(),s=p("input"),this.h()},l(o){e=_(o,"DIV",{slot:!0});var c=h(e);t=_(c,"P",{});var k=h(t);n=C(k,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),k.forEach(f),a=E(c),s=_(c,"INPUT",{class:!0,placeholder:!0}),c.forEach(f),this.h()},h(){d(s,"class","block w-full border border-gray-200 rounded-md p-2 mt-4"),d(s,"placeholder","Enter a reason"),d(e,"slot","content")},m(o,c){A(o,e,c),i(e,t),i(t,n),i(e,a),i(e,s),Ze(s,l[1]),r||(u=ft(s,"input",l[8]),r=!0)},p(o,c){c&2&&s.value!==o[1]&&Ze(s,o[1])},d(o){o&&f(e),r=!1,u()}}}function Ot(l){let e=l[5](l[0]),t,n,a=e&&lt(l);return{c(){a&&a.c(),t=ye()},l(s){a&&a.l(s),t=ye()},m(s,r){a&&a.m(s,r),A(s,t,r),n=!0},p(s,[r]){r&1&&(e=s[5](s[0])),e?a?(a.p(s,r),r&1&&I(a,1)):(a=lt(s),a.c(),I(a,1),a.m(t.parentNode,t)):a&&(De(),y(a,1,1,()=>{a=null}),Qe())},i(s){n||(I(a),n=!0)},o(s){y(a),n=!1},d(s){a&&a.d(s),s&&f(t)}}}function Lt(l,e,t){let{workflow:n}=e,{namespace:a}=e,s="",r=!1;const u=()=>t(2,r=!0),o=()=>t(2,r=!1),c=v=>String(v.status)==="Running",k=()=>{t(2,r=!1),t(1,s=""),It.add("success","Workflow Terminated"),window.location.reload()},S=()=>{Pt({workflow:n,namespace:a,reason:s}).then(k).catch($t)};function g(){s=this.value,t(1,s)}return l.$$set=v=>{"workflow"in v&&t(0,n=v.workflow),"namespace"in v&&t(7,a=v.namespace)},[n,s,r,u,o,c,S,a,g]}class Ut extends ve{constructor(e){super();ge(this,e,Lt,Ot,be,{workflow:0,namespace:7})}}function jt(l){let e;return{c(){e=Q(l[1])},l(t){e=C(t,l[1])},m(t,n){A(t,e,n)},p(t,n){n&2&&oe(e,t[1])},d(t){t&&f(e)}}}function qt(l){let e,t,n,a;return{c(){e=Q(l[1]),t=T(),n=p("span"),a=Q(l[2]),this.h()},l(s){e=C(s,l[1]),t=E(s),n=_(s,"SPAN",{class:!0});var r=h(n);a=C(r,l[2]),r.forEach(f),this.h()},h(){d(n,"class","px-2 text-blue-700 bg-blue-100 rounded-sm")},m(s,r){A(s,e,r),A(s,t,r),A(s,n,r),i(n,a)},p(s,r){r&2&&oe(e,s[1]),r&4&&oe(a,s[2])},d(s){s&&f(e),s&&f(t),s&&f(n)}}}function Bt(l){let e;function t(s,r){return s[2]||s[2]===0?qt:jt}let n=t(l),a=n(l);return{c(){e=p("a"),a.c(),this.h()},l(s){e=_(s,"A",{class:!0,href:!0});var r=h(e);a.l(r),r.forEach(f),this.h()},h(){d(e,"class","block svelte-sf1jtj"),d(e,"href",l[0]),xe(e,"active",l[3])},m(s,r){A(s,e,r),a.m(e,null)},p(s,[r]){n===(n=t(s))&&a?a.p(s,r):(a.d(1),a=n(s),a&&(a.c(),a.m(e,null))),r&1&&d(e,"href",s[0]),r&8&&xe(e,"active",s[3])},i:et,o:et,d(s){s&&f(e),a.d()}}}function Kt(l,e,t){let n,a;ut(l,ct,o=>t(4,a=o));let{href:s}=e,{label:r}=e,{amount:u=null}=e;return l.$$set=o=>{"href"in o&&t(0,s=o.href),"label"in o&&t(1,r=o.label),"amount"in o&&t(2,u=o.amount)},l.$$.update=()=>{l.$$.dirty&17&&t(3,n=a.url.pathname.includes(s))},[s,r,u,n,a]}class $e extends ve{constructor(e){super();ge(this,e,Kt,Bt,be,{href:0,label:1,amount:2})}}function rt(l){var Oe,Le;let e,t,n,a,s,r=l[1].name+"",u,o,c,k,S,g,v,K=l[1].runId+"",W,j,P,H,x,q,U,O,ee=Ne(l[1].startTime,"UTC")+"",V,$,b,M,B,N,ae,te=Ne(l[1].endTime,"UTC")+"",ce,me,ne,w,L,Z,se,Y,le,re,F,fe,_e,de,ie,he=l[1].stateTransitionCount+"",Te,ue;Y=new _t({props:{href:pt(l[4]),$$slots:{default:[Yt]},$$scope:{ctx:l}}});let R=((Oe=l[1])==null?void 0:Oe.parentNamespaceId)&&((Le=l[1])==null?void 0:Le.parent)&&ot(l);return{c(){e=p("p"),t=p("span"),n=Q("Workflow Type:"),a=T(),s=p("span"),u=Q(r),o=T(),c=p("p"),k=p("span"),S=Q("Run ID:"),g=T(),v=p("span"),W=Q(K),j=T(),P=p("div"),H=p("p"),x=p("span"),q=Q("Start Time:"),U=T(),O=p("span"),V=Q(ee),$=T(),b=p("p"),M=p("span"),B=Q("Closed Time:"),N=T(),ae=p("span"),ce=Q(te),me=T(),ne=p("p"),w=p("span"),L=Q("Task Queue:"),Z=T(),se=p("span"),J(Y.$$.fragment),le=T(),R&&R.c(),re=T(),F=p("p"),fe=p("span"),_e=Q("State Transitions:"),de=T(),ie=p("span"),Te=Q(he),this.h()},l(m){e=_(m,"P",{class:!0});var D=h(e);t=_(D,"SPAN",{class:!0});var we=h(t);n=C(we,"Workflow Type:"),we.forEach(f),a=E(D),s=_(D,"SPAN",{class:!0});var ke=h(s);u=C(ke,r),ke.forEach(f),D.forEach(f),o=E(m),c=_(m,"P",{class:!0});var pe=h(c);k=_(pe,"SPAN",{class:!0});var Ue=h(k);S=C(Ue,"Run ID:"),Ue.forEach(f),g=E(pe),v=_(pe,"SPAN",{class:!0});var je=h(v);W=C(je,K),je.forEach(f),pe.forEach(f),j=E(m),P=_(m,"DIV",{class:!0});var Ee=h(P);H=_(Ee,"P",{});var Ie=h(H);x=_(Ie,"SPAN",{class:!0});var qe=h(x);q=C(qe,"Start Time:"),qe.forEach(f),U=E(Ie),O=_(Ie,"SPAN",{class:!0});var Be=h(O);V=C(Be,ee),Be.forEach(f),Ie.forEach(f),$=E(Ee),b=_(Ee,"P",{});var Ae=h(b);M=_(Ae,"SPAN",{class:!0});var Ke=h(M);B=C(Ke,"Closed Time:"),Ke.forEach(f),N=E(Ae),ae=_(Ae,"SPAN",{class:!0});var Ye=h(ae);ce=C(Ye,te),Ye.forEach(f),Ae.forEach(f),Ee.forEach(f),me=E(m),ne=_(m,"P",{class:!0});var Pe=h(ne);w=_(Pe,"SPAN",{class:!0});var Je=h(w);L=C(Je,"Task Queue:"),Je.forEach(f),Z=E(Pe),se=_(Pe,"SPAN",{class:!0});var Xe=h(se);X(Y.$$.fragment,Xe),Xe.forEach(f),Pe.forEach(f),le=E(m),R&&R.l(m),re=E(m),F=_(m,"P",{class:!0});var Se=h(F);fe=_(Se,"SPAN",{class:!0});var ze=h(fe);_e=C(ze,"State Transitions:"),ze.forEach(f),de=E(Se),ie=_(Se,"SPAN",{class:!0});var Ge=h(ie);Te=C(Ge,he),Ge.forEach(f),Se.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(s,"class","ml-1"),d(e,"class","text-md"),d(k,"class","font-medium"),d(v,"class","ml-1"),d(c,"class","text-md"),d(x,"class","font-medium"),d(O,"class","ml-1"),d(M,"class","font-medium"),d(ae,"class","ml-1"),d(P,"class","text-md flex gap-6"),d(w,"class","font-medium"),d(se,"class","ml-1"),d(ne,"class","text-md"),d(fe,"class","font-medium"),d(ie,"class","ml-1"),d(F,"class","text-md")},m(m,D){A(m,e,D),i(e,t),i(t,n),i(e,a),i(e,s),i(s,u),A(m,o,D),A(m,c,D),i(c,k),i(k,S),i(c,g),i(c,v),i(v,W),A(m,j,D),A(m,P,D),i(P,H),i(H,x),i(x,q),i(H,U),i(H,O),i(O,V),i(P,$),i(P,b),i(b,M),i(M,B),i(b,N),i(b,ae),i(ae,ce),A(m,me,D),A(m,ne,D),i(ne,w),i(w,L),i(ne,Z),i(ne,se),z(Y,se,null),A(m,le,D),R&&R.m(m,D),A(m,re,D),A(m,F,D),i(F,fe),i(fe,_e),i(F,de),i(F,ie),i(ie,Te),ue=!0},p(m,D){var ke,pe;(!ue||D&2)&&r!==(r=m[1].name+"")&&oe(u,r),(!ue||D&2)&&K!==(K=m[1].runId+"")&&oe(W,K),(!ue||D&2)&&ee!==(ee=Ne(m[1].startTime,"UTC")+"")&&oe(V,ee),(!ue||D&2)&&te!==(te=Ne(m[1].endTime,"UTC")+"")&&oe(ce,te);const we={};D&66&&(we.$$scope={dirty:D,ctx:m}),Y.$set(we),((ke=m[1])==null?void 0:ke.parentNamespaceId)&&((pe=m[1])==null?void 0:pe.parent)?R?(R.p(m,D),D&2&&I(R,1)):(R=ot(m),R.c(),I(R,1),R.m(re.parentNode,re)):R&&(De(),y(R,1,1,()=>{R=null}),Qe()),(!ue||D&2)&&he!==(he=m[1].stateTransitionCount+"")&&oe(Te,he)},i(m){ue||(I(Y.$$.fragment,m),I(R),ue=!0)},o(m){y(Y.$$.fragment,m),y(R),ue=!1},d(m){m&&f(e),m&&f(o),m&&f(c),m&&f(j),m&&f(P),m&&f(me),m&&f(ne),G(Y),m&&f(le),R&&R.d(m),m&&f(re),m&&f(F)}}}function Yt(l){let e=l[1].taskQueue+"",t;return{c(){t=Q(e)},l(n){t=C(n,e)},m(n,a){A(n,t,a)},p(n,a){a&2&&e!==(e=n[1].taskQueue+"")&&oe(t,e)},d(n){n&&f(t)}}}function ot(l){var o,c;let e,t,n,a,s,r,u;return r=new _t({props:{href:tt({namespace:l[1].parentNamespaceId,workflow:(o=l[1].parent)==null?void 0:o.workflowId,run:(c=l[1].parent)==null?void 0:c.runId}),$$slots:{default:[Jt]},$$scope:{ctx:l}}}),{c(){e=p("p"),t=p("span"),n=Q("Parent:"),a=T(),s=p("span"),J(r.$$.fragment),this.h()},l(k){e=_(k,"P",{class:!0});var S=h(e);t=_(S,"SPAN",{class:!0});var g=h(t);n=C(g,"Parent:"),g.forEach(f),a=E(S),s=_(S,"SPAN",{class:!0});var v=h(s);X(r.$$.fragment,v),v.forEach(f),S.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(s,"class","ml-1"),d(e,"class","text-md")},m(k,S){A(k,e,S),i(e,t),i(t,n),i(e,a),i(e,s),z(r,s,null),u=!0},p(k,S){var v,K;const g={};S&2&&(g.href=tt({namespace:k[1].parentNamespaceId,workflow:(v=k[1].parent)==null?void 0:v.workflowId,run:(K=k[1].parent)==null?void 0:K.runId})),S&66&&(g.$$scope={dirty:S,ctx:k}),r.$set(g)},i(k){u||(I(r.$$.fragment,k),u=!0)},o(k){y(r.$$.fragment,k),u=!1},d(k){k&&f(e),G(r)}}}function Jt(l){var n;let e=((n=l[1].parent)==null?void 0:n.workflowId)+"",t;return{c(){t=Q(e)},l(a){t=C(a,e)},m(a,s){A(a,t,s)},p(a,s){var r;s&2&&e!==(e=((r=a[1].parent)==null?void 0:r.workflowId)+"")&&oe(t,e)},d(a){a&&f(t)}}}function Xt(l){var ae,te,ce,me,ne;let e,t,n,a,s,r,u,o,c,k=l[1].id+"",S,g,v,K,W,j,P,H,x,q,U,O,ee,V,$,b,M,B;a=new it({props:{icon:wt}}),v=new vt({props:{status:(ae=l[1])==null?void 0:ae.status}}),W=new Ut({props:{workflow:l[1],namespace:l[0]}}),H=new $e({props:{label:"History",href:mt(l[4]),amount:(te=l[1])==null?void 0:te.historyEvents}}),q=new $e({props:{label:"Workers",href:pt(l[4]),amount:(me=(ce=l[2])==null?void 0:ce.pollers)==null?void 0:me.length}}),O=new $e({props:{label:"Pending Activities",href:bt(l[4]),amount:(ne=l[1].pendingActivities)==null?void 0:ne.length}}),V=new $e({props:{label:"Stack Trace",href:Tt(l[4])}}),b=new $e({props:{label:"Queries",href:Et(l[4])}});let N=l[3]&&rt(l);return{c(){e=p("header"),t=p("main"),n=p("a"),J(a.$$.fragment),r=T(),u=p("div"),o=p("h1"),c=p("span"),S=Q(k),g=T(),J(v.$$.fragment),K=T(),J(W.$$.fragment),j=T(),P=p("nav"),J(H.$$.fragment),x=T(),J(q.$$.fragment),U=T(),J(O.$$.fragment),ee=T(),J(V.$$.fragment),$=T(),J(b.$$.fragment),M=T(),N&&N.c(),this.h()},l(w){e=_(w,"HEADER",{class:!0});var L=h(e);t=_(L,"MAIN",{class:!0});var Z=h(t);n=_(Z,"A",{href:!0,class:!0,style:!0});var se=h(n);X(a.$$.fragment,se),se.forEach(f),r=E(Z),u=_(Z,"DIV",{class:!0});var Y=h(u);o=_(Y,"H1",{class:!0});var le=h(o);c=_(le,"SPAN",{class:!0});var re=h(c);S=C(re,k),re.forEach(f),g=E(le),X(v.$$.fragment,le),le.forEach(f),K=E(Y),X(W.$$.fragment,Y),Y.forEach(f),j=E(Z),P=_(Z,"NAV",{class:!0});var F=h(P);X(H.$$.fragment,F),x=E(F),X(q.$$.fragment,F),U=E(F),X(O.$$.fragment,F),ee=E(F),X(V.$$.fragment,F),$=E(F),X(b.$$.fragment,F),F.forEach(f),M=E(Z),N&&N.l(Z),Z.forEach(f),L.forEach(f),this.h()},h(){d(n,"href",s="/namespaces/"+l[0]+"/workflows"),d(n,"class","absolute top-2 back-to-workflows"),kt(n,"left","-1.5rem"),d(c,"class","font-medium"),d(o,"class","text-2xl relative"),d(u,"class","flex justify-between items-center mb-8"),d(P,"class","flex gap-6 mb-6"),d(t,"class","flex flex-col gap-1 relative"),d(e,"class","flex flex-col gap-4")},m(w,L){A(w,e,L),i(e,t),i(t,n),z(a,n,null),i(t,r),i(t,u),i(u,o),i(o,c),i(c,S),i(o,g),z(v,o,null),i(u,K),z(W,u,null),i(t,j),i(t,P),z(H,P,null),i(P,x),z(q,P,null),i(P,U),z(O,P,null),i(P,ee),z(V,P,null),i(P,$),z(b,P,null),i(t,M),N&&N.m(t,null),B=!0},p(w,[L]){var F,fe,_e,de,ie;(!B||L&1&&s!==(s="/namespaces/"+w[0]+"/workflows"))&&d(n,"href",s),(!B||L&2)&&k!==(k=w[1].id+"")&&oe(S,k);const Z={};L&2&&(Z.status=(F=w[1])==null?void 0:F.status),v.$set(Z);const se={};L&2&&(se.workflow=w[1]),L&1&&(se.namespace=w[0]),W.$set(se);const Y={};L&2&&(Y.amount=(fe=w[1])==null?void 0:fe.historyEvents),H.$set(Y);const le={};L&4&&(le.amount=(de=(_e=w[2])==null?void 0:_e.pollers)==null?void 0:de.length),q.$set(le);const re={};L&2&&(re.amount=(ie=w[1].pendingActivities)==null?void 0:ie.length),O.$set(re),w[3]?N?(N.p(w,L),L&8&&I(N,1)):(N=rt(w),N.c(),I(N,1),N.m(t,null)):N&&(De(),y(N,1,1,()=>{N=null}),Qe())},i(w){B||(I(a.$$.fragment,w),I(v.$$.fragment,w),I(W.$$.fragment,w),I(H.$$.fragment,w),I(q.$$.fragment,w),I(O.$$.fragment,w),I(V.$$.fragment,w),I(b.$$.fragment,w),I(N),B=!0)},o(w){y(a.$$.fragment,w),y(v.$$.fragment,w),y(W.$$.fragment,w),y(H.$$.fragment,w),y(q.$$.fragment,w),y(O.$$.fragment,w),y(V.$$.fragment,w),y(b.$$.fragment,w),y(N),B=!1},d(w){w&&f(e),G(a),G(v),G(W),G(H),G(q),G(O),G(V),G(b),N&&N.d()}}}function zt(l,e,t){let n,a;ut(l,ct,c=>t(5,a=c));let{namespace:s}=e,{workflow:r}=e,{workers:u}=e;const o={namespace:s,workflow:r.id,run:r.runId};return l.$$set=c=>{"namespace"in c&&t(0,s=c.namespace),"workflow"in c&&t(1,r=c.workflow),"workers"in c&&t(2,u=c.workers)},l.$$.update=()=>{l.$$.dirty&32&&t(3,n=a.url.pathname.includes(mt(o)))},[s,r,u,n,o,a]}class Gt extends ve{constructor(e){super();ge(this,e,zt,Xt,be,{namespace:0,workflow:1,workers:2})}}function Zt(l){let e,t,n,a;t=new Gt({props:{namespace:l[1],workflow:l[0],workers:l[2]}});const s=l[4].default,r=Fe(s,l,l[3],null);return{c(){e=p("main"),J(t.$$.fragment),n=T(),r&&r.c(),this.h()},l(u){e=_(u,"MAIN",{class:!0});var o=h(e);X(t.$$.fragment,o),n=E(o),r&&r.l(o),o.forEach(f),this.h()},h(){d(e,"class","flex flex-col gap-6 h-full")},m(u,o){A(u,e,o),z(t,e,null),i(e,n),r&&r.m(e,null),a=!0},p(u,[o]){const c={};o&2&&(c.namespace=u[1]),o&1&&(c.workflow=u[0]),o&4&&(c.workers=u[2]),t.$set(c),r&&r.p&&(!a||o&8)&&Ce(r,s,u,u[3],a?Ve(s,u[3],o,null):We(u[3]),null)},i(u){a||(I(t.$$.fragment,u),I(r,u),a=!0)},o(u){y(t.$$.fragment,u),y(r,u),a=!1},d(u){u&&f(e),G(t),r&&r.d(u)}}}const ms=async function({params:l,fetch:e}){const{workflow:t,run:n,namespace:a}=l,r=await gt({namespace:a,executionId:t,runId:n},e),{taskQueue:u}=r,o=await At({queue:u,namespace:a});return{props:{workflow:r,namespace:a,workers:o},stuff:{workflow:r,workers:o}}};function xt(l,e,t){let{$$slots:n={},$$scope:a}=e,{workflow:s}=e,{namespace:r}=e,{workers:u}=e;return l.$$set=o=>{"workflow"in o&&t(0,s=o.workflow),"namespace"in o&&t(1,r=o.namespace),"workers"in o&&t(2,u=o.workers),"$$scope"in o&&t(3,a=o.$$scope)},[s,r,u,a,n]}class ps extends ve{constructor(e){super();ge(this,e,xt,Zt,be,{workflow:0,namespace:1,workers:2})}}export{ps as default,ms as load};
