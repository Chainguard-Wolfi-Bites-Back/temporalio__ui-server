import{S as Ce,i as Te,s as Se,e as _,t as A,k as C,w as L,c as $,a as h,h as N,d as f,m as T,x as R,b as E,g as P,T as l,y as j,a1 as Ae,ag as Ne,q as x,o as F,B as J,l as be,L as De,v as Ve,ah as Oe,N as Pe,O as He,P as We,Q as xe}from"../../../../../../../chunks/index-4f955b1f.js";import{a as Fe}from"../../../../../../../chunks/events-service-7aba2d05.js";import{b as Le,c as Re,d as je,e as Je}from"../../../../../../../chunks/index.es-3f7bba01.js";import{f as qe,d as U}from"../../../../../../../chunks/route-for-d606e623.js";import{i as Be}from"../../../../../../../chunks/index-a8ee0a5c.js";import{T as Ge,a as ee}from"../../../../../../../chunks/toggle-buttons-93fba00e.js";import{C as ke}from"../../../../../../../chunks/code-block-ea06467c.js";import{p as Me}from"../../../../../../../chunks/stores-8f54f2cb.js";import{f as Qe}from"../../../../../../../chunks/format-date-0917cdb3.js";import{L as ze}from"../../../../../../../chunks/link-cbe110dd.js";import"../../../../../../../chunks/route-for-api-b747a479.js";import"../../../../../../../chunks/navigation-3f1ea447.js";import"../../../../../../../chunks/singletons-d1fb5791.js";import"../../../../../../../chunks/index-eae5a65e.js";import"../../../../../../../chunks/notifications-2d1c3827.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/index-a81b8c9e.js";import"../../../../../../../chunks/data-converter-config-728a6f58.js";import"../../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../../chunks/get-event-categorization-b2bce139.js";import"../../../../../../../chunks/simplify-attributes-7a858880.js";const Ke=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],Ue=r=>{for(const e of Ke)if(r.eventType===e)return!0;return!1},Xe=r=>{for(const e of r)if(Ue(e))return e},Ye=r=>Be(r)?r.attributes.result===null?null:r.attributes.result.payloads:r.attributes,Ze=r=>{var a,u;let e,t;const s=r==null?void 0:r.find(m=>!!m.workflowExecutionStartedEventAttributes),i=Xe(r);return s&&(e=JSON.stringify((u=(a=s==null?void 0:s.workflowExecutionStartedEventAttributes)==null?void 0:a.input)==null?void 0:u.payloads)),i&&(t=JSON.stringify(Ye(i))),{input:e,result:t}};function ye(r,e,t){const s=r.slice();return s[6]=e[t].id,s[7]=Oe(e[t],["id"]),s}function et(r){let e,t,s,i,a,u=[],m=new Map,v,o,n,p,k=r[0];const S=c=>c[6];for(let c=0;c<k.length;c+=1){let d=ye(r,k,c),b=S(d);m.set(b,u[c]=Ie(b,d))}return n=new ze({props:{href:r[1],$$slots:{default:[tt]},$$scope:{ctx:r}}}),{c(){e=_("section"),t=_("h3"),s=A("Pending Activities"),i=C(),a=_("section");for(let c=0;c<u.length;c+=1)u[c].c();v=C(),o=_("div"),L(n.$$.fragment),this.h()},l(c){e=$(c,"SECTION",{class:!0});var d=h(e);t=$(d,"H3",{class:!0});var b=h(t);s=N(b,"Pending Activities"),b.forEach(f),i=T(d),a=$(d,"SECTION",{class:!0});var y=h(a);for(let w=0;w<u.length;w+=1)u[w].l(y);y.forEach(f),v=T(d),o=$(d,"DIV",{class:!0});var D=h(o);R(n.$$.fragment,D),D.forEach(f),d.forEach(f),this.h()},h(){E(t,"class","text-lg font-medium mb-4"),E(a,"class","w-full table-auto space-x-4"),E(o,"class","text-right"),E(e,"class","border-2 border-gray-300 rounded-lg p-4")},m(c,d){P(c,e,d),l(e,t),l(t,s),l(e,i),l(e,a);for(let b=0;b<u.length;b+=1)u[b].m(a,null);l(e,v),l(e,o),j(n,o,null),p=!0},p(c,d){d&3&&(k=c[0],u=Ae(u,d,S,1,c,k,m,a,Ne,Ie,null,ye));const b={};d&1024&&(b.$$scope={dirty:d,ctx:c}),n.$set(b)},i(c){p||(x(n.$$.fragment,c),p=!0)},o(c){F(n.$$.fragment,c),p=!1},d(c){c&&f(e);for(let d=0;d<u.length;d+=1)u[d].d();J(n)}}}function Ie(r,e){var ne,ie;let t,s,i=e[7].activityId+"",a,u,m,v,o,n,p,k,S,c=e[7].activityType+"",d,b,y,D,w,g,I,V,H,W,Q=((ie=(ne=e[7].lastFailure)==null?void 0:ne.message)!=null?ie:"")+"",G,te,M,q,z,se,oe,K,ae=Qe(e[7].lastHeartbeatTime)+"",re,le;return{key:r,first:null,c(){t=_("a"),s=_("div"),a=A(i),u=C(),m=_("div"),v=_("div"),o=_("h4"),n=A("Activity Name"),p=C(),k=_("p"),S=_("span"),d=A(c),b=C(),y=_("div"),D=_("div"),w=_("h3"),g=A("Last Failure"),I=C(),V=_("div"),H=_("pre"),W=_("code"),G=A(Q),te=C(),M=_("div"),q=_("div"),z=_("h4"),se=A("Last Heartbeat Time"),oe=C(),K=_("p"),re=A(ae),le=C(),this.h()},l(B){t=$(B,"A",{class:!0,href:!0});var O=h(t);s=$(O,"DIV",{class:!0});var fe=h(s);a=N(fe,i),fe.forEach(f),u=T(O),m=$(O,"DIV",{class:!0});var ce=h(m);v=$(ce,"DIV",{class:!0});var X=h(v);o=$(X,"H4",{});var ue=h(o);n=N(ue,"Activity Name"),ue.forEach(f),p=T(X),k=$(X,"P",{});var me=h(k);S=$(me,"SPAN",{class:!0});var de=h(S);d=N(de,c),de.forEach(f),me.forEach(f),X.forEach(f),ce.forEach(f),b=T(O),y=$(O,"DIV",{class:!0});var Y=h(y);D=$(Y,"DIV",{class:!0});var pe=h(D);w=$(pe,"H3",{});var ge=h(w);g=N(ge,"Last Failure"),ge.forEach(f),pe.forEach(f),I=T(Y),V=$(Y,"DIV",{});var _e=h(V);H=$(_e,"PRE",{class:!0});var $e=h(H);W=$($e,"CODE",{class:!0});var he=h(W);G=N(he,Q),he.forEach(f),$e.forEach(f),_e.forEach(f),Y.forEach(f),te=T(O),M=$(O,"DIV",{class:!0});var ve=h(M);q=$(ve,"DIV",{class:!0});var Z=h(q);z=$(Z,"H4",{});var we=h(z);se=N(we,"Last Heartbeat Time"),we.forEach(f),oe=T(Z),K=$(Z,"P",{});var Ee=h(K);re=N(Ee,ae),Ee.forEach(f),Z.forEach(f),ve.forEach(f),le=T(O),O.forEach(f),this.h()},h(){E(s,"class","w-full md:w-1/12 text-left font-normal text-gray-500 w-40"),E(S,"class","bg-gray-300 text-gray-700 px-2"),E(v,"class","flex gap-2"),E(m,"class","w-full md:w-1/4"),E(D,"class","flex gap-2"),E(W,"class","language-json"),E(H,"class","rounded-lg"),E(y,"class","w-full md:w-5/12"),E(q,"class","flex gap-2"),E(M,"class","w-full md:w-1/4"),E(t,"class","block md:flex content-between w-full border-b-2 border-gray-300 p-2 last-of-type:border-b-0 hover:bg-gray-50"),E(t,"href",e[1]),this.first=t},m(B,O){P(B,t,O),l(t,s),l(s,a),l(t,u),l(t,m),l(m,v),l(v,o),l(o,n),l(v,p),l(v,k),l(k,S),l(S,d),l(t,b),l(t,y),l(y,D),l(D,w),l(w,g),l(y,I),l(y,V),l(V,H),l(H,W),l(W,G),l(t,te),l(t,M),l(M,q),l(q,z),l(z,se),l(q,oe),l(q,K),l(K,re),l(t,le)},p(B,O){e=B},d(B){B&&f(t)}}}function tt(r){let e;return{c(){e=A("Show all")},l(t){e=N(t,"Show all")},m(t,s){P(t,e,s)},d(t){t&&f(e)}}}function st(r){let e,t,s=r[0].length&&et(r);return{c(){s&&s.c(),e=be()},l(i){s&&s.l(i),e=be()},m(i,a){s&&s.m(i,a),P(i,e,a),t=!0},p(i,[a]){i[0].length&&s.p(i,a)},i(i){t||(x(s),t=!0)},o(i){F(s),t=!1},d(i){s&&s.d(i),i&&f(e)}}}function ot(r,e,t){let s;De(r,Me,o=>t(2,s=o));const{pendingActivities:i}=s.stuff.workflow,{namespace:a,workflow:u,run:m}=s.params,v=qe({namespace:a,workflow:u,run:m});return Ve(()=>{window.Prism.highlightAll()}),[i,v]}class rt extends Ce{constructor(e){super(),Te(this,e,ot,st,Se,{})}}function lt(r){let e;return{c(){e=A("Summary")},l(t){e=N(t,"Summary")},m(t,s){P(t,e,s)},d(t){t&&f(e)}}}function at(r){let e;return{c(){e=A("Full")},l(t){e=N(t,"Full")},m(t,s){P(t,e,s)},d(t){t&&f(e)}}}function nt(r){let e;return{c(){e=A("Compact")},l(t){e=N(t,"Compact")},m(t,s){P(t,e,s)},d(t){t&&f(e)}}}function it(r){let e;return{c(){e=A("JSON")},l(t){e=N(t,"JSON")},m(t,s){P(t,e,s)},d(t){t&&f(e)}}}function ft(r){let e,t,s,i,a,u,m,v;return e=new ee({props:{icon:Le,base:U(r[2]("summary")),href:U(r[2]("summary")),$$slots:{default:[lt]},$$scope:{ctx:r}}}),s=new ee({props:{icon:Re,href:U(r[2]("full")),$$slots:{default:[at]},$$scope:{ctx:r}}}),a=new ee({props:{icon:je,href:U(r[2]("compact")),$$slots:{default:[nt]},$$scope:{ctx:r}}}),m=new ee({props:{icon:Je,href:U(r[2]("json")),$$slots:{default:[it]},$$scope:{ctx:r}}}),{c(){L(e.$$.fragment),t=C(),L(s.$$.fragment),i=C(),L(a.$$.fragment),u=C(),L(m.$$.fragment)},l(o){R(e.$$.fragment,o),t=T(o),R(s.$$.fragment,o),i=T(o),R(a.$$.fragment,o),u=T(o),R(m.$$.fragment,o)},m(o,n){j(e,o,n),P(o,t,n),j(s,o,n),P(o,i,n),j(a,o,n),P(o,u,n),j(m,o,n),v=!0},p(o,n){const p={};n&128&&(p.$$scope={dirty:n,ctx:o}),e.$set(p);const k={};n&128&&(k.$$scope={dirty:n,ctx:o}),s.$set(k);const S={};n&128&&(S.$$scope={dirty:n,ctx:o}),a.$set(S);const c={};n&128&&(c.$$scope={dirty:n,ctx:o}),m.$set(c)},i(o){v||(x(e.$$.fragment,o),x(s.$$.fragment,o),x(a.$$.fragment,o),x(m.$$.fragment,o),v=!0)},o(o){F(e.$$.fragment,o),F(s.$$.fragment,o),F(a.$$.fragment,o),F(m.$$.fragment,o),v=!1},d(o){J(e,o),o&&f(t),J(s,o),o&&f(i),J(a,o),o&&f(u),J(m,o)}}}function ct(r){let e,t,s,i,a,u,m,v,o,n,p,k,S,c,d,b,y;s=new ke({props:{heading:"Input",content:r[0],framed:!0}}),a=new ke({props:{heading:"Result",content:r[1],framed:!0}}),m=new rt({}),d=new Ge({props:{$$slots:{default:[ft]},$$scope:{ctx:r}}});const D=r[6].default,w=Pe(D,r,r[7],null);return{c(){e=_("section"),t=_("div"),L(s.$$.fragment),i=C(),L(a.$$.fragment),u=C(),L(m.$$.fragment),v=C(),o=_("section"),n=_("nav"),p=_("h3"),k=A("Recent Events"),S=C(),c=_("div"),L(d.$$.fragment),b=C(),w&&w.c(),this.h()},l(g){e=$(g,"SECTION",{class:!0});var I=h(e);t=$(I,"DIV",{class:!0});var V=h(t);R(s.$$.fragment,V),i=T(V),R(a.$$.fragment,V),V.forEach(f),u=T(I),R(m.$$.fragment,I),v=T(I),o=$(I,"SECTION",{id:!0});var H=h(o);n=$(H,"NAV",{class:!0});var W=h(n);p=$(W,"H3",{class:!0});var Q=h(p);k=N(Q,"Recent Events"),Q.forEach(f),S=T(W),c=$(W,"DIV",{id:!0,class:!0});var G=h(c);R(d.$$.fragment,G),G.forEach(f),W.forEach(f),b=T(H),w&&w.l(H),H.forEach(f),I.forEach(f),this.h()},h(){E(t,"class","flex gap-4"),E(p,"class","text-lg font-medium"),E(c,"id","event-view-toggle"),E(c,"class","flex gap-4"),E(n,"class","flex gap-4 justify-between items-end pb-4"),E(o,"id","event-history"),E(e,"class","flex flex-col gap-4")},m(g,I){P(g,e,I),l(e,t),j(s,t,null),l(t,i),j(a,t,null),l(e,u),j(m,e,null),l(e,v),l(e,o),l(o,n),l(n,p),l(p,k),l(n,S),l(n,c),j(d,c,null),l(o,b),w&&w.m(o,null),y=!0},p(g,[I]){const V={};I&128&&(V.$$scope={dirty:I,ctx:g}),d.$set(V),w&&w.p&&(!y||I&128)&&He(w,D,g,g[7],y?xe(D,g[7],I,null):We(g[7]),null)},i(g){y||(x(s.$$.fragment,g),x(a.$$.fragment,g),x(m.$$.fragment,g),x(d.$$.fragment,g),x(w,g),y=!0)},o(g){F(s.$$.fragment,g),F(a.$$.fragment,g),F(m.$$.fragment,g),F(d.$$.fragment,g),F(w,g),y=!1},d(g){g&&f(e),J(s),J(a),J(m),J(d),w&&w.d(g)}}}const Ot=async function({params:r,stuff:e,fetch:t}){const{workflow:s}=e,{namespace:i}=r,a={namespace:i,workflowId:s.id,runId:s.runId},{events:u,eventGroups:m}=await Fe(a,t);return{props:{namespace:i,workflow:s,events:u,eventGroups:m},stuff:{events:u,eventGroups:m}}};function ut(r,e,t){let{$$slots:s={},$$scope:i}=e,{namespace:a}=e,{workflow:u}=e,{events:m}=e;const{input:v,result:o}=Ze(m),n=(p,k)=>({namespace:a,workflow:u.id,run:u.runId,view:p,eventId:k});return r.$$set=p=>{"namespace"in p&&t(3,a=p.namespace),"workflow"in p&&t(4,u=p.workflow),"events"in p&&t(5,m=p.events),"$$scope"in p&&t(7,i=p.$$scope)},[v,o,n,a,u,m,s,i]}class Pt extends Ce{constructor(e){super(),Te(this,e,ut,ct,Se,{namespace:3,workflow:4,events:5})}}export{Pt as default,Ot as load};
