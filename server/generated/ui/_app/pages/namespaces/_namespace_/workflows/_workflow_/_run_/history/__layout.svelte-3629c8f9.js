import{S as ye,i as Ie,s as Se,e as $,t as T,k as I,w as R,c as h,a as v,h as O,d as u,m as S,x as j,b as w,g as V,Q as r,y as J,a2 as Ae,aO as Ce,q as L,o as F,B as x,l as ve,I as Ne,v as De,aI as Te,f as be,L as Oe,M as Pe,N as Ve,O as He,aP as Le,aQ as Fe,aR as Re,aS as je}from"../../../../../../../chunks/vendor-f2f66dce.js";import{a as Je}from"../../../../../../../chunks/events-service-5ad8edd1.js";import{f as xe,d as U}from"../../../../../../../chunks/route-for-c9edcdb4.js";import{T as Me,a as ee}from"../../../../../../../chunks/toggle-buttons-e21f71e6.js";import{C as we}from"../../../../../../../chunks/code-block-8e50137e.js";import{p as qe}from"../../../../../../../chunks/stores-7c72d97e.js";import{f as Be}from"../../../../../../../chunks/format-date-f4b2075a.js";import{L as Ge}from"../../../../../../../chunks/link-ef8de16f.js";import"../../../../../../../chunks/route-for-api-4c928c77.js";import"../../../../../../../chunks/navigation-093db9e2.js";import"../../../../../../../chunks/singletons-a6a7384f.js";import"../../../../../../../chunks/notifications-edb083d9.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/index-ed990a27.js";import"../../../../../../../chunks/data-converter-config-e5a50318.js";import"../../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../../chunks/get-event-categorization-90555be0.js";const Qe=l=>{var n,m,f,g;let e,t;const s=l==null?void 0:l.find(a=>!!a.workflowExecutionStartedEventAttributes),o=l==null?void 0:l.find(a=>!!a.workflowExecutionCompletedEventAttributes);return s&&(e=JSON.stringify((m=(n=s==null?void 0:s.workflowExecutionStartedEventAttributes)==null?void 0:n.input)==null?void 0:m.payloads)),o&&(t=JSON.stringify((g=(f=o==null?void 0:o.workflowExecutionCompletedEventAttributes)==null?void 0:f.result)==null?void 0:g.payloads)),{input:e,result:t}};function Ee(l,e,t){const s=l.slice();return s[6]=e[t].id,s[7]=Te(e[t],["id"]),s}function We(l){let e,t,s,o,n,m=[],f=new Map,g,a,i,p,k=l[0];const A=c=>c[6];for(let c=0;c<k.length;c+=1){let d=Ee(l,k,c),E=A(d);f.set(E,m[c]=ke(E,d))}return i=new Ge({props:{href:l[1],$$slots:{default:[ze]},$$scope:{ctx:l}}}),{c(){e=$("section"),t=$("h3"),s=T("Pending Activities"),o=I(),n=$("section");for(let c=0;c<m.length;c+=1)m[c].c();g=I(),a=$("div"),R(i.$$.fragment),this.h()},l(c){e=h(c,"SECTION",{class:!0});var d=v(e);t=h(d,"H3",{class:!0});var E=v(t);s=O(E,"Pending Activities"),E.forEach(u),o=S(d),n=h(d,"SECTION",{class:!0});var C=v(n);for(let b=0;b<m.length;b+=1)m[b].l(C);C.forEach(u),g=S(d),a=h(d,"DIV",{class:!0});var D=v(a);j(i.$$.fragment,D),D.forEach(u),d.forEach(u),this.h()},h(){w(t,"class","text-lg font-medium mb-4"),w(n,"class","w-full table-auto space-x-4"),w(a,"class","text-right"),w(e,"class","border-2 border-gray-300 rounded-lg p-4")},m(c,d){V(c,e,d),r(e,t),r(t,s),r(e,o),r(e,n);for(let E=0;E<m.length;E+=1)m[E].m(n,null);r(e,g),r(e,a),J(i,a,null),p=!0},p(c,d){d&3&&(k=c[0],m=Ae(m,d,A,1,c,k,f,n,Ce,ke,null,Ee));const E={};d&1024&&(E.$$scope={dirty:d,ctx:c}),i.$set(E)},i(c){p||(L(i.$$.fragment,c),p=!0)},o(c){F(i.$$.fragment,c),p=!1},d(c){c&&u(e);for(let d=0;d<m.length;d+=1)m[d].d();x(i)}}}function ke(l,e){var ne;let t,s,o=e[7].activityId+"",n,m,f,g,a,i,p,k,A,c=((ne=e[7].activityType)==null?void 0:ne.name)+"",d,E,C,D,b,_,y,N,H,q=e[7].lastFailure+"",G,Q,W,M,z,te,se,K,re=Be(e[7].lastHeartbeatTime)+"",ae,le;return{key:l,first:null,c(){t=$("a"),s=$("div"),n=T(o),m=I(),f=$("div"),g=$("div"),a=$("h4"),i=T("Activity Name"),p=I(),k=$("p"),A=$("span"),d=T(c),E=I(),C=$("div"),D=$("div"),b=$("h3"),_=T("Last Failure"),y=I(),N=$("pre"),H=$("code"),G=T(q),Q=I(),W=$("div"),M=$("div"),z=$("h4"),te=T("Last Heartbeat Time"),se=I(),K=$("p"),ae=T(re),le=I(),this.h()},l(B){t=h(B,"A",{class:!0,href:!0});var P=v(t);s=h(P,"DIV",{class:!0});var oe=v(s);n=O(oe,o),oe.forEach(u),m=S(P),f=h(P,"DIV",{class:!0});var ie=v(f);g=h(ie,"DIV",{class:!0});var X=v(g);a=h(X,"H4",{});var fe=v(a);i=O(fe,"Activity Name"),fe.forEach(u),p=S(X),k=h(X,"P",{});var ce=v(k);A=h(ce,"SPAN",{class:!0});var ue=v(A);d=O(ue,c),ue.forEach(u),ce.forEach(u),X.forEach(u),ie.forEach(u),E=S(P),C=h(P,"DIV",{class:!0});var me=v(C);D=h(me,"DIV",{class:!0});var Y=v(D);b=h(Y,"H3",{});var de=v(b);_=O(de,"Last Failure"),de.forEach(u),y=S(Y),N=h(Y,"PRE",{style:!0,class:!0});var pe=v(N);H=h(pe,"CODE",{class:!0});var ge=v(H);G=O(ge,q),ge.forEach(u),pe.forEach(u),Y.forEach(u),me.forEach(u),Q=S(P),W=h(P,"DIV",{class:!0});var _e=v(W);M=h(_e,"DIV",{class:!0});var Z=v(M);z=h(Z,"H4",{});var $e=v(z);te=O($e,"Last Heartbeat Time"),$e.forEach(u),se=S(Z),K=h(Z,"P",{});var he=v(K);ae=O(he,re),he.forEach(u),Z.forEach(u),_e.forEach(u),le=S(P),P.forEach(u),this.h()},h(){w(s,"class","text-left font-normal text-gray-500 w-40"),w(A,"class","bg-gray-300 text-gray-700 px-2"),w(g,"class","flex gap-2"),w(f,"class","w-full"),w(H,"class","language-json"),be(N,"padding","0 1em"),be(N,"margin","0"),w(N,"class","rounded-lg"),w(D,"class","flex gap-2"),w(C,"class","w-full"),w(M,"class","flex gap-2"),w(W,"class","w-full"),w(t,"class","flex content-between w-full border-b-2 border-gray-300 p-2 last-of-type:border-b-0 hover:bg-gray-50"),w(t,"href",e[1]),this.first=t},m(B,P){V(B,t,P),r(t,s),r(s,n),r(t,m),r(t,f),r(f,g),r(g,a),r(a,i),r(g,p),r(g,k),r(k,A),r(A,d),r(t,E),r(t,C),r(C,D),r(D,b),r(b,_),r(D,y),r(D,N),r(N,H),r(H,G),r(t,Q),r(t,W),r(W,M),r(M,z),r(z,te),r(M,se),r(M,K),r(K,ae),r(t,le)},p(B,P){e=B},d(B){B&&u(t)}}}function ze(l){let e;return{c(){e=T("Show all")},l(t){e=O(t,"Show all")},m(t,s){V(t,e,s)},d(t){t&&u(e)}}}function Ke(l){let e,t,s=l[0].length&&We(l);return{c(){s&&s.c(),e=ve()},l(o){s&&s.l(o),e=ve()},m(o,n){s&&s.m(o,n),V(o,e,n),t=!0},p(o,[n]){o[0].length&&s.p(o,n)},i(o){t||(L(s),t=!0)},o(o){F(s),t=!1},d(o){s&&s.d(o),o&&u(e)}}}function Ue(l,e,t){let s;Ne(l,qe,a=>t(2,s=a));const{pendingActivities:o}=s.stuff.workflow,{namespace:n,workflow:m,run:f}=s.params,g=xe({namespace:n,workflow:m,run:f});return De(()=>{window.Prism.highlightAll()}),[o,g]}class Xe extends ye{constructor(e){super();Ie(this,e,Ue,Ke,Se,{})}}function Ye(l){let e;return{c(){e=T("Summary")},l(t){e=O(t,"Summary")},m(t,s){V(t,e,s)},d(t){t&&u(e)}}}function Ze(l){let e;return{c(){e=T("Full")},l(t){e=O(t,"Full")},m(t,s){V(t,e,s)},d(t){t&&u(e)}}}function et(l){let e;return{c(){e=T("Compact")},l(t){e=O(t,"Compact")},m(t,s){V(t,e,s)},d(t){t&&u(e)}}}function tt(l){let e;return{c(){e=T("JSON")},l(t){e=O(t,"JSON")},m(t,s){V(t,e,s)},d(t){t&&u(e)}}}function st(l){let e,t,s,o,n,m,f,g;return e=new ee({props:{icon:Le,base:U(l[2]("summary")),href:U(l[2]("summary")),$$slots:{default:[Ye]},$$scope:{ctx:l}}}),s=new ee({props:{icon:Fe,href:U(l[2]("full")),$$slots:{default:[Ze]},$$scope:{ctx:l}}}),n=new ee({props:{icon:Re,href:U(l[2]("compact")),$$slots:{default:[et]},$$scope:{ctx:l}}}),f=new ee({props:{icon:je,href:U(l[2]("json")),$$slots:{default:[tt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment),t=I(),R(s.$$.fragment),o=I(),R(n.$$.fragment),m=I(),R(f.$$.fragment)},l(a){j(e.$$.fragment,a),t=S(a),j(s.$$.fragment,a),o=S(a),j(n.$$.fragment,a),m=S(a),j(f.$$.fragment,a)},m(a,i){J(e,a,i),V(a,t,i),J(s,a,i),V(a,o,i),J(n,a,i),V(a,m,i),J(f,a,i),g=!0},p(a,i){const p={};i&128&&(p.$$scope={dirty:i,ctx:a}),e.$set(p);const k={};i&128&&(k.$$scope={dirty:i,ctx:a}),s.$set(k);const A={};i&128&&(A.$$scope={dirty:i,ctx:a}),n.$set(A);const c={};i&128&&(c.$$scope={dirty:i,ctx:a}),f.$set(c)},i(a){g||(L(e.$$.fragment,a),L(s.$$.fragment,a),L(n.$$.fragment,a),L(f.$$.fragment,a),g=!0)},o(a){F(e.$$.fragment,a),F(s.$$.fragment,a),F(n.$$.fragment,a),F(f.$$.fragment,a),g=!1},d(a){x(e,a),a&&u(t),x(s,a),a&&u(o),x(n,a),a&&u(m),x(f,a)}}}function at(l){let e,t,s,o,n,m,f,g,a,i,p,k,A,c,d,E,C;s=new we({props:{heading:"Input",content:l[0],framed:!0}}),n=new we({props:{heading:"Result",content:l[1],framed:!0}}),f=new Xe({}),d=new Me({props:{$$slots:{default:[st]},$$scope:{ctx:l}}});const D=l[6].default,b=Oe(D,l,l[7],null);return{c(){e=$("section"),t=$("div"),R(s.$$.fragment),o=I(),R(n.$$.fragment),m=I(),R(f.$$.fragment),g=I(),a=$("section"),i=$("nav"),p=$("h3"),k=T("Recent Events"),A=I(),c=$("div"),R(d.$$.fragment),E=I(),b&&b.c(),this.h()},l(_){e=h(_,"SECTION",{class:!0});var y=v(e);t=h(y,"DIV",{class:!0});var N=v(t);j(s.$$.fragment,N),o=S(N),j(n.$$.fragment,N),N.forEach(u),m=S(y),j(f.$$.fragment,y),g=S(y),a=h(y,"SECTION",{id:!0});var H=v(a);i=h(H,"NAV",{class:!0});var q=v(i);p=h(q,"H3",{class:!0});var G=v(p);k=O(G,"Recent Events"),G.forEach(u),A=S(q),c=h(q,"DIV",{id:!0,class:!0});var Q=v(c);j(d.$$.fragment,Q),Q.forEach(u),q.forEach(u),E=S(H),b&&b.l(H),H.forEach(u),y.forEach(u),this.h()},h(){w(t,"class","flex gap-4"),w(p,"class","text-lg font-medium"),w(c,"id","event-view-toggle"),w(c,"class","flex gap-4"),w(i,"class","flex gap-4 justify-between items-end pb-4"),w(a,"id","event-history"),w(e,"class","flex flex-col gap-4")},m(_,y){V(_,e,y),r(e,t),J(s,t,null),r(t,o),J(n,t,null),r(e,m),J(f,e,null),r(e,g),r(e,a),r(a,i),r(i,p),r(p,k),r(i,A),r(i,c),J(d,c,null),r(a,E),b&&b.m(a,null),C=!0},p(_,[y]){const N={};y&128&&(N.$$scope={dirty:y,ctx:_}),d.$set(N),b&&b.p&&(!C||y&128)&&Pe(b,D,_,_[7],C?He(D,_[7],y,null):Ve(_[7]),null)},i(_){C||(L(s.$$.fragment,_),L(n.$$.fragment,_),L(f.$$.fragment,_),L(d.$$.fragment,_),L(b,_),C=!0)},o(_){F(s.$$.fragment,_),F(n.$$.fragment,_),F(f.$$.fragment,_),F(d.$$.fragment,_),F(b,_),C=!1},d(_){_&&u(e),x(s),x(n),x(f),x(d),b&&b.d(_)}}}const Et=async function({params:l,stuff:e,fetch:t}){const{workflow:s}=e,{namespace:o}=l,n={namespace:o,workflowId:s.id,runId:s.runId},{events:m,eventGroups:f}=await Je(n,t);return{props:{namespace:o,workflow:s,events:m,eventGroups:f},stuff:{events:m,eventGroups:f}}};function lt(l,e,t){let{$$slots:s={},$$scope:o}=e,{namespace:n}=e,{workflow:m}=e,{events:f}=e;const{input:g,result:a}=Qe(f),i=(p,k)=>({namespace:n,workflow:m.id,run:m.runId,view:p,eventId:k});return l.$$set=p=>{"namespace"in p&&t(3,n=p.namespace),"workflow"in p&&t(4,m=p.workflow),"events"in p&&t(5,f=p.events),"$$scope"in p&&t(7,o=p.$$scope)},[g,a,i,n,m,f,s,o]}class kt extends ye{constructor(e){super();Ie(this,e,lt,at,Se,{namespace:3,workflow:4,events:5})}}export{kt as default,Et as load};
