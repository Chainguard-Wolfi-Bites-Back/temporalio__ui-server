import{S as Ee,i as be,s as Ce,e as R,w as h,c as U,a as y,x as v,d as _,b as W,g as F,y as I,q as u,o as p,B as T,l as he,n as Se,p as Ne,k as E,m as b,M as $,I as Oe,t as le,h as fe,J as je,K as De,L as Pe,N as We,al as Ve,a9 as we}from"../../../../../../../chunks/index-4d40a842.js";import{g as Re,l as re,f as oe}from"../../../../../../../chunks/route-for-e4b4dbdd.js";import{f as se}from"../../../../../../../chunks/format-date-919f4714.js";import{e as ae}from"../../../../../../../chunks/event-view-a82e2c63.js";import{c as Ue}from"../../../../../../../chunks/events-916b563b.js";import{T as ye,a as ge}from"../../../../../../../chunks/toggle-buttons-5474c318.js";import Fe from"./_pending-activties.svelte-b8593c62.js";import{E as Je}from"../../../../../../../chunks/empty-state-49b705c8.js";import ve from"./_input-and-results.svelte-dcb48b52.js";import A from"../_workflow-detail.svelte-54cc4d7b.js";import"../../../../../../../chunks/to-duration-271d3946.js";import"../../../../../../../chunks/index-af0e9636.js";import"../../../../../../../chunks/stores-9cf180cc.js";import"../../../../../../../chunks/persist-store-2422fd33.js";import"../../../../../../../chunks/events-service-55ce05f5.js";import"../../../../../../../chunks/route-for-api-a0ac37bf.js";import"../../../../../../../chunks/notifications-136c5477.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/index-5e108558.js";import"../../../../../../../chunks/is-http-8674ce27.js";import"../../../../../../../chunks/data-converter-config-f121db83.js";import"../../../../../../../chunks/atob-eb4fc9a1.js";import"../../../../../../../chunks/get-event-categorization-8a63628f.js";import"../../../../../../../chunks/simplify-attributes-64d6cf1a.js";import"../../../../../../../chunks/with-loading-22689bcc.js";import"../../../../../../../chunks/index-12dad8b6.js";import"../../../../../../../chunks/link-c1629635.js";import"../../../../../../../chunks/badge-c235c0c3.js";import"../../../../../../../chunks/code-block-cb6c5813.js";import"../../../../../../../chunks/format-camel-case-abb2903d.js";import"../../../../../../../chunks/copyable-87e396c6.js";function Ie(o){let e,t,n;return t=new Je({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running.",class:"my-0"}}),{c(){e=R("section"),h(t.$$.fragment),this.h()},l(a){e=U(a,"SECTION",{class:!0});var l=y(e);v(t.$$.fragment,l),l.forEach(_),this.h()},h(){W(e,"class","stack-trace svelte-wcmxvi")},m(a,l){F(a,e,l),I(t,e,null),n=!0},i(a){n||(u(t.$$.fragment,a),n=!0)},o(a){p(t.$$.fragment,a),n=!1},d(a){a&&_(e),T(t)}}}function Qe(o){let e,t,n=o[0]&&Ie();return{c(){n&&n.c(),e=he()},l(a){n&&n.l(a),e=he()},m(a,l){n&&n.m(a,l),F(a,e,l),t=!0},p(a,[l]){a[0]?n?l&1&&u(n,1):(n=Ie(),n.c(),u(n,1),n.m(e.parentNode,e)):n&&(Se(),p(n,1,1,()=>{n=null}),Ne())},i(a){t||(u(n),t=!0)},o(a){p(n),t=!1},d(a){n&&n.d(a),a&&_(e)}}}function qe(o,e,t){let n;var a;let{workflow:l}=e,{workers:c}=e;return o.$$set=r=>{"workflow"in r&&t(1,l=r.workflow),"workers"in r&&t(2,c=r.workers)},o.$$.update=()=>{o.$$.dirty&14&&t(0,n=l.isRunning&&!(!(t(3,a=c==null?void 0:c.pollers)===null||a===void 0)&&a.length))},[n,l,c,a]}class Ae extends Ee{constructor(e){super(),be(this,e,qe,Qe,Ce,{workflow:1,workers:2})}}function Te(o){var c,r,i,O,d,j;let e,t,n,a,l;return t=new A({props:{title:"Parent",content:(c=o[1].parent)==null?void 0:c.workflowId,href:re({namespace:o[0],workflow:(r=o[1].parent)==null?void 0:r.workflowId,run:(i=o[1].parent)==null?void 0:i.runId})}}),a=new A({props:{title:"Parent ID",content:(O=o[1].parent)==null?void 0:O.runId,href:re({namespace:o[0],workflow:(d=o[1].parent)==null?void 0:d.workflowId,run:(j=o[1].parent)==null?void 0:j.runId})}}),{c(){e=R("div"),h(t.$$.fragment),n=E(),h(a.$$.fragment),this.h()},l(f){e=U(f,"DIV",{class:!0});var k=y(e);v(t.$$.fragment,k),n=b(k),v(a.$$.fragment,k),k.forEach(_),this.h()},h(){W(e,"class","gap-2 xl:flex")},m(f,k){F(f,e,k),I(t,e,null),$(e,n),I(a,e,null),l=!0},p(f,k){var X,D,Y,P,V,Z;const w={};k&2&&(w.content=(X=f[1].parent)==null?void 0:X.workflowId),k&3&&(w.href=re({namespace:f[0],workflow:(D=f[1].parent)==null?void 0:D.workflowId,run:(Y=f[1].parent)==null?void 0:Y.runId})),t.$set(w);const S={};k&2&&(S.content=(P=f[1].parent)==null?void 0:P.runId),k&3&&(S.href=re({namespace:f[0],workflow:(V=f[1].parent)==null?void 0:V.workflowId,run:(Z=f[1].parent)==null?void 0:Z.runId})),a.$set(S)},i(f){l||(u(t.$$.fragment,f),u(a.$$.fragment,f),l=!0)},o(f){p(t.$$.fragment,f),p(a.$$.fragment,f),l=!1},d(f){f&&_(e),T(t),T(a)}}}function He(o){let e;return{c(){e=le("Timeline")},l(t){e=fe(t,"Timeline")},m(t,n){F(t,e,n)},d(t){t&&_(e)}}}function Be(o){let e;return{c(){e=le("Compact")},l(t){e=fe(t,"Compact")},m(t,n){F(t,e,n)},d(t){t&&_(e)}}}function Ke(o){let e;return{c(){e=le("JSON")},l(t){e=fe(t,"JSON")},m(t,n){F(t,e,n)},d(t){t&&_(e)}}}function Le(o){let e,t,n,a,l,c;return e=new ge({props:{icon:"feed",base:oe(o[4]("feed")),href:oe(o[4]("feed")),active:o[3]==="feed","data-cy":"feed",$$slots:{default:[He]},$$scope:{ctx:o}}}),e.$on("click",o[7]),n=new ge({props:{icon:"compact",href:oe(o[4]("compact")),active:o[3]==="compact","data-cy":"compact",$$slots:{default:[Be]},$$scope:{ctx:o}}}),n.$on("click",o[8]),l=new ge({props:{icon:"json",href:oe(o[4]("json")),active:o[3]==="json","data-cy":"json",$$slots:{default:[Ke]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){h(e.$$.fragment),t=E(),h(n.$$.fragment),a=E(),h(l.$$.fragment)},l(r){v(e.$$.fragment,r),t=b(r),v(n.$$.fragment,r),a=b(r),v(l.$$.fragment,r)},m(r,i){I(e,r,i),F(r,t,i),I(n,r,i),F(r,a,i),I(l,r,i),c=!0},p(r,i){const O={};i&8&&(O.active=r[3]==="feed"),i&1024&&(O.$$scope={dirty:i,ctx:r}),e.$set(O);const d={};i&8&&(d.active=r[3]==="compact"),i&1024&&(d.$$scope={dirty:i,ctx:r}),n.$set(d);const j={};i&8&&(j.active=r[3]==="json"),i&1024&&(j.$$scope={dirty:i,ctx:r}),l.$set(j)},i(r){c||(u(e.$$.fragment,r),u(n.$$.fragment,r),u(l.$$.fragment,r),c=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),p(l.$$.fragment,r),c=!1},d(r){T(e,r),r&&_(t),T(n,r),r&&_(a),T(l,r)}}}function Me(o){var _e;let e,t,n,a,l,c,r,i,O,d,j,f,k,w,S,X,D,Y,P,V,Z,H,ie,B,me,J,Q,x,ue,ce,K,q,$e,ee;n=new A({props:{title:"Workflow Type",content:o[1].name}}),l=new A({props:{title:"Run ID",content:o[1].runId}}),i=new A({props:{title:"Start Time",content:se(o[1].startTime,"UTC")}}),d=new A({props:{title:"Close Time",content:se(o[1].endTime,"UTC")}}),f=new A({props:{title:"Task Queue",content:o[1].taskQueue,href:Re(o[5])}});let g=((_e=o[1])==null?void 0:_e.parent)&&Te(o);S=new A({props:{title:"State Transitions",content:o[1].stateTransitionCount}}),D=new Ae({props:{workflow:o[1],workers:o[2]}}),V=new ve({props:{type:"input"}}),H=new ve({props:{type:"results"}}),B=new Fe({}),q=new ye({props:{$$slots:{default:[Le]},$$scope:{ctx:o}}});const pe=o[6].default,N=Oe(pe,o,o[10],null);return{c(){e=R("section"),t=R("section"),h(n.$$.fragment),a=E(),h(l.$$.fragment),c=E(),r=R("div"),h(i.$$.fragment),O=E(),h(d.$$.fragment),j=E(),h(f.$$.fragment),k=E(),g&&g.c(),w=E(),h(S.$$.fragment),X=E(),h(D.$$.fragment),Y=E(),P=R("section"),h(V.$$.fragment),Z=E(),h(H.$$.fragment),ie=E(),h(B.$$.fragment),me=E(),J=R("section"),Q=R("nav"),x=R("h3"),ue=le("Recent Events"),ce=E(),K=R("div"),h(q.$$.fragment),$e=E(),N&&N.c(),this.h()},l(s){e=U(s,"SECTION",{class:!0});var m=y(e);t=U(m,"SECTION",{class:!0});var C=y(t);v(n.$$.fragment,C),a=b(C),v(l.$$.fragment,C),c=b(C),r=U(C,"DIV",{class:!0});var L=y(r);v(i.$$.fragment,L),O=b(L),v(d.$$.fragment,L),L.forEach(_),j=b(C),v(f.$$.fragment,C),k=b(C),g&&g.l(C),w=b(C),v(S.$$.fragment,C),C.forEach(_),X=b(m),v(D.$$.fragment,m),Y=b(m),P=U(m,"SECTION",{class:!0});var M=y(P);v(V.$$.fragment,M),Z=b(M),v(H.$$.fragment,M),M.forEach(_),ie=b(m),v(B.$$.fragment,m),me=b(m),J=U(m,"SECTION",{id:!0});var z=y(J);Q=U(z,"NAV",{class:!0});var G=y(Q);x=U(G,"H3",{class:!0});var ne=y(x);ue=fe(ne,"Recent Events"),ne.forEach(_),ce=b(G),K=U(G,"DIV",{id:!0,class:!0});var te=y(K);v(q.$$.fragment,te),te.forEach(_),G.forEach(_),$e=b(z),N&&N.l(z),z.forEach(_),m.forEach(_),this.h()},h(){W(r,"class","flex flex-col gap-1 md:flex-row md:gap-6"),W(t,"class","flex flex-col gap-1"),W(P,"class","flex w-full flex-col gap-4 lg:flex-row"),W(x,"class","text-lg font-medium"),W(K,"id","event-view-toggle"),W(K,"class","flex gap-4"),W(Q,"class","flex items-end justify-between gap-4 pb-4"),W(J,"id","event-history"),W(e,"class","flex flex-col gap-4")},m(s,m){F(s,e,m),$(e,t),I(n,t,null),$(t,a),I(l,t,null),$(t,c),$(t,r),I(i,r,null),$(r,O),I(d,r,null),$(t,j),I(f,t,null),$(t,k),g&&g.m(t,null),$(t,w),I(S,t,null),$(e,X),I(D,e,null),$(e,Y),$(e,P),I(V,P,null),$(P,Z),I(H,P,null),$(e,ie),I(B,e,null),$(e,me),$(e,J),$(J,Q),$(Q,x),$(x,ue),$(Q,ce),$(Q,K),I(q,K,null),$(J,$e),N&&N.m(J,null),ee=!0},p(s,[m]){var ke;const C={};m&2&&(C.content=s[1].name),n.$set(C);const L={};m&2&&(L.content=s[1].runId),l.$set(L);const M={};m&2&&(M.content=se(s[1].startTime,"UTC")),i.$set(M);const z={};m&2&&(z.content=se(s[1].endTime,"UTC")),d.$set(z);const G={};m&2&&(G.content=s[1].taskQueue),f.$set(G),(ke=s[1])!=null&&ke.parent?g?(g.p(s,m),m&2&&u(g,1)):(g=Te(s),g.c(),u(g,1),g.m(t,w)):g&&(Se(),p(g,1,1,()=>{g=null}),Ne());const ne={};m&2&&(ne.content=s[1].stateTransitionCount),S.$set(ne);const te={};m&2&&(te.workflow=s[1]),m&4&&(te.workers=s[2]),D.$set(te);const de={};m&1032&&(de.$$scope={dirty:m,ctx:s}),q.$set(de),N&&N.p&&(!ee||m&1024)&&je(N,pe,s,s[10],ee?Pe(pe,s[10],m,null):De(s[10]),null)},i(s){ee||(u(n.$$.fragment,s),u(l.$$.fragment,s),u(i.$$.fragment,s),u(d.$$.fragment,s),u(f.$$.fragment,s),u(g),u(S.$$.fragment,s),u(D.$$.fragment,s),u(V.$$.fragment,s),u(H.$$.fragment,s),u(B.$$.fragment,s),u(q.$$.fragment,s),u(N,s),ee=!0)},o(s){p(n.$$.fragment,s),p(l.$$.fragment,s),p(i.$$.fragment,s),p(d.$$.fragment,s),p(f.$$.fragment,s),p(g),p(S.$$.fragment,s),p(D.$$.fragment,s),p(V.$$.fragment,s),p(H.$$.fragment,s),p(B.$$.fragment,s),p(q.$$.fragment,s),p(N,s),ee=!1},d(s){s&&_(e),T(n),T(l),T(i),T(d),T(f),g&&g.d(),T(S),T(D),T(V),T(H),T(B),T(q),N&&N.d(s)}}}const Ct=async function({params:o,stuff:e}){const{workflow:t,workers:n}=e,{namespace:a}=o;return{props:{namespace:a,workflow:t,workers:n}}};function ze(o,e,t){let n;We(o,ae,w=>t(3,n=w));let{$$slots:a={},$$scope:l}=e,{namespace:c}=e,{workflow:r}=e,{workers:i}=e;const O=(w,S)=>({namespace:c,workflow:r.id,run:r.runId,view:w,eventId:S}),d={namespace:c,workflow:r.id,run:r.runId};Ve(()=>{Ue()});const j=()=>we(ae,n="feed",n),f=()=>we(ae,n="compact",n),k=()=>we(ae,n="json",n);return o.$$set=w=>{"namespace"in w&&t(0,c=w.namespace),"workflow"in w&&t(1,r=w.workflow),"workers"in w&&t(2,i=w.workers),"$$scope"in w&&t(10,l=w.$$scope)},[c,r,i,n,O,d,a,j,f,k,l]}class St extends Ee{constructor(e){super(),be(this,e,ze,Me,Ce,{namespace:0,workflow:1,workers:2})}}export{St as default,Ct as load};
