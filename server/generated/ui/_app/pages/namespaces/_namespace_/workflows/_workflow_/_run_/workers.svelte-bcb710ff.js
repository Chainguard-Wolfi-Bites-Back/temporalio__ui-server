import{S as Ce,i as Fe,s as Oe,e as k,t as L,k as D,c as v,a as g,h as P,d as h,m as V,b as T,g as De,L as r,j as ue,o as A,p as se,q as w,w as z,x as G,y as M,T as U,B as X,J as Le,n as re,P as ae,aQ as Ve,aF as We}from"../../../../../../chunks/vendor-cba54241.js";import{r as ye,a as Ee}from"../../../../../../chunks/route-for-api-f58641b9.js";import{f as Qe}from"../../../../../../chunks/format-date-b92a742e.js";import{E as Pe}from"../../../../../../chunks/empty-state-3f104c3c.js";import"../../../../../../chunks/navigation-093db9e2.js";import"../../../../../../chunks/singletons-a6a7384f.js";import"../../../../../../chunks/notifications-dc83cd3a.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";async function He(i,e=fetch){const l=await ye(Ee("task-queue",i),{request:e,params:{taskQueueType:"1"}}),t=await ye(Ee("task-queue",i),{request:e,params:{taskQueueType:"2"}});t.pollers.forEach(u=>{u.taskQueueTypes=["ACTIVITY"]}),l.pollers.forEach(u=>{u.taskQueueTypes=["WORKFLOW"]});const n=u=>(m,p)=>{const s=m[p.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return m[p.identity]={lastAccessTime:!s.lastAccessTime||s.lastAccessTime<p.lastAccessTime?p.lastAccessTime:s.lastAccessTime,taskQueueTypes:s.taskQueueTypes.concat([u])},m};return t.pollers.filter(u=>l.pollers.some(m=>{if(u.identity===m.identity)return u.taskQueueTypes=[...m.taskQueueTypes,...u.taskQueueTypes],u})),t.pollers.reduce(n("ACTIVITY"),l.pollers.reduce(n("WORKFLOW"),{})),{pollers:t.pollers,taskQueueStatus:t.taskQueueStatus}}function Ie(i,e,l){const t=i.slice();return t[2]=e[l],t}function Ae(i){let e,l;return e=new Pe({props:{title:"No Workers Found"}}),{c(){z(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,n){M(e,t,n),l=!0},p:U,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){A(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Se(i){let e,l;return e=new ae({props:{icon:Ve,color:"black"}}),{c(){z(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,n){M(e,t,n),l=!0},p:U,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){A(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function qe(i){let e,l;return e=new ae({props:{icon:We,color:"blue"}}),{c(){z(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,n){M(e,t,n),l=!0},p:U,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){A(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Re(i){let e,l;return e=new ae({props:{icon:Ve,color:"black"}}),{c(){z(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,n){M(e,t,n),l=!0},p:U,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){A(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Ke(i){let e,l;return e=new ae({props:{icon:We,color:"blue"}}),{c(){z(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,n){M(e,t,n),l=!0},p:U,i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){A(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function xe(i){let e,l,t,n,u,m,p,s,W,f,a,o,c,x,$,q,Y=i[2].identity+"",Z,ne,R,B,j,J=Qe(i[2].lastAccessTime)+"",ee,oe,H,te,b,y,ce,S,le,E,Q,ie,K;const fe=[qe,Se],C=[];function _e(_,d){return d&1&&(te=null),te==null&&(te=!!_[2].taskQueueTypes.includes("WORKFLOW")),te?0:1}b=_e(i,-1),y=C[b]=fe[b](i);const de=[Ke,Re],F=[];function me(_,d){return d&1&&(le=null),le==null&&(le=!!_[2].taskQueueTypes.includes("ACTIVITY")),le?0:1}return E=me(i,-1),Q=F[E]=de[E](i),{c(){e=k("section"),l=k("div"),t=k("div"),n=L("ID"),u=D(),m=k("div"),p=L("Last Accessed"),s=D(),W=k("div"),f=L("Workflow Task Handler"),a=D(),o=k("div"),c=L("Activity Handler"),x=D(),$=k("article"),q=k("div"),Z=L(Y),ne=D(),R=k("div"),B=k("h3"),j=k("p"),ee=L(J),oe=D(),H=k("div"),y.c(),ce=D(),S=k("div"),Q.c(),ie=D(),this.h()},l(_){e=v(_,"SECTION",{class:!0});var d=g(e);l=v(d,"DIV",{class:!0});var I=g(l);t=v(I,"DIV",{class:!0});var N=g(t);n=P(N,"ID"),N.forEach(h),u=V(I),m=v(I,"DIV",{class:!0});var pe=g(m);p=P(pe,"Last Accessed"),pe.forEach(h),s=V(I),W=v(I,"DIV",{class:!0});var he=g(W);f=P(he,"Workflow Task Handler"),he.forEach(h),a=V(I),o=v(I,"DIV",{class:!0});var ke=g(o);c=P(ke,"Activity Handler"),ke.forEach(h),I.forEach(h),x=V(d),$=v(d,"ARTICLE",{class:!0});var O=g($);q=v(O,"DIV",{class:!0});var ve=g(q);Z=P(ve,Y),ve.forEach(h),ne=V(O),R=v(O,"DIV",{class:!0});var ge=g(R);B=v(ge,"H3",{});var Te=g(B);j=v(Te,"P",{});var we=g(j);ee=P(we,J),we.forEach(h),Te.forEach(h),ge.forEach(h),oe=V(O),H=v(O,"DIV",{class:!0});var $e=g(H);y.l($e),$e.forEach(h),ce=V(O),S=v(O,"DIV",{class:!0});var be=g(S);Q.l(be),be.forEach(h),O.forEach(h),ie=V(d),d.forEach(h),this.h()},h(){T(t,"class","w-3/12 text-left"),T(m,"class","w-3/12 text-left"),T(W,"class","w-3/12 text-left"),T(o,"class","w-2/12 text-left"),T(l,"class","bg-gray-200 flex flex-row p-2"),T(q,"class","links w-3/12 text-left"),T(R,"class","links w-3/12 text-left"),T(H,"class","w-3/12 text-left"),T(S,"class","w-3/12 text-left"),T($,"class","w-full h-full flex flex-row border-b-2 last:border-b-0 no-underline p-2"),T(e,"class","flex flex-col border-2 border-gray-300 w-full rounded-lg")},m(_,d){De(_,e,d),r(e,l),r(l,t),r(t,n),r(l,u),r(l,m),r(m,p),r(l,s),r(l,W),r(W,f),r(l,a),r(l,o),r(o,c),r(e,x),r(e,$),r($,q),r(q,Z),r($,ne),r($,R),r(R,B),r(B,j),r(j,ee),r($,oe),r($,H),C[b].m(H,null),r($,ce),r($,S),F[E].m(S,null),r(e,ie),K=!0},p(_,d){(!K||d&1)&&Y!==(Y=_[2].identity+"")&&ue(Z,Y),(!K||d&1)&&J!==(J=Qe(_[2].lastAccessTime)+"")&&ue(ee,J);let I=b;b=_e(_,d),b===I?C[b].p(_,d):(re(),A(C[I],1,1,()=>{C[I]=null}),se(),y=C[b],y?y.p(_,d):(y=C[b]=fe[b](_),y.c()),w(y,1),y.m(H,null));let N=E;E=me(_,d),E===N?F[E].p(_,d):(re(),A(F[N],1,1,()=>{F[N]=null}),se(),Q=F[E],Q?Q.p(_,d):(Q=F[E]=de[E](_),Q.c()),w(Q,1),Q.m(S,null))},i(_){K||(w(y),w(Q),K=!0)},o(_){A(y),A(Q),K=!1},d(_){_&&h(e),C[b].d(),F[E].d()}}}function Ne(i){let e,l,t,n,u,m,p=i[0].pollers,s=[];for(let a=0;a<p.length;a+=1)s[a]=xe(Ie(i,p,a));const W=a=>A(s[a],1,1,()=>{s[a]=null});let f=null;return p.length||(f=Ae()),{c(){e=k("section"),l=k("h3"),t=L("Task Queue: "),n=L(i[1]),u=D();for(let a=0;a<s.length;a+=1)s[a].c();f&&f.c(),this.h()},l(a){e=v(a,"SECTION",{class:!0});var o=g(e);l=v(o,"H3",{class:!0});var c=g(l);t=P(c,"Task Queue: "),n=P(c,i[1]),c.forEach(h),u=V(o);for(let x=0;x<s.length;x+=1)s[x].l(o);f&&f.l(o),o.forEach(h),this.h()},h(){T(l,"class","text-lg font-medium"),T(e,"class","flex flex-col gap-4")},m(a,o){De(a,e,o),r(e,l),r(l,t),r(l,n),r(e,u);for(let c=0;c<s.length;c+=1)s[c].m(e,null);f&&f.m(e,null),m=!0},p(a,[o]){if((!m||o&2)&&ue(n,a[1]),o&1){p=a[0].pollers;let c;for(c=0;c<p.length;c+=1){const x=Ie(a,p,c);s[c]?(s[c].p(x,o),w(s[c],1)):(s[c]=xe(x),s[c].c(),w(s[c],1),s[c].m(e,null))}for(re(),c=p.length;c<s.length;c+=1)W(c);se(),!p.length&&f?f.p(a,o):p.length?f&&(re(),A(f,1,1,()=>{f=null}),se()):(f=Ae(),f.c(),w(f,1),f.m(e,null))}},i(a){if(!m){for(let o=0;o<p.length;o+=1)w(s[o]);m=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)A(s[o]);m=!1},d(a){a&&h(e),Le(s,a),f&&f.d()}}}const Ze=async function({params:i,stuff:e}){const{namespace:l}=i,{workflow:t}=e,{taskQueue:n}=t;return{props:{workers:await He({queue:n,namespace:l}),taskQueue:n}}};function Ye(i,e,l){let{workers:t}=e,{taskQueue:n}=e;return i.$$set=u=>{"workers"in u&&l(0,t=u.workers),"taskQueue"in u&&l(1,n=u.taskQueue)},[t,n]}class et extends Ce{constructor(e){super();Fe(this,e,Ye,Ne,Oe,{workers:0,taskQueue:1})}}export{et as default,Ze as load};
