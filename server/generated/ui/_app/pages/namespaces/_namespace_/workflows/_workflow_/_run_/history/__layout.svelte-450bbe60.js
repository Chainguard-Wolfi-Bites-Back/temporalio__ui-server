var We=Object.defineProperty;var re=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var Ne=(r,e,t)=>e in r?We(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Te=(r,e)=>{for(var t in e||(e={}))Ce.call(e,t)&&Ne(r,t,e[t]);if(re)for(var t of re(e))Oe.call(e,t)&&Ne(r,t,e[t]);return r};var Ve=(r,e)=>{var t={};for(var s in r)Ce.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&re)for(var s of re(r))e.indexOf(s)<0&&Oe.call(r,s)&&(t[s]=r[s]);return t};import{S as Y,i as Z,s as x,e as h,c as v,a as $,d as g,b as w,U as Q,g as C,W as Qe,n as Ue,o as P,p as ze,q as D,I as le,ag as Xe,K as oe,M as ie,N as fe,O as ce,P as Ye,w as J,k as I,x as R,m as A,y as B,L as d,B as q,aJ as Ze,T as ae,r as xe,t as H,h as N,f as Fe,J as et,l as je,v as tt,aD as st,aK as rt,aL as nt,aM as at,aN as lt}from"../../../../../../../chunks/vendor-426d11b3.js";import{h as ot,c as pe,r as it,a as ft}from"../../../../../../../chunks/route-for-api-0aa15468.js";import{t as ct}from"../../../../../../../chunks/index-98db01bc.js";import{c as ut,b as ne,g as Le}from"../../../../../../../chunks/route-for-f402e023.js";import{p as ue}from"../../../../../../../chunks/stores-d09229ea.js";import{a as Je}from"../../../../../../../chunks/append-query-parameters-b8619cc0.js";import{g as mt}from"../../../../../../../chunks/get-context-54db8f6a.js";import{C as Re}from"../../../../../../../chunks/code-block-ea1430db.js";import{f as dt}from"../../../../../../../chunks/format-date-2b9fdbbd.js";import"../../../../../../../chunks/navigation-093db9e2.js";import"../../../../../../../chunks/singletons-a6a7384f.js";import"../../../../../../../chunks/notifications-c40a89ef.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/data-converter-config-e0242919.js";import"../../../../../../../chunks/atob-5f9d7101.js";const Me=(r={},e={})=>{const t=Te({},r);for(const s of Object.keys(e)){const n=t[s];Array.isArray(n)?t[s]=t[s].concat(e[s]):typeof n=="object"&&!Array.isArray(n)?t[s]=Me(t[s],e[s]):t[s]=e[s]}return t},Ge=async(r,{onStart:e,onUpdate:t,onComplete:s,onError:n=ot,token:l,previousProps:f}={})=>{!f&&pe(e)&&e();try{const i=await r(l),{nextPageToken:a}=i,m=Ve(i,["nextPageToken"]),c=Me(f,m);return pe(t)&&t(c,m),a?Ge(r,{onStart:e,onUpdate:t,onComplete:s,token:a,previousProps:c}):(pe(s)&&s(c),c)}catch(u){n(u)}},Ke=async({namespace:r,executionId:e,runId:t,onStart:s,onUpdate:n,onComplete:l},f=fetch)=>(await Ge(async u=>it(ft("events",{namespace:r,executionId:e,runId:t}),{token:u,request:f}),{onStart:s,onUpdate:n,onComplete:l})).history.events,gt=async(r,e=fetch)=>Ke(r,e).then(ct),_t=r=>{var l,f,i,u;let e,t;const s=r==null?void 0:r.find(a=>!!a.workflowExecutionStartedEventAttributes),n=r==null?void 0:r.find(a=>!!a.workflowExecutionCompletedEventAttributes);return s&&(e=JSON.stringify((f=(l=s==null?void 0:s.workflowExecutionStartedEventAttributes)==null?void 0:l.input)==null?void 0:f.payloads)),n&&(t=JSON.stringify((u=(i=n==null?void 0:n.workflowExecutionCompletedEventAttributes)==null?void 0:i.result)==null?void 0:u.payloads)),{input:e,result:t}};function pt(r){let e;const t=r[7].default,s=oe(t,r,r[6],null);return{c(){s&&s.c()},l(n){s&&s.l(n)},m(n,l){s&&s.m(n,l),e=!0},p(n,l){s&&s.p&&(!e||l&64)&&ie(s,t,n,n[6],e?ce(t,n[6],l,null):fe(n[6]),null)},i(n){e||(D(s,n),e=!0)},o(n){P(s,n),e=!1},d(n){s&&s.d(n)}}}function ht(r){let e,t,s,n;t=new Ye({props:{icon:r[0],scale:r[2]}});const l=r[7].default,f=oe(l,r,r[6],null);return{c(){e=h("div"),J(t.$$.fragment),s=I(),f&&f.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var u=$(e);R(t.$$.fragment,u),s=A(u),f&&f.l(u),u.forEach(g),this.h()},h(){w(e,"class","flex gap-2 items-center")},m(i,u){C(i,e,u),B(t,e,null),d(e,s),f&&f.m(e,null),n=!0},p(i,u){const a={};u&1&&(a.icon=i[0]),u&4&&(a.scale=i[2]),t.$set(a),f&&f.p&&(!n||u&64)&&ie(f,l,i,i[6],n?ce(l,i[6],u,null):fe(i[6]),null)},i(i){n||(D(t.$$.fragment,i),D(f,i),n=!0)},o(i){P(t.$$.fragment,i),P(f,i),n=!1},d(i){i&&g(e),q(t),f&&f.d(i)}}}function vt(r){let e,t,s,n,l,f,i;const u=[ht,pt],a=[];function m(c,o){return c[0]?0:1}return t=m(r),s=a[t]=u[t](r),{c(){e=h("a"),s.c(),this.h()},l(c){e=v(c,"A",{class:!0,href:!0});var o=$(e);s.l(o),o.forEach(g),this.h()},h(){w(e,"class","border-2 py-2 px-4 hover:text-white hover:bg-gray-600 flex items-center justify-center svelte-1orl6nd"),w(e,"href",n=Je(r[3],r[5].url.searchParams)),Q(e,"rounded-lg",!r[1]),Q(e,"active",r[5].url.pathname.includes(r[4])),Q(e,"group",r[1])},m(c,o){C(c,e,o),a[t].m(e,null),l=!0,f||(i=Qe(e,"click",r[8]),f=!0)},p(c,[o]){let b=t;t=m(c),t===b?a[t].p(c,o):(Ue(),P(a[b],1,1,()=>{a[b]=null}),ze(),s=a[t],s?s.p(c,o):(s=a[t]=u[t](c),s.c()),D(s,1),s.m(e,null)),(!l||o&40&&n!==(n=Je(c[3],c[5].url.searchParams)))&&w(e,"href",n),o&2&&Q(e,"rounded-lg",!c[1]),o&48&&Q(e,"active",c[5].url.pathname.includes(c[4])),o&2&&Q(e,"group",c[1])},i(c){l||(D(s),l=!0)},o(c){P(s),l=!1},d(c){c&&g(e),a[t].d(),f=!1,i()}}}function $t(r,e,t){let s;le(r,ue,o=>t(5,s=o));let{$$slots:n={},$$scope:l}=e,{icon:f}=e,{group:i=mt("group")}=e,{scale:u=1}=e,{href:a="#"}=e,{base:m=a}=e;function c(o){Xe.call(this,r,o)}return r.$$set=o=>{"icon"in o&&t(0,f=o.icon),"group"in o&&t(1,i=o.group),"scale"in o&&t(2,u=o.scale),"href"in o&&t(3,a=o.href),"base"in o&&t(4,m=o.base),"$$scope"in o&&t(6,l=o.$$scope)},[f,i,u,a,m,s,l,n,c]}class X extends Y{constructor(e){super();Z(this,e,$t,vt,x,{icon:0,group:1,scale:2,href:3,base:4})}}function bt(r){let e,t;return e=new X({props:{icon:Ze}}),e.$on("click",r[0]),{c(){J(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,n){B(e,s,n),t=!0},p:ae,i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function wt(r,e,t){let s;le(r,ue,u=>t(1,s=u));const{workflow:n,run:l,namespace:f}=s.params;return[async()=>{const u=await Ke({namespace:f,executionId:n,runId:l}),a=JSON.stringify(u,null,2);m(a,`${l}/events.json`,"text/plain");function m(c,o,b){const _=document.createElement("a"),y=new Blob([c],{type:b});_.href=URL.createObjectURL(y),_.download=o,_.click()}}]}class Et extends Y{constructor(e){super();Z(this,e,wt,bt,x,{})}}function yt(r){let e,t;const s=r[1].default,n=oe(s,r,r[0],null);return{c(){e=h("div"),n&&n.c(),this.h()},l(l){e=v(l,"DIV",{class:!0});var f=$(e);n&&n.l(f),f.forEach(g),this.h()},h(){w(e,"class","flex")},m(l,f){C(l,e,f),n&&n.m(e,null),t=!0},p(l,[f]){n&&n.p&&(!t||f&1)&&ie(n,s,l,l[0],t?ce(s,l[0],f,null):fe(l[0]),null)},i(l){t||(D(n,l),t=!0)},o(l){P(n,l),t=!1},d(l){l&&g(e),n&&n.d(l)}}}function kt(r,e,t){let{$$slots:s={},$$scope:n}=e;return xe("group",!0),r.$$set=l=>{"$$scope"in l&&t(0,n=l.$$scope)},[n,s]}class It extends Y{constructor(e){super();Z(this,e,kt,yt,x,{})}}function Be(r,e,t){const s=r.slice();return s[6]=e[t].id,s[7]=st(e[t],["id"]),s}function At(r){let e,t,s,n,l,f,i,u,a,m=r[0],c=[];for(let o=0;o<m.length;o+=1)c[o]=qe(Be(r,m,o));return{c(){e=h("section"),t=h("h3"),s=H("Pending Activities"),n=I(),l=h("section");for(let o=0;o<c.length;o+=1)c[o].c();f=I(),i=h("div"),u=h("a"),a=H("Show all"),this.h()},l(o){e=v(o,"SECTION",{class:!0});var b=$(e);t=v(b,"H3",{class:!0});var _=$(t);s=N(_,"Pending Activities"),_.forEach(g),n=A(b),l=v(b,"SECTION",{class:!0});var y=$(l);for(let T=0;T<c.length;T+=1)c[T].l(y);y.forEach(g),f=A(b),i=v(b,"DIV",{class:!0});var O=$(i);u=v(O,"A",{href:!0,class:!0});var k=$(u);a=N(k,"Show all"),k.forEach(g),O.forEach(g),b.forEach(g),this.h()},h(){w(t,"class","text-lg font-medium mb-4"),w(l,"class","w-full table-auto space-x-4"),w(u,"href",r[1]),w(u,"class","border-b-2 border-blue-600"),w(i,"class","text-right"),w(e,"class","border-2 border-gray-300 rounded-lg p-4")},m(o,b){C(o,e,b),d(e,t),d(t,s),d(e,n),d(e,l);for(let _=0;_<c.length;_+=1)c[_].m(l,null);d(e,f),d(e,i),d(i,u),d(u,a)},p(o,b){if(b&3){m=o[0];let _;for(_=0;_<m.length;_+=1){const y=Be(o,m,_);c[_]?c[_].p(y,b):(c[_]=qe(y),c[_].c(),c[_].m(l,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=m.length}},d(o){o&&g(e),et(c,o)}}}function qe(r){var ve;let e,t,s=r[7].activityId+"",n,l,f,i,u,a,m,c,o,b=((ve=r[7].activityType)==null?void 0:ve.name)+"",_,y,O,k,T,M,W,E,p,S=r[7].lastFailure+"",V,K,F,j,G,me,de,U,he=dt(r[7].lastHeartbeatTime)+"",ge,_e;return{c(){e=h("a"),t=h("div"),n=H(s),l=I(),f=h("div"),i=h("div"),u=h("h4"),a=H("Activity Name"),m=I(),c=h("p"),o=h("span"),_=H(b),y=I(),O=h("div"),k=h("div"),T=h("h3"),M=H("Last Failure"),W=I(),E=h("pre"),p=h("code"),V=H(S),K=I(),F=h("div"),j=h("div"),G=h("h4"),me=H("Last Heartbeat Time"),de=I(),U=h("p"),ge=H(he),_e=I(),this.h()},l(z){e=v(z,"A",{class:!0,href:!0});var L=$(e);t=v(L,"DIV",{class:!0});var $e=$(t);n=N($e,s),$e.forEach(g),l=A(L),f=v(L,"DIV",{class:!0});var be=$(f);i=v(be,"DIV",{class:!0});var ee=$(i);u=v(ee,"H4",{});var we=$(u);a=N(we,"Activity Name"),we.forEach(g),m=A(ee),c=v(ee,"P",{});var Ee=$(c);o=v(Ee,"SPAN",{class:!0});var ye=$(o);_=N(ye,b),ye.forEach(g),Ee.forEach(g),ee.forEach(g),be.forEach(g),y=A(L),O=v(L,"DIV",{class:!0});var ke=$(O);k=v(ke,"DIV",{class:!0});var te=$(k);T=v(te,"H3",{});var Ie=$(T);M=N(Ie,"Last Failure"),Ie.forEach(g),W=A(te),E=v(te,"PRE",{style:!0,class:!0});var Ae=$(E);p=v(Ae,"CODE",{class:!0});var Pe=$(p);V=N(Pe,S),Pe.forEach(g),Ae.forEach(g),te.forEach(g),ke.forEach(g),K=A(L),F=v(L,"DIV",{class:!0});var De=$(F);j=v(De,"DIV",{class:!0});var se=$(j);G=v(se,"H4",{});var Se=$(G);me=N(Se,"Last Heartbeat Time"),Se.forEach(g),de=A(se),U=v(se,"P",{});var He=$(U);ge=N(He,he),He.forEach(g),se.forEach(g),De.forEach(g),_e=A(L),L.forEach(g),this.h()},h(){w(t,"class","text-left font-normal text-gray-500 w-40"),w(o,"class","bg-gray-300 text-gray-700 px-2"),w(i,"class","flex gap-2"),w(f,"class","w-full"),w(p,"class","language-json"),Fe(E,"padding","0 1em"),Fe(E,"margin","0"),w(E,"class","rounded-lg"),w(k,"class","flex gap-2"),w(O,"class","w-full"),w(j,"class","flex gap-2"),w(F,"class","w-full"),w(e,"class","flex content-between w-full border-b-2 border-gray-300 p-2 last-of-type:border-b-0 hover:bg-gray-50"),w(e,"href",r[1])},m(z,L){C(z,e,L),d(e,t),d(t,n),d(e,l),d(e,f),d(f,i),d(i,u),d(u,a),d(i,m),d(i,c),d(c,o),d(o,_),d(e,y),d(e,O),d(O,k),d(k,T),d(T,M),d(k,W),d(k,E),d(E,p),d(p,V),d(e,K),d(e,F),d(F,j),d(j,G),d(G,me),d(j,de),d(j,U),d(U,ge),d(e,_e)},p:ae,d(z){z&&g(e)}}}function Pt(r){let e,t=r[0].length&&At(r);return{c(){t&&t.c(),e=je()},l(s){t&&t.l(s),e=je()},m(s,n){t&&t.m(s,n),C(s,e,n)},p(s,[n]){s[0].length&&t.p(s,n)},i:ae,o:ae,d(s){t&&t.d(s),s&&g(e)}}}function Dt(r,e,t){let s;le(r,ue,a=>t(2,s=a));const{pendingActivities:n}=s.stuff.workflow,{namespace:l,workflow:f,run:i}=s.params,u=ut({namespace:l,workflow:f,run:i});return tt(()=>{window.Prism.highlightAll()}),[n,u]}class St extends Y{constructor(e){super();Z(this,e,Dt,Pt,x,{})}}function Ht(r){let e;return{c(){e=H("Summary")},l(t){e=N(t,"Summary")},m(t,s){C(t,e,s)},d(t){t&&g(e)}}}function Nt(r){let e;return{c(){e=H("Full")},l(t){e=N(t,"Full")},m(t,s){C(t,e,s)},d(t){t&&g(e)}}}function Ct(r){let e;return{c(){e=H("Compact")},l(t){e=N(t,"Compact")},m(t,s){C(t,e,s)},d(t){t&&g(e)}}}function Ot(r){let e;return{c(){e=H("JSON")},l(t){e=N(t,"JSON")},m(t,s){C(t,e,s)},d(t){t&&g(e)}}}function Tt(r){let e,t,s,n,l,f,i,u;return e=new X({props:{icon:rt,base:ne(r[3]("summary")),href:Le(r[3]("summary",r[0].params.eventId||"1")),$$slots:{default:[Ht]},$$scope:{ctx:r}}}),s=new X({props:{icon:nt,href:ne(r[3]("full")),$$slots:{default:[Nt]},$$scope:{ctx:r}}}),l=new X({props:{icon:at,href:ne(r[3]("compact")),$$slots:{default:[Ct]},$$scope:{ctx:r}}}),i=new X({props:{icon:lt,href:ne(r[3]("json")),$$slots:{default:[Ot]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment),t=I(),J(s.$$.fragment),n=I(),J(l.$$.fragment),f=I(),J(i.$$.fragment)},l(a){R(e.$$.fragment,a),t=A(a),R(s.$$.fragment,a),n=A(a),R(l.$$.fragment,a),f=A(a),R(i.$$.fragment,a)},m(a,m){B(e,a,m),C(a,t,m),B(s,a,m),C(a,n,m),B(l,a,m),C(a,f,m),B(i,a,m),u=!0},p(a,m){const c={};m&1&&(c.href=Le(a[3]("summary",a[0].params.eventId||"1"))),m&256&&(c.$$scope={dirty:m,ctx:a}),e.$set(c);const o={};m&256&&(o.$$scope={dirty:m,ctx:a}),s.$set(o);const b={};m&256&&(b.$$scope={dirty:m,ctx:a}),l.$set(b);const _={};m&256&&(_.$$scope={dirty:m,ctx:a}),i.$set(_)},i(a){u||(D(e.$$.fragment,a),D(s.$$.fragment,a),D(l.$$.fragment,a),D(i.$$.fragment,a),u=!0)},o(a){P(e.$$.fragment,a),P(s.$$.fragment,a),P(l.$$.fragment,a),P(i.$$.fragment,a),u=!1},d(a){q(e,a),a&&g(t),q(s,a),a&&g(n),q(l,a),a&&g(f),q(i,a)}}}function Vt(r){let e,t,s,n,l,f,i,u,a,m,c,o,b,_,y,O,k,T,M;s=new Re({props:{heading:"Input",content:r[1],framed:!0}}),l=new Re({props:{heading:"Result",content:r[2],framed:!0}}),i=new St({}),y=new It({props:{$$slots:{default:[Tt]},$$scope:{ctx:r}}}),k=new Et({});const W=r[7].default,E=oe(W,r,r[8],null);return{c(){e=h("section"),t=h("div"),J(s.$$.fragment),n=I(),J(l.$$.fragment),f=I(),J(i.$$.fragment),u=I(),a=h("section"),m=h("nav"),c=h("h3"),o=H("Event History"),b=I(),_=h("div"),J(y.$$.fragment),O=I(),J(k.$$.fragment),T=I(),E&&E.c(),this.h()},l(p){e=v(p,"SECTION",{class:!0});var S=$(e);t=v(S,"DIV",{class:!0});var V=$(t);R(s.$$.fragment,V),n=A(V),R(l.$$.fragment,V),V.forEach(g),f=A(S),R(i.$$.fragment,S),u=A(S),a=v(S,"SECTION",{id:!0});var K=$(a);m=v(K,"NAV",{class:!0});var F=$(m);c=v(F,"H3",{class:!0});var j=$(c);o=N(j,"Event History"),j.forEach(g),b=A(F),_=v(F,"DIV",{class:!0});var G=$(_);R(y.$$.fragment,G),O=A(G),R(k.$$.fragment,G),G.forEach(g),F.forEach(g),T=A(K),E&&E.l(K),K.forEach(g),S.forEach(g),this.h()},h(){w(t,"class","flex gap-4"),w(c,"class","text-lg font-medium"),w(_,"class","flex gap-4"),w(m,"class","flex gap-4 justify-between items-end pb-4"),w(a,"id","event-history"),w(e,"class","flex flex-col gap-4")},m(p,S){C(p,e,S),d(e,t),B(s,t,null),d(t,n),B(l,t,null),d(e,f),B(i,e,null),d(e,u),d(e,a),d(a,m),d(m,c),d(c,o),d(m,b),d(m,_),B(y,_,null),d(_,O),B(k,_,null),d(a,T),E&&E.m(a,null),M=!0},p(p,[S]){const V={};S&257&&(V.$$scope={dirty:S,ctx:p}),y.$set(V),E&&E.p&&(!M||S&256)&&ie(E,W,p,p[8],M?ce(W,p[8],S,null):fe(p[8]),null)},i(p){M||(D(s.$$.fragment,p),D(l.$$.fragment,p),D(i.$$.fragment,p),D(y.$$.fragment,p),D(k.$$.fragment,p),D(E,p),M=!0)},o(p){P(s.$$.fragment,p),P(l.$$.fragment,p),P(i.$$.fragment,p),P(y.$$.fragment,p),P(k.$$.fragment,p),P(E,p),M=!1},d(p){p&&g(e),q(s),q(l),q(i),q(y),q(k),E&&E.d(p)}}}const xt=async function({params:r,stuff:e}){const{workflow:t}=e,{namespace:s}=r,n={namespace:s,executionId:t.id,runId:t.runId},{events:l,eventGroups:f}=await gt(n);return{props:{namespace:s,workflow:t,events:l,eventGroups:f},stuff:{events:l,eventGroups:f}}};function Ft(r,e,t){let s;le(r,ue,o=>t(0,s=o));let{$$slots:n={},$$scope:l}=e,{namespace:f}=e,{workflow:i}=e,{events:u}=e;const{input:a,result:m}=_t(u),c=(o,b)=>({namespace:f,workflow:i.id,run:i.runId,view:o,eventId:b});return r.$$set=o=>{"namespace"in o&&t(4,f=o.namespace),"workflow"in o&&t(5,i=o.workflow),"events"in o&&t(6,u=o.events),"$$scope"in o&&t(8,l=o.$$scope)},[s,a,m,c,f,i,u,n,l]}class es extends Y{constructor(e){super();Z(this,e,Ft,Vt,x,{namespace:4,workflow:5,events:6})}}export{es as default,xt as load};
