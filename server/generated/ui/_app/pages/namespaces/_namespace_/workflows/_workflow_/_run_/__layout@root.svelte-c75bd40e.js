import{S as $e,i as ke,s as ve,e as p,k as E,w as K,c as _,a as h,d as f,m as A,x as Y,b as d,g as I,M as i,y as X,N as it,J as Ve,K as Fe,L as Re,q as T,o as S,B as z,l as De,n as Qe,p as We,P as _t,I as He,t as D,h as C,E as we,j as fe,ae as et,O as je,X as tt,f as dt}from"../../../../../../chunks/index-9f955617.js";import{r as Me,a as Oe,h as ht}from"../../../../../../chunks/route-for-api-40822ec4.js";import{W as wt,f as $t}from"../../../../../../chunks/workflow-status-d5f29b19.js";import{F as ut,f as kt,k as vt,l as gt}from"../../../../../../chunks/index.es-d36a04e6.js";import{p as Le}from"../../../../../../chunks/stores-dc10aa65.js";import{d as ct,e as mt,f as bt,g as Tt,h as Et,i as st}from"../../../../../../chunks/route-for-d606e623.js";import{f as Ne}from"../../../../../../chunks/format-date-a3b7d511.js";import{L as pt}from"../../../../../../chunks/link-f07eabff.js";import{n as At}from"../../../../../../chunks/notifications-9be462b8.js";import{B as Ce}from"../../../../../../chunks/button-cbb91ea4.js";import{f as It}from"../../../../../../chunks/events-service-3b6e59c2.js";import"../../../../../../chunks/navigation-3f1ea447.js";import"../../../../../../chunks/singletons-d1fb5791.js";import"../../../../../../chunks/index-fef70e44.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/simplify-attributes-42eef498.js";import"../../../../../../chunks/index-e58309ae.js";import"../../../../../../chunks/data-converter-config-2b2331c2.js";import"../../../../../../chunks/persist-store-510d175e.js";import"../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../chunks/index-a8ee0a5c.js";import"../../../../../../chunks/get-event-categorization-b2bce139.js";async function Pt(l,e=fetch){const t=await Me(Oe("task-queue",l),{request:e,params:{taskQueueType:"1"}}),s=await Me(Oe("task-queue",l),{request:e,params:{taskQueueType:"2"}});s.pollers.forEach(a=>{a.taskQueueTypes=["ACTIVITY"]}),t.pollers.forEach(a=>{a.taskQueueTypes=["WORKFLOW"]});const n=a=>(r,u)=>{const o=r[u.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return r[u.identity]={lastAccessTime:!o.lastAccessTime||o.lastAccessTime<u.lastAccessTime?u.lastAccessTime:o.lastAccessTime,taskQueueTypes:o.taskQueueTypes.concat([a])},r};return s.pollers.filter(a=>t.pollers.some(r=>{if(a.identity===r.identity)return a.taskQueueTypes=[...r.taskQueueTypes,...a.taskQueueTypes],a})),s.pollers.reduce(n("ACTIVITY"),t.pollers.reduce(n("WORKFLOW"),{})),{pollers:s.pollers,taskQueueStatus:s.taskQueueStatus}}async function St({workflow:l,namespace:e,reason:t}){return await Me(Oe("workflow.terminate",{namespace:e,workflowId:l.id,runId:l.runId}),{options:{method:"POST",body:JSON.stringify({reason:t})},shouldRetry:!1})}const yt=l=>({}),nt=l=>({}),Nt=l=>({}),at=l=>({});function lt(l){let e,t,s,n,a,r,u,o,c,w,y,k,g,H,O,F,M,x;r=new ut({props:{icon:kt}});const L=l[4].title,ae=He(L,l,l[8],at),P=ae||Dt(),U=l[4].content,ee=He(U,l,l[8],nt),W=ee||Ct();return g=new Ce({props:{secondary:!0,$$slots:{default:[Qt]},$$scope:{ctx:l}}}),g.$on("click",l[6]),O=new Ce({props:{destroy:!0,disabled:l[2],$$slots:{default:[Wt]},$$scope:{ctx:l}}}),O.$on("click",l[7]),{c(){e=p("div"),t=p("div"),s=E(),n=p("div"),a=p("div"),K(r.$$.fragment),u=E(),o=p("div"),P&&P.c(),c=E(),w=p("div"),W&&W.c(),y=E(),k=p("div"),K(g.$$.fragment),H=E(),K(O.$$.fragment),this.h()},l(v){e=_(v,"DIV",{class:!0});var b=h(e);t=_(b,"DIV",{class:!0}),h(t).forEach(f),s=A(b),n=_(b,"DIV",{class:!0});var R=h(n);a=_(R,"DIV",{class:!0});var q=h(a);Y(r.$$.fragment,q),q.forEach(f),u=A(R),o=_(R,"DIV",{class:!0});var ce=h(o);P&&P.l(ce),ce.forEach(f),c=A(R),w=_(R,"DIV",{class:!0});var G=h(w);W&&W.l(G),G.forEach(f),y=A(R),k=_(R,"DIV",{class:!0});var te=h(k);Y(g.$$.fragment,te),H=A(te),Y(O.$$.fragment,te),te.forEach(f),R.forEach(f),b.forEach(f),this.h()},h(){d(t,"class","overlay svelte-p12tlm"),d(a,"class","float-right cursor-pointer p-6"),d(o,"class","title svelte-p12tlm"),d(w,"class","content svelte-p12tlm"),d(k,"class","flex justify-end items-center p-6 space-x-2"),d(n,"class","body svelte-p12tlm"),d(e,"class","modal svelte-p12tlm")},m(v,b){I(v,e,b),i(e,t),i(e,s),i(e,n),i(n,a),X(r,a,null),i(n,u),i(n,o),P&&P.m(o,null),i(n,c),i(n,w),W&&W.m(w,null),i(n,y),i(n,k),X(g,k,null),i(k,H),X(O,k,null),F=!0,M||(x=it(a,"click",l[5]),M=!0)},p(v,b){ae&&ae.p&&(!F||b&256)&&Ve(ae,L,v,v[8],F?Re(L,v[8],b,Nt):Fe(v[8]),at),ee&&ee.p&&(!F||b&256)&&Ve(ee,U,v,v[8],F?Re(U,v[8],b,yt):Fe(v[8]),nt);const R={};b&256&&(R.$$scope={dirty:b,ctx:v}),g.$set(R);const q={};b&4&&(q.disabled=v[2]),b&258&&(q.$$scope={dirty:b,ctx:v}),O.$set(q)},i(v){F||(T(r.$$.fragment,v),T(P,v),T(W,v),T(g.$$.fragment,v),T(O.$$.fragment,v),F=!0)},o(v){S(r.$$.fragment,v),S(P,v),S(W,v),S(g.$$.fragment,v),S(O.$$.fragment,v),F=!1},d(v){v&&f(e),z(r),P&&P.d(v),W&&W.d(v),z(g),z(O),M=!1,x()}}}function Dt(l){let e,t;return{c(){e=p("h3"),t=D("Title")},l(s){e=_(s,"H3",{});var n=h(e);t=C(n,"Title"),n.forEach(f)},m(s,n){I(s,e,n),i(e,t)},p:we,d(s){s&&f(e)}}}function Ct(l){let e,t;return{c(){e=p("span"),t=D("Content")},l(s){e=_(s,"SPAN",{});var n=h(e);t=C(n,"Content"),n.forEach(f)},m(s,n){I(s,e,n),i(e,t)},p:we,d(s){s&&f(e)}}}function Qt(l){let e;return{c(){e=D("Cancel")},l(t){e=C(t,"Cancel")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Wt(l){let e;return{c(){e=D(l[1])},l(t){e=C(t,l[1])},m(t,s){I(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function Vt(l){let e,t,s=l[0]&&lt(l);return{c(){s&&s.c(),e=De()},l(n){s&&s.l(n),e=De()},m(n,a){s&&s.m(n,a),I(n,e,a),t=!0},p(n,[a]){n[0]?s?(s.p(n,a),a&1&&T(s,1)):(s=lt(n),s.c(),T(s,1),s.m(e.parentNode,e)):s&&(Qe(),S(s,1,1,()=>{s=null}),We())},i(n){t||(T(s),t=!0)},o(n){S(s),t=!1},d(n){s&&s.d(n),n&&f(e)}}}function Ft(l,e,t){let{$$slots:s={},$$scope:n}=e,{open:a=!1}=e,{confirmText:r="Confirm"}=e,{confirmDisabled:u=!1}=e;const o=_t(),c=()=>o("cancelModal",{}),w=()=>o("cancelModal",{}),y=()=>o("confirmModal",{});return l.$$set=k=>{"open"in k&&t(0,a=k.open),"confirmText"in k&&t(1,r=k.confirmText),"confirmDisabled"in k&&t(2,u=k.confirmDisabled),"$$scope"in k&&t(8,n=k.$$scope)},[a,r,u,o,s,c,w,y,n]}class Rt extends $e{constructor(e){super(),ke(this,e,Ft,Vt,ve,{open:0,confirmText:1,confirmDisabled:2})}}function rt(l){let e,t,s,n;return e=new Ce({props:{destroy:!0,$$slots:{default:[Ht]},$$scope:{ctx:l}}}),e.$on("click",l[3]),s=new Rt({props:{open:l[2],confirmText:"Terminate",$$slots:{content:[Ot],title:[Mt]},$$scope:{ctx:l}}}),s.$on("cancelModal",l[4]),s.$on("confirmModal",l[6]),{c(){K(e.$$.fragment),t=E(),K(s.$$.fragment)},l(a){Y(e.$$.fragment,a),t=A(a),Y(s.$$.fragment,a)},m(a,r){X(e,a,r),I(a,t,r),X(s,a,r),n=!0},p(a,r){const u={};r&1024&&(u.$$scope={dirty:r,ctx:a}),e.$set(u);const o={};r&4&&(o.open=a[2]),r&1026&&(o.$$scope={dirty:r,ctx:a}),s.$set(o)},i(a){n||(T(e.$$.fragment,a),T(s.$$.fragment,a),n=!0)},o(a){S(e.$$.fragment,a),S(s.$$.fragment,a),n=!1},d(a){z(e,a),a&&f(t),z(s,a)}}}function Ht(l){let e;return{c(){e=D("Terminate")},l(t){e=C(t,"Terminate")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Mt(l){let e,t;return{c(){e=p("h3"),t=D("Terminate Workflow"),this.h()},l(s){e=_(s,"H3",{slot:!0});var n=h(e);t=C(n,"Terminate Workflow"),n.forEach(f),this.h()},h(){d(e,"slot","title")},m(s,n){I(s,e,n),i(e,t)},p:we,d(s){s&&f(e)}}}function Ot(l){let e,t,s,n,a,r,u;return{c(){e=p("div"),t=p("p"),s=D(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),n=E(),a=p("input"),this.h()},l(o){e=_(o,"DIV",{slot:!0});var c=h(e);t=_(c,"P",{});var w=h(t);s=C(w,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),w.forEach(f),n=A(c),a=_(c,"INPUT",{class:!0,placeholder:!0}),c.forEach(f),this.h()},h(){d(a,"class","block w-full border border-gray-200 rounded-md p-2 mt-4"),d(a,"placeholder","Enter a reason"),d(e,"slot","content")},m(o,c){I(o,e,c),i(e,t),i(t,s),i(e,n),i(e,a),et(a,l[1]),r||(u=it(a,"input",l[8]),r=!0)},p(o,c){c&2&&a.value!==o[1]&&et(a,o[1])},d(o){o&&f(e),r=!1,u()}}}function jt(l){let e=l[5](l[0]),t,s,n=e&&rt(l);return{c(){n&&n.c(),t=De()},l(a){n&&n.l(a),t=De()},m(a,r){n&&n.m(a,r),I(a,t,r),s=!0},p(a,[r]){r&1&&(e=a[5](a[0])),e?n?(n.p(a,r),r&1&&T(n,1)):(n=rt(a),n.c(),T(n,1),n.m(t.parentNode,t)):n&&(Qe(),S(n,1,1,()=>{n=null}),We())},i(a){s||(T(n),s=!0)},o(a){S(n),s=!1},d(a){n&&n.d(a),a&&f(t)}}}function Lt(l,e,t){let{workflow:s}=e,{namespace:n}=e,a="",r=!1;const u=()=>t(2,r=!0),o=()=>t(2,r=!1),c=g=>String(g.status)==="Running",w=()=>{t(2,r=!1),t(1,a=""),At.add("success","Workflow Terminated"),window.location.reload()},y=()=>{St({workflow:s,namespace:n,reason:a}).then(w).catch(ht)};function k(){a=this.value,t(1,a)}return l.$$set=g=>{"workflow"in g&&t(0,s=g.workflow),"namespace"in g&&t(7,n=g.namespace)},[s,a,r,u,o,c,y,n,k]}class Ut extends $e{constructor(e){super(),ke(this,e,Lt,jt,ve,{workflow:0,namespace:7})}}function qt(l){let e,t;return{c(){e=p("span"),t=D("Download"),this.h()},l(s){e=_(s,"SPAN",{class:!0});var n=h(e);t=C(n,"Download"),n.forEach(f),this.h()},h(){d(e,"class","hidden md:inline")},m(s,n){I(s,e,n),i(e,t)},p:we,d(s){s&&f(e)}}}function Bt(l){let e,t;return e=new Ce({props:{secondary:!0,icon:vt,$$slots:{default:[qt]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){K(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,n){X(e,s,n),t=!0},p(s,[n]){const a={};n&32&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Jt(l,e,t){let s;je(l,Le,o=>t(1,s=o));const{workflow:n,run:a,namespace:r}=s.params;return[async()=>{const o=await It({namespace:r,workflowId:n,runId:a}),c=JSON.stringify({events:o},null,2);w(c,`${a}/events.json`,"text/plain");function w(y,k,g){const H=document.createElement("a"),O=new Blob([y],{type:g});H.href=URL.createObjectURL(O),H.download=k,H.click()}}]}class Kt extends $e{constructor(e){super(),ke(this,e,Jt,Bt,ve,{})}}function Yt(l){let e;return{c(){e=D(l[1])},l(t){e=C(t,l[1])},m(t,s){I(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function Xt(l){let e,t,s,n;return{c(){e=D(l[1]),t=E(),s=p("span"),n=D(l[2]),this.h()},l(a){e=C(a,l[1]),t=A(a),s=_(a,"SPAN",{class:!0});var r=h(s);n=C(r,l[2]),r.forEach(f),this.h()},h(){d(s,"class","px-2 text-blue-700 bg-blue-100 rounded-sm")},m(a,r){I(a,e,r),I(a,t,r),I(a,s,r),i(s,n)},p(a,r){r&2&&fe(e,a[1]),r&4&&fe(n,a[2])},d(a){a&&f(e),a&&f(t),a&&f(s)}}}function zt(l){let e;function t(a,r){return a[2]||a[2]===0?Xt:Yt}let s=t(l),n=s(l);return{c(){e=p("a"),n.c(),this.h()},l(a){e=_(a,"A",{class:!0,href:!0});var r=h(e);n.l(r),r.forEach(f),this.h()},h(){d(e,"class","block text-sm md:text-base svelte-sf1jtj"),d(e,"href",l[0]),tt(e,"active",l[3])},m(a,r){I(a,e,r),n.m(e,null)},p(a,[r]){s===(s=t(a))&&n?n.p(a,r):(n.d(1),n=s(a),n&&(n.c(),n.m(e,null))),r&1&&d(e,"href",a[0]),r&8&&tt(e,"active",a[3])},i:we,o:we,d(a){a&&f(e),n.d()}}}function Gt(l,e,t){let s,n;je(l,Le,o=>t(4,n=o));let{href:a}=e,{label:r}=e,{amount:u=null}=e;return l.$$set=o=>{"href"in o&&t(0,a=o.href),"label"in o&&t(1,r=o.label),"amount"in o&&t(2,u=o.amount)},l.$$.update=()=>{l.$$.dirty&17&&t(3,s=n.url.pathname.includes(a))},[a,r,u,s,n]}class Te extends $e{constructor(e){super(),ke(this,e,Gt,zt,ve,{href:0,label:1,amount:2})}}function ot(l){var Ue;let e,t,s,n,a,r=l[1].name+"",u,o,c,w,y,k,g,H=l[1].runId+"",O,F,M,x,L,ae,P,U,ee=Ne(l[1].startTime,"UTC")+"",W,v,b,R,q,ce,G,te=Ne(l[1].endTime,"UTC")+"",ie,Q,le,me,de,he,pe,$,j,B,Z,se,ue,_e,re,ne=l[1].stateTransitionCount+"",J,oe;$=new pt({props:{href:mt(l[4]),$$slots:{default:[Zt]},$$scope:{ctx:l}}});let V=((Ue=l[1])==null?void 0:Ue.parent)&&ft(l);return{c(){e=p("p"),t=p("span"),s=D("Workflow Type:"),n=E(),a=p("span"),u=D(r),o=E(),c=p("p"),w=p("span"),y=D("Run ID:"),k=E(),g=p("span"),O=D(H),F=E(),M=p("div"),x=p("p"),L=p("span"),ae=D("Start Time:"),P=E(),U=p("span"),W=D(ee),v=E(),b=p("p"),R=p("span"),q=D("Closed Time:"),ce=E(),G=p("span"),ie=D(te),Q=E(),le=p("p"),me=p("span"),de=D("Task Queue:"),he=E(),pe=p("span"),K($.$$.fragment),j=E(),V&&V.c(),B=E(),Z=p("p"),se=p("span"),ue=D("State Transitions:"),_e=E(),re=p("span"),J=D(ne),this.h()},l(m){e=_(m,"P",{class:!0});var N=h(e);t=_(N,"SPAN",{class:!0});var ge=h(t);s=C(ge,"Workflow Type:"),ge.forEach(f),n=A(N),a=_(N,"SPAN",{class:!0});var be=h(a);u=C(be,r),be.forEach(f),N.forEach(f),o=A(m),c=_(m,"P",{class:!0});var Ee=h(c);w=_(Ee,"SPAN",{class:!0});var qe=h(w);y=C(qe,"Run ID:"),qe.forEach(f),k=A(Ee),g=_(Ee,"SPAN",{class:!0});var Be=h(g);O=C(Be,H),Be.forEach(f),Ee.forEach(f),F=A(m),M=_(m,"DIV",{class:!0});var Ae=h(M);x=_(Ae,"P",{});var Ie=h(x);L=_(Ie,"SPAN",{class:!0});var Je=h(L);ae=C(Je,"Start Time:"),Je.forEach(f),P=A(Ie),U=_(Ie,"SPAN",{class:!0});var Ke=h(U);W=C(Ke,ee),Ke.forEach(f),Ie.forEach(f),v=A(Ae),b=_(Ae,"P",{});var Pe=h(b);R=_(Pe,"SPAN",{class:!0});var Ye=h(R);q=C(Ye,"Closed Time:"),Ye.forEach(f),ce=A(Pe),G=_(Pe,"SPAN",{class:!0});var Xe=h(G);ie=C(Xe,te),Xe.forEach(f),Pe.forEach(f),Ae.forEach(f),Q=A(m),le=_(m,"P",{class:!0});var Se=h(le);me=_(Se,"SPAN",{class:!0});var ze=h(me);de=C(ze,"Task Queue:"),ze.forEach(f),he=A(Se),pe=_(Se,"SPAN",{class:!0});var Ge=h(pe);Y($.$$.fragment,Ge),Ge.forEach(f),Se.forEach(f),j=A(m),V&&V.l(m),B=A(m),Z=_(m,"P",{class:!0});var ye=h(Z);se=_(ye,"SPAN",{class:!0});var Ze=h(se);ue=C(Ze,"State Transitions:"),Ze.forEach(f),_e=A(ye),re=_(ye,"SPAN",{class:!0});var xe=h(re);J=C(xe,ne),xe.forEach(f),ye.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(a,"class","ml-1"),d(e,"class","text-md"),d(w,"class","font-medium"),d(g,"class","ml-1"),d(c,"class","text-md"),d(L,"class","font-medium"),d(U,"class","ml-1"),d(R,"class","font-medium"),d(G,"class","ml-1"),d(M,"class","text-md md:flex gap-6"),d(me,"class","font-medium"),d(pe,"class","ml-1"),d(le,"class","text-md"),d(se,"class","font-medium"),d(re,"class","ml-1"),d(Z,"class","text-md")},m(m,N){I(m,e,N),i(e,t),i(t,s),i(e,n),i(e,a),i(a,u),I(m,o,N),I(m,c,N),i(c,w),i(w,y),i(c,k),i(c,g),i(g,O),I(m,F,N),I(m,M,N),i(M,x),i(x,L),i(L,ae),i(x,P),i(x,U),i(U,W),i(M,v),i(M,b),i(b,R),i(R,q),i(b,ce),i(b,G),i(G,ie),I(m,Q,N),I(m,le,N),i(le,me),i(me,de),i(le,he),i(le,pe),X($,pe,null),I(m,j,N),V&&V.m(m,N),I(m,B,N),I(m,Z,N),i(Z,se),i(se,ue),i(Z,_e),i(Z,re),i(re,J),oe=!0},p(m,N){var be;(!oe||N&2)&&r!==(r=m[1].name+"")&&fe(u,r),(!oe||N&2)&&H!==(H=m[1].runId+"")&&fe(O,H),(!oe||N&2)&&ee!==(ee=Ne(m[1].startTime,"UTC")+"")&&fe(W,ee),(!oe||N&2)&&te!==(te=Ne(m[1].endTime,"UTC")+"")&&fe(ie,te);const ge={};N&66&&(ge.$$scope={dirty:N,ctx:m}),$.$set(ge),(be=m[1])!=null&&be.parent?V?(V.p(m,N),N&2&&T(V,1)):(V=ft(m),V.c(),T(V,1),V.m(B.parentNode,B)):V&&(Qe(),S(V,1,1,()=>{V=null}),We()),(!oe||N&2)&&ne!==(ne=m[1].stateTransitionCount+"")&&fe(J,ne)},i(m){oe||(T($.$$.fragment,m),T(V),oe=!0)},o(m){S($.$$.fragment,m),S(V),oe=!1},d(m){m&&f(e),m&&f(o),m&&f(c),m&&f(F),m&&f(M),m&&f(Q),m&&f(le),z($),m&&f(j),V&&V.d(m),m&&f(B),m&&f(Z)}}}function Zt(l){let e=l[1].taskQueue+"",t;return{c(){t=D(e)},l(s){t=C(s,e)},m(s,n){I(s,t,n)},p(s,n){n&2&&e!==(e=s[1].taskQueue+"")&&fe(t,e)},d(s){s&&f(t)}}}function ft(l){var o,c;let e,t,s,n,a,r,u;return r=new pt({props:{href:st({namespace:l[0],workflow:(o=l[1].parent)==null?void 0:o.workflowId,run:(c=l[1].parent)==null?void 0:c.runId}),$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){e=p("p"),t=p("span"),s=D("Parent:"),n=E(),a=p("span"),K(r.$$.fragment),this.h()},l(w){e=_(w,"P",{class:!0});var y=h(e);t=_(y,"SPAN",{class:!0});var k=h(t);s=C(k,"Parent:"),k.forEach(f),n=A(y),a=_(y,"SPAN",{class:!0});var g=h(a);Y(r.$$.fragment,g),g.forEach(f),y.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(a,"class","ml-1"),d(e,"class","text-md")},m(w,y){I(w,e,y),i(e,t),i(t,s),i(e,n),i(e,a),X(r,a,null),u=!0},p(w,y){var g,H;const k={};y&3&&(k.href=st({namespace:w[0],workflow:(g=w[1].parent)==null?void 0:g.workflowId,run:(H=w[1].parent)==null?void 0:H.runId})),y&66&&(k.$$scope={dirty:y,ctx:w}),r.$set(k)},i(w){u||(T(r.$$.fragment,w),u=!0)},o(w){S(r.$$.fragment,w),u=!1},d(w){w&&f(e),z(r)}}}function xt(l){var s;let e=((s=l[1].parent)==null?void 0:s.workflowId)+"",t;return{c(){t=D(e)},l(n){t=C(n,e)},m(n,a){I(n,t,a)},p(n,a){var r;a&2&&e!==(e=((r=n[1].parent)==null?void 0:r.workflowId)+"")&&fe(t,e)},d(n){n&&f(t)}}}function es(l){var le,me,de,he,pe;let e,t,s,n,a,r,u,o,c,w,y,k,g=l[1].id+"",H,O,F,M,x,L,ae,P,U,ee,W,v,b,R,q,ce,G,te,ie;n=new ut({props:{icon:gt}}),w=new wt({props:{status:(le=l[1])==null?void 0:le.status,delay:0}}),M=new Kt({}),L=new Ut({props:{workflow:l[1],namespace:l[0]}}),U=new Te({props:{label:"History",href:ct(l[4]),amount:(me=l[1])==null?void 0:me.historyEvents}}),W=new Te({props:{label:"Workers",href:mt(l[4]),amount:(he=(de=l[2])==null?void 0:de.pollers)==null?void 0:he.length}}),b=new Te({props:{label:"Pending Activities",href:bt(l[4]),amount:(pe=l[1].pendingActivities)==null?void 0:pe.length}}),q=new Te({props:{label:"Stack Trace",href:Tt(l[4])}}),G=new Te({props:{label:"Queries",href:Et(l[4])}});let Q=l[3]&&ot(l);return{c(){e=p("header"),t=p("main"),s=p("a"),K(n.$$.fragment),r=E(),u=p("div"),o=p("h1"),c=p("span"),K(w.$$.fragment),y=E(),k=p("span"),H=D(g),O=E(),F=p("div"),K(M.$$.fragment),x=E(),K(L.$$.fragment),ae=E(),P=p("nav"),K(U.$$.fragment),ee=E(),K(W.$$.fragment),v=E(),K(b.$$.fragment),R=E(),K(q.$$.fragment),ce=E(),K(G.$$.fragment),te=E(),Q&&Q.c(),this.h()},l($){e=_($,"HEADER",{class:!0});var j=h(e);t=_(j,"MAIN",{class:!0});var B=h(t);s=_(B,"A",{href:!0,class:!0,style:!0});var Z=h(s);Y(n.$$.fragment,Z),Z.forEach(f),r=A(B),u=_(B,"DIV",{class:!0});var se=h(u);o=_(se,"H1",{class:!0});var ue=h(o);c=_(ue,"SPAN",{class:!0});var _e=h(c);Y(w.$$.fragment,_e),_e.forEach(f),y=A(ue),k=_(ue,"SPAN",{class:!0});var re=h(k);H=C(re,g),re.forEach(f),ue.forEach(f),O=A(se),F=_(se,"DIV",{class:!0});var ne=h(F);Y(M.$$.fragment,ne),x=A(ne),Y(L.$$.fragment,ne),ne.forEach(f),se.forEach(f),ae=A(B),P=_(B,"NAV",{class:!0});var J=h(P);Y(U.$$.fragment,J),ee=A(J),Y(W.$$.fragment,J),v=A(J),Y(b.$$.fragment,J),R=A(J),Y(q.$$.fragment,J),ce=A(J),Y(G.$$.fragment,J),J.forEach(f),te=A(B),Q&&Q.l(B),B.forEach(f),j.forEach(f),this.h()},h(){d(s,"href",a="/namespaces/"+l[0]+"/workflows"),d(s,"class","absolute top-2 back-to-workflows"),dt(s,"left","-1.5rem"),d(c,"class","mr-2"),d(k,"class","font-medium break-all"),d(o,"class","text-base w-auto md:text-2xl md:flex relative items-center"),d(F,"class","ml-8 flex justify-end items-center gap-4"),d(u,"class","flex justify-between items-start mb-8"),d(P,"class","flex gap-6 mb-6"),d(t,"class","flex flex-col gap-1 relative"),d(e,"class","flex flex-col gap-4")},m($,j){I($,e,j),i(e,t),i(t,s),X(n,s,null),i(t,r),i(t,u),i(u,o),i(o,c),X(w,c,null),i(o,y),i(o,k),i(k,H),i(u,O),i(u,F),X(M,F,null),i(F,x),X(L,F,null),i(t,ae),i(t,P),X(U,P,null),i(P,ee),X(W,P,null),i(P,v),X(b,P,null),i(P,R),X(q,P,null),i(P,ce),X(G,P,null),i(t,te),Q&&Q.m(t,null),ie=!0},p($,[j]){var re,ne,J,oe,V;(!ie||j&1&&a!==(a="/namespaces/"+$[0]+"/workflows"))&&d(s,"href",a);const B={};j&2&&(B.status=(re=$[1])==null?void 0:re.status),w.$set(B),(!ie||j&2)&&g!==(g=$[1].id+"")&&fe(H,g);const Z={};j&2&&(Z.workflow=$[1]),j&1&&(Z.namespace=$[0]),L.$set(Z);const se={};j&2&&(se.amount=(ne=$[1])==null?void 0:ne.historyEvents),U.$set(se);const ue={};j&4&&(ue.amount=(oe=(J=$[2])==null?void 0:J.pollers)==null?void 0:oe.length),W.$set(ue);const _e={};j&2&&(_e.amount=(V=$[1].pendingActivities)==null?void 0:V.length),b.$set(_e),$[3]?Q?(Q.p($,j),j&8&&T(Q,1)):(Q=ot($),Q.c(),T(Q,1),Q.m(t,null)):Q&&(Qe(),S(Q,1,1,()=>{Q=null}),We())},i($){ie||(T(n.$$.fragment,$),T(w.$$.fragment,$),T(M.$$.fragment,$),T(L.$$.fragment,$),T(U.$$.fragment,$),T(W.$$.fragment,$),T(b.$$.fragment,$),T(q.$$.fragment,$),T(G.$$.fragment,$),T(Q),ie=!0)},o($){S(n.$$.fragment,$),S(w.$$.fragment,$),S(M.$$.fragment,$),S(L.$$.fragment,$),S(U.$$.fragment,$),S(W.$$.fragment,$),S(b.$$.fragment,$),S(q.$$.fragment,$),S(G.$$.fragment,$),S(Q),ie=!1},d($){$&&f(e),z(n),z(w),z(M),z(L),z(U),z(W),z(b),z(q),z(G),Q&&Q.d()}}}function ts(l,e,t){let s,n;je(l,Le,c=>t(5,n=c));let{namespace:a}=e,{workflow:r}=e,{workers:u}=e;const o={namespace:a,workflow:r.id,run:r.runId};return l.$$set=c=>{"namespace"in c&&t(0,a=c.namespace),"workflow"in c&&t(1,r=c.workflow),"workers"in c&&t(2,u=c.workers)},l.$$.update=()=>{l.$$.dirty&32&&t(3,s=n.url.pathname.includes(ct(o)))},[a,r,u,s,o,n]}class ss extends $e{constructor(e){super(),ke(this,e,ts,es,ve,{namespace:0,workflow:1,workers:2})}}function ns(l){let e,t,s,n;t=new ss({props:{namespace:l[1],workflow:l[0],workers:l[2]}});const a=l[4].default,r=He(a,l,l[3],null);return{c(){e=p("main"),K(t.$$.fragment),s=E(),r&&r.c(),this.h()},l(u){e=_(u,"MAIN",{class:!0});var o=h(e);Y(t.$$.fragment,o),s=A(o),r&&r.l(o),o.forEach(f),this.h()},h(){d(e,"class","flex flex-col gap-6 h-full")},m(u,o){I(u,e,o),X(t,e,null),i(e,s),r&&r.m(e,null),n=!0},p(u,[o]){const c={};o&2&&(c.namespace=u[1]),o&1&&(c.workflow=u[0]),o&4&&(c.workers=u[2]),t.$set(c),r&&r.p&&(!n||o&8)&&Ve(r,a,u,u[3],n?Re(a,u[3],o,null):Fe(u[3]),null)},i(u){n||(T(t.$$.fragment,u),T(r,u),n=!0)},o(u){S(t.$$.fragment,u),S(r,u),n=!1},d(u){u&&f(e),z(t),r&&r.d(u)}}}const Ps=async function({params:l,fetch:e}){const{workflow:t,run:s,namespace:n}=l,a={namespace:n,workflowId:decodeURIComponent(t),runId:s},r=await $t(a,e),{taskQueue:u}=r,o=await Pt({queue:u,namespace:n});return{props:{workflow:r,namespace:n,workers:o},stuff:{workflow:r,workers:o}}};function as(l,e,t){let{$$slots:s={},$$scope:n}=e,{workflow:a}=e,{namespace:r}=e,{workers:u}=e;return l.$$set=o=>{"workflow"in o&&t(0,a=o.workflow),"namespace"in o&&t(1,r=o.namespace),"workers"in o&&t(2,u=o.workers),"$$scope"in o&&t(3,n=o.$$scope)},[a,r,u,n,s]}class Ss extends $e{constructor(e){super(),ke(this,e,as,ns,ve,{workflow:0,namespace:1,workers:2})}}export{Ss as default,Ps as load};
