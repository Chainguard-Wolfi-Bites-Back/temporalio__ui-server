import{S as O,i as j,s as A,e as k,c as d,a as h,d as m,g,o as b,p as F,q as $,n as H,w as C,x as q,y as x,E,B as D,aq as B,l as N,ar as M,k as R,t as S,m as I,h as T,b as L,M as _,j as W}from"../../../../../../chunks/index-6f949d33.js";import{x as z}from"../../../../../../chunks/index.es-2106a8ff.js";import{b as P}from"../../../../../../chunks/query-service-6ed394c5.js";import{C as G}from"../../../../../../chunks/code-block-bab2ec39.js";import{B as J}from"../../../../../../chunks/button-932377c6.js";import{E as V}from"../../../../../../chunks/empty-state-aa8c1a48.js";import"../../../../../../chunks/route-for-api-35afd266.js";import"../../../../../../chunks/index-8e6fc7ce.js";import"../../../../../../chunks/notifications-8df92a3f.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/route-for-9a2d1abe.js";import"../../../../../../chunks/atob-eb4fc9a1.js";function K(c){let e,t;return e=new V({props:{title:"No Stack Traces Found",dataCy:"query-stack-trace-empty"}}),{c(){C(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p:E,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Q(c){let e,t,n,r={ctx:c,current:null,token:null,hasCatch:!0,pending:Z,then:X,catch:U,value:6,error:7,blocks:[,,,]};return B(t=c[2],r),{c(){e=N(),r.block.c()},l(l){e=N(),r.block.l(l)},m(l,a){g(l,e,a),r.block.m(l,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,a){c=l,r.ctx=c,a&4&&t!==(t=c[2])&&B(t,r)||M(r,c,a)},i(l){n||($(r.block),n=!0)},o(l){for(let a=0;a<3;a+=1){const f=r.blocks[a];b(f)}n=!1},d(l){l&&m(e),r.block.d(l),r.token=null,r=null}}}function U(c){let e,t;return e=new V({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){C(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p:E,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function X(c){let e,t,n,r,l,a=c[1].toLocaleTimeString()+"",f,o,s,u,v;return t=new J({props:{icon:z,loading:te,$$slots:{default:[Y]},$$scope:{ctx:c}}}),t.$on("click",c[3]),u=new G({props:{content:c[6],language:"text",dataCy:"query-stack-trace"}}),{c(){e=k("div"),C(t.$$.fragment),n=R(),r=k("p"),l=S("Stack Trace at "),f=S(a),o=R(),s=k("div"),C(u.$$.fragment),this.h()},l(i){e=d(i,"DIV",{class:!0});var p=h(e);q(t.$$.fragment,p),n=I(p),r=d(p,"P",{});var w=h(r);l=T(w,"Stack Trace at "),f=T(w,a),w.forEach(m),p.forEach(m),o=I(i),s=d(i,"DIV",{class:!0});var y=h(s);q(u.$$.fragment,y),y.forEach(m),this.h()},h(){L(e,"class","flex items-center gap-4"),L(s,"class","flex items-start h-full")},m(i,p){g(i,e,p),x(t,e,null),_(e,n),_(e,r),_(r,l),_(r,f),g(i,o,p),g(i,s,p),x(u,s,null),v=!0},p(i,p){const w={};p&256&&(w.$$scope={dirty:p,ctx:i}),t.$set(w),(!v||p&2)&&a!==(a=i[1].toLocaleTimeString()+"")&&W(f,a);const y={};p&4&&(y.content=i[6]),u.$set(y)},i(i){v||($(t.$$.fragment,i),$(u.$$.fragment,i),v=!0)},o(i){b(t.$$.fragment,i),b(u.$$.fragment,i),v=!1},d(i){i&&m(e),D(t),i&&m(o),i&&m(s),D(u)}}}function Y(c){let e;return{c(){e=S("Refresh")},l(t){e=T(t,"Refresh")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Z(c){let e,t,n,r,l,a;return{c(){e=k("div"),t=k("h2"),n=S("Loading\u2026"),r=R(),l=k("p"),a=S("(This will fail if you have no workers running.)"),this.h()},l(f){e=d(f,"DIV",{class:!0});var o=h(e);t=d(o,"H2",{class:!0});var s=h(t);n=T(s,"Loading\u2026"),s.forEach(m),r=I(o),l=d(o,"P",{});var u=h(l);a=T(u,"(This will fail if you have no workers running.)"),u.forEach(m),o.forEach(m),this.h()},h(){L(t,"class","font-bold text-2xl mb-4"),L(e,"class","text-center")},m(f,o){g(f,e,o),_(e,t),_(t,n),_(e,r),_(e,l),_(l,a)},p:E,i:E,o:E,d(f){f&&m(e)}}}function ee(c){let e,t,n,r;const l=[Q,K],a=[];function f(o,s){return o[0].isRunning?0:1}return t=f(c),n=a[t]=l[t](c),{c(){e=k("section"),n.c()},l(o){e=d(o,"SECTION",{});var s=h(e);n.l(s),s.forEach(m)},m(o,s){g(o,e,s),a[t].m(e,null),r=!0},p(o,[s]){let u=t;t=f(o),t===u?a[t].p(o,s):(H(),b(a[u],1,1,()=>{a[u]=null}),F(),n=a[t],n?n.p(o,s):(n=a[t]=l[t](o),n.c()),$(n,1),n.m(e,null))},i(o){r||($(n),r=!0)},o(o){b(n),r=!1},d(o){o&&m(e),a[t].d()}}}const ke=async function({params:c,stuff:e}){const{namespace:t}=c,{workflow:n}=e;return{props:{workflow:n,namespace:t}}};let te=!1;function ne(c,e,t){let{namespace:n}=e,{workflow:r}=e,l=new Date;const a=()=>P({workflow:r,namespace:n});let f;const o=()=>{t(2,f=P({workflow:r,namespace:n})),f.then(()=>{t(1,l=new Date)})};return c.$$set=s=>{"namespace"in s&&t(4,n=s.namespace),"workflow"in s&&t(0,r=s.workflow)},c.$$.update=()=>{c.$$.dirty&1&&r.isRunning&&t(2,f=a())},[r,l,f,o,n]}class de extends O{constructor(e){super(),j(this,e,ne,ee,A,{namespace:4,workflow:0})}}export{de as default,ke as load};
