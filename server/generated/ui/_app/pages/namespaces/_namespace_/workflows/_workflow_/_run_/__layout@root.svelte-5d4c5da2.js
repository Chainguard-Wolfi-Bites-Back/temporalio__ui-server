import{S as we,i as $e,s as ke,e as p,k as T,w as B,c as _,a as h,d as f,m as E,x as J,b as d,g as I,M as i,y as K,N as it,J as Ve,K as Fe,L as Re,q as b,o as P,B as Y,l as De,n as Qe,p as We,P as _t,I as je,t as D,h as C,E as Te,j as fe,ae as et,O as Oe,Y as tt,f as dt}from"../../../../../../chunks/index-f021a159.js";import{r as He,a as Me,h as ht}from"../../../../../../chunks/route-for-api-6b3e07f0.js";import{W as wt,f as $t}from"../../../../../../chunks/workflow-status-4c9ef840.js";import{F as ut,i as kt,j as vt,k as gt}from"../../../../../../chunks/index.es-3049caa8.js";import{p as Le}from"../../../../../../chunks/stores-2e95f632.js";import{d as ct,e as mt,f as bt,g as Tt,h as Et,i as st}from"../../../../../../chunks/route-for-d606e623.js";import{f as Ne}from"../../../../../../chunks/format-date-9c6bdeb9.js";import{L as pt}from"../../../../../../chunks/link-f8fe0e86.js";import{n as It}from"../../../../../../chunks/notifications-0558c095.js";import{B as Ce}from"../../../../../../chunks/button-123e362f.js";import{f as At}from"../../../../../../chunks/events-service-ee48cb4b.js";import"../../../../../../chunks/navigation-3f1ea447.js";import"../../../../../../chunks/singletons-d1fb5791.js";import"../../../../../../chunks/index-cfbcd7ef.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/simplify-attributes-d6dbb827.js";import"../../../../../../chunks/index-6b999126.js";import"../../../../../../chunks/data-converter-config-fb2097df.js";import"../../../../../../chunks/persist-store-210df7c0.js";import"../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../chunks/index-a8ee0a5c.js";import"../../../../../../chunks/get-event-categorization-b2bce139.js";async function Pt(l,e=fetch){const t=await He(Me("task-queue",l),{request:e,params:{taskQueueType:"1"}}),s=await He(Me("task-queue",l),{request:e,params:{taskQueueType:"2"}});s.pollers.forEach(n=>{n.taskQueueTypes=["ACTIVITY"]}),t.pollers.forEach(n=>{n.taskQueueTypes=["WORKFLOW"]});const a=n=>(r,u)=>{const o=r[u.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return r[u.identity]={lastAccessTime:!o.lastAccessTime||o.lastAccessTime<u.lastAccessTime?u.lastAccessTime:o.lastAccessTime,taskQueueTypes:o.taskQueueTypes.concat([n])},r};return s.pollers.filter(n=>t.pollers.some(r=>{if(n.identity===r.identity)return n.taskQueueTypes=[...r.taskQueueTypes,...n.taskQueueTypes],n})),s.pollers.reduce(a("ACTIVITY"),t.pollers.reduce(a("WORKFLOW"),{})),{pollers:s.pollers,taskQueueStatus:s.taskQueueStatus}}async function St({workflow:l,namespace:e,reason:t}){return await He(Me("workflow.terminate",{namespace:e,workflowId:l.id,runId:l.runId}),{options:{method:"POST",body:JSON.stringify({reason:t})},shouldRetry:!1})}const yt=l=>({}),nt=l=>({}),Nt=l=>({}),at=l=>({});function lt(l){let e,t,s,a,n,r,u,o,c,k,A,g,v,H,Q,j,z,L;r=new ut({props:{icon:kt}});const x=l[4].title,F=je(x,l,l[8],at),R=F||Dt(),ee=l[4].content,U=je(ee,l,l[8],nt),q=U||Ct();return v=new Ce({props:{secondary:!0,$$slots:{default:[Qt]},$$scope:{ctx:l}}}),v.$on("click",l[6]),Q=new Ce({props:{destroy:!0,disabled:l[2],$$slots:{default:[Wt]},$$scope:{ctx:l}}}),Q.$on("click",l[7]),{c(){e=p("div"),t=p("div"),s=T(),a=p("div"),n=p("div"),B(r.$$.fragment),u=T(),o=p("div"),R&&R.c(),c=T(),k=p("div"),q&&q.c(),A=T(),g=p("div"),B(v.$$.fragment),H=T(),B(Q.$$.fragment),this.h()},l(w){e=_(w,"DIV",{class:!0});var S=h(e);t=_(S,"DIV",{class:!0}),h(t).forEach(f),s=E(S),a=_(S,"DIV",{class:!0});var y=h(a);n=_(y,"DIV",{class:!0});var te=h(n);J(r.$$.fragment,te),te.forEach(f),u=E(y),o=_(y,"DIV",{class:!0});var se=h(o);R&&R.l(se),se.forEach(f),c=E(y),k=_(y,"DIV",{class:!0});var ae=h(k);q&&q.l(ae),ae.forEach(f),A=E(y),g=_(y,"DIV",{class:!0});var G=h(g);J(v.$$.fragment,G),H=E(G),J(Q.$$.fragment,G),G.forEach(f),y.forEach(f),S.forEach(f),this.h()},h(){d(t,"class","overlay svelte-p12tlm"),d(n,"class","float-right cursor-pointer p-6"),d(o,"class","title svelte-p12tlm"),d(k,"class","content svelte-p12tlm"),d(g,"class","flex justify-end items-center p-6 space-x-2"),d(a,"class","body svelte-p12tlm"),d(e,"class","modal svelte-p12tlm")},m(w,S){I(w,e,S),i(e,t),i(e,s),i(e,a),i(a,n),K(r,n,null),i(a,u),i(a,o),R&&R.m(o,null),i(a,c),i(a,k),q&&q.m(k,null),i(a,A),i(a,g),K(v,g,null),i(g,H),K(Q,g,null),j=!0,z||(L=it(n,"click",l[5]),z=!0)},p(w,S){F&&F.p&&(!j||S&256)&&Ve(F,x,w,w[8],j?Re(x,w[8],S,Nt):Fe(w[8]),at),U&&U.p&&(!j||S&256)&&Ve(U,ee,w,w[8],j?Re(ee,w[8],S,yt):Fe(w[8]),nt);const y={};S&256&&(y.$$scope={dirty:S,ctx:w}),v.$set(y);const te={};S&4&&(te.disabled=w[2]),S&258&&(te.$$scope={dirty:S,ctx:w}),Q.$set(te)},i(w){j||(b(r.$$.fragment,w),b(R,w),b(q,w),b(v.$$.fragment,w),b(Q.$$.fragment,w),j=!0)},o(w){P(r.$$.fragment,w),P(R,w),P(q,w),P(v.$$.fragment,w),P(Q.$$.fragment,w),j=!1},d(w){w&&f(e),Y(r),R&&R.d(w),q&&q.d(w),Y(v),Y(Q),z=!1,L()}}}function Dt(l){let e,t;return{c(){e=p("h3"),t=D("Title")},l(s){e=_(s,"H3",{});var a=h(e);t=C(a,"Title"),a.forEach(f)},m(s,a){I(s,e,a),i(e,t)},p:Te,d(s){s&&f(e)}}}function Ct(l){let e,t;return{c(){e=p("span"),t=D("Content")},l(s){e=_(s,"SPAN",{});var a=h(e);t=C(a,"Content"),a.forEach(f)},m(s,a){I(s,e,a),i(e,t)},p:Te,d(s){s&&f(e)}}}function Qt(l){let e;return{c(){e=D("Cancel")},l(t){e=C(t,"Cancel")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Wt(l){let e;return{c(){e=D(l[1])},l(t){e=C(t,l[1])},m(t,s){I(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function Vt(l){let e,t,s=l[0]&&lt(l);return{c(){s&&s.c(),e=De()},l(a){s&&s.l(a),e=De()},m(a,n){s&&s.m(a,n),I(a,e,n),t=!0},p(a,[n]){a[0]?s?(s.p(a,n),n&1&&b(s,1)):(s=lt(a),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(Qe(),P(s,1,1,()=>{s=null}),We())},i(a){t||(b(s),t=!0)},o(a){P(s),t=!1},d(a){s&&s.d(a),a&&f(e)}}}function Ft(l,e,t){let{$$slots:s={},$$scope:a}=e,{open:n=!1}=e,{confirmText:r="Confirm"}=e,{confirmDisabled:u=!1}=e;const o=_t(),c=()=>o("cancelModal",{}),k=()=>o("cancelModal",{}),A=()=>o("confirmModal",{});return l.$$set=g=>{"open"in g&&t(0,n=g.open),"confirmText"in g&&t(1,r=g.confirmText),"confirmDisabled"in g&&t(2,u=g.confirmDisabled),"$$scope"in g&&t(8,a=g.$$scope)},[n,r,u,o,s,c,k,A,a]}class Rt extends we{constructor(e){super(),$e(this,e,Ft,Vt,ke,{open:0,confirmText:1,confirmDisabled:2})}}function rt(l){let e,t,s,a;return e=new Ce({props:{destroy:!0,thin:!0,$$slots:{default:[jt]},$$scope:{ctx:l}}}),e.$on("click",l[3]),s=new Rt({props:{open:l[2],confirmText:"Terminate",$$slots:{content:[Mt],title:[Ht]},$$scope:{ctx:l}}}),s.$on("cancelModal",l[4]),s.$on("confirmModal",l[6]),{c(){B(e.$$.fragment),t=T(),B(s.$$.fragment)},l(n){J(e.$$.fragment,n),t=E(n),J(s.$$.fragment,n)},m(n,r){K(e,n,r),I(n,t,r),K(s,n,r),a=!0},p(n,r){const u={};r&1024&&(u.$$scope={dirty:r,ctx:n}),e.$set(u);const o={};r&4&&(o.open=n[2]),r&1026&&(o.$$scope={dirty:r,ctx:n}),s.$set(o)},i(n){a||(b(e.$$.fragment,n),b(s.$$.fragment,n),a=!0)},o(n){P(e.$$.fragment,n),P(s.$$.fragment,n),a=!1},d(n){Y(e,n),n&&f(t),Y(s,n)}}}function jt(l){let e;return{c(){e=D("Terminate")},l(t){e=C(t,"Terminate")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Ht(l){let e,t;return{c(){e=p("h3"),t=D("Terminate Workflow"),this.h()},l(s){e=_(s,"H3",{slot:!0});var a=h(e);t=C(a,"Terminate Workflow"),a.forEach(f),this.h()},h(){d(e,"slot","title")},m(s,a){I(s,e,a),i(e,t)},p:Te,d(s){s&&f(e)}}}function Mt(l){let e,t,s,a,n,r,u;return{c(){e=p("div"),t=p("p"),s=D(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=T(),n=p("input"),this.h()},l(o){e=_(o,"DIV",{slot:!0});var c=h(e);t=_(c,"P",{});var k=h(t);s=C(k,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),k.forEach(f),a=E(c),n=_(c,"INPUT",{class:!0,placeholder:!0}),c.forEach(f),this.h()},h(){d(n,"class","block w-full border border-gray-200 rounded-md p-2 mt-4"),d(n,"placeholder","Enter a reason"),d(e,"slot","content")},m(o,c){I(o,e,c),i(e,t),i(t,s),i(e,a),i(e,n),et(n,l[1]),r||(u=it(n,"input",l[8]),r=!0)},p(o,c){c&2&&n.value!==o[1]&&et(n,o[1])},d(o){o&&f(e),r=!1,u()}}}function Ot(l){let e=l[5](l[0]),t,s,a=e&&rt(l);return{c(){a&&a.c(),t=De()},l(n){a&&a.l(n),t=De()},m(n,r){a&&a.m(n,r),I(n,t,r),s=!0},p(n,[r]){r&1&&(e=n[5](n[0])),e?a?(a.p(n,r),r&1&&b(a,1)):(a=rt(n),a.c(),b(a,1),a.m(t.parentNode,t)):a&&(Qe(),P(a,1,1,()=>{a=null}),We())},i(n){s||(b(a),s=!0)},o(n){P(a),s=!1},d(n){a&&a.d(n),n&&f(t)}}}function Lt(l,e,t){let{workflow:s}=e,{namespace:a}=e,n="",r=!1;const u=()=>t(2,r=!0),o=()=>t(2,r=!1),c=v=>String(v.status)==="Running",k=()=>{t(2,r=!1),t(1,n=""),It.add("success","Workflow Terminated"),window.location.reload()},A=()=>{St({workflow:s,namespace:a,reason:n}).then(k).catch(ht)};function g(){n=this.value,t(1,n)}return l.$$set=v=>{"workflow"in v&&t(0,s=v.workflow),"namespace"in v&&t(7,a=v.namespace)},[s,n,r,u,o,c,A,a,g]}class Ut extends we{constructor(e){super(),$e(this,e,Lt,Ot,ke,{workflow:0,namespace:7})}}function qt(l){let e;return{c(){e=D("Download")},l(t){e=C(t,"Download")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Bt(l){let e,t;return e=new Ce({props:{thin:!0,secondary:!0,icon:vt,$$slots:{default:[qt]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){B(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,a){K(e,s,a),t=!0},p(s,[a]){const n={};a&32&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Jt(l,e,t){let s;Oe(l,Le,o=>t(1,s=o));const{workflow:a,run:n,namespace:r}=s.params;return[async()=>{const o=await At({namespace:r,workflowId:a,runId:n}),c=JSON.stringify({events:o},null,2);k(c,`${n}/events.json`,"text/plain");function k(A,g,v){const H=document.createElement("a"),Q=new Blob([A],{type:v});H.href=URL.createObjectURL(Q),H.download=g,H.click()}}]}class Kt extends we{constructor(e){super(),$e(this,e,Jt,Bt,ke,{})}}function Yt(l){let e;return{c(){e=D(l[1])},l(t){e=C(t,l[1])},m(t,s){I(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function zt(l){let e,t,s,a;return{c(){e=D(l[1]),t=T(),s=p("span"),a=D(l[2]),this.h()},l(n){e=C(n,l[1]),t=E(n),s=_(n,"SPAN",{class:!0});var r=h(s);a=C(r,l[2]),r.forEach(f),this.h()},h(){d(s,"class","px-2 text-blue-700 bg-blue-100 rounded-sm")},m(n,r){I(n,e,r),I(n,t,r),I(n,s,r),i(s,a)},p(n,r){r&2&&fe(e,n[1]),r&4&&fe(a,n[2])},d(n){n&&f(e),n&&f(t),n&&f(s)}}}function Gt(l){let e;function t(n,r){return n[2]||n[2]===0?zt:Yt}let s=t(l),a=s(l);return{c(){e=p("a"),a.c(),this.h()},l(n){e=_(n,"A",{class:!0,href:!0});var r=h(e);a.l(r),r.forEach(f),this.h()},h(){d(e,"class","block svelte-sf1jtj"),d(e,"href",l[0]),tt(e,"active",l[3])},m(n,r){I(n,e,r),a.m(e,null)},p(n,[r]){s===(s=t(n))&&a?a.p(n,r):(a.d(1),a=s(n),a&&(a.c(),a.m(e,null))),r&1&&d(e,"href",n[0]),r&8&&tt(e,"active",n[3])},i:Te,o:Te,d(n){n&&f(e),a.d()}}}function Xt(l,e,t){let s,a;Oe(l,Le,o=>t(4,a=o));let{href:n}=e,{label:r}=e,{amount:u=null}=e;return l.$$set=o=>{"href"in o&&t(0,n=o.href),"label"in o&&t(1,r=o.label),"amount"in o&&t(2,u=o.amount)},l.$$.update=()=>{l.$$.dirty&17&&t(3,s=a.url.pathname.includes(n))},[n,r,u,s,a]}class be extends we{constructor(e){super(),$e(this,e,Xt,Gt,ke,{href:0,label:1,amount:2})}}function ot(l){var Ue;let e,t,s,a,n,r=l[1].name+"",u,o,c,k,A,g,v,H=l[1].runId+"",Q,j,z,L,x,F,R,ee,U=Ne(l[1].startTime,"UTC")+"",q,w,S,y,te,se,ae,G=Ne(l[1].endTime,"UTC")+"",W,pe,re,ue,de,he,$,V,Z,le,X,ne,ce,ie,M,me=l[1].stateTransitionCount+"",_e,oe;V=new pt({props:{href:mt(l[4]),$$slots:{default:[Zt]},$$scope:{ctx:l}}});let O=((Ue=l[1])==null?void 0:Ue.parent)&&ft(l);return{c(){e=p("p"),t=p("span"),s=D("Workflow Type:"),a=T(),n=p("span"),u=D(r),o=T(),c=p("p"),k=p("span"),A=D("Run ID:"),g=T(),v=p("span"),Q=D(H),j=T(),z=p("div"),L=p("p"),x=p("span"),F=D("Start Time:"),R=T(),ee=p("span"),q=D(U),w=T(),S=p("p"),y=p("span"),te=D("Closed Time:"),se=T(),ae=p("span"),W=D(G),pe=T(),re=p("p"),ue=p("span"),de=D("Task Queue:"),he=T(),$=p("span"),B(V.$$.fragment),Z=T(),O&&O.c(),le=T(),X=p("p"),ne=p("span"),ce=D("State Transitions:"),ie=T(),M=p("span"),_e=D(me),this.h()},l(m){e=_(m,"P",{class:!0});var N=h(e);t=_(N,"SPAN",{class:!0});var ve=h(t);s=C(ve,"Workflow Type:"),ve.forEach(f),a=E(N),n=_(N,"SPAN",{class:!0});var ge=h(n);u=C(ge,r),ge.forEach(f),N.forEach(f),o=E(m),c=_(m,"P",{class:!0});var Ee=h(c);k=_(Ee,"SPAN",{class:!0});var qe=h(k);A=C(qe,"Run ID:"),qe.forEach(f),g=E(Ee),v=_(Ee,"SPAN",{class:!0});var Be=h(v);Q=C(Be,H),Be.forEach(f),Ee.forEach(f),j=E(m),z=_(m,"DIV",{class:!0});var Ie=h(z);L=_(Ie,"P",{});var Ae=h(L);x=_(Ae,"SPAN",{class:!0});var Je=h(x);F=C(Je,"Start Time:"),Je.forEach(f),R=E(Ae),ee=_(Ae,"SPAN",{class:!0});var Ke=h(ee);q=C(Ke,U),Ke.forEach(f),Ae.forEach(f),w=E(Ie),S=_(Ie,"P",{});var Pe=h(S);y=_(Pe,"SPAN",{class:!0});var Ye=h(y);te=C(Ye,"Closed Time:"),Ye.forEach(f),se=E(Pe),ae=_(Pe,"SPAN",{class:!0});var ze=h(ae);W=C(ze,G),ze.forEach(f),Pe.forEach(f),Ie.forEach(f),pe=E(m),re=_(m,"P",{class:!0});var Se=h(re);ue=_(Se,"SPAN",{class:!0});var Ge=h(ue);de=C(Ge,"Task Queue:"),Ge.forEach(f),he=E(Se),$=_(Se,"SPAN",{class:!0});var Xe=h($);J(V.$$.fragment,Xe),Xe.forEach(f),Se.forEach(f),Z=E(m),O&&O.l(m),le=E(m),X=_(m,"P",{class:!0});var ye=h(X);ne=_(ye,"SPAN",{class:!0});var Ze=h(ne);ce=C(Ze,"State Transitions:"),Ze.forEach(f),ie=E(ye),M=_(ye,"SPAN",{class:!0});var xe=h(M);_e=C(xe,me),xe.forEach(f),ye.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(n,"class","ml-1"),d(e,"class","text-md"),d(k,"class","font-medium"),d(v,"class","ml-1"),d(c,"class","text-md"),d(x,"class","font-medium"),d(ee,"class","ml-1"),d(y,"class","font-medium"),d(ae,"class","ml-1"),d(z,"class","text-md flex gap-6"),d(ue,"class","font-medium"),d($,"class","ml-1"),d(re,"class","text-md"),d(ne,"class","font-medium"),d(M,"class","ml-1"),d(X,"class","text-md")},m(m,N){I(m,e,N),i(e,t),i(t,s),i(e,a),i(e,n),i(n,u),I(m,o,N),I(m,c,N),i(c,k),i(k,A),i(c,g),i(c,v),i(v,Q),I(m,j,N),I(m,z,N),i(z,L),i(L,x),i(x,F),i(L,R),i(L,ee),i(ee,q),i(z,w),i(z,S),i(S,y),i(y,te),i(S,se),i(S,ae),i(ae,W),I(m,pe,N),I(m,re,N),i(re,ue),i(ue,de),i(re,he),i(re,$),K(V,$,null),I(m,Z,N),O&&O.m(m,N),I(m,le,N),I(m,X,N),i(X,ne),i(ne,ce),i(X,ie),i(X,M),i(M,_e),oe=!0},p(m,N){var ge;(!oe||N&2)&&r!==(r=m[1].name+"")&&fe(u,r),(!oe||N&2)&&H!==(H=m[1].runId+"")&&fe(Q,H),(!oe||N&2)&&U!==(U=Ne(m[1].startTime,"UTC")+"")&&fe(q,U),(!oe||N&2)&&G!==(G=Ne(m[1].endTime,"UTC")+"")&&fe(W,G);const ve={};N&66&&(ve.$$scope={dirty:N,ctx:m}),V.$set(ve),(ge=m[1])!=null&&ge.parent?O?(O.p(m,N),N&2&&b(O,1)):(O=ft(m),O.c(),b(O,1),O.m(le.parentNode,le)):O&&(Qe(),P(O,1,1,()=>{O=null}),We()),(!oe||N&2)&&me!==(me=m[1].stateTransitionCount+"")&&fe(_e,me)},i(m){oe||(b(V.$$.fragment,m),b(O),oe=!0)},o(m){P(V.$$.fragment,m),P(O),oe=!1},d(m){m&&f(e),m&&f(o),m&&f(c),m&&f(j),m&&f(z),m&&f(pe),m&&f(re),Y(V),m&&f(Z),O&&O.d(m),m&&f(le),m&&f(X)}}}function Zt(l){let e=l[1].taskQueue+"",t;return{c(){t=D(e)},l(s){t=C(s,e)},m(s,a){I(s,t,a)},p(s,a){a&2&&e!==(e=s[1].taskQueue+"")&&fe(t,e)},d(s){s&&f(t)}}}function ft(l){var o,c;let e,t,s,a,n,r,u;return r=new pt({props:{href:st({namespace:l[0],workflow:(o=l[1].parent)==null?void 0:o.workflowId,run:(c=l[1].parent)==null?void 0:c.runId}),$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){e=p("p"),t=p("span"),s=D("Parent:"),a=T(),n=p("span"),B(r.$$.fragment),this.h()},l(k){e=_(k,"P",{class:!0});var A=h(e);t=_(A,"SPAN",{class:!0});var g=h(t);s=C(g,"Parent:"),g.forEach(f),a=E(A),n=_(A,"SPAN",{class:!0});var v=h(n);J(r.$$.fragment,v),v.forEach(f),A.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(n,"class","ml-1"),d(e,"class","text-md")},m(k,A){I(k,e,A),i(e,t),i(t,s),i(e,a),i(e,n),K(r,n,null),u=!0},p(k,A){var v,H;const g={};A&3&&(g.href=st({namespace:k[0],workflow:(v=k[1].parent)==null?void 0:v.workflowId,run:(H=k[1].parent)==null?void 0:H.runId})),A&66&&(g.$$scope={dirty:A,ctx:k}),r.$set(g)},i(k){u||(b(r.$$.fragment,k),u=!0)},o(k){P(r.$$.fragment,k),u=!1},d(k){k&&f(e),Y(r)}}}function xt(l){var s;let e=((s=l[1].parent)==null?void 0:s.workflowId)+"",t;return{c(){t=D(e)},l(a){t=C(a,e)},m(a,n){I(a,t,n)},p(a,n){var r;n&2&&e!==(e=((r=a[1].parent)==null?void 0:r.workflowId)+"")&&fe(t,e)},d(a){a&&f(t)}}}function es(l){var pe,re,ue,de,he;let e,t,s,a,n,r,u,o,c,k=l[1].id+"",A,g,v,H,Q,j,z,L,x,F,R,ee,U,q,w,S,y,te,se,ae,G;a=new ut({props:{icon:gt}}),v=new wt({props:{status:(pe=l[1])==null?void 0:pe.status}}),j=new Kt({}),L=new Ut({props:{workflow:l[1],namespace:l[0]}}),R=new be({props:{label:"History",href:ct(l[4]),amount:(re=l[1])==null?void 0:re.historyEvents}}),U=new be({props:{label:"Workers",href:mt(l[4]),amount:(de=(ue=l[2])==null?void 0:ue.pollers)==null?void 0:de.length}}),w=new be({props:{label:"Pending Activities",href:bt(l[4]),amount:(he=l[1].pendingActivities)==null?void 0:he.length}}),y=new be({props:{label:"Stack Trace",href:Tt(l[4])}}),se=new be({props:{label:"Queries",href:Et(l[4])}});let W=l[3]&&ot(l);return{c(){e=p("header"),t=p("main"),s=p("a"),B(a.$$.fragment),r=T(),u=p("div"),o=p("h1"),c=p("span"),A=D(k),g=T(),B(v.$$.fragment),H=T(),Q=p("div"),B(j.$$.fragment),z=T(),B(L.$$.fragment),x=T(),F=p("nav"),B(R.$$.fragment),ee=T(),B(U.$$.fragment),q=T(),B(w.$$.fragment),S=T(),B(y.$$.fragment),te=T(),B(se.$$.fragment),ae=T(),W&&W.c(),this.h()},l($){e=_($,"HEADER",{class:!0});var V=h(e);t=_(V,"MAIN",{class:!0});var Z=h(t);s=_(Z,"A",{href:!0,class:!0,style:!0});var le=h(s);J(a.$$.fragment,le),le.forEach(f),r=E(Z),u=_(Z,"DIV",{class:!0});var X=h(u);o=_(X,"H1",{class:!0});var ne=h(o);c=_(ne,"SPAN",{class:!0});var ce=h(c);A=C(ce,k),ce.forEach(f),g=E(ne),J(v.$$.fragment,ne),ne.forEach(f),H=E(X),Q=_(X,"DIV",{class:!0});var ie=h(Q);J(j.$$.fragment,ie),z=E(ie),J(L.$$.fragment,ie),ie.forEach(f),X.forEach(f),x=E(Z),F=_(Z,"NAV",{class:!0});var M=h(F);J(R.$$.fragment,M),ee=E(M),J(U.$$.fragment,M),q=E(M),J(w.$$.fragment,M),S=E(M),J(y.$$.fragment,M),te=E(M),J(se.$$.fragment,M),M.forEach(f),ae=E(Z),W&&W.l(Z),Z.forEach(f),V.forEach(f),this.h()},h(){d(s,"href",n="/namespaces/"+l[0]+"/workflows"),d(s,"class","absolute top-2 back-to-workflows"),dt(s,"left","-1.5rem"),d(c,"class","font-medium"),d(o,"class","text-2xl relative"),d(Q,"class","flex justify-end items-center gap-4"),d(u,"class","flex justify-between items-center mb-8"),d(F,"class","flex gap-6 mb-6"),d(t,"class","flex flex-col gap-1 relative"),d(e,"class","flex flex-col gap-4")},m($,V){I($,e,V),i(e,t),i(t,s),K(a,s,null),i(t,r),i(t,u),i(u,o),i(o,c),i(c,A),i(o,g),K(v,o,null),i(u,H),i(u,Q),K(j,Q,null),i(Q,z),K(L,Q,null),i(t,x),i(t,F),K(R,F,null),i(F,ee),K(U,F,null),i(F,q),K(w,F,null),i(F,S),K(y,F,null),i(F,te),K(se,F,null),i(t,ae),W&&W.m(t,null),G=!0},p($,[V]){var ie,M,me,_e,oe;(!G||V&1&&n!==(n="/namespaces/"+$[0]+"/workflows"))&&d(s,"href",n),(!G||V&2)&&k!==(k=$[1].id+"")&&fe(A,k);const Z={};V&2&&(Z.status=(ie=$[1])==null?void 0:ie.status),v.$set(Z);const le={};V&2&&(le.workflow=$[1]),V&1&&(le.namespace=$[0]),L.$set(le);const X={};V&2&&(X.amount=(M=$[1])==null?void 0:M.historyEvents),R.$set(X);const ne={};V&4&&(ne.amount=(_e=(me=$[2])==null?void 0:me.pollers)==null?void 0:_e.length),U.$set(ne);const ce={};V&2&&(ce.amount=(oe=$[1].pendingActivities)==null?void 0:oe.length),w.$set(ce),$[3]?W?(W.p($,V),V&8&&b(W,1)):(W=ot($),W.c(),b(W,1),W.m(t,null)):W&&(Qe(),P(W,1,1,()=>{W=null}),We())},i($){G||(b(a.$$.fragment,$),b(v.$$.fragment,$),b(j.$$.fragment,$),b(L.$$.fragment,$),b(R.$$.fragment,$),b(U.$$.fragment,$),b(w.$$.fragment,$),b(y.$$.fragment,$),b(se.$$.fragment,$),b(W),G=!0)},o($){P(a.$$.fragment,$),P(v.$$.fragment,$),P(j.$$.fragment,$),P(L.$$.fragment,$),P(R.$$.fragment,$),P(U.$$.fragment,$),P(w.$$.fragment,$),P(y.$$.fragment,$),P(se.$$.fragment,$),P(W),G=!1},d($){$&&f(e),Y(a),Y(v),Y(j),Y(L),Y(R),Y(U),Y(w),Y(y),Y(se),W&&W.d()}}}function ts(l,e,t){let s,a;Oe(l,Le,c=>t(5,a=c));let{namespace:n}=e,{workflow:r}=e,{workers:u}=e;const o={namespace:n,workflow:r.id,run:r.runId};return l.$$set=c=>{"namespace"in c&&t(0,n=c.namespace),"workflow"in c&&t(1,r=c.workflow),"workers"in c&&t(2,u=c.workers)},l.$$.update=()=>{l.$$.dirty&32&&t(3,s=a.url.pathname.includes(ct(o)))},[n,r,u,s,o,a]}class ss extends we{constructor(e){super(),$e(this,e,ts,es,ke,{namespace:0,workflow:1,workers:2})}}function ns(l){let e,t,s,a;t=new ss({props:{namespace:l[1],workflow:l[0],workers:l[2]}});const n=l[4].default,r=je(n,l,l[3],null);return{c(){e=p("main"),B(t.$$.fragment),s=T(),r&&r.c(),this.h()},l(u){e=_(u,"MAIN",{class:!0});var o=h(e);J(t.$$.fragment,o),s=E(o),r&&r.l(o),o.forEach(f),this.h()},h(){d(e,"class","flex flex-col gap-6 h-full")},m(u,o){I(u,e,o),K(t,e,null),i(e,s),r&&r.m(e,null),a=!0},p(u,[o]){const c={};o&2&&(c.namespace=u[1]),o&1&&(c.workflow=u[0]),o&4&&(c.workers=u[2]),t.$set(c),r&&r.p&&(!a||o&8)&&Ve(r,n,u,u[3],a?Re(n,u[3],o,null):Fe(u[3]),null)},i(u){a||(b(t.$$.fragment,u),b(r,u),a=!0)},o(u){P(t.$$.fragment,u),P(r,u),a=!1},d(u){u&&f(e),Y(t),r&&r.d(u)}}}const Ps=async function({params:l,fetch:e}){const{workflow:t,run:s,namespace:a}=l,n={namespace:a,workflowId:decodeURIComponent(t),runId:s},r=await $t(n,e),{taskQueue:u}=r,o=await Pt({queue:u,namespace:a});return{props:{workflow:r,namespace:a,workers:o},stuff:{workflow:r,workers:o}}};function as(l,e,t){let{$$slots:s={},$$scope:a}=e,{workflow:n}=e,{namespace:r}=e,{workers:u}=e;return l.$$set=o=>{"workflow"in o&&t(0,n=o.workflow),"namespace"in o&&t(1,r=o.namespace),"workers"in o&&t(2,u=o.workers),"$$scope"in o&&t(3,a=o.$$scope)},[n,r,u,a,s]}class Ss extends we{constructor(e){super(),$e(this,e,as,ns,ke,{workflow:0,namespace:1,workers:2})}}export{Ss as default,Ps as load};
