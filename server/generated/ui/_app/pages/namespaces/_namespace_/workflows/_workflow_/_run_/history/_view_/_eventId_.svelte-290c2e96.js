import{S as C,i as F,s as N,e as m,c as p,a as d,d as u,b as k,g as v,G as $,a1 as U,p as G,q as h,o as _,k as w,w as I,m as L,x as S,y as T,B as q,K as j,n as B,ar as A,t as D,h as H,j as K}from"../../../../../../../../chunks/vendor-c58cc9e7.js";import{c as M}from"../../../../../../../../chunks/route-for-66ab8490.js";import{p as O}from"../../../../../../../../chunks/stores-810f7c97.js";import{E as R}from"../../../../../../../../chunks/_event-details-09de3500.js";import{L as V}from"../../../../../../../../chunks/link-eb740480.js";import"../../../../../../../../chunks/format-camel-case-8b7e013d.js";import"../../../../../../../../chunks/code-block-b398a8a2.js";const z=(a,t)=>{const r=a.id;for(const e of t){if(r===e.id)return e;for(const i of e.eventIds)if(r===i)return e}};function b(a,t,r){const e=a.slice();return e[3]=t[r][0],e[4]=t[r][1],e}function E(a){let t,r,e=[],i=new Map,s,n=[...a[1].events];const l=o=>o[3];for(let o=0;o<n.length;o+=1){let c=b(a,n,o),f=l(c);i.set(f,e[o]=y(f,c))}return{c(){t=m("nav"),r=m("ul");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){t=p(o,"NAV",{class:!0});var c=d(t);r=p(c,"UL",{class:!0});var f=d(r);for(let g=0;g<e.length;g+=1)e[g].l(f);f.forEach(u),c.forEach(u),this.h()},h(){k(r,"class","flex gap-4 w-full items-start"),k(t,"class","flex flex-col mb-4")},m(o,c){v(o,t,c),$(t,r);for(let f=0;f<e.length;f+=1)e[f].m(r,null);s=!0},p(o,c){c&7&&(n=[...o[1].events],B(),e=U(e,c,l,1,o,n,i,r,A,y,null,b),G())},i(o){if(!s){for(let c=0;c<n.length;c+=1)h(e[c]);s=!0}},o(o){for(let c=0;c<e.length;c+=1)_(e[c]);s=!1},d(o){o&&u(t);for(let c=0;c<e.length;c+=1)e[c].d()}}}function J(a){let t=a[4].eventType+"",r;return{c(){r=D(t)},l(e){r=H(e,t)},m(e,i){v(e,r,i)},p(e,i){i&2&&t!==(t=e[4].eventType+"")&&K(r,t)},d(e){e&&u(r)}}}function y(a,t){let r,e,i,s;return e=new V({props:{"sveltekit:noscroll":!0,href:t[3]+t[2].url.search,active:t[3]===t[0].id,$$slots:{default:[J]},$$scope:{ctx:t}}}),{key:a,first:null,c(){r=m("li"),I(e.$$.fragment),i=w(),this.h()},l(n){r=p(n,"LI",{});var l=d(r);S(e.$$.fragment,l),i=L(l),l.forEach(u),this.h()},h(){this.first=r},m(n,l){v(n,r,l),T(e,r,null),$(r,i),s=!0},p(n,l){t=n;const o={};l&6&&(o.href=t[3]+t[2].url.search),l&3&&(o.active=t[3]===t[0].id),l&130&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(n){s||(h(e.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),s=!1},d(n){n&&u(r),q(e)}}}function P(a){let t,r,e,i,s=a[1]&&E(a);return e=new R({props:{event:a[0]}}),{c(){t=m("section"),s&&s.c(),r=w(),I(e.$$.fragment),this.h()},l(n){t=p(n,"SECTION",{class:!0});var l=d(t);s&&s.l(l),r=L(l),S(e.$$.fragment,l),l.forEach(u),this.h()},h(){k(t,"class","overflow-y-scroll max-h-full")},m(n,l){v(n,t,l),s&&s.m(t,null),$(t,r),T(e,t,null),i=!0},p(n,[l]){n[1]?s?(s.p(n,l),l&2&&h(s,1)):(s=E(n),s.c(),h(s,1),s.m(t,r)):s&&(B(),_(s,1,1,()=>{s=null}),G());const o={};l&1&&(o.event=n[0]),e.$set(o)},i(n){i||(h(s),h(e.$$.fragment,n),i=!0)},o(n){_(s),_(e.$$.fragment,n),i=!1},d(n){n&&u(t),s&&s.d(),q(e)}}}const Q=(a,t,{matchingEvents:r},{view:e})=>!r.includes(a)||e==="compact"&&!t,re=async function({params:a,stuff:t,url:r}){const{eventId:e}=a,{events:i,eventGroups:s}=t,n=i.find(o=>o.id===e);if(!n)return{status:404};const l=z(n,s);return Q(n,l,t,a)?(r.pathname=M(a),{status:302,redirect:String(r)}):{props:{event:n,eventGroup:l}}};function W(a,t,r){let e;j(a,O,n=>r(2,e=n));let{event:i}=t,{eventGroup:s}=t;return a.$$set=n=>{"event"in n&&r(0,i=n.event),"eventGroup"in n&&r(1,s=n.eventGroup)},[i,s,e]}class se extends C{constructor(t){super();F(this,t,W,P,N,{event:0,eventGroup:1})}}export{se as default,re as load};
