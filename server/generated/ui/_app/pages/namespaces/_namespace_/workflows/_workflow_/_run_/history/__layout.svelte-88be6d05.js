var We=Object.defineProperty;var re=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var Pe=(n,e,t)=>e in n?We(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Te=(n,e)=>{for(var t in e||(e={}))Oe.call(e,t)&&Pe(n,t,e[t]);if(re)for(var t of re(e))Ce.call(e,t)&&Pe(n,t,e[t]);return n};var Ve=(n,e)=>{var t={};for(var s in n)Oe.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&re)for(var s of re(n))e.indexOf(s)<0&&Ce.call(n,s)&&(t[s]=n[s]);return t};import{S as Z,i as x,s as ee,e as $,c as v,a as b,d as _,b as w,U,g as C,W as Ke,n as Qe,o as S,p as Ue,q as D,I as ae,ah as ze,K as oe,M as ie,N as fe,O as ce,P as Xe,w as j,k as I,x as R,m as A,y as J,L as d,B,aM as Ye,T as Ze,r as xe,t as T,h as V,a1 as et,aN as tt,l as Fe,v as st,aG as nt,f as Le,aO as rt,aP as lt,aQ as at,aR as ot}from"../../../../../../../chunks/vendor-79e2f0e4.js";import{h as it,c as pe,r as ft,a as ct}from"../../../../../../../chunks/route-for-api-1c14f568.js";import{t as ut}from"../../../../../../../chunks/index-d9d5b9dc.js";import{c as mt,b as le,g as je}from"../../../../../../../chunks/route-for-f402e023.js";import{p as ue}from"../../../../../../../chunks/stores-b30435f0.js";import{g as dt}from"../../../../../../../chunks/get-context-586e8b7b.js";import{C as Re}from"../../../../../../../chunks/code-block-8a3191fe.js";import{f as _t}from"../../../../../../../chunks/format-date-239453d0.js";import{L as gt}from"../../../../../../../chunks/link-d553ff3b.js";import"../../../../../../../chunks/navigation-093db9e2.js";import"../../../../../../../chunks/singletons-a6a7384f.js";import"../../../../../../../chunks/notifications-73fbc648.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/data-converter-config-a7413031.js";import"../../../../../../../chunks/atob-5f9d7101.js";const Me=(n={},e={})=>{const t=Te({},n);for(const s of Object.keys(e)){const r=t[s];Array.isArray(r)?t[s]=t[s].concat(e[s]):typeof r=="object"&&!Array.isArray(r)?t[s]=Me(t[s],e[s]):t[s]=e[s]}return t},qe=async(n,{onStart:e,onUpdate:t,onComplete:s,onError:r=it,token:a,previousProps:o}={})=>{!o&&pe(e)&&e();try{const i=await n(a),{nextPageToken:l}=i,u=Ve(i,["nextPageToken"]),m=Me(o,u);return pe(t)&&t(m,u),l?qe(n,{onStart:e,onUpdate:t,onComplete:s,token:l,previousProps:m}):(pe(s)&&s(m),m)}catch(c){r(c)}},Ge=async({namespace:n,executionId:e,runId:t,onStart:s,onUpdate:r,onComplete:a},o=fetch)=>(await qe(async c=>ft(ct("events",{namespace:n,executionId:e,runId:t}),{token:c,request:o}),{onStart:s,onUpdate:r,onComplete:a})).history.events,pt=async(n,e=fetch)=>Ge(n,e).then(ut),ht=n=>{var a,o,i,c;let e,t;const s=n==null?void 0:n.find(l=>!!l.workflowExecutionStartedEventAttributes),r=n==null?void 0:n.find(l=>!!l.workflowExecutionCompletedEventAttributes);return s&&(e=JSON.stringify((o=(a=s==null?void 0:s.workflowExecutionStartedEventAttributes)==null?void 0:a.input)==null?void 0:o.payloads)),r&&(t=JSON.stringify((c=(i=r==null?void 0:r.workflowExecutionCompletedEventAttributes)==null?void 0:i.result)==null?void 0:c.payloads)),{input:e,result:t}};function $t(n){let e;const t=n[7].default,s=oe(t,n,n[6],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,a){s&&s.m(r,a),e=!0},p(r,a){s&&s.p&&(!e||a&64)&&ie(s,t,r,r[6],e?ce(t,r[6],a,null):fe(r[6]),null)},i(r){e||(D(s,r),e=!0)},o(r){S(s,r),e=!1},d(r){s&&s.d(r)}}}function vt(n){let e,t,s,r;t=new Xe({props:{icon:n[0],scale:n[2]}});const a=n[7].default,o=oe(a,n,n[6],null);return{c(){e=$("div"),j(t.$$.fragment),s=I(),o&&o.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var c=b(e);R(t.$$.fragment,c),s=A(c),o&&o.l(c),c.forEach(_),this.h()},h(){w(e,"class","flex gap-2 items-center")},m(i,c){C(i,e,c),J(t,e,null),d(e,s),o&&o.m(e,null),r=!0},p(i,c){const l={};c&1&&(l.icon=i[0]),c&4&&(l.scale=i[2]),t.$set(l),o&&o.p&&(!r||c&64)&&ie(o,a,i,i[6],r?ce(a,i[6],c,null):fe(i[6]),null)},i(i){r||(D(t.$$.fragment,i),D(o,i),r=!0)},o(i){S(t.$$.fragment,i),S(o,i),r=!1},d(i){i&&_(e),B(t),o&&o.d(i)}}}function bt(n){let e,t,s,r,a,o,i;const c=[vt,$t],l=[];function u(m,f){return m[0]?0:1}return t=u(n),s=l[t]=c[t](n),{c(){e=$("a"),s.c(),this.h()},l(m){e=v(m,"A",{class:!0,href:!0});var f=b(e);s.l(f),f.forEach(_),this.h()},h(){w(e,"class","border-2 py-2 px-4 hover:text-white hover:bg-gray-600 flex items-center justify-center svelte-1orl6nd"),w(e,"href",r=n[3]+n[5].url.search),U(e,"rounded-lg",!n[1]),U(e,"active",n[5].url.pathname.includes(n[4])),U(e,"group",n[1])},m(m,f){C(m,e,f),l[t].m(e,null),a=!0,o||(i=Ke(e,"click",n[8]),o=!0)},p(m,[f]){let E=t;t=u(m),t===E?l[t].p(m,f):(Qe(),S(l[E],1,1,()=>{l[E]=null}),Ue(),s=l[t],s?s.p(m,f):(s=l[t]=c[t](m),s.c()),D(s,1),s.m(e,null)),(!a||f&40&&r!==(r=m[3]+m[5].url.search))&&w(e,"href",r),f&2&&U(e,"rounded-lg",!m[1]),f&48&&U(e,"active",m[5].url.pathname.includes(m[4])),f&2&&U(e,"group",m[1])},i(m){a||(D(s),a=!0)},o(m){S(s),a=!1},d(m){m&&_(e),l[t].d(),o=!1,i()}}}function wt(n,e,t){let s;ae(n,ue,f=>t(5,s=f));let{$$slots:r={},$$scope:a}=e,{icon:o}=e,{group:i=dt("group")}=e,{scale:c=1}=e,{href:l="#"}=e,{base:u=l}=e;function m(f){ze.call(this,n,f)}return n.$$set=f=>{"icon"in f&&t(0,o=f.icon),"group"in f&&t(1,i=f.group),"scale"in f&&t(2,c=f.scale),"href"in f&&t(3,l=f.href),"base"in f&&t(4,u=f.base),"$$scope"in f&&t(6,a=f.$$scope)},[o,i,c,l,u,s,a,r,m]}class Y extends Z{constructor(e){super();x(this,e,wt,bt,ee,{icon:0,group:1,scale:2,href:3,base:4})}}function Et(n){let e,t;return e=new Y({props:{icon:Ye}}),e.$on("click",n[0]),{c(){j(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,r){J(e,s,r),t=!0},p:Ze,i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){B(e,s)}}}function yt(n,e,t){let s;ae(n,ue,c=>t(1,s=c));const{workflow:r,run:a,namespace:o}=s.params;return[async()=>{const c=await Ge({namespace:o,executionId:r,runId:a}),l=JSON.stringify({events:c},null,2);u(l,`${a}/events.json`,"text/plain");function u(m,f,E){const g=document.createElement("a"),p=new Blob([m],{type:E});g.href=URL.createObjectURL(p),g.download=f,g.click()}}]}class kt extends Z{constructor(e){super();x(this,e,yt,Et,ee,{})}}function It(n){let e,t;const s=n[1].default,r=oe(s,n,n[0],null);return{c(){e=$("div"),r&&r.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var o=b(e);r&&r.l(o),o.forEach(_),this.h()},h(){w(e,"class","flex")},m(a,o){C(a,e,o),r&&r.m(e,null),t=!0},p(a,[o]){r&&r.p&&(!t||o&1)&&ie(r,s,a,a[0],t?ce(s,a[0],o,null):fe(a[0]),null)},i(a){t||(D(r,a),t=!0)},o(a){S(r,a),t=!1},d(a){a&&_(e),r&&r.d(a)}}}function At(n,e,t){let{$$slots:s={},$$scope:r}=e;return xe("group",!0),n.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,s]}class St extends Z{constructor(e){super();x(this,e,At,It,ee,{})}}function Je(n,e,t){const s=n.slice();return s[6]=e[t].id,s[7]=nt(e[t],["id"]),s}function Dt(n){let e,t,s,r,a,o=[],i=new Map,c,l,u,m,f=n[0];const E=g=>g[6];for(let g=0;g<f.length;g+=1){let p=Je(n,f,g),y=E(p);i.set(y,o[g]=Be(y,p))}return u=new gt({props:{href:n[1],$$slots:{default:[Ht]},$$scope:{ctx:n}}}),{c(){e=$("section"),t=$("h3"),s=T("Pending Activities"),r=I(),a=$("section");for(let g=0;g<o.length;g+=1)o[g].c();c=I(),l=$("div"),j(u.$$.fragment),this.h()},l(g){e=v(g,"SECTION",{class:!0});var p=b(e);t=v(p,"H3",{class:!0});var y=b(t);s=V(y,"Pending Activities"),y.forEach(_),r=A(p),a=v(p,"SECTION",{class:!0});var H=b(a);for(let P=0;P<o.length;P+=1)o[P].l(H);H.forEach(_),c=A(p),l=v(p,"DIV",{class:!0});var O=b(l);R(u.$$.fragment,O),O.forEach(_),p.forEach(_),this.h()},h(){w(t,"class","text-lg font-medium mb-4"),w(a,"class","w-full table-auto space-x-4"),w(l,"class","text-right"),w(e,"class","border-2 border-gray-300 rounded-lg p-4")},m(g,p){C(g,e,p),d(e,t),d(t,s),d(e,r),d(e,a);for(let y=0;y<o.length;y+=1)o[y].m(a,null);d(e,c),d(e,l),J(u,l,null),m=!0},p(g,p){p&3&&(f=g[0],o=et(o,p,E,1,g,f,i,a,tt,Be,null,Je));const y={};p&1024&&(y.$$scope={dirty:p,ctx:g}),u.$set(y)},i(g){m||(D(u.$$.fragment,g),m=!0)},o(g){S(u.$$.fragment,g),m=!1},d(g){g&&_(e);for(let p=0;p<o.length;p+=1)o[p].d();B(u)}}}function Be(n,e){var $e;let t,s,r=e[7].activityId+"",a,o,i,c,l,u,m,f,E,g=(($e=e[7].activityType)==null?void 0:$e.name)+"",p,y,H,O,P,K,N,h,k,M=e[7].lastFailure+"",G,W,q,F,z,me,de,X,he=_t(e[7].lastHeartbeatTime)+"",_e,ge;return{key:n,first:null,c(){t=$("a"),s=$("div"),a=T(r),o=I(),i=$("div"),c=$("div"),l=$("h4"),u=T("Activity Name"),m=I(),f=$("p"),E=$("span"),p=T(g),y=I(),H=$("div"),O=$("div"),P=$("h3"),K=T("Last Failure"),N=I(),h=$("pre"),k=$("code"),G=T(M),W=I(),q=$("div"),F=$("div"),z=$("h4"),me=T("Last Heartbeat Time"),de=I(),X=$("p"),_e=T(he),ge=I(),this.h()},l(Q){t=v(Q,"A",{class:!0,href:!0});var L=b(t);s=v(L,"DIV",{class:!0});var ve=b(s);a=V(ve,r),ve.forEach(_),o=A(L),i=v(L,"DIV",{class:!0});var be=b(i);c=v(be,"DIV",{class:!0});var te=b(c);l=v(te,"H4",{});var we=b(l);u=V(we,"Activity Name"),we.forEach(_),m=A(te),f=v(te,"P",{});var Ee=b(f);E=v(Ee,"SPAN",{class:!0});var ye=b(E);p=V(ye,g),ye.forEach(_),Ee.forEach(_),te.forEach(_),be.forEach(_),y=A(L),H=v(L,"DIV",{class:!0});var ke=b(H);O=v(ke,"DIV",{class:!0});var se=b(O);P=v(se,"H3",{});var Ie=b(P);K=V(Ie,"Last Failure"),Ie.forEach(_),N=A(se),h=v(se,"PRE",{style:!0,class:!0});var Ae=b(h);k=v(Ae,"CODE",{class:!0});var Se=b(k);G=V(Se,M),Se.forEach(_),Ae.forEach(_),se.forEach(_),ke.forEach(_),W=A(L),q=v(L,"DIV",{class:!0});var De=b(q);F=v(De,"DIV",{class:!0});var ne=b(F);z=v(ne,"H4",{});var He=b(z);me=V(He,"Last Heartbeat Time"),He.forEach(_),de=A(ne),X=v(ne,"P",{});var Ne=b(X);_e=V(Ne,he),Ne.forEach(_),ne.forEach(_),De.forEach(_),ge=A(L),L.forEach(_),this.h()},h(){w(s,"class","text-left font-normal text-gray-500 w-40"),w(E,"class","bg-gray-300 text-gray-700 px-2"),w(c,"class","flex gap-2"),w(i,"class","w-full"),w(k,"class","language-json"),Le(h,"padding","0 1em"),Le(h,"margin","0"),w(h,"class","rounded-lg"),w(O,"class","flex gap-2"),w(H,"class","w-full"),w(F,"class","flex gap-2"),w(q,"class","w-full"),w(t,"class","flex content-between w-full border-b-2 border-gray-300 p-2 last-of-type:border-b-0 hover:bg-gray-50"),w(t,"href",e[1]),this.first=t},m(Q,L){C(Q,t,L),d(t,s),d(s,a),d(t,o),d(t,i),d(i,c),d(c,l),d(l,u),d(c,m),d(c,f),d(f,E),d(E,p),d(t,y),d(t,H),d(H,O),d(O,P),d(P,K),d(O,N),d(O,h),d(h,k),d(k,G),d(t,W),d(t,q),d(q,F),d(F,z),d(z,me),d(F,de),d(F,X),d(X,_e),d(t,ge)},p(Q,L){e=Q},d(Q){Q&&_(t)}}}function Ht(n){let e;return{c(){e=T("Show all")},l(t){e=V(t,"Show all")},m(t,s){C(t,e,s)},d(t){t&&_(e)}}}function Nt(n){let e,t,s=n[0].length&&Dt(n);return{c(){s&&s.c(),e=Fe()},l(r){s&&s.l(r),e=Fe()},m(r,a){s&&s.m(r,a),C(r,e,a),t=!0},p(r,[a]){r[0].length&&s.p(r,a)},i(r){t||(D(s),t=!0)},o(r){S(s),t=!1},d(r){s&&s.d(r),r&&_(e)}}}function Pt(n,e,t){let s;ae(n,ue,l=>t(2,s=l));const{pendingActivities:r}=s.stuff.workflow,{namespace:a,workflow:o,run:i}=s.params,c=mt({namespace:a,workflow:o,run:i});return st(()=>{window.Prism.highlightAll()}),[r,c]}class Ot extends Z{constructor(e){super();x(this,e,Pt,Nt,ee,{})}}function Ct(n){let e;return{c(){e=T("Summary")},l(t){e=V(t,"Summary")},m(t,s){C(t,e,s)},d(t){t&&_(e)}}}function Tt(n){let e;return{c(){e=T("Full")},l(t){e=V(t,"Full")},m(t,s){C(t,e,s)},d(t){t&&_(e)}}}function Vt(n){let e;return{c(){e=T("Compact")},l(t){e=V(t,"Compact")},m(t,s){C(t,e,s)},d(t){t&&_(e)}}}function Ft(n){let e;return{c(){e=T("JSON")},l(t){e=V(t,"JSON")},m(t,s){C(t,e,s)},d(t){t&&_(e)}}}function Lt(n){let e,t,s,r,a,o,i,c;return e=new Y({props:{icon:rt,base:le(n[3]("summary")),href:je(n[3]("summary",n[0].params.eventId||"1")),$$slots:{default:[Ct]},$$scope:{ctx:n}}}),s=new Y({props:{icon:lt,href:le(n[3]("full")),$$slots:{default:[Tt]},$$scope:{ctx:n}}}),a=new Y({props:{icon:at,href:le(n[3]("compact")),$$slots:{default:[Vt]},$$scope:{ctx:n}}}),i=new Y({props:{icon:ot,href:le(n[3]("json")),$$slots:{default:[Ft]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment),t=I(),j(s.$$.fragment),r=I(),j(a.$$.fragment),o=I(),j(i.$$.fragment)},l(l){R(e.$$.fragment,l),t=A(l),R(s.$$.fragment,l),r=A(l),R(a.$$.fragment,l),o=A(l),R(i.$$.fragment,l)},m(l,u){J(e,l,u),C(l,t,u),J(s,l,u),C(l,r,u),J(a,l,u),C(l,o,u),J(i,l,u),c=!0},p(l,u){const m={};u&1&&(m.href=je(l[3]("summary",l[0].params.eventId||"1"))),u&256&&(m.$$scope={dirty:u,ctx:l}),e.$set(m);const f={};u&256&&(f.$$scope={dirty:u,ctx:l}),s.$set(f);const E={};u&256&&(E.$$scope={dirty:u,ctx:l}),a.$set(E);const g={};u&256&&(g.$$scope={dirty:u,ctx:l}),i.$set(g)},i(l){c||(D(e.$$.fragment,l),D(s.$$.fragment,l),D(a.$$.fragment,l),D(i.$$.fragment,l),c=!0)},o(l){S(e.$$.fragment,l),S(s.$$.fragment,l),S(a.$$.fragment,l),S(i.$$.fragment,l),c=!1},d(l){B(e,l),l&&_(t),B(s,l),l&&_(r),B(a,l),l&&_(o),B(i,l)}}}function jt(n){let e,t,s,r,a,o,i,c,l,u,m,f,E,g,p,y,H,O,P;s=new Re({props:{heading:"Input",content:n[1],framed:!0}}),a=new Re({props:{heading:"Result",content:n[2],framed:!0}}),i=new Ot({}),p=new St({props:{$$slots:{default:[Lt]},$$scope:{ctx:n}}}),H=new kt({});const K=n[7].default,N=oe(K,n,n[8],null);return{c(){e=$("section"),t=$("div"),j(s.$$.fragment),r=I(),j(a.$$.fragment),o=I(),j(i.$$.fragment),c=I(),l=$("section"),u=$("nav"),m=$("h3"),f=T("Event History"),E=I(),g=$("div"),j(p.$$.fragment),y=I(),j(H.$$.fragment),O=I(),N&&N.c(),this.h()},l(h){e=v(h,"SECTION",{class:!0});var k=b(e);t=v(k,"DIV",{class:!0});var M=b(t);R(s.$$.fragment,M),r=A(M),R(a.$$.fragment,M),M.forEach(_),o=A(k),R(i.$$.fragment,k),c=A(k),l=v(k,"SECTION",{id:!0});var G=b(l);u=v(G,"NAV",{class:!0});var W=b(u);m=v(W,"H3",{class:!0});var q=b(m);f=V(q,"Event History"),q.forEach(_),E=A(W),g=v(W,"DIV",{class:!0});var F=b(g);R(p.$$.fragment,F),y=A(F),R(H.$$.fragment,F),F.forEach(_),W.forEach(_),O=A(G),N&&N.l(G),G.forEach(_),k.forEach(_),this.h()},h(){w(t,"class","flex gap-4"),w(m,"class","text-lg font-medium"),w(g,"class","flex gap-4"),w(u,"class","flex gap-4 justify-between items-end pb-4"),w(l,"id","event-history"),w(e,"class","flex flex-col gap-4")},m(h,k){C(h,e,k),d(e,t),J(s,t,null),d(t,r),J(a,t,null),d(e,o),J(i,e,null),d(e,c),d(e,l),d(l,u),d(u,m),d(m,f),d(u,E),d(u,g),J(p,g,null),d(g,y),J(H,g,null),d(l,O),N&&N.m(l,null),P=!0},p(h,[k]){const M={};k&257&&(M.$$scope={dirty:k,ctx:h}),p.$set(M),N&&N.p&&(!P||k&256)&&ie(N,K,h,h[8],P?ce(K,h[8],k,null):fe(h[8]),null)},i(h){P||(D(s.$$.fragment,h),D(a.$$.fragment,h),D(i.$$.fragment,h),D(p.$$.fragment,h),D(H.$$.fragment,h),D(N,h),P=!0)},o(h){S(s.$$.fragment,h),S(a.$$.fragment,h),S(i.$$.fragment,h),S(p.$$.fragment,h),S(H.$$.fragment,h),S(N,h),P=!1},d(h){h&&_(e),B(s),B(a),B(i),B(p),B(H),N&&N.d(h)}}}const ss=async function({params:n,stuff:e,fetch:t}){const{workflow:s}=e,{namespace:r}=n,a={namespace:r,executionId:s.id,runId:s.runId},{events:o,eventGroups:i}=await pt(a,t);return{props:{namespace:r,workflow:s,events:o,eventGroups:i},stuff:{events:o,eventGroups:i}}};function Rt(n,e,t){let s;ae(n,ue,f=>t(0,s=f));let{$$slots:r={},$$scope:a}=e,{namespace:o}=e,{workflow:i}=e,{events:c}=e;const{input:l,result:u}=ht(c),m=(f,E)=>({namespace:o,workflow:i.id,run:i.runId,view:f,eventId:E});return n.$$set=f=>{"namespace"in f&&t(4,o=f.namespace),"workflow"in f&&t(5,i=f.workflow),"events"in f&&t(6,c=f.events),"$$scope"in f&&t(8,a=f.$$scope)},[s,l,u,m,o,i,c,r,a]}class ns extends Z{constructor(e){super();x(this,e,Rt,jt,ee,{namespace:4,workflow:5,events:6})}}export{ns as default,ss as load};
