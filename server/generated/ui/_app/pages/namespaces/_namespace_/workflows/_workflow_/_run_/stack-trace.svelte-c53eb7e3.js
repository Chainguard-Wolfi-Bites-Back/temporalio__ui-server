import{S as O,i as W,s as j,w as T,k as P,e as b,x as y,m as q,c as w,a as v,d as _,y as E,g as h,q as g,o as d,B as C,N as I,E as S,a9 as N,l as B,ab as F,t as D,h as L,b as x,M as k,j as H}from"../../../../../../chunks/index-5addae67.js";import{p as M}from"../../../../../../chunks/stores-05ea5c72.js";import{w as z}from"../../../../../../chunks/workflow-run-ca1875d1.js";import{b as V}from"../../../../../../chunks/query-service-04f49e35.js";import{C as G}from"../../../../../../chunks/code-block-a896e8ef.js";import{B as J}from"../../../../../../chunks/button-8c4b5d6e.js";import{E as A}from"../../../../../../chunks/empty-state-79a14f96.js";import{P as K}from"../../../../../../chunks/page-title-74c50834.js";import"../../../../../../chunks/index-3bf0e4ad.js";import"../../../../../../chunks/with-loading-22689bcc.js";import"../../../../../../chunks/workflow-service-1b7371ba.js";import"../../../../../../chunks/simplify-attributes-6c8439d9.js";import"../../../../../../chunks/format-date-f8f72e15.js";import"../../../../../../chunks/to-duration-3f40f60b.js";import"../../../../../../chunks/is-18735aa3.js";import"../../../../../../chunks/route-for-api-907d04bb.js";import"../../../../../../chunks/route-for-ef692dd7.js";import"../../../../../../chunks/notifications-f1b2b7a1.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/is-function-b969a126.js";import"../../../../../../chunks/atob-eb4fc9a1.js";import"../../../../../../chunks/index-9f4e6f0a.js";import"../../../../../../chunks/copy-to-clipboard-aa0b626a.js";import"../../../../../../chunks/badge-f7c1d21f.js";function Q(c){let t,r;return t=new A({props:{title:"No Stack Traces Found",dataCy:"query-stack-trace-empty"}}),{c(){T(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,a){E(t,e,a),r=!0},p:S,i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){C(t,e)}}}function U(c){let t,r,e,a={ctx:c,current:null,token:null,hasCatch:!0,pending:tt,then:Y,catch:X,value:8,error:9,blocks:[,,,]};return N(r=c[1],a),{c(){t=B(),a.block.c()},l(n){t=B(),a.block.l(n)},m(n,s){h(n,t,s),a.block.m(n,a.anchor=s),a.mount=()=>t.parentNode,a.anchor=t,e=!0},p(n,s){c=n,a.ctx=c,s&2&&r!==(r=c[1])&&N(r,a)||F(a,c,s)},i(n){e||(g(a.block),e=!0)},o(n){for(let s=0;s<3;s+=1){const i=a.blocks[s];d(i)}e=!1},d(n){n&&_(t),a.block.d(n),a.token=null,a=null}}}function X(c){let t,r;return t=new A({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){T(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,a){E(t,e,a),r=!0},p:S,i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){C(t,e)}}}function Y(c){let t,r,e,a,n,s=c[0].toLocaleTimeString()+"",i,f,m,p,l;return r=new J({props:{iconScale:.8,icon:"refresh",loading:rt,$$slots:{default:[Z]},$$scope:{ctx:c}}}),r.$on("click",c[4]),p=new G({props:{content:c[8],language:"text",dataCy:"query-stack-trace"}}),{c(){t=b("div"),T(r.$$.fragment),e=P(),a=b("p"),n=D("Stack Trace at "),i=D(s),f=P(),m=b("div"),T(p.$$.fragment),this.h()},l(o){t=w(o,"DIV",{class:!0});var u=v(t);y(r.$$.fragment,u),e=q(u),a=w(u,"P",{});var $=v(a);n=L($,"Stack Trace at "),i=L($,s),$.forEach(_),u.forEach(_),f=q(o),m=w(o,"DIV",{class:!0});var R=v(m);y(p.$$.fragment,R),R.forEach(_),this.h()},h(){x(t,"class","flex items-center gap-4"),x(m,"class","flex items-start h-full")},m(o,u){h(o,t,u),E(r,t,null),k(t,e),k(t,a),k(a,n),k(a,i),h(o,f,u),h(o,m,u),E(p,m,null),l=!0},p(o,u){const $={};u&1024&&($.$$scope={dirty:u,ctx:o}),r.$set($),(!l||u&1)&&s!==(s=o[0].toLocaleTimeString()+"")&&H(i,s);const R={};u&2&&(R.content=o[8]),p.$set(R)},i(o){l||(g(r.$$.fragment,o),g(p.$$.fragment,o),l=!0)},o(o){d(r.$$.fragment,o),d(p.$$.fragment,o),l=!1},d(o){o&&_(t),C(r),o&&_(f),o&&_(m),C(p)}}}function Z(c){let t;return{c(){t=D("Refresh")},l(r){t=L(r,"Refresh")},m(r,e){h(r,t,e)},d(r){r&&_(t)}}}function tt(c){let t,r,e,a,n,s;return{c(){t=b("div"),r=b("h2"),e=D("Loading\u2026"),a=P(),n=b("p"),s=D("(This will fail if you have no workers running.)"),this.h()},l(i){t=w(i,"DIV",{class:!0});var f=v(t);r=w(f,"H2",{class:!0});var m=v(r);e=L(m,"Loading\u2026"),m.forEach(_),a=q(f),n=w(f,"P",{});var p=v(n);s=L(p,"(This will fail if you have no workers running.)"),p.forEach(_),f.forEach(_),this.h()},h(){x(r,"class","font-bold text-2xl mb-4"),x(t,"class","text-center")},m(i,f){h(i,t,f),k(t,r),k(r,e),k(t,a),k(t,n),k(n,s)},p:S,i:S,o:S,d(i){i&&_(t)}}}function et(c){var p;let t,r,e,a,n,s;t=new K({props:{title:`Stack Trace | ${(p=c[2].params)==null?void 0:p.workflow}`,url:c[2].url.href}});const i=[U,Q],f=[];function m(l,o){return l[3].isRunning?0:1}return a=m(c),n=f[a]=i[a](c),{c(){T(t.$$.fragment),r=P(),e=b("section"),n.c()},l(l){y(t.$$.fragment,l),r=q(l),e=w(l,"SECTION",{});var o=v(e);n.l(o),o.forEach(_)},m(l,o){E(t,l,o),h(l,r,o),h(l,e,o),f[a].m(e,null),s=!0},p(l,[o]){var $;const u={};o&4&&(u.title=`Stack Trace | ${($=l[2].params)==null?void 0:$.workflow}`),o&4&&(u.url=l[2].url.href),t.$set(u),n.p(l,o)},i(l){s||(g(t.$$.fragment,l),g(n),s=!0)},o(l){d(t.$$.fragment,l),d(n),s=!1},d(l){C(t,l),l&&_(r),l&&_(e),f[a].d()}}}let rt=!1;function at(c,t,r){let e,a;I(c,z,l=>r(5,e=l)),I(c,M,l=>r(2,a=l));const{namespace:n}=a.params,{workflow:s}=e;let i=new Date;const f=()=>V({workflow:s,namespace:n});let m;const p=()=>{r(1,m=V({workflow:s,namespace:n})),m.then(()=>{r(0,i=new Date)})};return s.isRunning&&r(1,m=f()),[i,m,a,s,p]}class ot extends O{constructor(t){super(),W(this,t,at,et,j,{})}}function nt(c){let t,r;return t=new ot({}),{c(){T(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,a){E(t,e,a),r=!0},p:S,i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){C(t,e)}}}class Lt extends O{constructor(t){super(),W(this,t,null,nt,j,{})}}export{Lt as default};
