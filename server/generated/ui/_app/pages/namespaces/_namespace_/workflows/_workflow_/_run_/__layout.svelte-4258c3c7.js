import{S as we,i as $e,s as ke,e as p,k as T,w as B,c as _,a as h,d as f,m as E,x as J,b as d,g as I,T as i,y as K,U as it,O as We,P as Ve,Q as Fe,q as b,o as P,B as Y,l as Ne,n as Qe,p as Ce,ac as _t,N as Re,t as D,h as Q,j as fe,ae as xe,L as Oe,W as et,E as tt,f as dt}from"../../../../../../chunks/index-4f955b1f.js";import{r as je,a as He,h as ht}from"../../../../../../chunks/route-for-api-9706f8dd.js";import{W as wt,f as $t}from"../../../../../../chunks/workflow-status-0c489f01.js";import{F as ut,i as kt,j as vt,k as gt}from"../../../../../../chunks/index.es-3f7bba01.js";import{p as Ue}from"../../../../../../chunks/stores-8f54f2cb.js";import{d as ct,e as mt,f as bt,g as Tt,h as Et,i as st}from"../../../../../../chunks/route-for-d606e623.js";import{f as ye}from"../../../../../../chunks/format-date-0917cdb3.js";import{L as pt}from"../../../../../../chunks/link-cbe110dd.js";import{n as It}from"../../../../../../chunks/notifications-2d1c3827.js";import{B as De}from"../../../../../../chunks/button-25cd39d5.js";import{f as At}from"../../../../../../chunks/events-service-096b51ad.js";import"../../../../../../chunks/navigation-3f1ea447.js";import"../../../../../../chunks/singletons-d1fb5791.js";import"../../../../../../chunks/index-eae5a65e.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/simplify-attributes-7a858880.js";import"../../../../../../chunks/index-a81b8c9e.js";import"../../../../../../chunks/data-converter-config-728a6f58.js";import"../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../chunks/index-a8ee0a5c.js";import"../../../../../../chunks/get-event-categorization-b2bce139.js";async function Pt(l,e=fetch){const t=await je(He("task-queue",l),{request:e,params:{taskQueueType:"1"}}),s=await je(He("task-queue",l),{request:e,params:{taskQueueType:"2"}});s.pollers.forEach(n=>{n.taskQueueTypes=["ACTIVITY"]}),t.pollers.forEach(n=>{n.taskQueueTypes=["WORKFLOW"]});const a=n=>(r,u)=>{const o=r[u.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return r[u.identity]={lastAccessTime:!o.lastAccessTime||o.lastAccessTime<u.lastAccessTime?u.lastAccessTime:o.lastAccessTime,taskQueueTypes:o.taskQueueTypes.concat([n])},r};return s.pollers.filter(n=>t.pollers.some(r=>{if(n.identity===r.identity)return n.taskQueueTypes=[...r.taskQueueTypes,...n.taskQueueTypes],n})),s.pollers.reduce(a("ACTIVITY"),t.pollers.reduce(a("WORKFLOW"),{})),{pollers:s.pollers,taskQueueStatus:s.taskQueueStatus}}async function St({workflow:l,namespace:e,reason:t}){return await je(He("workflow.terminate",{namespace:e,workflowId:l.id,runId:l.runId}),{options:{method:"POST",body:JSON.stringify({reason:t})},shouldRetry:!1})}const yt=l=>({}),nt=l=>({}),Nt=l=>({}),at=l=>({});function lt(l){let e,t,s,a,n,r,u,o,c,k,A,g,v,H,C,j,z,L;r=new ut({props:{icon:kt}});const x=l[4].title,F=Re(x,l,l[8],at),R=F||Dt(),ee=l[4].content,M=Re(ee,l,l[8],nt),q=M||Qt();return v=new De({props:{secondary:!0,$$slots:{default:[Ct]},$$scope:{ctx:l}}}),v.$on("click",l[6]),C=new De({props:{destroy:!0,disabled:l[2],$$slots:{default:[Wt]},$$scope:{ctx:l}}}),C.$on("click",l[7]),{c(){e=p("div"),t=p("div"),s=T(),a=p("div"),n=p("div"),B(r.$$.fragment),u=T(),o=p("div"),R&&R.c(),c=T(),k=p("div"),q&&q.c(),A=T(),g=p("div"),B(v.$$.fragment),H=T(),B(C.$$.fragment),this.h()},l(w){e=_(w,"DIV",{class:!0});var S=h(e);t=_(S,"DIV",{class:!0}),h(t).forEach(f),s=E(S),a=_(S,"DIV",{class:!0});var y=h(a);n=_(y,"DIV",{class:!0});var te=h(n);J(r.$$.fragment,te),te.forEach(f),u=E(y),o=_(y,"DIV",{class:!0});var se=h(o);R&&R.l(se),se.forEach(f),c=E(y),k=_(y,"DIV",{class:!0});var ae=h(k);q&&q.l(ae),ae.forEach(f),A=E(y),g=_(y,"DIV",{class:!0});var G=h(g);J(v.$$.fragment,G),H=E(G),J(C.$$.fragment,G),G.forEach(f),y.forEach(f),S.forEach(f),this.h()},h(){d(t,"class","overlay svelte-p12tlm"),d(n,"class","float-right cursor-pointer p-6"),d(o,"class","title svelte-p12tlm"),d(k,"class","content svelte-p12tlm"),d(g,"class","flex justify-end items-center p-6 space-x-2"),d(a,"class","body svelte-p12tlm"),d(e,"class","modal svelte-p12tlm")},m(w,S){I(w,e,S),i(e,t),i(e,s),i(e,a),i(a,n),K(r,n,null),i(a,u),i(a,o),R&&R.m(o,null),i(a,c),i(a,k),q&&q.m(k,null),i(a,A),i(a,g),K(v,g,null),i(g,H),K(C,g,null),j=!0,z||(L=it(n,"click",l[5]),z=!0)},p(w,S){F&&F.p&&(!j||S&256)&&We(F,x,w,w[8],j?Fe(x,w[8],S,Nt):Ve(w[8]),at),M&&M.p&&(!j||S&256)&&We(M,ee,w,w[8],j?Fe(ee,w[8],S,yt):Ve(w[8]),nt);const y={};S&256&&(y.$$scope={dirty:S,ctx:w}),v.$set(y);const te={};S&4&&(te.disabled=w[2]),S&258&&(te.$$scope={dirty:S,ctx:w}),C.$set(te)},i(w){j||(b(r.$$.fragment,w),b(R,w),b(q,w),b(v.$$.fragment,w),b(C.$$.fragment,w),j=!0)},o(w){P(r.$$.fragment,w),P(R,w),P(q,w),P(v.$$.fragment,w),P(C.$$.fragment,w),j=!1},d(w){w&&f(e),Y(r),R&&R.d(w),q&&q.d(w),Y(v),Y(C),z=!1,L()}}}function Dt(l){let e,t;return{c(){e=p("h3"),t=D("Title")},l(s){e=_(s,"H3",{});var a=h(e);t=Q(a,"Title"),a.forEach(f)},m(s,a){I(s,e,a),i(e,t)},d(s){s&&f(e)}}}function Qt(l){let e,t;return{c(){e=p("span"),t=D("Content")},l(s){e=_(s,"SPAN",{});var a=h(e);t=Q(a,"Content"),a.forEach(f)},m(s,a){I(s,e,a),i(e,t)},d(s){s&&f(e)}}}function Ct(l){let e;return{c(){e=D("Cancel")},l(t){e=Q(t,"Cancel")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Wt(l){let e;return{c(){e=D(l[1])},l(t){e=Q(t,l[1])},m(t,s){I(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function Vt(l){let e,t,s=l[0]&&lt(l);return{c(){s&&s.c(),e=Ne()},l(a){s&&s.l(a),e=Ne()},m(a,n){s&&s.m(a,n),I(a,e,n),t=!0},p(a,[n]){a[0]?s?(s.p(a,n),n&1&&b(s,1)):(s=lt(a),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(Qe(),P(s,1,1,()=>{s=null}),Ce())},i(a){t||(b(s),t=!0)},o(a){P(s),t=!1},d(a){s&&s.d(a),a&&f(e)}}}function Ft(l,e,t){let{$$slots:s={},$$scope:a}=e,{open:n=!1}=e,{confirmText:r="Confirm"}=e,{confirmDisabled:u=!1}=e;const o=_t(),c=()=>o("cancelModal",{}),k=()=>o("cancelModal",{}),A=()=>o("confirmModal",{});return l.$$set=g=>{"open"in g&&t(0,n=g.open),"confirmText"in g&&t(1,r=g.confirmText),"confirmDisabled"in g&&t(2,u=g.confirmDisabled),"$$scope"in g&&t(8,a=g.$$scope)},[n,r,u,o,s,c,k,A,a]}class Rt extends we{constructor(e){super(),$e(this,e,Ft,Vt,ke,{open:0,confirmText:1,confirmDisabled:2})}}function rt(l){let e,t,s,a;return e=new De({props:{destroy:!0,thin:!0,$$slots:{default:[jt]},$$scope:{ctx:l}}}),e.$on("click",l[3]),s=new Rt({props:{open:l[2],confirmText:"Terminate",$$slots:{content:[Ot],title:[Ht]},$$scope:{ctx:l}}}),s.$on("cancelModal",l[4]),s.$on("confirmModal",l[6]),{c(){B(e.$$.fragment),t=T(),B(s.$$.fragment)},l(n){J(e.$$.fragment,n),t=E(n),J(s.$$.fragment,n)},m(n,r){K(e,n,r),I(n,t,r),K(s,n,r),a=!0},p(n,r){const u={};r&1024&&(u.$$scope={dirty:r,ctx:n}),e.$set(u);const o={};r&4&&(o.open=n[2]),r&1026&&(o.$$scope={dirty:r,ctx:n}),s.$set(o)},i(n){a||(b(e.$$.fragment,n),b(s.$$.fragment,n),a=!0)},o(n){P(e.$$.fragment,n),P(s.$$.fragment,n),a=!1},d(n){Y(e,n),n&&f(t),Y(s,n)}}}function jt(l){let e;return{c(){e=D("Terminate")},l(t){e=Q(t,"Terminate")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Ht(l){let e,t;return{c(){e=p("h3"),t=D("Terminate Workflow"),this.h()},l(s){e=_(s,"H3",{slot:!0});var a=h(e);t=Q(a,"Terminate Workflow"),a.forEach(f),this.h()},h(){d(e,"slot","title")},m(s,a){I(s,e,a),i(e,t)},d(s){s&&f(e)}}}function Ot(l){let e,t,s,a,n,r,u;return{c(){e=p("div"),t=p("p"),s=D(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=T(),n=p("input"),this.h()},l(o){e=_(o,"DIV",{slot:!0});var c=h(e);t=_(c,"P",{});var k=h(t);s=Q(k,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),k.forEach(f),a=E(c),n=_(c,"INPUT",{class:!0,placeholder:!0}),c.forEach(f),this.h()},h(){d(n,"class","block w-full border border-gray-200 rounded-md p-2 mt-4"),d(n,"placeholder","Enter a reason"),d(e,"slot","content")},m(o,c){I(o,e,c),i(e,t),i(t,s),i(e,a),i(e,n),xe(n,l[1]),r||(u=it(n,"input",l[8]),r=!0)},p(o,c){c&2&&n.value!==o[1]&&xe(n,o[1])},d(o){o&&f(e),r=!1,u()}}}function Ut(l){let e=l[5](l[0]),t,s,a=e&&rt(l);return{c(){a&&a.c(),t=Ne()},l(n){a&&a.l(n),t=Ne()},m(n,r){a&&a.m(n,r),I(n,t,r),s=!0},p(n,[r]){r&1&&(e=n[5](n[0])),e?a?(a.p(n,r),r&1&&b(a,1)):(a=rt(n),a.c(),b(a,1),a.m(t.parentNode,t)):a&&(Qe(),P(a,1,1,()=>{a=null}),Ce())},i(n){s||(b(a),s=!0)},o(n){P(a),s=!1},d(n){a&&a.d(n),n&&f(t)}}}function Lt(l,e,t){let{workflow:s}=e,{namespace:a}=e,n="",r=!1;const u=()=>t(2,r=!0),o=()=>t(2,r=!1),c=v=>String(v.status)==="Running",k=()=>{t(2,r=!1),t(1,n=""),It.add("success","Workflow Terminated"),window.location.reload()},A=()=>{St({workflow:s,namespace:a,reason:n}).then(k).catch(ht)};function g(){n=this.value,t(1,n)}return l.$$set=v=>{"workflow"in v&&t(0,s=v.workflow),"namespace"in v&&t(7,a=v.namespace)},[s,n,r,u,o,c,A,a,g]}class Mt extends we{constructor(e){super(),$e(this,e,Lt,Ut,ke,{workflow:0,namespace:7})}}function qt(l){let e;return{c(){e=D("Download")},l(t){e=Q(t,"Download")},m(t,s){I(t,e,s)},d(t){t&&f(e)}}}function Bt(l){let e,t;return e=new De({props:{thin:!0,secondary:!0,icon:vt,$$slots:{default:[qt]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){B(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,a){K(e,s,a),t=!0},p(s,[a]){const n={};a&32&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function Jt(l,e,t){let s;Oe(l,Ue,o=>t(1,s=o));const{workflow:a,run:n,namespace:r}=s.params;return[async()=>{const o=await At({namespace:r,workflowId:a,runId:n}),c=JSON.stringify({events:o},null,2);k(c,`${n}/events.json`,"text/plain");function k(A,g,v){const H=document.createElement("a"),C=new Blob([A],{type:v});H.href=URL.createObjectURL(C),H.download=g,H.click()}}]}class Kt extends we{constructor(e){super(),$e(this,e,Jt,Bt,ke,{})}}function Yt(l){let e;return{c(){e=D(l[1])},l(t){e=Q(t,l[1])},m(t,s){I(t,e,s)},p(t,s){s&2&&fe(e,t[1])},d(t){t&&f(e)}}}function zt(l){let e,t,s,a;return{c(){e=D(l[1]),t=T(),s=p("span"),a=D(l[2]),this.h()},l(n){e=Q(n,l[1]),t=E(n),s=_(n,"SPAN",{class:!0});var r=h(s);a=Q(r,l[2]),r.forEach(f),this.h()},h(){d(s,"class","px-2 text-blue-700 bg-blue-100 rounded-sm")},m(n,r){I(n,e,r),I(n,t,r),I(n,s,r),i(s,a)},p(n,r){r&2&&fe(e,n[1]),r&4&&fe(a,n[2])},d(n){n&&f(e),n&&f(t),n&&f(s)}}}function Gt(l){let e;function t(n,r){return n[2]||n[2]===0?zt:Yt}let s=t(l),a=s(l);return{c(){e=p("a"),a.c(),this.h()},l(n){e=_(n,"A",{class:!0,href:!0});var r=h(e);a.l(r),r.forEach(f),this.h()},h(){d(e,"class","block svelte-sf1jtj"),d(e,"href",l[0]),et(e,"active",l[3])},m(n,r){I(n,e,r),a.m(e,null)},p(n,[r]){s===(s=t(n))&&a?a.p(n,r):(a.d(1),a=s(n),a&&(a.c(),a.m(e,null))),r&1&&d(e,"href",n[0]),r&8&&et(e,"active",n[3])},i:tt,o:tt,d(n){n&&f(e),a.d()}}}function Xt(l,e,t){let s,a;Oe(l,Ue,o=>t(4,a=o));let{href:n}=e,{label:r}=e,{amount:u=null}=e;return l.$$set=o=>{"href"in o&&t(0,n=o.href),"label"in o&&t(1,r=o.label),"amount"in o&&t(2,u=o.amount)},l.$$.update=()=>{l.$$.dirty&17&&t(3,s=a.url.pathname.includes(n))},[n,r,u,s,a]}class be extends we{constructor(e){super(),$e(this,e,Xt,Gt,ke,{href:0,label:1,amount:2})}}function ot(l){var Le;let e,t,s,a,n,r=l[1].name+"",u,o,c,k,A,g,v,H=l[1].runId+"",C,j,z,L,x,F,R,ee,M=ye(l[1].startTime,"UTC")+"",q,w,S,y,te,se,ae,G=ye(l[1].endTime,"UTC")+"",W,pe,re,ue,de,he,$,V,Z,le,X,ne,ce,ie,O,me=l[1].stateTransitionCount+"",_e,oe;V=new pt({props:{href:mt(l[4]),$$slots:{default:[Zt]},$$scope:{ctx:l}}});let U=((Le=l[1])==null?void 0:Le.parent)&&ft(l);return{c(){e=p("p"),t=p("span"),s=D("Workflow Type:"),a=T(),n=p("span"),u=D(r),o=T(),c=p("p"),k=p("span"),A=D("Run ID:"),g=T(),v=p("span"),C=D(H),j=T(),z=p("div"),L=p("p"),x=p("span"),F=D("Start Time:"),R=T(),ee=p("span"),q=D(M),w=T(),S=p("p"),y=p("span"),te=D("Closed Time:"),se=T(),ae=p("span"),W=D(G),pe=T(),re=p("p"),ue=p("span"),de=D("Task Queue:"),he=T(),$=p("span"),B(V.$$.fragment),Z=T(),U&&U.c(),le=T(),X=p("p"),ne=p("span"),ce=D("State Transitions:"),ie=T(),O=p("span"),_e=D(me),this.h()},l(m){e=_(m,"P",{class:!0});var N=h(e);t=_(N,"SPAN",{class:!0});var ve=h(t);s=Q(ve,"Workflow Type:"),ve.forEach(f),a=E(N),n=_(N,"SPAN",{class:!0});var ge=h(n);u=Q(ge,r),ge.forEach(f),N.forEach(f),o=E(m),c=_(m,"P",{class:!0});var Te=h(c);k=_(Te,"SPAN",{class:!0});var Me=h(k);A=Q(Me,"Run ID:"),Me.forEach(f),g=E(Te),v=_(Te,"SPAN",{class:!0});var qe=h(v);C=Q(qe,H),qe.forEach(f),Te.forEach(f),j=E(m),z=_(m,"DIV",{class:!0});var Ee=h(z);L=_(Ee,"P",{});var Ie=h(L);x=_(Ie,"SPAN",{class:!0});var Be=h(x);F=Q(Be,"Start Time:"),Be.forEach(f),R=E(Ie),ee=_(Ie,"SPAN",{class:!0});var Je=h(ee);q=Q(Je,M),Je.forEach(f),Ie.forEach(f),w=E(Ee),S=_(Ee,"P",{});var Ae=h(S);y=_(Ae,"SPAN",{class:!0});var Ke=h(y);te=Q(Ke,"Closed Time:"),Ke.forEach(f),se=E(Ae),ae=_(Ae,"SPAN",{class:!0});var Ye=h(ae);W=Q(Ye,G),Ye.forEach(f),Ae.forEach(f),Ee.forEach(f),pe=E(m),re=_(m,"P",{class:!0});var Pe=h(re);ue=_(Pe,"SPAN",{class:!0});var ze=h(ue);de=Q(ze,"Task Queue:"),ze.forEach(f),he=E(Pe),$=_(Pe,"SPAN",{class:!0});var Ge=h($);J(V.$$.fragment,Ge),Ge.forEach(f),Pe.forEach(f),Z=E(m),U&&U.l(m),le=E(m),X=_(m,"P",{class:!0});var Se=h(X);ne=_(Se,"SPAN",{class:!0});var Xe=h(ne);ce=Q(Xe,"State Transitions:"),Xe.forEach(f),ie=E(Se),O=_(Se,"SPAN",{class:!0});var Ze=h(O);_e=Q(Ze,me),Ze.forEach(f),Se.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(n,"class","ml-1"),d(e,"class","text-md"),d(k,"class","font-medium"),d(v,"class","ml-1"),d(c,"class","text-md"),d(x,"class","font-medium"),d(ee,"class","ml-1"),d(y,"class","font-medium"),d(ae,"class","ml-1"),d(z,"class","text-md flex gap-6"),d(ue,"class","font-medium"),d($,"class","ml-1"),d(re,"class","text-md"),d(ne,"class","font-medium"),d(O,"class","ml-1"),d(X,"class","text-md")},m(m,N){I(m,e,N),i(e,t),i(t,s),i(e,a),i(e,n),i(n,u),I(m,o,N),I(m,c,N),i(c,k),i(k,A),i(c,g),i(c,v),i(v,C),I(m,j,N),I(m,z,N),i(z,L),i(L,x),i(x,F),i(L,R),i(L,ee),i(ee,q),i(z,w),i(z,S),i(S,y),i(y,te),i(S,se),i(S,ae),i(ae,W),I(m,pe,N),I(m,re,N),i(re,ue),i(ue,de),i(re,he),i(re,$),K(V,$,null),I(m,Z,N),U&&U.m(m,N),I(m,le,N),I(m,X,N),i(X,ne),i(ne,ce),i(X,ie),i(X,O),i(O,_e),oe=!0},p(m,N){var ge;(!oe||N&2)&&r!==(r=m[1].name+"")&&fe(u,r),(!oe||N&2)&&H!==(H=m[1].runId+"")&&fe(C,H),(!oe||N&2)&&M!==(M=ye(m[1].startTime,"UTC")+"")&&fe(q,M),(!oe||N&2)&&G!==(G=ye(m[1].endTime,"UTC")+"")&&fe(W,G);const ve={};N&66&&(ve.$$scope={dirty:N,ctx:m}),V.$set(ve),(ge=m[1])!=null&&ge.parent?U?(U.p(m,N),N&2&&b(U,1)):(U=ft(m),U.c(),b(U,1),U.m(le.parentNode,le)):U&&(Qe(),P(U,1,1,()=>{U=null}),Ce()),(!oe||N&2)&&me!==(me=m[1].stateTransitionCount+"")&&fe(_e,me)},i(m){oe||(b(V.$$.fragment,m),b(U),oe=!0)},o(m){P(V.$$.fragment,m),P(U),oe=!1},d(m){m&&f(e),m&&f(o),m&&f(c),m&&f(j),m&&f(z),m&&f(pe),m&&f(re),Y(V),m&&f(Z),U&&U.d(m),m&&f(le),m&&f(X)}}}function Zt(l){let e=l[1].taskQueue+"",t;return{c(){t=D(e)},l(s){t=Q(s,e)},m(s,a){I(s,t,a)},p(s,a){a&2&&e!==(e=s[1].taskQueue+"")&&fe(t,e)},d(s){s&&f(t)}}}function ft(l){var o,c;let e,t,s,a,n,r,u;return r=new pt({props:{href:st({namespace:l[0],workflow:(o=l[1].parent)==null?void 0:o.workflowId,run:(c=l[1].parent)==null?void 0:c.runId}),$$slots:{default:[xt]},$$scope:{ctx:l}}}),{c(){e=p("p"),t=p("span"),s=D("Parent:"),a=T(),n=p("span"),B(r.$$.fragment),this.h()},l(k){e=_(k,"P",{class:!0});var A=h(e);t=_(A,"SPAN",{class:!0});var g=h(t);s=Q(g,"Parent:"),g.forEach(f),a=E(A),n=_(A,"SPAN",{class:!0});var v=h(n);J(r.$$.fragment,v),v.forEach(f),A.forEach(f),this.h()},h(){d(t,"class","font-medium"),d(n,"class","ml-1"),d(e,"class","text-md")},m(k,A){I(k,e,A),i(e,t),i(t,s),i(e,a),i(e,n),K(r,n,null),u=!0},p(k,A){var v,H;const g={};A&3&&(g.href=st({namespace:k[0],workflow:(v=k[1].parent)==null?void 0:v.workflowId,run:(H=k[1].parent)==null?void 0:H.runId})),A&66&&(g.$$scope={dirty:A,ctx:k}),r.$set(g)},i(k){u||(b(r.$$.fragment,k),u=!0)},o(k){P(r.$$.fragment,k),u=!1},d(k){k&&f(e),Y(r)}}}function xt(l){var s;let e=((s=l[1].parent)==null?void 0:s.workflowId)+"",t;return{c(){t=D(e)},l(a){t=Q(a,e)},m(a,n){I(a,t,n)},p(a,n){var r;n&2&&e!==(e=((r=a[1].parent)==null?void 0:r.workflowId)+"")&&fe(t,e)},d(a){a&&f(t)}}}function es(l){var pe,re,ue,de,he;let e,t,s,a,n,r,u,o,c,k=l[1].id+"",A,g,v,H,C,j,z,L,x,F,R,ee,M,q,w,S,y,te,se,ae,G;a=new ut({props:{icon:gt}}),v=new wt({props:{status:(pe=l[1])==null?void 0:pe.status}}),j=new Kt({}),L=new Mt({props:{workflow:l[1],namespace:l[0]}}),R=new be({props:{label:"History",href:ct(l[4]),amount:(re=l[1])==null?void 0:re.historyEvents}}),M=new be({props:{label:"Workers",href:mt(l[4]),amount:(de=(ue=l[2])==null?void 0:ue.pollers)==null?void 0:de.length}}),w=new be({props:{label:"Pending Activities",href:bt(l[4]),amount:(he=l[1].pendingActivities)==null?void 0:he.length}}),y=new be({props:{label:"Stack Trace",href:Tt(l[4])}}),se=new be({props:{label:"Queries",href:Et(l[4])}});let W=l[3]&&ot(l);return{c(){e=p("header"),t=p("main"),s=p("a"),B(a.$$.fragment),r=T(),u=p("div"),o=p("h1"),c=p("span"),A=D(k),g=T(),B(v.$$.fragment),H=T(),C=p("div"),B(j.$$.fragment),z=T(),B(L.$$.fragment),x=T(),F=p("nav"),B(R.$$.fragment),ee=T(),B(M.$$.fragment),q=T(),B(w.$$.fragment),S=T(),B(y.$$.fragment),te=T(),B(se.$$.fragment),ae=T(),W&&W.c(),this.h()},l($){e=_($,"HEADER",{class:!0});var V=h(e);t=_(V,"MAIN",{class:!0});var Z=h(t);s=_(Z,"A",{href:!0,class:!0,style:!0});var le=h(s);J(a.$$.fragment,le),le.forEach(f),r=E(Z),u=_(Z,"DIV",{class:!0});var X=h(u);o=_(X,"H1",{class:!0});var ne=h(o);c=_(ne,"SPAN",{class:!0});var ce=h(c);A=Q(ce,k),ce.forEach(f),g=E(ne),J(v.$$.fragment,ne),ne.forEach(f),H=E(X),C=_(X,"DIV",{class:!0});var ie=h(C);J(j.$$.fragment,ie),z=E(ie),J(L.$$.fragment,ie),ie.forEach(f),X.forEach(f),x=E(Z),F=_(Z,"NAV",{class:!0});var O=h(F);J(R.$$.fragment,O),ee=E(O),J(M.$$.fragment,O),q=E(O),J(w.$$.fragment,O),S=E(O),J(y.$$.fragment,O),te=E(O),J(se.$$.fragment,O),O.forEach(f),ae=E(Z),W&&W.l(Z),Z.forEach(f),V.forEach(f),this.h()},h(){d(s,"href",n="/namespaces/"+l[0]+"/workflows"),d(s,"class","absolute top-2 back-to-workflows"),dt(s,"left","-1.5rem"),d(c,"class","font-medium"),d(o,"class","text-2xl relative"),d(C,"class","flex justify-end items-center gap-4"),d(u,"class","flex justify-between items-center mb-8"),d(F,"class","flex gap-6 mb-6"),d(t,"class","flex flex-col gap-1 relative"),d(e,"class","flex flex-col gap-4")},m($,V){I($,e,V),i(e,t),i(t,s),K(a,s,null),i(t,r),i(t,u),i(u,o),i(o,c),i(c,A),i(o,g),K(v,o,null),i(u,H),i(u,C),K(j,C,null),i(C,z),K(L,C,null),i(t,x),i(t,F),K(R,F,null),i(F,ee),K(M,F,null),i(F,q),K(w,F,null),i(F,S),K(y,F,null),i(F,te),K(se,F,null),i(t,ae),W&&W.m(t,null),G=!0},p($,[V]){var ie,O,me,_e,oe;(!G||V&1&&n!==(n="/namespaces/"+$[0]+"/workflows"))&&d(s,"href",n),(!G||V&2)&&k!==(k=$[1].id+"")&&fe(A,k);const Z={};V&2&&(Z.status=(ie=$[1])==null?void 0:ie.status),v.$set(Z);const le={};V&2&&(le.workflow=$[1]),V&1&&(le.namespace=$[0]),L.$set(le);const X={};V&2&&(X.amount=(O=$[1])==null?void 0:O.historyEvents),R.$set(X);const ne={};V&4&&(ne.amount=(_e=(me=$[2])==null?void 0:me.pollers)==null?void 0:_e.length),M.$set(ne);const ce={};V&2&&(ce.amount=(oe=$[1].pendingActivities)==null?void 0:oe.length),w.$set(ce),$[3]?W?(W.p($,V),V&8&&b(W,1)):(W=ot($),W.c(),b(W,1),W.m(t,null)):W&&(Qe(),P(W,1,1,()=>{W=null}),Ce())},i($){G||(b(a.$$.fragment,$),b(v.$$.fragment,$),b(j.$$.fragment,$),b(L.$$.fragment,$),b(R.$$.fragment,$),b(M.$$.fragment,$),b(w.$$.fragment,$),b(y.$$.fragment,$),b(se.$$.fragment,$),b(W),G=!0)},o($){P(a.$$.fragment,$),P(v.$$.fragment,$),P(j.$$.fragment,$),P(L.$$.fragment,$),P(R.$$.fragment,$),P(M.$$.fragment,$),P(w.$$.fragment,$),P(y.$$.fragment,$),P(se.$$.fragment,$),P(W),G=!1},d($){$&&f(e),Y(a),Y(v),Y(j),Y(L),Y(R),Y(M),Y(w),Y(y),Y(se),W&&W.d()}}}function ts(l,e,t){let s,a;Oe(l,Ue,c=>t(5,a=c));let{namespace:n}=e,{workflow:r}=e,{workers:u}=e;const o={namespace:n,workflow:r.id,run:r.runId};return l.$$set=c=>{"namespace"in c&&t(0,n=c.namespace),"workflow"in c&&t(1,r=c.workflow),"workers"in c&&t(2,u=c.workers)},l.$$.update=()=>{l.$$.dirty&32&&t(3,s=a.url.pathname.includes(ct(o)))},[n,r,u,s,o,a]}class ss extends we{constructor(e){super(),$e(this,e,ts,es,ke,{namespace:0,workflow:1,workers:2})}}function ns(l){let e,t,s,a;t=new ss({props:{namespace:l[1],workflow:l[0],workers:l[2]}});const n=l[4].default,r=Re(n,l,l[3],null);return{c(){e=p("main"),B(t.$$.fragment),s=T(),r&&r.c(),this.h()},l(u){e=_(u,"MAIN",{class:!0});var o=h(e);J(t.$$.fragment,o),s=E(o),r&&r.l(o),o.forEach(f),this.h()},h(){d(e,"class","flex flex-col gap-6 h-full")},m(u,o){I(u,e,o),K(t,e,null),i(e,s),r&&r.m(e,null),a=!0},p(u,[o]){const c={};o&2&&(c.namespace=u[1]),o&1&&(c.workflow=u[0]),o&4&&(c.workers=u[2]),t.$set(c),r&&r.p&&(!a||o&8)&&We(r,n,u,u[3],a?Fe(n,u[3],o,null):Ve(u[3]),null)},i(u){a||(b(t.$$.fragment,u),b(r,u),a=!0)},o(u){P(t.$$.fragment,u),P(r,u),a=!1},d(u){u&&f(e),Y(t),r&&r.d(u)}}}const As=async function({params:l,fetch:e}){const{workflow:t,run:s,namespace:a}=l,n={namespace:a,workflowId:decodeURIComponent(t),runId:s},r=await $t(n,e),{taskQueue:u}=r,o=await Pt({queue:u,namespace:a});return{props:{workflow:r,namespace:a,workers:o},stuff:{workflow:r,workers:o}}};function as(l,e,t){let{$$slots:s={},$$scope:a}=e,{workflow:n}=e,{namespace:r}=e,{workers:u}=e;return l.$$set=o=>{"workflow"in o&&t(0,n=o.workflow),"namespace"in o&&t(1,r=o.namespace),"workers"in o&&t(2,u=o.workers),"$$scope"in o&&t(3,a=o.$$scope)},[n,r,u,a,s]}class Ps extends we{constructor(e){super(),$e(this,e,as,ns,ke,{workflow:0,namespace:1,workers:2})}}export{Ps as default,As as load};
