import{S as pe,i as $e,s as we,e as h,t as P,k as C,w as D,c as p,a as $,h as W,d as m,m as y,x as N,b,g as O,M as f,y as R,n as ke,a6 as ze,ah as qe,p as ve,q as E,o as T,B as A,l as Ee,N as He,v as je,ai as Me,E as Y,aj as Ve,ak as Qe,C as De,U as Ne,j as Te,I as Be,J as Ge,K as Ke,L as Xe}from"../../../../../../../chunks/index-b54af4f8.js";import{a as Ye}from"../../../../../../../chunks/events-service-6b86422f.js";import{g as Ze,f as xe,k as Re,e as be}from"../../../../../../../chunks/route-for-6c8ee7a8.js";import{F as et,l as tt,h as nt,i as lt,j as rt}from"../../../../../../../chunks/index.es-49fdf6ab.js";import{i as st}from"../../../../../../../chunks/index-2251214d.js";import{f as he}from"../../../../../../../chunks/format-date-4b1bc9ef.js";import{e as ot,s as Ie}from"../../../../../../../chunks/event-view-type-c3f3435b.js";import{T as at,a as Ce}from"../../../../../../../chunks/toggle-buttons-15cd0931.js";import{p as it}from"../../../../../../../chunks/stores-8d1899da.js";import{L as Le}from"../../../../../../../chunks/link-039c2d65.js";import{C as Je}from"../../../../../../../chunks/copyable-912ad4f4.js";import{g as ft}from"../../../../../../../chunks/query-service-87e84839.js";import{E as ct}from"../../../../../../../chunks/empty-state-490eee68.js";import{C as Ue}from"../../../../../../../chunks/code-block-df5d9a48.js";import"../../../../../../../chunks/route-for-api-45484580.js";import"../../../../../../../chunks/index-4543480f.js";import"../../../../../../../chunks/notifications-8c7f2caf.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/index-b4da8be7.js";import"../../../../../../../chunks/data-converter-config-82ea827f.js";import"../../../../../../../chunks/persist-store-dac8aba1.js";import"../../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../../chunks/get-event-categorization-b2bce139.js";import"../../../../../../../chunks/simplify-attributes-6710d3ed.js";const ut=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],mt=r=>{for(const e of ut)if(r.eventType===e)return!0;return!1},dt=r=>{for(const e of r)if(mt(e))return e},_t=r=>st(r)?r.attributes.result===null?null:r.attributes.result.payloads:r.attributes,gt=r=>{var o,a;let e,t;const n=r==null?void 0:r.find(s=>!!s.workflowExecutionStartedEventAttributes),l=dt(r);return n&&(e=JSON.stringify((a=(o=n==null?void 0:n.workflowExecutionStartedEventAttributes)==null?void 0:o.input)==null?void 0:a.payloads)),l&&(t=JSON.stringify(_t(l))),{input:e,result:t}};function Ae(r,e,t){const n=r.slice();return n[6]=e[t].id,n[7]=Me(e[t],["id"]),n}function ht(r){let e,t,n,l,o,a=[],s=new Map,i,c,_,w,k=r[0];const S=g=>g[6];for(let g=0;g<k.length;g+=1){let d=Ae(r,k,g),v=S(d);s.set(v,a[g]=Pe(v,d))}return _=new Le({props:{href:r[1],$$slots:{default:[kt]},$$scope:{ctx:r}}}),{c(){e=h("section"),t=h("h3"),n=P("Pending Activities"),l=C(),o=h("section");for(let g=0;g<a.length;g+=1)a[g].c();i=C(),c=h("div"),D(_.$$.fragment),this.h()},l(g){e=p(g,"SECTION",{class:!0});var d=$(e);t=p(d,"H3",{class:!0});var v=$(t);n=W(v,"Pending Activities"),v.forEach(m),l=y(d),o=p(d,"SECTION",{class:!0});var V=$(o);for(let U=0;U<a.length;U+=1)a[U].l(V);V.forEach(m),i=y(d),c=p(d,"DIV",{class:!0});var H=$(c);N(_.$$.fragment,H),H.forEach(m),d.forEach(m),this.h()},h(){b(t,"class","text-lg font-medium mb-4"),b(o,"class","w-full table-auto space-x-4"),b(c,"class","text-right"),b(e,"class","border-2 border-gray-300 rounded-lg p-4")},m(g,d){O(g,e,d),f(e,t),f(t,n),f(e,l),f(e,o);for(let v=0;v<a.length;v+=1)a[v].m(o,null);f(e,i),f(e,c),R(_,c,null),w=!0},p(g,d){d&3&&(k=g[0],ke(),a=ze(a,d,S,1,g,k,s,o,qe,Pe,null,Ae),ve());const v={};d&1024&&(v.$$scope={dirty:d,ctx:g}),_.$set(v)},i(g){if(!w){for(let d=0;d<k.length;d+=1)E(a[d]);E(_.$$.fragment,g),w=!0}},o(g){for(let d=0;d<a.length;d+=1)T(a[d]);T(_.$$.fragment,g),w=!1},d(g){g&&m(e);for(let d=0;d<a.length;d+=1)a[d].d();A(_)}}}function pt(r){let e,t;return{c(){e=h("span"),t=P("(Empty)"),this.h()},l(n){e=p(n,"SPAN",{class:!0});var l=$(e);t=W(l,"(Empty)"),l.forEach(m),this.h()},h(){b(e,"class","bg-gray-300 text-gray-700 px-2 text-sm")},m(n,l){O(n,e,l),f(e,t)},p:Y,i:Y,o:Y,d(n){n&&m(e)}}}function $t(r){var n;let e,t;return e=new Je({props:{content:(n=r[7].lastFailure)==null?void 0:n.message,"container-class":"overflow-y-scroll",$$slots:{default:[wt]},$$scope:{ctx:r}}}),{c(){D(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,o){R(e,l,o),t=!0},p(l,o){const a={};o&1024&&(a.$$scope={dirty:o,ctx:l}),e.$set(a)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){A(e,l)}}}function wt(r){var o;let e,t,n=((o=r[7].lastFailure)==null?void 0:o.message)+"",l;return{c(){e=h("pre"),t=h("code"),l=P(n),this.h()},l(a){e=p(a,"PRE",{class:!0});var s=$(e);t=p(s,"CODE",{class:!0});var i=$(t);l=W(i,n),i.forEach(m),s.forEach(m),this.h()},h(){b(t,"class","language-json"),b(e,"class","rounded-lg max-w-fit")},m(a,s){O(a,e,s),f(e,t),f(t,l)},p:Y,d(a){a&&m(e)}}}function Pe(r,e){let t,n,l=e[7].activityId+"",o,a,s,i,c,_,w,k,S,g=e[7].activityType+"",d,v,V,H,U,Q,ie,z,Z,K,x,L,q,ee,fe,oe,te=he(e[7].lastHeartbeatTime)+"",B,ce,X;const F=[$t,pt],ue=[];function J(M,u){return M[7].lastFailure?0:1}return z=J(e),Z=ue[z]=F[z](e),{key:r,first:null,c(){t=h("a"),n=h("div"),o=P(l),a=C(),s=h("div"),i=h("div"),c=h("h4"),_=P("Activity Name"),w=C(),k=h("p"),S=h("span"),d=P(g),v=C(),V=h("div"),H=h("div"),U=h("h3"),Q=P("Last Failure"),ie=C(),Z.c(),K=C(),x=h("div"),L=h("div"),q=h("h4"),ee=P("Last Heartbeat Time"),fe=C(),oe=h("p"),B=P(te),ce=C(),this.h()},l(M){t=p(M,"A",{class:!0,href:!0});var u=$(t);n=p(u,"DIV",{class:!0});var I=$(n);o=W(I,l),I.forEach(m),a=y(u),s=p(u,"DIV",{class:!0});var j=$(s);i=p(j,"DIV",{class:!0});var G=$(i);c=p(G,"H4",{});var ne=$(c);_=W(ne,"Activity Name"),ne.forEach(m),w=y(G),k=p(G,"P",{});var le=$(k);S=p(le,"SPAN",{class:!0});var re=$(S);d=W(re,g),re.forEach(m),le.forEach(m),G.forEach(m),j.forEach(m),v=y(u),V=p(u,"DIV",{class:!0});var ae=$(V);H=p(ae,"DIV",{class:!0});var se=$(H);U=p(se,"H3",{class:!0});var _e=$(U);Q=W(_e,"Last Failure"),_e.forEach(m),ie=y(se),Z.l(se),se.forEach(m),ae.forEach(m),K=y(u),x=p(u,"DIV",{class:!0});var ge=$(x);L=p(ge,"DIV",{class:!0});var me=$(L);q=p(me,"H4",{});var ye=$(q);ee=W(ye,"Last Heartbeat Time"),ye.forEach(m),fe=y(me),oe=p(me,"P",{});var Se=$(oe);B=W(Se,te),Se.forEach(m),me.forEach(m),ge.forEach(m),ce=y(u),u.forEach(m),this.h()},h(){b(n,"class","md:w-1/12 text-left font-normal text-gray-500 w-40"),b(S,"class","bg-gray-300 text-gray-700 px-2 text-sm"),b(i,"class","flex gap-2 items-center"),b(s,"class","w-full md:w-1/4"),b(U,"class","whitespace-nowrap"),b(H,"class","flex gap-2 items-center"),b(V,"class","w-full md:w-5/12"),b(L,"class","flex gap-2"),b(x,"class","w-full md:w-1/4"),b(t,"class","block md:flex content-between w-full border-b-2 border-gray-300 p-2 last-of-type:border-b-0 hover:bg-gray-50 gap-4 items-center"),b(t,"href",e[1]),this.first=t},m(M,u){O(M,t,u),f(t,n),f(n,o),f(t,a),f(t,s),f(s,i),f(i,c),f(c,_),f(i,w),f(i,k),f(k,S),f(S,d),f(t,v),f(t,V),f(V,H),f(H,U),f(U,Q),f(H,ie),ue[z].m(H,null),f(t,K),f(t,x),f(x,L),f(L,q),f(q,ee),f(L,fe),f(L,oe),f(oe,B),f(t,ce),X=!0},p(M,u){e=M,Z.p(e,u)},i(M){X||(E(Z),X=!0)},o(M){T(Z),X=!1},d(M){M&&m(t),ue[z].d()}}}function kt(r){let e;return{c(){e=P("Show all")},l(t){e=W(t,"Show all")},m(t,n){O(t,e,n)},d(t){t&&m(e)}}}function vt(r){let e,t,n=r[0].length&&ht(r);return{c(){n&&n.c(),e=Ee()},l(l){n&&n.l(l),e=Ee()},m(l,o){n&&n.m(l,o),O(l,e,o),t=!0},p(l,[o]){l[0].length&&n.p(l,o)},i(l){t||(E(n),t=!0)},o(l){T(n),t=!1},d(l){n&&n.d(l),l&&m(e)}}}function bt(r,e,t){let n;He(r,it,c=>t(2,n=c));const{pendingActivities:l}=n.stuff.workflow,{namespace:o,workflow:a,run:s}=n.params,i=Ze({namespace:o,workflow:a,run:s});return je(()=>{window.Prism.highlightAll()}),[l,i]}class Et extends pe{constructor(e){super(),$e(this,e,bt,vt,we,{})}}function We(r){let e,t,n,l,o,a,s={ctx:r,current:null,token:null,hasCatch:!0,pending:Ct,then:It,catch:Tt,value:4,error:5,blocks:[,,,]};return Ve(o=r[1],s),{c(){e=h("section"),t=h("h3"),n=P("Stack Trace"),l=C(),s.block.c(),this.h()},l(i){e=p(i,"SECTION",{class:!0});var c=$(e);t=p(c,"H3",{class:!0});var _=$(t);n=W(_,"Stack Trace"),_.forEach(m),l=y(c),s.block.l(c),c.forEach(m),this.h()},h(){b(t,"class","text-lg mb-2 w-full"),b(e,"class","stack-trace svelte-18yyc2q")},m(i,c){O(i,e,c),f(e,t),f(t,n),f(e,l),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,a=!0},p(i,c){r=i,s.ctx=r,c&2&&o!==(o=r[1])&&Ve(o,s)||Qe(s,r,c)},i(i){a||(E(s.block),a=!0)},o(i){for(let c=0;c<3;c+=1){const _=s.blocks[c];T(_)}a=!1},d(i){i&&m(e),s.block.d(),s.token=null,s=null}}}function Tt(r){let e,t;return e=new ct({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){D(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,l){R(e,n,l),t=!0},p:Y,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function It(r){let e,t,n;return t=new Ue({props:{content:r[4],language:"text",class:r[2].class}}),{c(){e=h("div"),D(t.$$.fragment),this.h()},l(l){e=p(l,"DIV",{class:!0});var o=$(e);N(t.$$.fragment,o),o.forEach(m),this.h()},h(){b(e,"class","flex items-start h-full")},m(l,o){O(l,e,o),R(t,e,null),n=!0},p(l,o){const a={};o&2&&(a.content=l[4]),o&4&&(a.class=l[2].class),t.$set(a)},i(l){n||(E(t.$$.fragment,l),n=!0)},o(l){T(t.$$.fragment,l),n=!1},d(l){l&&m(e),A(t)}}}function Ct(r){let e,t,n,l,o,a;return{c(){e=h("div"),t=h("h2"),n=P("Loading\u2026"),l=C(),o=h("p"),a=P("(This will fail if you have no workers running.)"),this.h()},l(s){e=p(s,"DIV",{class:!0});var i=$(e);t=p(i,"H2",{class:!0});var c=$(t);n=W(c,"Loading\u2026"),c.forEach(m),l=y(i),o=p(i,"P",{});var _=$(o);a=W(_,"(This will fail if you have no workers running.)"),_.forEach(m),i.forEach(m),this.h()},h(){b(t,"class","font-bold text-2xl mb-4"),b(e,"class","text-center")},m(s,i){O(s,e,i),f(e,t),f(t,n),f(e,l),f(e,o),f(o,a)},p:Y,i:Y,o:Y,d(s){s&&m(e)}}}function yt(r){let e,t,n=r[0].isRunning&&We(r);return{c(){n&&n.c(),e=Ee()},l(l){n&&n.l(l),e=Ee()},m(l,o){n&&n.m(l,o),O(l,e,o),t=!0},p(l,[o]){l[0].isRunning?n?(n.p(l,o),o&1&&E(n,1)):(n=We(l),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(ke(),T(n,1,1,()=>{n=null}),ve())},i(l){t||(E(n),t=!0)},o(l){T(n),t=!1},d(l){n&&n.d(l),l&&m(e)}}}function St(r,e,t){let{namespace:n}=e,{workflow:l}=e,o;return je(()=>{t(1,o=(()=>ft({workflow:l,namespace:n}))())}),r.$$set=a=>{t(2,e=De(De({},e),Ne(a))),"namespace"in a&&t(3,n=a.namespace),"workflow"in a&&t(0,l=a.workflow)},e=Ne(e),[l,o,e,n]}class Vt extends pe{constructor(e){super(),$e(this,e,St,yt,we,{namespace:3,workflow:0})}}function Dt(r){let e,t;return e=new Ue({props:{content:r[1],class:"mb-2 max-h-96"}}),{c(){D(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,l){R(e,n,l),t=!0},p(n,l){const o={};l&2&&(o.content=n[1]),e.$set(o)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Nt(r){let e,t,n,l,o,a,s;return n=new et({props:{icon:tt,scale:1.2,class:"block w-full h-full animate-spin"}}),{c(){e=h("div"),t=h("div"),D(n.$$.fragment),l=C(),o=h("h2"),a=P("In progress\u2026"),this.h()},l(i){e=p(i,"DIV",{class:!0});var c=$(e);t=p(c,"DIV",{class:!0});var _=$(t);N(n.$$.fragment,_),_.forEach(m),l=y(c),o=p(c,"H2",{class:!0});var w=$(o);a=W(w,"In progress\u2026"),w.forEach(m),c.forEach(m),this.h()},h(){b(t,"class","flex rounded-full items-center justify-center w-16 h-16 bg-gray-200"),b(o,"class","text-xl font-medium"),b(e,"class","my-12 flex flex-col justify-start items-center gap-2")},m(i,c){O(i,e,c),f(e,t),R(n,t,null),f(e,l),f(e,o),f(o,a),s=!0},p:Y,i(i){s||(E(n.$$.fragment,i),s=!0)},o(i){T(n.$$.fragment,i),s=!1},d(i){i&&m(e),A(n)}}}function Rt(r){let e,t,n,l,o,a,s;const i=[Nt,Dt],c=[];function _(w,k){return w[2]?0:1}return o=_(r),a=c[o]=i[o](r),{c(){e=h("article"),t=h("h3"),n=P(r[0]),l=C(),a.c(),this.h()},l(w){e=p(w,"ARTICLE",{class:!0});var k=$(e);t=p(k,"H3",{class:!0});var S=$(t);n=W(S,r[0]),S.forEach(m),l=y(k),a.l(k),k.forEach(m),this.h()},h(){b(t,"class","text-lg"),b(e,"class","flex flex-col border-2 border-gray-300 p-4 rounded-lg w-full lg:w-1/2")},m(w,k){O(w,e,k),f(e,t),f(t,n),f(e,l),c[o].m(e,null),s=!0},p(w,[k]){(!s||k&1)&&Te(n,w[0]);let S=o;o=_(w),o===S?c[o].p(w,k):(ke(),T(c[S],1,1,()=>{c[S]=null}),ve(),a=c[o],a?a.p(w,k):(a=c[o]=i[o](w),a.c()),E(a,1),a.m(e,null))},i(w){s||(E(a),s=!0)},o(w){T(a),s=!1},d(w){w&&m(e),c[o].d()}}}function At(r,e,t){let{title:n}=e,{content:l}=e,{isRunning:o=!1}=e;return r.$$set=a=>{"title"in a&&t(0,n=a.title),"content"in a&&t(1,l=a.content),"isRunning"in a&&t(2,o=a.isRunning)},[n,l,o]}class Fe extends pe{constructor(e){super(),$e(this,e,At,Rt,we,{title:0,content:1,isRunning:2})}}function Pt(r){let e,t;return{c(){e=h("div"),t=P(r[1]),this.h()},l(n){e=p(n,"DIV",{class:!0});var l=$(e);t=W(l,r[1]),l.forEach(m),this.h()},h(){b(e,"class","select-all")},m(n,l){O(n,e,l),f(e,t)},p(n,l){l&2&&Te(t,n[1])},i:Y,o:Y,d(n){n&&m(e)}}}function Wt(r){let e,t;return e=new Je({props:{content:r[1],$$slots:{default:[Ot]},$$scope:{ctx:r}}}),{c(){D(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,l){R(e,n,l),t=!0},p(n,l){const o={};l&2&&(o.content=n[1]),l&22&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ft(r){let e;return{c(){e=P(r[1])},l(t){e=W(t,r[1])},m(t,n){O(t,e,n)},p(t,n){n&2&&Te(e,t[1])},d(t){t&&m(e)}}}function Ot(r){let e,t;return e=new Le({props:{href:r[2],$$slots:{default:[Ft]},$$scope:{ctx:r}}}),{c(){D(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,l){R(e,n,l),t=!0},p(n,l){const o={};l&4&&(o.href=n[2]),l&18&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ht(r){let e,t,n,l,o,a,s,i,c,_;const w=[Wt,Pt],k=[];function S(g,d){return g[2]?0:1}return s=S(r),i=k[s]=w[s](r),{c(){e=h("article"),t=h("div"),n=P(r[0]),l=P(":"),o=C(),a=h("div"),i.c(),this.h()},l(g){e=p(g,"ARTICLE",{class:!0});var d=$(e);t=p(d,"DIV",{class:!0});var v=$(t);n=W(v,r[0]),l=W(v,":"),v.forEach(m),o=y(d),a=p(d,"DIV",{});var V=$(a);i.l(V),V.forEach(m),d.forEach(m),this.h()},h(){b(t,"class","font-medium"),b(e,"class",c="flex gap-2 text-"+r[3])},m(g,d){O(g,e,d),f(e,t),f(t,n),f(t,l),f(e,o),f(e,a),k[s].m(a,null),_=!0},p(g,[d]){(!_||d&1)&&Te(n,g[0]);let v=s;s=S(g),s===v?k[s].p(g,d):(ke(),T(k[v],1,1,()=>{k[v]=null}),ve(),i=k[s],i?i.p(g,d):(i=k[s]=w[s](g),i.c()),E(i,1),i.m(a,null)),(!_||d&8&&c!==(c="flex gap-2 text-"+g[3]))&&b(e,"class",c)},i(g){_||(E(i),_=!0)},o(g){T(i),_=!1},d(g){g&&m(e),k[s].d()}}}function jt(r,e,t){let{title:n}=e,{content:l}=e,{href:o=null}=e,{textSize:a="md"}=e;return r.$$set=s=>{"title"in s&&t(0,n=s.title),"content"in s&&t(1,l=s.content),"href"in s&&t(2,o=s.href),"textSize"in s&&t(3,a=s.textSize)},[n,l,o,a]}class de extends pe{constructor(e){super(),$e(this,e,jt,Ht,we,{title:0,content:1,href:2,textSize:3})}}function Oe(r){var n,l,o;let e,t;return e=new de({props:{title:"Parent",content:(n=r[1].parent)==null?void 0:n.workflowId,href:Re({namespace:r[0],workflow:(l=r[1].parent)==null?void 0:l.workflowId,run:(o=r[1].parent)==null?void 0:o.runId})}}),{c(){D(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,s){R(e,a,s),t=!0},p(a,s){var c,_,w;const i={};s&2&&(i.content=(c=a[1].parent)==null?void 0:c.workflowId),s&3&&(i.href=Re({namespace:a[0],workflow:(_=a[1].parent)==null?void 0:_.workflowId,run:(w=a[1].parent)==null?void 0:w.runId})),e.$set(i)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){A(e,a)}}}function Lt(r){let e;return{c(){e=P("Feed")},l(t){e=W(t,"Feed")},m(t,n){O(t,e,n)},d(t){t&&m(e)}}}function Jt(r){let e;return{c(){e=P("Compact")},l(t){e=W(t,"Compact")},m(t,n){O(t,e,n)},d(t){t&&m(e)}}}function Ut(r){let e;return{c(){e=P("JSON")},l(t){e=W(t,"JSON")},m(t,n){O(t,e,n)},d(t){t&&m(e)}}}function zt(r){let e,t,n,l,o,a;return e=new Ce({props:{icon:nt,base:be(r[5]("feed")),href:be(r[5]("feed")),active:r[2]==="feed",$$slots:{default:[Lt]},$$scope:{ctx:r}}}),e.$on("click",r[9]),n=new Ce({props:{icon:lt,href:be(r[5]("compact")),active:r[2]==="compact",$$slots:{default:[Jt]},$$scope:{ctx:r}}}),n.$on("click",r[10]),o=new Ce({props:{icon:rt,href:be(r[5]("json")),active:r[2]==="json",$$slots:{default:[Ut]},$$scope:{ctx:r}}}),o.$on("click",r[11]),{c(){D(e.$$.fragment),t=C(),D(n.$$.fragment),l=C(),D(o.$$.fragment)},l(s){N(e.$$.fragment,s),t=y(s),N(n.$$.fragment,s),l=y(s),N(o.$$.fragment,s)},m(s,i){R(e,s,i),O(s,t,i),R(n,s,i),O(s,l,i),R(o,s,i),a=!0},p(s,i){const c={};i&4&&(c.active=s[2]==="feed"),i&4096&&(c.$$scope={dirty:i,ctx:s}),e.$set(c);const _={};i&4&&(_.active=s[2]==="compact"),i&4096&&(_.$$scope={dirty:i,ctx:s}),n.$set(_);const w={};i&4&&(w.active=s[2]==="json"),i&4096&&(w.$$scope={dirty:i,ctx:s}),o.$set(w)},i(s){a||(E(e.$$.fragment,s),E(n.$$.fragment,s),E(o.$$.fragment,s),a=!0)},o(s){T(e.$$.fragment,s),T(n.$$.fragment,s),T(o.$$.fragment,s),a=!1},d(s){A(e,s),s&&m(t),A(n,s),s&&m(l),A(o,s)}}}function qt(r){var M;let e,t,n,l,o,a,s,i,c,_,w,k,S,g,d,v,V,H,U,Q,ie,z,Z,K,x,L,q,ee,fe,oe,te,B,ce,X;n=new de({props:{title:"Workflow Type",content:r[1].name}}),o=new de({props:{title:"Run ID",content:r[1].runId}}),i=new de({props:{title:"Start Time",content:he(r[1].startTime,"UTC")}}),_=new de({props:{title:"Close Time",content:he(r[1].endTime,"UTC")}}),k=new de({props:{title:"Task Queue",content:r[1].taskQueue,href:xe(r[6])}});let F=((M=r[1])==null?void 0:M.parent)&&Oe(r);d=new de({props:{title:"State Transitions",content:r[1].stateTransitionCount}}),H=new Fe({props:{title:"Input",content:r[3]}}),Q=new Fe({props:{title:"Results",content:r[4],isRunning:r[1].isRunning}}),z=new Vt({props:{namespace:r[0],workflow:r[1],class:"mb-2 max-h-96"}}),K=new Et({}),B=new at({props:{$$slots:{default:[zt]},$$scope:{ctx:r}}});const ue=r[8].default,J=Be(ue,r,r[12],null);return{c(){e=h("section"),t=h("section"),D(n.$$.fragment),l=C(),D(o.$$.fragment),a=C(),s=h("div"),D(i.$$.fragment),c=C(),D(_.$$.fragment),w=C(),D(k.$$.fragment),S=C(),F&&F.c(),g=C(),D(d.$$.fragment),v=C(),V=h("section"),D(H.$$.fragment),U=C(),D(Q.$$.fragment),ie=C(),D(z.$$.fragment),Z=C(),D(K.$$.fragment),x=C(),L=h("section"),q=h("nav"),ee=h("h3"),fe=P("Recent Events"),oe=C(),te=h("div"),D(B.$$.fragment),ce=C(),J&&J.c(),this.h()},l(u){e=p(u,"SECTION",{class:!0});var I=$(e);t=p(I,"SECTION",{class:!0});var j=$(t);N(n.$$.fragment,j),l=y(j),N(o.$$.fragment,j),a=y(j),s=p(j,"DIV",{class:!0});var G=$(s);N(i.$$.fragment,G),c=y(G),N(_.$$.fragment,G),G.forEach(m),w=y(j),N(k.$$.fragment,j),S=y(j),F&&F.l(j),g=y(j),N(d.$$.fragment,j),j.forEach(m),v=y(I),V=p(I,"SECTION",{class:!0});var ne=$(V);N(H.$$.fragment,ne),U=y(ne),N(Q.$$.fragment,ne),ne.forEach(m),ie=y(I),N(z.$$.fragment,I),Z=y(I),N(K.$$.fragment,I),x=y(I),L=p(I,"SECTION",{id:!0});var le=$(L);q=p(le,"NAV",{class:!0});var re=$(q);ee=p(re,"H3",{class:!0});var ae=$(ee);fe=W(ae,"Recent Events"),ae.forEach(m),oe=y(re),te=p(re,"DIV",{id:!0,class:!0});var se=$(te);N(B.$$.fragment,se),se.forEach(m),re.forEach(m),ce=y(le),J&&J.l(le),le.forEach(m),I.forEach(m),this.h()},h(){b(s,"class","flex gap-1 flex-col md:flex-row md:gap-6"),b(t,"class","flex flex-col gap-1"),b(V,"class","flex gap-4 w-full flex-col lg:flex-row"),b(ee,"class","text-lg font-medium"),b(te,"id","event-view-toggle"),b(te,"class","flex gap-4"),b(q,"class","flex gap-4 justify-between items-end pb-4"),b(L,"id","event-history"),b(e,"class","flex flex-col gap-4")},m(u,I){O(u,e,I),f(e,t),R(n,t,null),f(t,l),R(o,t,null),f(t,a),f(t,s),R(i,s,null),f(s,c),R(_,s,null),f(t,w),R(k,t,null),f(t,S),F&&F.m(t,null),f(t,g),R(d,t,null),f(e,v),f(e,V),R(H,V,null),f(V,U),R(Q,V,null),f(e,ie),R(z,e,null),f(e,Z),R(K,e,null),f(e,x),f(e,L),f(L,q),f(q,ee),f(ee,fe),f(q,oe),f(q,te),R(B,te,null),f(L,ce),J&&J.m(L,null),X=!0},p(u,[I]){var me;const j={};I&2&&(j.content=u[1].name),n.$set(j);const G={};I&2&&(G.content=u[1].runId),o.$set(G);const ne={};I&2&&(ne.content=he(u[1].startTime,"UTC")),i.$set(ne);const le={};I&2&&(le.content=he(u[1].endTime,"UTC")),_.$set(le);const re={};I&2&&(re.content=u[1].taskQueue),k.$set(re),(me=u[1])!=null&&me.parent?F?(F.p(u,I),I&2&&E(F,1)):(F=Oe(u),F.c(),E(F,1),F.m(t,g)):F&&(ke(),T(F,1,1,()=>{F=null}),ve());const ae={};I&2&&(ae.content=u[1].stateTransitionCount),d.$set(ae);const se={};I&2&&(se.isRunning=u[1].isRunning),Q.$set(se);const _e={};I&1&&(_e.namespace=u[0]),I&2&&(_e.workflow=u[1]),z.$set(_e);const ge={};I&4100&&(ge.$$scope={dirty:I,ctx:u}),B.$set(ge),J&&J.p&&(!X||I&4096)&&Ge(J,ue,u,u[12],X?Xe(ue,u[12],I,null):Ke(u[12]),null)},i(u){X||(E(n.$$.fragment,u),E(o.$$.fragment,u),E(i.$$.fragment,u),E(_.$$.fragment,u),E(k.$$.fragment,u),E(F),E(d.$$.fragment,u),E(H.$$.fragment,u),E(Q.$$.fragment,u),E(z.$$.fragment,u),E(K.$$.fragment,u),E(B.$$.fragment,u),E(J,u),X=!0)},o(u){T(n.$$.fragment,u),T(o.$$.fragment,u),T(i.$$.fragment,u),T(_.$$.fragment,u),T(k.$$.fragment,u),T(F),T(d.$$.fragment,u),T(H.$$.fragment,u),T(Q.$$.fragment,u),T(z.$$.fragment,u),T(K.$$.fragment,u),T(B.$$.fragment,u),T(J,u),X=!1},d(u){u&&m(e),A(n),A(o),A(i),A(_),A(k),F&&F.d(),A(d),A(H),A(Q),A(z),A(K),A(B),J&&J.d(u)}}}const pn=async function({params:r,url:e,stuff:t,fetch:n}){var l;const{workflow:o}=t,{namespace:a}=r,s={namespace:a,workflowId:o.id,runId:o.runId,reverse:Boolean((l=e==null?void 0:e.searchParams)===null||l===void 0?void 0:l.get("sort"))},{events:i,eventGroups:c}=await Ye(s,n);return{props:{namespace:a,workflow:o,events:i,eventGroups:c},stuff:{events:i,eventGroups:c}}};function Mt(r,e,t){let n;He(r,ot,v=>t(2,n=v));let{$$slots:l={},$$scope:o}=e,{namespace:a}=e,{workflow:s}=e,{events:i}=e;const{input:c,result:_}=gt(i),w=(v,V)=>({namespace:a,workflow:s.id,run:s.runId,view:v,eventId:V}),k={namespace:a,workflow:s.id,run:s.runId},S=()=>Ie("feed"),g=()=>Ie("compact"),d=()=>Ie("json");return r.$$set=v=>{"namespace"in v&&t(0,a=v.namespace),"workflow"in v&&t(1,s=v.workflow),"events"in v&&t(7,i=v.events),"$$scope"in v&&t(12,o=v.$$scope)},[a,s,n,c,_,w,k,i,l,S,g,d,o]}class $n extends pe{constructor(e){super(),$e(this,e,Mt,qt,we,{namespace:0,workflow:1,events:7})}}export{$n as default,pn as load};
