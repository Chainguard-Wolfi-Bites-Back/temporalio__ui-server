var Xe=Object.defineProperty;var ne=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var Oe=(r,e,t)=>e in r?Xe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fe=(r,e)=>{for(var t in e||(e={}))Le.call(e,t)&&Oe(r,t,e[t]);if(ne)for(var t of ne(e))je.call(e,t)&&Oe(r,t,e[t]);return r};var Ve=(r,e)=>{var t={};for(var s in r)Le.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&ne)for(var s of ne(r))e.indexOf(s)<0&&je.call(r,s)&&(t[s]=r[s]);return t};import{S as Z,i as x,s as ee,e as g,c as p,a as v,d,b as E,U,g as L,W as Ye,n as Ze,o as H,p as xe,q as T,I as oe,ag as et,K as ie,M as fe,N as ce,O as ue,P as tt,w as J,k,x as R,m as A,y as B,L as m,B as q,aJ as st,T as le,r as rt,t as N,h as O,f as Je,J as nt,l as Re,v as at,aC as lt,aK as ot,aL as it,aM as ft}from"../../../../../../../chunks/vendor-ff19c65d.js";import{h as ct,c as pe,r as ut,a as mt}from"../../../../../../../chunks/route-for-api-1884f93e.js";import{t as dt}from"../../../../../../../chunks/index-5fb38f85.js";import{b as ve,f as Be}from"../../../../../../../chunks/route-for-47027f7b.js";import{p as me}from"../../../../../../../chunks/stores-4aa32d62.js";import{a as qe}from"../../../../../../../chunks/append-query-parameters-b8619cc0.js";import{g as ht}from"../../../../../../../chunks/get-context-e35b97dd.js";import{C as Me}from"../../../../../../../chunks/code-block-9df75e9c.js";import{f as _t}from"../../../../../../../chunks/format-date-25613f84.js";import"../../../../../../../chunks/navigation-093db9e2.js";import"../../../../../../../chunks/singletons-a6a7384f.js";import"../../../../../../../chunks/notifications-089fbae0.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/data-converter-config-67b393c3.js";import"../../../../../../../chunks/atob-5f9d7101.js";const We=(r={},e={})=>{const t=Fe({},r);for(const s of Object.keys(e)){const n=t[s];Array.isArray(n)?t[s]=t[s].concat(e[s]):typeof n=="object"&&!Array.isArray(n)?t[s]=We(t[s],e[s]):t[s]=e[s]}return t},Qe=async(r,{onStart:e,onUpdate:t,onComplete:s,onError:n=ct,token:l,previousProps:c}={})=>{!c&&pe(e)&&e();try{const a=await r(l),{nextPageToken:u}=a,_=Ve(a,["nextPageToken"]),f=We(c,_);return pe(t)&&t(f,_),u?Qe(r,{onStart:e,onUpdate:t,onComplete:s,token:u,previousProps:f}):(pe(s)&&s(f),f)}catch(i){n(i)}},Ue=async({namespace:r,executionId:e,runId:t,onStart:s,onUpdate:n,onComplete:l},c=fetch)=>(await Qe(async i=>ut(mt("events",{namespace:r,executionId:e,runId:t}),{token:i,request:c}),{onStart:s,onUpdate:n,onComplete:l})).history.events,gt=async(r,e=fetch)=>Ue(r,e).then(dt),pt=r=>{var l,c,a,i;let e,t;const s=r==null?void 0:r.find(u=>!!u.workflowExecutionStartedEventAttributes),n=r==null?void 0:r.find(u=>!!u.workflowExecutionCompletedEventAttributes);return s&&(e=JSON.stringify((c=(l=s==null?void 0:s.workflowExecutionStartedEventAttributes)==null?void 0:l.input)==null?void 0:c.payloads)),n&&(t=JSON.stringify((i=(a=n==null?void 0:n.workflowExecutionCompletedEventAttributes)==null?void 0:a.result)==null?void 0:i.payloads)),{input:e,result:t}};function vt(r){let e;const t=r[7].default,s=ie(t,r,r[6],null);return{c(){s&&s.c()},l(n){s&&s.l(n)},m(n,l){s&&s.m(n,l),e=!0},p(n,l){s&&s.p&&(!e||l&64)&&fe(s,t,n,n[6],e?ue(t,n[6],l,null):ce(n[6]),null)},i(n){e||(T(s,n),e=!0)},o(n){H(s,n),e=!1},d(n){s&&s.d(n)}}}function $t(r){let e,t,s,n;t=new tt({props:{icon:r[0],scale:r[2]}});const l=r[7].default,c=ie(l,r,r[6],null);return{c(){e=g("div"),J(t.$$.fragment),s=k(),c&&c.c(),this.h()},l(a){e=p(a,"DIV",{class:!0});var i=v(e);R(t.$$.fragment,i),s=A(i),c&&c.l(i),i.forEach(d),this.h()},h(){E(e,"class","flex gap-2 items-center")},m(a,i){L(a,e,i),B(t,e,null),m(e,s),c&&c.m(e,null),n=!0},p(a,i){const u={};i&1&&(u.icon=a[0]),i&4&&(u.scale=a[2]),t.$set(u),c&&c.p&&(!n||i&64)&&fe(c,l,a,a[6],n?ue(l,a[6],i,null):ce(a[6]),null)},i(a){n||(T(t.$$.fragment,a),T(c,a),n=!0)},o(a){H(t.$$.fragment,a),H(c,a),n=!1},d(a){a&&d(e),q(t),c&&c.d(a)}}}function bt(r){let e,t,s,n,l,c,a;const i=[$t,vt],u=[];function _(f,o){return f[0]?0:1}return t=_(r),s=u[t]=i[t](r),{c(){e=g("a"),s.c(),this.h()},l(f){e=p(f,"A",{class:!0,href:!0});var o=v(e);s.l(o),o.forEach(d),this.h()},h(){E(e,"class","border-2 py-2 px-4 hover:text-white hover:bg-gray-600 flex items-center justify-center svelte-1orl6nd"),E(e,"href",n=qe(r[3],r[5].url.searchParams)),U(e,"rounded-lg",!r[1]),U(e,"active",r[5].url.pathname.includes(r[4])),U(e,"group",r[1])},m(f,o){L(f,e,o),u[t].m(e,null),l=!0,c||(a=Ye(e,"click",r[8]),c=!0)},p(f,[o]){let b=t;t=_(f),t===b?u[t].p(f,o):(Ze(),H(u[b],1,1,()=>{u[b]=null}),xe(),s=u[t],s?s.p(f,o):(s=u[t]=i[t](f),s.c()),T(s,1),s.m(e,null)),(!l||o&40&&n!==(n=qe(f[3],f[5].url.searchParams)))&&E(e,"href",n),o&2&&U(e,"rounded-lg",!f[1]),o&48&&U(e,"active",f[5].url.pathname.includes(f[4])),o&2&&U(e,"group",f[1])},i(f){l||(T(s),l=!0)},o(f){H(s),l=!1},d(f){f&&d(e),u[t].d(),c=!1,a()}}}function Et(r,e,t){let s;oe(r,me,o=>t(5,s=o));let{$$slots:n={},$$scope:l}=e,{icon:c}=e,{group:a=ht("group")}=e,{scale:i=1}=e,{href:u="#"}=e,{base:_=u}=e;function f(o){et.call(this,r,o)}return r.$$set=o=>{"icon"in o&&t(0,c=o.icon),"group"in o&&t(1,a=o.group),"scale"in o&&t(2,i=o.scale),"href"in o&&t(3,u=o.href),"base"in o&&t(4,_=o.base),"$$scope"in o&&t(6,l=o.$$scope)},[c,a,i,u,_,s,l,n,f]}class ae extends Z{constructor(e){super();x(this,e,Et,bt,ee,{icon:0,group:1,scale:2,href:3,base:4})}}function wt(r){let e,t;return e=new ae({props:{icon:st}}),e.$on("click",r[0]),{c(){J(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,n){B(e,s,n),t=!0},p:le,i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function yt(r,e,t){let s;oe(r,me,i=>t(1,s=i));const{workflow:n,run:l,namespace:c}=s.params;return[async()=>{const i=await Ue({namespace:c,executionId:n,runId:l}),u=JSON.stringify(i,null,2);_(u,`${l}/events.json`,"text/plain");function _(f,o,b){const h=document.createElement("a"),y=new Blob([f],{type:b});h.href=URL.createObjectURL(y),h.download=o,h.click()}}]}class kt extends Z{constructor(e){super();x(this,e,yt,wt,ee,{})}}function At(r){let e,t;const s=r[1].default,n=ie(s,r,r[0],null);return{c(){e=g("div"),n&&n.c(),this.h()},l(l){e=p(l,"DIV",{class:!0});var c=v(e);n&&n.l(c),c.forEach(d),this.h()},h(){E(e,"class","flex")},m(l,c){L(l,e,c),n&&n.m(e,null),t=!0},p(l,[c]){n&&n.p&&(!t||c&1)&&fe(n,s,l,l[0],t?ue(s,l[0],c,null):ce(l[0]),null)},i(l){t||(T(n,l),t=!0)},o(l){H(n,l),t=!1},d(l){l&&d(e),n&&n.d(l)}}}function It(r,e,t){let{$$slots:s={},$$scope:n}=e;return rt("group",!0),r.$$set=l=>{"$$scope"in l&&t(0,n=l.$$scope)},[n,s]}class Ht extends Z{constructor(e){super();x(this,e,It,At,ee,{})}}function Ge(r,e,t){const s=r.slice();return s[2]=e[t].id,s[3]=lt(e[t],["id"]),s}function Tt(r){let e,t,s,n,l,c,a,i,u,_=r[0],f=[];for(let o=0;o<_.length;o+=1)f[o]=Ke(Ge(r,_,o));return{c(){e=g("section"),t=g("h3"),s=N("Pending Activities"),n=k(),l=g("table");for(let o=0;o<f.length;o+=1)f[o].c();c=k(),a=g("div"),i=g("a"),u=N("Show all"),this.h()},l(o){e=p(o,"SECTION",{class:!0});var b=v(e);t=p(b,"H3",{class:!0});var h=v(t);s=O(h,"Pending Activities"),h.forEach(d),n=A(b),l=p(b,"TABLE",{class:!0});var y=v(l);for(let C=0;C<f.length;C+=1)f[C].l(y);y.forEach(d),c=A(b),a=p(b,"DIV",{class:!0});var F=v(a);i=p(F,"A",{href:!0,class:!0});var S=v(i);u=O(S,"Show all"),S.forEach(d),F.forEach(d),b.forEach(d),this.h()},h(){E(t,"class","text-lg font-medium mb-4"),E(l,"class","w-full table-auto space-x-4"),E(i,"href",ze),E(i,"class","border-b-2 border-blue-600"),E(a,"class","text-right"),E(e,"class","border-2 border-gray-300 rounded-lg p-4")},m(o,b){L(o,e,b),m(e,t),m(t,s),m(e,n),m(e,l);for(let h=0;h<f.length;h+=1)f[h].m(l,null);m(e,c),m(e,a),m(a,i),m(i,u)},p(o,b){if(b&1){_=o[0];let h;for(h=0;h<_.length;h+=1){const y=Ge(o,_,h);f[h]?f[h].p(y,b):(f[h]=Ke(y),f[h].c(),f[h].m(l,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=_.length}},d(o){o&&d(e),nt(f,o)}}}function Ke(r){var be;let e,t,s,n=r[3].activityId+"",l,c,a,i,u,_,f,o,b,h,y=((be=r[3].activityType)==null?void 0:be.name)+"",F,S,C,P,M,I,$,w,D,W=r[3].lastFailure+"",G,Q,V,K,z,de,he,X,$e=_t(r[3].lastHeartbeatTime)+"",_e,ge;return{c(){e=g("tr"),t=g("th"),s=g("a"),l=N(n),a=k(),i=g("td"),u=g("div"),_=g("h4"),f=N("Activity Name"),o=k(),b=g("p"),h=g("span"),F=N(y),S=k(),C=g("td"),P=g("div"),M=g("h3"),I=N("Last Failure"),$=k(),w=g("pre"),D=g("code"),G=N(W),Q=k(),V=g("td"),K=g("div"),z=g("h4"),de=N("Last Heartbeat Time"),he=k(),X=g("p"),_e=N($e),ge=k(),this.h()},l(Y){e=p(Y,"TR",{class:!0});var j=v(e);t=p(j,"TH",{class:!0});var Ee=v(t);s=p(Ee,"A",{href:!0});var we=v(s);l=O(we,n),we.forEach(d),Ee.forEach(d),a=A(j),i=p(j,"TD",{});var ye=v(i);u=p(ye,"DIV",{class:!0});var te=v(u);_=p(te,"H4",{});var ke=v(_);f=O(ke,"Activity Name"),ke.forEach(d),o=A(te),b=p(te,"P",{});var Ae=v(b);h=p(Ae,"SPAN",{class:!0});var Ie=v(h);F=O(Ie,y),Ie.forEach(d),Ae.forEach(d),te.forEach(d),ye.forEach(d),S=A(j),C=p(j,"TD",{});var He=v(C);P=p(He,"DIV",{class:!0});var se=v(P);M=p(se,"H3",{});var Te=v(M);I=O(Te,"Last Failure"),Te.forEach(d),$=A(se),w=p(se,"PRE",{style:!0,class:!0});var Pe=v(w);D=p(Pe,"CODE",{class:!0});var Se=v(D);G=O(Se,W),Se.forEach(d),Pe.forEach(d),se.forEach(d),He.forEach(d),Q=A(j),V=p(j,"TD",{});var De=v(V);K=p(De,"DIV",{class:!0});var re=v(K);z=p(re,"H4",{});var Ce=v(z);de=O(Ce,"Last Heartbeat Time"),Ce.forEach(d),he=A(re),X=p(re,"P",{});var Ne=v(X);_e=O(Ne,$e),Ne.forEach(d),re.forEach(d),De.forEach(d),ge=A(j),j.forEach(d),this.h()},h(){E(s,"href",c=ze+"#"+r[2]),E(t,"class","text-left font-normal text-gray-500"),E(h,"class","bg-gray-300 text-gray-700 px-2"),E(u,"class","flex gap-2"),E(D,"class","language-json"),Je(w,"padding","0 1em"),Je(w,"margin","0"),E(w,"class","rounded-lg"),E(P,"class","flex gap-2"),E(K,"class","flex gap-2"),E(e,"class","border-b-2 border-gray-300 pb-4 last-of-type:border-b-0")},m(Y,j){L(Y,e,j),m(e,t),m(t,s),m(s,l),m(e,a),m(e,i),m(i,u),m(u,_),m(_,f),m(u,o),m(u,b),m(b,h),m(h,F),m(e,S),m(e,C),m(C,P),m(P,M),m(M,I),m(P,$),m(P,w),m(w,D),m(D,G),m(e,Q),m(e,V),m(V,K),m(K,z),m(z,de),m(K,he),m(K,X),m(X,_e),m(e,ge)},p:le,d(Y){Y&&d(e)}}}function Pt(r){let e,t=r[0].length&&Tt(r);return{c(){t&&t.c(),e=Re()},l(s){t&&t.l(s),e=Re()},m(s,n){t&&t.m(s,n),L(s,e,n)},p(s,[n]){s[0].length&&t.p(s,n)},i:le,o:le,d(s){t&&t.d(s),s&&d(e)}}}const ze="../../pending-activities";function St(r,e,t){let s;oe(r,me,l=>t(1,s=l));const{pendingActivities:n}=s.stuff.workflow;return at(()=>{window.Prism.highlightAll()}),[n]}class Dt extends Z{constructor(e){super();x(this,e,St,Pt,ee,{})}}function Ct(r){let e;return{c(){e=N("Summary")},l(t){e=O(t,"Summary")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function Nt(r){let e;return{c(){e=N("Compact")},l(t){e=O(t,"Compact")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function Ot(r){let e;return{c(){e=N("JSON")},l(t){e=O(t,"JSON")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function Lt(r){let e,t,s,n,l,c;return e=new ae({props:{icon:ot,base:ve(r[3]("summary")),href:Be(r[3]("summary",r[0].params.eventId||"1")),$$slots:{default:[Ct]},$$scope:{ctx:r}}}),s=new ae({props:{icon:it,href:ve(r[3]("compact")),$$slots:{default:[Nt]},$$scope:{ctx:r}}}),l=new ae({props:{icon:ft,href:ve(r[3]("json")),$$slots:{default:[Ot]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment),t=k(),J(s.$$.fragment),n=k(),J(l.$$.fragment)},l(a){R(e.$$.fragment,a),t=A(a),R(s.$$.fragment,a),n=A(a),R(l.$$.fragment,a)},m(a,i){B(e,a,i),L(a,t,i),B(s,a,i),L(a,n,i),B(l,a,i),c=!0},p(a,i){const u={};i&1&&(u.href=Be(a[3]("summary",a[0].params.eventId||"1"))),i&256&&(u.$$scope={dirty:i,ctx:a}),e.$set(u);const _={};i&256&&(_.$$scope={dirty:i,ctx:a}),s.$set(_);const f={};i&256&&(f.$$scope={dirty:i,ctx:a}),l.$set(f)},i(a){c||(T(e.$$.fragment,a),T(s.$$.fragment,a),T(l.$$.fragment,a),c=!0)},o(a){H(e.$$.fragment,a),H(s.$$.fragment,a),H(l.$$.fragment,a),c=!1},d(a){q(e,a),a&&d(t),q(s,a),a&&d(n),q(l,a)}}}function jt(r){let e,t,s,n,l,c,a,i,u,_,f,o,b,h,y,F,S,C,P;s=new Me({props:{heading:"Input",content:r[1],framed:!0}}),l=new Me({props:{heading:"Result",content:r[2],framed:!0}}),a=new Dt({}),y=new Ht({props:{$$slots:{default:[Lt]},$$scope:{ctx:r}}}),S=new kt({});const M=r[7].default,I=ie(M,r,r[8],null);return{c(){e=g("section"),t=g("div"),J(s.$$.fragment),n=k(),J(l.$$.fragment),c=k(),J(a.$$.fragment),i=k(),u=g("section"),_=g("nav"),f=g("h3"),o=N("Event History"),b=k(),h=g("div"),J(y.$$.fragment),F=k(),J(S.$$.fragment),C=k(),I&&I.c(),this.h()},l($){e=p($,"SECTION",{class:!0});var w=v(e);t=p(w,"DIV",{class:!0});var D=v(t);R(s.$$.fragment,D),n=A(D),R(l.$$.fragment,D),D.forEach(d),c=A(w),R(a.$$.fragment,w),i=A(w),u=p(w,"SECTION",{id:!0});var W=v(u);_=p(W,"NAV",{class:!0});var G=v(_);f=p(G,"H3",{class:!0});var Q=v(f);o=O(Q,"Event History"),Q.forEach(d),b=A(G),h=p(G,"DIV",{class:!0});var V=v(h);R(y.$$.fragment,V),F=A(V),R(S.$$.fragment,V),V.forEach(d),G.forEach(d),C=A(W),I&&I.l(W),W.forEach(d),w.forEach(d),this.h()},h(){E(t,"class","flex gap-4"),E(f,"class","text-lg font-medium"),E(h,"class","flex gap-4"),E(_,"class","flex gap-4 justify-between items-end pb-4"),E(u,"id","event-history"),E(e,"class","flex flex-col gap-4")},m($,w){L($,e,w),m(e,t),B(s,t,null),m(t,n),B(l,t,null),m(e,c),B(a,e,null),m(e,i),m(e,u),m(u,_),m(_,f),m(f,o),m(_,b),m(_,h),B(y,h,null),m(h,F),B(S,h,null),m(u,C),I&&I.m(u,null),P=!0},p($,[w]){const D={};w&257&&(D.$$scope={dirty:w,ctx:$}),y.$set(D),I&&I.p&&(!P||w&256)&&fe(I,M,$,$[8],P?ue(M,$[8],w,null):ce($[8]),null)},i($){P||(T(s.$$.fragment,$),T(l.$$.fragment,$),T(a.$$.fragment,$),T(y.$$.fragment,$),T(S.$$.fragment,$),T(I,$),P=!0)},o($){H(s.$$.fragment,$),H(l.$$.fragment,$),H(a.$$.fragment,$),H(y.$$.fragment,$),H(S.$$.fragment,$),H(I,$),P=!1},d($){$&&d(e),q(s),q(l),q(a),q(y),q(S),I&&I.d($)}}}const es=async function({params:r,stuff:e}){const{workflow:t}=e,{namespace:s}=r,n={namespace:s,executionId:t.id,runId:t.runId},{events:l,eventGroups:c}=await gt(n);return{props:{namespace:s,workflow:t,events:l,eventGroups:c},stuff:{events:l,eventGroups:c}}};function Ft(r,e,t){let s;oe(r,me,o=>t(0,s=o));let{$$slots:n={},$$scope:l}=e,{namespace:c}=e,{workflow:a}=e,{events:i}=e;const{input:u,result:_}=pt(i),f=(o,b)=>({namespace:c,workflow:a.id,run:a.runId,view:o,eventId:b});return r.$$set=o=>{"namespace"in o&&t(4,c=o.namespace),"workflow"in o&&t(5,a=o.workflow),"events"in o&&t(6,i=o.events),"$$scope"in o&&t(8,l=o.$$scope)},[s,u,_,f,c,a,i,n,l]}class ts extends Z{constructor(e){super();x(this,e,Ft,jt,ee,{namespace:4,workflow:5,events:6})}}export{ts as default,es as load};
