import{S as ke,i as ye,s as Ie,e as _,t as D,k as I,w as F,c as $,a as h,h as O,d as c,m as C,x as L,b as E,g as V,T as a,y as R,a1 as Ce,ag as Te,q as W,o as x,B as j,l as he,L as Se,v as Ae,ah as Ne,f as ve,N as De,O as Oe,P as Pe,Q as Ve}from"../../../../../../../chunks/index-4f955b1f.js";import{a as He}from"../../../../../../../chunks/events-service-fa8ff7ec.js";import{b as We,c as xe,d as Fe,e as Le}from"../../../../../../../chunks/index.es-3f7bba01.js";import{f as Re,d as U}from"../../../../../../../chunks/route-for-a8f6a277.js";import{i as je}from"../../../../../../../chunks/index-a8ee0a5c.js";import{T as Je,a as ee}from"../../../../../../../chunks/toggle-buttons-93fba00e.js";import{C as we}from"../../../../../../../chunks/code-block-ea06467c.js";import{p as qe}from"../../../../../../../chunks/stores-8f54f2cb.js";import{f as Be}from"../../../../../../../chunks/format-date-0917cdb3.js";import{L as Ge}from"../../../../../../../chunks/link-cbe110dd.js";import"../../../../../../../chunks/route-for-api-cdd620e2.js";import"../../../../../../../chunks/navigation-3f1ea447.js";import"../../../../../../../chunks/singletons-d1fb5791.js";import"../../../../../../../chunks/index-eae5a65e.js";import"../../../../../../../chunks/notifications-2d1c3827.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/index-a81b8c9e.js";import"../../../../../../../chunks/data-converter-config-728a6f58.js";import"../../../../../../../chunks/atob-5f9d7101.js";import"../../../../../../../chunks/get-event-categorization-b2bce139.js";import"../../../../../../../chunks/simplify-attributes-7a858880.js";const Me=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],Qe=r=>{for(const e of Me)if(r.eventType===e)return!0;return!1},ze=r=>{for(const e of r)if(Qe(e))return e},Ke=r=>je(r)?r.attributes.result===null?null:r.attributes.result.payloads:r.attributes,Ue=r=>{var l,u;let e,t;const s=r==null?void 0:r.find(m=>!!m.workflowExecutionStartedEventAttributes),i=ze(r);return s&&(e=JSON.stringify((u=(l=s==null?void 0:s.workflowExecutionStartedEventAttributes)==null?void 0:l.input)==null?void 0:u.payloads)),i&&(t=JSON.stringify(Ke(i))),{input:e,result:t}};function Ee(r,e,t){const s=r.slice();return s[6]=e[t].id,s[7]=Ne(e[t],["id"]),s}function Xe(r){let e,t,s,i,l,u=[],m=new Map,v,o,n,p,k=r[0];const T=f=>f[6];for(let f=0;f<k.length;f+=1){let d=Ee(r,k,f),b=T(d);m.set(b,u[f]=be(b,d))}return n=new Ge({props:{href:r[1],$$slots:{default:[Ye]},$$scope:{ctx:r}}}),{c(){e=_("section"),t=_("h3"),s=D("Pending Activities"),i=I(),l=_("section");for(let f=0;f<u.length;f+=1)u[f].c();v=I(),o=_("div"),F(n.$$.fragment),this.h()},l(f){e=$(f,"SECTION",{class:!0});var d=h(e);t=$(d,"H3",{class:!0});var b=h(t);s=O(b,"Pending Activities"),b.forEach(c),i=C(d),l=$(d,"SECTION",{class:!0});var S=h(l);for(let w=0;w<u.length;w+=1)u[w].l(S);S.forEach(c),v=C(d),o=$(d,"DIV",{class:!0});var N=h(o);L(n.$$.fragment,N),N.forEach(c),d.forEach(c),this.h()},h(){E(t,"class","text-lg font-medium mb-4"),E(l,"class","w-full table-auto space-x-4"),E(o,"class","text-right"),E(e,"class","border-2 border-gray-300 rounded-lg p-4")},m(f,d){V(f,e,d),a(e,t),a(t,s),a(e,i),a(e,l);for(let b=0;b<u.length;b+=1)u[b].m(l,null);a(e,v),a(e,o),R(n,o,null),p=!0},p(f,d){d&3&&(k=f[0],u=Ce(u,d,T,1,f,k,m,l,Te,be,null,Ee));const b={};d&1024&&(b.$$scope={dirty:d,ctx:f}),n.$set(b)},i(f){p||(W(n.$$.fragment,f),p=!0)},o(f){x(n.$$.fragment,f),p=!1},d(f){f&&c(e);for(let d=0;d<u.length;d+=1)u[d].d();j(n)}}}function be(r,e){let t,s,i=e[7].activityId+"",l,u,m,v,o,n,p,k,T,f=e[7].activityType+"",d,b,S,N,w,g,y,A,H,q=e[7].lastFailure+"",G,M,Q,J,z,te,se,K,ae=Be(e[7].lastHeartbeatTime)+"",oe,re;return{key:r,first:null,c(){t=_("a"),s=_("div"),l=D(i),u=I(),m=_("div"),v=_("div"),o=_("h4"),n=D("Activity Name"),p=I(),k=_("p"),T=_("span"),d=D(f),b=I(),S=_("div"),N=_("div"),w=_("h3"),g=D("Last Failure"),y=I(),A=_("pre"),H=_("code"),G=D(q),M=I(),Q=_("div"),J=_("div"),z=_("h4"),te=D("Last Heartbeat Time"),se=I(),K=_("p"),oe=D(ae),re=I(),this.h()},l(B){t=$(B,"A",{class:!0,href:!0});var P=h(t);s=$(P,"DIV",{class:!0});var le=h(s);l=O(le,i),le.forEach(c),u=C(P),m=$(P,"DIV",{class:!0});var ne=h(m);v=$(ne,"DIV",{class:!0});var X=h(v);o=$(X,"H4",{});var ie=h(o);n=O(ie,"Activity Name"),ie.forEach(c),p=C(X),k=$(X,"P",{});var fe=h(k);T=$(fe,"SPAN",{class:!0});var ce=h(T);d=O(ce,f),ce.forEach(c),fe.forEach(c),X.forEach(c),ne.forEach(c),b=C(P),S=$(P,"DIV",{class:!0});var ue=h(S);N=$(ue,"DIV",{class:!0});var Y=h(N);w=$(Y,"H3",{});var me=h(w);g=O(me,"Last Failure"),me.forEach(c),y=C(Y),A=$(Y,"PRE",{style:!0,class:!0});var de=h(A);H=$(de,"CODE",{class:!0});var pe=h(H);G=O(pe,q),pe.forEach(c),de.forEach(c),Y.forEach(c),ue.forEach(c),M=C(P),Q=$(P,"DIV",{class:!0});var ge=h(Q);J=$(ge,"DIV",{class:!0});var Z=h(J);z=$(Z,"H4",{});var _e=h(z);te=O(_e,"Last Heartbeat Time"),_e.forEach(c),se=C(Z),K=$(Z,"P",{});var $e=h(K);oe=O($e,ae),$e.forEach(c),Z.forEach(c),ge.forEach(c),re=C(P),P.forEach(c),this.h()},h(){E(s,"class","text-left font-normal text-gray-500 w-40"),E(T,"class","bg-gray-300 text-gray-700 px-2"),E(v,"class","flex gap-2"),E(m,"class","w-full"),E(H,"class","language-json"),ve(A,"padding","0 1em"),ve(A,"margin","0"),E(A,"class","rounded-lg"),E(N,"class","flex gap-2"),E(S,"class","w-full"),E(J,"class","flex gap-2"),E(Q,"class","w-full"),E(t,"class","flex content-between w-full border-b-2 border-gray-300 p-2 last-of-type:border-b-0 hover:bg-gray-50"),E(t,"href",e[1]),this.first=t},m(B,P){V(B,t,P),a(t,s),a(s,l),a(t,u),a(t,m),a(m,v),a(v,o),a(o,n),a(v,p),a(v,k),a(k,T),a(T,d),a(t,b),a(t,S),a(S,N),a(N,w),a(w,g),a(N,y),a(N,A),a(A,H),a(H,G),a(t,M),a(t,Q),a(Q,J),a(J,z),a(z,te),a(J,se),a(J,K),a(K,oe),a(t,re)},p(B,P){e=B},d(B){B&&c(t)}}}function Ye(r){let e;return{c(){e=D("Show all")},l(t){e=O(t,"Show all")},m(t,s){V(t,e,s)},d(t){t&&c(e)}}}function Ze(r){let e,t,s=r[0].length&&Xe(r);return{c(){s&&s.c(),e=he()},l(i){s&&s.l(i),e=he()},m(i,l){s&&s.m(i,l),V(i,e,l),t=!0},p(i,[l]){i[0].length&&s.p(i,l)},i(i){t||(W(s),t=!0)},o(i){x(s),t=!1},d(i){s&&s.d(i),i&&c(e)}}}function et(r,e,t){let s;Se(r,qe,o=>t(2,s=o));const{pendingActivities:i}=s.stuff.workflow,{namespace:l,workflow:u,run:m}=s.params,v=Re({namespace:l,workflow:u,run:m});return Ae(()=>{window.Prism.highlightAll()}),[i,v]}class tt extends ke{constructor(e){super(),ye(this,e,et,Ze,Ie,{})}}function st(r){let e;return{c(){e=D("Summary")},l(t){e=O(t,"Summary")},m(t,s){V(t,e,s)},d(t){t&&c(e)}}}function ot(r){let e;return{c(){e=D("Full")},l(t){e=O(t,"Full")},m(t,s){V(t,e,s)},d(t){t&&c(e)}}}function rt(r){let e;return{c(){e=D("Compact")},l(t){e=O(t,"Compact")},m(t,s){V(t,e,s)},d(t){t&&c(e)}}}function at(r){let e;return{c(){e=D("JSON")},l(t){e=O(t,"JSON")},m(t,s){V(t,e,s)},d(t){t&&c(e)}}}function lt(r){let e,t,s,i,l,u,m,v;return e=new ee({props:{icon:We,base:U(r[2]("summary")),href:U(r[2]("summary")),$$slots:{default:[st]},$$scope:{ctx:r}}}),s=new ee({props:{icon:xe,href:U(r[2]("full")),$$slots:{default:[ot]},$$scope:{ctx:r}}}),l=new ee({props:{icon:Fe,href:U(r[2]("compact")),$$slots:{default:[rt]},$$scope:{ctx:r}}}),m=new ee({props:{icon:Le,href:U(r[2]("json")),$$slots:{default:[at]},$$scope:{ctx:r}}}),{c(){F(e.$$.fragment),t=I(),F(s.$$.fragment),i=I(),F(l.$$.fragment),u=I(),F(m.$$.fragment)},l(o){L(e.$$.fragment,o),t=C(o),L(s.$$.fragment,o),i=C(o),L(l.$$.fragment,o),u=C(o),L(m.$$.fragment,o)},m(o,n){R(e,o,n),V(o,t,n),R(s,o,n),V(o,i,n),R(l,o,n),V(o,u,n),R(m,o,n),v=!0},p(o,n){const p={};n&128&&(p.$$scope={dirty:n,ctx:o}),e.$set(p);const k={};n&128&&(k.$$scope={dirty:n,ctx:o}),s.$set(k);const T={};n&128&&(T.$$scope={dirty:n,ctx:o}),l.$set(T);const f={};n&128&&(f.$$scope={dirty:n,ctx:o}),m.$set(f)},i(o){v||(W(e.$$.fragment,o),W(s.$$.fragment,o),W(l.$$.fragment,o),W(m.$$.fragment,o),v=!0)},o(o){x(e.$$.fragment,o),x(s.$$.fragment,o),x(l.$$.fragment,o),x(m.$$.fragment,o),v=!1},d(o){j(e,o),o&&c(t),j(s,o),o&&c(i),j(l,o),o&&c(u),j(m,o)}}}function nt(r){let e,t,s,i,l,u,m,v,o,n,p,k,T,f,d,b,S;s=new we({props:{heading:"Input",content:r[0],framed:!0}}),l=new we({props:{heading:"Result",content:r[1],framed:!0}}),m=new tt({}),d=new Je({props:{$$slots:{default:[lt]},$$scope:{ctx:r}}});const N=r[6].default,w=De(N,r,r[7],null);return{c(){e=_("section"),t=_("div"),F(s.$$.fragment),i=I(),F(l.$$.fragment),u=I(),F(m.$$.fragment),v=I(),o=_("section"),n=_("nav"),p=_("h3"),k=D("Recent Events"),T=I(),f=_("div"),F(d.$$.fragment),b=I(),w&&w.c(),this.h()},l(g){e=$(g,"SECTION",{class:!0});var y=h(e);t=$(y,"DIV",{class:!0});var A=h(t);L(s.$$.fragment,A),i=C(A),L(l.$$.fragment,A),A.forEach(c),u=C(y),L(m.$$.fragment,y),v=C(y),o=$(y,"SECTION",{id:!0});var H=h(o);n=$(H,"NAV",{class:!0});var q=h(n);p=$(q,"H3",{class:!0});var G=h(p);k=O(G,"Recent Events"),G.forEach(c),T=C(q),f=$(q,"DIV",{id:!0,class:!0});var M=h(f);L(d.$$.fragment,M),M.forEach(c),q.forEach(c),b=C(H),w&&w.l(H),H.forEach(c),y.forEach(c),this.h()},h(){E(t,"class","flex gap-4"),E(p,"class","text-lg font-medium"),E(f,"id","event-view-toggle"),E(f,"class","flex gap-4"),E(n,"class","flex gap-4 justify-between items-end pb-4"),E(o,"id","event-history"),E(e,"class","flex flex-col gap-4")},m(g,y){V(g,e,y),a(e,t),R(s,t,null),a(t,i),R(l,t,null),a(e,u),R(m,e,null),a(e,v),a(e,o),a(o,n),a(n,p),a(p,k),a(n,T),a(n,f),R(d,f,null),a(o,b),w&&w.m(o,null),S=!0},p(g,[y]){const A={};y&128&&(A.$$scope={dirty:y,ctx:g}),d.$set(A),w&&w.p&&(!S||y&128)&&Oe(w,N,g,g[7],S?Ve(N,g[7],y,null):Pe(g[7]),null)},i(g){S||(W(s.$$.fragment,g),W(l.$$.fragment,g),W(m.$$.fragment,g),W(d.$$.fragment,g),W(w,g),S=!0)},o(g){x(s.$$.fragment,g),x(l.$$.fragment,g),x(m.$$.fragment,g),x(d.$$.fragment,g),x(w,g),S=!1},d(g){g&&c(e),j(s),j(l),j(m),j(d),w&&w.d(g)}}}const Nt=async function({params:r,stuff:e,fetch:t}){const{workflow:s}=e,{namespace:i}=r,l={namespace:i,workflowId:s.id,runId:s.runId},{events:u,eventGroups:m}=await He(l,t);return{props:{namespace:i,workflow:s,events:u,eventGroups:m},stuff:{events:u,eventGroups:m}}};function it(r,e,t){let{$$slots:s={},$$scope:i}=e,{namespace:l}=e,{workflow:u}=e,{events:m}=e;const{input:v,result:o}=Ue(m),n=(p,k)=>({namespace:l,workflow:u.id,run:u.runId,view:p,eventId:k});return r.$$set=p=>{"namespace"in p&&t(3,l=p.namespace),"workflow"in p&&t(4,u=p.workflow),"events"in p&&t(5,m=p.events),"$$scope"in p&&t(7,i=p.$$scope)},[v,o,n,l,u,m,s,i]}class Dt extends ke{constructor(e){super(),ye(this,e,it,nt,Ie,{namespace:3,workflow:4,events:5})}}export{Dt as default,Nt as load};
