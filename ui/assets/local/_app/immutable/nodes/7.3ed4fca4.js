import{S as ve,i as Ie,s as Ee,k as L,y as S,a as Y,q as K,l as O,m as j,z as W,h as _,c as z,r as G,n as J,b as y,F as q,A as V,u as he,g as w,d as $,B as M,C as X,R as ae,a2 as mt,w as se,P as ie,Q as ue,e as ke,v as pe,f as de,a5 as pt,a8 as eo,W as le,o as dt,a4 as Be,U as _t,V as gt,K as wt,L as ht,M as $t,N as kt}from"../chunks/index.bac36631.js";import{p as Me}from"../chunks/stores.7922eae6.js";import{L as qe}from"../chunks/link.67038376.js";import{t as k}from"../chunks/translate.d045ded2.js";import{w as bt}from"../chunks/workflows.ad92b786.js";import{a as Ve,g as $e,h as Re,i as Ce,j as Ae,k as ye}from"../chunks/route-for.aae66e2a.js";import{L as to}from"../chunks/loading.dbf06725.js";import{f as vt}from"../chunks/index.4402586e.js";import{T as oo}from"../chunks/toggle-switch.cd08d1c6.js";import{T as Fe}from"../chunks/tooltip.4ba83f29.js";import{a as Pe,e as Ye}from"../chunks/event-view.34b7d954.js";import{w as It}from"../chunks/singletons.aaa1dcca.js";import{C as ro}from"../chunks/checkbox.1f35294d.js";import{I as He}from"../chunks/input.cf630276.js";import{R as no,a as lo}from"../chunks/radio-input.a700ea11.js";import{R as be,A as ze}from"../chunks/workflow-actions.6f88149c.js";import{r as Et,e as Se,t as Je,i as so}from"../chunks/events.a45222bc.js";import{B as ao}from"../chunks/button.e039d02c.js";import{C as fo}from"../chunks/code-block.251667a2.js";import{B as Ue}from"../chunks/badge.379095dc.js";import{I as io}from"../chunks/icon.10ff0327.js";import{d as uo}from"../chunks/menu.f73323a0.js";import{M as co}from"../chunks/menu-divider.60957aa9.js";import{M as De}from"../chunks/modal.b1ea2e7e.js";import{S as mo}from"../chunks/split-button.93c57163.js";import{t as po,c as _o,s as go,r as wo,f as ho}from"../chunks/workflow-service.bdddfad8.js";import{a as Tt}from"../chunks/auth-user.206f3e82.js";import{c as $o}from"../chunks/core-user.005fce8a.js";import{p as ko,i as bo,c as vo}from"../chunks/data-encoder-config.97297c51.js";import{p as Io}from"../chunks/persist-store.8fa73d5b.js";import{s as Eo}from"../chunks/settings.8b6536de.js";import{t as Ne}from"../chunks/toaster.81b4e618.js";import{r as ge,w as We,i as To}from"../chunks/workflow-run.e57e039e.js";import{w as Ro,a as Co,f as Ke}from"../chunks/workflow-terminate-enabled.b884fd6a.js";import{w as Ao}from"../chunks/write-actions-are-allowed.f5715c2e.js";import{W as yo}from"../chunks/workflow-status.d94c1dc6.js";import{A as Rt}from"../chunks/alert.8c024b60.js";import{C as Ge,g as Do,a as Po,b as So}from"../chunks/pollers-service.396bb69e.js";import{C as Wo}from"../chunks/index.7b31babb.js";import{T as Vo,a as Mo,b as Te}from"../chunks/tab.3e80b552.js";import{h as qo}from"../chunks/has.d2b0b725.js";import{g as No,a as Bo,b as Fo,p as Ho,c as Uo}from"../chunks/task-queue-compatibility.8d922da0.js";import{c as Lo,d as Oo}from"../chunks/decode-payload.7f50df00.js";import{f as jo}from"../chunks/events-service.81767991.js";function Qo(n){let o=k("workflows.back-to-workflows")+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p:ae,d(t){t&&_(e)}}}function Yo(n){let o,e,t,r,l,s,i=n[0].statusCode+"",f,u,p,a,c,g,v=n[0].statusText+"",T,I;return t=new qe({props:{href:`${Ve({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Qo]},$$scope:{ctx:n}}}),{c(){o=L("header"),e=L("div"),S(t.$$.fragment),r=Y(),l=L("div"),s=L("h1"),f=K(i),u=Y(),p=L("p"),a=K(n[1]),c=Y(),g=L("p"),T=K(v),this.h()},l(R){o=O(R,"HEADER",{class:!0});var F=j(o);e=O(F,"DIV",{class:!0});var d=j(e);W(t.$$.fragment,d),d.forEach(_),F.forEach(_),r=z(R),l=O(R,"DIV",{class:!0});var P=j(l);s=O(P,"H1",{class:!0});var A=j(s);f=G(A,i),A.forEach(_),u=z(P),p=O(P,"P",{class:!0});var Q=j(p);a=G(Q,n[1]),Q.forEach(_),c=z(P),g=O(P,"P",{class:!0});var b=j(g);T=G(b,v),b.forEach(_),P.forEach(_),this.h()},h(){J(e,"class","mb-4 block"),J(o,"class","mb-4 flex flex-col gap-1"),J(s,"class","leading-0 text-[12rem] font-semibold"),J(p,"class","-mt-12 text-lg"),J(g,"class","text-2xl font-bold text-red-700"),J(l,"class","text-center align-middle")},m(R,F){y(R,o,F),q(o,e),V(t,e,null),y(R,r,F),y(R,l,F),q(l,s),q(s,f),q(l,u),q(l,p),q(p,a),q(l,c),q(l,g),q(g,T),I=!0},p(R,[F]){const d={};F&12&&(d.href=`${Ve({namespace:R[2]})}?${R[3]}`),F&32&&(d.$$scope={dirty:F,ctx:R}),t.$set(d),(!I||F&1)&&i!==(i=R[0].statusCode+"")&&he(f,i),(!I||F&2)&&he(a,R[1]),(!I||F&1)&&v!==(v=R[0].statusText+"")&&he(T,v)},i(R){I||(w(t.$$.fragment,R),I=!0)},o(R){$(t.$$.fragment,R),I=!1},d(R){R&&_(o),M(t),R&&_(r),R&&_(l)}}}function zo(n,o,e){let t,r,l,s;X(n,Me,f=>e(4,l=f)),X(n,bt,f=>e(3,s=f));let{error:i}=o;return n.$$set=f=>{"error"in f&&e(0,i=f.error)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{namespace:t}=l.params,t),n.$$.dirty&1&&e(1,r=i.statusCode===404?k("workflows.workflow-404-title"):k("workflows.workflow-error-title"))},[i,r,t,s,l]}class Jo extends ve{constructor(o){super(),Ie(this,o,zo,Yo,Ee,{error:0})}}function Ko(n){let o,e;return o=new oo({props:{label:k("common.auto-refresh"),labelPosition:"left",id:"autorefresh",checked:n[1]}}),o.$on("change",function(){mt(n[0])&&n[0].apply(this,arguments)}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){n=t;const l={};r&2&&(l.checked=n[1]),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Go(n){let o,e;return o=new Fe({props:{bottomLeft:!0,text:k("common.auto-refresh-tooltip",{interval:"15"}),$$slots:{default:[Ko]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,[r]){const l={};r&11&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Xo(n,o,e){let t,r;X(n,Pe,s=>e(2,r=s));let{onChange:l}=o;return n.$$set=s=>{"onChange"in s&&e(0,l=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&e(1,t=r==="on")},[l,t,r]}class Zo extends ve{constructor(o){super(),Ie(this,o,Xo,Go,Ee,{onChange:0})}}function Xe(n,o,e){const t=n.slice();return t[6]=o[e],t}function Ze(n){let o,e;return o=new lo({props:{id:"reset-event-"+n[6].id,value:n[6].id,label:n[6].id+" - "+n[6].eventType}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&8&&(l.id="reset-event-"+t[6].id),r&8&&(l.value=t[6].id),r&8&&(l.label=t[6].id+" - "+t[6].eventType),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function xo(n){let o,e,t=n[3],r=[];for(let s=0;s<t.length;s+=1)r[s]=Ze(Xe(n,t,s));const l=s=>$(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=ke()},l(s){for(let i=0;i<r.length;i+=1)r[i].l(s);o=ke()},m(s,i){for(let f=0;f<r.length;f+=1)r[f].m(s,i);y(s,o,i),e=!0},p(s,i){if(i&8){t=s[3];let f;for(f=0;f<t.length;f+=1){const u=Xe(s,t,f);r[f]?(r[f].p(u,i),w(r[f],1)):(r[f]=Ze(u),r[f].c(),w(r[f],1),r[f].m(o.parentNode,o))}for(pe(),f=t.length;f<r.length;f+=1)l(f);de()}},i(s){if(!e){for(let i=0;i<t.length;i+=1)w(r[i]);e=!0}},o(s){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);e=!1},d(s){pt(r,s),s&&_(o)}}}function er(n){let o,e,t,r,l,s,i,f;e=new no({props:{name:"reset-event-id",group:n[2],class:"max-h-40 overflow-auto",description:k("workflows.reset-event-radio-group-description"),$$slots:{default:[xo]},$$scope:{ctx:n}}}),r=new ro({props:{id:"reset-reapply-type-checkbox",checked:n[0]===be.Signal,label:k("workflows.reset-reapply-type-label")}}),r.$on("change",n[4]);function u(a){n[5](a)}let p={id:"reset-reason",label:k("common.reason")};return n[1]!==void 0&&(p.value=n[1]),s=new He({props:p}),se.push(()=>ie(s,"value",u)),{c(){o=L("div"),S(e.$$.fragment),t=Y(),S(r.$$.fragment),l=Y(),S(s.$$.fragment),this.h()},l(a){o=O(a,"DIV",{class:!0});var c=j(o);W(e.$$.fragment,c),t=z(c),W(r.$$.fragment,c),l=z(c),W(s.$$.fragment,c),c.forEach(_),this.h()},h(){J(o,"class","flex w-full flex-col gap-4")},m(a,c){y(a,o,c),V(e,o,null),q(o,t),V(r,o,null),q(o,l),V(s,o,null),f=!0},p(a,[c]){const g={};c&4&&(g.group=a[2]),c&520&&(g.$$scope={dirty:c,ctx:a}),e.$set(g);const v={};c&1&&(v.checked=a[0]===be.Signal),r.$set(v);const T={};!i&&c&2&&(i=!0,T.value=a[1],ue(()=>i=!1)),s.$set(T)},i(a){f||(w(e.$$.fragment,a),w(r.$$.fragment,a),w(s.$$.fragment,a),f=!0)},o(a){$(e.$$.fragment,a),$(r.$$.fragment,a),$(s.$$.fragment,a),f=!1},d(a){a&&_(o),M(e),M(r),M(s)}}}function tr(n,o,e){let t;X(n,Et,u=>e(3,t=u));let{resetReapplyType:r=be.Signal}=o,{reason:l=""}=o,{eventId:s}=o;const i=u=>{e(0,r=u.detail.checked?be.Signal:be.None)};function f(u){l=u,e(1,l)}return n.$$set=u=>{"resetReapplyType"in u&&e(0,r=u.resetReapplyType),"reason"in u&&e(1,l=u.reason),"eventId"in u&&e(2,s=u.eventId)},[r,l,s,t,i,f]}class or extends ve{constructor(o){super(),Ie(this,o,tr,er,Ee,{resetReapplyType:0,reason:1,eventId:2})}}const Ct=Io("resetWorkflows",{}),rr=n=>!n.disableWriteActions&&!n.workflowResetDisabled,nr=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function xe(n,o,e){const t=n.slice();return t[65]=o[e].onClick,t[66]=o[e].destructive,t[67]=o[e].label,t[68]=o[e].allowed,t[69]=o[e].testId,t[70]=o[e].tooltip,t}function lr(n){let o,e;return o=new Fe({props:{bottomRight:!0,width:200,text:n[2],hide:n[3],$$slots:{default:[fr]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r[0]&4&&(l.text=t[2]),r[0]&8&&(l.hide=t[3]),r[0]&520|r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function sr(n){let o,e;return o=new mo({props:{id:"workflow-actions",position:"right",disabled:n[18],primaryActionDisabled:!n[19]||n[0],label:k("workflows.request-cancellation"),menuLabel:k("workflows.workflow-actions"),$$slots:{default:[cr]},$$scope:{ctx:n}}}),o.$on("click",n[41]),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r[0]&262144&&(l.disabled=t[18]),r[0]&524289&&(l.primaryActionDisabled=!t[19]||t[0]),r[0]&131072|r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function ar(n){let o=k("workflows.reset")+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p:ae,d(t){t&&_(e)}}}function fr(n){let o,e;return o=new ao({props:{"aria-label":k("workflows.reset"),disabled:!n[3],variant:"primary",$$slots:{default:[ar]},$$scope:{ctx:n}}}),o.$on("click",n[42]),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r[0]&8&&(l.disabled=!t[3]),r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function et(n){let o,e;return o=new co({}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function ir(n){let o=n[67]+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p(t,r){r[0]&131072&&o!==(o=t[67]+"")&&he(e,o)},d(t){t&&_(e)}}}function ur(n){let o,e,t;return o=new uo({props:{destructive:n[66],disabled:!n[68],"data-testid":n[69],$$slots:{default:[ir]},$$scope:{ctx:n}}}),o.$on("click",function(){mt(n[65])&&n[65].apply(this,arguments)}),{c(){S(o.$$.fragment),e=Y()},l(r){W(o.$$.fragment,r),e=z(r)},m(r,l){V(o,r,l),y(r,e,l),t=!0},p(r,l){n=r;const s={};l[0]&131072&&(s.destructive=n[66]),l[0]&131072&&(s.disabled=!n[68]),l[0]&131072&&(s["data-testid"]=n[69]),l[0]&131072|l[2]&2048&&(s.$$scope={dirty:l,ctx:n}),o.$set(s)},i(r){t||(w(o.$$.fragment,r),t=!0)},o(r){$(o.$$.fragment,r),t=!1},d(r){M(o,r),r&&_(e)}}}function tt(n){let o,e,t,r=n[66]&&et();return e=new Fe({props:{text:n[70],hide:!n[70],width:200,left:!0,$$slots:{default:[ur]},$$scope:{ctx:n}}}),{c(){r&&r.c(),o=Y(),S(e.$$.fragment)},l(l){r&&r.l(l),o=z(l),W(e.$$.fragment,l)},m(l,s){r&&r.m(l,s),y(l,o,s),V(e,l,s),t=!0},p(l,s){l[66]?r?s[0]&131072&&w(r,1):(r=et(),r.c(),w(r,1),r.m(o.parentNode,o)):r&&(pe(),$(r,1,1,()=>{r=null}),de());const i={};s[0]&131072&&(i.text=l[70]),s[0]&131072&&(i.hide=!l[70]),s[0]&131072|s[2]&2048&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){t||(w(r),w(e.$$.fragment,l),t=!0)},o(l){$(r),$(e.$$.fragment,l),t=!1},d(l){r&&r.d(l),l&&_(o),M(e,l)}}}function cr(n){let o,e,t=n[17],r=[];for(let s=0;s<t.length;s+=1)r[s]=tt(xe(n,t,s));const l=s=>$(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=ke()},l(s){for(let i=0;i<r.length;i+=1)r[i].l(s);o=ke()},m(s,i){for(let f=0;f<r.length;f+=1)r[f].m(s,i);y(s,o,i),e=!0},p(s,i){if(i[0]&131072){t=s[17];let f;for(f=0;f<t.length;f+=1){const u=xe(s,t,f);r[f]?(r[f].p(u,i),w(r[f],1)):(r[f]=tt(u),r[f].c(),w(r[f],1),r[f].m(o.parentNode,o))}for(pe(),f=t.length;f<r.length;f+=1)l(f);de()}},i(s){if(!e){for(let i=0;i<t.length;i+=1)w(r[i]);e=!0}},o(s){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);e=!1},d(s){pt(r,s),s&&_(o)}}}function mr(n){let o,e=k("workflows.reset-modal-title")+"",t;return{c(){o=L("h3"),t=K(e),this.h()},l(r){o=O(r,"H3",{slot:!0});var l=j(o);t=G(l,e),l.forEach(_),this.h()},h(){J(o,"slot","title")},m(r,l){y(r,o,l),q(o,t)},p:ae,d(r){r&&_(o)}}}function pr(n){let o,e,t,r,l;function s(p){n[43](p)}function i(p){n[44](p)}function f(p){n[45](p)}let u={};return n[13]!==void 0&&(u.eventId=n[13]),n[12]!==void 0&&(u.resetReapplyType=n[12]),n[14]!==void 0&&(u.reason=n[14]),o=new or({props:u}),se.push(()=>ie(o,"eventId",s)),se.push(()=>ie(o,"resetReapplyType",i)),se.push(()=>ie(o,"reason",f)),{c(){S(o.$$.fragment)},l(p){W(o.$$.fragment,p)},m(p,a){V(o,p,a),l=!0},p(p,a){const c={};!e&&a[0]&8192&&(e=!0,c.eventId=p[13],ue(()=>e=!1)),!t&&a[0]&4096&&(t=!0,c.resetReapplyType=p[12],ue(()=>t=!1)),!r&&a[0]&16384&&(r=!0,c.reason=p[14],ue(()=>r=!1)),o.$set(c)},i(p){l||(w(o.$$.fragment,p),l=!0)},o(p){$(o.$$.fragment,p),l=!1},d(p){M(o,p)}}}function dr(n){let o,e=k("workflows.cancel-modal-title")+"",t;return{c(){o=L("h3"),t=K(e),this.h()},l(r){o=O(r,"H3",{slot:!0});var l=j(o);t=G(l,e),l.forEach(_),this.h()},h(){J(o,"slot","title")},m(r,l){y(r,o,l),q(o,t)},p:ae,d(r){r&&_(o)}}}function _r(n){let o,e=k("workflows.cancel-modal-confirmation")+"",t;return{c(){o=L("p"),t=K(e)},l(r){o=O(r,"P",{});var l=j(o);t=G(l,e),l.forEach(_)},m(r,l){y(r,o,l),q(o,t)},p:ae,d(r){r&&_(o)}}}function gr(n){let o,e=k("workflows.terminate-modal-title")+"",t;return{c(){o=L("h3"),t=K(e),this.h()},l(r){o=O(r,"H3",{slot:!0});var l=j(o);t=G(l,e),l.forEach(_),this.h()},h(){J(o,"slot","title")},m(r,l){y(r,o,l),q(o,t)},p:ae,d(r){r&&_(o)}}}function wr(n){let o,e,t=k("workflows.terminate-modal-confirmation")+"",r,l,s,i,f;function u(a){n[50](a)}let p={id:"workflow-termination-reason",class:"mt-4",placeholder:k("common.reason-placeholder"),label:k("common.reason-placeholder"),labelHidden:!0};return n[4]!==void 0&&(p.value=n[4]),s=new He({props:p}),se.push(()=>ie(s,"value",u)),{c(){o=L("div"),e=L("p"),r=K(t),l=Y(),S(s.$$.fragment),this.h()},l(a){o=O(a,"DIV",{slot:!0});var c=j(o);e=O(c,"P",{});var g=j(e);r=G(g,t),g.forEach(_),l=z(c),W(s.$$.fragment,c),c.forEach(_),this.h()},h(){J(o,"slot","content")},m(a,c){y(a,o,c),q(o,e),q(e,r),q(o,l),V(s,o,null),f=!0},p(a,c){const g={};!i&&c[0]&16&&(i=!0,g.value=a[4],ue(()=>i=!1)),s.$set(g)},i(a){f||(w(s.$$.fragment,a),f=!0)},o(a){$(s.$$.fragment,a),f=!1},d(a){a&&_(o),M(s)}}}function hr(n){let o,e=k("workflows.signal-modal-title")+"",t;return{c(){o=L("h3"),t=K(e),this.h()},l(r){o=O(r,"H3",{slot:!0});var l=j(o);t=G(l,e),l.forEach(_),this.h()},h(){J(o,"slot","title")},m(r,l){y(r,o,l),q(o,t)},p:ae,d(r){r&&_(o)}}}function $r(n){let o,e,t,r,l,s,i=k("workflows.signal-payload-input-label")+"",f,u,p,a=k("workflows.signal-payload-input-label-hint")+"",c,g,v,T;function I(d){n[53](d)}let R={id:"signal-name",label:k("workflows.signal-name-label"),required:!0};n[6]!==void 0&&(R.value=n[6]),e=new He({props:R}),se.push(()=>ie(e,"value",I));let F={class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1};return v=new fo({props:F}),n[54](v),v.$on("change",n[26]),{c(){o=L("div"),S(e.$$.fragment),r=Y(),l=L("div"),s=L("span"),f=K(i),u=Y(),p=L("span"),c=K(a),g=Y(),S(v.$$.fragment),this.h()},l(d){o=O(d,"DIV",{slot:!0,class:!0});var P=j(o);W(e.$$.fragment,P),r=z(P),l=O(P,"DIV",{});var A=j(l);s=O(A,"SPAN",{class:!0});var Q=j(s);f=G(Q,i),Q.forEach(_),u=z(A),p=O(A,"SPAN",{class:!0});var b=j(p);c=G(b,a),b.forEach(_),g=z(A),W(v.$$.fragment,A),A.forEach(_),P.forEach(_),this.h()},h(){J(s,"class","font-secondary text-sm font-medium"),J(p,"class","font-secondary text-xs font-light italic"),J(o,"slot","content"),J(o,"class","flex flex-col gap-4")},m(d,P){y(d,o,P),V(e,o,null),q(o,r),q(o,l),q(l,s),q(s,f),q(l,u),q(l,p),q(p,c),q(l,g),V(v,l,null),T=!0},p(d,P){const A={};!t&&P[0]&64&&(t=!0,A.value=d[6],ue(()=>t=!1)),e.$set(A);const Q={};P[0]&32&&(Q.content=d[5]),v.$set(Q)},i(d){T||(w(e.$$.fragment,d),w(v.$$.fragment,d),T=!0)},o(d){$(e.$$.fragment,d),$(v.$$.fragment,d),T=!1},d(d){d&&_(o),M(e),n[54](null),M(v)}}}function kr(n){let o,e,t,r,l,s,i,f,u,p,a,c,g,v,T,I,R,F,d;const P=[sr,lr],A=[];function Q(m,D){return m[1]?0:1}o=Q(n),e=A[o]=P[o](n);function b(m){n[46](m)}function N(m){n[47](m)}let B={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:k("common.confirm"),cancelText:k("common.cancel"),confirmDisabled:!n[20],$$slots:{content:[pr],title:[mr]},$$scope:{ctx:n}};n[11]!==void 0&&(B.error=n[11]),n[9]!==void 0&&(B.open=n[9]),r=new De({props:B}),se.push(()=>ie(r,"error",b)),se.push(()=>ie(r,"open",N)),r.$on("confirmModal",n[28]),r.$on("cancelModal",n[23]);function H(m){n[48](m)}function U(m){n[49](m)}let x={id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",confirmText:k("common.confirm"),cancelText:k("common.cancel"),loading:n[15],confirmType:"destructive",$$slots:{content:[_r],title:[dr]},$$scope:{ctx:n}};n[11]!==void 0&&(x.error=n[11]),n[7]!==void 0&&(x.open=n[7]),f=new De({props:x}),se.push(()=>ie(f,"error",H)),se.push(()=>ie(f,"open",U)),f.$on("confirmModal",n[25]);function Z(m){n[51](m)}function C(m){n[52](m)}let E={id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",confirmText:k("workflows.terminate"),cancelText:k("common.cancel"),confirmType:"destructive",$$slots:{content:[wr],title:[gr]},$$scope:{ctx:n}};n[11]!==void 0&&(E.error=n[11]),n[8]!==void 0&&(E.open=n[8]),c=new De({props:E}),se.push(()=>ie(c,"error",Z)),se.push(()=>ie(c,"open",C)),c.$on("cancelModal",n[21]),c.$on("confirmModal",n[24]);function re(m){n[55](m)}function ne(m){n[56](m)}let oe={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",confirmText:k("common.submit"),cancelText:k("common.cancel"),confirmDisabled:!n[6],$$slots:{content:[$r],title:[hr]},$$scope:{ctx:n}};return n[11]!==void 0&&(oe.error=n[11]),n[10]!==void 0&&(oe.open=n[10]),I=new De({props:oe}),se.push(()=>ie(I,"error",re)),se.push(()=>ie(I,"open",ne)),I.$on("cancelModal",n[22]),I.$on("confirmModal",n[27]),{c(){e.c(),t=Y(),S(r.$$.fragment),i=Y(),S(f.$$.fragment),a=Y(),S(c.$$.fragment),T=Y(),S(I.$$.fragment)},l(m){e.l(m),t=z(m),W(r.$$.fragment,m),i=z(m),W(f.$$.fragment,m),a=z(m),W(c.$$.fragment,m),T=z(m),W(I.$$.fragment,m)},m(m,D){A[o].m(m,D),y(m,t,D),V(r,m,D),y(m,i,D),V(f,m,D),y(m,a,D),V(c,m,D),y(m,T,D),V(I,m,D),d=!0},p(m,D){let te=o;o=Q(m),o===te?A[o].p(m,D):(pe(),$(A[te],1,1,()=>{A[te]=null}),de(),e=A[o],e?e.p(m,D):(e=A[o]=P[o](m),e.c()),w(e,1),e.m(t.parentNode,t));const fe={};D[0]&1048576&&(fe.confirmDisabled=!m[20]),D[0]&28672|D[2]&2048&&(fe.$$scope={dirty:D,ctx:m}),!l&&D[0]&2048&&(l=!0,fe.error=m[11],ue(()=>l=!1)),!s&&D[0]&512&&(s=!0,fe.open=m[9],ue(()=>s=!1)),r.$set(fe);const we={};D[0]&32768&&(we.loading=m[15]),D[2]&2048&&(we.$$scope={dirty:D,ctx:m}),!u&&D[0]&2048&&(u=!0,we.error=m[11],ue(()=>u=!1)),!p&&D[0]&128&&(p=!0,we.open=m[7],ue(()=>p=!1)),f.$set(we);const ce={};D[0]&16|D[2]&2048&&(ce.$$scope={dirty:D,ctx:m}),!g&&D[0]&2048&&(g=!0,ce.error=m[11],ue(()=>g=!1)),!v&&D[0]&256&&(v=!0,ce.open=m[8],ue(()=>v=!1)),c.$set(ce);const me={};D[0]&64&&(me.confirmDisabled=!m[6]),D[0]&65632|D[2]&2048&&(me.$$scope={dirty:D,ctx:m}),!R&&D[0]&2048&&(R=!0,me.error=m[11],ue(()=>R=!1)),!F&&D[0]&1024&&(F=!0,me.open=m[10],ue(()=>F=!1)),I.$set(me)},i(m){d||(w(e),w(r.$$.fragment,m),w(f.$$.fragment,m),w(c.$$.fragment,m),w(I.$$.fragment,m),d=!0)},o(m){$(e),$(r.$$.fragment,m),$(f.$$.fragment,m),$(c.$$.fragment,m),$(I.$$.fragment,m),d=!1},d(m){A[o].d(m),m&&_(t),M(r,m),m&&_(i),M(f,m),m&&_(a),M(c,m),m&&_(T),M(I,m)}}}function br(n,o,e){let t,r,l,s,i,f,u,p,a,c,g,v=ae,T=()=>(v(),v=eo(te,h=>e(20,g=h)),te),I,R,F,d;X(n,Et,h=>e(39,p=h)),X(n,ge,h=>e(57,a=h)),X(n,Tt,h=>e(58,c=h)),X(n,ko,h=>e(59,I=h)),X(n,bo,h=>e(60,R=h)),X(n,vo,h=>e(61,F=h)),X(n,Me,h=>e(40,d=h)),n.$$.on_destroy.push(()=>v());var P,A,Q;let{workflow:b}=o,{namespace:N}=o,{cancelInProgress:B}=o,{isRunning:H}=o;const U=()=>F?'{"metadata": {"encoding": ""}, "data": ""}':"";let x="",Z=U(),C="",E=!1,re=!1,ne=!1,oe=!1,m="",D=be.Signal,te=It();T();let fe,we=!1,ce,me;const yt=()=>{e(4,x="")},Le=()=>{e(5,Z=U()),e(6,C=""),me==null||me.resetView(Z)},Oe=()=>{e(12,D=be.Signal),le(te,g=void 0,g),e(14,fe=void 0)},Dt=async()=>{e(8,re=!1),le(ge,a=Date.now(),a),Ne.push({id:"workflow-termination-success-toast",message:k("workflows.terminate-success")})},Pt=h=>{var ee;e(4,x=""),e(11,m=(ee=h==null?void 0:h.message)!==null&&ee!==void 0?ee:k("common.unknown-error"))},St=()=>{e(11,m=""),b.canBeTerminated&&po({workflow:b,namespace:N,reason:Ke({action:ze.Terminate,reason:x,email:c.email}),identity:c.email}).then(Dt).catch(Pt)},Wt=async()=>{var h;e(15,we=!0),e(11,m="");try{await _o({namespace:N,workflowId:b.id,runId:b.runId}),e(7,E=!1),e(15,we=!1),le(ge,a=Date.now(),a),Ne.push({id:"workflow-cancelation-success-toast",message:k("workflows.cancel-success")})}catch(ee){e(11,m=(h=ee==null?void 0:ee.message)!==null&&h!==void 0?h:k("common.unknown-error"))}},Vt=h=>{e(5,Z=h.detail)},Mt=async()=>{var h;e(11,m="");try{await go({namespace:N,workflowId:b.id,runId:b.runId,signalInput:Z,signalName:C,settings:{...d.data.settings,codec:{endpoint:F,includeCredentials:R,passAccessToken:I}},accessToken:c.accessToken}),e(10,oe=!1),le(ge,a=Date.now(),a),Ne.push({message:k("workflows.signal-success"),id:"workflow-signal-success-toast"}),Le()}catch(ee){e(11,m=(h=ee==null?void 0:ee.message)!==null&&h!==void 0?h:k("common.unknown-error"))}},qt=async()=>{var h;e(11,m="");try{const ee=await wo({namespace:N,workflowId:b.id,runId:b.runId,eventId:g,reason:Ke({action:ze.Reset,reason:fe,email:c.email}),resetReapplyType:D});ee&&ee.runId&&Ct.update(xt=>({...xt,[b.runId]:ee.runId})),e(9,ne=!1),le(ge,a=Date.now(),a)}catch(ee){e(11,m=(h=ee==null?void 0:ee.message)!==null&&h!==void 0?h:k("common.unknown-error"))}Oe()};let je,Qe=$o();X(n,Qe,h=>e(38,u=h));const Nt=()=>e(7,E=!0),Bt=()=>e(9,ne=!0);function Ft(h){te=h,T(e(13,te))}function Ht(h){D=h,e(12,D)}function Ut(h){fe=h,e(14,fe)}function Lt(h){m=h,e(11,m)}function Ot(h){ne=h,e(9,ne),e(3,i),e(2,ce),e(36,r),e(35,l),e(37,s),e(30,b),e(34,Q),e(39,p),e(32,P),e(33,A),e(40,d)}function jt(h){m=h,e(11,m)}function Qt(h){E=h,e(7,E)}function Yt(h){x=h,e(4,x)}function zt(h){m=h,e(11,m)}function Jt(h){re=h,e(8,re),e(3,i),e(2,ce),e(36,r),e(35,l),e(37,s),e(30,b),e(34,Q),e(39,p),e(32,P),e(33,A),e(40,d)}function Kt(h){C=h,e(6,C)}function Gt(h){se[h?"unshift":"push"](()=>{me=h,e(16,me)})}function Xt(h){m=h,e(11,m)}function Zt(h){oe=h,e(10,oe),e(3,i),e(2,ce),e(36,r),e(35,l),e(37,s),e(30,b),e(34,Q),e(39,p),e(32,P),e(33,A),e(40,d)}return n.$$set=h=>{"workflow"in h&&e(30,b=h.workflow),"namespace"in h&&e(31,N=h.namespace),"cancelInProgress"in h&&e(0,B=h.cancelInProgress),"isRunning"in h&&e(1,H=h.isRunning)},n.$$.update=()=>{n.$$.dirty[1]&512&&e(19,t=Ro(d.data.settings)),n.$$.dirty[1]&512&&e(36,r=nr(d.data.settings)),n.$$.dirty[1]&512&&e(35,l=Co(d.data.settings)),n.$$.dirty[1]&512&&e(37,s=rr(d.data.settings)),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&326&&(s?s&&(e(32,P=b==null?void 0:b.pendingChildren)===null||P===void 0?void 0:P.length)>0?e(2,ce=k("workflows.reset-disabled-pending-children")):s&&(e(33,A=b==null?void 0:b.pendingChildren)===null||A===void 0?void 0:A.length)===0&&p.length===0&&e(2,ce=k("workflows.reset-disabled-no-events")):e(2,ce=k("workflows.reset-disabled"))),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&328&&e(3,i=s&&(e(34,Q=b==null?void 0:b.pendingChildren)===null||Q===void 0?void 0:Q.length)===0&&p.length>0),n.$$.dirty[0]&12|n.$$.dirty[1]&48&&e(17,je=[{label:k("workflows.reset"),onClick:()=>e(9,ne=!0),testId:"reset-button",allowed:i,tooltip:i?"":ce},{label:k("workflows.signal"),onClick:()=>e(10,oe=!0),testId:"signal-button",allowed:r,tooltip:r?"":k("workflows.signal-disabled")},{label:k("workflows.terminate"),onClick:()=>e(8,re=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":k("workflows.terminate-disabled")}]),n.$$.dirty[1]&129&&e(18,f=u.namespaceWriteDisabled(N)||!Ao(Eo))},[B,H,ce,i,x,Z,C,E,re,ne,oe,m,D,te,fe,we,me,je,f,t,g,yt,Le,Oe,St,Wt,Vt,Mt,qt,Qe,b,N,P,A,Q,l,r,s,u,p,d,Nt,Bt,Ft,Ht,Ut,Lt,Ot,jt,Qt,Yt,zt,Jt,Kt,Gt,Xt,Zt]}class vr extends ve{constructor(o){super(),Ie(this,o,br,kr,Ee,{workflow:30,namespace:31,cancelInProgress:0,isRunning:1},null,[-1,-1,-1])}}const Ir=(n,o)=>{var r;const e=n==="Running",t=(r=o==null?void 0:o.end)==null?void 0:r.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&t},ot=n=>{const o=n==null?void 0:n.indexOf("?");return o>-1?n.slice(0,o):n},_e=(n,o,e=!1)=>{const t=ot(n).split("/"),r=ot(o).split("/");if(e&&t.length!==r.length)return!1;for(let l=0;l<t.length;l++){const s=t[l],i=r[l];if(s!==i)return!1}return!0};function Er(n){let o=(n[14]?k("common.workflows"):k("workflows.back-to-workflows"))+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p(t,r){r&16384&&o!==(o=(t[14]?k("common.workflows"):k("workflows.back-to-workflows"))+"")&&he(e,o)},d(t){t&&_(e)}}}function rt(n){let o,e;return o=new qe({props:{href:$e({...n[13]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Tr]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&8192&&(l.href=$e({...t[13]})),r&268435460&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Tr(n){var t;let o=((t=n[2])==null?void 0:t.runId)+"",e;return{c(){e=K(o)},l(r){e=G(r,o)},m(r,l){y(r,e,l)},p(r,l){var s;l&4&&o!==(o=((s=r[2])==null?void 0:s.runId)+"")&&he(e,o)},d(r){r&&_(e)}}}function nt(n){let o,e,t=k("workers.last-used-version")+"",r,l,s,i,f,u=k("workers.next-version")+"",p,a,c;return l=new Ge({props:{defaultVersion:n[1]===n[7]||n[1]===n[8],active:n[1]===n[8],buildId:n[1],$$slots:{"default-worker":[Cr],"overall-default-worker":[Rr]},$$scope:{ctx:n}}}),a=new Ge({props:{defaultVersion:!!n[7],active:n[7]===n[8],buildId:n[7],$$slots:{"default-worker":[yr],"overall-default-worker":[Ar]},$$scope:{ctx:n}}}),{c(){o=L("p"),e=L("span"),r=K(t),S(l.$$.fragment),s=Y(),i=L("p"),f=L("span"),p=K(u),S(a.$$.fragment),this.h()},l(g){o=O(g,"P",{class:!0});var v=j(o);e=O(v,"SPAN",{});var T=j(e);r=G(T,t),T.forEach(_),W(l.$$.fragment,v),v.forEach(_),s=z(g),i=O(g,"P",{class:!0});var I=j(i);f=O(I,"SPAN",{});var R=j(f);p=G(R,u),R.forEach(_),W(a.$$.fragment,I),I.forEach(_),this.h()},h(){J(o,"class","flex items-center gap-1"),J(i,"class","flex items-center gap-1")},m(g,v){y(g,o,v),q(o,e),q(e,r),V(l,o,null),y(g,s,v),y(g,i,v),q(i,f),q(f,p),V(a,i,null),c=!0},p(g,v){const T={};v&386&&(T.defaultVersion=g[1]===g[7]||g[1]===g[8]),v&258&&(T.active=g[1]===g[8]),v&2&&(T.buildId=g[1]),v&268435714&&(T.$$scope={dirty:v,ctx:g}),l.$set(T);const I={};v&128&&(I.defaultVersion=!!g[7]),v&384&&(I.active=g[7]===g[8]),v&128&&(I.buildId=g[7]),v&268435840&&(I.$$scope={dirty:v,ctx:g}),a.$set(I)},i(g){c||(w(l.$$.fragment,g),w(a.$$.fragment,g),c=!0)},o(g){$(l.$$.fragment,g),$(a.$$.fragment,g),c=!1},d(g){g&&_(o),M(l),g&&_(s),g&&_(i),M(a)}}}function lt(n){let o=k("workers.overall")+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p:ae,d(t){t&&_(e)}}}function Rr(n){let o,e=n[1]===n[8]&&lt();return{c(){e&&e.c(),o=ke()},l(t){e&&e.l(t),o=ke()},m(t,r){e&&e.m(t,r),y(t,o,r)},p(t,r){t[1]===t[8]?e?e.p(t,r):(e=lt(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&_(o)}}}function Cr(n){let o=k("workers.default")+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p:ae,d(t){t&&_(e)}}}function st(n){let o=k("workers.overall")+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p:ae,d(t){t&&_(e)}}}function Ar(n){let o,e=n[7]===n[8]&&st();return{c(){e&&e.c(),o=ke()},l(t){e&&e.l(t),o=ke()},m(t,r){e&&e.m(t,r),y(t,o,r)},p(t,r){t[7]===t[8]?e?e.p(t,r):(e=st(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&_(o)}}}function yr(n){let o=k("workers.default")+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p:ae,d(t){t&&_(e)}}}function at(n){let o,e;return o=new Zo({props:{onChange:n[17]}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p:ae,i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function ft(n){let o,e,t,r;return e=new Rt({props:{bold:!0,icon:"info",intent:"info",title:k("workflows.cancel-request-sent"),$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){o=L("div"),S(e.$$.fragment),this.h()},l(l){o=O(l,"DIV",{class:!0});var s=j(o);W(e.$$.fragment,s),s.forEach(_),this.h()},h(){J(o,"class","mb-4")},m(l,s){y(l,o,s),V(e,o,null),r=!0},p(l,s){const i={};s&268435456&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){r||(w(e.$$.fragment,l),t||_t(()=>{t=gt(o,vt,{duration:200,delay:100}),t.start()}),r=!0)},o(l){$(e.$$.fragment,l),r=!1},d(l){l&&_(o),M(e)}}}function Dr(n){let o=k("workflows.cancel-request-sent-description")+"",e;return{c(){e=K(o)},l(t){e=G(t,o)},m(t,r){y(t,e,r)},p:ae,d(t){t&&_(e)}}}function it(n){let o,e,t,r;return e=new Rt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:k("workflows.reset-success-alert-title"),$$slots:{default:[Sr]},$$scope:{ctx:n}}}),{c(){o=L("div"),S(e.$$.fragment),this.h()},l(l){o=O(l,"DIV",{class:!0});var s=j(o);W(e.$$.fragment,s),s.forEach(_),this.h()},h(){J(o,"class","mb-4")},m(l,s){y(l,o,s),V(e,o,null),r=!0},p(l,s){const i={};s&268435505&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){r||(w(e.$$.fragment,l),t||_t(()=>{t=gt(o,vt,{duration:200,delay:100}),t.start()}),r=!0)},o(l){$(e.$$.fragment,l),r=!1},d(l){l&&_(o),M(e)}}}function Pr(n){let o;return{c(){o=K("here")},l(e){o=G(e,"here")},m(e,t){y(e,o,t)},d(e){e&&_(o)}}}function Sr(n){var l,s,i,f;let o,e,t,r;return e=new qe({props:{href:$e({namespace:n[0],workflow:(s=(l=n[4])==null?void 0:l.workflow)==null?void 0:s.id,run:n[5][(f=(i=n[4])==null?void 0:i.workflow)==null?void 0:f.runId]}),$$slots:{default:[Pr]},$$scope:{ctx:n}}}),{c(){o=K("You can find the resulting Workflow Execution "),S(e.$$.fragment),t=K(".")},l(u){o=G(u,"You can find the resulting Workflow Execution "),W(e.$$.fragment,u),t=G(u,".")},m(u,p){y(u,o,p),V(e,u,p),y(u,t,p),r=!0},p(u,p){var c,g,v,T;const a={};p&49&&(a.href=$e({namespace:u[0],workflow:(g=(c=u[4])==null?void 0:c.workflow)==null?void 0:g.id,run:u[5][(T=(v=u[4])==null?void 0:v.workflow)==null?void 0:T.runId]})),p&268435456&&(a.$$scope={dirty:p,ctx:u}),e.$set(a)},i(u){r||(w(e.$$.fragment,u),r=!0)},o(u){$(e.$$.fragment,u),r=!1},d(u){u&&_(o),M(e,u),u&&_(t)}}}function Wr(n){var t;let o=((t=n[2])==null?void 0:t.historyEvents)+"",e;return{c(){e=K(o)},l(r){e=G(r,o)},m(r,l){y(r,e,l)},p(r,l){var s;l&4&&o!==(o=((s=r[2])==null?void 0:s.historyEvents)+"")&&he(e,o)},d(r){r&&_(e)}}}function Vr(n){let o,e;return o=new Ue({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Wr]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&268435460&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Mr(n){var t,r;let o=((r=(t=n[15])==null?void 0:t.pollers)==null?void 0:r.length)+"",e;return{c(){e=K(o)},l(l){e=G(l,o)},m(l,s){y(l,e,s)},p(l,s){var i,f;s&32768&&o!==(o=((f=(i=l[15])==null?void 0:i.pollers)==null?void 0:f.length)+"")&&he(e,o)},d(l){l&&_(e)}}}function qr(n){let o,e;return o=new Ue({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Mr]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&268468224&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function ut(n){let o,e;return o=new io({props:{name:"canceled",width:20,height:20}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Nr(n){var s,i;let o,e=((i=(s=n[2])==null?void 0:s.pendingActivities)==null?void 0:i.length)+"",t,r,l=n[12]&&ut();return{c(){l&&l.c(),o=Y(),t=K(e)},l(f){l&&l.l(f),o=z(f),t=G(f,e)},m(f,u){l&&l.m(f,u),y(f,o,u),y(f,t,u),r=!0},p(f,u){var p,a;f[12]?l?u&4096&&w(l,1):(l=ut(),l.c(),w(l,1),l.m(o.parentNode,o)):l&&(pe(),$(l,1,1,()=>{l=null}),de()),(!r||u&4)&&e!==(e=((a=(p=f[2])==null?void 0:p.pendingActivities)==null?void 0:a.length)+"")&&he(t,e)},i(f){r||(w(l),r=!0)},o(f){$(l),r=!1},d(f){l&&l.d(f),f&&_(o),f&&_(t)}}}function Br(n){let o,e;return o=new Ue({props:{type:n[12]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Nr]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&4096&&(l.type=t[12]?"warning":"blue"),r&268439556&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Fr(n){let o,e,t,r,l,s,i,f,u,p;return o=new Te({props:{label:k("workflows.history-tab"),id:"history-tab",href:$e({...n[13]}),active:_e(n[6].url.pathname,$e({...n[13]})),$$slots:{default:[Vr]},$$scope:{ctx:n}}}),t=new Te({props:{label:k("workflows.workers-tab"),id:"workers-tab",href:Re(n[13]),active:_e(n[6].url.pathname,Re(n[13])),$$slots:{default:[qr]},$$scope:{ctx:n}}}),l=new Te({props:{label:k("workflows.pending-activities-tab"),id:"pending-activities-tab",href:Ce(n[13]),active:_e(n[6].url.pathname,Ce(n[13])),$$slots:{default:[Br]},$$scope:{ctx:n}}}),i=new Te({props:{label:k("workflows.call-stack-tab"),id:"call-stack-tab",href:Ae(n[13]),active:_e(n[6].url.pathname,Ae(n[13]))}}),u=new Te({props:{label:k("workflows.queries-tab"),id:"queries-tab",href:ye(n[13]),active:_e(n[6].url.pathname,ye(n[13]))}}),{c(){S(o.$$.fragment),e=Y(),S(t.$$.fragment),r=Y(),S(l.$$.fragment),s=Y(),S(i.$$.fragment),f=Y(),S(u.$$.fragment)},l(a){W(o.$$.fragment,a),e=z(a),W(t.$$.fragment,a),r=z(a),W(l.$$.fragment,a),s=z(a),W(i.$$.fragment,a),f=z(a),W(u.$$.fragment,a)},m(a,c){V(o,a,c),y(a,e,c),V(t,a,c),y(a,r,c),V(l,a,c),y(a,s,c),V(i,a,c),y(a,f,c),V(u,a,c),p=!0},p(a,c){const g={};c&8192&&(g.href=$e({...a[13]})),c&8256&&(g.active=_e(a[6].url.pathname,$e({...a[13]}))),c&268435460&&(g.$$scope={dirty:c,ctx:a}),o.$set(g);const v={};c&8192&&(v.href=Re(a[13])),c&8256&&(v.active=_e(a[6].url.pathname,Re(a[13]))),c&268468224&&(v.$$scope={dirty:c,ctx:a}),t.$set(v);const T={};c&8192&&(T.href=Ce(a[13])),c&8256&&(T.active=_e(a[6].url.pathname,Ce(a[13]))),c&268439556&&(T.$$scope={dirty:c,ctx:a}),l.$set(T);const I={};c&8192&&(I.href=Ae(a[13])),c&8256&&(I.active=_e(a[6].url.pathname,Ae(a[13]))),i.$set(I);const R={};c&8192&&(R.href=ye(a[13])),c&8256&&(R.active=_e(a[6].url.pathname,ye(a[13]))),u.$set(R)},i(a){p||(w(o.$$.fragment,a),w(t.$$.fragment,a),w(l.$$.fragment,a),w(i.$$.fragment,a),w(u.$$.fragment,a),p=!0)},o(a){$(o.$$.fragment,a),$(t.$$.fragment,a),$(l.$$.fragment,a),$(i.$$.fragment,a),$(u.$$.fragment,a),p=!1},d(a){M(o,a),a&&_(e),M(t,a),a&&_(r),M(l,a),a&&_(s),M(i,a),a&&_(f),M(u,a)}}}function Hr(n){let o,e;return o=new Mo({props:{class:"flex flex-wrap gap-6",label:"workflow detail",$$slots:{default:[Fr]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&268480580&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Ur(n){var x,Z;let o,e,t,r,l,s,i,f,u,p,a,c,g,v,T,I,R,F,d,P,A,Q;t=new qe({props:{href:`${Ve({namespace:n[0]})}?${n[16]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Er]},$$scope:{ctx:n}}});let b=n[14]&&rt(n);u=new Wo({props:{copyIconTitle:k("common.copy-icon-title"),copySuccessIconTitle:k("common.copy-success-icon-title"),content:(x=n[2])==null?void 0:x.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}}),c=new yo({props:{status:(Z=n[2])==null?void 0:Z.status}});let N=n[9]&&nt(n),B=n[3]&&at(n);R=new vr({props:{isRunning:n[3],cancelInProgress:n[11],workflow:n[2],namespace:n[0]}});let H=n[11]&&ft(n),U=n[10]&&it(n);return A=new Vo({props:{$$slots:{default:[Hr]},$$scope:{ctx:n}}}),{c(){o=L("header"),e=L("div"),S(t.$$.fragment),r=Y(),b&&b.c(),l=Y(),s=L("div"),i=L("div"),f=L("h1"),S(u.$$.fragment),p=Y(),a=L("div"),S(c.$$.fragment),g=Y(),N&&N.c(),v=Y(),T=L("div"),B&&B.c(),I=Y(),S(R.$$.fragment),F=Y(),H&&H.c(),d=Y(),U&&U.c(),P=Y(),S(A.$$.fragment),this.h()},l(C){o=O(C,"HEADER",{class:!0});var E=j(o);e=O(E,"DIV",{class:!0});var re=j(e);W(t.$$.fragment,re),r=z(re),b&&b.l(re),re.forEach(_),l=z(E),s=O(E,"DIV",{class:!0});var ne=j(s);i=O(ne,"DIV",{class:!0});var oe=j(i);f=O(oe,"H1",{"data-testid":!0,class:!0});var m=j(f);W(u.$$.fragment,m),m.forEach(_),p=z(oe),a=O(oe,"DIV",{class:!0});var D=j(a);W(c.$$.fragment,D),g=z(D),N&&N.l(D),D.forEach(_),oe.forEach(_),v=z(ne),T=O(ne,"DIV",{class:!0});var te=j(T);B&&B.l(te),I=z(te),W(R.$$.fragment,te),te.forEach(_),ne.forEach(_),F=z(E),H&&H.l(E),d=z(E),U&&U.l(E),P=z(E),W(A.$$.fragment,E),E.forEach(_),this.h()},h(){J(e,"class","mb-4 block"),J(f,"data-testid","workflow-id-heading"),J(f,"class","overflow-hidden text-2xl font-medium"),J(a,"class","flex flex-wrap items-center gap-4"),J(i,"class","flex w-full flex-col justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),J(T,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end"),J(s,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),J(o,"class","mb-4 flex flex-col gap-1")},m(C,E){y(C,o,E),q(o,e),V(t,e,null),q(e,r),b&&b.m(e,null),q(o,l),q(o,s),q(s,i),q(i,f),V(u,f,null),q(i,p),q(i,a),V(c,a,null),q(a,g),N&&N.m(a,null),q(s,v),q(s,T),B&&B.m(T,null),q(T,I),V(R,T,null),q(o,F),H&&H.m(o,null),q(o,d),U&&U.m(o,null),q(o,P),V(A,o,null),Q=!0},p(C,[E]){var te,fe;const re={};E&65537&&(re.href=`${Ve({namespace:C[0]})}?${C[16]}`),E&268451840&&(re.$$scope={dirty:E,ctx:C}),t.$set(re),C[14]?b?(b.p(C,E),E&16384&&w(b,1)):(b=rt(C),b.c(),w(b,1),b.m(e,null)):b&&(pe(),$(b,1,1,()=>{b=null}),de());const ne={};E&4&&(ne.content=(te=C[2])==null?void 0:te.id),u.$set(ne);const oe={};E&4&&(oe.status=(fe=C[2])==null?void 0:fe.status),c.$set(oe),C[9]?N?(N.p(C,E),E&512&&w(N,1)):(N=nt(C),N.c(),w(N,1),N.m(a,null)):N&&(pe(),$(N,1,1,()=>{N=null}),de()),C[3]?B?(B.p(C,E),E&8&&w(B,1)):(B=at(C),B.c(),w(B,1),B.m(T,I)):B&&(pe(),$(B,1,1,()=>{B=null}),de());const m={};E&8&&(m.isRunning=C[3]),E&2048&&(m.cancelInProgress=C[11]),E&4&&(m.workflow=C[2]),E&1&&(m.namespace=C[0]),R.$set(m),C[11]?H?(H.p(C,E),E&2048&&w(H,1)):(H=ft(C),H.c(),w(H,1),H.m(o,d)):H&&(pe(),$(H,1,1,()=>{H=null}),de()),C[10]?U?(U.p(C,E),E&1024&&w(U,1)):(U=it(C),U.c(),w(U,1),U.m(o,P)):U&&(pe(),$(U,1,1,()=>{U=null}),de());const D={};E&268480580&&(D.$$scope={dirty:E,ctx:C}),A.$set(D)},i(C){Q||(w(t.$$.fragment,C),w(b),w(u.$$.fragment,C),w(c.$$.fragment,C),w(N),w(B),w(R.$$.fragment,C),w(H),w(U),w(A.$$.fragment,C),Q=!0)},o(C){$(t.$$.fragment,C),$(b),$(u.$$.fragment,C),$(c.$$.fragment,C),$(N),$(B),$(R.$$.fragment,C),$(H),$(U),$(A.$$.fragment,C),Q=!1},d(C){C&&_(o),M(t),b&&b.d(),M(u),M(c),N&&N.d(),B&&B.d(),M(R),H&&H.d(),U&&U.d(),M(A)}}}const ct=15e3;function Lr(n,o,e){let t,r,l,s,i,f,u,p,a,c,g,v,T,I,R,F,d,P,A,Q;X(n,We,E=>e(4,I=E)),X(n,Ct,E=>e(5,R=E)),X(n,Se,E=>e(25,F=E)),X(n,ge,E=>e(26,d=E)),X(n,Pe,E=>e(27,P=E)),X(n,Me,E=>e(6,A=E)),X(n,bt,E=>e(16,Q=E));var b,N,B,H,U;let{namespace:x}=o,Z;dt(()=>{f&&P==="on"&&(clearInterval(Z),e(23,Z=setInterval(()=>le(ge,d=Date.now(),d),ct)))});const C=()=>{P==="on"?(le(Pe,P="off",P),clearInterval(Z)):(le(ge,d=Date.now(),d),le(Pe,P="on",P),clearInterval(Z),e(23,Z=setInterval(()=>le(ge,d=Date.now(),d),ct)))};return Be(()=>{clearInterval(Z)}),n.$$set=E=>{"namespace"in E&&e(0,x=E.namespace)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{workflow:t,workers:r,compatibility:l}=I,t,(e(15,r),e(4,I)),(e(24,l),e(4,I))),n.$$.dirty&64&&e(14,s=A.params.id),n.$$.dirty&5&&e(13,i={namespace:x,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&262160&&e(3,f=e(18,b=I==null?void 0:I.workflow)===null||b===void 0?void 0:b.isRunning),n.$$.dirty&524304&&e(12,u=["Terminated","TimedOut","Canceled"].includes(e(19,N=I.workflow)===null||N===void 0?void 0:N.status)),n.$$.dirty&8388616&&(f||clearInterval(Z)),n.$$.dirty&34603024&&e(11,p=Ir(e(20,B=I==null?void 0:I.workflow)===null||B===void 0?void 0:B.status,F)),n.$$.dirty&2097200&&e(10,a=qo(R,e(21,H=I==null?void 0:I.workflow)===null||H===void 0?void 0:H.runId)),n.$$.dirty&4194308&&e(9,c=e(22,U=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||U===void 0?void 0:U.useVersioning),n.$$.dirty&4&&e(1,g=No(t)),n.$$.dirty&16777216&&e(8,v=Bo(l)),n.$$.dirty&16777218&&e(7,T=Fo(l,g))},[x,g,t,f,I,R,A,T,v,c,a,p,u,i,s,r,Q,C,b,N,B,H,U,Z,l,F]}class Or extends ve{constructor(o){super(),Ie(this,o,Lr,Ur,Ee,{namespace:0})}}async function jr({activity:n,namespace:o,settings:e,accessToken:t},{convertWithCodec:r=Lo,decodeAttributes:l=Oo}={}){const s=await r({attributes:n,namespace:o,settings:e,accessToken:t});return l(s)}const Qr=async({activity:n,namespace:o,settings:e,accessToken:t})=>await jr({activity:n,namespace:o,settings:e,accessToken:t}),Yr=async(n,o,e,t)=>{const r=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of r){const i=await Qr({activity:s,namespace:o,settings:e,accessToken:t});l.push(i)}return l};function zr(n){let o,e,t;o=new Or({props:{namespace:n[0].params.namespace}});const r=n[8].default,l=wt(r,n,n[7],null);return{c(){S(o.$$.fragment),e=Y(),l&&l.c()},l(s){W(o.$$.fragment,s),e=z(s),l&&l.l(s)},m(s,i){V(o,s,i),y(s,e,i),l&&l.m(s,i),t=!0},p(s,i){const f={};i&1&&(f.namespace=s[0].params.namespace),o.$set(f),l&&l.p&&(!t||i&128)&&ht(l,r,s,s[7],t?kt(r,s[7],i,null):$t(s[7]),null)},i(s){t||(w(o.$$.fragment,s),w(l,s),t=!0)},o(s){$(o.$$.fragment,s),$(l,s),t=!1},d(s){M(o,s),s&&_(e),l&&l.d(s)}}}function Jr(n){let o,e;return o=new to({}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p:ae,i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Kr(n){let o,e;return o=new Jo({props:{error:n[1]}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&2&&(l.error=t[1]),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Gr(n){let o,e,t,r;const l=[Kr,Jr,zr],s=[];function i(f,u){return f[1]?0:f[2].workflow?2:1}return e=i(n),t=s[e]=l[e](n),{c(){o=L("div"),t.c(),this.h()},l(f){o=O(f,"DIV",{class:!0});var u=j(o);t.l(u),u.forEach(_),this.h()},h(){J(o,"class","flex h-full flex-col gap-6")},m(f,u){y(f,o,u),s[e].m(o,null),r=!0},p(f,[u]){let p=e;e=i(f),e===p?s[e].p(f,u):(pe(),$(s[p],1,1,()=>{s[p]=null}),de(),t=s[e],t?t.p(f,u):(t=s[e]=l[e](f),t.c()),w(t,1),t.m(o,null))},i(f){r||(w(t),r=!0)},o(f){$(t),r=!1},d(f){f&&_(o),s[e].d()}}}function Xr(n,o,e){let t,r,l,s,i,f,u,p,a,c;X(n,Se,d=>e(9,s=d)),X(n,We,d=>e(2,i=d)),X(n,Je,d=>e(10,f=d)),X(n,Ye,d=>e(11,u=d)),X(n,Me,d=>e(0,p=d)),X(n,ge,d=>e(6,a=d)),X(n,Tt,d=>e(12,c=d));let{$$slots:g={},$$scope:v}=o,T;const I=async(d,P)=>{var A;if(!((A=d==null?void 0:d.mostRecentWorkerVersionStamp)===null||A===void 0)&&A.useVersioning)return await Po({queue:P,namespace:t})},R=async({namespace:d,workers:P,taskQueue:A})=>{if(!Ho(P.pollers))return;const b=Uo(P.pollers);return await So({namespace:d,buildIds:b,taskQueue:A})},F=async(d,P,A)=>{const{settings:Q}=p.data,{workflow:b,error:N}=await ho({namespace:d,workflowId:P,runId:A});if(N){e(1,T=N);return}const{taskQueue:B}=b,H=await Do({queue:B,namespace:d}),U=await I(b,B),x=await R({namespace:d,workers:H,taskQueue:B});b.pendingActivities=await Yr(b,d,Q,c==null?void 0:c.accessToken),le(We,i={workflow:b,workers:H,compatibility:U,reachability:x},i);const Z=await jo({namespace:d,workflowId:P,runId:A});le(Se,s=Z,s)};return dt(()=>{const d=p.url.searchParams.get("sort");d&&le(Ye,u=d,u)}),Be(()=>{le(Je,f=null,f),le(We,i=To,i),le(Se,s=so,s),e(1,T=void 0)}),n.$$set=d=>{"$$scope"in d&&e(7,v=d.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(5,{namespace:t,workflow:r,run:l}=p.params,t,(e(4,r),e(0,p)),(e(3,l),e(0,p))),n.$$.dirty&120&&F(t,r,l)},[p,T,i,l,r,t,a,v,g]}class Zr extends ve{constructor(o){super(),Ie(this,o,Xr,Gr,Ee,{})}}const At={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},xr=It(At),en=()=>{xr.set(At)};function tn(n){let o;const e=n[0].default,t=wt(e,n,n[1],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),o=!0},p(r,l){t&&t.p&&(!o||l&2)&&ht(t,e,r,r[1],o?kt(e,r[1],l,null):$t(r[1]),null)},i(r){o||(w(t,r),o=!0)},o(r){$(t,r),o=!1},d(r){t&&t.d(r)}}}function on(n){let o,e;return o=new Zr({props:{$$slots:{default:[tn]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,[r]){const l={};r&2&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(w(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function rn(n,o,e){let{$$slots:t={},$$scope:r}=o;return Be(()=>{en()}),n.$$set=l=>{"$$scope"in l&&e(1,r=l.$$scope)},[t,r]}class Kn extends ve{constructor(o){super(),Ie(this,o,rn,on,Ee,{})}}export{Kn as component};
