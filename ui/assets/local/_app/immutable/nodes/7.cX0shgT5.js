import{s as _e,e as O,a as j,t as J,b as U,d as Q,g as $,h as Y,f as Z,j as z,k as W,l as y,n as fe,c as G,v as ee,R as oe,S as se,aa as nt,w as le,x as ue,y as lt,ag as It,Z as st,O as Ct,a4 as at,p as Me,u as ye,q as qe,r as Ne}from"../chunks/scheduler.ynpCPJUn.js";import{S as de,i as ge,c as S,a as P,m as V,t as d,b as k,d as T,f as ae,g as te,e as re,h as ft}from"../chunks/index.Y6K1ciz5.js";import{p as Ve}from"../chunks/stores.cIfTtQic.js";import{v as At}from"../chunks/data-encoder-settings.DTRN_ESQ.js";import{L as Te}from"../chunks/link.YWmMPt7S.js";import{t as R}from"../chunks/translate.UONbkFXD.js";import{a as it}from"../chunks/workflows.m5h0Yl0E.js";import{e as Se,b as ie,m as ve,n as Ee,c as Ie,o as Ce,p as Ae,q as De}from"../chunks/route-for.Qeo2R03o.js";import{L as Dt}from"../chunks/labs-mode-guard.GotbMEHQ.js";import{L as ut}from"../chunks/loading.9d5NBWv0.js";import{a as ct}from"../chunks/index.l9Md57eS.js";import{e as Pe}from"../chunks/each.Idr4Z02b.js";import{C as Rt,T as St,w as Pt,a as Vt}from"../chunks/workflow-terminate-enabled.6CSza-aI.js";import{w as mt}from"../chunks/entry.Yey2uftP.js";import{C as Tt}from"../chunks/checkbox.LeDr3zgt.js";import{I as pt}from"../chunks/input.ND229nvK.js";import{M as _t}from"../chunks/modal.a_rUsRj2.js";import{R as Wt,a as Mt}from"../chunks/radio-input.lnNqRFsR.js";import{R as ke}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as yt,g as qt,h as He}from"../chunks/workflow-service.S5RsDw8a.js";import{r as dt,f as Re,e as Nt,t as Be}from"../chunks/events.GHUy49HX.js";import{p as Ft}from"../chunks/persist-store.eNLeGeUZ.js";import{i as gt}from"../chunks/is-network-error.VRqPL8Og.js";import{C as Ht}from"../chunks/code-block.lgj4Zvnf.js";import{t as Bt}from"../chunks/toaster.5OcTs41S.js";import{B as Lt}from"../chunks/button.kmjKDVqh.js";import{B as We}from"../chunks/badge.D0F4bQMu.js";import{c as Ot}from"../chunks/menu.PElFHTJP.js";import{M as Ut}from"../chunks/menu-divider.J5CTD-74.js";import{S as Qt}from"../chunks/split-button.dGFy_BzL.js";import{T as wt}from"../chunks/tooltip.KuR9ecNY.js";import{c as jt}from"../chunks/core-user.yfPcXEnm.js";import{s as Yt}from"../chunks/settings.qhqcp0pM.js";import{r as he,w as be,i as zt}from"../chunks/workflow-run.8ua_yvDM.js";import{w as Jt}from"../chunks/write-actions-are-allowed.FtvaMGUJ.js";import{W as Zt}from"../chunks/workflow-status.FTCN2p6a.js";import{A as $t}from"../chunks/alert.IemeKHgj.js";import{C as Le,g as Gt,a as Kt}from"../chunks/pollers-service.37pptwKL.js";import{C as Xt}from"../chunks/index.1bleT1UY.js";import{I as xt}from"../chunks/icon.Rz-pCb7x.js";import{T as er,a as tr,b as pe}from"../chunks/tab.dNPJ22qQ.js";import{l as ht}from"../chunks/labs-mode.oGKkntII.js";import{n as rr}from"../chunks/namespaces.HQsAFc8v.js";import{g as or}from"../chunks/get-workflow-relationships.GH_LJaWA.js";import{h as nr}from"../chunks/has.88qJpRyK.js";import{f as lr,b as sr,h as ar}from"../chunks/task-queue-compatibility.52mtxoi2.js";import{f as fr,d as ir}from"../chunks/decode-payload.tJblEpZj.js";import{f as ur}from"../chunks/events-service.Vbkr4zmg.js";import{a as cr}from"../chunks/auth-user.iH_bg7r0.js";import{a as Oe}from"../chunks/event-view.tG0qMctG.js";function mr(n){let r=R("workflows.back-to-workflows")+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p:ee,d(t){t&&$(e)}}}function pr(n){var D,F;let r,e,t,o,l,s,f=(((D=n[0])==null?void 0:D.statusCode)??"500")+"",a,u,c,w,g,v,m=(((F=n[0])==null?void 0:F.statusText)??"")+"",i,h;return t=new Te({props:{href:`${Se({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[mr]},$$scope:{ctx:n}}}),{c(){r=O("header"),e=O("div"),S(t.$$.fragment),o=j(),l=O("div"),s=O("h1"),a=J(f),u=j(),c=O("p"),w=J(n[1]),g=j(),v=O("p"),i=J(m),this.h()},l(b){r=U(b,"HEADER",{class:!0});var I=Q(r);e=U(I,"DIV",{class:!0});var N=Q(e);P(t.$$.fragment,N),N.forEach($),I.forEach($),o=Y(b),l=U(b,"DIV",{class:!0});var p=Q(l);s=U(p,"H1",{class:!0});var E=Q(s);a=Z(E,f),E.forEach($),u=Y(p),c=U(p,"P",{class:!0});var q=Q(c);w=Z(q,n[1]),q.forEach($),g=Y(p),v=U(p,"P",{class:!0});var H=Q(v);i=Z(H,m),H.forEach($),p.forEach($),this.h()},h(){z(e,"class","mb-4 block"),z(r,"class","mb-4 flex flex-col gap-1"),z(s,"class","leading-0 text-[12rem] font-semibold"),z(c,"class","-mt-12 text-lg"),z(v,"class","text-2xl font-bold text-red-700"),z(l,"class","text-center align-middle")},m(b,I){W(b,r,I),y(r,e),V(t,e,null),W(b,o,I),W(b,l,I),y(l,s),y(s,a),y(l,u),y(l,c),y(c,w),y(l,g),y(l,v),y(v,i),h=!0},p(b,[I]){var p,E;const N={};I&12&&(N.href=`${Se({namespace:b[2]})}?${b[3]}`),I&32&&(N.$$scope={dirty:I,ctx:b}),t.$set(N),(!h||I&1)&&f!==(f=(((p=b[0])==null?void 0:p.statusCode)??"500")+"")&&fe(a,f),(!h||I&2)&&fe(w,b[1]),(!h||I&1)&&m!==(m=(((E=b[0])==null?void 0:E.statusText)??"")+"")&&fe(i,m)},i(b){h||(d(t.$$.fragment,b),h=!0)},o(b){k(t.$$.fragment,b),h=!1},d(b){b&&($(r),$(o),$(l)),T(t)}}}function _r(n,r,e){let t,o,l,s;G(n,Ve,a=>e(4,l=a)),G(n,it,a=>e(3,s=a));let{error:f}=r;return n.$$set=a=>{"error"in a&&e(0,f=a.error)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{namespace:t}=l.params,t),n.$$.dirty&1&&e(1,o=f.statusCode===404?R("workflows.workflow-404-title"):R("workflows.workflow-error-title"))},[f,o,t,s,l]}class bt extends de{constructor(r){super(),ge(this,r,_r,pr,_e,{error:0})}}const kt=Ft("resetWorkflows",{});function Ue(n,r,e){const t=n.slice();return t[18]=r[e],t}function dr(n){let r,e=R("workflows.reset-modal-title")+"",t;return{c(){r=O("h3"),t=J(e),this.h()},l(o){r=U(o,"H3",{slot:!0});var l=Q(r);t=Z(l,e),l.forEach($),this.h()},h(){z(r,"slot","title")},m(o,l){W(o,r,l),y(r,t)},p:ee,d(o){o&&$(r)}}}function Qe(n){let r,e;return r=new Mt({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&64&&(l.id="reset-event-"+t[18].id),o&64&&(l.value=t[18].id),o&64&&(l.label=t[18].id+" - "+t[18].eventType),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function gr(n){let r,e,t=Pe(n[6]),o=[];for(let s=0;s<t.length;s+=1)o[s]=Qe(Ue(n,t,s));const l=s=>k(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=ue()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);r=ue()},m(s,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,f);W(s,r,f),e=!0},p(s,f){if(f&64){t=Pe(s[6]);let a;for(a=0;a<t.length;a+=1){const u=Ue(s,t,a);o[a]?(o[a].p(u,f),d(o[a],1)):(o[a]=Qe(u),o[a].c(),d(o[a],1),o[a].m(r.parentNode,r))}for(te(),a=t.length;a<o.length;a+=1)l(a);re()}},i(s){if(!e){for(let f=0;f<t.length;f+=1)d(o[f]);e=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)k(o[f]);e=!1},d(s){s&&$(r),lt(o,s)}}}function wr(n){let r,e,t,o,l,s,f,a;e=new Wt({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:R("workflows.reset-event-radio-group-description"),$$slots:{default:[gr]},$$scope:{ctx:n}}}),o=new Tt({props:{id:"reset-reapply-type-checkbox",checked:n[4]===ke.Signal,label:R("workflows.reset-reapply-type-label")}}),o.$on("change",n[9]);function u(w){n[13](w)}let c={id:"reset-reason",label:R("common.reason")};return n[5]!==void 0&&(c.value=n[5]),s=new pt({props:c}),oe.push(()=>ae(s,"value",u)),{c(){r=O("div"),S(e.$$.fragment),t=j(),S(o.$$.fragment),l=j(),S(s.$$.fragment),this.h()},l(w){r=U(w,"DIV",{class:!0});var g=Q(r);P(e.$$.fragment,g),t=Y(g),P(o.$$.fragment,g),l=Y(g),P(s.$$.fragment,g),g.forEach($),this.h()},h(){z(r,"class","flex w-full flex-col gap-4")},m(w,g){W(w,r,g),V(e,r,null),y(r,t),V(o,r,null),y(r,l),V(s,r,null),a=!0},p(w,g){const v={};g&2097216&&(v.$$scope={dirty:g,ctx:w}),e.$set(v);const m={};g&16&&(m.checked=w[4]===ke.Signal),o.$set(m);const i={};!f&&g&32&&(f=!0,i.value=w[5],se(()=>f=!1)),s.$set(i)},i(w){a||(d(e.$$.fragment,w),d(o.$$.fragment,w),d(s.$$.fragment,w),a=!0)},o(w){k(e.$$.fragment,w),k(o.$$.fragment,w),k(s.$$.fragment,w),a=!1},d(w){w&&$(r),T(e),T(o),T(s)}}}function $r(n){let r,e,t,o;function l(a){n[14](a)}function s(a){n[15](a)}let f={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:R("common.confirm"),cancelText:R("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[wr],title:[dr]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),r=new _t({props:f}),oe.push(()=>ae(r,"error",l)),oe.push(()=>ae(r,"open",s)),r.$on("confirmModal",n[10]),r.$on("cancelModal",n[8]),{c(){S(r.$$.fragment)},l(a){P(r.$$.fragment,a)},m(a,u){V(r,a,u),o=!0},p(a,[u]){const c={};u&8&&(c.loading=a[3]),u&2097264&&(c.$$scope={dirty:u,ctx:a}),!e&&u&4&&(e=!0,c.error=a[2],se(()=>e=!1)),!t&&u&1&&(t=!0,c.open=a[0],se(()=>t=!1)),r.$set(c)},i(a){o||(d(r.$$.fragment,a),o=!0)},o(a){k(r.$$.fragment,a),o=!1},d(a){T(r,a)}}}function hr(n,r,e){let t,o=ee,l=()=>(o(),o=nt(w,E=>e(16,t=E)),w),s,f;G(n,dt,E=>e(6,f=E)),n.$$.on_destroy.push(()=>o());let{open:a}=r,{workflow:u}=r,{namespace:c}=r,{refresh:w}=r;l();let g="",v=!1,m,i=mt("");G(n,i,E=>e(17,s=E));let h;const D=()=>{e(0,a=!1),e(4,m=ke.Signal),le(i,s="",s),e(5,h="")},F=E=>{e(4,m=E.detail.checked?ke.Signal:ke.None)},b=async()=>{e(2,g=""),e(3,v=!0);try{const E=await yt({namespace:c,workflow:u,eventId:s,reason:h,reapplyType:m});E&&E.runId&&kt.update(q=>({...q,[u.runId]:E.runId})),le(w,t=Date.now(),t),D()}catch(E){e(2,g=gt(E)?E.message:R("common.unknown-error"))}finally{e(3,v=!1)}D()};function I(E){h=E,e(5,h)}function N(E){g=E,e(2,g)}function p(E){a=E,e(0,a)}return n.$$set=E=>{"open"in E&&e(0,a=E.open),"workflow"in E&&e(11,u=E.workflow),"namespace"in E&&e(12,c=E.namespace),"refresh"in E&&l(e(1,w=E.refresh))},[a,w,g,v,m,h,f,i,D,F,b,u,c,I,N,p]}class br extends de{constructor(r){super(),ge(this,r,hr,$r,_e,{open:0,workflow:11,namespace:12,refresh:1})}}function kr(n){let r,e=R("workflows.signal-modal-title")+"",t;return{c(){r=O("h3"),t=J(e),this.h()},l(o){r=U(o,"H3",{slot:!0});var l=Q(r);t=Z(l,e),l.forEach($),this.h()},h(){z(r,"slot","title")},m(o,l){W(o,r,l),y(r,t)},p:ee,d(o){o&&$(r)}}}function vr(n){let r,e,t,o,l,s,f=R("workflows.signal-payload-input-label")+"",a,u,c,w=R("workflows.signal-payload-input-label-hint")+"",g,v,m,i;function h(b){n[12](b)}let D={id:"signal-name",label:R("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(D.value=n[4]),e=new pt({props:D}),oe.push(()=>ae(e,"value",h));let F={class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1};return m=new Ht({props:F}),n[13](m),m.$on("change",n[9]),{c(){r=O("div"),S(e.$$.fragment),o=j(),l=O("div"),s=O("span"),a=J(f),u=j(),c=O("span"),g=J(w),v=j(),S(m.$$.fragment),this.h()},l(b){r=U(b,"DIV",{slot:!0,class:!0});var I=Q(r);P(e.$$.fragment,I),o=Y(I),l=U(I,"DIV",{});var N=Q(l);s=U(N,"SPAN",{class:!0});var p=Q(s);a=Z(p,f),p.forEach($),u=Y(N),c=U(N,"SPAN",{class:!0});var E=Q(c);g=Z(E,w),E.forEach($),v=Y(N),P(m.$$.fragment,N),N.forEach($),I.forEach($),this.h()},h(){z(s,"class","font-secondary text-sm font-medium"),z(c,"class","font-secondary text-xs font-light italic"),z(r,"slot","content"),z(r,"class","flex flex-col gap-4")},m(b,I){W(b,r,I),V(e,r,null),y(r,o),y(r,l),y(l,s),y(s,a),y(l,u),y(l,c),y(c,g),y(l,v),V(m,l,null),i=!0},p(b,I){const N={};!t&&I&16&&(t=!0,N.value=b[4],se(()=>t=!1)),e.$set(N);const p={};I&32&&(p.content=b[5]),m.$set(p)},i(b){i||(d(e.$$.fragment,b),d(m.$$.fragment,b),i=!0)},o(b){k(e.$$.fragment,b),k(m.$$.fragment,b),i=!1},d(b){b&&$(r),T(e),n[13](null),T(m)}}}function Er(n){let r,e,t,o;function l(a){n[14](a)}function s(a){n[15](a)}let f={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:R("common.submit"),cancelText:R("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[vr],title:[kr]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),r=new _t({props:f}),oe.push(()=>ae(r,"error",l)),oe.push(()=>ae(r,"open",s)),r.$on("cancelModal",n[7]),r.$on("confirmModal",n[8]),{c(){S(r.$$.fragment)},l(a){P(r.$$.fragment,a)},m(a,u){V(r,a,u),o=!0},p(a,[u]){const c={};u&8&&(c.loading=a[3]),u&16&&(c.confirmDisabled=!a[4]),u&131184&&(c.$$scope={dirty:u,ctx:a}),!e&&u&4&&(e=!0,c.error=a[2],se(()=>e=!1)),!t&&u&1&&(t=!0,c.open=a[0],se(()=>t=!1)),r.$set(c)},i(a){o||(d(r.$$.fragment,a),o=!0)},o(a){k(r.$$.fragment,a),o=!1},d(a){T(r,a)}}}function Ir(n,r,e){let t,o=ee,l=()=>(o(),o=nt(u,p=>e(16,t=p)),u);n.$$.on_destroy.push(()=>o());let{open:s}=r,{workflow:f}=r,{namespace:a}=r,{refresh:u}=r;l();let c="",w=!1,g="",v="",m;const i=()=>{e(0,s=!1),e(5,v=""),e(4,g=""),m==null||m.resetView(v)},h=async()=>{e(2,c=""),e(3,w=!0);try{await qt({namespace:a,workflow:f,input:v,name:g}),le(u,t=Date.now(),t),Bt.push({message:R("workflows.signal-success"),id:"workflow-signal-success-toast"}),i()}catch(p){e(2,c=gt(p)?p.message:R("common.unknown-error"))}finally{e(3,w=!1)}},D=p=>{e(5,v=p.detail)};function F(p){g=p,e(4,g)}function b(p){oe[p?"unshift":"push"](()=>{m=p,e(6,m)})}function I(p){c=p,e(2,c)}function N(p){s=p,e(0,s)}return n.$$set=p=>{"open"in p&&e(0,s=p.open),"workflow"in p&&e(10,f=p.workflow),"namespace"in p&&e(11,a=p.namespace),"refresh"in p&&l(e(1,u=p.refresh))},[s,u,c,w,g,v,m,i,h,D,f,a,F,b,I,N]}class Cr extends de{constructor(r){super(),ge(this,r,Ir,Er,_e,{open:0,workflow:10,namespace:11,refresh:1})}}const Ar=n=>!n.disableWriteActions&&!n.workflowResetDisabled,Dr=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function je(n,r,e){const t=n.slice();return t[29]=r[e].onClick,t[30]=r[e].destructive,t[31]=r[e].label,t[32]=r[e].allowed,t[33]=r[e].testId,t[34]=r[e].tooltip,t}function Rr(n){let r,e;return r=new wt({props:{bottomRight:!0,width:200,text:n[4],hide:n[5],$$slots:{default:[Vr]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o[0]&16&&(l.text=t[4]),o[0]&32&&(l.hide=t[5]),o[0]&288|o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Sr(n){let r,e;return r=new Qt({props:{id:"workflow-actions",position:"right",disabled:n[11],primaryActionDisabled:!n[12]||n[2],label:R("workflows.request-cancellation"),menuLabel:R("workflows.workflow-actions"),$$slots:{default:[Mr]},$$scope:{ctx:n}}}),r.$on("click",n[23]),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o[0]&2048&&(l.disabled=t[11]),o[0]&4100&&(l.primaryActionDisabled=!t[12]||t[2]),o[0]&1024|o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Pr(n){let r=R("workflows.reset")+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p:ee,d(t){t&&$(e)}}}function Vr(n){let r,e;return r=new Lt({props:{"aria-label":R("workflows.reset"),disabled:!n[5],variant:"primary",$$slots:{default:[Pr]},$$scope:{ctx:n}}}),r.$on("click",n[24]),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o[0]&32&&(l.disabled=!t[5]),o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Ye(n){let r,e;return r=new Ut({}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Tr(n){let r=n[31]+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p(t,o){o[0]&1024&&r!==(r=t[31]+"")&&fe(e,r)},d(t){t&&$(e)}}}function Wr(n){let r,e,t;return r=new Ot({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[Tr]},$$scope:{ctx:n}}}),r.$on("click",function(){It(n[29])&&n[29].apply(this,arguments)}),{c(){S(r.$$.fragment),e=j()},l(o){P(r.$$.fragment,o),e=Y(o)},m(o,l){V(r,o,l),W(o,e,l),t=!0},p(o,l){n=o;const s={};l[0]&1024&&(s.destructive=n[30]),l[0]&1024&&(s.disabled=!n[32]),l[0]&1024&&(s["data-testid"]=n[33]),l[0]&1024|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),r.$set(s)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){k(r.$$.fragment,o),t=!1},d(o){o&&$(e),T(r,o)}}}function ze(n){let r,e,t,o=n[30]&&Ye();return e=new wt({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[Wr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),r=j(),S(e.$$.fragment)},l(l){o&&o.l(l),r=Y(l),P(e.$$.fragment,l)},m(l,s){o&&o.m(l,s),W(l,r,s),V(e,l,s),t=!0},p(l,s){l[30]?o?s[0]&1024&&d(o,1):(o=Ye(),o.c(),d(o,1),o.m(r.parentNode,r)):o&&(te(),k(o,1,1,()=>{o=null}),re());const f={};s[0]&1024&&(f.text=l[34]),s[0]&1024&&(f.hide=!l[34]),s[0]&1024|s[1]&64&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){t||(d(o),d(e.$$.fragment,l),t=!0)},o(l){k(o),k(e.$$.fragment,l),t=!1},d(l){l&&$(r),o&&o.d(l),T(e,l)}}}function Mr(n){let r,e,t=Pe(n[10]),o=[];for(let s=0;s<t.length;s+=1)o[s]=ze(je(n,t,s));const l=s=>k(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=ue()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);r=ue()},m(s,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,f);W(s,r,f),e=!0},p(s,f){if(f[0]&1024){t=Pe(s[10]);let a;for(a=0;a<t.length;a+=1){const u=je(s,t,a);o[a]?(o[a].p(u,f),d(o[a],1)):(o[a]=ze(u),o[a].c(),d(o[a],1),o[a].m(r.parentNode,r))}for(te(),a=t.length;a<o.length;a+=1)l(a);re()}},i(s){if(!e){for(let f=0;f<t.length;f+=1)d(o[f]);e=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)k(o[f]);e=!1},d(s){s&&$(r),lt(o,s)}}}function yr(n){let r,e,t,o,l,s,f,a,u,c,w,g,v,m,i;const h=[Sr,Rr],D=[];function F(_,M){return _[3]?0:1}r=F(n),e=D[r]=h[r](n);function b(_){n[25](_)}let I={refresh:he,workflow:n[0],namespace:n[1]};n[8]!==void 0&&(I.open=n[8]),o=new br({props:I}),oe.push(()=>ae(o,"open",b));function N(_){n[26](_)}let p={refresh:he,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(p.open=n[9]),f=new Cr({props:p}),oe.push(()=>ae(f,"open",N));function E(_){n[27](_)}let q={refresh:he,workflow:n[0],namespace:n[1]};n[6]!==void 0&&(q.open=n[6]),c=new Rt({props:q}),oe.push(()=>ae(c,"open",E));function H(_){n[28](_)}let L={refresh:he,workflow:n[0],namespace:n[1]};return n[7]!==void 0&&(L.open=n[7]),v=new St({props:L}),oe.push(()=>ae(v,"open",H)),{c(){e.c(),t=j(),S(o.$$.fragment),s=j(),S(f.$$.fragment),u=j(),S(c.$$.fragment),g=j(),S(v.$$.fragment)},l(_){e.l(_),t=Y(_),P(o.$$.fragment,_),s=Y(_),P(f.$$.fragment,_),u=Y(_),P(c.$$.fragment,_),g=Y(_),P(v.$$.fragment,_)},m(_,M){D[r].m(_,M),W(_,t,M),V(o,_,M),W(_,s,M),V(f,_,M),W(_,u,M),V(c,_,M),W(_,g,M),V(v,_,M),i=!0},p(_,M){let K=r;r=F(_),r===K?D[r].p(_,M):(te(),k(D[K],1,1,()=>{D[K]=null}),re(),e=D[r],e?e.p(_,M):(e=D[r]=h[r](_),e.c()),d(e,1),e.m(t.parentNode,t));const C={};M[0]&1&&(C.workflow=_[0]),M[0]&2&&(C.namespace=_[1]),!l&&M[0]&256&&(l=!0,C.open=_[8],se(()=>l=!1)),o.$set(C);const A={};M[0]&1&&(A.workflow=_[0]),M[0]&2&&(A.namespace=_[1]),!a&&M[0]&512&&(a=!0,A.open=_[9],se(()=>a=!1)),f.$set(A);const B={};M[0]&1&&(B.workflow=_[0]),M[0]&2&&(B.namespace=_[1]),!w&&M[0]&64&&(w=!0,B.open=_[6],se(()=>w=!1)),c.$set(B);const X={};M[0]&1&&(X.workflow=_[0]),M[0]&2&&(X.namespace=_[1]),!m&&M[0]&128&&(m=!0,X.open=_[7],se(()=>m=!1)),v.$set(X)},i(_){i||(d(e),d(o.$$.fragment,_),d(f.$$.fragment,_),d(c.$$.fragment,_),d(v.$$.fragment,_),i=!0)},o(_){k(e),k(o.$$.fragment,_),k(f.$$.fragment,_),k(c.$$.fragment,_),k(v.$$.fragment,_),i=!1},d(_){_&&($(t),$(s),$(u),$(g)),D[r].d(_),T(o,_),T(f,_),T(c,_),T(v,_)}}}function qr(n,r,e){let t,o,l,s,f,a,u,c,w;G(n,dt,B=>e(21,c=B)),G(n,Ve,B=>e(22,w=B));var g,v,m;let{workflow:i}=r,{namespace:h}=r,{cancelInProgress:D}=r,{isRunning:F}=r,b=!1,I=!1,N=!1,p=!1,E,q,H=jt();G(n,H,B=>e(20,u=B));const L=()=>e(6,b=!0),_=()=>e(8,N=!0);function M(B){N=B,e(8,N),e(5,f),e(4,E),e(18,o),e(17,l),e(19,s),e(0,i),e(16,m),e(21,c),e(14,g),e(15,v),e(22,w)}function K(B){p=B,e(9,p),e(5,f),e(4,E),e(18,o),e(17,l),e(19,s),e(0,i),e(16,m),e(21,c),e(14,g),e(15,v),e(22,w)}function C(B){b=B,e(6,b)}function A(B){I=B,e(7,I),e(5,f),e(4,E),e(18,o),e(17,l),e(19,s),e(0,i),e(16,m),e(21,c),e(14,g),e(15,v),e(22,w)}return n.$$set=B=>{"workflow"in B&&e(0,i=B.workflow),"namespace"in B&&e(1,h=B.namespace),"cancelInProgress"in B&&e(2,D=B.cancelInProgress),"isRunning"in B&&e(3,F=B.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&e(12,t=Pt(w.data.settings)),n.$$.dirty[0]&4194304&&e(18,o=Dr(w.data.settings)),n.$$.dirty[0]&4194304&&e(17,l=Vt(w.data.settings)),n.$$.dirty[0]&4194304&&e(19,s=Ar(w.data.settings)),n.$$.dirty[0]&2670593&&(s?s&&(e(14,g=i==null?void 0:i.pendingChildren)===null||g===void 0?void 0:g.length)>0?e(4,E=R("workflows.reset-disabled-pending-children")):s&&(e(15,v=i==null?void 0:i.pendingChildren)===null||v===void 0?void 0:v.length)===0&&c.length===0&&e(4,E=R("workflows.reset-disabled-no-events")):e(4,E=R("workflows.reset-disabled"))),n.$$.dirty[0]&2686977&&e(5,f=s&&(e(16,m=i==null?void 0:i.pendingChildren)===null||m===void 0?void 0:m.length)===0&&c.length>0),n.$$.dirty[0]&393264&&e(10,q=[{label:R("workflows.reset"),onClick:()=>e(8,N=!0),testId:"reset-button",allowed:f,tooltip:f?"":E},{label:R("workflows.signal"),onClick:()=>e(9,p=!0),testId:"signal-button",allowed:o,tooltip:o?"":R("workflows.signal-disabled")},{label:R("workflows.terminate"),onClick:()=>e(7,I=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":R("workflows.terminate-disabled")}]),n.$$.dirty[0]&1048578&&e(11,a=u.namespaceWriteDisabled(h)||!Jt(Yt))},[i,h,D,F,E,f,b,I,N,p,q,a,t,H,g,v,m,l,o,s,u,c,w,L,_,M,K,C,A]}class Nr extends de{constructor(r){super(),ge(this,r,qr,yr,_e,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}const Fr=(n,r)=>{var o;const e=n==="Running",t=(o=r==null?void 0:r.end)==null?void 0:o.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&t},Je=n=>{const r=n==null?void 0:n.indexOf("?");return r>-1?n.slice(0,r):n},x=(n,r,e=!1)=>{const t=Je(n).split("/"),o=Je(r).split("/");if(e&&t.length!==o.length)return!1;for(let l=0;l<t.length;l++){const s=t[l],f=o[l];if(s!==f)return!1}return!0};function Hr(n){let r=(n[15]?R("common.workflows"):R("workflows.back-to-workflows"))+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p(t,o){o&32768&&r!==(r=(t[15]?R("common.workflows"):R("workflows.back-to-workflows"))+"")&&fe(e,r)},d(t){t&&$(e)}}}function Ze(n){let r,e;return r=new Te({props:{href:ie({...n[14]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&16384&&(l.href=ie({...t[14]})),o&268435458&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Br(n){var t;let r=((t=n[1])==null?void 0:t.runId)+"",e;return{c(){e=J(r)},l(o){e=Z(o,r)},m(o,l){W(o,e,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.runId)+"")&&fe(e,r)},d(o){o&&$(e)}}}function Ge(n){let r,e,t,o=R("workers.last-used-version")+"",l,s,f,a,u,c=R("workers.next-version")+"",w,g,v;return s=new Le({props:{defaultVersion:n[2]===n[7]||n[2]===n[8],active:n[2]===n[8],buildId:n[2],$$slots:{"default-worker":[Or],"overall-default-worker":[Lr]},$$scope:{ctx:n}}}),g=new Le({props:{defaultVersion:!!n[7],active:n[7]===n[8],buildId:n[7],$$slots:{"default-worker":[Qr],"overall-default-worker":[Ur]},$$scope:{ctx:n}}}),{c(){r=O("div"),e=O("p"),t=O("span"),l=J(o),S(s.$$.fragment),f=j(),a=O("p"),u=O("span"),w=J(c),S(g.$$.fragment),this.h()},l(m){r=U(m,"DIV",{class:!0});var i=Q(r);e=U(i,"P",{class:!0});var h=Q(e);t=U(h,"SPAN",{});var D=Q(t);l=Z(D,o),D.forEach($),P(s.$$.fragment,h),h.forEach($),f=Y(i),a=U(i,"P",{class:!0});var F=Q(a);u=U(F,"SPAN",{});var b=Q(u);w=Z(b,c),b.forEach($),P(g.$$.fragment,F),F.forEach($),i.forEach($),this.h()},h(){z(e,"class","flex items-center gap-1"),z(a,"class","flex items-center gap-1"),z(r,"class","flex gap-4")},m(m,i){W(m,r,i),y(r,e),y(e,t),y(t,l),V(s,e,null),y(r,f),y(r,a),y(a,u),y(u,w),V(g,a,null),v=!0},p(m,i){const h={};i&388&&(h.defaultVersion=m[2]===m[7]||m[2]===m[8]),i&260&&(h.active=m[2]===m[8]),i&4&&(h.buildId=m[2]),i&268435716&&(h.$$scope={dirty:i,ctx:m}),s.$set(h);const D={};i&128&&(D.defaultVersion=!!m[7]),i&384&&(D.active=m[7]===m[8]),i&128&&(D.buildId=m[7]),i&268435840&&(D.$$scope={dirty:i,ctx:m}),g.$set(D)},i(m){v||(d(s.$$.fragment,m),d(g.$$.fragment,m),v=!0)},o(m){k(s.$$.fragment,m),k(g.$$.fragment,m),v=!1},d(m){m&&$(r),T(s),T(g)}}}function Ke(n){let r=R("workers.overall")+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p:ee,d(t){t&&$(e)}}}function Lr(n){let r,e=n[2]===n[8]&&Ke();return{c(){e&&e.c(),r=ue()},l(t){e&&e.l(t),r=ue()},m(t,o){e&&e.m(t,o),W(t,r,o)},p(t,o){t[2]===t[8]?e?e.p(t,o):(e=Ke(),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&$(r),e&&e.d(t)}}}function Or(n){let r=R("workers.default")+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p:ee,d(t){t&&$(e)}}}function Xe(n){let r=R("workers.overall")+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p:ee,d(t){t&&$(e)}}}function Ur(n){let r,e=n[7]===n[8]&&Xe();return{c(){e&&e.c(),r=ue()},l(t){e&&e.l(t),r=ue()},m(t,o){e&&e.m(t,o),W(t,r,o)},p(t,o){t[7]===t[8]?e?e.p(t,o):(e=Xe(),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&$(r),e&&e.d(t)}}}function Qr(n){let r=R("workers.default")+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p:ee,d(t){t&&$(e)}}}function jr(n){var t;let r=((t=n[1])==null?void 0:t.historyEvents)+"",e;return{c(){e=J(r)},l(o){e=Z(o,r)},m(o,l){W(o,e,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.historyEvents)+"")&&fe(e,r)},d(o){o&&$(e)}}}function Yr(n){let r,e;return r=new We({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[jr]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&268435458&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function zr(n){var t,o;let r=((o=(t=n[16])==null?void 0:t.pollers)==null?void 0:o.length)+"",e;return{c(){e=J(r)},l(l){e=Z(l,r)},m(l,s){W(l,e,s)},p(l,s){var f,a;s&65536&&r!==(r=((a=(f=l[16])==null?void 0:f.pollers)==null?void 0:a.length)+"")&&fe(e,r)},d(l){l&&$(e)}}}function Jr(n){let r,e;return r=new We({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[zr]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&268500992&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Zr(n){let r=n[6].relationshipCount+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p(t,o){o&64&&r!==(r=t[6].relationshipCount+"")&&fe(e,r)},d(t){t&&$(e)}}}function Gr(n){let r,e;return r=new We({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Zr]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&268435520&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function xe(n){let r,e;return r=new pe({props:{label:R("workflows.pending-activities-tab"),id:"pending-activities-tab",href:De(n[14]),active:x(n[5].url.pathname,De(n[14])),$$slots:{default:[Xr]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&16384&&(l.href=De(t[14])),o&16416&&(l.active=x(t[5].url.pathname,De(t[14]))),o&268439554&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function et(n){let r,e;return r=new xt({props:{name:"canceled",width:20,height:20}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Kr(n){var s,f;let r,e=((f=(s=n[1])==null?void 0:s.pendingActivities)==null?void 0:f.length)+"",t,o,l=n[12]&&et();return{c(){l&&l.c(),r=j(),t=J(e)},l(a){l&&l.l(a),r=Y(a),t=Z(a,e)},m(a,u){l&&l.m(a,u),W(a,r,u),W(a,t,u),o=!0},p(a,u){var c,w;a[12]?l?u&4096&&d(l,1):(l=et(),l.c(),d(l,1),l.m(r.parentNode,r)):l&&(te(),k(l,1,1,()=>{l=null}),re()),(!o||u&2)&&e!==(e=((w=(c=a[1])==null?void 0:c.pendingActivities)==null?void 0:w.length)+"")&&fe(t,e)},i(a){o||(d(l),o=!0)},o(a){k(l),o=!1},d(a){a&&($(r),$(t)),l&&l.d(a)}}}function Xr(n){let r,e;return r=new We({props:{type:n[12]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Kr]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&4096&&(l.type=t[12]?"warning":"blue"),o&268439554&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function xr(n){let r,e,t,o,l,s,f,a,u,c,w,g,v;r=new pe({props:{label:R("workflows.history-tab"),id:"history-tab",href:ie({...n[14]}),active:x(n[5].url.pathname,ie({...n[14]})),$$slots:{default:[Yr]},$$scope:{ctx:n}}}),t=new pe({props:{label:R("workflows.workers-tab"),id:"workers-tab",href:ve(n[14]),active:x(n[5].url.pathname,ve(n[14])),$$slots:{default:[Jr]},$$scope:{ctx:n}}}),l=new pe({props:{label:R("workflows.relationships"),id:"relationships-tab",href:Ee(n[14]),active:x(n[5].url.pathname,Ee(n[14])),$$slots:{default:[Gr]},$$scope:{ctx:n}}});let m=!n[18]&&xe(n);return a=new pe({props:{label:R("workflows.call-stack-tab"),id:"call-stack-tab",href:Ie(n[14]),active:x(n[5].url.pathname,Ie(n[14]))}}),c=new pe({props:{label:R("workflows.queries-tab"),id:"queries-tab",href:Ce(n[14]),active:x(n[5].url.pathname,Ce(n[14]))}}),g=new pe({props:{label:R("workflows.metadata-tab"),id:"metadata-tab",href:Ae(n[14]),active:x(n[5].url.pathname,Ae(n[14]))}}),{c(){S(r.$$.fragment),e=j(),S(t.$$.fragment),o=j(),S(l.$$.fragment),s=j(),m&&m.c(),f=j(),S(a.$$.fragment),u=j(),S(c.$$.fragment),w=j(),S(g.$$.fragment)},l(i){P(r.$$.fragment,i),e=Y(i),P(t.$$.fragment,i),o=Y(i),P(l.$$.fragment,i),s=Y(i),m&&m.l(i),f=Y(i),P(a.$$.fragment,i),u=Y(i),P(c.$$.fragment,i),w=Y(i),P(g.$$.fragment,i)},m(i,h){V(r,i,h),W(i,e,h),V(t,i,h),W(i,o,h),V(l,i,h),W(i,s,h),m&&m.m(i,h),W(i,f,h),V(a,i,h),W(i,u,h),V(c,i,h),W(i,w,h),V(g,i,h),v=!0},p(i,h){const D={};h&16384&&(D.href=ie({...i[14]})),h&16416&&(D.active=x(i[5].url.pathname,ie({...i[14]}))),h&268435458&&(D.$$scope={dirty:h,ctx:i}),r.$set(D);const F={};h&16384&&(F.href=ve(i[14])),h&16416&&(F.active=x(i[5].url.pathname,ve(i[14]))),h&268500992&&(F.$$scope={dirty:h,ctx:i}),t.$set(F);const b={};h&16384&&(b.href=Ee(i[14])),h&16416&&(b.active=x(i[5].url.pathname,Ee(i[14]))),h&268435520&&(b.$$scope={dirty:h,ctx:i}),l.$set(b),i[18]?m&&(te(),k(m,1,1,()=>{m=null}),re()):m?(m.p(i,h),h&262144&&d(m,1)):(m=xe(i),m.c(),d(m,1),m.m(f.parentNode,f));const I={};h&16384&&(I.href=Ie(i[14])),h&16416&&(I.active=x(i[5].url.pathname,Ie(i[14]))),a.$set(I);const N={};h&16384&&(N.href=Ce(i[14])),h&16416&&(N.active=x(i[5].url.pathname,Ce(i[14]))),c.$set(N);const p={};h&16384&&(p.href=Ae(i[14])),h&16416&&(p.active=x(i[5].url.pathname,Ae(i[14]))),g.$set(p)},i(i){v||(d(r.$$.fragment,i),d(t.$$.fragment,i),d(l.$$.fragment,i),d(m),d(a.$$.fragment,i),d(c.$$.fragment,i),d(g.$$.fragment,i),v=!0)},o(i){k(r.$$.fragment,i),k(t.$$.fragment,i),k(l.$$.fragment,i),k(m),k(a.$$.fragment,i),k(c.$$.fragment,i),k(g.$$.fragment,i),v=!1},d(i){i&&($(e),$(o),$(s),$(f),$(u),$(w)),T(r,i),T(t,i),T(l,i),m&&m.d(i),T(a,i),T(c,i),T(g,i)}}}function eo(n){let r,e;return r=new tr({props:{class:"surface-secondary flex flex-wrap gap-6 p-4",label:"workflow detail",$$slots:{default:[xr]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&268783714&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function tt(n){let r,e,t,o;return e=new $t({props:{bold:!0,icon:"info",intent:"info",title:R("workflows.cancel-request-sent"),$$slots:{default:[to]},$$scope:{ctx:n}}}),{c(){r=O("div"),S(e.$$.fragment)},l(l){r=U(l,"DIV",{});var s=Q(r);P(e.$$.fragment,s),s.forEach($)},m(l,s){W(l,r,s),V(e,r,null),o=!0},p(l,s){const f={};s&268435456&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){o||(d(e.$$.fragment,l),l&&(t||st(()=>{t=ft(r,ct,{duration:200,delay:100}),t.start()})),o=!0)},o(l){k(e.$$.fragment,l),o=!1},d(l){l&&$(r),T(e)}}}function to(n){let r=R("workflows.cancel-request-sent-description")+"",e;return{c(){e=J(r)},l(t){e=Z(t,r)},m(t,o){W(t,e,o)},p:ee,d(t){t&&$(e)}}}function rt(n){let r,e,t,o;return e=new $t({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:R("workflows.reset-success-alert-title"),$$slots:{default:[oo]},$$scope:{ctx:n}}}),{c(){r=O("div"),S(e.$$.fragment)},l(l){r=U(l,"DIV",{});var s=Q(r);P(e.$$.fragment,s),s.forEach($)},m(l,s){W(l,r,s),V(e,r,null),o=!0},p(l,s){const f={};s&268435481&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){o||(d(e.$$.fragment,l),l&&(t||st(()=>{t=ft(r,ct,{duration:200,delay:100}),t.start()})),o=!0)},o(l){k(e.$$.fragment,l),o=!1},d(l){l&&$(r),T(e)}}}function ro(n){let r;return{c(){r=J("here")},l(e){r=Z(e,"here")},m(e,t){W(e,r,t)},d(e){e&&$(r)}}}function oo(n){var l,s,f,a;let r,e,t,o;return e=new Te({props:{href:ie({namespace:n[0],workflow:(s=(l=n[3])==null?void 0:l.workflow)==null?void 0:s.id,run:n[4][(a=(f=n[3])==null?void 0:f.workflow)==null?void 0:a.runId]}),$$slots:{default:[ro]},$$scope:{ctx:n}}}),{c(){r=J("You can find the resulting Workflow Execution "),S(e.$$.fragment),t=J(".")},l(u){r=Z(u,"You can find the resulting Workflow Execution "),P(e.$$.fragment,u),t=Z(u,".")},m(u,c){W(u,r,c),V(e,u,c),W(u,t,c),o=!0},p(u,c){var g,v,m,i;const w={};c&25&&(w.href=ie({namespace:u[0],workflow:(v=(g=u[3])==null?void 0:g.workflow)==null?void 0:v.id,run:u[4][(i=(m=u[3])==null?void 0:m.workflow)==null?void 0:i.runId]})),c&268435456&&(w.$$scope={dirty:c,ctx:u}),e.$set(w)},i(u){o||(d(e.$$.fragment,u),o=!0)},o(u){k(e.$$.fragment,u),o=!1},d(u){u&&($(r),$(t)),T(e,u)}}}function no(n){var M,K;let r,e,t,o,l,s,f,a,u,c,w,g,v,m,i,h,D,F,b,I,N,p,E;t=new Te({props:{href:`${Se({namespace:n[0]})}?${n[17]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Hr]},$$scope:{ctx:n}}});let q=n[15]&&Ze(n);c=new Zt({props:{status:(M=n[1])==null?void 0:M.status,big:!0}}),m=new Xt({props:{copyIconTitle:R("common.copy-icon-title"),copySuccessIconTitle:R("common.copy-success-icon-title"),content:(K=n[1])==null?void 0:K.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}});let H=n[9]&&Ge(n);F=new Nr({props:{isRunning:n[13],cancelInProgress:n[11],workflow:n[1],namespace:n[0]}}),I=new er({props:{$$slots:{default:[eo]},$$scope:{ctx:n}}});let L=n[11]&&tt(n),_=n[10]&&rt(n);return{c(){r=O("div"),e=O("div"),S(t.$$.fragment),o=j(),q&&q.c(),l=j(),s=O("header"),f=O("div"),a=O("div"),u=O("div"),S(c.$$.fragment),w=j(),g=O("div"),v=O("h1"),S(m.$$.fragment),i=j(),H&&H.c(),h=j(),D=O("div"),S(F.$$.fragment),b=j(),S(I.$$.fragment),N=j(),L&&L.c(),p=j(),_&&_.c(),this.h()},l(C){r=U(C,"DIV",{class:!0});var A=Q(r);e=U(A,"DIV",{class:!0});var B=Q(e);P(t.$$.fragment,B),o=Y(B),q&&q.l(B),B.forEach($),l=Y(A),s=U(A,"HEADER",{class:!0});var X=Q(s);f=U(X,"DIV",{class:!0});var ce=Q(f);a=U(ce,"DIV",{class:!0});var ne=Q(a);u=U(ne,"DIV",{class:!0});var we=Q(u);P(c.$$.fragment,we),we.forEach($),w=Y(ne),g=U(ne,"DIV",{class:!0});var me=Q(g);v=U(me,"H1",{"data-testid":!0,class:!0});var $e=Q(v);P(m.$$.fragment,$e),$e.forEach($),i=Y(me),H&&H.l(me),me.forEach($),ne.forEach($),h=Y(ce),D=U(ce,"DIV",{class:!0});var Fe=Q(D);P(F.$$.fragment,Fe),Fe.forEach($),ce.forEach($),b=Y(X),P(I.$$.fragment,X),N=Y(X),L&&L.l(X),p=Y(X),_&&_.l(X),X.forEach($),A.forEach($),this.h()},h(){z(e,"class","pb-4"),z(u,"class","px-2"),z(v,"data-testid","workflow-id-heading"),z(v,"class","overflow-hidden text-base font-medium lg:text-2xl"),z(g,"class","flex flex-col flex-wrap gap-0"),z(a,"class","flex flex-col items-center gap-4 lg:flex-row"),z(D,"class","px-2"),z(f,"class","flex flex-col items-center justify-between gap-4 lg:flex-row"),z(s,"class","rounded-top flex flex-col gap-0"),z(r,"class","surface-secondary")},m(C,A){W(C,r,A),y(r,e),V(t,e,null),y(e,o),q&&q.m(e,null),y(r,l),y(r,s),y(s,f),y(f,a),y(a,u),V(c,u,null),y(a,w),y(a,g),y(g,v),V(m,v,null),y(g,i),H&&H.m(g,null),y(f,h),y(f,D),V(F,D,null),y(s,b),V(I,s,null),y(s,N),L&&L.m(s,null),y(s,p),_&&_.m(s,null),E=!0},p(C,[A]){var me,$e;const B={};A&131073&&(B.href=`${Se({namespace:C[0]})}?${C[17]}`),A&268468224&&(B.$$scope={dirty:A,ctx:C}),t.$set(B),C[15]?q?(q.p(C,A),A&32768&&d(q,1)):(q=Ze(C),q.c(),d(q,1),q.m(e,null)):q&&(te(),k(q,1,1,()=>{q=null}),re());const X={};A&2&&(X.status=(me=C[1])==null?void 0:me.status),c.$set(X);const ce={};A&2&&(ce.content=($e=C[1])==null?void 0:$e.id),m.$set(ce),C[9]?H?(H.p(C,A),A&512&&d(H,1)):(H=Ge(C),H.c(),d(H,1),H.m(g,null)):H&&(te(),k(H,1,1,()=>{H=null}),re());const ne={};A&8192&&(ne.isRunning=C[13]),A&2048&&(ne.cancelInProgress=C[11]),A&2&&(ne.workflow=C[1]),A&1&&(ne.namespace=C[0]),F.$set(ne);const we={};A&268783714&&(we.$$scope={dirty:A,ctx:C}),I.$set(we),C[11]?L?(L.p(C,A),A&2048&&d(L,1)):(L=tt(C),L.c(),d(L,1),L.m(s,p)):L&&(te(),k(L,1,1,()=>{L=null}),re()),C[10]?_?(_.p(C,A),A&1024&&d(_,1)):(_=rt(C),_.c(),d(_,1),_.m(s,null)):_&&(te(),k(_,1,1,()=>{_=null}),re())},i(C){E||(d(t.$$.fragment,C),d(q),d(c.$$.fragment,C),d(m.$$.fragment,C),d(H),d(F.$$.fragment,C),d(I.$$.fragment,C),d(L),d(_),E=!0)},o(C){k(t.$$.fragment,C),k(q),k(c.$$.fragment,C),k(m.$$.fragment,C),k(H),k(F.$$.fragment,C),k(I.$$.fragment,C),k(L),k(_),E=!1},d(C){C&&$(r),T(t),q&&q.d(),T(c),T(m),H&&H.d(),T(F),T(I),L&&L.d(),_&&_.d()}}}function lo(n,r,e){let t,o,l,s,f,a,u,c,w,g,v,m,i,h,D,F,b,I,N,p,E,q;G(n,rr,A=>e(25,D=A)),G(n,Re,A=>e(26,F=A)),G(n,be,A=>e(3,b=A)),G(n,kt,A=>e(4,I=A)),G(n,Nt,A=>e(27,N=A)),G(n,Ve,A=>e(5,p=A)),G(n,it,A=>e(17,E=A)),G(n,ht,A=>e(18,q=A));var H,L,_,M,K;let{namespace:C}=r;return n.$$set=A=>{"namespace"in A&&e(0,C=A.namespace)},n.$$.update=()=>{n.$$.dirty&8&&e(1,{workflow:t,workers:o,compatibility:l}=b,t,(e(16,o),e(3,b)),(e(24,l),e(3,b))),n.$$.dirty&32&&e(15,s=p.params.id),n.$$.dirty&3&&e(14,f={namespace:C,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&524296&&e(13,a=e(19,H=b==null?void 0:b.workflow)===null||H===void 0?void 0:H.isRunning),n.$$.dirty&1048584&&e(12,u=["Terminated","TimedOut","Canceled"].includes(e(20,L=b.workflow)===null||L===void 0?void 0:L.status)),n.$$.dirty&136314888&&e(11,c=Fr(e(21,_=b==null?void 0:b.workflow)===null||_===void 0?void 0:_.status,N)),n.$$.dirty&4194328&&e(10,w=nr(I,e(22,M=b==null?void 0:b.workflow)===null||M===void 0?void 0:M.runId)),n.$$.dirty&8388610&&e(9,g=e(23,K=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||K===void 0?void 0:K.useVersioning),n.$$.dirty&2&&e(2,v=lr(t)),n.$$.dirty&16777216&&e(8,m=sr(l)),n.$$.dirty&16777220&&e(7,i=ar(l,v)),n.$$.dirty&100663298&&e(6,h=or(t,F,D))},[C,t,v,b,I,p,h,i,m,g,w,c,u,a,f,s,o,E,q,H,L,_,M,K,l,D,F,N]}class vt extends de{constructor(r){super(),ge(this,r,lo,no,_e,{namespace:0})}}async function so({activity:n,namespace:r,settings:e,accessToken:t},{convertWithCodec:o=fr,decodeAttributes:l=ir}={}){const s=await o({attributes:n,namespace:r,settings:e,accessToken:t});return l(s)}const ao=async({activity:n,namespace:r,settings:e,accessToken:t})=>await so({activity:n,namespace:r,settings:e,accessToken:t}),ot=async(n,r,e,t)=>{const o=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of o){const f=await ao({activity:s,namespace:r,settings:e,accessToken:t});l.push(f)}return l};function fo(n){let r,e,t,o;e=new vt({props:{namespace:n[0].params.namespace}});const l=n[10].default,s=Me(l,n,n[11],null);return{c(){r=O("div"),S(e.$$.fragment),t=j(),s&&s.c(),this.h()},l(f){r=U(f,"DIV",{class:!0});var a=Q(r);P(e.$$.fragment,a),a.forEach($),t=Y(f),s&&s.l(f),this.h()},h(){z(r,"class","px-8 pt-20")},m(f,a){W(f,r,a),V(e,r,null),W(f,t,a),s&&s.m(f,a),o=!0},p(f,a){const u={};a&1&&(u.namespace=f[0].params.namespace),e.$set(u),s&&s.p&&(!o||a&2048)&&ye(s,l,f,f[11],o?Ne(l,f[11],a,null):qe(f[11]),null)},i(f){o||(d(e.$$.fragment,f),d(s,f),o=!0)},o(f){k(e.$$.fragment,f),k(s,f),o=!1},d(f){f&&($(r),$(t)),T(e),s&&s.d(f)}}}function io(n){let r,e;return r=new ut({}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p:ee,i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function uo(n){let r,e;return r=new bt({props:{error:n[1]}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&2&&(l.error=t[1]),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function co(n){let r,e,t,o,l;const s=[uo,io,fo],f=[];function a(u,c){return u[1]?0:u[2].workflow?2:1}return e=a(n),t=f[e]=s[e](n),{c(){r=O("div"),t.c(),this.h()},l(u){r=U(u,"DIV",{class:!0});var c=Q(r);t.l(c),c.forEach($),this.h()},h(){z(r,"class",o="surface-secondary absolute bottom-0 left-0 right-0 "+(n[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0")},m(u,c){W(u,r,c),f[e].m(r,null),l=!0},p(u,c){let w=e;e=a(u),e===w?f[e].p(u,c):(te(),k(f[w],1,1,()=>{f[w]=null}),re(),t=f[e],t?t.p(u,c):(t=f[e]=s[e](u),t.c()),d(t,1),t.m(r,null)),(!l||c&8&&o!==(o="surface-secondary absolute bottom-0 left-0 right-0 "+(u[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0"))&&z(r,"class",o)},i(u){l||(d(t),l=!0)},o(u){k(t),l=!1},d(u){u&&$(r),f[e].d()}}}function mo(n){let r,e,t;r=new vt({props:{namespace:n[0].params.namespace}});const o=n[10].default,l=Me(o,n,n[11],null);return{c(){S(r.$$.fragment),e=j(),l&&l.c()},l(s){P(r.$$.fragment,s),e=Y(s),l&&l.l(s)},m(s,f){V(r,s,f),W(s,e,f),l&&l.m(s,f),t=!0},p(s,f){const a={};f&1&&(a.namespace=s[0].params.namespace),r.$set(a),l&&l.p&&(!t||f&2048)&&ye(l,o,s,s[11],t?Ne(o,s[11],f,null):qe(s[11]),null)},i(s){t||(d(r.$$.fragment,s),d(l,s),t=!0)},o(s){k(r.$$.fragment,s),k(l,s),t=!1},d(s){s&&$(e),T(r,s),l&&l.d(s)}}}function po(n){let r,e;return r=new ut({}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p:ee,i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function _o(n){let r,e;return r=new bt({props:{error:n[1]}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,o){const l={};o&2&&(l.error=t[1]),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function go(n){let r,e,t,o;const l=[_o,po,mo],s=[];function f(a,u){return a[1]?0:a[2].workflow?2:1}return e=f(n),t=s[e]=l[e](n),{c(){r=O("div"),t.c(),this.h()},l(a){r=U(a,"DIV",{class:!0,slot:!0});var u=Q(r);t.l(u),u.forEach($),this.h()},h(){z(r,"class","flex h-full flex-col gap-0"),z(r,"slot","fallback")},m(a,u){W(a,r,u),s[e].m(r,null),o=!0},p(a,u){let c=e;e=f(a),e===c?s[e].p(a,u):(te(),k(s[c],1,1,()=>{s[c]=null}),re(),t=s[e],t?t.p(a,u):(t=s[e]=l[e](a),t.c()),d(t,1),t.m(r,null))},i(a){o||(d(t),o=!0)},o(a){k(t),o=!1},d(a){a&&$(r),s[e].d()}}}function wo(n){let r,e;return r=new Dt({props:{$$slots:{fallback:[go],default:[co]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,[o]){const l={};o&2063&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function $o(n,r,e){let t,o,l,s,f,a,u,c,w,g,v,m;G(n,Re,p=>e(13,s=p)),G(n,be,p=>e(2,f=p)),G(n,Be,p=>e(14,a=p)),G(n,Oe,p=>e(7,u=p)),G(n,Ve,p=>e(0,c=p)),G(n,he,p=>e(8,w=p)),G(n,ht,p=>e(9,g=p)),G(n,cr,p=>e(15,v=p)),G(n,At,p=>e(3,m=p));let{$$slots:i={},$$scope:h}=r,D,F;const b=async(p,E)=>{var q;if(!((q=p==null?void 0:p.mostRecentWorkerVersionStamp)===null||q===void 0)&&q.useVersioning)return await Kt({queue:E,namespace:t})},I=async(p,E,q,H,L)=>{const{settings:_}=c.data,{workflow:M,error:K}=await He({namespace:p,workflowId:E,runId:q});if(K){e(1,D=K);return}const{taskQueue:C}=M,A=await Gt({queue:C,namespace:p}),B=await b(M,C);M.pendingActivities=await ot(M,p,_,v==null?void 0:v.accessToken),le(be,f={workflow:M,workers:A,compatibility:B},f),F=new AbortController,le(Re,s=await ur({namespace:p,workflowId:E,runId:q,sort:L?"ascending":H,signal:F.signal,historySize:M.historyEvents}),s)},N=async(p,E,q,H)=>{var L;if(p&&(!((L=f==null?void 0:f.workflow)===null||L===void 0)&&L.isRunning)){const{settings:_}=c.data,{workflow:M,error:K}=await He({namespace:E,workflowId:q,runId:H});if(K){e(1,D=K);return}M.pendingActivities=await ot(M,E,_,v==null?void 0:v.accessToken),le(be,f={...f,workflow:M},f)}};return Ct(()=>{const p=c.url.searchParams.get("sort");p&&le(Oe,u=p,u)}),at(()=>{le(Be,a=null,a),le(be,f=zt,f),le(Re,s=[],s),e(1,D=void 0),F&&F.abort()}),n.$$set=p=>{"$$scope"in p&&e(11,h=p.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(6,{namespace:t,workflow:o,run:l}=c.params,t,(e(5,o),e(0,c)),(e(4,l),e(0,c))),n.$$.dirty&752&&I(t,o,l,u,g),n.$$.dirty&368&&N(w,t,o,l)},[c,D,f,m,l,o,t,u,w,g,i,h]}class ho extends de{constructor(r){super(),ge(this,r,$o,wo,_e,{})}}const Et={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},bo=mt(Et),ko=()=>{bo.set(Et)};function vo(n){let r;const e=n[0].default,t=Me(e,n,n[1],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,l){t&&t.m(o,l),r=!0},p(o,l){t&&t.p&&(!r||l&2)&&ye(t,e,o,o[1],r?Ne(e,o[1],l,null):qe(o[1]),null)},i(o){r||(d(t,o),r=!0)},o(o){k(t,o),r=!1},d(o){t&&t.d(o)}}}function Eo(n){let r,e;return r=new ho({props:{$$slots:{default:[vo]},$$scope:{ctx:n}}}),{c(){S(r.$$.fragment)},l(t){P(r.$$.fragment,t)},m(t,o){V(r,t,o),e=!0},p(t,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(d(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Io(n,r,e){let{$$slots:t={},$$scope:o}=r;return at(()=>{ko()}),n.$$set=l=>{"$$scope"in l&&e(1,o=l.$$scope)},[t,o]}class vn extends de{constructor(r){super(),ge(this,r,Io,Eo,_e,{})}}export{vn as component};
