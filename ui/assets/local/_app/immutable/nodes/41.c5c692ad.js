import{S as fe,i as me,s as he,k as S,l as z,m as R,h as b,p as O,aw as le,U as ve,b as A,F as E,ar as be,H as pe,v as ne,aa as ke,ab as we,f as ae,g as V,d as H,o as ye,K as Ee,a as D,c as F,L as Te,M as Le,N as Ie,t as ee,w as se,q as Z,r as $,P as Ve,y as B,z as q,n as U,A as K,Q as He,B as Q,C as te,W as Ne,R as ge,e as re,D as Y,u as Se}from"../chunks/index.bac36631.js";import{g as ze}from"../chunks/navigation.ae888a58.js";import{p as Re}from"../chunks/stores.9475c79b.js";import{P as Ue}from"../chunks/page-title.4413e49e.js";import{E as de}from"../chunks/empty-state.dd851cde.js";import{I as Me}from"../chunks/input.786e79b0.js";import{t as M}from"../chunks/translate.d045ded2.js";import{a as Pe}from"../chunks/workflow-service.18314eb0.js";import{l as oe,n as Ae}from"../chunks/namespaces.bd84781d.js";import{t as Ce}from"../chunks/toaster.69371058.js";import{a as Oe}from"../chunks/route-for.259f6737.js";function ie(s,e,t){const l=s.slice();return l[23]=e[t],l}const We=s=>({item:s&16}),ce=s=>({item:s[23].data});function De(s){let e;return{c(){e=Z("Missing template")},l(t){e=$(t,"Missing template")},m(t,l){A(t,e,l)},d(t){t&&b(e)}}}function ue(s,e){let t,l,i;const f=e[14].default,u=Ee(f,e,e[13],ce),_=u||De();return{key:s,first:null,c(){t=S("svelte-virtual-list-row"),_&&_.c(),l=D(),this.h()},l(n){t=z(n,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var o=R(t);_&&_.l(o),l=F(o),o.forEach(b),this.h()},h(){le(t,"class","svelte-1kdxoed"),this.first=t},m(n,o){A(n,t,o),_&&_.m(t,null),E(t,l),i=!0},p(n,o){e=n,u&&u.p&&(!i||o&8208)&&Te(u,f,e,e[13],i?Ie(f,e[13],o,We):Le(e[13]),ce)},i(n){i||(V(_,n),i=!0)},o(n){H(_,n),i=!1},d(n){n&&b(t),_&&_.d(n)}}}function Fe(s){let e,t,l=[],i=new Map,f,u,_,n,o=s[4];const p=c=>c[23].index;for(let c=0;c<o.length;c+=1){let a=ie(s,o,c),m=p(a);i.set(m,l[c]=ue(m,a))}return{c(){e=S("svelte-virtual-list-viewport"),t=S("svelte-virtual-list-contents");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){e=z(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var a=R(e);t=z(a,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var m=R(t);for(let w=0;w<l.length;w+=1)l[w].l(m);m.forEach(b),a.forEach(b),this.h()},h(){O(t,"padding-top",s[5]+"px"),O(t,"padding-bottom",s[6]+"px"),le(t,"class","svelte-1kdxoed"),O(e,"height",s[0]),le(e,"class","svelte-1kdxoed"),ve(()=>s[17].call(e))},m(c,a){A(c,e,a),E(e,t);for(let m=0;m<l.length;m+=1)l[m].m(t,null);s[15](t),s[16](e),f=be(e,s[17].bind(e)),u=!0,_||(n=pe(e,"scroll",s[7]),_=!0)},p(c,[a]){a&8208&&(o=c[4],ne(),l=ke(l,a,p,1,c,o,i,t,we,ue,null,ie),ae()),(!u||a&32)&&O(t,"padding-top",c[5]+"px"),(!u||a&64)&&O(t,"padding-bottom",c[6]+"px"),(!u||a&1)&&O(e,"height",c[0])},i(c){if(!u){for(let a=0;a<o.length;a+=1)V(l[a]);u=!0}},o(c){for(let a=0;a<l.length;a+=1)H(l[a]);u=!1},d(c){c&&b(e);for(let a=0;a<l.length;a+=1)l[a].d();s[15](null),s[16](null),f(),_=!1,n()}}}function Be(s,e,t){let{$$slots:l={},$$scope:i}=e,{items:f}=e,{height:u="100%"}=e,{itemHeight:_=void 0}=e,{start:n=0}=e,{end:o=0}=e,p=[],c,a,m,w=0,C,T,v=0,k=0,L;async function x(r,h,d){const{scrollTop:y}=a;await ee();let I=v-y,g=n;for(;I<h&&g<r.length;){let W=c[g-n];W||(t(9,o=g+1),await ee(),W=c[g-n]);const P=p[g]=d||W.offsetHeight;I+=P,g+=1}t(9,o=g);const X=r.length-o;L=(v+I)/o,t(6,k=X*L),p.length=r.length}async function j(){const{scrollTop:r}=a,h=n;for(let g=0;g<c.length;g+=1)p[n+g]=_||c[g].offsetHeight;let d=0,y=0;for(;d<f.length;){const g=p[d]||L;if(y+g>r){t(8,n=d),t(5,v=y);break}y+=g,d+=1}for(;d<f.length&&(y+=p[d]||L,d+=1,!(y>r+w)););t(9,o=d);const I=f.length-o;for(L=y/o;d<f.length;)p[d++]=L;if(t(6,k=I*L),n<h){await ee();let g=0,X=0;for(let P=n;P<h;P+=1)c[P-n]&&(g+=p[P],X+=_||c[P-n].offsetHeight);const W=X-g;a.scrollTo(0,r+W)}}ye(()=>{c=m.getElementsByTagName("svelte-virtual-list-row"),t(12,T=!0)});function G(r){se[r?"unshift":"push"](()=>{m=r,t(3,m)})}function N(r){se[r?"unshift":"push"](()=>{a=r,t(2,a)})}function J(){w=this.offsetHeight,t(1,w)}return s.$$set=r=>{"items"in r&&t(10,f=r.items),"height"in r&&t(0,u=r.height),"itemHeight"in r&&t(11,_=r.itemHeight),"start"in r&&t(8,n=r.start),"end"in r&&t(9,o=r.end),"$$scope"in r&&t(13,i=r.$$scope)},s.$$.update=()=>{s.$$.dirty&1792&&t(4,C=f.slice(n,o).map((r,h)=>({index:h+n,data:r}))),s.$$.dirty&7170&&T&&x(f,w,_)},[u,w,a,m,C,v,k,j,n,o,f,_,T,i,l,G,N,J]}class qe extends fe{constructor(e){super(),me(this,e,Be,Fe,he,{items:10,height:0,itemHeight:11,start:8,end:9})}}function _e(s){const e=s[9]===s[2][0];s[10]=e;const t=s[9]===s[2][s[2].length-1];s[11]=t}function Ke(s){let e,t;return e=new de({props:{title:M("namespaces.select-namespace-empty-state")}}),{c(){B(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,i){K(e,l,i),t=!0},p:ge,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Qe(s){let e,t,l,i;const f=[Ge,je],u=[];function _(n,o){return n[2].length?0:1}return e=_(s),t=u[e]=f[e](s),{c(){t.c(),l=re()},l(n){t.l(n),l=re()},m(n,o){u[e].m(n,o),A(n,l,o),i=!0},p(n,o){let p=e;e=_(n),e===p?u[e].p(n,o):(ne(),H(u[p],1,1,()=>{u[p]=null}),ae(),t=u[e],t?t.p(n,o):(t=u[e]=f[e](n),t.c()),V(t,1),t.m(l.parentNode,l))},i(n){i||(V(t),i=!0)},o(n){H(t),i=!1},d(n){u[e].d(n),n&&b(l)}}}function je(s){let e,t;return e=new de({props:{title:M("common.no-results")}}),{c(){B(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,i){K(e,l,i),t=!0},p:ge,i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Ge(s){let e,t;return e=new qe({props:{items:s[2],itemHeight:50,$$slots:{default:[Je,({item:l})=>({9:l}),({item:l})=>l?512:0]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,i){K(e,l,i),t=!0},p(l,i){const f={};i&4&&(f.items=l[2]),i&4612&&(f.$$scope={dirty:i,ctx:l}),e.$set(f)},i(l){t||(V(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Je(s){_e(s);let e,t,l=s[9].namespace+"",i,f,u;function _(){return s[7](s[9])}return{c(){e=S("div"),t=S("button"),i=Z(l),this.h()},l(n){e=z(n,"DIV",{class:!0});var o=R(e);t=z(o,"BUTTON",{class:!0});var p=R(t);i=$(p,l),p.forEach(b),o.forEach(b),this.h()},h(){U(t,"class","w-full truncate p-3 text-left"),U(e,"class","link-item svelte-uk7srb"),Y(e,"first",s[10]),Y(e,"last",s[11])},m(n,o){A(n,e,o),E(e,t),E(t,i),f||(u=pe(t,"click",_),f=!0)},p(n,o){s=n,_e(s),o&512&&l!==(l=s[9].namespace+"")&&Se(i,l),o&516&&Y(e,"first",s[10]),o&516&&Y(e,"last",s[11])},d(n){n&&b(e),f=!1,u()}}}function Xe(s){let e,t,l,i,f=M("namespaces.select-namespace-welcome")+"",u,_,n,o=M("namespaces.select-namespace")+"",p,c,a,m,w,C,T,v,k,L;e=new Ue({props:{title:M("namespaces.namespace-select-header"),url:s[3].url.href}});function x(r){s[6](r)}let j={id:"search-namespaces",type:"search",label:M("common.search"),labelHidden:!0,placeholder:M("common.search"),icon:"search"};s[0]!==void 0&&(j.value=s[0]),m=new Me({props:j}),se.push(()=>Ve(m,"value",x));const G=[Qe,Ke],N=[];function J(r,h){return r[1].length?0:1}return v=J(s),k=N[v]=G[v](s),{c(){B(e.$$.fragment),t=D(),l=S("div"),i=S("h1"),u=Z(f),_=D(),n=S("p"),p=Z(o),c=D(),a=S("form"),B(m.$$.fragment),C=D(),T=S("div"),k.c(),this.h()},l(r){q(e.$$.fragment,r),t=F(r),l=z(r,"DIV",{class:!0});var h=R(l);i=z(h,"H1",{class:!0});var d=R(i);u=$(d,f),d.forEach(b),_=F(h),n=z(h,"P",{class:!0});var y=R(n);p=$(y,o),y.forEach(b),c=F(h),a=z(h,"FORM",{class:!0,role:!0});var I=R(a);q(m.$$.fragment,I),I.forEach(b),C=F(h),T=z(h,"DIV",{class:!0,"aria-label":!0});var g=R(T);k.l(g),g.forEach(b),h.forEach(b),this.h()},h(){U(i,"class","my-4 text-3xl"),U(n,"class","mb-8"),U(a,"class","mb-5"),U(a,"role","search"),U(T,"class","h-screen w-full"),U(T,"aria-label",M("common.namespaces")),U(l,"class","w-full p-8 xl:w-1/2")},m(r,h){K(e,r,h),A(r,t,h),A(r,l,h),E(l,i),E(i,u),E(l,_),E(l,n),E(n,p),E(l,c),E(l,a),K(m,a,null),E(l,C),E(l,T),N[v].m(T,null),L=!0},p(r,[h]){const d={};h&8&&(d.url=r[3].url.href),e.$set(d);const y={};!w&&h&1&&(w=!0,y.value=r[0],He(()=>w=!1)),m.$set(y);let I=v;v=J(r),v===I?N[v].p(r,h):(ne(),H(N[I],1,1,()=>{N[I]=null}),ae(),k=N[v],k?k.p(r,h):(k=N[v]=G[v](r),k.c()),V(k,1),k.m(T,null))},i(r){L||(V(e.$$.fragment,r),V(m.$$.fragment,r),V(k),L=!0)},o(r){H(e.$$.fragment,r),H(m.$$.fragment,r),H(k),L=!1},d(r){Q(e,r),r&&b(t),r&&b(l),Q(m),N[v].d()}}}function Ye(s,e,t){let l,i,f,u,_,n;te(s,oe,a=>t(8,u=a)),te(s,Ae,a=>t(5,_=a)),te(s,Re,a=>t(3,n=a));let o="";function p(a){o=a,t(0,o)}const c=a=>a==null?void 0:a.onClick(a.namespace);return s.$$.update=()=>{s.$$.dirty&32&&t(4,l=_.map(a=>{var m;return(m=a==null?void 0:a.namespaceInfo)===null||m===void 0?void 0:m.name})),s.$$.dirty&16&&t(1,i=l.map(a=>({namespace:a,onClick:async m=>{const{authorized:w}=await Pe(m);w?(Ne(oe,u=m,u),ze(Oe({namespace:m}))):Ce.push({variant:"error",message:M("namespaces.unauthorized-namespace-error")})}}))),s.$$.dirty&3&&t(2,f=i.filter(({namespace:a})=>a.includes(o)))},[o,i,f,n,l,_,p,c]}class it extends fe{constructor(e){super(),me(this,e,Ye,Xe,he,{})}}export{it as component};
