import{S as we,b as De,a as Ee,m as p,w as E,c as b,p as u,q as d,x as k,k as f,d as g,u as h,f as le,L as s,y as H,n as D,K as Ie,C as X,D as Y,E as Z,j,z as lt,g as N,h as rt,F as x,M as nt,a5 as ct,v as ge,P as xe,ar as it,e as et,as as ft}from"../chunks/index.9b814669.js";import{p as pt}from"../chunks/stores.2a889eb1.js";import{P as ut}from"../chunks/page-title.83a2b61d.js";import{t as V}from"../chunks/translate.c28e5b4f.js";import{b as Re,t as dt,r as mt}from"../chunks/format-date.21eff9aa.js";import{B as ht}from"../chunks/badge.d2eb64e3.js";import{T as vt}from"../chunks/toggle-switch.03367243.js";import{T as _t}from"../chunks/tooltip.58daf44d.js";import{a as Ae,d as $t}from"../chunks/batch-operations.0a2b7011.js";import{C as tt}from"../chunks/card.8d05bbe4.js";import{L as bt}from"../chunks/link.b247ece3.js";import{e as at}from"../chunks/route-for.4e961e59.js";function gt(o){let e,a,t=V("batch.details")+"",n,l,i,r,c=V("batch.operation-type")+"",m,v,O,z=o[0].operationType+"",B,U,_,$,P=V("batch.identity")+"",S,y,T,L=o[0].identity+"",q,K,A,G,de=V("common.reason")+"",me,J,Q,ee=o[0].reason+"",fe,W,R,te,ae=V("common.start-time")+"",C,w,re,oe=Re(o[0].startTime,o[1],{relative:o[2]})+"",ne,ve,M,ce,he=V("common.close-time")+"",pe,_e,ie,se=Re(o[0].closeTime,o[1],{relative:o[2]})+"",Pe,Fe,ue,$e,Be=V("batch.total-operations")+"",Ne,ye,be,ke=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",Ve;return{c(){e=p("div"),a=p("p"),n=E(t),l=b(),i=p("div"),r=p("p"),m=E(c),v=b(),O=p("p"),B=E(z),U=b(),_=p("div"),$=p("p"),S=E(P),y=b(),T=p("p"),q=E(L),K=b(),A=p("div"),G=p("p"),me=E(de),J=b(),Q=p("p"),fe=E(ee),W=b(),R=p("div"),te=p("p"),C=E(ae),w=b(),re=p("p"),ne=E(oe),ve=b(),M=p("div"),ce=p("p"),pe=E(he),_e=b(),ie=p("p"),Pe=E(se),Fe=b(),ue=p("div"),$e=p("p"),Ne=E(Be),ye=b(),be=p("p"),Ve=E(ke),this.h()},l(F){e=u(F,"DIV",{class:!0});var I=d(e);a=u(I,"P",{});var Ue=d(a);n=k(Ue,t),Ue.forEach(f),l=g(I),i=u(I,"DIV",{class:!0});var ze=d(i);r=u(ze,"P",{class:!0});var Me=d(r);m=k(Me,c),Me.forEach(f),v=g(ze),O=u(ze,"P",{class:!0});var He=d(O);B=k(He,z),He.forEach(f),ze.forEach(f),U=g(I),_=u(I,"DIV",{class:!0});var Ce=d(_);$=u(Ce,"P",{class:!0});var Le=d($);S=k(Le,P),Le.forEach(f),y=g(Ce),T=u(Ce,"P",{class:!0});var qe=d(T);q=k(qe,L),qe.forEach(f),Ce.forEach(f),K=g(I),A=u(I,"DIV",{class:!0});var Te=d(A);G=u(Te,"P",{class:!0});var Ke=d(G);me=k(Ke,de),Ke.forEach(f),J=g(Te),Q=u(Te,"P",{class:!0});var Ge=d(Q);fe=k(Ge,ee),Ge.forEach(f),Te.forEach(f),W=g(I),R=u(I,"DIV",{class:!0});var je=d(R);te=u(je,"P",{class:!0});var Je=d(te);C=k(Je,ae),Je.forEach(f),w=g(je),re=u(je,"P",{class:!0});var Qe=d(re);ne=k(Qe,oe),Qe.forEach(f),je.forEach(f),ve=g(I),M=u(I,"DIV",{class:!0});var Oe=d(M);ce=u(Oe,"P",{class:!0});var We=d(ce);pe=k(We,he),We.forEach(f),_e=g(Oe),ie=u(Oe,"P",{class:!0});var Xe=d(ie);Pe=k(Xe,se),Xe.forEach(f),Oe.forEach(f),Fe=g(I),ue=u(I,"DIV",{class:!0});var Se=d(ue);$e=u(Se,"P",{class:!0});var Ye=d($e);Ne=k(Ye,Be),Ye.forEach(f),ye=g(Se),be=u(Se,"P",{class:!0});var Ze=d(be);Ve=k(Ze,ke),Ze.forEach(f),Se.forEach(f),I.forEach(f),this.h()},h(){h(r,"class","batch-operation-key svelte-z5po3c"),h(O,"class","batch-operation-value svelte-z5po3c"),h(i,"class","batch-operation-detail svelte-z5po3c"),h($,"class","batch-operation-key svelte-z5po3c"),h(T,"class","batch-operation-value svelte-z5po3c"),h(_,"class","batch-operation-detail svelte-z5po3c"),h(G,"class","batch-operation-key svelte-z5po3c"),h(Q,"class","batch-operation-value svelte-z5po3c"),h(A,"class","batch-operation-detail svelte-z5po3c"),h(te,"class","batch-operation-key svelte-z5po3c"),h(re,"class","batch-operation-value svelte-z5po3c"),h(R,"class","batch-operation-detail svelte-z5po3c"),h(ce,"class","batch-operation-key svelte-z5po3c"),h(ie,"class","batch-operation-value svelte-z5po3c"),h(M,"class","batch-operation-detail svelte-z5po3c"),h($e,"class","batch-operation-key svelte-z5po3c"),h(be,"class","batch-operation-value svelte-z5po3c"),h(ue,"class","batch-operation-detail svelte-z5po3c"),h(e,"class","flex flex-col gap-2")},m(F,I){le(F,e,I),s(e,a),s(a,n),s(e,l),s(e,i),s(i,r),s(r,m),s(i,v),s(i,O),s(O,B),s(e,U),s(e,_),s(_,$),s($,S),s(_,y),s(_,T),s(T,q),s(e,K),s(e,A),s(A,G),s(G,me),s(A,J),s(A,Q),s(Q,fe),s(e,W),s(e,R),s(R,te),s(te,C),s(R,w),s(R,re),s(re,ne),s(e,ve),s(e,M),s(M,ce),s(ce,pe),s(M,_e),s(M,ie),s(ie,Pe),s(e,Fe),s(e,ue),s(ue,$e),s($e,Ne),s(ue,ye),s(ue,be),s(be,Ve)},p(F,[I]){I&1&&z!==(z=F[0].operationType+"")&&H(B,z),I&1&&L!==(L=F[0].identity+"")&&H(q,L),I&1&&ee!==(ee=F[0].reason+"")&&H(fe,ee),I&7&&oe!==(oe=Re(F[0].startTime,F[1],{relative:F[2]})+"")&&H(ne,oe),I&7&&se!==(se=Re(F[0].closeTime,F[1],{relative:F[2]})+"")&&H(Pe,se),I&1&&ke!==(ke=Intl.NumberFormat("en-US").format(F[0].totalOperationCount)+"")&&H(Ve,ke)},i:D,o:D,d(F){F&&f(e)}}}function Et(o,e,a){let t,n;Ie(o,dt,i=>a(1,t=i)),Ie(o,mt,i=>a(2,n=i));let{operation:l}=e;return o.$$set=i=>{"operation"in i&&a(0,l=i.operation)},[l,t,n]}class kt extends we{constructor(e){super(),De(this,e,Et,gt,Ee,{operation:0})}}function It(o){let e=o[0].state+"",a;return{c(){a=E(e)},l(t){a=k(t,e)},m(t,n){le(t,a,n)},p(t,n){n&1&&e!==(e=t[0].state+"")&&H(a,e)},d(t){t&&f(a)}}}function ot(o){let e,a;return e=new _t({props:{top:!0,text:V("common.auto-refresh-tooltip",{interval:"5"}),$$slots:{default:[wt]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){Z(e,t,n),a=!0},p(t,n){const l={};n&34&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function wt(o){let e,a;return e=new vt({props:{id:"batch-operation-auto-refresh",label:V("common.auto-refresh"),labelPosition:"left",checked:o[1]}}),e.$on("change",o[2]),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){Z(e,t,n),a=!0},p(t,n){const l={};n&2&&(l.checked=t[1]),e.$set(l)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Dt(o){let e,a,t,n,l=V("batch.describe-page-title")+"",i,r,c,m,v,O=o[0].jobId+"",z,B,U;c=new ht({props:{type:o[3][o[0].state],$$slots:{default:[It]},$$scope:{ctx:o}}});let _=o[0].state==="Running"&&ot(o);return{c(){e=p("div"),a=p("div"),t=p("div"),n=p("h1"),i=E(l),r=b(),X(c.$$.fragment),m=b(),v=p("h2"),z=E(O),B=b(),_&&_.c(),this.h()},l($){e=u($,"DIV",{class:!0});var P=d(e);a=u(P,"DIV",{class:!0});var S=d(a);t=u(S,"DIV",{class:!0});var y=d(t);n=u(y,"H1",{class:!0});var T=d(n);i=k(T,l),T.forEach(f),r=g(y),Y(c.$$.fragment,y),y.forEach(f),m=g(S),v=u(S,"H2",{class:!0});var L=d(v);z=k(L,O),L.forEach(f),S.forEach(f),B=g(P),_&&_.l(P),P.forEach(f),this.h()},h(){h(n,"class","text-2xl"),h(t,"class","flex flex-row gap-2 max-sm:flex-col"),h(v,"class","text-sm"),h(a,"class","flex flex-col gap-2"),h(e,"class","flex items-center justify-between")},m($,P){le($,e,P),s(e,a),s(a,t),s(t,n),s(n,i),s(t,r),Z(c,t,null),s(a,m),s(a,v),s(v,z),s(e,B),_&&_.m(e,null),U=!0},p($,[P]){const S={};P&1&&(S.type=$[3][$[0].state]),P&33&&(S.$$scope={dirty:P,ctx:$}),c.$set(S),(!U||P&1)&&O!==(O=$[0].jobId+"")&&H(z,O),$[0].state==="Running"?_?(_.p($,P),P&1&&j(_,1)):(_=ot($),_.c(),j(_,1),_.m(e,null)):_&&(lt(),N(_,1,1,()=>{_=null}),rt())},i($){U||(j(c.$$.fragment,$),j(_),U=!0)},o($){N(c.$$.fragment,$),N(_),U=!1},d($){$&&f(e),x(c),_&&_.d()}}}function Pt(o,e,a){let t;Ie(o,Ae,c=>a(1,t=c));let{operation:n}=e;const l=nt(),i=c=>{const{checked:m}=c.target;l("toggleAutoRefresh",{checked:m}),ct(Ae,t=m,t)},r={Completed:"green",Running:"blue",Failed:"red",Unspecified:"gray"};return o.$$set=c=>{"operation"in c&&a(0,n=c.operation)},[n,t,i,r]}class Vt extends we{constructor(e){super(),De(this,e,Pt,Dt,Ee,{operation:0})}}function zt(o){let e,a,t=V("batch.results")+"",n,l,i,r,c,m=V("batch.operations-progress",{percent:o[3]})+"",v,O,z,B=Intl.NumberFormat("en-US").format(o[0].completeOperationCount)+"",U,_,$=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",P,S,y,T,L,q,K,A,G=V("batch.operations-succeeded",{count:o[0].completeOperationCount})+"",de,me,J,Q=V("batch.operations-failed",{count:o[0].failureOperationCount})+"",ee,fe,W,R,te,ae;return{c(){e=p("div"),a=p("p"),n=E(t),l=b(),i=p("div"),r=p("div"),c=p("span"),v=E(m),O=b(),z=p("span"),U=E(B),_=E(" / "),P=E($),S=b(),y=p("div"),T=p("div"),L=b(),q=p("div"),K=p("div"),A=p("span"),de=E(G),me=b(),J=p("span"),ee=E(Q),fe=b(),W=p("div"),R=p("div"),te=b(),ae=p("div"),this.h()},l(C){e=u(C,"DIV",{class:!0});var w=d(e);a=u(w,"P",{});var re=d(a);n=k(re,t),re.forEach(f),l=g(w),i=u(w,"DIV",{});var oe=d(i);r=u(oe,"DIV",{class:!0});var ne=d(r);c=u(ne,"SPAN",{class:!0});var ve=d(c);v=k(ve,m),ve.forEach(f),O=g(ne),z=u(ne,"SPAN",{class:!0});var M=d(z);U=k(M,B),_=k(M," / "),P=k(M,$),M.forEach(f),ne.forEach(f),S=g(oe),y=u(oe,"DIV",{class:!0});var ce=d(y);T=u(ce,"DIV",{class:!0,style:!0}),d(T).forEach(f),ce.forEach(f),oe.forEach(f),L=g(w),q=u(w,"DIV",{});var he=d(q);K=u(he,"DIV",{class:!0});var pe=d(K);A=u(pe,"SPAN",{class:!0});var _e=d(A);de=k(_e,G),_e.forEach(f),me=g(pe),J=u(pe,"SPAN",{class:!0});var ie=d(J);ee=k(ie,Q),ie.forEach(f),pe.forEach(f),fe=g(he),W=u(he,"DIV",{class:!0});var se=d(W);R=u(se,"DIV",{style:!0,class:!0}),d(R).forEach(f),te=g(se),ae=u(se,"DIV",{style:!0,class:!0}),d(ae).forEach(f),se.forEach(f),he.forEach(f),w.forEach(f),this.h()},h(){h(c,"class","text-xs font-semibold"),h(z,"class","text-xs font-semibold"),h(r,"class","flex justify-between"),h(T,"class","absolute left-0 flex h-full items-center bg-indigo-600"),ge(T,"width",o[3]+"%"),h(y,"class","relative h-2 w-full overflow-hidden rounded bg-indigo-100"),h(A,"class","text-xs font-semibold text-green-700"),h(J,"class","text-xs font-semibold"),xe(J,"text-red-700",o[2]>0),h(K,"class","flex justify-between"),ge(R,"width",o[1]+"%"),h(R,"class","absolute left-0 flex h-full items-center bg-green-200"),ge(ae,"width",o[2]+"%"),h(ae,"class","absolute right-0 flex h-full items-center justify-end bg-red-200"),h(W,"class","relative h-2 w-full overflow-hidden rounded"),h(e,"class","flex flex-col gap-4")},m(C,w){le(C,e,w),s(e,a),s(a,n),s(e,l),s(e,i),s(i,r),s(r,c),s(c,v),s(r,O),s(r,z),s(z,U),s(z,_),s(z,P),s(i,S),s(i,y),s(y,T),s(e,L),s(e,q),s(q,K),s(K,A),s(A,de),s(K,me),s(K,J),s(J,ee),s(q,fe),s(q,W),s(W,R),s(W,te),s(W,ae)},p(C,[w]){w&8&&m!==(m=V("batch.operations-progress",{percent:C[3]})+"")&&H(v,m),w&1&&B!==(B=Intl.NumberFormat("en-US").format(C[0].completeOperationCount)+"")&&H(U,B),w&1&&$!==($=Intl.NumberFormat("en-US").format(C[0].totalOperationCount)+"")&&H(P,$),w&8&&ge(T,"width",C[3]+"%"),w&1&&G!==(G=V("batch.operations-succeeded",{count:C[0].completeOperationCount})+"")&&H(de,G),w&1&&Q!==(Q=V("batch.operations-failed",{count:C[0].failureOperationCount})+"")&&H(ee,Q),w&4&&xe(J,"text-red-700",C[2]>0),w&2&&ge(R,"width",C[1]+"%"),w&4&&ge(ae,"width",C[2]+"%")},i:D,o:D,d(C){C&&f(e)}}}function Ct(o,e,a){let{operation:t}=e,n,l,i;return o.$$set=r=>{"operation"in r&&a(0,t=r.operation)},o.$$.update=()=>{if(o.$$.dirty&1){const{completeOperationCount:r,failureOperationCount:c,totalOperationCount:m}=t;a(1,n=Math.round(r/m*100)),a(2,l=Math.round(c/m*100)),a(3,i=Math.round((r+c)/m*100))}},[t,n,l,i]}class Tt extends we{constructor(e){super(),De(this,e,Ct,zt,Ee,{operation:0})}}function jt(o){let e=V("batch.back-link")+"",a;return{c(){a=E(e)},l(t){a=k(t,e)},m(t,n){le(t,a,n)},p:D,d(t){t&&f(a)}}}function Ot(o){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function St(o){let e,a,t,n,l,i;return e=new Vt({props:{operation:o[7]}}),e.$on("toggleAutoRefresh",o[2]),t=new tt({props:{$$slots:{default:[Rt]},$$scope:{ctx:o}}}),l=new tt({props:{$$slots:{default:[Ft]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment),a=b(),X(t.$$.fragment),n=b(),X(l.$$.fragment)},l(r){Y(e.$$.fragment,r),a=g(r),Y(t.$$.fragment,r),n=g(r),Y(l.$$.fragment,r)},m(r,c){Z(e,r,c),le(r,a,c),Z(t,r,c),le(r,n,c),Z(l,r,c),i=!0},p(r,c){const m={};c&256&&(m.$$scope={dirty:c,ctx:r}),t.$set(m);const v={};c&256&&(v.$$scope={dirty:c,ctx:r}),l.$set(v)},i(r){i||(j(e.$$.fragment,r),j(t.$$.fragment,r),j(l.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),N(t.$$.fragment,r),N(l.$$.fragment,r),i=!1},d(r){x(e,r),r&&f(a),x(t,r),r&&f(n),x(l,r)}}}function Rt(o){let e,a;return e=new kt({props:{operation:o[7]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){Z(e,t,n),a=!0},p:D,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Ft(o){let e,a;return e=new Tt({props:{operation:o[7]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){Z(e,t,n),a=!0},p:D,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Nt(o){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function st(o){let e,a,t={ctx:o,current:null,token:null,hasCatch:!1,pending:Nt,then:St,catch:Ot,value:7,blocks:[,,,]};return it(o[3](),t),{c(){e=et(),t.block.c()},l(n){e=et(),t.block.l(n)},m(n,l){le(n,e,l),t.block.m(n,t.anchor=l),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(n,l){o=n,ft(t,o,l)},i(n){a||(j(t.block),a=!0)},o(n){for(let l=0;l<3;l+=1){const i=t.blocks[l];N(i)}a=!1},d(n){n&&f(e),t.block.d(n),t.token=null,t=null}}}function yt(o){let e,a,t,n,l=o[1],i;t=new bt({props:{href:at({namespace:o[0]}),icon:"chevron-left",$$slots:{default:[jt]},$$scope:{ctx:o}}});let r=st(o);return{c(){e=p("div"),a=p("div"),X(t.$$.fragment),n=b(),r.c(),this.h()},l(c){e=u(c,"DIV",{class:!0});var m=d(e);a=u(m,"DIV",{class:!0});var v=d(a);Y(t.$$.fragment,v),v.forEach(f),n=g(m),r.l(m),m.forEach(f),this.h()},h(){h(a,"class","flex flex-row"),h(e,"class","flex flex-col gap-4")},m(c,m){le(c,e,m),s(e,a),Z(t,a,null),s(e,n),r.m(e,null),i=!0},p(c,[m]){const v={};m&1&&(v.href=at({namespace:c[0]})),m&256&&(v.$$scope={dirty:m,ctx:c}),t.$set(v),m&2&&Ee(l,l=c[1])?(lt(),N(r,1,1,D),rt(),r=st(c),r.c(),j(r,1),r.m(e,null)):r.p(c,m)},i(c){i||(j(t.$$.fragment,c),j(r),i=!0)},o(c){N(t.$$.fragment,c),N(r),i=!1},d(c){c&&f(e),x(t),r.d(c)}}}function At(o,e,a){let t;Ie(o,Ae,v=>a(6,t=v));let{namespace:n}=e,{jobId:l}=e,i=0,r;const c=v=>{v.detail.checked?a(1,i+=1):r&&window.clearTimeout(r)},m=()=>$t({jobId:l,namespace:n}).then(v=>(t&&v.state==="Running"&&(r=window.setTimeout(()=>{a(1,i+=1)},5e3)),v));return o.$$set=v=>{"namespace"in v&&a(0,n=v.namespace),"jobId"in v&&a(4,l=v.jobId)},[n,i,c,m,l]}class Bt extends we{constructor(e){super(),De(this,e,At,yt,Ee,{namespace:0,jobId:4})}}function Ut(o){let e,a,t,n;return e=new ut({props:{title:V("batch.describe-page-title")+" | "+o[0]}}),t=new Bt({props:{jobId:o[0],namespace:o[1]}}),{c(){X(e.$$.fragment),a=b(),X(t.$$.fragment)},l(l){Y(e.$$.fragment,l),a=g(l),Y(t.$$.fragment,l)},m(l,i){Z(e,l,i),le(l,a,i),Z(t,l,i),n=!0},p(l,[i]){const r={};i&1&&(r.title=V("batch.describe-page-title")+" | "+l[0]),e.$set(r);const c={};i&1&&(c.jobId=l[0]),i&2&&(c.namespace=l[1]),t.$set(c)},i(l){n||(j(e.$$.fragment,l),j(t.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),N(t.$$.fragment,l),n=!1},d(l){x(e,l),l&&f(a),x(t,l)}}}function Mt(o,e,a){let t,n,l;return Ie(o,pt,i=>a(2,l=i)),o.$$.update=()=>{o.$$.dirty&4&&a(1,t=l.params.namespace),o.$$.dirty&4&&a(0,n=l.params.jobId)},[n,t,l]}class ea extends we{constructor(e){super(),De(this,e,Mt,Ut,Ee,{})}}export{ea as component};
