import{S as J,i as K,s as M,ad as R,k as j,l as C,m as S,h as $,b,ae as X,g as _,d as g,C as U,y as w,z as v,A as y,R as m,B as I,w as Z,P as x,a as L,c as Q,n as V,F as P,Q as ee,e as A,v as te,f as ne,a4 as oe,q as W,r as z}from"../chunks/index.df672b57.js";import{p as Y}from"../chunks/stores.9c4fb211.js";import{P as re}from"../chunks/page-title.3b4d8116.js";import{t as q}from"../chunks/translate.fa4eeabe.js";import{B as le}from"../chunks/button.8c00d745.js";import{C as se}from"../chunks/code-block.f7c5d5ce.js";import{E as ae}from"../chunks/empty-state.9da16a0e.js";import{L as ce}from"../chunks/loading.da021c84.js";import{S as ie,a as ue}from"../chunks/simple-select.c28daf86.js";import{T as fe}from"../chunks/toggle-switch.6f50695b.js";import{a as me,b as pe}from"../chunks/query-service.e1f6d483.js";import{a as $e}from"../chunks/auth-user.51d8eabf.js";import{s as _e}from"../chunks/parse-with-big-int.b2dd742c.js";function O(r){const t=typeof r[15]!="string"?_e(r[15]):r[15];r[16]=t}function G(r,t,o){const e=r.slice();return e[17]=t[o],e}function ge(r){var e;let t,o;return t=new ae({props:{title:q("common.error-occurred"),content:q("workflows.no-workers-running-message"),error:(e=r[20])==null?void 0:e.message}}),{c(){w(t.$$.fragment)},l(n){v(t.$$.fragment,n)},m(n,l){y(t,n,l),o=!0},p:m,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){g(t.$$.fragment,n),o=!1},d(n){I(t,n)}}}function he(r){let t,o,e,n,l,s,i,a,u,k,h,E,T;function N(c){r[5](c)}let F={id:"query-select",label:q("workflows.query-type"),"data-testid":"query-select",$$slots:{default:[ke]},$$scope:{ctx:r}};r[0]!==void 0&&(F.value=r[0]),e=new ie({props:F}),Z.push(()=>x(e,"value",N)),s=new le({props:{leadingIcon:"retry",loading:Ee,$$slots:{default:[be]},$$scope:{ctx:r}}}),s.$on("click",r[6]),u=new fe({props:{label:q("workflows.json-formatting"),labelPosition:"left",id:"json-formatting",checked:r[2]}}),u.$on("change",r[7]);let p={ctx:r,current:null,token:null,hasCatch:!1,pending:ye,then:ve,catch:we,value:15,blocks:[,,,]};return R(E=r[1],p),{c(){t=j("div"),o=j("div"),w(e.$$.fragment),l=L(),w(s.$$.fragment),i=L(),a=j("div"),w(u.$$.fragment),k=L(),h=j("div"),p.block.c(),this.h()},l(c){t=C(c,"DIV",{class:!0});var f=S(t);o=C(f,"DIV",{class:!0});var d=S(o);v(e.$$.fragment,d),l=Q(d),v(s.$$.fragment,d),d.forEach($),i=Q(f),a=C(f,"DIV",{class:!0});var B=S(a);v(u.$$.fragment,B),B.forEach($),f.forEach($),k=Q(c),h=C(c,"DIV",{class:!0});var D=S(h);p.block.l(D),D.forEach($),this.h()},h(){V(o,"class","flex items-center gap-4"),V(a,"class","flex justify-end"),V(t,"class","flex justify-between"),V(h,"class","my-2 flex h-full items-start")},m(c,f){b(c,t,f),P(t,o),y(e,o,null),P(o,l),y(s,o,null),P(t,i),P(t,a),y(u,a,null),b(c,k,f),b(c,h,f),p.block.m(h,p.anchor=null),p.mount=()=>h,p.anchor=null,T=!0},p(c,f){r=c;const d={};f&2097152&&(d.$$scope={dirty:f,ctx:r}),!n&&f&1&&(n=!0,d.value=r[0],ee(()=>n=!1)),e.$set(d);const B={};f&2097152&&(B.$$scope={dirty:f,ctx:r}),s.$set(B);const D={};f&4&&(D.checked=r[2]),u.$set(D),p.ctx=r,f&2&&E!==(E=r[1])&&R(E,p)||X(p,r,f)},i(c){T||(_(e.$$.fragment,c),_(s.$$.fragment,c),_(u.$$.fragment,c),_(p.block),T=!0)},o(c){g(e.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c);for(let f=0;f<3;f+=1){const d=p.blocks[f];g(d)}T=!1},d(c){c&&$(t),I(e),I(s),I(u),c&&$(k),c&&$(h),p.block.d(),p.token=null,p=null}}}function de(r){let t=r[17]+"",o;return{c(){o=W(t)},l(e){o=z(e,t)},m(e,n){b(e,o,n)},p:m,d(e){e&&$(o)}}}function H(r){let t,o;return t=new ue({props:{value:r[17],$$slots:{default:[de]},$$scope:{ctx:r}}}),{c(){w(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){y(t,e,n),o=!0},p(e,n){const l={};n&2097152&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){g(t.$$.fragment,e),o=!1},d(e){I(t,e)}}}function ke(r){let t,o,e=r[14],n=[];for(let s=0;s<e.length;s+=1)n[s]=H(G(r,e,s));const l=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=A()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);t=A()},m(s,i){for(let a=0;a<n.length;a+=1)n[a].m(s,i);b(s,t,i),o=!0},p(s,i){if(i&8){e=s[14];let a;for(a=0;a<e.length;a+=1){const u=G(s,e,a);n[a]?(n[a].p(u,i),_(n[a],1)):(n[a]=H(u),n[a].c(),_(n[a],1),n[a].m(t.parentNode,t))}for(te(),a=e.length;a<n.length;a+=1)l(a);ne()}},i(s){if(!o){for(let i=0;i<e.length;i+=1)_(n[i]);o=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)g(n[i]);o=!1},d(s){oe(n,s),s&&$(t)}}}function be(r){let t=q("common.refresh")+"",o;return{c(){o=W(t)},l(e){o=z(e,t)},m(e,n){b(e,o,n)},p:m,d(e){e&&$(o)}}}function we(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ve(r){O(r);let t,o;return t=new se({props:{content:r[16],language:r[2]?"json":"text",copyIconTitle:q("common.copy-icon-title"),copySuccessIconTitle:q("common.copy-success-icon-title")}}),{c(){w(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){y(t,e,n),o=!0},p(e,n){O(e);const l={};n&2&&(l.content=e[16]),n&4&&(l.language=e[2]?"json":"text"),t.$set(l)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){g(t.$$.fragment,e),o=!1},d(e){I(t,e)}}}function ye(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ie(r){let t,o,e,n,l=q("workflows.no-workers-failure-message")+"",s,i;return o=new ce({}),{c(){t=j("div"),w(o.$$.fragment),e=L(),n=j("p"),s=W(l),this.h()},l(a){t=C(a,"DIV",{class:!0});var u=S(t);v(o.$$.fragment,u),e=Q(u),n=C(u,"P",{});var k=S(n);s=z(k,l),k.forEach($),u.forEach($),this.h()},h(){V(t,"class","text-center")},m(a,u){b(a,t,u),y(o,t,null),P(t,e),P(t,n),P(n,s),i=!0},p:m,i(a){i||(_(o.$$.fragment,a),i=!0)},o(a){g(o.$$.fragment,a),i=!1},d(a){a&&$(t),I(o)}}}function qe(r){let t,o,e={ctx:r,current:null,token:null,hasCatch:!0,pending:Ie,then:he,catch:ge,value:14,error:20,blocks:[,,,]};return R(r[3],e),{c(){t=j("section"),e.block.c()},l(n){t=C(n,"SECTION",{});var l=S(t);e.block.l(l),l.forEach($)},m(n,l){b(n,t,l),e.block.m(t,e.anchor=null),e.mount=()=>t,e.anchor=null,o=!0},p(n,[l]){r=n,X(e,r,l)},i(n){o||(_(e.block),o=!0)},o(n){for(let l=0;l<3;l+=1){const s=e.blocks[l];g(s)}o=!1},d(n){n&&$(t),e.block.d(),e.token=null,e=null}}}let Ee=!1;function Te(r,t,o){let e,n;U(r,$e,c=>o(8,e=c)),U(r,Y,c=>o(9,n=c));const{namespace:l,workflow:s,run:i}=n.params,a={id:s,runId:i};let u,k=me({namespace:l,workflow:a}).then(c=>(o(0,u=u||c[0]),c)),h;const E=c=>{var f;o(1,h=pe({namespace:l,workflow:a,queryType:c},(f=n.data)===null||f===void 0?void 0:f.settings,e==null?void 0:e.accessToken))};let T=!0;function N(c){u=c,o(0,u)}const F=()=>E(u),p=()=>o(2,T=!T);return r.$$.update=()=>{r.$$.dirty&1&&u&&E(u)},[u,h,T,k,E,N,F,p]}class je extends J{constructor(t){super(),K(this,t,Te,qe,M,{})}}function Ce(r){let t,o,e,n;return t=new re({props:{title:`${q("workflows.queries-tab")} | ${r[1]}`,url:r[0].url.href}}),e=new je({}),{c(){w(t.$$.fragment),o=L(),w(e.$$.fragment)},l(l){v(t.$$.fragment,l),o=Q(l),v(e.$$.fragment,l)},m(l,s){y(t,l,s),b(l,o,s),y(e,l,s),n=!0},p(l,[s]){const i={};s&1&&(i.url=l[0].url.href),t.$set(i)},i(l){n||(_(t.$$.fragment,l),_(e.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),g(e.$$.fragment,l),n=!1},d(l){I(t,l),l&&$(o),I(e,l)}}}function Se(r,t,o){let e;U(r,Y,l=>o(0,e=l));const n=e.params.workflow;return[e,n]}class Oe extends J{constructor(t){super(),K(this,t,Se,Ce,M,{})}}export{Oe as component};
