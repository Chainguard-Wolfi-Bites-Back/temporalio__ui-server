import{s as me,e as j,a as L,t as z,b as Q,d as J,g as $,h as O,f as G,j as Y,k as M,l as N,n as ae,c as K,v as x,ac as xe,_ as re,$ as le,a3 as et,w as Z,x as ce,y as tt,Q as ot,ad as Te,J as rt,p as nt,u as lt,q as st,r as ft}from"../chunks/scheduler.yuwC4fMQ.js";import{S as pe,i as _e,c as S,a as P,m as T,t as g,b as k,d as W,h as se,g as te,e as oe,f as at}from"../chunks/index.m6evPz-M.js";import{p as Se}from"../chunks/stores.f3t7WWBZ.js";import{L as Pe}from"../chunks/link.mGhMYok0.js";import{t as R}from"../chunks/translate.eu_ZgPaL.js";import{a as it}from"../chunks/workflows.hUsSfV0B.js";import{e as Re,b as ue,o as ke,p as be,c as ve,q as Ie}from"../chunks/route-for.2o4PCImE.js";import{L as $t}from"../chunks/loading.zgfbl5xF.js";import{a as ut}from"../chunks/index.VnKdIPSl.js";import{T as kt}from"../chunks/toggle-switch.gTAMbkvT.js";import{T as We}from"../chunks/tooltip.1-7aQh2s.js";import{b as Ee,a as ye}from"../chunks/event-view.FNKcP-md.js";import{e as De}from"../chunks/each.oHGYpoql.js";import{C as bt,T as vt,w as It,a as Et}from"../chunks/workflow-terminate-enabled.CgBOU4ck.js";import{w as ct}from"../chunks/entry.o4SLT-vb.js";import{C as Ct}from"../chunks/checkbox.L264dkNW.js";import{I as mt}from"../chunks/input.1gaDhLis.js";import{M as pt}from"../chunks/modal.6GIF_bfy.js";import{R as At,a as Rt}from"../chunks/radio-input.XvYhrwbZ.js";import{R as $e}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as Dt,h as St,i as Pt}from"../chunks/workflow-service.Xf7-9YgI.js";import{r as _t,e as Ce,t as qe,i as Tt}from"../chunks/events.QFSFsLcA.js";import{p as Wt}from"../chunks/persist-store.PoWxyyP8.js";import{i as dt}from"../chunks/is-network-error.83TWn09I.js";import{C as Vt}from"../chunks/code-block.j1pAv1gj.js";import{c as Mt}from"../chunks/data-encoder-config.AHMY1WYk.js";import{t as yt}from"../chunks/toaster.b0r33BuH.js";import{B as qt}from"../chunks/button.e4v_P3Em.js";import{B as Ve}from"../chunks/badge.lp2QZNr3.js";import{I as Nt}from"../chunks/icon.5C_lPgq9.js";import{c as Ft}from"../chunks/menu.10QCmKDE.js";import{M as Bt}from"../chunks/menu-divider.dja-D4ii.js";import{S as Ht}from"../chunks/split-button.KOS4DBzj.js";import{c as Ut}from"../chunks/core-user.3Fgzl8zP.js";import{s as Lt}from"../chunks/settings.BoQkykEJ.js";import{r as fe,w as Ae,i as Ot}from"../chunks/workflow-run.wlDsIVsC.js";import{w as jt}from"../chunks/write-actions-are-allowed.CnTp9HoZ.js";import{W as Qt}from"../chunks/workflow-status.M6URT1DX.js";import{A as gt}from"../chunks/alert.AplxncRT.js";import{C as Ne,g as Jt,a as Yt}from"../chunks/pollers-service.w_NULSq7.js";import{C as zt}from"../chunks/index.gagPJzmw.js";import{a as Gt,b as Kt,c as he}from"../chunks/tab.3znnWxIm.js";import{h as Xt}from"../chunks/has.GKfowTHT.js";import{f as Zt,b as xt,h as eo}from"../chunks/task-queue-compatibility.52mtxoi2.js";import{f as to,d as oo}from"../chunks/decode-payload.8TKwBQrj.js";import{a as ro}from"../chunks/events-service.ASYr3D2W.js";import{a as no}from"../chunks/auth-user.ZGFnAnjW.js";function lo(n){let o=R("workflows.back-to-workflows")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p:x,d(t){t&&$(e)}}}function so(n){var V,D;let o,e,t,r,l,s,a=(((V=n[0])==null?void 0:V.statusCode)??"500")+"",f,u,c,i,m,_,w=(((D=n[0])==null?void 0:D.statusText)??"")+"",h,I;return t=new Pe({props:{href:`${Re({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[lo]},$$scope:{ctx:n}}}),{c(){o=j("header"),e=j("div"),S(t.$$.fragment),r=L(),l=j("div"),s=j("h1"),f=z(a),u=L(),c=j("p"),i=z(n[1]),m=L(),_=j("p"),h=z(w),this.h()},l(b){o=Q(b,"HEADER",{class:!0});var C=J(o);e=Q(C,"DIV",{class:!0});var y=J(e);P(t.$$.fragment,y),y.forEach($),C.forEach($),r=O(b),l=Q(b,"DIV",{class:!0});var q=J(l);s=Q(q,"H1",{class:!0});var d=J(s);f=G(d,a),d.forEach($),u=O(q),c=Q(q,"P",{class:!0});var v=J(c);i=G(v,n[1]),v.forEach($),m=O(q),_=Q(q,"P",{class:!0});var B=J(_);h=G(B,w),B.forEach($),q.forEach($),this.h()},h(){Y(e,"class","mb-4 block"),Y(o,"class","mb-4 flex flex-col gap-1"),Y(s,"class","leading-0 text-[12rem] font-semibold"),Y(c,"class","-mt-12 text-lg"),Y(_,"class","text-2xl font-bold text-red-700"),Y(l,"class","text-center align-middle")},m(b,C){M(b,o,C),N(o,e),T(t,e,null),M(b,r,C),M(b,l,C),N(l,s),N(s,f),N(l,u),N(l,c),N(c,i),N(l,m),N(l,_),N(_,h),I=!0},p(b,[C]){var q,d;const y={};C&12&&(y.href=`${Re({namespace:b[2]})}?${b[3]}`),C&32&&(y.$$scope={dirty:C,ctx:b}),t.$set(y),(!I||C&1)&&a!==(a=(((q=b[0])==null?void 0:q.statusCode)??"500")+"")&&ae(f,a),(!I||C&2)&&ae(i,b[1]),(!I||C&1)&&w!==(w=(((d=b[0])==null?void 0:d.statusText)??"")+"")&&ae(h,w)},i(b){I||(g(t.$$.fragment,b),I=!0)},o(b){k(t.$$.fragment,b),I=!1},d(b){b&&($(o),$(r),$(l)),W(t)}}}function fo(n,o,e){let t,r,l,s;K(n,Se,f=>e(4,l=f)),K(n,it,f=>e(3,s=f));let{error:a}=o;return n.$$set=f=>{"error"in f&&e(0,a=f.error)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{namespace:t}=l.params,t),n.$$.dirty&1&&e(1,r=a.statusCode===404?R("workflows.workflow-404-title"):R("workflows.workflow-error-title"))},[a,r,t,s,l]}class ao extends pe{constructor(o){super(),_e(this,o,fo,so,me,{error:0})}}function io(n){let o,e;return o=new kt({props:{label:R("common.auto-refresh"),labelPosition:"left",id:"autorefresh",checked:n[1]}}),o.$on("change",function(){xe(n[0])&&n[0].apply(this,arguments)}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){n=t;const l={};r&2&&(l.checked=n[1]),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function uo(n){let o,e;return o=new We({props:{bottomLeft:!0,text:R("common.auto-refresh-tooltip",{interval:"15"}),$$slots:{default:[io]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,[r]){const l={};r&11&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function co(n,o,e){let t,r;K(n,Ee,s=>e(2,r=s));let{onChange:l}=o;return n.$$set=s=>{"onChange"in s&&e(0,l=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&e(1,t=r==="on")},[l,t,r]}class mo extends pe{constructor(o){super(),_e(this,o,co,uo,me,{onChange:0})}}const wt=Wt("resetWorkflows",{});function Fe(n,o,e){const t=n.slice();return t[18]=o[e],t}function po(n){let o,e=R("workflows.reset-modal-title")+"",t;return{c(){o=j("h3"),t=z(e),this.h()},l(r){o=Q(r,"H3",{slot:!0});var l=J(o);t=G(l,e),l.forEach($),this.h()},h(){Y(o,"slot","title")},m(r,l){M(r,o,l),N(o,t)},p:x,d(r){r&&$(o)}}}function Be(n){let o,e;return o=new Rt({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r&64&&(l.id="reset-event-"+t[18].id),r&64&&(l.value=t[18].id),r&64&&(l.label=t[18].id+" - "+t[18].eventType),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function _o(n){let o,e,t=De(n[6]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Be(Fe(n,t,s));const l=s=>k(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=ce()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);o=ce()},m(s,a){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(s,a);M(s,o,a),e=!0},p(s,a){if(a&64){t=De(s[6]);let f;for(f=0;f<t.length;f+=1){const u=Fe(s,t,f);r[f]?(r[f].p(u,a),g(r[f],1)):(r[f]=Be(u),r[f].c(),g(r[f],1),r[f].m(o.parentNode,o))}for(te(),f=t.length;f<r.length;f+=1)l(f);oe()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)g(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)k(r[a]);e=!1},d(s){s&&$(o),tt(r,s)}}}function go(n){let o,e,t,r,l,s,a,f;e=new At({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:R("workflows.reset-event-radio-group-description"),$$slots:{default:[_o]},$$scope:{ctx:n}}}),r=new Ct({props:{id:"reset-reapply-type-checkbox",checked:n[4]===$e.Signal,label:R("workflows.reset-reapply-type-label")}}),r.$on("change",n[9]);function u(i){n[13](i)}let c={id:"reset-reason",label:R("common.reason")};return n[5]!==void 0&&(c.value=n[5]),s=new mt({props:c}),re.push(()=>se(s,"value",u)),{c(){o=j("div"),S(e.$$.fragment),t=L(),S(r.$$.fragment),l=L(),S(s.$$.fragment),this.h()},l(i){o=Q(i,"DIV",{class:!0});var m=J(o);P(e.$$.fragment,m),t=O(m),P(r.$$.fragment,m),l=O(m),P(s.$$.fragment,m),m.forEach($),this.h()},h(){Y(o,"class","flex w-full flex-col gap-4")},m(i,m){M(i,o,m),T(e,o,null),N(o,t),T(r,o,null),N(o,l),T(s,o,null),f=!0},p(i,m){const _={};m&2097216&&(_.$$scope={dirty:m,ctx:i}),e.$set(_);const w={};m&16&&(w.checked=i[4]===$e.Signal),r.$set(w);const h={};!a&&m&32&&(a=!0,h.value=i[5],le(()=>a=!1)),s.$set(h)},i(i){f||(g(e.$$.fragment,i),g(r.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){k(e.$$.fragment,i),k(r.$$.fragment,i),k(s.$$.fragment,i),f=!1},d(i){i&&$(o),W(e),W(r),W(s)}}}function wo(n){let o,e,t,r;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:R("common.confirm"),cancelText:R("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[go],title:[po]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),o=new pt({props:a}),re.push(()=>se(o,"error",l)),re.push(()=>se(o,"open",s)),o.$on("confirmModal",n[10]),o.$on("cancelModal",n[8]),{c(){S(o.$$.fragment)},l(f){P(o.$$.fragment,f)},m(f,u){T(o,f,u),r=!0},p(f,[u]){const c={};u&8&&(c.loading=f[3]),u&2097264&&(c.$$scope={dirty:u,ctx:f}),!e&&u&4&&(e=!0,c.error=f[2],le(()=>e=!1)),!t&&u&1&&(t=!0,c.open=f[0],le(()=>t=!1)),o.$set(c)},i(f){r||(g(o.$$.fragment,f),r=!0)},o(f){k(o.$$.fragment,f),r=!1},d(f){W(o,f)}}}function ho(n,o,e){let t,r=x,l=()=>(r(),r=et(i,d=>e(16,t=d)),i),s,a;K(n,_t,d=>e(6,a=d)),n.$$.on_destroy.push(()=>r());let{open:f}=o,{workflow:u}=o,{namespace:c}=o,{refresh:i}=o;l();let m="",_=!1,w,h=ct("");K(n,h,d=>e(17,s=d));let I;const V=()=>{e(0,f=!1),e(4,w=$e.Signal),Z(h,s="",s),e(5,I="")},D=d=>{e(4,w=d.detail.checked?$e.Signal:$e.None)},b=async()=>{e(2,m=""),e(3,_=!0);try{const d=await Dt({namespace:c,workflow:u,eventId:s,reason:I,reapplyType:w});d&&d.runId&&wt.update(v=>({...v,[u.runId]:d.runId})),Z(i,t=Date.now(),t),V()}catch(d){e(2,m=dt(d)?d.message:R("common.unknown-error"))}finally{e(3,_=!1)}V()};function C(d){I=d,e(5,I)}function y(d){m=d,e(2,m)}function q(d){f=d,e(0,f)}return n.$$set=d=>{"open"in d&&e(0,f=d.open),"workflow"in d&&e(11,u=d.workflow),"namespace"in d&&e(12,c=d.namespace),"refresh"in d&&l(e(1,i=d.refresh))},[f,i,m,_,w,I,a,h,V,D,b,u,c,C,y,q]}class $o extends pe{constructor(o){super(),_e(this,o,ho,wo,me,{open:0,workflow:11,namespace:12,refresh:1})}}function ko(n){let o,e=R("workflows.signal-modal-title")+"",t;return{c(){o=j("h3"),t=z(e),this.h()},l(r){o=Q(r,"H3",{slot:!0});var l=J(o);t=G(l,e),l.forEach($),this.h()},h(){Y(o,"slot","title")},m(r,l){M(r,o,l),N(o,t)},p:x,d(r){r&&$(o)}}}function bo(n){let o,e,t,r,l,s,a=R("workflows.signal-payload-input-label")+"",f,u,c,i=R("workflows.signal-payload-input-label-hint")+"",m,_,w,h;function I(b){n[12](b)}let V={id:"signal-name",label:R("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(V.value=n[4]),e=new mt({props:V}),re.push(()=>se(e,"value",I));let D={class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1};return w=new Vt({props:D}),n[13](w),w.$on("change",n[9]),{c(){o=j("div"),S(e.$$.fragment),r=L(),l=j("div"),s=j("span"),f=z(a),u=L(),c=j("span"),m=z(i),_=L(),S(w.$$.fragment),this.h()},l(b){o=Q(b,"DIV",{slot:!0,class:!0});var C=J(o);P(e.$$.fragment,C),r=O(C),l=Q(C,"DIV",{});var y=J(l);s=Q(y,"SPAN",{class:!0});var q=J(s);f=G(q,a),q.forEach($),u=O(y),c=Q(y,"SPAN",{class:!0});var d=J(c);m=G(d,i),d.forEach($),_=O(y),P(w.$$.fragment,y),y.forEach($),C.forEach($),this.h()},h(){Y(s,"class","font-secondary text-sm font-medium"),Y(c,"class","font-secondary text-xs font-light italic"),Y(o,"slot","content"),Y(o,"class","flex flex-col gap-4")},m(b,C){M(b,o,C),T(e,o,null),N(o,r),N(o,l),N(l,s),N(s,f),N(l,u),N(l,c),N(c,m),N(l,_),T(w,l,null),h=!0},p(b,C){const y={};!t&&C&16&&(t=!0,y.value=b[4],le(()=>t=!1)),e.$set(y);const q={};C&32&&(q.content=b[5]),w.$set(q)},i(b){h||(g(e.$$.fragment,b),g(w.$$.fragment,b),h=!0)},o(b){k(e.$$.fragment,b),k(w.$$.fragment,b),h=!1},d(b){b&&$(o),W(e),n[13](null),W(w)}}}function vo(n){let o,e,t,r;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:R("common.submit"),cancelText:R("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[bo],title:[ko]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),o=new pt({props:a}),re.push(()=>se(o,"error",l)),re.push(()=>se(o,"open",s)),o.$on("cancelModal",n[7]),o.$on("confirmModal",n[8]),{c(){S(o.$$.fragment)},l(f){P(o.$$.fragment,f)},m(f,u){T(o,f,u),r=!0},p(f,[u]){const c={};u&8&&(c.loading=f[3]),u&16&&(c.confirmDisabled=!f[4]),u&524400&&(c.$$scope={dirty:u,ctx:f}),!e&&u&4&&(e=!0,c.error=f[2],le(()=>e=!1)),!t&&u&1&&(t=!0,c.open=f[0],le(()=>t=!1)),o.$set(c)},i(f){r||(g(o.$$.fragment,f),r=!0)},o(f){k(o.$$.fragment,f),r=!1},d(f){W(o,f)}}}function Io(n,o,e){let t,r=x,l=()=>(r(),r=et(c,v=>e(16,t=v)),c),s;K(n,Mt,v=>e(17,s=v)),n.$$.on_destroy.push(()=>r());let{open:a}=o,{workflow:f}=o,{namespace:u}=o,{refresh:c}=o;l();let i="",m=!1,_="",w="",h;const I=()=>s?'{"metadata": {"encoding": ""}, "data": ""}':"",V=()=>{e(0,a=!1),e(5,w=I()),e(4,_=""),h==null||h.resetView(w)},D=async()=>{e(2,i=""),e(3,m=!0);try{await St({namespace:u,workflow:f,input:w,name:_}),Z(c,t=Date.now(),t),yt.push({message:R("workflows.signal-success"),id:"workflow-signal-success-toast"}),V()}catch(v){e(2,i=dt(v)?v.message:R("common.unknown-error"))}finally{e(3,m=!1)}},b=v=>{e(5,w=v.detail)};function C(v){_=v,e(4,_)}function y(v){re[v?"unshift":"push"](()=>{h=v,e(6,h)})}function q(v){i=v,e(2,i)}function d(v){a=v,e(0,a)}return n.$$set=v=>{"open"in v&&e(0,a=v.open),"workflow"in v&&e(10,f=v.workflow),"namespace"in v&&e(11,u=v.namespace),"refresh"in v&&l(e(1,c=v.refresh))},[a,c,i,m,_,w,h,V,D,b,f,u,C,y,q,d]}class Eo extends pe{constructor(o){super(),_e(this,o,Io,vo,me,{open:0,workflow:10,namespace:11,refresh:1})}}const Co=n=>!n.disableWriteActions&&!n.workflowResetDisabled,Ao=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function He(n,o,e){const t=n.slice();return t[29]=o[e].onClick,t[30]=o[e].destructive,t[31]=o[e].label,t[32]=o[e].allowed,t[33]=o[e].testId,t[34]=o[e].tooltip,t}function Ro(n){let o,e;return o=new We({props:{bottomRight:!0,width:200,text:n[4],hide:n[5],$$slots:{default:[Po]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r[0]&16&&(l.text=t[4]),r[0]&32&&(l.hide=t[5]),r[0]&288|r[1]&64&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Do(n){let o,e;return o=new Ht({props:{id:"workflow-actions",position:"right",disabled:n[11],primaryActionDisabled:!n[12]||n[2],label:R("workflows.request-cancellation"),menuLabel:R("workflows.workflow-actions"),$$slots:{default:[Vo]},$$scope:{ctx:n}}}),o.$on("click",n[23]),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r[0]&2048&&(l.disabled=t[11]),r[0]&4100&&(l.primaryActionDisabled=!t[12]||t[2]),r[0]&1024|r[1]&64&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function So(n){let o=R("workflows.reset")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p:x,d(t){t&&$(e)}}}function Po(n){let o,e;return o=new qt({props:{"aria-label":R("workflows.reset"),disabled:!n[5],variant:"primary",$$slots:{default:[So]},$$scope:{ctx:n}}}),o.$on("click",n[24]),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r[0]&32&&(l.disabled=!t[5]),r[1]&64&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Ue(n){let o,e;return o=new Bt({}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function To(n){let o=n[31]+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p(t,r){r[0]&1024&&o!==(o=t[31]+"")&&ae(e,o)},d(t){t&&$(e)}}}function Wo(n){let o,e,t;return o=new Ft({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[To]},$$scope:{ctx:n}}}),o.$on("click",function(){xe(n[29])&&n[29].apply(this,arguments)}),{c(){S(o.$$.fragment),e=L()},l(r){P(o.$$.fragment,r),e=O(r)},m(r,l){T(o,r,l),M(r,e,l),t=!0},p(r,l){n=r;const s={};l[0]&1024&&(s.destructive=n[30]),l[0]&1024&&(s.disabled=!n[32]),l[0]&1024&&(s["data-testid"]=n[33]),l[0]&1024|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),o.$set(s)},i(r){t||(g(o.$$.fragment,r),t=!0)},o(r){k(o.$$.fragment,r),t=!1},d(r){r&&$(e),W(o,r)}}}function Le(n){let o,e,t,r=n[30]&&Ue();return e=new We({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[Wo]},$$scope:{ctx:n}}}),{c(){r&&r.c(),o=L(),S(e.$$.fragment)},l(l){r&&r.l(l),o=O(l),P(e.$$.fragment,l)},m(l,s){r&&r.m(l,s),M(l,o,s),T(e,l,s),t=!0},p(l,s){l[30]?r?s[0]&1024&&g(r,1):(r=Ue(),r.c(),g(r,1),r.m(o.parentNode,o)):r&&(te(),k(r,1,1,()=>{r=null}),oe());const a={};s[0]&1024&&(a.text=l[34]),s[0]&1024&&(a.hide=!l[34]),s[0]&1024|s[1]&64&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(g(r),g(e.$$.fragment,l),t=!0)},o(l){k(r),k(e.$$.fragment,l),t=!1},d(l){l&&$(o),r&&r.d(l),W(e,l)}}}function Vo(n){let o,e,t=De(n[10]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Le(He(n,t,s));const l=s=>k(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=ce()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);o=ce()},m(s,a){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(s,a);M(s,o,a),e=!0},p(s,a){if(a[0]&1024){t=De(s[10]);let f;for(f=0;f<t.length;f+=1){const u=He(s,t,f);r[f]?(r[f].p(u,a),g(r[f],1)):(r[f]=Le(u),r[f].c(),g(r[f],1),r[f].m(o.parentNode,o))}for(te(),f=t.length;f<r.length;f+=1)l(f);oe()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)g(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)k(r[a]);e=!1},d(s){s&&$(o),tt(r,s)}}}function Mo(n){let o,e,t,r,l,s,a,f,u,c,i,m,_,w,h;const I=[Do,Ro],V=[];function D(p,H){return p[3]?0:1}o=D(n),e=V[o]=I[o](n);function b(p){n[25](p)}let C={refresh:fe,workflow:n[0],namespace:n[1]};n[8]!==void 0&&(C.open=n[8]),r=new $o({props:C}),re.push(()=>se(r,"open",b));function y(p){n[26](p)}let q={refresh:fe,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(q.open=n[9]),a=new Eo({props:q}),re.push(()=>se(a,"open",y));function d(p){n[27](p)}let v={refresh:fe,workflow:n[0],namespace:n[1]};n[6]!==void 0&&(v.open=n[6]),c=new bt({props:v}),re.push(()=>se(c,"open",d));function B(p){n[28](p)}let U={refresh:fe,workflow:n[0],namespace:n[1]};return n[7]!==void 0&&(U.open=n[7]),_=new vt({props:U}),re.push(()=>se(_,"open",B)),{c(){e.c(),t=L(),S(r.$$.fragment),s=L(),S(a.$$.fragment),u=L(),S(c.$$.fragment),m=L(),S(_.$$.fragment)},l(p){e.l(p),t=O(p),P(r.$$.fragment,p),s=O(p),P(a.$$.fragment,p),u=O(p),P(c.$$.fragment,p),m=O(p),P(_.$$.fragment,p)},m(p,H){V[o].m(p,H),M(p,t,H),T(r,p,H),M(p,s,H),T(a,p,H),M(p,u,H),T(c,p,H),M(p,m,H),T(_,p,H),h=!0},p(p,H){let X=o;o=D(p),o===X?V[o].p(p,H):(te(),k(V[X],1,1,()=>{V[X]=null}),oe(),e=V[o],e?e.p(p,H):(e=V[o]=I[o](p),e.c()),g(e,1),e.m(t.parentNode,t));const A={};H[0]&1&&(A.workflow=p[0]),H[0]&2&&(A.namespace=p[1]),!l&&H[0]&256&&(l=!0,A.open=p[8],le(()=>l=!1)),r.$set(A);const E={};H[0]&1&&(E.workflow=p[0]),H[0]&2&&(E.namespace=p[1]),!f&&H[0]&512&&(f=!0,E.open=p[9],le(()=>f=!1)),a.$set(E);const F={};H[0]&1&&(F.workflow=p[0]),H[0]&2&&(F.namespace=p[1]),!i&&H[0]&64&&(i=!0,F.open=p[6],le(()=>i=!1)),c.$set(F);const ee={};H[0]&1&&(ee.workflow=p[0]),H[0]&2&&(ee.namespace=p[1]),!w&&H[0]&128&&(w=!0,ee.open=p[7],le(()=>w=!1)),_.$set(ee)},i(p){h||(g(e),g(r.$$.fragment,p),g(a.$$.fragment,p),g(c.$$.fragment,p),g(_.$$.fragment,p),h=!0)},o(p){k(e),k(r.$$.fragment,p),k(a.$$.fragment,p),k(c.$$.fragment,p),k(_.$$.fragment,p),h=!1},d(p){p&&($(t),$(s),$(u),$(m)),V[o].d(p),W(r,p),W(a,p),W(c,p),W(_,p)}}}function yo(n,o,e){let t,r,l,s,a,f,u,c,i;K(n,_t,F=>e(21,c=F)),K(n,Se,F=>e(22,i=F));var m,_,w;let{workflow:h}=o,{namespace:I}=o,{cancelInProgress:V}=o,{isRunning:D}=o,b=!1,C=!1,y=!1,q=!1,d,v,B=Ut();K(n,B,F=>e(20,u=F));const U=()=>e(6,b=!0),p=()=>e(8,y=!0);function H(F){y=F,e(8,y),e(5,a),e(4,d),e(18,r),e(17,l),e(19,s),e(0,h),e(16,w),e(21,c),e(14,m),e(15,_),e(22,i)}function X(F){q=F,e(9,q),e(5,a),e(4,d),e(18,r),e(17,l),e(19,s),e(0,h),e(16,w),e(21,c),e(14,m),e(15,_),e(22,i)}function A(F){b=F,e(6,b)}function E(F){C=F,e(7,C),e(5,a),e(4,d),e(18,r),e(17,l),e(19,s),e(0,h),e(16,w),e(21,c),e(14,m),e(15,_),e(22,i)}return n.$$set=F=>{"workflow"in F&&e(0,h=F.workflow),"namespace"in F&&e(1,I=F.namespace),"cancelInProgress"in F&&e(2,V=F.cancelInProgress),"isRunning"in F&&e(3,D=F.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&e(12,t=It(i.data.settings)),n.$$.dirty[0]&4194304&&e(18,r=Ao(i.data.settings)),n.$$.dirty[0]&4194304&&e(17,l=Et(i.data.settings)),n.$$.dirty[0]&4194304&&e(19,s=Co(i.data.settings)),n.$$.dirty[0]&2670593&&(s?s&&(e(14,m=h==null?void 0:h.pendingChildren)===null||m===void 0?void 0:m.length)>0?e(4,d=R("workflows.reset-disabled-pending-children")):s&&(e(15,_=h==null?void 0:h.pendingChildren)===null||_===void 0?void 0:_.length)===0&&c.length===0&&e(4,d=R("workflows.reset-disabled-no-events")):e(4,d=R("workflows.reset-disabled"))),n.$$.dirty[0]&2686977&&e(5,a=s&&(e(16,w=h==null?void 0:h.pendingChildren)===null||w===void 0?void 0:w.length)===0&&c.length>0),n.$$.dirty[0]&393264&&e(10,v=[{label:R("workflows.reset"),onClick:()=>e(8,y=!0),testId:"reset-button",allowed:a,tooltip:a?"":d},{label:R("workflows.signal"),onClick:()=>e(9,q=!0),testId:"signal-button",allowed:r,tooltip:r?"":R("workflows.signal-disabled")},{label:R("workflows.terminate"),onClick:()=>e(7,C=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":R("workflows.terminate-disabled")}]),n.$$.dirty[0]&1048578&&e(11,f=u.namespaceWriteDisabled(I)||!jt(Lt))},[h,I,V,D,d,a,b,C,y,q,v,f,t,B,m,_,w,l,r,s,u,c,i,U,p,H,X,A,E]}class qo extends pe{constructor(o){super(),_e(this,o,yo,Mo,me,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}const No=(n,o)=>{var r;const e=n==="Running",t=(r=o==null?void 0:o.end)==null?void 0:r.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&t},Oe=n=>{const o=n==null?void 0:n.indexOf("?");return o>-1?n.slice(0,o):n},ne=(n,o,e=!1)=>{const t=Oe(n).split("/"),r=Oe(o).split("/");if(e&&t.length!==r.length)return!1;for(let l=0;l<t.length;l++){const s=t[l],a=r[l];if(s!==a)return!1}return!0};function Fo(n){let o=(n[14]?R("common.workflows"):R("workflows.back-to-workflows"))+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p(t,r){r&16384&&o!==(o=(t[14]?R("common.workflows"):R("workflows.back-to-workflows"))+"")&&ae(e,o)},d(t){t&&$(e)}}}function je(n){let o,e;return o=new Pe({props:{href:ue({...n[13]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Bo]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r&8192&&(l.href=ue({...t[13]})),r&268435460&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Bo(n){var t;let o=((t=n[2])==null?void 0:t.runId)+"",e;return{c(){e=z(o)},l(r){e=G(r,o)},m(r,l){M(r,e,l)},p(r,l){var s;l&4&&o!==(o=((s=r[2])==null?void 0:s.runId)+"")&&ae(e,o)},d(r){r&&$(e)}}}function Qe(n){let o,e,t=R("workers.last-used-version")+"",r,l,s,a,f,u=R("workers.next-version")+"",c,i,m;return l=new Ne({props:{defaultVersion:n[1]===n[7]||n[1]===n[8],active:n[1]===n[8],buildId:n[1],$$slots:{"default-worker":[Uo],"overall-default-worker":[Ho]},$$scope:{ctx:n}}}),i=new Ne({props:{defaultVersion:!!n[7],active:n[7]===n[8],buildId:n[7],$$slots:{"default-worker":[Oo],"overall-default-worker":[Lo]},$$scope:{ctx:n}}}),{c(){o=j("p"),e=j("span"),r=z(t),S(l.$$.fragment),s=L(),a=j("p"),f=j("span"),c=z(u),S(i.$$.fragment),this.h()},l(_){o=Q(_,"P",{class:!0});var w=J(o);e=Q(w,"SPAN",{});var h=J(e);r=G(h,t),h.forEach($),P(l.$$.fragment,w),w.forEach($),s=O(_),a=Q(_,"P",{class:!0});var I=J(a);f=Q(I,"SPAN",{});var V=J(f);c=G(V,u),V.forEach($),P(i.$$.fragment,I),I.forEach($),this.h()},h(){Y(o,"class","flex items-center gap-1"),Y(a,"class","flex items-center gap-1")},m(_,w){M(_,o,w),N(o,e),N(e,r),T(l,o,null),M(_,s,w),M(_,a,w),N(a,f),N(f,c),T(i,a,null),m=!0},p(_,w){const h={};w&386&&(h.defaultVersion=_[1]===_[7]||_[1]===_[8]),w&258&&(h.active=_[1]===_[8]),w&2&&(h.buildId=_[1]),w&268435714&&(h.$$scope={dirty:w,ctx:_}),l.$set(h);const I={};w&128&&(I.defaultVersion=!!_[7]),w&384&&(I.active=_[7]===_[8]),w&128&&(I.buildId=_[7]),w&268435840&&(I.$$scope={dirty:w,ctx:_}),i.$set(I)},i(_){m||(g(l.$$.fragment,_),g(i.$$.fragment,_),m=!0)},o(_){k(l.$$.fragment,_),k(i.$$.fragment,_),m=!1},d(_){_&&($(o),$(s),$(a)),W(l),W(i)}}}function Je(n){let o=R("workers.overall")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p:x,d(t){t&&$(e)}}}function Ho(n){let o,e=n[1]===n[8]&&Je();return{c(){e&&e.c(),o=ce()},l(t){e&&e.l(t),o=ce()},m(t,r){e&&e.m(t,r),M(t,o,r)},p(t,r){t[1]===t[8]?e?e.p(t,r):(e=Je(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){t&&$(o),e&&e.d(t)}}}function Uo(n){let o=R("workers.default")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p:x,d(t){t&&$(e)}}}function Ye(n){let o=R("workers.overall")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p:x,d(t){t&&$(e)}}}function Lo(n){let o,e=n[7]===n[8]&&Ye();return{c(){e&&e.c(),o=ce()},l(t){e&&e.l(t),o=ce()},m(t,r){e&&e.m(t,r),M(t,o,r)},p(t,r){t[7]===t[8]?e?e.p(t,r):(e=Ye(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){t&&$(o),e&&e.d(t)}}}function Oo(n){let o=R("workers.default")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p:x,d(t){t&&$(e)}}}function ze(n){let o,e;return o=new mo({props:{onChange:n[17]}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p:x,i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Ge(n){let o,e,t,r;return e=new gt({props:{bold:!0,icon:"info",intent:"info",title:R("workflows.cancel-request-sent"),$$slots:{default:[jo]},$$scope:{ctx:n}}}),{c(){o=j("div"),S(e.$$.fragment),this.h()},l(l){o=Q(l,"DIV",{class:!0});var s=J(o);P(e.$$.fragment,s),s.forEach($),this.h()},h(){Y(o,"class","mb-4")},m(l,s){M(l,o,s),T(e,o,null),r=!0},p(l,s){const a={};s&268435456&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){r||(g(e.$$.fragment,l),l&&(t||rt(()=>{t=at(o,ut,{duration:200,delay:100}),t.start()})),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){l&&$(o),W(e)}}}function jo(n){let o=R("workflows.cancel-request-sent-description")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){M(t,e,r)},p:x,d(t){t&&$(e)}}}function Ke(n){let o,e,t,r;return e=new gt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:R("workflows.reset-success-alert-title"),$$slots:{default:[Jo]},$$scope:{ctx:n}}}),{c(){o=j("div"),S(e.$$.fragment),this.h()},l(l){o=Q(l,"DIV",{class:!0});var s=J(o);P(e.$$.fragment,s),s.forEach($),this.h()},h(){Y(o,"class","mb-4")},m(l,s){M(l,o,s),T(e,o,null),r=!0},p(l,s){const a={};s&268435505&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){r||(g(e.$$.fragment,l),l&&(t||rt(()=>{t=at(o,ut,{duration:200,delay:100}),t.start()})),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){l&&$(o),W(e)}}}function Qo(n){let o;return{c(){o=z("here")},l(e){o=G(e,"here")},m(e,t){M(e,o,t)},d(e){e&&$(o)}}}function Jo(n){var l,s,a,f;let o,e,t,r;return e=new Pe({props:{href:ue({namespace:n[0],workflow:(s=(l=n[4])==null?void 0:l.workflow)==null?void 0:s.id,run:n[5][(f=(a=n[4])==null?void 0:a.workflow)==null?void 0:f.runId]}),$$slots:{default:[Qo]},$$scope:{ctx:n}}}),{c(){o=z("You can find the resulting Workflow Execution "),S(e.$$.fragment),t=z(".")},l(u){o=G(u,"You can find the resulting Workflow Execution "),P(e.$$.fragment,u),t=G(u,".")},m(u,c){M(u,o,c),T(e,u,c),M(u,t,c),r=!0},p(u,c){var m,_,w,h;const i={};c&49&&(i.href=ue({namespace:u[0],workflow:(_=(m=u[4])==null?void 0:m.workflow)==null?void 0:_.id,run:u[5][(h=(w=u[4])==null?void 0:w.workflow)==null?void 0:h.runId]})),c&268435456&&(i.$$scope={dirty:c,ctx:u}),e.$set(i)},i(u){r||(g(e.$$.fragment,u),r=!0)},o(u){k(e.$$.fragment,u),r=!1},d(u){u&&($(o),$(t)),W(e,u)}}}function Yo(n){var t;let o=((t=n[2])==null?void 0:t.historyEvents)+"",e;return{c(){e=z(o)},l(r){e=G(r,o)},m(r,l){M(r,e,l)},p(r,l){var s;l&4&&o!==(o=((s=r[2])==null?void 0:s.historyEvents)+"")&&ae(e,o)},d(r){r&&$(e)}}}function zo(n){let o,e;return o=new Ve({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Yo]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r&268435460&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Go(n){var t,r;let o=((r=(t=n[15])==null?void 0:t.pollers)==null?void 0:r.length)+"",e;return{c(){e=z(o)},l(l){e=G(l,o)},m(l,s){M(l,e,s)},p(l,s){var a,f;s&32768&&o!==(o=((f=(a=l[15])==null?void 0:a.pollers)==null?void 0:f.length)+"")&&ae(e,o)},d(l){l&&$(e)}}}function Ko(n){let o,e;return o=new Ve({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Go]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r&268468224&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Xe(n){let o,e;return o=new Nt({props:{name:"canceled",width:20,height:20}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Xo(n){var s,a;let o,e=((a=(s=n[2])==null?void 0:s.pendingActivities)==null?void 0:a.length)+"",t,r,l=n[12]&&Xe();return{c(){l&&l.c(),o=L(),t=z(e)},l(f){l&&l.l(f),o=O(f),t=G(f,e)},m(f,u){l&&l.m(f,u),M(f,o,u),M(f,t,u),r=!0},p(f,u){var c,i;f[12]?l?u&4096&&g(l,1):(l=Xe(),l.c(),g(l,1),l.m(o.parentNode,o)):l&&(te(),k(l,1,1,()=>{l=null}),oe()),(!r||u&4)&&e!==(e=((i=(c=f[2])==null?void 0:c.pendingActivities)==null?void 0:i.length)+"")&&ae(t,e)},i(f){r||(g(l),r=!0)},o(f){k(l),r=!1},d(f){f&&($(o),$(t)),l&&l.d(f)}}}function Zo(n){let o,e;return o=new Ve({props:{type:n[12]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Xo]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r&4096&&(l.type=t[12]?"warning":"blue"),r&268439556&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function xo(n){let o,e,t,r,l,s,a,f,u,c;return o=new he({props:{label:R("workflows.history-tab"),id:"history-tab",href:ue({...n[13]}),active:ne(n[6].url.pathname,ue({...n[13]})),$$slots:{default:[zo]},$$scope:{ctx:n}}}),t=new he({props:{label:R("workflows.workers-tab"),id:"workers-tab",href:ke(n[13]),active:ne(n[6].url.pathname,ke(n[13])),$$slots:{default:[Ko]},$$scope:{ctx:n}}}),l=new he({props:{label:R("workflows.pending-activities-tab"),id:"pending-activities-tab",href:be(n[13]),active:ne(n[6].url.pathname,be(n[13])),$$slots:{default:[Zo]},$$scope:{ctx:n}}}),a=new he({props:{label:R("workflows.call-stack-tab"),id:"call-stack-tab",href:ve(n[13]),active:ne(n[6].url.pathname,ve(n[13]))}}),u=new he({props:{label:R("workflows.queries-tab"),id:"queries-tab",href:Ie(n[13]),active:ne(n[6].url.pathname,Ie(n[13]))}}),{c(){S(o.$$.fragment),e=L(),S(t.$$.fragment),r=L(),S(l.$$.fragment),s=L(),S(a.$$.fragment),f=L(),S(u.$$.fragment)},l(i){P(o.$$.fragment,i),e=O(i),P(t.$$.fragment,i),r=O(i),P(l.$$.fragment,i),s=O(i),P(a.$$.fragment,i),f=O(i),P(u.$$.fragment,i)},m(i,m){T(o,i,m),M(i,e,m),T(t,i,m),M(i,r,m),T(l,i,m),M(i,s,m),T(a,i,m),M(i,f,m),T(u,i,m),c=!0},p(i,m){const _={};m&8192&&(_.href=ue({...i[13]})),m&8256&&(_.active=ne(i[6].url.pathname,ue({...i[13]}))),m&268435460&&(_.$$scope={dirty:m,ctx:i}),o.$set(_);const w={};m&8192&&(w.href=ke(i[13])),m&8256&&(w.active=ne(i[6].url.pathname,ke(i[13]))),m&268468224&&(w.$$scope={dirty:m,ctx:i}),t.$set(w);const h={};m&8192&&(h.href=be(i[13])),m&8256&&(h.active=ne(i[6].url.pathname,be(i[13]))),m&268439556&&(h.$$scope={dirty:m,ctx:i}),l.$set(h);const I={};m&8192&&(I.href=ve(i[13])),m&8256&&(I.active=ne(i[6].url.pathname,ve(i[13]))),a.$set(I);const V={};m&8192&&(V.href=Ie(i[13])),m&8256&&(V.active=ne(i[6].url.pathname,Ie(i[13]))),u.$set(V)},i(i){c||(g(o.$$.fragment,i),g(t.$$.fragment,i),g(l.$$.fragment,i),g(a.$$.fragment,i),g(u.$$.fragment,i),c=!0)},o(i){k(o.$$.fragment,i),k(t.$$.fragment,i),k(l.$$.fragment,i),k(a.$$.fragment,i),k(u.$$.fragment,i),c=!1},d(i){i&&($(e),$(r),$(s),$(f)),W(o,i),W(t,i),W(l,i),W(a,i),W(u,i)}}}function er(n){let o,e;return o=new Kt({props:{class:"flex flex-wrap gap-6",label:"workflow detail",$$slots:{default:[xo]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r&268480580&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function tr(n){var H,X;let o,e,t,r,l,s,a,f,u,c,i,m,_,w,h,I,V,D,b,C,y,q;t=new Pe({props:{href:`${Re({namespace:n[0]})}?${n[16]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Fo]},$$scope:{ctx:n}}});let d=n[14]&&je(n);u=new zt({props:{copyIconTitle:R("common.copy-icon-title"),copySuccessIconTitle:R("common.copy-success-icon-title"),content:(H=n[2])==null?void 0:H.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}}),m=new Qt({props:{status:(X=n[2])==null?void 0:X.status}});let v=n[9]&&Qe(n),B=n[3]&&ze(n);V=new qo({props:{isRunning:n[3],cancelInProgress:n[11],workflow:n[2],namespace:n[0]}});let U=n[11]&&Ge(n),p=n[10]&&Ke(n);return y=new Gt({props:{$$slots:{default:[er]},$$scope:{ctx:n}}}),{c(){o=j("header"),e=j("div"),S(t.$$.fragment),r=L(),d&&d.c(),l=L(),s=j("div"),a=j("div"),f=j("h1"),S(u.$$.fragment),c=L(),i=j("div"),S(m.$$.fragment),_=L(),v&&v.c(),w=L(),h=j("div"),B&&B.c(),I=L(),S(V.$$.fragment),D=L(),U&&U.c(),b=L(),p&&p.c(),C=L(),S(y.$$.fragment),this.h()},l(A){o=Q(A,"HEADER",{class:!0});var E=J(o);e=Q(E,"DIV",{class:!0});var F=J(e);P(t.$$.fragment,F),r=O(F),d&&d.l(F),F.forEach($),l=O(E),s=Q(E,"DIV",{class:!0});var ee=J(s);a=Q(ee,"DIV",{class:!0});var de=J(a);f=Q(de,"H1",{"data-testid":!0,class:!0});var ie=J(f);P(u.$$.fragment,ie),ie.forEach($),c=O(de),i=Q(de,"DIV",{class:!0});var ge=J(i);P(m.$$.fragment,ge),_=O(ge),v&&v.l(ge),ge.forEach($),de.forEach($),w=O(ee),h=Q(ee,"DIV",{class:!0});var we=J(h);B&&B.l(we),I=O(we),P(V.$$.fragment,we),we.forEach($),ee.forEach($),D=O(E),U&&U.l(E),b=O(E),p&&p.l(E),C=O(E),P(y.$$.fragment,E),E.forEach($),this.h()},h(){Y(e,"class","mb-4 block"),Y(f,"data-testid","workflow-id-heading"),Y(f,"class","overflow-hidden text-2xl font-medium"),Y(i,"class","flex flex-wrap items-center gap-4"),Y(a,"class","flex w-full flex-col justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),Y(h,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end"),Y(s,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),Y(o,"class","mb-4 flex flex-col gap-1")},m(A,E){M(A,o,E),N(o,e),T(t,e,null),N(e,r),d&&d.m(e,null),N(o,l),N(o,s),N(s,a),N(a,f),T(u,f,null),N(a,c),N(a,i),T(m,i,null),N(i,_),v&&v.m(i,null),N(s,w),N(s,h),B&&B.m(h,null),N(h,I),T(V,h,null),N(o,D),U&&U.m(o,null),N(o,b),p&&p.m(o,null),N(o,C),T(y,o,null),q=!0},p(A,[E]){var we,Me;const F={};E&65537&&(F.href=`${Re({namespace:A[0]})}?${A[16]}`),E&268451840&&(F.$$scope={dirty:E,ctx:A}),t.$set(F),A[14]?d?(d.p(A,E),E&16384&&g(d,1)):(d=je(A),d.c(),g(d,1),d.m(e,null)):d&&(te(),k(d,1,1,()=>{d=null}),oe());const ee={};E&4&&(ee.content=(we=A[2])==null?void 0:we.id),u.$set(ee);const de={};E&4&&(de.status=(Me=A[2])==null?void 0:Me.status),m.$set(de),A[9]?v?(v.p(A,E),E&512&&g(v,1)):(v=Qe(A),v.c(),g(v,1),v.m(i,null)):v&&(te(),k(v,1,1,()=>{v=null}),oe()),A[3]?B?(B.p(A,E),E&8&&g(B,1)):(B=ze(A),B.c(),g(B,1),B.m(h,I)):B&&(te(),k(B,1,1,()=>{B=null}),oe());const ie={};E&8&&(ie.isRunning=A[3]),E&2048&&(ie.cancelInProgress=A[11]),E&4&&(ie.workflow=A[2]),E&1&&(ie.namespace=A[0]),V.$set(ie),A[11]?U?(U.p(A,E),E&2048&&g(U,1)):(U=Ge(A),U.c(),g(U,1),U.m(o,b)):U&&(te(),k(U,1,1,()=>{U=null}),oe()),A[10]?p?(p.p(A,E),E&1024&&g(p,1)):(p=Ke(A),p.c(),g(p,1),p.m(o,C)):p&&(te(),k(p,1,1,()=>{p=null}),oe());const ge={};E&268480580&&(ge.$$scope={dirty:E,ctx:A}),y.$set(ge)},i(A){q||(g(t.$$.fragment,A),g(d),g(u.$$.fragment,A),g(m.$$.fragment,A),g(v),g(B),g(V.$$.fragment,A),g(U),g(p),g(y.$$.fragment,A),q=!0)},o(A){k(t.$$.fragment,A),k(d),k(u.$$.fragment,A),k(m.$$.fragment,A),k(v),k(B),k(V.$$.fragment,A),k(U),k(p),k(y.$$.fragment,A),q=!1},d(A){A&&$(o),W(t),d&&d.d(),W(u),W(m),v&&v.d(),B&&B.d(),W(V),U&&U.d(),p&&p.d(),W(y)}}}const Ze=15e3;function or(n,o,e){let t,r,l,s,a,f,u,c,i,m,_,w,h,I,V,D,b,C,y,q;K(n,Ae,E=>e(4,I=E)),K(n,wt,E=>e(5,V=E)),K(n,Ce,E=>e(25,D=E)),K(n,fe,E=>e(26,b=E)),K(n,Ee,E=>e(27,C=E)),K(n,Se,E=>e(6,y=E)),K(n,it,E=>e(16,q=E));var d,v,B,U,p;let{namespace:H}=o,X;ot(()=>{f&&C==="on"&&(clearInterval(X),e(23,X=setInterval(()=>Z(fe,b=Date.now(),b),Ze)))});const A=()=>{C==="on"?(Z(Ee,C="off",C),clearInterval(X)):(Z(fe,b=Date.now(),b),Z(Ee,C="on",C),clearInterval(X),e(23,X=setInterval(()=>Z(fe,b=Date.now(),b),Ze)))};return Te(()=>{clearInterval(X)}),n.$$set=E=>{"namespace"in E&&e(0,H=E.namespace)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{workflow:t,workers:r,compatibility:l}=I,t,(e(15,r),e(4,I)),(e(24,l),e(4,I))),n.$$.dirty&64&&e(14,s=y.params.id),n.$$.dirty&5&&e(13,a={namespace:H,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&262160&&e(3,f=e(18,d=I==null?void 0:I.workflow)===null||d===void 0?void 0:d.isRunning),n.$$.dirty&524304&&e(12,u=["Terminated","TimedOut","Canceled"].includes(e(19,v=I.workflow)===null||v===void 0?void 0:v.status)),n.$$.dirty&8388616&&(f||clearInterval(X)),n.$$.dirty&34603024&&e(11,c=No(e(20,B=I==null?void 0:I.workflow)===null||B===void 0?void 0:B.status,D)),n.$$.dirty&2097200&&e(10,i=Xt(V,e(21,U=I==null?void 0:I.workflow)===null||U===void 0?void 0:U.runId)),n.$$.dirty&4194308&&e(9,m=e(22,p=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||p===void 0?void 0:p.useVersioning),n.$$.dirty&4&&e(1,_=Zt(t)),n.$$.dirty&16777216&&e(8,w=xt(l)),n.$$.dirty&16777218&&e(7,h=eo(l,_))},[H,_,t,f,I,V,y,h,w,m,i,c,u,a,s,r,q,A,d,v,B,U,p,X,l,D]}class rr extends pe{constructor(o){super(),_e(this,o,or,tr,me,{namespace:0})}}async function nr({activity:n,namespace:o,settings:e,accessToken:t},{convertWithCodec:r=to,decodeAttributes:l=oo}={}){const s=await r({attributes:n,namespace:o,settings:e,accessToken:t});return l(s)}const lr=async({activity:n,namespace:o,settings:e,accessToken:t})=>await nr({activity:n,namespace:o,settings:e,accessToken:t}),sr=async(n,o,e,t)=>{const r=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of r){const a=await lr({activity:s,namespace:o,settings:e,accessToken:t});l.push(a)}return l};function fr(n){let o,e,t;o=new rr({props:{namespace:n[0].params.namespace}});const r=n[8].default,l=nt(r,n,n[7],null);return{c(){S(o.$$.fragment),e=L(),l&&l.c()},l(s){P(o.$$.fragment,s),e=O(s),l&&l.l(s)},m(s,a){T(o,s,a),M(s,e,a),l&&l.m(s,a),t=!0},p(s,a){const f={};a&1&&(f.namespace=s[0].params.namespace),o.$set(f),l&&l.p&&(!t||a&128)&&lt(l,r,s,s[7],t?ft(r,s[7],a,null):st(s[7]),null)},i(s){t||(g(o.$$.fragment,s),g(l,s),t=!0)},o(s){k(o.$$.fragment,s),k(l,s),t=!1},d(s){s&&$(e),W(o,s),l&&l.d(s)}}}function ar(n){let o,e;return o=new $t({}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p:x,i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function ir(n){let o,e;return o=new ao({props:{error:n[1]}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,r){const l={};r&2&&(l.error=t[1]),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function ur(n){let o,e,t,r;const l=[ir,ar,fr],s=[];function a(f,u){return f[1]?0:f[2].workflow?2:1}return e=a(n),t=s[e]=l[e](n),{c(){o=j("div"),t.c(),this.h()},l(f){o=Q(f,"DIV",{class:!0});var u=J(o);t.l(u),u.forEach($),this.h()},h(){Y(o,"class","flex h-full flex-col gap-6")},m(f,u){M(f,o,u),s[e].m(o,null),r=!0},p(f,[u]){let c=e;e=a(f),e===c?s[e].p(f,u):(te(),k(s[c],1,1,()=>{s[c]=null}),oe(),t=s[e],t?t.p(f,u):(t=s[e]=l[e](f),t.c()),g(t,1),t.m(o,null))},i(f){r||(g(t),r=!0)},o(f){k(t),r=!1},d(f){f&&$(o),s[e].d()}}}function cr(n,o,e){let t,r,l,s,a,f,u,c,i,m;K(n,Ce,D=>e(9,s=D)),K(n,Ae,D=>e(2,a=D)),K(n,qe,D=>e(10,f=D)),K(n,ye,D=>e(11,u=D)),K(n,Se,D=>e(0,c=D)),K(n,fe,D=>e(6,i=D)),K(n,no,D=>e(12,m=D));let{$$slots:_={},$$scope:w}=o,h;const I=async(D,b)=>{var C;if(!((C=D==null?void 0:D.mostRecentWorkerVersionStamp)===null||C===void 0)&&C.useVersioning)return await Yt({queue:b,namespace:t})},V=async(D,b,C)=>{const{settings:y}=c.data,{workflow:q,error:d}=await Pt({namespace:D,workflowId:b,runId:C});if(d){e(1,h=d);return}const{taskQueue:v}=q,B=await Jt({queue:v,namespace:D}),U=await I(q,v);q.pendingActivities=await sr(q,D,y,m==null?void 0:m.accessToken),Z(Ae,a={workflow:q,workers:B,compatibility:U},a);const p=await ro({namespace:D,workflowId:b,runId:C});Z(Ce,s=p,s)};return ot(()=>{const D=c.url.searchParams.get("sort");D&&Z(ye,u=D,u)}),Te(()=>{Z(qe,f=null,f),Z(Ae,a=Ot,a),Z(Ce,s=Tt,s),e(1,h=void 0)}),n.$$set=D=>{"$$scope"in D&&e(7,w=D.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(5,{namespace:t,workflow:r,run:l}=c.params,t,(e(4,r),e(0,c)),(e(3,l),e(0,c))),n.$$.dirty&120&&V(t,r,l)},[c,h,a,l,r,t,i,w,_]}class mr extends pe{constructor(o){super(),_e(this,o,cr,ur,me,{})}}const ht={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},pr=ct(ht),_r=()=>{pr.set(ht)};function dr(n){let o;const e=n[0].default,t=nt(e,n,n[1],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),o=!0},p(r,l){t&&t.p&&(!o||l&2)&&lt(t,e,r,r[1],o?ft(e,r[1],l,null):st(r[1]),null)},i(r){o||(g(t,r),o=!0)},o(r){k(t,r),o=!1},d(r){t&&t.d(r)}}}function gr(n){let o,e;return o=new mr({props:{$$slots:{default:[dr]},$$scope:{ctx:n}}}),{c(){S(o.$$.fragment)},l(t){P(o.$$.fragment,t)},m(t,r){T(o,t,r),e=!0},p(t,[r]){const l={};r&2&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(g(o.$$.fragment,t),e=!0)},o(t){k(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function wr(n,o,e){let{$$slots:t={},$$scope:r}=o;return Te(()=>{_r()}),n.$$set=l=>{"$$scope"in l&&e(1,r=l.$$scope)},[t,r]}class mn extends pe{constructor(o){super(),_e(this,o,wr,gr,me,{})}}export{mn as component};
