import{s as ie,e as O,a as B,t as Y,b as y,d as U,g as $,h as L,f as J,j,k as M,l as H,n as le,c as Q,v as fe,L as x,V as te,a6 as lt,w as ee,x as ge,y as st,a1 as Ct,$ as ft,S as At,a4 as at,p as Me,u as Ne,q as qe,r as He}from"../chunks/scheduler.AWtTlMeO.js";import{S as ue,i as ce,c as D,a as R,m as P,t as _,b as d,d as S,f as re,g as G,e as K,h as it}from"../chunks/index.91lpp7Ff.js";import{p as Se}from"../chunks/stores.VlF-1afR.js";import{v as Dt}from"../chunks/data-encoder-settings.HxQC2OYI.js";import{L as We}from"../chunks/link.0iCTLfuc.js";import{t as T}from"../chunks/translate.HrioCK44.js";import{h as ut,i as Rt,s as Pt,j as Be}from"../chunks/workflows.MU0nN1MO.js";import{e as Re,b as ae,m as ke,n as ve,c as Ee,o as Ie,p as Ce,q as Ae}from"../chunks/route-for.UUwLsSYW.js";import{l as ct,L as St}from"../chunks/labs-mode-guard.ymVoxCus.js";import{L as mt}from"../chunks/loading.ZhwIBa5k.js";import{a as pt}from"../chunks/index.VrdFapBL.js";import{e as Pe}from"../chunks/each.QPLN4A2E.js";import{w as Wt,a as Tt,b as Vt,C as Mt,T as Nt}from"../chunks/workflow-terminate-enabled.9K_D-mQl.js";import{w as _t}from"../chunks/entry.gbharjFu.js";import{C as qt}from"../chunks/checkbox.FE5a4WJj.js";import{I as dt}from"../chunks/input.cZ5m5hJm.js";import{M as gt}from"../chunks/modal.7pQi5ge-.js";import{R as Ht,a as Ft}from"../chunks/radio-input.sSEgl8Gd.js";import{R as Le}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as wt,f as De,t as Ve}from"../chunks/events.oDDRbxAq.js";import{p as Bt}from"../chunks/persist-store.3OvoAyPw.js";import{i as $t}from"../chunks/is-network-error.S4fYxeQT.js";import{C as Lt}from"../chunks/code-block.EtUUdHhp.js";import{t as Ot}from"../chunks/toaster.BSRJV4h8.js";import{B as yt}from"../chunks/button.ERndJH-O.js";import{I as Ut}from"../chunks/icon.hlu3-iXK.js";import{c as jt}from"../chunks/menu.v7Ke4R44.js";import{M as zt}from"../chunks/menu-divider.ULnGNTZu.js";import{S as Qt}from"../chunks/split-button.AxcFK9A0.js";import{T as ht}from"../chunks/tooltip.hkvKFmJN.js";import{c as Yt}from"../chunks/core-user.7wR_5QD4.js";import{r as be,w as he,i as Jt}from"../chunks/workflow-run.-tXy9ZWc.js";import{W as Gt}from"../chunks/workflow-status.d-3tUnkv.js";import{C as Kt,k as Xt,g as Zt}from"../chunks/pollers-service.SvgahlVm.js";import{A as bt}from"../chunks/alert._GES0UbM.js";import{B as Te}from"../chunks/badge.mHsIdLRu.js";import{C as xt}from"../chunks/index.Cvl6nMJp.js";import{a as er,b as tr,c as _e}from"../chunks/tab.GC7RUS9z.js";import{n as rr}from"../chunks/namespaces.10SLQdTQ.js";import{g as or}from"../chunks/get-workflow-relationships._pqLdLwH.js";import{h as nr}from"../chunks/has.-dFYEuQV.js";import{f as lr,d as sr}from"../chunks/decode-payload.rfRSNyEX.js";import{f as fr}from"../chunks/events-service.0e6q3mSp.js";import{a as ar}from"../chunks/auth-user.R3tTGEiR.js";import{a as Oe}from"../chunks/event-view.IrtKM7N4.js";function ir(n){let e=T("workflows.back-to-workflows")+"",r;return{c(){r=Y(e)},l(t){r=J(t,e)},m(t,o){M(t,r,o)},p:fe,d(t){t&&$(r)}}}function ur(n){var v,N;let e,r,t,o,s,l,f=(((v=n[0])==null?void 0:v.statusCode)??"500")+"",a,u,p,h,g,w,c=(((N=n[0])==null?void 0:N.statusText)??"")+"",i,m;return t=new We({props:{href:`${Re({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[ir]},$$scope:{ctx:n}}}),{c(){e=O("header"),r=O("div"),D(t.$$.fragment),o=B(),s=O("div"),l=O("h1"),a=Y(f),u=B(),p=O("p"),h=Y(n[1]),g=B(),w=O("p"),i=Y(c),this.h()},l(E){e=y(E,"HEADER",{class:!0});var I=U(e);r=y(I,"DIV",{class:!0});var q=U(r);R(t.$$.fragment,q),q.forEach($),I.forEach($),o=L(E),s=y(E,"DIV",{class:!0});var b=U(s);l=y(b,"H1",{class:!0});var C=U(l);a=J(C,f),C.forEach($),u=L(b),p=y(b,"P",{class:!0});var k=U(p);h=J(k,n[1]),k.forEach($),g=L(b),w=y(b,"P",{class:!0});var F=U(w);i=J(F,c),F.forEach($),b.forEach($),this.h()},h(){j(r,"class","mb-4 block"),j(e,"class","mb-4 flex flex-col gap-1"),j(l,"class","leading-0 text-[12rem] font-semibold"),j(p,"class","-mt-12 text-lg"),j(w,"class","text-2xl font-bold text-red-700"),j(s,"class","text-center align-middle")},m(E,I){M(E,e,I),H(e,r),P(t,r,null),M(E,o,I),M(E,s,I),H(s,l),H(l,a),H(s,u),H(s,p),H(p,h),H(s,g),H(s,w),H(w,i),m=!0},p(E,[I]){var b,C;const q={};I&12&&(q.href=`${Re({namespace:E[2]})}?${E[3]}`),I&32&&(q.$$scope={dirty:I,ctx:E}),t.$set(q),(!m||I&1)&&f!==(f=(((b=E[0])==null?void 0:b.statusCode)??"500")+"")&&le(a,f),(!m||I&2)&&le(h,E[1]),(!m||I&1)&&c!==(c=(((C=E[0])==null?void 0:C.statusText)??"")+"")&&le(i,c)},i(E){m||(_(t.$$.fragment,E),m=!0)},o(E){d(t.$$.fragment,E),m=!1},d(E){E&&($(e),$(o),$(s)),S(t)}}}function cr(n,e,r){let t,o,s,l;Q(n,Se,a=>r(4,s=a)),Q(n,ut,a=>r(3,l=a));let{error:f}=e;return n.$$set=a=>{"error"in a&&r(0,f=a.error)},n.$$.update=()=>{n.$$.dirty&16&&r(2,{namespace:t}=s.params,t),n.$$.dirty&1&&r(1,o=f.statusCode===404?T("workflows.workflow-404-title"):T("workflows.workflow-error-title"))},[f,o,t,l,s]}class kt extends ue{constructor(e){super(),ce(this,e,cr,ur,ie,{error:0})}}const vt=Bt("resetWorkflows",{});function ye(n,e,r){const t=n.slice();return t[18]=e[r],t}function mr(n){let e,r=T("workflows.reset-modal-title")+"",t;return{c(){e=O("h3"),t=Y(r),this.h()},l(o){e=y(o,"H3",{slot:!0});var s=U(e);t=J(s,r),s.forEach($),this.h()},h(){j(e,"slot","title")},m(o,s){M(o,e,s),H(e,t)},p:fe,d(o){o&&$(e)}}}function Ue(n){let e,r;return e=new Ft({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&64&&(s.id="reset-event-"+t[18].id),o&64&&(s.value=t[18].id),o&64&&(s.label=t[18].id+" - "+t[18].eventType),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function pr(n){let e,r,t=Pe(n[6]),o=[];for(let l=0;l<t.length;l+=1)o[l]=Ue(ye(n,t,l));const s=l=>d(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=ge()},l(l){for(let f=0;f<o.length;f+=1)o[f].l(l);e=ge()},m(l,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(l,f);M(l,e,f),r=!0},p(l,f){if(f&64){t=Pe(l[6]);let a;for(a=0;a<t.length;a+=1){const u=ye(l,t,a);o[a]?(o[a].p(u,f),_(o[a],1)):(o[a]=Ue(u),o[a].c(),_(o[a],1),o[a].m(e.parentNode,e))}for(G(),a=t.length;a<o.length;a+=1)s(a);K()}},i(l){if(!r){for(let f=0;f<t.length;f+=1)_(o[f]);r=!0}},o(l){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)d(o[f]);r=!1},d(l){l&&$(e),st(o,l)}}}function _r(n){let e,r,t,o,s,l,f,a,u;r=new Ht({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:T("workflows.reset-event-radio-group-description"),$$slots:{default:[pr]},$$scope:{ctx:n}}});function p(c){n[12](c)}let h={id:"reset-reapply-type-checkbox",label:T("workflows.reset-reapply-type-label")};n[5]!==void 0&&(h.checked=n[5]),o=new qt({props:h}),x.push(()=>re(o,"checked",p));function g(c){n[13](c)}let w={id:"reset-reason",label:T("common.reason")};return n[4]!==void 0&&(w.value=n[4]),f=new dt({props:w}),x.push(()=>re(f,"value",g)),{c(){e=O("div"),D(r.$$.fragment),t=B(),D(o.$$.fragment),l=B(),D(f.$$.fragment),this.h()},l(c){e=y(c,"DIV",{class:!0});var i=U(e);R(r.$$.fragment,i),t=L(i),R(o.$$.fragment,i),l=L(i),R(f.$$.fragment,i),i.forEach($),this.h()},h(){j(e,"class","flex w-full flex-col gap-4")},m(c,i){M(c,e,i),P(r,e,null),H(e,t),P(o,e,null),H(e,l),P(f,e,null),u=!0},p(c,i){const m={};i&2097216&&(m.$$scope={dirty:i,ctx:c}),r.$set(m);const v={};!s&&i&32&&(s=!0,v.checked=c[5],te(()=>s=!1)),o.$set(v);const N={};!a&&i&16&&(a=!0,N.value=c[4],te(()=>a=!1)),f.$set(N)},i(c){u||(_(r.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),u=!1},d(c){c&&$(e),S(r),S(o),S(f)}}}function dr(n){let e,r,t,o;function s(a){n[14](a)}function l(a){n[15](a)}let f={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:T("common.confirm"),cancelText:T("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[_r],title:[mr]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),e=new gt({props:f}),x.push(()=>re(e,"error",s)),x.push(()=>re(e,"open",l)),e.$on("confirmModal",n[9]),e.$on("cancelModal",n[8]),{c(){D(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,u){P(e,a,u),o=!0},p(a,[u]){const p={};u&8&&(p.loading=a[3]),u&2097264&&(p.$$scope={dirty:u,ctx:a}),!r&&u&4&&(r=!0,p.error=a[2],te(()=>r=!1)),!t&&u&1&&(t=!0,p.open=a[0],te(()=>t=!1)),e.$set(p)},i(a){o||(_(e.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),o=!1},d(a){S(e,a)}}}function gr(n,e,r){let t,o=fe,s=()=>(o(),o=lt(h,C=>r(16,t=C)),h),l,f;Q(n,wt,C=>r(6,f=C)),n.$$.on_destroy.push(()=>o());let{open:a}=e,{workflow:u}=e,{namespace:p}=e,{refresh:h}=e;s();let g="",w=!1,c=_t("");Q(n,c,C=>r(17,l=C));let i,m=!1;const v=()=>{r(0,a=!1),r(5,m=!1),ee(c,l="",l),r(4,i="")},N=async()=>{r(2,g=""),r(3,w=!0);try{const C=await Rt({namespace:p,workflow:u,eventId:l,reason:i,reapplyType:m?Le.Signal:Le.None});C&&C.runId&&vt.update(k=>({...k,[u.runId]:C.runId})),ee(h,t=Date.now(),t),v()}catch(C){r(2,g=$t(C)?C.message:T("common.unknown-error"))}finally{r(3,w=!1)}v()};function E(C){m=C,r(5,m)}function I(C){i=C,r(4,i)}function q(C){g=C,r(2,g)}function b(C){a=C,r(0,a)}return n.$$set=C=>{"open"in C&&r(0,a=C.open),"workflow"in C&&r(10,u=C.workflow),"namespace"in C&&r(11,p=C.namespace),"refresh"in C&&s(r(1,h=C.refresh))},[a,h,g,w,i,m,f,c,v,N,u,p,E,I,q,b]}class wr extends ue{constructor(e){super(),ce(this,e,gr,dr,ie,{open:0,workflow:10,namespace:11,refresh:1})}}function $r(n){let e,r=T("workflows.signal-modal-title")+"",t;return{c(){e=O("h3"),t=Y(r),this.h()},l(o){e=y(o,"H3",{slot:!0});var s=U(e);t=J(s,r),s.forEach($),this.h()},h(){j(e,"slot","title")},m(o,s){M(o,e,s),H(e,t)},p:fe,d(o){o&&$(e)}}}function hr(n){let e,r,t,o,s,l,f=T("workflows.signal-payload-input-label")+"",a,u,p,h=T("workflows.signal-payload-input-label-hint")+"",g,w,c,i;function m(E){n[12](E)}let v={id:"signal-name",label:T("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(v.value=n[4]),r=new dt({props:v}),x.push(()=>re(r,"value",m));let N={maxHeight:320,content:n[5],editable:!0,copyable:!1};return c=new Lt({props:N}),n[13](c),c.$on("change",n[9]),{c(){e=O("div"),D(r.$$.fragment),o=B(),s=O("div"),l=O("span"),a=Y(f),u=B(),p=O("span"),g=Y(h),w=B(),D(c.$$.fragment),this.h()},l(E){e=y(E,"DIV",{slot:!0,class:!0});var I=U(e);R(r.$$.fragment,I),o=L(I),s=y(I,"DIV",{});var q=U(s);l=y(q,"SPAN",{class:!0});var b=U(l);a=J(b,f),b.forEach($),u=L(q),p=y(q,"SPAN",{class:!0});var C=U(p);g=J(C,h),C.forEach($),w=L(q),R(c.$$.fragment,q),q.forEach($),I.forEach($),this.h()},h(){j(l,"class","font-secondary text-sm font-medium"),j(p,"class","font-secondary text-xs font-light italic"),j(e,"slot","content"),j(e,"class","flex flex-col gap-4")},m(E,I){M(E,e,I),P(r,e,null),H(e,o),H(e,s),H(s,l),H(l,a),H(s,u),H(s,p),H(p,g),H(s,w),P(c,s,null),i=!0},p(E,I){const q={};!t&&I&16&&(t=!0,q.value=E[4],te(()=>t=!1)),r.$set(q);const b={};I&32&&(b.content=E[5]),c.$set(b)},i(E){i||(_(r.$$.fragment,E),_(c.$$.fragment,E),i=!0)},o(E){d(r.$$.fragment,E),d(c.$$.fragment,E),i=!1},d(E){E&&$(e),S(r),n[13](null),S(c)}}}function br(n){let e,r,t,o;function s(a){n[14](a)}function l(a){n[15](a)}let f={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:T("common.submit"),cancelText:T("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[hr],title:[$r]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),e=new gt({props:f}),x.push(()=>re(e,"error",s)),x.push(()=>re(e,"open",l)),e.$on("cancelModal",n[7]),e.$on("confirmModal",n[8]),{c(){D(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,u){P(e,a,u),o=!0},p(a,[u]){const p={};u&8&&(p.loading=a[3]),u&16&&(p.confirmDisabled=!a[4]),u&131184&&(p.$$scope={dirty:u,ctx:a}),!r&&u&4&&(r=!0,p.error=a[2],te(()=>r=!1)),!t&&u&1&&(t=!0,p.open=a[0],te(()=>t=!1)),e.$set(p)},i(a){o||(_(e.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),o=!1},d(a){S(e,a)}}}function kr(n,e,r){let t,o=fe,s=()=>(o(),o=lt(u,b=>r(16,t=b)),u);n.$$.on_destroy.push(()=>o());let{open:l}=e,{workflow:f}=e,{namespace:a}=e,{refresh:u}=e;s();let p="",h=!1,g="",w="",c;const i=()=>{r(0,l=!1),r(5,w=""),r(4,g=""),c==null||c.resetView(w)},m=async()=>{r(2,p=""),r(3,h=!0);try{await Pt({namespace:a,workflow:f,input:w,name:g}),ee(u,t=Date.now(),t),Ot.push({message:T("workflows.signal-success"),id:"workflow-signal-success-toast"}),i()}catch(b){r(2,p=$t(b)?b.message:T("common.unknown-error"))}finally{r(3,h=!1)}},v=b=>{r(5,w=b.detail)};function N(b){g=b,r(4,g)}function E(b){x[b?"unshift":"push"](()=>{c=b,r(6,c)})}function I(b){p=b,r(2,p)}function q(b){l=b,r(0,l)}return n.$$set=b=>{"open"in b&&r(0,l=b.open),"workflow"in b&&r(10,f=b.workflow),"namespace"in b&&r(11,a=b.namespace),"refresh"in b&&s(r(1,u=b.refresh))},[l,u,p,h,g,w,c,i,m,v,f,a,N,E,I,q]}class vr extends ue{constructor(e){super(),ce(this,e,kr,br,ie,{open:0,workflow:10,namespace:11,refresh:1})}}const Er=(n,e,r)=>!n.disableWriteActions&&!n.workflowSignalDisabled&&!e.namespaceWriteDisabled(r);function je(n,e,r){const t=n.slice();return t[28]=e[r].onClick,t[29]=e[r].destructive,t[30]=e[r].label,t[31]=e[r].enabled,t[32]=e[r].testId,t[33]=e[r].tooltip,t}function Ir(n){let e,r;return e=new ht({props:{bottomRight:!0,width:200,text:n[4],hide:n[7],$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o[0]&16&&(s.text=t[4]),o[0]&128&&(s.hide=t[7]),o[0]&1152|o[1]&32&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function Cr(n){let e,r;return e=new Qt({props:{id:"workflow-actions",position:"right",disabled:n[13],primaryActionDisabled:!n[14]||n[2],label:T("workflows.request-cancellation"),menuLabel:T("workflows.workflow-actions"),$$slots:{default:[Sr]},$$scope:{ctx:n}}}),e.$on("click",n[22]),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o[0]&8192&&(s.disabled=t[13]),o[0]&16388&&(s.primaryActionDisabled=!t[14]||t[2]),o[0]&4096|o[1]&32&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function Ar(n){let e=T("workflows.reset")+"",r;return{c(){r=Y(e)},l(t){r=J(t,e)},m(t,o){M(t,r,o)},p:fe,d(t){t&&$(r)}}}function Dr(n){let e,r;return e=new yt({props:{"aria-label":T("workflows.reset"),disabled:!n[7],variant:"primary","data-testid":"workflow-reset-button",$$slots:{default:[Ar]},$$scope:{ctx:n}}}),e.$on("click",n[23]),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o[0]&128&&(s.disabled=!t[7]),o[1]&32&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function ze(n){let e,r;return e=new zt({}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function Rr(n){let e=n[30]+"",r;return{c(){r=Y(e)},l(t){r=J(t,e)},m(t,o){M(t,r,o)},p(t,o){o[0]&4096&&e!==(e=t[30]+"")&&le(r,e)},d(t){t&&$(r)}}}function Pr(n){let e,r,t;return e=new jt({props:{destructive:n[29],disabled:!n[31],"data-testid":n[32],$$slots:{default:[Rr]},$$scope:{ctx:n}}}),e.$on("click",function(){Ct(n[28])&&n[28].apply(this,arguments)}),{c(){D(e.$$.fragment),r=B()},l(o){R(e.$$.fragment,o),r=L(o)},m(o,s){P(e,o,s),M(o,r,s),t=!0},p(o,s){n=o;const l={};s[0]&4096&&(l.destructive=n[29]),s[0]&4096&&(l.disabled=!n[31]),s[0]&4096&&(l["data-testid"]=n[32]),s[0]&4096|s[1]&32&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&$(r),S(e,o)}}}function Qe(n){let e,r,t,o=n[29]&&ze();return r=new ht({props:{text:n[33],hide:!n[33],width:200,left:!0,$$slots:{default:[Pr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),e=B(),D(r.$$.fragment)},l(s){o&&o.l(s),e=L(s),R(r.$$.fragment,s)},m(s,l){o&&o.m(s,l),M(s,e,l),P(r,s,l),t=!0},p(s,l){s[29]?o?l[0]&4096&&_(o,1):(o=ze(),o.c(),_(o,1),o.m(e.parentNode,e)):o&&(G(),d(o,1,1,()=>{o=null}),K());const f={};l[0]&4096&&(f.text=s[33]),l[0]&4096&&(f.hide=!s[33]),l[0]&4096|l[1]&32&&(f.$$scope={dirty:l,ctx:s}),r.$set(f)},i(s){t||(_(o),_(r.$$.fragment,s),t=!0)},o(s){d(o),d(r.$$.fragment,s),t=!1},d(s){s&&$(e),o&&o.d(s),S(r,s)}}}function Sr(n){let e,r,t=Pe(n[12]),o=[];for(let l=0;l<t.length;l+=1)o[l]=Qe(je(n,t,l));const s=l=>d(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=ge()},l(l){for(let f=0;f<o.length;f+=1)o[f].l(l);e=ge()},m(l,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(l,f);M(l,e,f),r=!0},p(l,f){if(f[0]&4096){t=Pe(l[12]);let a;for(a=0;a<t.length;a+=1){const u=je(l,t,a);o[a]?(o[a].p(u,f),_(o[a],1)):(o[a]=Qe(u),o[a].c(),_(o[a],1),o[a].m(e.parentNode,e))}for(G(),a=t.length;a<o.length;a+=1)s(a);K()}},i(l){if(!r){for(let f=0;f<t.length;f+=1)_(o[f]);r=!0}},o(l){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)d(o[f]);r=!1},d(l){l&&$(e),st(o,l)}}}function Ye(n){let e,r,t;function o(l){n[24](l)}let s={refresh:be,workflow:n[0],namespace:n[1]};return n[10]!==void 0&&(s.open=n[10]),e=new wr({props:s}),x.push(()=>re(e,"open",o)),{c(){D(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,f){P(e,l,f),t=!0},p(l,f){const a={};f[0]&1&&(a.workflow=l[0]),f[0]&2&&(a.namespace=l[1]),!r&&f[0]&1024&&(r=!0,a.open=l[10],te(()=>r=!1)),e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){S(e,l)}}}function Je(n){let e,r,t;function o(l){n[25](l)}let s={refresh:be,workflow:n[0],namespace:n[1]};return n[11]!==void 0&&(s.open=n[11]),e=new vr({props:s}),x.push(()=>re(e,"open",o)),{c(){D(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,f){P(e,l,f),t=!0},p(l,f){const a={};f[0]&1&&(a.workflow=l[0]),f[0]&2&&(a.namespace=l[1]),!r&&f[0]&2048&&(r=!0,a.open=l[11],te(()=>r=!1)),e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){S(e,l)}}}function Ge(n){let e,r,t;function o(l){n[26](l)}let s={refresh:be,workflow:n[0],namespace:n[1]};return n[8]!==void 0&&(s.open=n[8]),e=new Mt({props:s}),x.push(()=>re(e,"open",o)),{c(){D(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,f){P(e,l,f),t=!0},p(l,f){const a={};f[0]&1&&(a.workflow=l[0]),f[0]&2&&(a.namespace=l[1]),!r&&f[0]&256&&(r=!0,a.open=l[8],te(()=>r=!1)),e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){S(e,l)}}}function Ke(n){let e,r,t;function o(l){n[27](l)}let s={refresh:be,workflow:n[0],namespace:n[1]};return n[9]!==void 0&&(s.open=n[9]),e=new Nt({props:s}),x.push(()=>re(e,"open",o)),{c(){D(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,f){P(e,l,f),t=!0},p(l,f){const a={};f[0]&1&&(a.workflow=l[0]),f[0]&2&&(a.namespace=l[1]),!r&&f[0]&512&&(r=!0,a.open=l[9],te(()=>r=!1)),e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){S(e,l)}}}function Wr(n){let e,r,t,o,s,l,f,a;const u=[Cr,Ir],p=[];function h(m,v){return m[3]?0:1}e=h(n),r=p[e]=u[e](n);let g=n[7]&&Ye(n),w=n[6]&&Je(n),c=n[14]&&Ge(n),i=n[5]&&Ke(n);return{c(){r.c(),t=B(),g&&g.c(),o=B(),w&&w.c(),s=B(),c&&c.c(),l=B(),i&&i.c(),f=ge()},l(m){r.l(m),t=L(m),g&&g.l(m),o=L(m),w&&w.l(m),s=L(m),c&&c.l(m),l=L(m),i&&i.l(m),f=ge()},m(m,v){p[e].m(m,v),M(m,t,v),g&&g.m(m,v),M(m,o,v),w&&w.m(m,v),M(m,s,v),c&&c.m(m,v),M(m,l,v),i&&i.m(m,v),M(m,f,v),a=!0},p(m,v){let N=e;e=h(m),e===N?p[e].p(m,v):(G(),d(p[N],1,1,()=>{p[N]=null}),K(),r=p[e],r?r.p(m,v):(r=p[e]=u[e](m),r.c()),_(r,1),r.m(t.parentNode,t)),m[7]?g?(g.p(m,v),v[0]&128&&_(g,1)):(g=Ye(m),g.c(),_(g,1),g.m(o.parentNode,o)):g&&(G(),d(g,1,1,()=>{g=null}),K()),m[6]?w?(w.p(m,v),v[0]&64&&_(w,1)):(w=Je(m),w.c(),_(w,1),w.m(s.parentNode,s)):w&&(G(),d(w,1,1,()=>{w=null}),K()),m[14]?c?(c.p(m,v),v[0]&16384&&_(c,1)):(c=Ge(m),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(G(),d(c,1,1,()=>{c=null}),K()),m[5]?i?(i.p(m,v),v[0]&32&&_(i,1)):(i=Ke(m),i.c(),_(i,1),i.m(f.parentNode,f)):i&&(G(),d(i,1,1,()=>{i=null}),K())},i(m){a||(_(r),_(g),_(w),_(c),_(i),a=!0)},o(m){d(r),d(g),d(w),d(c),d(i),a=!1},d(m){m&&($(t),$(o),$(s),$(l),$(f)),p[e].d(m),g&&g.d(m),w&&w.d(m),c&&c.d(m),i&&i.d(m)}}}function Tr(n,e,r){let t,o,s,l,f,a,u,p,h;Q(n,wt,A=>r(19,u=A)),Q(n,Se,A=>r(21,h=A));var g,w;let{workflow:c}=e,{namespace:i}=e,{cancelInProgress:m}=e,{isRunning:v}=e,N=!1,E=!1,I=!1,q=!1,b,C=Yt();Q(n,C,A=>r(20,p=A));let k;const F=()=>r(8,N=!0),V=()=>r(10,I=!0);function z(A){I=A,r(10,I),r(7,f),r(4,b),r(6,o),r(5,s),r(18,l),r(0,c),r(19,u),r(16,g),r(17,w),r(21,h),r(20,p),r(1,i)}function se(A){q=A,r(11,q),r(7,f),r(4,b),r(6,o),r(5,s),r(18,l),r(0,c),r(19,u),r(16,g),r(17,w),r(21,h),r(20,p),r(1,i)}function de(A){N=A,r(8,N)}function W(A){E=A,r(9,E),r(7,f),r(4,b),r(6,o),r(5,s),r(18,l),r(0,c),r(19,u),r(16,g),r(17,w),r(21,h),r(20,p),r(1,i)}return n.$$set=A=>{"workflow"in A&&r(0,c=A.workflow),"namespace"in A&&r(1,i=A.namespace),"cancelInProgress"in A&&r(2,m=A.cancelInProgress),"isRunning"in A&&r(3,v=A.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&3145730&&r(14,t=Wt(h.data.settings,p,i)),n.$$.dirty[0]&3145730&&r(6,o=Er(h.data.settings,p,i)),n.$$.dirty[0]&3145730&&r(5,s=Tt(h.data.settings,p,i)),n.$$.dirty[0]&3145730&&r(18,l=Vt(h.data.settings,p,i)),n.$$.dirty[0]&786433&&r(7,f=l&&c.pendingChildren.length===0&&u.length>0),n.$$.dirty[0]&224&&r(13,a=!f&&!o&&!s),n.$$.dirty[0]&983041&&(l?l&&(r(16,g=c==null?void 0:c.pendingChildren)===null||g===void 0?void 0:g.length)>0?r(4,b=T("workflows.reset-disabled-pending-children")):l&&(r(17,w=c==null?void 0:c.pendingChildren)===null||w===void 0?void 0:w.length)===0&&u.length===0&&r(4,b=T("workflows.reset-disabled-no-events")):r(4,b=T("workflows.reset-disabled-unauthorized"))),n.$$.dirty[0]&240&&r(12,k=[{label:T("workflows.reset"),onClick:()=>r(10,I=!0),testId:"reset-button",enabled:f,tooltip:f?"":b},{label:T("workflows.signal"),onClick:()=>r(11,q=!0),testId:"signal-button",enabled:o,tooltip:o?"":T("workflows.signal-disabled")},{label:T("workflows.terminate"),onClick:()=>r(9,E=!0),testId:"terminate-button",enabled:s,destructive:!0,tooltip:s?"":T("workflows.terminate-disabled")}])},[c,i,m,v,b,s,o,f,N,E,I,q,k,a,t,C,g,w,l,u,p,h,F,V,z,se,de,W]}class Vr extends ue{constructor(e){super(),ce(this,e,Tr,Wr,ie,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}function Mr(n){let e,r,t=T("workers.buildId")+"",o,s,l;return s=new Kt({props:{active:!0,buildId:n[0]}}),{c(){e=O("p"),r=O("span"),o=Y(t),D(s.$$.fragment),this.h()},l(f){e=y(f,"P",{class:!0});var a=U(e);r=y(a,"SPAN",{});var u=U(r);o=J(u,t),u.forEach($),R(s.$$.fragment,a),a.forEach($),this.h()},h(){j(e,"class","flex items-center gap-1")},m(f,a){M(f,e,a),H(e,r),H(r,o),P(s,e,null),l=!0},p(f,[a]){const u={};a&1&&(u.buildId=f[0]),s.$set(u)},i(f){l||(_(s.$$.fragment,f),l=!0)},o(f){d(s.$$.fragment,f),l=!1},d(f){f&&$(e),S(s)}}}function Nr(n,e,r){let t,{workflow:o}=e;return n.$$set=s=>{"workflow"in s&&r(1,o=s.workflow)},n.$$.update=()=>{n.$$.dirty&2&&r(0,t=Xt(o))},[t,o]}class qr extends ue{constructor(e){super(),ce(this,e,Nr,Mr,ie,{workflow:1})}}const Hr=(n,e)=>{const r=n==="Running",t=e==null?void 0:e.some(o=>(o==null?void 0:o.eventType)==="WorkflowExecutionCancelRequested");return r&&t},Xe=n=>{const e=n==null?void 0:n.indexOf("?");return e>-1?n.slice(0,e):n},X=(n,e,r=!1)=>{const t=Xe(n).split("/"),o=Xe(e).split("/");if(r&&t.length!==o.length)return!1;for(let s=0;s<t.length;s++){const l=t[s],f=o[s];if(l!==f)return!1}return!0};function Fr(n){let e=(n[12]?T("common.workflows"):T("workflows.back-to-workflows"))+"",r;return{c(){r=Y(e)},l(t){r=J(t,e)},m(t,o){M(t,r,o)},p(t,o){o&4096&&e!==(e=(t[12]?T("common.workflows"):T("workflows.back-to-workflows"))+"")&&le(r,e)},d(t){t&&$(r)}}}function Ze(n){let e,r;return e=new We({props:{href:ae({...n[11]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&2048&&(s.href=ae({...t[11]})),o&8388610&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function Br(n){var t;let e=((t=n[1])==null?void 0:t.runId)+"",r;return{c(){r=Y(e)},l(o){r=J(o,e)},m(o,s){M(o,r,s)},p(o,s){var l;s&2&&e!==(e=((l=o[1])==null?void 0:l.runId)+"")&&le(r,e)},d(o){o&&$(r)}}}function xe(n){let e,r;return e=new qr({props:{workflow:n[1]}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&2&&(s.workflow=t[1]),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function Lr(n){var t;let e=((t=n[1])==null?void 0:t.historyEvents)+"",r;return{c(){r=Y(e)},l(o){r=J(o,e)},m(o,s){M(o,r,s)},p(o,s){var l;s&2&&e!==(e=((l=o[1])==null?void 0:l.historyEvents)+"")&&le(r,e)},d(o){o&&$(r)}}}function Or(n){let e,r;return e=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Lr]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&8388610&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function yr(n){var t,o;let e=((o=(t=n[13])==null?void 0:t.pollers)==null?void 0:o.length)+"",r;return{c(){r=Y(e)},l(s){r=J(s,e)},m(s,l){M(s,r,l)},p(s,l){var f,a;l&8192&&e!==(e=((a=(f=s[13])==null?void 0:f.pollers)==null?void 0:a.length)+"")&&le(r,e)},d(s){s&&$(r)}}}function Ur(n){let e,r;return e=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[yr]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&8396800&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function jr(n){let e=n[5].relationshipCount+"",r;return{c(){r=Y(e)},l(t){r=J(t,e)},m(t,o){M(t,r,o)},p(t,o){o&32&&e!==(e=t[5].relationshipCount+"")&&le(r,e)},d(t){t&&$(r)}}}function zr(n){let e,r;return e=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[jr]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function et(n){let e,r;return e=new _e({props:{label:T("workflows.pending-activities-tab"),id:"pending-activities-tab",href:Ae(n[11]),active:X(n[4].url.pathname,Ae(n[11])),$$slots:{default:[Yr]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&2048&&(s.href=Ae(t[11])),o&2064&&(s.active=X(t[4].url.pathname,Ae(t[11]))),o&8389122&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function tt(n){let e,r;return e=new Ut({props:{name:"canceled"}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function Qr(n){var f,a;let e,r,t=((a=(f=n[1])==null?void 0:f.pendingActivities)==null?void 0:a.length)+"",o,s,l=n[9]&&tt();return{c(){e=O("div"),l&&l.c(),r=B(),o=Y(t),this.h()},l(u){e=y(u,"DIV",{class:!0});var p=U(e);l&&l.l(p),r=L(p),o=J(p,t),p.forEach($),this.h()},h(){j(e,"class","flex items-center gap-1")},m(u,p){M(u,e,p),l&&l.m(e,null),H(e,r),H(e,o),s=!0},p(u,p){var h,g;u[9]?l?p&512&&_(l,1):(l=tt(),l.c(),_(l,1),l.m(e,r)):l&&(G(),d(l,1,1,()=>{l=null}),K()),(!s||p&2)&&t!==(t=((g=(h=u[1])==null?void 0:h.pendingActivities)==null?void 0:g.length)+"")&&le(o,t)},i(u){s||(_(l),s=!0)},o(u){d(l),s=!1},d(u){u&&$(e),l&&l.d()}}}function Yr(n){let e,r;return e=new Te({props:{type:n[9]?"warning":"information",class:"px-2 py-0",$$slots:{default:[Qr]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&512&&(s.type=t[9]?"warning":"information"),o&8389122&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function Jr(n){let e,r,t,o,s,l,f,a,u,p,h,g,w;e=new _e({props:{label:T("workflows.history-tab"),id:"history-tab",href:ae({...n[11]}),active:X(n[4].url.pathname,ae({...n[11]})),$$slots:{default:[Or]},$$scope:{ctx:n}}}),t=new _e({props:{label:T("workflows.workers-tab"),id:"workers-tab",href:ke(n[11]),active:X(n[4].url.pathname,ke(n[11])),$$slots:{default:[Ur]},$$scope:{ctx:n}}}),s=new _e({props:{label:T("workflows.relationships"),id:"relationships-tab",href:ve(n[11]),active:X(n[4].url.pathname,ve(n[11])),$$slots:{default:[zr]},$$scope:{ctx:n}}});let c=!n[15]&&et(n);return a=new _e({props:{label:T("workflows.call-stack-tab"),id:"call-stack-tab",href:Ee(n[11]),active:X(n[4].url.pathname,Ee(n[11]))}}),p=new _e({props:{label:T("workflows.queries-tab"),id:"queries-tab",href:Ie(n[11]),active:X(n[4].url.pathname,Ie(n[11]))}}),g=new _e({props:{label:T("workflows.metadata-tab"),id:"metadata-tab",href:Ce(n[11]),active:X(n[4].url.pathname,Ce(n[11]))}}),{c(){D(e.$$.fragment),r=B(),D(t.$$.fragment),o=B(),D(s.$$.fragment),l=B(),c&&c.c(),f=B(),D(a.$$.fragment),u=B(),D(p.$$.fragment),h=B(),D(g.$$.fragment)},l(i){R(e.$$.fragment,i),r=L(i),R(t.$$.fragment,i),o=L(i),R(s.$$.fragment,i),l=L(i),c&&c.l(i),f=L(i),R(a.$$.fragment,i),u=L(i),R(p.$$.fragment,i),h=L(i),R(g.$$.fragment,i)},m(i,m){P(e,i,m),M(i,r,m),P(t,i,m),M(i,o,m),P(s,i,m),M(i,l,m),c&&c.m(i,m),M(i,f,m),P(a,i,m),M(i,u,m),P(p,i,m),M(i,h,m),P(g,i,m),w=!0},p(i,m){const v={};m&2048&&(v.href=ae({...i[11]})),m&2064&&(v.active=X(i[4].url.pathname,ae({...i[11]}))),m&8388610&&(v.$$scope={dirty:m,ctx:i}),e.$set(v);const N={};m&2048&&(N.href=ke(i[11])),m&2064&&(N.active=X(i[4].url.pathname,ke(i[11]))),m&8396800&&(N.$$scope={dirty:m,ctx:i}),t.$set(N);const E={};m&2048&&(E.href=ve(i[11])),m&2064&&(E.active=X(i[4].url.pathname,ve(i[11]))),m&8388640&&(E.$$scope={dirty:m,ctx:i}),s.$set(E),i[15]?c&&(G(),d(c,1,1,()=>{c=null}),K()):c?(c.p(i,m),m&32768&&_(c,1)):(c=et(i),c.c(),_(c,1),c.m(f.parentNode,f));const I={};m&2048&&(I.href=Ee(i[11])),m&2064&&(I.active=X(i[4].url.pathname,Ee(i[11]))),a.$set(I);const q={};m&2048&&(q.href=Ie(i[11])),m&2064&&(q.active=X(i[4].url.pathname,Ie(i[11]))),p.$set(q);const b={};m&2048&&(b.href=Ce(i[11])),m&2064&&(b.active=X(i[4].url.pathname,Ce(i[11]))),g.$set(b)},i(i){w||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),_(c),_(a.$$.fragment,i),_(p.$$.fragment,i),_(g.$$.fragment,i),w=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(c),d(a.$$.fragment,i),d(p.$$.fragment,i),d(g.$$.fragment,i),w=!1},d(i){i&&($(r),$(o),$(l),$(f),$(u),$(h)),S(e,i),S(t,i),S(s,i),c&&c.d(i),S(a,i),S(p,i),S(g,i)}}}function Gr(n){let e,r;return e=new tr({props:{class:"flex flex-wrap gap-6 p-4",label:"workflow detail",$$slots:{default:[Jr]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&8432178&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function rt(n){let e,r,t,o;return r=new bt({props:{bold:!0,icon:"info",intent:"info",title:T("workflows.cancel-request-sent"),$$slots:{default:[Kr]},$$scope:{ctx:n}}}),{c(){e=O("div"),D(r.$$.fragment)},l(s){e=y(s,"DIV",{});var l=U(e);R(r.$$.fragment,l),l.forEach($)},m(s,l){M(s,e,l),P(r,e,null),o=!0},p(s,l){const f={};l&8388608&&(f.$$scope={dirty:l,ctx:s}),r.$set(f)},i(s){o||(_(r.$$.fragment,s),s&&(t||ft(()=>{t=it(e,pt,{duration:200,delay:100}),t.start()})),o=!0)},o(s){d(r.$$.fragment,s),o=!1},d(s){s&&$(e),S(r)}}}function Kr(n){let e=T("workflows.cancel-request-sent-description")+"",r;return{c(){r=Y(e)},l(t){r=J(t,e)},m(t,o){M(t,r,o)},p:fe,d(t){t&&$(r)}}}function ot(n){let e,r,t,o;return r=new bt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:T("workflows.reset-success-alert-title"),$$slots:{default:[Zr]},$$scope:{ctx:n}}}),{c(){e=O("div"),D(r.$$.fragment)},l(s){e=y(s,"DIV",{});var l=U(e);R(r.$$.fragment,l),l.forEach($)},m(s,l){M(s,e,l),P(r,e,null),o=!0},p(s,l){const f={};l&8388621&&(f.$$scope={dirty:l,ctx:s}),r.$set(f)},i(s){o||(_(r.$$.fragment,s),s&&(t||ft(()=>{t=it(e,pt,{duration:200,delay:100}),t.start()})),o=!0)},o(s){d(r.$$.fragment,s),o=!1},d(s){s&&$(e),S(r)}}}function Xr(n){let e;return{c(){e=Y("here")},l(r){e=J(r,"here")},m(r,t){M(r,e,t)},d(r){r&&$(e)}}}function Zr(n){var s,l,f,a;let e,r,t,o;return r=new We({props:{href:ae({namespace:n[0],workflow:(l=(s=n[2])==null?void 0:s.workflow)==null?void 0:l.id,run:n[3][(a=(f=n[2])==null?void 0:f.workflow)==null?void 0:a.runId]}),$$slots:{default:[Xr]},$$scope:{ctx:n}}}),{c(){e=Y("You can find the resulting Workflow Execution "),D(r.$$.fragment),t=Y(".")},l(u){e=J(u,"You can find the resulting Workflow Execution "),R(r.$$.fragment,u),t=J(u,".")},m(u,p){M(u,e,p),P(r,u,p),M(u,t,p),o=!0},p(u,p){var g,w,c,i;const h={};p&13&&(h.href=ae({namespace:u[0],workflow:(w=(g=u[2])==null?void 0:g.workflow)==null?void 0:w.id,run:u[3][(i=(c=u[2])==null?void 0:c.workflow)==null?void 0:i.runId]})),p&8388608&&(h.$$scope={dirty:p,ctx:u}),r.$set(h)},i(u){o||(_(r.$$.fragment,u),o=!0)},o(u){d(r.$$.fragment,u),o=!1},d(u){u&&($(e),$(t)),S(r,u)}}}function xr(n){var se,de;let e,r,t,o,s,l,f,a,u,p,h,g,w,c,i,m,v,N,E,I,q,b,C;t=new We({props:{href:`${Re({namespace:n[0]})}?${n[14]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Fr]},$$scope:{ctx:n}}});let k=n[12]&&Ze(n);p=new Gt({props:{status:(se=n[1])==null?void 0:se.status,big:!0}}),c=new xt({props:{copyIconTitle:T("common.copy-icon-title"),copySuccessIconTitle:T("common.copy-success-icon-title"),content:(de=n[1])==null?void 0:de.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}});let F=n[6]&&xe(n);N=new Vr({props:{isRunning:n[10],cancelInProgress:n[8],workflow:n[1],namespace:n[0]}}),I=new er({props:{$$slots:{default:[Gr]},$$scope:{ctx:n}}});let V=n[8]&&rt(n),z=n[7]&&ot(n);return{c(){e=O("div"),r=O("div"),D(t.$$.fragment),o=B(),k&&k.c(),s=B(),l=O("header"),f=O("div"),a=O("div"),u=O("div"),D(p.$$.fragment),h=B(),g=O("div"),w=O("h1"),D(c.$$.fragment),i=B(),F&&F.c(),m=B(),v=O("div"),D(N.$$.fragment),E=B(),D(I.$$.fragment),q=B(),V&&V.c(),b=B(),z&&z.c(),this.h()},l(W){e=y(W,"DIV",{});var A=U(e);r=y(A,"DIV",{class:!0});var oe=U(r);R(t.$$.fragment,oe),o=L(oe),k&&k.l(oe),oe.forEach($),s=L(A),l=y(A,"HEADER",{class:!0});var Z=U(l);f=y(Z,"DIV",{class:!0});var me=U(f);a=y(me,"DIV",{class:!0});var ne=U(a);u=y(ne,"DIV",{class:!0});var we=U(u);R(p.$$.fragment,we),we.forEach($),h=L(ne),g=y(ne,"DIV",{class:!0});var pe=U(g);w=y(pe,"H1",{"data-testid":!0,class:!0});var $e=U(w);R(c.$$.fragment,$e),$e.forEach($),i=L(pe),F&&F.l(pe),pe.forEach($),ne.forEach($),m=L(me),v=y(me,"DIV",{class:!0});var Fe=U(v);R(N.$$.fragment,Fe),Fe.forEach($),me.forEach($),E=L(Z),R(I.$$.fragment,Z),q=L(Z),V&&V.l(Z),b=L(Z),z&&z.l(Z),Z.forEach($),A.forEach($),this.h()},h(){j(r,"class","pb-4"),j(u,"class","px-2"),j(w,"data-testid","workflow-id-heading"),j(w,"class","overflow-hidden text-base font-medium lg:text-2xl"),j(g,"class","flex flex-col flex-wrap gap-0"),j(a,"class","flex flex-col items-center gap-4 lg:flex-row"),j(v,"class","px-2"),j(f,"class","flex flex-col items-center justify-between gap-4 lg:flex-row"),j(l,"class","rounded-top flex flex-col gap-0")},m(W,A){M(W,e,A),H(e,r),P(t,r,null),H(r,o),k&&k.m(r,null),H(e,s),H(e,l),H(l,f),H(f,a),H(a,u),P(p,u,null),H(a,h),H(a,g),H(g,w),P(c,w,null),H(g,i),F&&F.m(g,null),H(f,m),H(f,v),P(N,v,null),H(l,E),P(I,l,null),H(l,q),V&&V.m(l,null),H(l,b),z&&z.m(l,null),C=!0},p(W,[A]){var pe,$e;const oe={};A&16385&&(oe.href=`${Re({namespace:W[0]})}?${W[14]}`),A&8392704&&(oe.$$scope={dirty:A,ctx:W}),t.$set(oe),W[12]?k?(k.p(W,A),A&4096&&_(k,1)):(k=Ze(W),k.c(),_(k,1),k.m(r,null)):k&&(G(),d(k,1,1,()=>{k=null}),K());const Z={};A&2&&(Z.status=(pe=W[1])==null?void 0:pe.status),p.$set(Z);const me={};A&2&&(me.content=($e=W[1])==null?void 0:$e.id),c.$set(me),W[6]?F?(F.p(W,A),A&64&&_(F,1)):(F=xe(W),F.c(),_(F,1),F.m(g,null)):F&&(G(),d(F,1,1,()=>{F=null}),K());const ne={};A&1024&&(ne.isRunning=W[10]),A&256&&(ne.cancelInProgress=W[8]),A&2&&(ne.workflow=W[1]),A&1&&(ne.namespace=W[0]),N.$set(ne);const we={};A&8432178&&(we.$$scope={dirty:A,ctx:W}),I.$set(we),W[8]?V?(V.p(W,A),A&256&&_(V,1)):(V=rt(W),V.c(),_(V,1),V.m(l,b)):V&&(G(),d(V,1,1,()=>{V=null}),K()),W[7]?z?(z.p(W,A),A&128&&_(z,1)):(z=ot(W),z.c(),_(z,1),z.m(l,null)):z&&(G(),d(z,1,1,()=>{z=null}),K())},i(W){C||(_(t.$$.fragment,W),_(k),_(p.$$.fragment,W),_(c.$$.fragment,W),_(F),_(N.$$.fragment,W),_(I.$$.fragment,W),_(V),_(z),C=!0)},o(W){d(t.$$.fragment,W),d(k),d(p.$$.fragment,W),d(c.$$.fragment,W),d(F),d(N.$$.fragment,W),d(I.$$.fragment,W),d(V),d(z),C=!1},d(W){W&&$(e),S(t),k&&k.d(),S(p),S(c),F&&F.d(),S(N),S(I),V&&V.d(),z&&z.d()}}}function eo(n,e,r){let t,o,s,l,f,a,u,p,h,g,w,c,i,m,v,N,E;Q(n,rr,V=>r(21,w=V)),Q(n,De,V=>r(22,c=V)),Q(n,he,V=>r(2,i=V)),Q(n,vt,V=>r(3,m=V)),Q(n,Se,V=>r(4,v=V)),Q(n,ut,V=>r(14,N=V)),Q(n,ct,V=>r(15,E=V));var I,q,b,C,k;let{namespace:F}=e;return n.$$set=V=>{"namespace"in V&&r(0,F=V.namespace)},n.$$.update=()=>{n.$$.dirty&4&&r(1,{workflow:t,workers:o}=i,t,(r(13,o),r(2,i))),n.$$.dirty&16&&r(12,s=v.params.id),n.$$.dirty&3&&r(11,l={namespace:F,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&65540&&r(10,f=r(16,I=i==null?void 0:i.workflow)===null||I===void 0?void 0:I.isRunning),n.$$.dirty&131076&&r(9,a=["Terminated","TimedOut","Canceled"].includes(r(17,q=i.workflow)===null||q===void 0?void 0:q.status)),n.$$.dirty&4456452&&r(8,u=Hr(r(18,b=i==null?void 0:i.workflow)===null||b===void 0?void 0:b.status,c)),n.$$.dirty&524300&&r(7,p=nr(m,r(19,C=i==null?void 0:i.workflow)===null||C===void 0?void 0:C.runId)),n.$$.dirty&1048578&&r(6,h=r(20,k=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||k===void 0?void 0:k.useVersioning),n.$$.dirty&6291458&&r(5,g=or(t,c,w))},[F,t,i,m,v,g,h,p,u,a,f,l,s,o,N,E,I,q,b,C,k,w,c]}class Et extends ue{constructor(e){super(),ce(this,e,eo,xr,ie,{namespace:0})}}async function to({activity:n,namespace:e,settings:r,accessToken:t},{convertWithCodec:o=lr,decodeAttributes:s=sr}={}){const l=await o({attributes:n,namespace:e,settings:r,accessToken:t});return s(l)}const ro=async({activity:n,namespace:e,settings:r,accessToken:t})=>await to({activity:n,namespace:e,settings:r,accessToken:t}),nt=async(n,e,r,t)=>{const o=(n==null?void 0:n.pendingActivities)??[],s=[];for(const l of o){const f=await ro({activity:l,namespace:e,settings:r,accessToken:t});s.push(f)}return s};function oo(n){let e,r,t,o;r=new Et({props:{namespace:n[0].params.namespace}});const s=n[10].default,l=Me(s,n,n[11],null);return{c(){e=O("div"),D(r.$$.fragment),t=B(),l&&l.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var a=U(e);R(r.$$.fragment,a),a.forEach($),t=L(f),l&&l.l(f),this.h()},h(){j(e,"class","px-8 pt-24 md:pt-20")},m(f,a){M(f,e,a),P(r,e,null),M(f,t,a),l&&l.m(f,a),o=!0},p(f,a){const u={};a&1&&(u.namespace=f[0].params.namespace),r.$set(u),l&&l.p&&(!o||a&2048)&&Ne(l,s,f,f[11],o?He(s,f[11],a,null):qe(f[11]),null)},i(f){o||(_(r.$$.fragment,f),_(l,f),o=!0)},o(f){d(r.$$.fragment,f),d(l,f),o=!1},d(f){f&&($(e),$(t)),S(r),l&&l.d(f)}}}function no(n){let e,r;return e=new mt({props:{class:"pt-24"}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p:fe,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function lo(n){let e,r;return e=new kt({props:{error:n[1]}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&2&&(s.error=t[1]),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function so(n){let e,r,t,o,s;const l=[lo,no,oo],f=[];function a(u,p){return u[1]?0:u[2].workflow?2:1}return r=a(n),t=f[r]=l[r](n),{c(){e=O("div"),t.c(),this.h()},l(u){e=y(u,"DIV",{class:!0});var p=U(e);t.l(p),p.forEach($),this.h()},h(){j(e,"class",o="absolute bottom-0 left-0 right-0 "+(n[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0")},m(u,p){M(u,e,p),f[r].m(e,null),s=!0},p(u,p){let h=r;r=a(u),r===h?f[r].p(u,p):(G(),d(f[h],1,1,()=>{f[h]=null}),K(),t=f[r],t?t.p(u,p):(t=f[r]=l[r](u),t.c()),_(t,1),t.m(e,null)),(!s||p&8&&o!==(o="absolute bottom-0 left-0 right-0 "+(u[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0"))&&j(e,"class",o)},i(u){s||(_(t),s=!0)},o(u){d(t),s=!1},d(u){u&&$(e),f[r].d()}}}function fo(n){let e,r,t;e=new Et({props:{namespace:n[0].params.namespace}});const o=n[10].default,s=Me(o,n,n[11],null);return{c(){D(e.$$.fragment),r=B(),s&&s.c()},l(l){R(e.$$.fragment,l),r=L(l),s&&s.l(l)},m(l,f){P(e,l,f),M(l,r,f),s&&s.m(l,f),t=!0},p(l,f){const a={};f&1&&(a.namespace=l[0].params.namespace),e.$set(a),s&&s.p&&(!t||f&2048)&&Ne(s,o,l,l[11],t?He(o,l[11],f,null):qe(l[11]),null)},i(l){t||(_(e.$$.fragment,l),_(s,l),t=!0)},o(l){d(e.$$.fragment,l),d(s,l),t=!1},d(l){l&&$(r),S(e,l),s&&s.d(l)}}}function ao(n){let e,r;return e=new mt({}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p:fe,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function io(n){let e,r;return e=new kt({props:{error:n[1]}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,o){const s={};o&2&&(s.error=t[1]),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function uo(n){let e,r,t,o;const s=[io,ao,fo],l=[];function f(a,u){return a[1]?0:a[2].workflow?2:1}return r=f(n),t=l[r]=s[r](n),{c(){e=O("div"),t.c(),this.h()},l(a){e=y(a,"DIV",{class:!0,slot:!0});var u=U(e);t.l(u),u.forEach($),this.h()},h(){j(e,"class","flex h-full flex-col gap-0"),j(e,"slot","fallback")},m(a,u){M(a,e,u),l[r].m(e,null),o=!0},p(a,u){let p=r;r=f(a),r===p?l[r].p(a,u):(G(),d(l[p],1,1,()=>{l[p]=null}),K(),t=l[r],t?t.p(a,u):(t=l[r]=s[r](a),t.c()),_(t,1),t.m(e,null))},i(a){o||(_(t),o=!0)},o(a){d(t),o=!1},d(a){a&&$(e),l[r].d()}}}function co(n){let e,r;return e=new St({props:{$$slots:{fallback:[uo],default:[so]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,[o]){const s={};o&2063&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function mo(n,e,r){let t,o,s,l,f,a,u,p,h,g,w,c;Q(n,Oe,k=>r(7,l=k)),Q(n,Se,k=>r(0,f=k)),Q(n,be,k=>r(8,a=k)),Q(n,ct,k=>r(9,u=k)),Q(n,Ve,k=>r(13,p=k)),Q(n,he,k=>r(2,h=k)),Q(n,De,k=>r(14,g=k)),Q(n,ar,k=>r(15,w=k)),Q(n,Dt,k=>r(3,c=k));let{$$slots:i={},$$scope:m}=e,v,N;const E=async(k,F,V,z,se)=>{const{settings:de}=f.data,{workflow:W,error:A}=await Be({namespace:k,workflowId:F,runId:V});if(A){r(1,v=A);return}const{taskQueue:oe}=W,Z=await Zt({queue:oe,namespace:k});W.pendingActivities=await nt(W,k,de,w==null?void 0:w.accessToken),ee(he,h={workflow:W,workers:Z},h),N=new AbortController,ee(De,g=await fr({namespace:k,workflowId:F,runId:V,sort:se?"ascending":z,signal:N.signal,historySize:W.historyEvents}),g)},I=async k=>{var F;if(k&&(!((F=h==null?void 0:h.workflow)===null||F===void 0)&&F.isRunning)){const{settings:V}=f.data,{workflow:z,error:se}=await Be({namespace:t,workflowId:o,runId:s});if(se){r(1,v=se);return}z.pendingActivities=await nt(z,t,V,w==null?void 0:w.accessToken),ee(he,h={...h,workflow:z},h)}},q=()=>{ee(De,g=[],g),N&&N.abort()},b=()=>{ee(Ve,p=null,p),ee(he,h=Jt,h),r(1,v=void 0),q()},C=()=>{ee(Ve,p=null,p),q()};return At(()=>{const k=f.url.searchParams.get("sort");k&&ee(Oe,l=k,l)}),at(()=>{b()}),n.$$set=k=>{"$$scope"in k&&r(11,m=k.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r(6,{namespace:t,workflow:o,run:s}=f.params,t,(r(5,o),r(0,f)),(r(4,s),r(0,f))),n.$$.dirty&16&&b(),n.$$.dirty&640&&C(),n.$$.dirty&752&&E(t,o,s,l,u),n.$$.dirty&256&&I(a)},[f,v,h,c,s,o,t,l,a,u,i,m]}class po extends ue{constructor(e){super(),ce(this,e,mo,co,ie,{})}}const It={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},_o=_t(It),go=()=>{_o.set(It)};function wo(n){let e;const r=n[0].default,t=Me(r,n,n[1],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,s){t&&t.m(o,s),e=!0},p(o,s){t&&t.p&&(!e||s&2)&&Ne(t,r,o,o[1],e?He(r,o[1],s,null):qe(o[1]),null)},i(o){e||(_(t,o),e=!0)},o(o){d(t,o),e=!1},d(o){t&&t.d(o)}}}function $o(n){let e,r;return e=new po({props:{$$slots:{default:[wo]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){P(e,t,o),r=!0},p(t,[o]){const s={};o&2&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function ho(n,e,r){let{$$slots:t={},$$scope:o}=e;return at(()=>{go()}),n.$$set=s=>{"$$scope"in s&&r(1,o=s.$$scope)},[t,o]}class mn extends ue{constructor(e){super(),ce(this,e,ho,$o,ie,{})}}export{mn as component};
