import{S as D,i as J,s as K,a as q,y,c as z,z as d,b as h,A as v,g as c,v as N,d as p,f as L,h as g,B as $,C as E,k as x,l as ee,m as te,n as re,e as C,aa as ne,ab as oe,W as B,q as O,r as Q,u as T,R as S}from"../chunks/index.bac36631.js";import{p as le}from"../chunks/stores.9475c79b.js";import{E as se,a as ie,b as fe}from"../chunks/event-summary-table.64c0ff24.js";import{E as ae,i as ue}from"../chunks/get-workflow-relationships.02f5ca07.js";import{L as me}from"../chunks/link.a7ae9147.js";import{t as ce}from"../chunks/translate.d045ded2.js";import{g as pe}from"../chunks/index.99a6b2a9.js";import{b as _e}from"../chunks/events-service.a4f16027.js";import{e as ge}from"../chunks/event-view.59e33030.js";import{f as F,e as he}from"../chunks/events.dd9e5071.js";import{w as ke}from"../chunks/workflow-run.8a955941.js";import{g as we}from"../chunks/route-for.259f6737.js";function G(s,t,r){const e=s.slice();return e[19]=t[r],e}function M(s){let t,r,e,l;const f=[de,ye],i=[];function n(o,a){return o[3]?0:1}return r=n(s),e=i[r]=f[r](s),{c(){t=x("h2"),e.c(),this.h()},l(o){t=ee(o,"H2",{class:!0});var a=te(t);e.l(a),a.forEach(g),this.h()},h(){re(t,"class","flex w-full items-center text-lg font-medium")},m(o,a){h(o,t,a),i[r].m(t,null),l=!0},p(o,a){let u=r;r=n(o),r===u?i[r].p(o,a):(N(),p(i[u],1,1,()=>{i[u]=null}),L(),e=i[r],e?e.p(o,a):(e=i[r]=f[r](o),e.c()),c(e,1),e.m(t,null))},i(o){l||(c(e),l=!0)},o(o){p(e),l=!1},d(o){o&&g(t),i[r].d()}}}function ye(s){let t=s[0].displayName+"",r;return{c(){r=O(t)},l(e){r=Q(e,t)},m(e,l){h(e,r,l)},p(e,l){l&1&&t!==(t=e[0].displayName+"")&&T(r,t)},i:S,o:S,d(e){e&&g(r)}}}function de(s){let t,r;return t=new me({props:{href:s[3],$$slots:{default:[ve]},$$scope:{ctx:s}}}),{c(){y(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,l){v(t,e,l),r=!0},p(e,l){const f={};l&8&&(f.href=e[3]),l&4194305&&(f.$$scope={dirty:l,ctx:e}),t.$set(f)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){$(t,e)}}}function ve(s){let t=s[0].displayName+"",r;return{c(){r=O(t)},l(e){r=Q(e,t)},m(e,l){h(e,r,l)},p(e,l){l&1&&t!==(t=e[0].displayName+"")&&T(r,t)},d(e){e&&g(r)}}}function P(s){let t,r;return t=new ie({props:{loading:s[2],title:ce("events.group-empty-state-title"),content:""}}),{c(){y(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,l){v(t,e,l),r=!0},p(e,l){const f={};l&4&&(f.loading=e[2]),t.$set(f)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){$(t,e)}}}function j(s,t){let r,e,l;return e=new fe({props:{event:t[19],compact:U,expandAll:!0,initialItem:t[6],active:!0}}),{key:s,first:null,c(){r=C(),y(e.$$.fragment),this.h()},l(f){r=C(),d(e.$$.fragment,f),this.h()},h(){this.first=r},m(f,i){h(f,r,i),v(e,f,i),l=!0},p(f,i){t=f;const n={};i&16&&(n.event=t[19]),i&64&&(n.initialItem=t[6]),e.$set(n)},i(f){l||(c(e.$$.fragment,f),l=!0)},o(f){p(e.$$.fragment,f),l=!1},d(f){f&&g(r),$(e,f)}}}function $e(s){let t=[],r=new Map,e,l,f=s[4];const i=o=>`${o[19].id}-${o[19].timestamp}`;for(let o=0;o<f.length;o+=1){let a=G(s,f,o),u=i(a);r.set(u,t[o]=j(u,a))}let n=null;return f.length||(n=P(s)),{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=C(),n&&n.c()},l(o){for(let a=0;a<t.length;a+=1)t[a].l(o);e=C(),n&&n.l(o)},m(o,a){for(let u=0;u<t.length;u+=1)t[u].m(o,a);h(o,e,a),n&&n.m(o,a),l=!0},p(o,a){a&84&&(f=o[4],N(),t=ne(t,a,i,1,o,f,r,e.parentNode,oe,j,e,G),L(),!f.length&&n?n.p(o,a):f.length?n&&(N(),p(n,1,1,()=>{n=null}),L()):(n=P(o),n.c(),c(n,1),n.m(e.parentNode,e)))},i(o){if(!l){for(let a=0;a<f.length;a+=1)c(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)p(t[a]);l=!1},d(o){for(let a=0;a<t.length;a+=1)t[a].d(o);o&&g(e),n&&n.d(o)}}}function be(s){let t,r,e,l,f,i=s[0]&&M(s);return r=new ae({props:{history:s[1],maxHeight:240}}),l=new se({props:{updating:s[5],compact:U,$$slots:{default:[$e]},$$scope:{ctx:s}}}),{c(){i&&i.c(),t=q(),y(r.$$.fragment),e=q(),y(l.$$.fragment)},l(n){i&&i.l(n),t=z(n),d(r.$$.fragment,n),e=z(n),d(l.$$.fragment,n)},m(n,o){i&&i.m(n,o),h(n,t,o),v(r,n,o),h(n,e,o),v(l,n,o),f=!0},p(n,[o]){n[0]?i?(i.p(n,o),o&1&&c(i,1)):(i=M(n),i.c(),c(i,1),i.m(t.parentNode,t)):i&&(N(),p(i,1,1,()=>{i=null}),L());const a={};o&2&&(a.history=n[1]),r.$set(a);const u={};o&32&&(u.updating=n[5]),o&4194388&&(u.$$scope={dirty:o,ctx:n}),l.$set(u)},i(n){f||(c(i),c(r.$$.fragment,n),c(l.$$.fragment,n),f=!0)},o(n){p(i),p(r.$$.fragment,n),p(l.$$.fragment,n),f=!1},d(n){i&&i.d(n),n&&g(t),$(r,n),n&&g(e),$(l,n)}}}const U=!0;function Ee(s,t,r){let e,l,f,i,n,o,a,u,A,R,H,_,b,W,k;E(s,ge,m=>r(12,H=m)),E(s,F,m=>r(1,_=m)),E(s,he,m=>r(13,b=m)),E(s,ke,m=>r(15,W=m)),E(s,le,m=>r(14,k=m));let I=!1;const V=()=>{B(F,_=[],_),r(2,I=!0)},X=async(m,w,Z)=>{(W.workflow.id!==w||!_.length)&&(r(2,I=!0),V(),B(F,_=await _e({namespace:m,workflowId:w,runId:Z,sort:H}),_),r(2,I=!1))};function Y(m){const w=m==null?void 0:m.eventList.find(ue);return w?we({namespace:e,workflow:w.attributes.workflowExecution.workflowId,run:w.attributes.workflowExecution.runId}):""}return s.$$.update=()=>{s.$$.dirty&16384&&r(7,{namespace:e,workflow:l,run:f,id:i}=k.params,e,(r(11,l),r(14,k)),(r(10,f),r(14,k)),(r(8,i),r(14,k))),s.$$.dirty&3200&&X(e,l,f),s.$$.dirty&8194&&r(9,n=_.length?_:b==null?void 0:b.start),s.$$.dirty&512&&r(6,o=n==null?void 0:n[0]),s.$$.dirty&514&&r(5,a=n.length&&!_.length),s.$$.dirty&4354&&r(0,u=pe(_,H).find(m=>m.id===i)),s.$$.dirty&1&&r(4,A=u?[u]:[]),s.$$.dirty&1&&r(3,R=Y(u))},[u,_,I,R,A,a,o,e,i,n,f,l,H,b,k]}class He extends D{constructor(t){super(),J(this,t,Ee,be,K,{})}}function Ie(s){let t,r;return t=new He({}),{c(){y(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,l){v(t,e,l),r=!0},p:S,i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){$(t,e)}}}class Me extends D{constructor(t){super(),J(this,t,null,Ie,K,{})}}export{Me as component};
