import{S as ie,i as ce,s as ue,k as N,l as S,m as z,h as w,p as C,aw as se,U as he,b as O,F as I,ar as pe,H as fe,v as _e,a9 as de,aa as ge,f as me,g as M,d as P,o as ve,K as be,a as F,c as B,L as we,M as ke,N as ye,t as ee,w as le,q as G,r as J,P as Ee,y as X,z as Y,n as U,A as Z,Q as Te,B as x,C as te,W as Le,D as j,u as Ie}from"../chunks/index.df672b57.js";import{g as He}from"../chunks/navigation.a49e6888.js";import{p as Ve}from"../chunks/stores.114bd3f7.js";import{P as Ne}from"../chunks/page-title.3b4d8116.js";import{E as Se}from"../chunks/empty-state.9da16a0e.js";import{I as ze}from"../chunks/input.a7c2ef0e.js";import{t as H}from"../chunks/translate.fa4eeabe.js";import{a as Ue}from"../chunks/workflow-service.0681095f.js";import{n as Me,l as ae}from"../chunks/namespaces.aea06ae9.js";import{t as Pe}from"../chunks/toaster.3337e31d.js";import{a as Re}from"../chunks/route-for.8e383bd7.js";function ne(l,e,t){const s=l.slice();return s[23]=e[t],s}const Ae=l=>({item:l&16}),re=l=>({item:l[23].data});function Ce(l){let e;return{c(){e=G("Missing template")},l(t){e=J(t,"Missing template")},m(t,s){O(t,e,s)},d(t){t&&w(e)}}}function oe(l,e){let t,s,i;const u=e[14].default,m=be(u,e,e[13],re),c=m||Ce();return{key:l,first:null,c(){t=N("svelte-virtual-list-row"),c&&c.c(),s=F(),this.h()},l(r){t=S(r,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var f=z(t);c&&c.l(f),s=B(f),f.forEach(w),this.h()},h(){se(t,"class","svelte-1kdxoed"),this.first=t},m(r,f){O(r,t,f),c&&c.m(t,null),I(t,s),i=!0},p(r,f){e=r,m&&m.p&&(!i||f&8208)&&we(m,u,e,e[13],i?ye(u,e[13],f,Ae):ke(e[13]),re)},i(r){i||(M(c,r),i=!0)},o(r){P(c,r),i=!1},d(r){r&&w(t),c&&c.d(r)}}}function Oe(l){let e,t,s=[],i=new Map,u,m,c,r,f=l[4];const v=o=>o[23].index;for(let o=0;o<f.length;o+=1){let a=ne(l,f,o),_=v(a);i.set(_,s[o]=oe(_,a))}return{c(){e=N("svelte-virtual-list-viewport"),t=N("svelte-virtual-list-contents");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=S(o,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var a=z(e);t=S(a,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var _=z(t);for(let y=0;y<s.length;y+=1)s[y].l(_);_.forEach(w),a.forEach(w),this.h()},h(){C(t,"padding-top",l[5]+"px"),C(t,"padding-bottom",l[6]+"px"),se(t,"class","svelte-1kdxoed"),C(e,"height",l[0]),se(e,"class","svelte-1kdxoed"),he(()=>l[17].call(e))},m(o,a){O(o,e,a),I(e,t);for(let _=0;_<s.length;_+=1)s[_].m(t,null);l[15](t),l[16](e),u=pe(e,l[17].bind(e)),m=!0,c||(r=fe(e,"scroll",l[7]),c=!0)},p(o,[a]){a&8208&&(f=o[4],_e(),s=de(s,a,v,1,o,f,i,t,ge,oe,null,ne),me()),(!m||a&32)&&C(t,"padding-top",o[5]+"px"),(!m||a&64)&&C(t,"padding-bottom",o[6]+"px"),(!m||a&1)&&C(e,"height",o[0])},i(o){if(!m){for(let a=0;a<f.length;a+=1)M(s[a]);m=!0}},o(o){for(let a=0;a<s.length;a+=1)P(s[a]);m=!1},d(o){o&&w(e);for(let a=0;a<s.length;a+=1)s[a].d();l[15](null),l[16](null),u(),c=!1,r()}}}function We(l,e,t){let{$$slots:s={},$$scope:i}=e,{items:u}=e,{height:m="100%"}=e,{itemHeight:c=void 0}=e,{start:r=0}=e,{end:f=0}=e,v=[],o,a,_,y=0,A,E,g=0,b=0,T;async function $(n,h,d){const{scrollTop:k}=a;await ee();let L=g-k,p=r;for(;L<h&&p<n.length;){let W=o[p-r];W||(t(9,f=p+1),await ee(),W=o[p-r]);const R=v[p]=d||W.offsetHeight;L+=R,p+=1}t(9,f=p);const Q=n.length-f;T=(g+L)/f,t(6,b=Q*T),v.length=n.length}async function D(){const{scrollTop:n}=a,h=r;for(let p=0;p<o.length;p+=1)v[r+p]=c||o[p].offsetHeight;let d=0,k=0;for(;d<u.length;){const p=v[d]||T;if(k+p>n){t(8,r=d),t(5,g=k);break}k+=p,d+=1}for(;d<u.length&&(k+=v[d]||T,d+=1,!(k>n+y)););t(9,f=d);const L=u.length-f;for(T=k/f;d<u.length;)v[d++]=T;if(t(6,b=L*T),r<h){await ee();let p=0,Q=0;for(let R=r;R<h;R+=1)o[R-r]&&(p+=v[R],Q+=c||o[R-r].offsetHeight);const W=Q-p;a.scrollTo(0,n+W)}}ve(()=>{o=_.getElementsByTagName("svelte-virtual-list-row"),t(12,E=!0)});function q(n){le[n?"unshift":"push"](()=>{_=n,t(3,_)})}function V(n){le[n?"unshift":"push"](()=>{a=n,t(2,a)})}function K(){y=this.offsetHeight,t(1,y)}return l.$$set=n=>{"items"in n&&t(10,u=n.items),"height"in n&&t(0,m=n.height),"itemHeight"in n&&t(11,c=n.itemHeight),"start"in n&&t(8,r=n.start),"end"in n&&t(9,f=n.end),"$$scope"in n&&t(13,i=n.$$scope)},l.$$.update=()=>{l.$$.dirty&1792&&t(4,A=u.slice(r,f).map((n,h)=>({index:h+r,data:n}))),l.$$.dirty&7170&&E&&$(u,y,c)},[m,y,a,_,A,g,b,D,r,f,u,c,E,i,s,q,V,K]}class Fe extends ie{constructor(e){super(),ce(this,e,We,Oe,ue,{items:10,height:0,itemHeight:11,start:8,end:9})}}function Be(l){let e,t;return e=new Se({props:{title:l[1].length?H("common.no-results"):H("namespaces.select-namespace-empty-state")}}),{c(){X(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,i){Z(e,s,i),t=!0},p(s,i){const u={};i&2&&(u.title=s[1].length?H("common.no-results"):H("namespaces.select-namespace-empty-state")),e.$set(u)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function De(l){let e,t;return e=new Fe({props:{items:l[2],itemHeight:50,$$slots:{default:[qe,({item:s})=>({9:s}),({item:s})=>s?512:0]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,i){Z(e,s,i),t=!0},p(s,i){const u={};i&4&&(u.items=s[2]),i&1540&&(u.$$scope={dirty:i,ctx:s}),e.$set(u)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function qe(l){let e,t=l[9].namespace+"",s,i,u;function m(){return l[7](l[9])}return{c(){e=N("button"),s=G(t),this.h()},l(c){e=S(c,"BUTTON",{class:!0});var r=z(e);s=J(r,t),r.forEach(w),this.h()},h(){U(e,"class","surface-primary flex w-full cursor-pointer gap-2 truncate border-b from-blue-100 to-purple-100 p-3 text-left hover:bg-gradient-to-br"),j(e,"rounded-t-md",l[9].index===0),j(e,"rounded-b-md",l[9].index===l[2].length-1)},m(c,r){O(c,e,r),I(e,s),i||(u=fe(e,"click",m),i=!0)},p(c,r){l=c,r&512&&t!==(t=l[9].namespace+"")&&Ie(s,t),r&512&&j(e,"rounded-t-md",l[9].index===0),r&516&&j(e,"rounded-b-md",l[9].index===l[2].length-1)},d(c){c&&w(e),i=!1,u()}}}function Ke(l){let e,t,s,i,u=H("namespaces.select-namespace-welcome")+"",m,c,r,f=H("namespaces.select-namespace")+"",v,o,a,_,y,A,E,g,b,T;e=new Ne({props:{title:H("namespaces.namespace-select-header"),url:l[3].url.href}});function $(n){l[6](n)}let D={id:"search-namespaces",type:"search",label:H("common.search"),labelHidden:!0,placeholder:H("common.search"),icon:"search"};l[0]!==void 0&&(D.value=l[0]),_=new ze({props:D}),le.push(()=>Ee(_,"value",$));const q=[De,Be],V=[];function K(n,h){return n[2].length?0:1}return g=K(l),b=V[g]=q[g](l),{c(){X(e.$$.fragment),t=F(),s=N("div"),i=N("h1"),m=G(u),c=F(),r=N("p"),v=G(f),o=F(),a=N("form"),X(_.$$.fragment),A=F(),E=N("div"),b.c(),this.h()},l(n){Y(e.$$.fragment,n),t=B(n),s=S(n,"DIV",{class:!0});var h=z(s);i=S(h,"H1",{class:!0});var d=z(i);m=J(d,u),d.forEach(w),c=B(h),r=S(h,"P",{class:!0});var k=z(r);v=J(k,f),k.forEach(w),o=B(h),a=S(h,"FORM",{class:!0,role:!0});var L=z(a);Y(_.$$.fragment,L),L.forEach(w),A=B(h),E=S(h,"DIV",{class:!0,"aria-label":!0});var p=z(E);b.l(p),p.forEach(w),h.forEach(w),this.h()},h(){U(i,"class","my-4 text-3xl"),U(r,"class","mb-8"),U(a,"class","mb-5"),U(a,"role","search"),U(E,"class","h-96 w-full overflow-hidden rounded-md border"),U(E,"aria-label",H("common.namespaces")),U(s,"class","w-full p-8 xl:w-1/2")},m(n,h){Z(e,n,h),O(n,t,h),O(n,s,h),I(s,i),I(i,m),I(s,c),I(s,r),I(r,v),I(s,o),I(s,a),Z(_,a,null),I(s,A),I(s,E),V[g].m(E,null),T=!0},p(n,[h]){const d={};h&8&&(d.url=n[3].url.href),e.$set(d);const k={};!y&&h&1&&(y=!0,k.value=n[0],Te(()=>y=!1)),_.$set(k);let L=g;g=K(n),g===L?V[g].p(n,h):(_e(),P(V[L],1,1,()=>{V[L]=null}),me(),b=V[g],b?b.p(n,h):(b=V[g]=q[g](n),b.c()),M(b,1),b.m(E,null))},i(n){T||(M(e.$$.fragment,n),M(_.$$.fragment,n),M(b),T=!0)},o(n){P(e.$$.fragment,n),P(_.$$.fragment,n),P(b),T=!1},d(n){x(e,n),n&&w(t),n&&w(s),x(_),V[g].d()}}}function Qe(l,e,t){let s,i,u,m,c;te(l,Me,a=>t(1,u=a)),te(l,ae,a=>t(8,m=a)),te(l,Ve,a=>t(3,c=a));let r="";const f=async a=>{const{authorized:_}=await Ue(a);_?(Le(ae,m=a,m),He(Re({namespace:a}))):Pe.push({variant:"error",message:H("namespaces.unauthorized-namespace-error")})};function v(a){r=a,t(0,r)}const o=a=>f(a.namespace);return l.$$.update=()=>{l.$$.dirty&3&&t(5,s=u.filter(a=>a.namespaceInfo.name.toLowerCase().includes(r.toLowerCase()))),l.$$.dirty&32&&t(2,i=s.map((a,_)=>({namespace:a.namespaceInfo.name,index:_})))},[r,u,i,c,f,s,v,o]}class lt extends ie{constructor(e){super(),ce(this,e,Qe,Ke,ue,{})}}export{lt as component};
