import{s as ue,e as j,a as O,t as G,b as Q,d as Y,g as w,h as U,f as K,j as z,k as q,l as H,n as fe,c as J,v as ae,L as x,V as oe,a6 as tt,w as re,x as De,y as rt,a1 as bt,$ as ot,S as vt,a4 as nt,p as Me,u as qe,q as He,r as ye}from"../chunks/scheduler.AWtTlMeO.js";import{S as ce,i as me,c as D,a as R,m as P,t as _,b as d,d as S,f as ne,g as ee,e as te,h as lt}from"../chunks/index.91lpp7Ff.js";import{p as Se}from"../chunks/stores.BjeHb2_D.js";import{v as Et}from"../chunks/data-encoder-settings.msA6Hzow.js";import{L as We}from"../chunks/link.cs7LzqaH.js";import{t as V}from"../chunks/translate.HrioCK44.js";import{h as st,i as It,s as Ct,j as Ne}from"../chunks/workflows.K4-zDFP4.js";import{e as Re,b as ie,m as ke,n as be,c as ve,o as Ee,p as Ie,q as Ce}from"../chunks/route-for.LRddn_DS.js";import{l as ft,L as At}from"../chunks/labs-mode-guard.15bwZDx8.js";import{L as at}from"../chunks/loading.ZhwIBa5k.js";import{a as it}from"../chunks/index.VrdFapBL.js";import{e as Pe}from"../chunks/each.QPLN4A2E.js";import{C as Dt,T as Rt,w as Pt,a as St,b as Wt}from"../chunks/workflow-terminate-enabled.eMZk6auC.js";import{w as ut}from"../chunks/entry.49-_VqMH.js";import{C as Tt}from"../chunks/checkbox.FE5a4WJj.js";import{I as ct}from"../chunks/input.Oj66r1n-.js";import{M as mt}from"../chunks/modal._fUsCkow.js";import{R as Vt,a as Mt}from"../chunks/radio-input.mvsumPD4.js";import{R as Be}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as pt,f as Ae,t as Ve}from"../chunks/events.bSFWyNpS.js";import{p as qt}from"../chunks/persist-store.79TECdfr.js";import{i as _t}from"../chunks/is-network-error.S4fYxeQT.js";import{C as Ht}from"../chunks/code-block.PIA3laOL.js";import{t as yt}from"../chunks/toaster.JA1rZe2a.js";import{B as Ft}from"../chunks/button.J_9D2qip.js";import{I as Nt}from"../chunks/icon.hlu3-iXK.js";import{c as Bt}from"../chunks/menu.clBpn3HP.js";import{M as Lt}from"../chunks/menu-divider.ULnGNTZu.js";import{S as Ot}from"../chunks/split-button.-WuMdkyr.js";import{T as dt}from"../chunks/tooltip.hkvKFmJN.js";import{c as Ut}from"../chunks/core-user.qS1id1Cd.js";import{s as jt}from"../chunks/settings.TuHg1P9A.js";import{r as he,w as $e,i as Qt}from"../chunks/workflow-run.ZUOIerA5.js";import{w as Yt}from"../chunks/write-actions-are-allowed.BsR296Mf.js";import{W as zt}from"../chunks/workflow-status.ASJz2ufm.js";import{C as Jt,k as Gt,g as Kt}from"../chunks/pollers-service.YzvQhuCf.js";import{A as gt}from"../chunks/alert._GES0UbM.js";import{B as Te}from"../chunks/badge.mHsIdLRu.js";import{C as Xt}from"../chunks/index.YV2NV-TI.js";import{a as Zt,b as xt,c as de}from"../chunks/tab.fhntVo9g.js";import{n as er}from"../chunks/namespaces.AZAalcgs.js";import{g as tr}from"../chunks/get-workflow-relationships._pqLdLwH.js";import{h as rr}from"../chunks/has.-dFYEuQV.js";import{f as or,d as nr}from"../chunks/decode-payload.-K-YkwX5.js";import{f as lr}from"../chunks/events-service.nbRs1TRb.js";import{a as sr}from"../chunks/auth-user.qLkr7QCG.js";import{a as Le}from"../chunks/event-view.GLm4GtMe.js";function fr(n){let r=V("workflows.back-to-workflows")+"",t;return{c(){t=G(r)},l(e){t=K(e,r)},m(e,o){q(e,t,o)},p:ae,d(e){e&&w(t)}}}function ar(n){var W,y;let r,t,e,o,l,s,f=(((W=n[0])==null?void 0:W.statusCode)??"500")+"",a,u,c,h,k,$,m=(((y=n[0])==null?void 0:y.statusText)??"")+"",i,g;return e=new We({props:{href:`${Re({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[fr]},$$scope:{ctx:n}}}),{c(){r=j("header"),t=j("div"),D(e.$$.fragment),o=O(),l=j("div"),s=j("h1"),a=G(f),u=O(),c=j("p"),h=G(n[1]),k=O(),$=j("p"),i=G(m),this.h()},l(E){r=Q(E,"HEADER",{class:!0});var C=Y(r);t=Q(C,"DIV",{class:!0});var M=Y(t);R(e.$$.fragment,M),M.forEach(w),C.forEach(w),o=U(E),l=Q(E,"DIV",{class:!0});var b=Y(l);s=Q(b,"H1",{class:!0});var I=Y(s);a=K(I,f),I.forEach(w),u=U(b),c=Q(b,"P",{class:!0});var v=Y(c);h=K(v,n[1]),v.forEach(w),k=U(b),$=Q(b,"P",{class:!0});var F=Y($);i=K(F,m),F.forEach(w),b.forEach(w),this.h()},h(){z(t,"class","mb-4 block"),z(r,"class","mb-4 flex flex-col gap-1"),z(s,"class","leading-0 text-[12rem] font-semibold"),z(c,"class","-mt-12 text-lg"),z($,"class","text-2xl font-bold text-red-700"),z(l,"class","text-center align-middle")},m(E,C){q(E,r,C),H(r,t),P(e,t,null),q(E,o,C),q(E,l,C),H(l,s),H(s,a),H(l,u),H(l,c),H(c,h),H(l,k),H(l,$),H($,i),g=!0},p(E,[C]){var b,I;const M={};C&12&&(M.href=`${Re({namespace:E[2]})}?${E[3]}`),C&32&&(M.$$scope={dirty:C,ctx:E}),e.$set(M),(!g||C&1)&&f!==(f=(((b=E[0])==null?void 0:b.statusCode)??"500")+"")&&fe(a,f),(!g||C&2)&&fe(h,E[1]),(!g||C&1)&&m!==(m=(((I=E[0])==null?void 0:I.statusText)??"")+"")&&fe(i,m)},i(E){g||(_(e.$$.fragment,E),g=!0)},o(E){d(e.$$.fragment,E),g=!1},d(E){E&&(w(r),w(o),w(l)),S(e)}}}function ir(n,r,t){let e,o,l,s;J(n,Se,a=>t(4,l=a)),J(n,st,a=>t(3,s=a));let{error:f}=r;return n.$$set=a=>{"error"in a&&t(0,f=a.error)},n.$$.update=()=>{n.$$.dirty&16&&t(2,{namespace:e}=l.params,e),n.$$.dirty&1&&t(1,o=f.statusCode===404?V("workflows.workflow-404-title"):V("workflows.workflow-error-title"))},[f,o,e,s,l]}class wt extends ce{constructor(r){super(),me(this,r,ir,ar,ue,{error:0})}}const ht=qt("resetWorkflows",{});function Oe(n,r,t){const e=n.slice();return e[18]=r[t],e}function ur(n){let r,t=V("workflows.reset-modal-title")+"",e;return{c(){r=j("h3"),e=G(t),this.h()},l(o){r=Q(o,"H3",{slot:!0});var l=Y(r);e=K(l,t),l.forEach(w),this.h()},h(){z(r,"slot","title")},m(o,l){q(o,r,l),H(r,e)},p:ae,d(o){o&&w(r)}}}function Ue(n){let r,t;return r=new Mt({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&64&&(l.id="reset-event-"+e[18].id),o&64&&(l.value=e[18].id),o&64&&(l.label=e[18].id+" - "+e[18].eventType),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function cr(n){let r,t,e=Pe(n[6]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Ue(Oe(n,e,s));const l=s=>d(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=De()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);r=De()},m(s,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,f);q(s,r,f),t=!0},p(s,f){if(f&64){e=Pe(s[6]);let a;for(a=0;a<e.length;a+=1){const u=Oe(s,e,a);o[a]?(o[a].p(u,f),_(o[a],1)):(o[a]=Ue(u),o[a].c(),_(o[a],1),o[a].m(r.parentNode,r))}for(ee(),a=e.length;a<o.length;a+=1)l(a);te()}},i(s){if(!t){for(let f=0;f<e.length;f+=1)_(o[f]);t=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)d(o[f]);t=!1},d(s){s&&w(r),rt(o,s)}}}function mr(n){let r,t,e,o,l,s,f,a,u;t=new Vt({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:V("workflows.reset-event-radio-group-description"),$$slots:{default:[cr]},$$scope:{ctx:n}}});function c(m){n[12](m)}let h={id:"reset-reapply-type-checkbox",label:V("workflows.reset-reapply-type-label")};n[5]!==void 0&&(h.checked=n[5]),o=new Tt({props:h}),x.push(()=>ne(o,"checked",c));function k(m){n[13](m)}let $={id:"reset-reason",label:V("common.reason")};return n[4]!==void 0&&($.value=n[4]),f=new ct({props:$}),x.push(()=>ne(f,"value",k)),{c(){r=j("div"),D(t.$$.fragment),e=O(),D(o.$$.fragment),s=O(),D(f.$$.fragment),this.h()},l(m){r=Q(m,"DIV",{class:!0});var i=Y(r);R(t.$$.fragment,i),e=U(i),R(o.$$.fragment,i),s=U(i),R(f.$$.fragment,i),i.forEach(w),this.h()},h(){z(r,"class","flex w-full flex-col gap-4")},m(m,i){q(m,r,i),P(t,r,null),H(r,e),P(o,r,null),H(r,s),P(f,r,null),u=!0},p(m,i){const g={};i&2097216&&(g.$$scope={dirty:i,ctx:m}),t.$set(g);const W={};!l&&i&32&&(l=!0,W.checked=m[5],oe(()=>l=!1)),o.$set(W);const y={};!a&&i&16&&(a=!0,y.value=m[4],oe(()=>a=!1)),f.$set(y)},i(m){u||(_(t.$$.fragment,m),_(o.$$.fragment,m),_(f.$$.fragment,m),u=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),u=!1},d(m){m&&w(r),S(t),S(o),S(f)}}}function pr(n){let r,t,e,o;function l(a){n[14](a)}function s(a){n[15](a)}let f={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:V("common.confirm"),cancelText:V("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[mr],title:[ur]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),r=new mt({props:f}),x.push(()=>ne(r,"error",l)),x.push(()=>ne(r,"open",s)),r.$on("confirmModal",n[9]),r.$on("cancelModal",n[8]),{c(){D(r.$$.fragment)},l(a){R(r.$$.fragment,a)},m(a,u){P(r,a,u),o=!0},p(a,[u]){const c={};u&8&&(c.loading=a[3]),u&2097264&&(c.$$scope={dirty:u,ctx:a}),!t&&u&4&&(t=!0,c.error=a[2],oe(()=>t=!1)),!e&&u&1&&(e=!0,c.open=a[0],oe(()=>e=!1)),r.$set(c)},i(a){o||(_(r.$$.fragment,a),o=!0)},o(a){d(r.$$.fragment,a),o=!1},d(a){S(r,a)}}}function _r(n,r,t){let e,o=ae,l=()=>(o(),o=tt(h,I=>t(16,e=I)),h),s,f;J(n,pt,I=>t(6,f=I)),n.$$.on_destroy.push(()=>o());let{open:a}=r,{workflow:u}=r,{namespace:c}=r,{refresh:h}=r;l();let k="",$=!1,m=ut("");J(n,m,I=>t(17,s=I));let i,g=!1;const W=()=>{t(0,a=!1),t(5,g=!1),re(m,s="",s),t(4,i="")},y=async()=>{t(2,k=""),t(3,$=!0);try{const I=await It({namespace:c,workflow:u,eventId:s,reason:i,reapplyType:g?Be.Signal:Be.None});I&&I.runId&&ht.update(v=>({...v,[u.runId]:I.runId})),re(h,e=Date.now(),e),W()}catch(I){t(2,k=_t(I)?I.message:V("common.unknown-error"))}finally{t(3,$=!1)}W()};function E(I){g=I,t(5,g)}function C(I){i=I,t(4,i)}function M(I){k=I,t(2,k)}function b(I){a=I,t(0,a)}return n.$$set=I=>{"open"in I&&t(0,a=I.open),"workflow"in I&&t(10,u=I.workflow),"namespace"in I&&t(11,c=I.namespace),"refresh"in I&&l(t(1,h=I.refresh))},[a,h,k,$,i,g,f,m,W,y,u,c,E,C,M,b]}class dr extends ce{constructor(r){super(),me(this,r,_r,pr,ue,{open:0,workflow:10,namespace:11,refresh:1})}}function gr(n){let r,t=V("workflows.signal-modal-title")+"",e;return{c(){r=j("h3"),e=G(t),this.h()},l(o){r=Q(o,"H3",{slot:!0});var l=Y(r);e=K(l,t),l.forEach(w),this.h()},h(){z(r,"slot","title")},m(o,l){q(o,r,l),H(r,e)},p:ae,d(o){o&&w(r)}}}function wr(n){let r,t,e,o,l,s,f=V("workflows.signal-payload-input-label")+"",a,u,c,h=V("workflows.signal-payload-input-label-hint")+"",k,$,m,i;function g(E){n[12](E)}let W={id:"signal-name",label:V("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(W.value=n[4]),t=new ct({props:W}),x.push(()=>ne(t,"value",g));let y={maxHeight:320,content:n[5],editable:!0,copyable:!1};return m=new Ht({props:y}),n[13](m),m.$on("change",n[9]),{c(){r=j("div"),D(t.$$.fragment),o=O(),l=j("div"),s=j("span"),a=G(f),u=O(),c=j("span"),k=G(h),$=O(),D(m.$$.fragment),this.h()},l(E){r=Q(E,"DIV",{slot:!0,class:!0});var C=Y(r);R(t.$$.fragment,C),o=U(C),l=Q(C,"DIV",{});var M=Y(l);s=Q(M,"SPAN",{class:!0});var b=Y(s);a=K(b,f),b.forEach(w),u=U(M),c=Q(M,"SPAN",{class:!0});var I=Y(c);k=K(I,h),I.forEach(w),$=U(M),R(m.$$.fragment,M),M.forEach(w),C.forEach(w),this.h()},h(){z(s,"class","font-secondary text-sm font-medium"),z(c,"class","font-secondary text-xs font-light italic"),z(r,"slot","content"),z(r,"class","flex flex-col gap-4")},m(E,C){q(E,r,C),P(t,r,null),H(r,o),H(r,l),H(l,s),H(s,a),H(l,u),H(l,c),H(c,k),H(l,$),P(m,l,null),i=!0},p(E,C){const M={};!e&&C&16&&(e=!0,M.value=E[4],oe(()=>e=!1)),t.$set(M);const b={};C&32&&(b.content=E[5]),m.$set(b)},i(E){i||(_(t.$$.fragment,E),_(m.$$.fragment,E),i=!0)},o(E){d(t.$$.fragment,E),d(m.$$.fragment,E),i=!1},d(E){E&&w(r),S(t),n[13](null),S(m)}}}function hr(n){let r,t,e,o;function l(a){n[14](a)}function s(a){n[15](a)}let f={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:V("common.submit"),cancelText:V("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[wr],title:[gr]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),r=new mt({props:f}),x.push(()=>ne(r,"error",l)),x.push(()=>ne(r,"open",s)),r.$on("cancelModal",n[7]),r.$on("confirmModal",n[8]),{c(){D(r.$$.fragment)},l(a){R(r.$$.fragment,a)},m(a,u){P(r,a,u),o=!0},p(a,[u]){const c={};u&8&&(c.loading=a[3]),u&16&&(c.confirmDisabled=!a[4]),u&131184&&(c.$$scope={dirty:u,ctx:a}),!t&&u&4&&(t=!0,c.error=a[2],oe(()=>t=!1)),!e&&u&1&&(e=!0,c.open=a[0],oe(()=>e=!1)),r.$set(c)},i(a){o||(_(r.$$.fragment,a),o=!0)},o(a){d(r.$$.fragment,a),o=!1},d(a){S(r,a)}}}function $r(n,r,t){let e,o=ae,l=()=>(o(),o=tt(u,b=>t(16,e=b)),u);n.$$.on_destroy.push(()=>o());let{open:s}=r,{workflow:f}=r,{namespace:a}=r,{refresh:u}=r;l();let c="",h=!1,k="",$="",m;const i=()=>{t(0,s=!1),t(5,$=""),t(4,k=""),m==null||m.resetView($)},g=async()=>{t(2,c=""),t(3,h=!0);try{await Ct({namespace:a,workflow:f,input:$,name:k}),re(u,e=Date.now(),e),yt.push({message:V("workflows.signal-success"),id:"workflow-signal-success-toast"}),i()}catch(b){t(2,c=_t(b)?b.message:V("common.unknown-error"))}finally{t(3,h=!1)}},W=b=>{t(5,$=b.detail)};function y(b){k=b,t(4,k)}function E(b){x[b?"unshift":"push"](()=>{m=b,t(6,m)})}function C(b){c=b,t(2,c)}function M(b){s=b,t(0,s)}return n.$$set=b=>{"open"in b&&t(0,s=b.open),"workflow"in b&&t(10,f=b.workflow),"namespace"in b&&t(11,a=b.namespace),"refresh"in b&&l(t(1,u=b.refresh))},[s,u,c,h,k,$,m,i,g,W,f,a,y,E,C,M]}class kr extends ce{constructor(r){super(),me(this,r,$r,hr,ue,{open:0,workflow:10,namespace:11,refresh:1})}}const br=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function je(n,r,t){const e=n.slice();return e[29]=r[t].onClick,e[30]=r[t].destructive,e[31]=r[t].label,e[32]=r[t].allowed,e[33]=r[t].testId,e[34]=r[t].tooltip,e}function vr(n){let r,t;return r=new dt({props:{bottomRight:!0,width:200,text:n[4],hide:n[6],$$slots:{default:[Cr]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o[0]&16&&(l.text=e[4]),o[0]&64&&(l.hide=e[6]),o[0]&576|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Er(n){let r,t;return r=new Ot({props:{id:"workflow-actions",position:"right",disabled:n[5],primaryActionDisabled:!n[12]||n[2],label:V("workflows.request-cancellation"),menuLabel:V("workflows.workflow-actions"),$$slots:{default:[Rr]},$$scope:{ctx:n}}}),r.$on("click",n[23]),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o[0]&32&&(l.disabled=e[5]),o[0]&4100&&(l.primaryActionDisabled=!e[12]||e[2]),o[0]&2048|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Ir(n){let r=V("workflows.reset")+"",t;return{c(){t=G(r)},l(e){t=K(e,r)},m(e,o){q(e,t,o)},p:ae,d(e){e&&w(t)}}}function Cr(n){let r,t;return r=new Ft({props:{"aria-label":V("workflows.reset"),disabled:!n[6],variant:"primary","data-testid":"workflow-reset-button",$$slots:{default:[Ir]},$$scope:{ctx:n}}}),r.$on("click",n[24]),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o[0]&64&&(l.disabled=!e[6]),o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Qe(n){let r,t;return r=new Lt({}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Ar(n){let r=n[31]+"",t;return{c(){t=G(r)},l(e){t=K(e,r)},m(e,o){q(e,t,o)},p(e,o){o[0]&2048&&r!==(r=e[31]+"")&&fe(t,r)},d(e){e&&w(t)}}}function Dr(n){let r,t,e;return r=new Bt({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[Ar]},$$scope:{ctx:n}}}),r.$on("click",function(){bt(n[29])&&n[29].apply(this,arguments)}),{c(){D(r.$$.fragment),t=O()},l(o){R(r.$$.fragment,o),t=U(o)},m(o,l){P(r,o,l),q(o,t,l),e=!0},p(o,l){n=o;const s={};l[0]&2048&&(s.destructive=n[30]),l[0]&2048&&(s.disabled=!n[32]),l[0]&2048&&(s["data-testid"]=n[33]),l[0]&2048|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),r.$set(s)},i(o){e||(_(r.$$.fragment,o),e=!0)},o(o){d(r.$$.fragment,o),e=!1},d(o){o&&w(t),S(r,o)}}}function Ye(n){let r,t,e,o=n[30]&&Qe();return t=new dt({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),r=O(),D(t.$$.fragment)},l(l){o&&o.l(l),r=U(l),R(t.$$.fragment,l)},m(l,s){o&&o.m(l,s),q(l,r,s),P(t,l,s),e=!0},p(l,s){l[30]?o?s[0]&2048&&_(o,1):(o=Qe(),o.c(),_(o,1),o.m(r.parentNode,r)):o&&(ee(),d(o,1,1,()=>{o=null}),te());const f={};s[0]&2048&&(f.text=l[34]),s[0]&2048&&(f.hide=!l[34]),s[0]&2048|s[1]&64&&(f.$$scope={dirty:s,ctx:l}),t.$set(f)},i(l){e||(_(o),_(t.$$.fragment,l),e=!0)},o(l){d(o),d(t.$$.fragment,l),e=!1},d(l){l&&w(r),o&&o.d(l),S(t,l)}}}function Rr(n){let r,t,e=Pe(n[11]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Ye(je(n,e,s));const l=s=>d(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=De()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);r=De()},m(s,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,f);q(s,r,f),t=!0},p(s,f){if(f[0]&2048){e=Pe(s[11]);let a;for(a=0;a<e.length;a+=1){const u=je(s,e,a);o[a]?(o[a].p(u,f),_(o[a],1)):(o[a]=Ye(u),o[a].c(),_(o[a],1),o[a].m(r.parentNode,r))}for(ee(),a=e.length;a<o.length;a+=1)l(a);te()}},i(s){if(!t){for(let f=0;f<e.length;f+=1)_(o[f]);t=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)d(o[f]);t=!1},d(s){s&&w(r),rt(o,s)}}}function Pr(n){let r,t,e,o,l,s,f,a,u,c,h,k,$,m,i;const g=[Er,vr],W=[];function y(p,L){return p[3]?0:1}r=y(n),t=W[r]=g[r](n);function E(p){n[25](p)}let C={refresh:he,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(C.open=n[9]),o=new dr({props:C}),x.push(()=>ne(o,"open",E));function M(p){n[26](p)}let b={refresh:he,workflow:n[0],namespace:n[1]};n[10]!==void 0&&(b.open=n[10]),f=new kr({props:b}),x.push(()=>ne(f,"open",M));function I(p){n[27](p)}let v={refresh:he,workflow:n[0],namespace:n[1]};n[7]!==void 0&&(v.open=n[7]),c=new Dt({props:v}),x.push(()=>ne(c,"open",I));function F(p){n[28](p)}let T={refresh:he,workflow:n[0],namespace:n[1]};return n[8]!==void 0&&(T.open=n[8]),$=new Rt({props:T}),x.push(()=>ne($,"open",F)),{c(){t.c(),e=O(),D(o.$$.fragment),s=O(),D(f.$$.fragment),u=O(),D(c.$$.fragment),k=O(),D($.$$.fragment)},l(p){t.l(p),e=U(p),R(o.$$.fragment,p),s=U(p),R(f.$$.fragment,p),u=U(p),R(c.$$.fragment,p),k=U(p),R($.$$.fragment,p)},m(p,L){W[r].m(p,L),q(p,e,L),P(o,p,L),q(p,s,L),P(f,p,L),q(p,u,L),P(c,p,L),q(p,k,L),P($,p,L),i=!0},p(p,L){let le=r;r=y(p),r===le?W[r].p(p,L):(ee(),d(W[le],1,1,()=>{W[le]=null}),te(),t=W[r],t?t.p(p,L):(t=W[r]=g[r](p),t.c()),_(t,1),t.m(e.parentNode,e));const A={};L[0]&1&&(A.workflow=p[0]),L[0]&2&&(A.namespace=p[1]),!l&&L[0]&512&&(l=!0,A.open=p[9],oe(()=>l=!1)),o.$set(A);const B={};L[0]&1&&(B.workflow=p[0]),L[0]&2&&(B.namespace=p[1]),!a&&L[0]&1024&&(a=!0,B.open=p[10],oe(()=>a=!1)),f.$set(B);const N={};L[0]&1&&(N.workflow=p[0]),L[0]&2&&(N.namespace=p[1]),!h&&L[0]&128&&(h=!0,N.open=p[7],oe(()=>h=!1)),c.$set(N);const X={};L[0]&1&&(X.workflow=p[0]),L[0]&2&&(X.namespace=p[1]),!m&&L[0]&256&&(m=!0,X.open=p[8],oe(()=>m=!1)),$.$set(X)},i(p){i||(_(t),_(o.$$.fragment,p),_(f.$$.fragment,p),_(c.$$.fragment,p),_($.$$.fragment,p),i=!0)},o(p){d(t),d(o.$$.fragment,p),d(f.$$.fragment,p),d(c.$$.fragment,p),d($.$$.fragment,p),i=!1},d(p){p&&(w(e),w(s),w(u),w(k)),W[r].d(p),S(o,p),S(f,p),S(c,p),S($,p)}}}function Sr(n,r,t){let e,o,l,s,f,a,u,c,h;J(n,pt,N=>t(20,u=N)),J(n,Se,N=>t(22,h=N));var k,$,m;let{workflow:i}=r,{namespace:g}=r,{cancelInProgress:W}=r,{isRunning:y}=r,E=!1,C=!1,M=!1,b=!1,I,v,F=Ut();J(n,F,N=>t(21,c=N));const T=()=>t(7,E=!0),p=()=>t(9,M=!0);function L(N){M=N,t(9,M),t(6,a),t(4,I),t(19,o),t(18,l),t(17,s),t(0,i),t(16,m),t(20,u),t(5,f),t(14,k),t(15,$),t(22,h),t(21,c),t(1,g)}function le(N){b=N,t(10,b),t(6,a),t(4,I),t(19,o),t(18,l),t(17,s),t(0,i),t(16,m),t(20,u),t(5,f),t(14,k),t(15,$),t(22,h),t(21,c),t(1,g)}function A(N){E=N,t(7,E)}function B(N){C=N,t(8,C),t(6,a),t(4,I),t(19,o),t(18,l),t(17,s),t(0,i),t(16,m),t(20,u),t(5,f),t(14,k),t(15,$),t(22,h),t(21,c),t(1,g)}return n.$$set=N=>{"workflow"in N&&t(0,i=N.workflow),"namespace"in N&&t(1,g=N.namespace),"cancelInProgress"in N&&t(2,W=N.cancelInProgress),"isRunning"in N&&t(3,y=N.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&t(12,e=Pt(h.data.settings)),n.$$.dirty[0]&4194304&&t(19,o=br(h.data.settings)),n.$$.dirty[0]&4194304&&t(18,l=St(h.data.settings)),n.$$.dirty[0]&4194304&&t(17,s=Wt(h.data.settings)),n.$$.dirty[0]&1228801&&(s?s&&(t(14,k=i==null?void 0:i.pendingChildren)===null||k===void 0?void 0:k.length)>0?t(4,I=V("workflows.reset-disabled-pending-children")):s&&(t(15,$=i==null?void 0:i.pendingChildren)===null||$===void 0?void 0:$.length)===0&&u.length===0&&t(4,I=V("workflows.reset-disabled-no-events")):t(4,I=V("workflows.reset-disabled"))),n.$$.dirty[0]&2097154&&t(5,f=c.namespaceWriteDisabled(g)||!Yt(jt)),n.$$.dirty[0]&1245217&&t(6,a=s&&(t(16,m=i==null?void 0:i.pendingChildren)===null||m===void 0?void 0:m.length)===0&&u.length>0&&!f),n.$$.dirty[0]&786512&&t(11,v=[{label:V("workflows.reset"),onClick:()=>t(9,M=!0),testId:"reset-button",allowed:a,tooltip:a?"":I},{label:V("workflows.signal"),onClick:()=>t(10,b=!0),testId:"signal-button",allowed:o,tooltip:o?"":V("workflows.signal-disabled")},{label:V("workflows.terminate"),onClick:()=>t(8,C=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":V("workflows.terminate-disabled")}])},[i,g,W,y,I,f,a,E,C,M,b,v,e,F,k,$,m,s,l,o,u,c,h,T,p,L,le,A,B]}class Wr extends ce{constructor(r){super(),me(this,r,Sr,Pr,ue,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}function Tr(n){let r,t,e=V("workers.buildId")+"",o,l,s;return l=new Jt({props:{active:!0,buildId:n[0]}}),{c(){r=j("p"),t=j("span"),o=G(e),D(l.$$.fragment),this.h()},l(f){r=Q(f,"P",{class:!0});var a=Y(r);t=Q(a,"SPAN",{});var u=Y(t);o=K(u,e),u.forEach(w),R(l.$$.fragment,a),a.forEach(w),this.h()},h(){z(r,"class","flex items-center gap-1")},m(f,a){q(f,r,a),H(r,t),H(t,o),P(l,r,null),s=!0},p(f,[a]){const u={};a&1&&(u.buildId=f[0]),l.$set(u)},i(f){s||(_(l.$$.fragment,f),s=!0)},o(f){d(l.$$.fragment,f),s=!1},d(f){f&&w(r),S(l)}}}function Vr(n,r,t){let e,{workflow:o}=r;return n.$$set=l=>{"workflow"in l&&t(1,o=l.workflow)},n.$$.update=()=>{n.$$.dirty&2&&t(0,e=Gt(o))},[e,o]}class Mr extends ce{constructor(r){super(),me(this,r,Vr,Tr,ue,{workflow:1})}}const qr=(n,r)=>{const t=n==="Running",e=r==null?void 0:r.some(o=>(o==null?void 0:o.eventType)==="WorkflowExecutionCancelRequested");return t&&e},ze=n=>{const r=n==null?void 0:n.indexOf("?");return r>-1?n.slice(0,r):n},Z=(n,r,t=!1)=>{const e=ze(n).split("/"),o=ze(r).split("/");if(t&&e.length!==o.length)return!1;for(let l=0;l<e.length;l++){const s=e[l],f=o[l];if(s!==f)return!1}return!0};function Hr(n){let r=(n[12]?V("common.workflows"):V("workflows.back-to-workflows"))+"",t;return{c(){t=G(r)},l(e){t=K(e,r)},m(e,o){q(e,t,o)},p(e,o){o&4096&&r!==(r=(e[12]?V("common.workflows"):V("workflows.back-to-workflows"))+"")&&fe(t,r)},d(e){e&&w(t)}}}function Je(n){let r,t;return r=new We({props:{href:ie({...n[11]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[yr]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&2048&&(l.href=ie({...e[11]})),o&8388610&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function yr(n){var e;let r=((e=n[1])==null?void 0:e.runId)+"",t;return{c(){t=G(r)},l(o){t=K(o,r)},m(o,l){q(o,t,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.runId)+"")&&fe(t,r)},d(o){o&&w(t)}}}function Ge(n){let r,t;return r=new Mr({props:{workflow:n[1]}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&2&&(l.workflow=e[1]),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Fr(n){var e;let r=((e=n[1])==null?void 0:e.historyEvents)+"",t;return{c(){t=G(r)},l(o){t=K(o,r)},m(o,l){q(o,t,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.historyEvents)+"")&&fe(t,r)},d(o){o&&w(t)}}}function Nr(n){let r,t;return r=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Fr]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&8388610&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Br(n){var e,o;let r=((o=(e=n[13])==null?void 0:e.pollers)==null?void 0:o.length)+"",t;return{c(){t=G(r)},l(l){t=K(l,r)},m(l,s){q(l,t,s)},p(l,s){var f,a;s&8192&&r!==(r=((a=(f=l[13])==null?void 0:f.pollers)==null?void 0:a.length)+"")&&fe(t,r)},d(l){l&&w(t)}}}function Lr(n){let r,t;return r=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&8396800&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Or(n){let r=n[5].relationshipCount+"",t;return{c(){t=G(r)},l(e){t=K(e,r)},m(e,o){q(e,t,o)},p(e,o){o&32&&r!==(r=e[5].relationshipCount+"")&&fe(t,r)},d(e){e&&w(t)}}}function Ur(n){let r,t;return r=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Or]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&8388640&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Ke(n){let r,t;return r=new de({props:{label:V("workflows.pending-activities-tab"),id:"pending-activities-tab",href:Ce(n[11]),active:Z(n[4].url.pathname,Ce(n[11])),$$slots:{default:[Qr]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&2048&&(l.href=Ce(e[11])),o&2064&&(l.active=Z(e[4].url.pathname,Ce(e[11]))),o&8389122&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Xe(n){let r,t;return r=new Nt({props:{name:"canceled"}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function jr(n){var f,a;let r,t,e=((a=(f=n[1])==null?void 0:f.pendingActivities)==null?void 0:a.length)+"",o,l,s=n[9]&&Xe();return{c(){r=j("div"),s&&s.c(),t=O(),o=G(e),this.h()},l(u){r=Q(u,"DIV",{class:!0});var c=Y(r);s&&s.l(c),t=U(c),o=K(c,e),c.forEach(w),this.h()},h(){z(r,"class","flex items-center gap-1")},m(u,c){q(u,r,c),s&&s.m(r,null),H(r,t),H(r,o),l=!0},p(u,c){var h,k;u[9]?s?c&512&&_(s,1):(s=Xe(),s.c(),_(s,1),s.m(r,t)):s&&(ee(),d(s,1,1,()=>{s=null}),te()),(!l||c&2)&&e!==(e=((k=(h=u[1])==null?void 0:h.pendingActivities)==null?void 0:k.length)+"")&&fe(o,e)},i(u){l||(_(s),l=!0)},o(u){d(s),l=!1},d(u){u&&w(r),s&&s.d()}}}function Qr(n){let r,t;return r=new Te({props:{type:n[9]?"warning":"information",class:"px-2 py-0",$$slots:{default:[jr]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&512&&(l.type=e[9]?"warning":"information"),o&8389122&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Yr(n){let r,t,e,o,l,s,f,a,u,c,h,k,$;r=new de({props:{label:V("workflows.history-tab"),id:"history-tab",href:ie({...n[11]}),active:Z(n[4].url.pathname,ie({...n[11]})),$$slots:{default:[Nr]},$$scope:{ctx:n}}}),e=new de({props:{label:V("workflows.workers-tab"),id:"workers-tab",href:ke(n[11]),active:Z(n[4].url.pathname,ke(n[11])),$$slots:{default:[Lr]},$$scope:{ctx:n}}}),l=new de({props:{label:V("workflows.relationships"),id:"relationships-tab",href:be(n[11]),active:Z(n[4].url.pathname,be(n[11])),$$slots:{default:[Ur]},$$scope:{ctx:n}}});let m=!n[15]&&Ke(n);return a=new de({props:{label:V("workflows.call-stack-tab"),id:"call-stack-tab",href:ve(n[11]),active:Z(n[4].url.pathname,ve(n[11]))}}),c=new de({props:{label:V("workflows.queries-tab"),id:"queries-tab",href:Ee(n[11]),active:Z(n[4].url.pathname,Ee(n[11]))}}),k=new de({props:{label:V("workflows.metadata-tab"),id:"metadata-tab",href:Ie(n[11]),active:Z(n[4].url.pathname,Ie(n[11]))}}),{c(){D(r.$$.fragment),t=O(),D(e.$$.fragment),o=O(),D(l.$$.fragment),s=O(),m&&m.c(),f=O(),D(a.$$.fragment),u=O(),D(c.$$.fragment),h=O(),D(k.$$.fragment)},l(i){R(r.$$.fragment,i),t=U(i),R(e.$$.fragment,i),o=U(i),R(l.$$.fragment,i),s=U(i),m&&m.l(i),f=U(i),R(a.$$.fragment,i),u=U(i),R(c.$$.fragment,i),h=U(i),R(k.$$.fragment,i)},m(i,g){P(r,i,g),q(i,t,g),P(e,i,g),q(i,o,g),P(l,i,g),q(i,s,g),m&&m.m(i,g),q(i,f,g),P(a,i,g),q(i,u,g),P(c,i,g),q(i,h,g),P(k,i,g),$=!0},p(i,g){const W={};g&2048&&(W.href=ie({...i[11]})),g&2064&&(W.active=Z(i[4].url.pathname,ie({...i[11]}))),g&8388610&&(W.$$scope={dirty:g,ctx:i}),r.$set(W);const y={};g&2048&&(y.href=ke(i[11])),g&2064&&(y.active=Z(i[4].url.pathname,ke(i[11]))),g&8396800&&(y.$$scope={dirty:g,ctx:i}),e.$set(y);const E={};g&2048&&(E.href=be(i[11])),g&2064&&(E.active=Z(i[4].url.pathname,be(i[11]))),g&8388640&&(E.$$scope={dirty:g,ctx:i}),l.$set(E),i[15]?m&&(ee(),d(m,1,1,()=>{m=null}),te()):m?(m.p(i,g),g&32768&&_(m,1)):(m=Ke(i),m.c(),_(m,1),m.m(f.parentNode,f));const C={};g&2048&&(C.href=ve(i[11])),g&2064&&(C.active=Z(i[4].url.pathname,ve(i[11]))),a.$set(C);const M={};g&2048&&(M.href=Ee(i[11])),g&2064&&(M.active=Z(i[4].url.pathname,Ee(i[11]))),c.$set(M);const b={};g&2048&&(b.href=Ie(i[11])),g&2064&&(b.active=Z(i[4].url.pathname,Ie(i[11]))),k.$set(b)},i(i){$||(_(r.$$.fragment,i),_(e.$$.fragment,i),_(l.$$.fragment,i),_(m),_(a.$$.fragment,i),_(c.$$.fragment,i),_(k.$$.fragment,i),$=!0)},o(i){d(r.$$.fragment,i),d(e.$$.fragment,i),d(l.$$.fragment,i),d(m),d(a.$$.fragment,i),d(c.$$.fragment,i),d(k.$$.fragment,i),$=!1},d(i){i&&(w(t),w(o),w(s),w(f),w(u),w(h)),S(r,i),S(e,i),S(l,i),m&&m.d(i),S(a,i),S(c,i),S(k,i)}}}function zr(n){let r,t;return r=new xt({props:{class:"flex flex-wrap gap-6 p-4",label:"workflow detail",$$slots:{default:[Yr]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&8432178&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function Ze(n){let r,t,e,o;return t=new gt({props:{bold:!0,icon:"info",intent:"info",title:V("workflows.cancel-request-sent"),$$slots:{default:[Jr]},$$scope:{ctx:n}}}),{c(){r=j("div"),D(t.$$.fragment)},l(l){r=Q(l,"DIV",{});var s=Y(r);R(t.$$.fragment,s),s.forEach(w)},m(l,s){q(l,r,s),P(t,r,null),o=!0},p(l,s){const f={};s&8388608&&(f.$$scope={dirty:s,ctx:l}),t.$set(f)},i(l){o||(_(t.$$.fragment,l),l&&(e||ot(()=>{e=lt(r,it,{duration:200,delay:100}),e.start()})),o=!0)},o(l){d(t.$$.fragment,l),o=!1},d(l){l&&w(r),S(t)}}}function Jr(n){let r=V("workflows.cancel-request-sent-description")+"",t;return{c(){t=G(r)},l(e){t=K(e,r)},m(e,o){q(e,t,o)},p:ae,d(e){e&&w(t)}}}function xe(n){let r,t,e,o;return t=new gt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:V("workflows.reset-success-alert-title"),$$slots:{default:[Kr]},$$scope:{ctx:n}}}),{c(){r=j("div"),D(t.$$.fragment)},l(l){r=Q(l,"DIV",{});var s=Y(r);R(t.$$.fragment,s),s.forEach(w)},m(l,s){q(l,r,s),P(t,r,null),o=!0},p(l,s){const f={};s&8388621&&(f.$$scope={dirty:s,ctx:l}),t.$set(f)},i(l){o||(_(t.$$.fragment,l),l&&(e||ot(()=>{e=lt(r,it,{duration:200,delay:100}),e.start()})),o=!0)},o(l){d(t.$$.fragment,l),o=!1},d(l){l&&w(r),S(t)}}}function Gr(n){let r;return{c(){r=G("here")},l(t){r=K(t,"here")},m(t,e){q(t,r,e)},d(t){t&&w(r)}}}function Kr(n){var l,s,f,a;let r,t,e,o;return t=new We({props:{href:ie({namespace:n[0],workflow:(s=(l=n[2])==null?void 0:l.workflow)==null?void 0:s.id,run:n[3][(a=(f=n[2])==null?void 0:f.workflow)==null?void 0:a.runId]}),$$slots:{default:[Gr]},$$scope:{ctx:n}}}),{c(){r=G("You can find the resulting Workflow Execution "),D(t.$$.fragment),e=G(".")},l(u){r=K(u,"You can find the resulting Workflow Execution "),R(t.$$.fragment,u),e=K(u,".")},m(u,c){q(u,r,c),P(t,u,c),q(u,e,c),o=!0},p(u,c){var k,$,m,i;const h={};c&13&&(h.href=ie({namespace:u[0],workflow:($=(k=u[2])==null?void 0:k.workflow)==null?void 0:$.id,run:u[3][(i=(m=u[2])==null?void 0:m.workflow)==null?void 0:i.runId]})),c&8388608&&(h.$$scope={dirty:c,ctx:u}),t.$set(h)},i(u){o||(_(t.$$.fragment,u),o=!0)},o(u){d(t.$$.fragment,u),o=!1},d(u){u&&(w(r),w(e)),S(t,u)}}}function Xr(n){var L,le;let r,t,e,o,l,s,f,a,u,c,h,k,$,m,i,g,W,y,E,C,M,b,I;e=new We({props:{href:`${Re({namespace:n[0]})}?${n[14]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Hr]},$$scope:{ctx:n}}});let v=n[12]&&Je(n);c=new zt({props:{status:(L=n[1])==null?void 0:L.status,big:!0}}),m=new Xt({props:{copyIconTitle:V("common.copy-icon-title"),copySuccessIconTitle:V("common.copy-success-icon-title"),content:(le=n[1])==null?void 0:le.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}});let F=n[6]&&Ge(n);y=new Wr({props:{isRunning:n[10],cancelInProgress:n[8],workflow:n[1],namespace:n[0]}}),C=new Zt({props:{$$slots:{default:[zr]},$$scope:{ctx:n}}});let T=n[8]&&Ze(n),p=n[7]&&xe(n);return{c(){r=j("div"),t=j("div"),D(e.$$.fragment),o=O(),v&&v.c(),l=O(),s=j("header"),f=j("div"),a=j("div"),u=j("div"),D(c.$$.fragment),h=O(),k=j("div"),$=j("h1"),D(m.$$.fragment),i=O(),F&&F.c(),g=O(),W=j("div"),D(y.$$.fragment),E=O(),D(C.$$.fragment),M=O(),T&&T.c(),b=O(),p&&p.c(),this.h()},l(A){r=Q(A,"DIV",{});var B=Y(r);t=Q(B,"DIV",{class:!0});var N=Y(t);R(e.$$.fragment,N),o=U(N),v&&v.l(N),N.forEach(w),l=U(B),s=Q(B,"HEADER",{class:!0});var X=Y(s);f=Q(X,"DIV",{class:!0});var pe=Y(f);a=Q(pe,"DIV",{class:!0});var se=Y(a);u=Q(se,"DIV",{class:!0});var ge=Y(u);R(c.$$.fragment,ge),ge.forEach(w),h=U(se),k=Q(se,"DIV",{class:!0});var _e=Y(k);$=Q(_e,"H1",{"data-testid":!0,class:!0});var we=Y($);R(m.$$.fragment,we),we.forEach(w),i=U(_e),F&&F.l(_e),_e.forEach(w),se.forEach(w),g=U(pe),W=Q(pe,"DIV",{class:!0});var Fe=Y(W);R(y.$$.fragment,Fe),Fe.forEach(w),pe.forEach(w),E=U(X),R(C.$$.fragment,X),M=U(X),T&&T.l(X),b=U(X),p&&p.l(X),X.forEach(w),B.forEach(w),this.h()},h(){z(t,"class","pb-4"),z(u,"class","px-2"),z($,"data-testid","workflow-id-heading"),z($,"class","overflow-hidden text-base font-medium lg:text-2xl"),z(k,"class","flex flex-col flex-wrap gap-0"),z(a,"class","flex flex-col items-center gap-4 lg:flex-row"),z(W,"class","px-2"),z(f,"class","flex flex-col items-center justify-between gap-4 lg:flex-row"),z(s,"class","rounded-top flex flex-col gap-0")},m(A,B){q(A,r,B),H(r,t),P(e,t,null),H(t,o),v&&v.m(t,null),H(r,l),H(r,s),H(s,f),H(f,a),H(a,u),P(c,u,null),H(a,h),H(a,k),H(k,$),P(m,$,null),H(k,i),F&&F.m(k,null),H(f,g),H(f,W),P(y,W,null),H(s,E),P(C,s,null),H(s,M),T&&T.m(s,null),H(s,b),p&&p.m(s,null),I=!0},p(A,[B]){var _e,we;const N={};B&16385&&(N.href=`${Re({namespace:A[0]})}?${A[14]}`),B&8392704&&(N.$$scope={dirty:B,ctx:A}),e.$set(N),A[12]?v?(v.p(A,B),B&4096&&_(v,1)):(v=Je(A),v.c(),_(v,1),v.m(t,null)):v&&(ee(),d(v,1,1,()=>{v=null}),te());const X={};B&2&&(X.status=(_e=A[1])==null?void 0:_e.status),c.$set(X);const pe={};B&2&&(pe.content=(we=A[1])==null?void 0:we.id),m.$set(pe),A[6]?F?(F.p(A,B),B&64&&_(F,1)):(F=Ge(A),F.c(),_(F,1),F.m(k,null)):F&&(ee(),d(F,1,1,()=>{F=null}),te());const se={};B&1024&&(se.isRunning=A[10]),B&256&&(se.cancelInProgress=A[8]),B&2&&(se.workflow=A[1]),B&1&&(se.namespace=A[0]),y.$set(se);const ge={};B&8432178&&(ge.$$scope={dirty:B,ctx:A}),C.$set(ge),A[8]?T?(T.p(A,B),B&256&&_(T,1)):(T=Ze(A),T.c(),_(T,1),T.m(s,b)):T&&(ee(),d(T,1,1,()=>{T=null}),te()),A[7]?p?(p.p(A,B),B&128&&_(p,1)):(p=xe(A),p.c(),_(p,1),p.m(s,null)):p&&(ee(),d(p,1,1,()=>{p=null}),te())},i(A){I||(_(e.$$.fragment,A),_(v),_(c.$$.fragment,A),_(m.$$.fragment,A),_(F),_(y.$$.fragment,A),_(C.$$.fragment,A),_(T),_(p),I=!0)},o(A){d(e.$$.fragment,A),d(v),d(c.$$.fragment,A),d(m.$$.fragment,A),d(F),d(y.$$.fragment,A),d(C.$$.fragment,A),d(T),d(p),I=!1},d(A){A&&w(r),S(e),v&&v.d(),S(c),S(m),F&&F.d(),S(y),S(C),T&&T.d(),p&&p.d()}}}function Zr(n,r,t){let e,o,l,s,f,a,u,c,h,k,$,m,i,g,W,y,E;J(n,er,T=>t(21,$=T)),J(n,Ae,T=>t(22,m=T)),J(n,$e,T=>t(2,i=T)),J(n,ht,T=>t(3,g=T)),J(n,Se,T=>t(4,W=T)),J(n,st,T=>t(14,y=T)),J(n,ft,T=>t(15,E=T));var C,M,b,I,v;let{namespace:F}=r;return n.$$set=T=>{"namespace"in T&&t(0,F=T.namespace)},n.$$.update=()=>{n.$$.dirty&4&&t(1,{workflow:e,workers:o}=i,e,(t(13,o),t(2,i))),n.$$.dirty&16&&t(12,l=W.params.id),n.$$.dirty&3&&t(11,s={namespace:F,workflow:e==null?void 0:e.id,run:e==null?void 0:e.runId}),n.$$.dirty&65540&&t(10,f=t(16,C=i==null?void 0:i.workflow)===null||C===void 0?void 0:C.isRunning),n.$$.dirty&131076&&t(9,a=["Terminated","TimedOut","Canceled"].includes(t(17,M=i.workflow)===null||M===void 0?void 0:M.status)),n.$$.dirty&4456452&&t(8,u=qr(t(18,b=i==null?void 0:i.workflow)===null||b===void 0?void 0:b.status,m)),n.$$.dirty&524300&&t(7,c=rr(g,t(19,I=i==null?void 0:i.workflow)===null||I===void 0?void 0:I.runId)),n.$$.dirty&1048578&&t(6,h=t(20,v=e==null?void 0:e.mostRecentWorkerVersionStamp)===null||v===void 0?void 0:v.useVersioning),n.$$.dirty&6291458&&t(5,k=tr(e,m,$))},[F,e,i,g,W,k,h,c,u,a,f,s,l,o,y,E,C,M,b,I,v,$,m]}class $t extends ce{constructor(r){super(),me(this,r,Zr,Xr,ue,{namespace:0})}}async function xr({activity:n,namespace:r,settings:t,accessToken:e},{convertWithCodec:o=or,decodeAttributes:l=nr}={}){const s=await o({attributes:n,namespace:r,settings:t,accessToken:e});return l(s)}const eo=async({activity:n,namespace:r,settings:t,accessToken:e})=>await xr({activity:n,namespace:r,settings:t,accessToken:e}),et=async(n,r,t,e)=>{const o=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of o){const f=await eo({activity:s,namespace:r,settings:t,accessToken:e});l.push(f)}return l};function to(n){let r,t,e,o;t=new $t({props:{namespace:n[0].params.namespace}});const l=n[10].default,s=Me(l,n,n[11],null);return{c(){r=j("div"),D(t.$$.fragment),e=O(),s&&s.c(),this.h()},l(f){r=Q(f,"DIV",{class:!0});var a=Y(r);R(t.$$.fragment,a),a.forEach(w),e=U(f),s&&s.l(f),this.h()},h(){z(r,"class","px-8 pt-24 md:pt-20")},m(f,a){q(f,r,a),P(t,r,null),q(f,e,a),s&&s.m(f,a),o=!0},p(f,a){const u={};a&1&&(u.namespace=f[0].params.namespace),t.$set(u),s&&s.p&&(!o||a&2048)&&qe(s,l,f,f[11],o?ye(l,f[11],a,null):He(f[11]),null)},i(f){o||(_(t.$$.fragment,f),_(s,f),o=!0)},o(f){d(t.$$.fragment,f),d(s,f),o=!1},d(f){f&&(w(r),w(e)),S(t),s&&s.d(f)}}}function ro(n){let r,t;return r=new at({props:{class:"pt-24"}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p:ae,i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function oo(n){let r,t;return r=new wt({props:{error:n[1]}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&2&&(l.error=e[1]),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function no(n){let r,t,e,o,l;const s=[oo,ro,to],f=[];function a(u,c){return u[1]?0:u[2].workflow?2:1}return t=a(n),e=f[t]=s[t](n),{c(){r=j("div"),e.c(),this.h()},l(u){r=Q(u,"DIV",{class:!0});var c=Y(r);e.l(c),c.forEach(w),this.h()},h(){z(r,"class",o="absolute bottom-0 left-0 right-0 "+(n[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0")},m(u,c){q(u,r,c),f[t].m(r,null),l=!0},p(u,c){let h=t;t=a(u),t===h?f[t].p(u,c):(ee(),d(f[h],1,1,()=>{f[h]=null}),te(),e=f[t],e?e.p(u,c):(e=f[t]=s[t](u),e.c()),_(e,1),e.m(r,null)),(!l||c&8&&o!==(o="absolute bottom-0 left-0 right-0 "+(u[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0"))&&z(r,"class",o)},i(u){l||(_(e),l=!0)},o(u){d(e),l=!1},d(u){u&&w(r),f[t].d()}}}function lo(n){let r,t,e;r=new $t({props:{namespace:n[0].params.namespace}});const o=n[10].default,l=Me(o,n,n[11],null);return{c(){D(r.$$.fragment),t=O(),l&&l.c()},l(s){R(r.$$.fragment,s),t=U(s),l&&l.l(s)},m(s,f){P(r,s,f),q(s,t,f),l&&l.m(s,f),e=!0},p(s,f){const a={};f&1&&(a.namespace=s[0].params.namespace),r.$set(a),l&&l.p&&(!e||f&2048)&&qe(l,o,s,s[11],e?ye(o,s[11],f,null):He(s[11]),null)},i(s){e||(_(r.$$.fragment,s),_(l,s),e=!0)},o(s){d(r.$$.fragment,s),d(l,s),e=!1},d(s){s&&w(t),S(r,s),l&&l.d(s)}}}function so(n){let r,t;return r=new at({}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p:ae,i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function fo(n){let r,t;return r=new wt({props:{error:n[1]}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&2&&(l.error=e[1]),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function ao(n){let r,t,e,o;const l=[fo,so,lo],s=[];function f(a,u){return a[1]?0:a[2].workflow?2:1}return t=f(n),e=s[t]=l[t](n),{c(){r=j("div"),e.c(),this.h()},l(a){r=Q(a,"DIV",{class:!0,slot:!0});var u=Y(r);e.l(u),u.forEach(w),this.h()},h(){z(r,"class","flex h-full flex-col gap-0"),z(r,"slot","fallback")},m(a,u){q(a,r,u),s[t].m(r,null),o=!0},p(a,u){let c=t;t=f(a),t===c?s[t].p(a,u):(ee(),d(s[c],1,1,()=>{s[c]=null}),te(),e=s[t],e?e.p(a,u):(e=s[t]=l[t](a),e.c()),_(e,1),e.m(r,null))},i(a){o||(_(e),o=!0)},o(a){d(e),o=!1},d(a){a&&w(r),s[t].d()}}}function io(n){let r,t;return r=new At({props:{$$slots:{fallback:[ao],default:[no]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,[o]){const l={};o&2063&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function uo(n,r,t){let e,o,l,s,f,a,u,c,h,k,$,m;J(n,Le,v=>t(7,s=v)),J(n,Se,v=>t(0,f=v)),J(n,he,v=>t(8,a=v)),J(n,ft,v=>t(9,u=v)),J(n,Ve,v=>t(13,c=v)),J(n,$e,v=>t(2,h=v)),J(n,Ae,v=>t(14,k=v)),J(n,sr,v=>t(15,$=v)),J(n,Et,v=>t(3,m=v));let{$$slots:i={},$$scope:g}=r,W,y;const E=async(v,F,T,p,L)=>{const{settings:le}=f.data,{workflow:A,error:B}=await Ne({namespace:v,workflowId:F,runId:T});if(B){t(1,W=B);return}const{taskQueue:N}=A,X=await Kt({queue:N,namespace:v});A.pendingActivities=await et(A,v,le,$==null?void 0:$.accessToken),re($e,h={workflow:A,workers:X},h),y=new AbortController,re(Ae,k=await lr({namespace:v,workflowId:F,runId:T,sort:L?"ascending":p,signal:y.signal,historySize:A.historyEvents}),k)},C=async v=>{var F;if(v&&(!((F=h==null?void 0:h.workflow)===null||F===void 0)&&F.isRunning)){const{settings:T}=f.data,{workflow:p,error:L}=await Ne({namespace:e,workflowId:o,runId:l});if(L){t(1,W=L);return}p.pendingActivities=await et(p,e,T,$==null?void 0:$.accessToken),re($e,h={...h,workflow:p},h)}},M=()=>{re(Ae,k=[],k),y&&y.abort()},b=()=>{re(Ve,c=null,c),re($e,h=Qt,h),t(1,W=void 0),M()},I=()=>{re(Ve,c=null,c),M()};return vt(()=>{const v=f.url.searchParams.get("sort");v&&re(Le,s=v,s)}),nt(()=>{b()}),n.$$set=v=>{"$$scope"in v&&t(11,g=v.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(6,{namespace:e,workflow:o,run:l}=f.params,e,(t(5,o),t(0,f)),(t(4,l),t(0,f))),n.$$.dirty&16&&b(),n.$$.dirty&640&&I(),n.$$.dirty&752&&E(e,o,l,s,u),n.$$.dirty&256&&C(a)},[f,W,h,m,l,o,e,s,a,u,i,g]}class co extends ce{constructor(r){super(),me(this,r,uo,io,ue,{})}}const kt={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},mo=ut(kt),po=()=>{mo.set(kt)};function _o(n){let r;const t=n[0].default,e=Me(t,n,n[1],null);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,l){e&&e.m(o,l),r=!0},p(o,l){e&&e.p&&(!r||l&2)&&qe(e,t,o,o[1],r?ye(t,o[1],l,null):He(o[1]),null)},i(o){r||(_(e,o),r=!0)},o(o){d(e,o),r=!1},d(o){e&&e.d(o)}}}function go(n){let r,t;return r=new co({props:{$$slots:{default:[_o]},$$scope:{ctx:n}}}),{c(){D(r.$$.fragment)},l(e){R(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){d(r.$$.fragment,e),t=!1},d(e){S(r,e)}}}function wo(n,r,t){let{$$slots:e={},$$scope:o}=r;return nt(()=>{po()}),n.$$set=l=>{"$$scope"in l&&t(1,o=l.$$scope)},[e,o]}class mn extends ce{constructor(r){super(),me(this,r,wo,go,ue,{})}}export{mn as component};
