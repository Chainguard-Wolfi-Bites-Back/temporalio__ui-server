import{S as M,b as P,a as B,c as S,C as d,d as W,D as y,f as h,E as $,j as c,z as I,g as p,h as N,k as g,F as v,K as H,m as Z,p as x,q as ee,u as te,e as L,aa as re,ab as ne,a5 as j,w as J,x as O,y as Q,n as F}from"../chunks/index.0942deb7.js";import{p as oe}from"../chunks/stores.255470ec.js";import{E as le,a as se,b as ie}from"../chunks/event-summary-table.e279c965.js";import{E as fe,i as ae}from"../chunks/get-workflow-relationships.fae6d6c6.js";import{L as ue}from"../chunks/link.faba7c50.js";import{t as me}from"../chunks/translate.135d909a.js";import{g as ce}from"../chunks/index.5fe2e895.js";import{b as pe}from"../chunks/events-service.4b32e39d.js";import{f as C,e as _e}from"../chunks/events.a3eb82f4.js";import{w as ge}from"../chunks/workflow-run.27281c78.js";import{g as he}from"../chunks/route-for.18f9590b.js";function z(i,t,r){const e=i.slice();return e[18]=t[r],e}function D(i){let t,r,e,l;const f=[ke,we],s=[];function n(o,a){return o[3]?0:1}return r=n(i),e=s[r]=f[r](i),{c(){t=Z("h2"),e.c(),this.h()},l(o){t=x(o,"H2",{class:!0});var a=ee(t);e.l(a),a.forEach(g),this.h()},h(){te(t,"class","flex w-full items-center text-lg font-medium")},m(o,a){h(o,t,a),s[r].m(t,null),l=!0},p(o,a){let u=r;r=n(o),r===u?s[r].p(o,a):(I(),p(s[u],1,1,()=>{s[u]=null}),N(),e=s[r],e?e.p(o,a):(e=s[r]=f[r](o),e.c()),c(e,1),e.m(t,null))},i(o){l||(c(e),l=!0)},o(o){p(e),l=!1},d(o){o&&g(t),s[r].d()}}}function we(i){let t=i[0].displayName+"",r;return{c(){r=J(t)},l(e){r=O(e,t)},m(e,l){h(e,r,l)},p(e,l){l&1&&t!==(t=e[0].displayName+"")&&Q(r,t)},i:F,o:F,d(e){e&&g(r)}}}function ke(i){let t,r;return t=new ue({props:{href:i[3],$$slots:{default:[de]},$$scope:{ctx:i}}}),{c(){d(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,l){$(t,e,l),r=!0},p(e,l){const f={};l&8&&(f.href=e[3]),l&2097153&&(f.$$scope={dirty:l,ctx:e}),t.$set(f)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function de(i){let t=i[0].displayName+"",r;return{c(){r=J(t)},l(e){r=O(e,t)},m(e,l){h(e,r,l)},p(e,l){l&1&&t!==(t=e[0].displayName+"")&&Q(r,t)},d(e){e&&g(r)}}}function G(i){let t,r;return t=new se({props:{loading:i[2],title:me("events.group-empty-state-title"),content:""}}),{c(){d(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,l){$(t,e,l),r=!0},p(e,l){const f={};l&4&&(f.loading=e[2]),t.$set(f)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function K(i,t){let r,e,l;return e=new ie({props:{event:t[18],compact:T,expandAll:!0,initialItem:t[6],active:!0}}),{key:i,first:null,c(){r=L(),d(e.$$.fragment),this.h()},l(f){r=L(),y(e.$$.fragment,f),this.h()},h(){this.first=r},m(f,s){h(f,r,s),$(e,f,s),l=!0},p(f,s){t=f;const n={};s&16&&(n.event=t[18]),s&64&&(n.initialItem=t[6]),e.$set(n)},i(f){l||(c(e.$$.fragment,f),l=!0)},o(f){p(e.$$.fragment,f),l=!1},d(f){f&&g(r),v(e,f)}}}function ye(i){let t=[],r=new Map,e,l,f=i[4];const s=o=>`${o[18].id}-${o[18].timestamp}`;for(let o=0;o<f.length;o+=1){let a=z(i,f,o),u=s(a);r.set(u,t[o]=K(u,a))}let n=null;return f.length||(n=G(i)),{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=L(),n&&n.c()},l(o){for(let a=0;a<t.length;a+=1)t[a].l(o);e=L(),n&&n.l(o)},m(o,a){for(let u=0;u<t.length;u+=1)t[u].m(o,a);h(o,e,a),n&&n.m(o,a),l=!0},p(o,a){a&84&&(f=o[4],I(),t=re(t,a,s,1,o,f,r,e.parentNode,ne,K,e,z),N(),!f.length&&n?n.p(o,a):f.length?n&&(I(),p(n,1,1,()=>{n=null}),N()):(n=G(o),n.c(),c(n,1),n.m(e.parentNode,e)))},i(o){if(!l){for(let a=0;a<f.length;a+=1)c(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)p(t[a]);l=!1},d(o){for(let a=0;a<t.length;a+=1)t[a].d(o);o&&g(e),n&&n.d(o)}}}function $e(i){let t,r,e,l,f,s=i[0]&&D(i);return r=new fe({props:{history:i[1],maxHeight:240}}),l=new le({props:{updating:i[5],compact:T,$$slots:{default:[ye]},$$scope:{ctx:i}}}),{c(){s&&s.c(),t=S(),d(r.$$.fragment),e=S(),d(l.$$.fragment)},l(n){s&&s.l(n),t=W(n),y(r.$$.fragment,n),e=W(n),y(l.$$.fragment,n)},m(n,o){s&&s.m(n,o),h(n,t,o),$(r,n,o),h(n,e,o),$(l,n,o),f=!0},p(n,[o]){n[0]?s?(s.p(n,o),o&1&&c(s,1)):(s=D(n),s.c(),c(s,1),s.m(t.parentNode,t)):s&&(I(),p(s,1,1,()=>{s=null}),N());const a={};o&2&&(a.history=n[1]),r.$set(a);const u={};o&32&&(u.updating=n[5]),o&2097236&&(u.$$scope={dirty:o,ctx:n}),l.$set(u)},i(n){f||(c(s),c(r.$$.fragment,n),c(l.$$.fragment,n),f=!0)},o(n){p(s),p(r.$$.fragment,n),p(l.$$.fragment,n),f=!1},d(n){s&&s.d(n),n&&g(t),v(r,n),n&&g(e),v(l,n)}}}const T=!0;function ve(i,t,r){let e,l,f,s,n,o,a,u,q,A,_,b,R,w;H(i,C,m=>r(1,_=m)),H(i,_e,m=>r(12,b=m)),H(i,ge,m=>r(14,R=m)),H(i,oe,m=>r(13,w=m));let E=!1;const U=()=>{j(C,_=[],_),r(2,E=!0)},V=async(m,k,Y)=>{(R.workflow.id!==k||!_.length)&&(r(2,E=!0),U(),j(C,_=await pe({namespace:m,workflowId:k,runId:Y,sort:"ascending"}),_),r(2,E=!1))};function X(m){const k=m==null?void 0:m.eventList.find(ae);return k?he({namespace:e,workflow:k.attributes.workflowExecution.workflowId,run:k.attributes.workflowExecution.runId}):""}return i.$$.update=()=>{i.$$.dirty&8192&&r(7,{namespace:e,workflow:l,run:f,id:s}=w.params,e,(r(11,l),r(13,w)),(r(10,f),r(13,w)),(r(8,s),r(13,w))),i.$$.dirty&3200&&V(e,l,f),i.$$.dirty&4098&&r(9,n=_.length?_:b==null?void 0:b.start),i.$$.dirty&512&&r(6,o=n==null?void 0:n[0]),i.$$.dirty&514&&r(5,a=n.length&&!_.length),i.$$.dirty&258&&r(0,u=ce(_).find(m=>m.id===s)),i.$$.dirty&1&&r(4,q=u?[u]:[]),i.$$.dirty&1&&r(3,A=X(u))},[u,_,E,A,q,a,o,e,s,n,f,l,b,w]}class be extends M{constructor(t){super(),P(this,t,ve,$e,B,{})}}function Ee(i){let t,r;return t=new be({}),{c(){d(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,l){$(t,e,l),r=!0},p:F,i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}class je extends M{constructor(t){super(),P(this,t,null,Ee,B,{})}}export{je as component};
