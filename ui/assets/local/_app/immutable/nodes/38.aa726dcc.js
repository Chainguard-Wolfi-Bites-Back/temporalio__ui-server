import{S as J,i as K,s as M,ad as R,k as j,l as C,m as S,h as $,b,ae as X,g as _,d as g,C as U,y as w,z as v,A as y,R as m,B as I,w as Z,P as x,a as L,c as Q,n as V,F as P,Q as ee,e as A,v as te,f as ne,a4 as oe,q as W,r as z}from"../chunks/index.df672b57.js";import{p as Y}from"../chunks/stores.b0b8cbf4.js";import{P as re}from"../chunks/page-title.3b4d8116.js";import{t as q}from"../chunks/translate.fa4eeabe.js";import{B as le}from"../chunks/button.740f7c9b.js";import{C as se}from"../chunks/code-block.4ce9c55b.js";import{E as ae}from"../chunks/empty-state.9da16a0e.js";import{L as ce}from"../chunks/loading.da021c84.js";import{S as ie,a as ue}from"../chunks/simple-select.59a508aa.js";import{T as fe}from"../chunks/toggle-switch.36b7cd2f.js";import{a as me,b as pe}from"../chunks/query-service.1ab01987.js";import{a as $e}from"../chunks/auth-user.8929d7d9.js";import{s as _e}from"../chunks/parse-with-big-int.b2dd742c.js";function O(l){const t=typeof l[15]!="string"?_e(l[15]):l[15];l[16]=t}function G(l,t,o){const e=l.slice();return e[17]=t[o],e}function ge(l){var e,n;let t,o;return t=new ae({props:{title:q("common.error-occurred"),content:q("workflows.no-workers-running-message"),error:(n=(e=l[20])==null?void 0:e.body)==null?void 0:n.message}}),{c(){w(t.$$.fragment)},l(r){v(t.$$.fragment,r)},m(r,s){y(t,r,s),o=!0},p:m,i(r){o||(_(t.$$.fragment,r),o=!0)},o(r){g(t.$$.fragment,r),o=!1},d(r){I(t,r)}}}function he(l){let t,o,e,n,r,s,i,a,u,k,h,E,T;function N(c){l[5](c)}let F={id:"query-select",label:q("workflows.query-type"),"data-testid":"query-select",$$slots:{default:[ke]},$$scope:{ctx:l}};l[0]!==void 0&&(F.value=l[0]),e=new ie({props:F}),Z.push(()=>x(e,"value",N)),s=new le({props:{leadingIcon:"retry",loading:Ee,$$slots:{default:[be]},$$scope:{ctx:l}}}),s.$on("click",l[6]),u=new fe({props:{label:q("workflows.json-formatting"),labelPosition:"left",id:"json-formatting",checked:l[2]}}),u.$on("change",l[7]);let p={ctx:l,current:null,token:null,hasCatch:!1,pending:ye,then:ve,catch:we,value:15,blocks:[,,,]};return R(E=l[1],p),{c(){t=j("div"),o=j("div"),w(e.$$.fragment),r=L(),w(s.$$.fragment),i=L(),a=j("div"),w(u.$$.fragment),k=L(),h=j("div"),p.block.c(),this.h()},l(c){t=C(c,"DIV",{class:!0});var f=S(t);o=C(f,"DIV",{class:!0});var d=S(o);v(e.$$.fragment,d),r=Q(d),v(s.$$.fragment,d),d.forEach($),i=Q(f),a=C(f,"DIV",{class:!0});var B=S(a);v(u.$$.fragment,B),B.forEach($),f.forEach($),k=Q(c),h=C(c,"DIV",{class:!0});var D=S(h);p.block.l(D),D.forEach($),this.h()},h(){V(o,"class","flex items-center gap-4"),V(a,"class","flex justify-end"),V(t,"class","flex justify-between"),V(h,"class","my-2 flex h-full items-start")},m(c,f){b(c,t,f),P(t,o),y(e,o,null),P(o,r),y(s,o,null),P(t,i),P(t,a),y(u,a,null),b(c,k,f),b(c,h,f),p.block.m(h,p.anchor=null),p.mount=()=>h,p.anchor=null,T=!0},p(c,f){l=c;const d={};f&2097152&&(d.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,d.value=l[0],ee(()=>n=!1)),e.$set(d);const B={};f&2097152&&(B.$$scope={dirty:f,ctx:l}),s.$set(B);const D={};f&4&&(D.checked=l[2]),u.$set(D),p.ctx=l,f&2&&E!==(E=l[1])&&R(E,p)||X(p,l,f)},i(c){T||(_(e.$$.fragment,c),_(s.$$.fragment,c),_(u.$$.fragment,c),_(p.block),T=!0)},o(c){g(e.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c);for(let f=0;f<3;f+=1){const d=p.blocks[f];g(d)}T=!1},d(c){c&&$(t),I(e),I(s),I(u),c&&$(k),c&&$(h),p.block.d(),p.token=null,p=null}}}function de(l){let t=l[17]+"",o;return{c(){o=W(t)},l(e){o=z(e,t)},m(e,n){b(e,o,n)},p:m,d(e){e&&$(o)}}}function H(l){let t,o;return t=new ue({props:{value:l[17],$$slots:{default:[de]},$$scope:{ctx:l}}}),{c(){w(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){y(t,e,n),o=!0},p(e,n){const r={};n&2097152&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){g(t.$$.fragment,e),o=!1},d(e){I(t,e)}}}function ke(l){let t,o,e=l[14],n=[];for(let s=0;s<e.length;s+=1)n[s]=H(G(l,e,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=A()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);t=A()},m(s,i){for(let a=0;a<n.length;a+=1)n[a].m(s,i);b(s,t,i),o=!0},p(s,i){if(i&8){e=s[14];let a;for(a=0;a<e.length;a+=1){const u=G(s,e,a);n[a]?(n[a].p(u,i),_(n[a],1)):(n[a]=H(u),n[a].c(),_(n[a],1),n[a].m(t.parentNode,t))}for(te(),a=e.length;a<n.length;a+=1)r(a);ne()}},i(s){if(!o){for(let i=0;i<e.length;i+=1)_(n[i]);o=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)g(n[i]);o=!1},d(s){oe(n,s),s&&$(t)}}}function be(l){let t=q("common.refresh")+"",o;return{c(){o=W(t)},l(e){o=z(e,t)},m(e,n){b(e,o,n)},p:m,d(e){e&&$(o)}}}function we(l){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ve(l){O(l);let t,o;return t=new se({props:{content:l[16],language:l[2]?"json":"text",copyIconTitle:q("common.copy-icon-title"),copySuccessIconTitle:q("common.copy-success-icon-title")}}),{c(){w(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){y(t,e,n),o=!0},p(e,n){O(e);const r={};n&2&&(r.content=e[16]),n&4&&(r.language=e[2]?"json":"text"),t.$set(r)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){g(t.$$.fragment,e),o=!1},d(e){I(t,e)}}}function ye(l){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ie(l){let t,o,e,n,r=q("workflows.no-workers-failure-message")+"",s,i;return o=new ce({}),{c(){t=j("div"),w(o.$$.fragment),e=L(),n=j("p"),s=W(r),this.h()},l(a){t=C(a,"DIV",{class:!0});var u=S(t);v(o.$$.fragment,u),e=Q(u),n=C(u,"P",{});var k=S(n);s=z(k,r),k.forEach($),u.forEach($),this.h()},h(){V(t,"class","text-center")},m(a,u){b(a,t,u),y(o,t,null),P(t,e),P(t,n),P(n,s),i=!0},p:m,i(a){i||(_(o.$$.fragment,a),i=!0)},o(a){g(o.$$.fragment,a),i=!1},d(a){a&&$(t),I(o)}}}function qe(l){let t,o,e={ctx:l,current:null,token:null,hasCatch:!0,pending:Ie,then:he,catch:ge,value:14,error:20,blocks:[,,,]};return R(l[3],e),{c(){t=j("section"),e.block.c()},l(n){t=C(n,"SECTION",{});var r=S(t);e.block.l(r),r.forEach($)},m(n,r){b(n,t,r),e.block.m(t,e.anchor=null),e.mount=()=>t,e.anchor=null,o=!0},p(n,[r]){l=n,X(e,l,r)},i(n){o||(_(e.block),o=!0)},o(n){for(let r=0;r<3;r+=1){const s=e.blocks[r];g(s)}o=!1},d(n){n&&$(t),e.block.d(),e.token=null,e=null}}}let Ee=!1;function Te(l,t,o){let e,n;U(l,$e,c=>o(8,e=c)),U(l,Y,c=>o(9,n=c));const{namespace:r,workflow:s,run:i}=n.params,a={id:s,runId:i};let u,k=me({namespace:r,workflow:a}).then(c=>(o(0,u=u||c[0]),c)),h;const E=c=>{var f;o(1,h=pe({namespace:r,workflow:a,queryType:c},(f=n.data)===null||f===void 0?void 0:f.settings,e==null?void 0:e.accessToken))};let T=!0;function N(c){u=c,o(0,u)}const F=()=>E(u),p=()=>o(2,T=!T);return l.$$.update=()=>{l.$$.dirty&1&&u&&E(u)},[u,h,T,k,E,N,F,p]}class je extends J{constructor(t){super(),K(this,t,Te,qe,M,{})}}function Ce(l){let t,o,e,n;return t=new re({props:{title:`${q("workflows.queries-tab")} | ${l[1]}`,url:l[0].url.href}}),e=new je({}),{c(){w(t.$$.fragment),o=L(),w(e.$$.fragment)},l(r){v(t.$$.fragment,r),o=Q(r),v(e.$$.fragment,r)},m(r,s){y(t,r,s),b(r,o,s),y(e,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.url=r[0].url.href),t.$set(i)},i(r){n||(_(t.$$.fragment,r),_(e.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),g(e.$$.fragment,r),n=!1},d(r){I(t,r),r&&$(o),I(e,r)}}}function Se(l,t,o){let e;U(l,Y,r=>o(0,e=r));const n=e.params.workflow;return[e,n]}class Oe extends J{constructor(t){super(),K(this,t,Se,Ce,M,{})}}export{Oe as component};
