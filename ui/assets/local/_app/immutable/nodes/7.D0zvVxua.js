import{s as me,e as j,a as L,t as z,b as Q,d as J,g as $,h as O,f as G,j as Y,k as V,l as q,n as ae,c as K,v as x,ac as xe,_ as oe,$ as le,a3 as et,w as Z,x as ce,y as tt,Q as rt,ad as Te,J as ot,p as nt,u as lt,q as st,r as ft}from"../chunks/scheduler.yuwC4fMQ.js";import{S as pe,i as _e,c as P,a as S,m as T,t as g,b as k,d as W,h as se,g as te,e as re,f as at}from"../chunks/index.m6evPz-M.js";import{p as Pe}from"../chunks/stores.71GwZHiS.js";import{L as Se}from"../chunks/link.HSpNvPB6.js";import{t as R}from"../chunks/translate.eu_ZgPaL.js";import{a as it}from"../chunks/workflows.2Srqafn1.js";import{e as Re,b as ue,o as ke,p as be,c as ve,q as Ie}from"../chunks/route-for.u6Tu63cZ.js";import{L as $t}from"../chunks/loading.zgfbl5xF.js";import{a as ut}from"../chunks/index.VnKdIPSl.js";import{T as kt}from"../chunks/toggle-switch.gTAMbkvT.js";import{T as We}from"../chunks/tooltip.dxR0H6jA.js";import{b as Ee,a as ye}from"../chunks/event-view.8km4jhZ2.js";import{e as De}from"../chunks/each.oHGYpoql.js";import{C as bt,T as vt,w as It,a as Et}from"../chunks/workflow-terminate-enabled.1DuphI3R.js";import{w as ct}from"../chunks/entry.R3FZ5YDz.js";import{C as Ct}from"../chunks/checkbox.L264dkNW.js";import{I as mt}from"../chunks/input.bb0PiJdu.js";import{M as pt}from"../chunks/modal.EIZe63Xv.js";import{R as At,a as Rt}from"../chunks/radio-input.z9usAQI8.js";import{R as $e}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as Dt,h as Pt,i as St}from"../chunks/workflow-service.J2FvimxI.js";import{r as _t,e as Ce,t as qe,i as Tt}from"../chunks/events.kBQNqlok.js";import{p as Wt}from"../chunks/persist-store.iuyrXC9C.js";import{i as dt}from"../chunks/is-network-error.Twd04qWr.js";import{C as Vt}from"../chunks/code-block.mlQo6hFR.js";import{t as Mt}from"../chunks/toaster.dH0edK_b.js";import{B as yt}from"../chunks/button.v-l5rG3g.js";import{B as Ve}from"../chunks/badge.ejBwZ8dR.js";import{I as qt}from"../chunks/icon.5C_lPgq9.js";import{c as Nt}from"../chunks/menu.9RZGzIp1.js";import{M as Ft}from"../chunks/menu-divider.dja-D4ii.js";import{S as Bt}from"../chunks/split-button.p36lA3Py.js";import{c as Ht}from"../chunks/core-user.P-Ns6TPq.js";import{s as Ut}from"../chunks/settings.T3WfW6JC.js";import{r as fe,w as Ae,i as Lt}from"../chunks/workflow-run.d-UFliiI.js";import{w as Ot}from"../chunks/write-actions-are-allowed.H-0bvL_2.js";import{W as jt}from"../chunks/workflow-status.EQ2U8CBI.js";import{A as gt}from"../chunks/alert.AplxncRT.js";import{C as Ne,g as Qt,a as Jt}from"../chunks/pollers-service.H-kbAJXY.js";import{C as Yt}from"../chunks/index.xQciSU2K.js";import{a as zt,b as Gt,c as he}from"../chunks/tab.BBJn0mOW.js";import{h as Kt}from"../chunks/has.o3WpJEEw.js";import{f as Xt,b as Zt,h as xt}from"../chunks/task-queue-compatibility.52mtxoi2.js";import{h as er,d as tr}from"../chunks/decode-payload.5qMeJnMC.js";import{a as rr}from"../chunks/events-service.Uxmdl4a3.js";import{a as or}from"../chunks/auth-user.PFKzWA9_.js";function nr(n){let r=R("workflows.back-to-workflows")+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p:x,d(t){t&&$(e)}}}function lr(n){var M,D;let r,e,t,o,l,s,a=(((M=n[0])==null?void 0:M.statusCode)??"500")+"",f,u,m,i,c,_,d=(((D=n[0])==null?void 0:D.statusText)??"")+"",h,I;return t=new Se({props:{href:`${Re({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[nr]},$$scope:{ctx:n}}}),{c(){r=j("header"),e=j("div"),P(t.$$.fragment),o=L(),l=j("div"),s=j("h1"),f=z(a),u=L(),m=j("p"),i=z(n[1]),c=L(),_=j("p"),h=z(d),this.h()},l(b){r=Q(b,"HEADER",{class:!0});var C=J(r);e=Q(C,"DIV",{class:!0});var y=J(e);S(t.$$.fragment,y),y.forEach($),C.forEach($),o=O(b),l=Q(b,"DIV",{class:!0});var v=J(l);s=Q(v,"H1",{class:!0});var w=J(s);f=G(w,a),w.forEach($),u=O(v),m=Q(v,"P",{class:!0});var N=J(m);i=G(N,n[1]),N.forEach($),c=O(v),_=Q(v,"P",{class:!0});var B=J(_);h=G(B,d),B.forEach($),v.forEach($),this.h()},h(){Y(e,"class","mb-4 block"),Y(r,"class","mb-4 flex flex-col gap-1"),Y(s,"class","leading-0 text-[12rem] font-semibold"),Y(m,"class","-mt-12 text-lg"),Y(_,"class","text-2xl font-bold text-red-700"),Y(l,"class","text-center align-middle")},m(b,C){V(b,r,C),q(r,e),T(t,e,null),V(b,o,C),V(b,l,C),q(l,s),q(s,f),q(l,u),q(l,m),q(m,i),q(l,c),q(l,_),q(_,h),I=!0},p(b,[C]){var v,w;const y={};C&12&&(y.href=`${Re({namespace:b[2]})}?${b[3]}`),C&32&&(y.$$scope={dirty:C,ctx:b}),t.$set(y),(!I||C&1)&&a!==(a=(((v=b[0])==null?void 0:v.statusCode)??"500")+"")&&ae(f,a),(!I||C&2)&&ae(i,b[1]),(!I||C&1)&&d!==(d=(((w=b[0])==null?void 0:w.statusText)??"")+"")&&ae(h,d)},i(b){I||(g(t.$$.fragment,b),I=!0)},o(b){k(t.$$.fragment,b),I=!1},d(b){b&&($(r),$(o),$(l)),W(t)}}}function sr(n,r,e){let t,o,l,s;K(n,Pe,f=>e(4,l=f)),K(n,it,f=>e(3,s=f));let{error:a}=r;return n.$$set=f=>{"error"in f&&e(0,a=f.error)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{namespace:t}=l.params,t),n.$$.dirty&1&&e(1,o=a.statusCode===404?R("workflows.workflow-404-title"):R("workflows.workflow-error-title"))},[a,o,t,s,l]}class fr extends pe{constructor(r){super(),_e(this,r,sr,lr,me,{error:0})}}function ar(n){let r,e;return r=new kt({props:{label:R("common.auto-refresh"),labelPosition:"left",id:"autorefresh",checked:n[1]}}),r.$on("change",function(){xe(n[0])&&n[0].apply(this,arguments)}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){n=t;const l={};o&2&&(l.checked=n[1]),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function ir(n){let r,e;return r=new We({props:{bottomLeft:!0,text:R("common.auto-refresh-tooltip",{interval:"15"}),$$slots:{default:[ar]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,[o]){const l={};o&11&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function ur(n,r,e){let t,o;K(n,Ee,s=>e(2,o=s));let{onChange:l}=r;return n.$$set=s=>{"onChange"in s&&e(0,l=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&e(1,t=o==="on")},[l,t,o]}class cr extends pe{constructor(r){super(),_e(this,r,ur,ir,me,{onChange:0})}}const wt=Wt("resetWorkflows",{});function Fe(n,r,e){const t=n.slice();return t[18]=r[e],t}function mr(n){let r,e=R("workflows.reset-modal-title")+"",t;return{c(){r=j("h3"),t=z(e),this.h()},l(o){r=Q(o,"H3",{slot:!0});var l=J(r);t=G(l,e),l.forEach($),this.h()},h(){Y(r,"slot","title")},m(o,l){V(o,r,l),q(r,t)},p:x,d(o){o&&$(r)}}}function Be(n){let r,e;return r=new Rt({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o&64&&(l.id="reset-event-"+t[18].id),o&64&&(l.value=t[18].id),o&64&&(l.label=t[18].id+" - "+t[18].eventType),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function pr(n){let r,e,t=De(n[6]),o=[];for(let s=0;s<t.length;s+=1)o[s]=Be(Fe(n,t,s));const l=s=>k(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=ce()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);r=ce()},m(s,a){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,a);V(s,r,a),e=!0},p(s,a){if(a&64){t=De(s[6]);let f;for(f=0;f<t.length;f+=1){const u=Fe(s,t,f);o[f]?(o[f].p(u,a),g(o[f],1)):(o[f]=Be(u),o[f].c(),g(o[f],1),o[f].m(r.parentNode,r))}for(te(),f=t.length;f<o.length;f+=1)l(f);re()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)g(o[a]);e=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)k(o[a]);e=!1},d(s){s&&$(r),tt(o,s)}}}function _r(n){let r,e,t,o,l,s,a,f;e=new At({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:R("workflows.reset-event-radio-group-description"),$$slots:{default:[pr]},$$scope:{ctx:n}}}),o=new Ct({props:{id:"reset-reapply-type-checkbox",checked:n[4]===$e.Signal,label:R("workflows.reset-reapply-type-label")}}),o.$on("change",n[9]);function u(i){n[13](i)}let m={id:"reset-reason",label:R("common.reason")};return n[5]!==void 0&&(m.value=n[5]),s=new mt({props:m}),oe.push(()=>se(s,"value",u)),{c(){r=j("div"),P(e.$$.fragment),t=L(),P(o.$$.fragment),l=L(),P(s.$$.fragment),this.h()},l(i){r=Q(i,"DIV",{class:!0});var c=J(r);S(e.$$.fragment,c),t=O(c),S(o.$$.fragment,c),l=O(c),S(s.$$.fragment,c),c.forEach($),this.h()},h(){Y(r,"class","flex w-full flex-col gap-4")},m(i,c){V(i,r,c),T(e,r,null),q(r,t),T(o,r,null),q(r,l),T(s,r,null),f=!0},p(i,c){const _={};c&2097216&&(_.$$scope={dirty:c,ctx:i}),e.$set(_);const d={};c&16&&(d.checked=i[4]===$e.Signal),o.$set(d);const h={};!a&&c&32&&(a=!0,h.value=i[5],le(()=>a=!1)),s.$set(h)},i(i){f||(g(e.$$.fragment,i),g(o.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){k(e.$$.fragment,i),k(o.$$.fragment,i),k(s.$$.fragment,i),f=!1},d(i){i&&$(r),W(e),W(o),W(s)}}}function dr(n){let r,e,t,o;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:R("common.confirm"),cancelText:R("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[_r],title:[mr]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),r=new pt({props:a}),oe.push(()=>se(r,"error",l)),oe.push(()=>se(r,"open",s)),r.$on("confirmModal",n[10]),r.$on("cancelModal",n[8]),{c(){P(r.$$.fragment)},l(f){S(r.$$.fragment,f)},m(f,u){T(r,f,u),o=!0},p(f,[u]){const m={};u&8&&(m.loading=f[3]),u&2097264&&(m.$$scope={dirty:u,ctx:f}),!e&&u&4&&(e=!0,m.error=f[2],le(()=>e=!1)),!t&&u&1&&(t=!0,m.open=f[0],le(()=>t=!1)),r.$set(m)},i(f){o||(g(r.$$.fragment,f),o=!0)},o(f){k(r.$$.fragment,f),o=!1},d(f){W(r,f)}}}function gr(n,r,e){let t,o=x,l=()=>(o(),o=et(i,w=>e(16,t=w)),i),s,a;K(n,_t,w=>e(6,a=w)),n.$$.on_destroy.push(()=>o());let{open:f}=r,{workflow:u}=r,{namespace:m}=r,{refresh:i}=r;l();let c="",_=!1,d,h=ct("");K(n,h,w=>e(17,s=w));let I;const M=()=>{e(0,f=!1),e(4,d=$e.Signal),Z(h,s="",s),e(5,I="")},D=w=>{e(4,d=w.detail.checked?$e.Signal:$e.None)},b=async()=>{e(2,c=""),e(3,_=!0);try{const w=await Dt({namespace:m,workflow:u,eventId:s,reason:I,reapplyType:d});w&&w.runId&&wt.update(N=>({...N,[u.runId]:w.runId})),Z(i,t=Date.now(),t),M()}catch(w){e(2,c=dt(w)?w.message:R("common.unknown-error"))}finally{e(3,_=!1)}M()};function C(w){I=w,e(5,I)}function y(w){c=w,e(2,c)}function v(w){f=w,e(0,f)}return n.$$set=w=>{"open"in w&&e(0,f=w.open),"workflow"in w&&e(11,u=w.workflow),"namespace"in w&&e(12,m=w.namespace),"refresh"in w&&l(e(1,i=w.refresh))},[f,i,c,_,d,I,a,h,M,D,b,u,m,C,y,v]}class wr extends pe{constructor(r){super(),_e(this,r,gr,dr,me,{open:0,workflow:11,namespace:12,refresh:1})}}function hr(n){let r,e=R("workflows.signal-modal-title")+"",t;return{c(){r=j("h3"),t=z(e),this.h()},l(o){r=Q(o,"H3",{slot:!0});var l=J(r);t=G(l,e),l.forEach($),this.h()},h(){Y(r,"slot","title")},m(o,l){V(o,r,l),q(r,t)},p:x,d(o){o&&$(r)}}}function $r(n){let r,e,t,o,l,s,a=R("workflows.signal-payload-input-label")+"",f,u,m,i=R("workflows.signal-payload-input-label-hint")+"",c,_,d,h;function I(b){n[12](b)}let M={id:"signal-name",label:R("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(M.value=n[4]),e=new mt({props:M}),oe.push(()=>se(e,"value",I));let D={class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1};return d=new Vt({props:D}),n[13](d),d.$on("change",n[9]),{c(){r=j("div"),P(e.$$.fragment),o=L(),l=j("div"),s=j("span"),f=z(a),u=L(),m=j("span"),c=z(i),_=L(),P(d.$$.fragment),this.h()},l(b){r=Q(b,"DIV",{slot:!0,class:!0});var C=J(r);S(e.$$.fragment,C),o=O(C),l=Q(C,"DIV",{});var y=J(l);s=Q(y,"SPAN",{class:!0});var v=J(s);f=G(v,a),v.forEach($),u=O(y),m=Q(y,"SPAN",{class:!0});var w=J(m);c=G(w,i),w.forEach($),_=O(y),S(d.$$.fragment,y),y.forEach($),C.forEach($),this.h()},h(){Y(s,"class","font-secondary text-sm font-medium"),Y(m,"class","font-secondary text-xs font-light italic"),Y(r,"slot","content"),Y(r,"class","flex flex-col gap-4")},m(b,C){V(b,r,C),T(e,r,null),q(r,o),q(r,l),q(l,s),q(s,f),q(l,u),q(l,m),q(m,c),q(l,_),T(d,l,null),h=!0},p(b,C){const y={};!t&&C&16&&(t=!0,y.value=b[4],le(()=>t=!1)),e.$set(y);const v={};C&32&&(v.content=b[5]),d.$set(v)},i(b){h||(g(e.$$.fragment,b),g(d.$$.fragment,b),h=!0)},o(b){k(e.$$.fragment,b),k(d.$$.fragment,b),h=!1},d(b){b&&$(r),W(e),n[13](null),W(d)}}}function kr(n){let r,e,t,o;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:R("common.submit"),cancelText:R("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[$r],title:[hr]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),r=new pt({props:a}),oe.push(()=>se(r,"error",l)),oe.push(()=>se(r,"open",s)),r.$on("cancelModal",n[7]),r.$on("confirmModal",n[8]),{c(){P(r.$$.fragment)},l(f){S(r.$$.fragment,f)},m(f,u){T(r,f,u),o=!0},p(f,[u]){const m={};u&8&&(m.loading=f[3]),u&16&&(m.confirmDisabled=!f[4]),u&131184&&(m.$$scope={dirty:u,ctx:f}),!e&&u&4&&(e=!0,m.error=f[2],le(()=>e=!1)),!t&&u&1&&(t=!0,m.open=f[0],le(()=>t=!1)),r.$set(m)},i(f){o||(g(r.$$.fragment,f),o=!0)},o(f){k(r.$$.fragment,f),o=!1},d(f){W(r,f)}}}function br(n,r,e){let t,o=x,l=()=>(o(),o=et(u,v=>e(16,t=v)),u);n.$$.on_destroy.push(()=>o());let{open:s}=r,{workflow:a}=r,{namespace:f}=r,{refresh:u}=r;l();let m="",i=!1,c="",_="",d;const h=()=>{e(0,s=!1),e(5,_=""),e(4,c=""),d==null||d.resetView(_)},I=async()=>{e(2,m=""),e(3,i=!0);try{await Pt({namespace:f,workflow:a,input:_,name:c}),Z(u,t=Date.now(),t),Mt.push({message:R("workflows.signal-success"),id:"workflow-signal-success-toast"}),h()}catch(v){e(2,m=dt(v)?v.message:R("common.unknown-error"))}finally{e(3,i=!1)}},M=v=>{e(5,_=v.detail)};function D(v){c=v,e(4,c)}function b(v){oe[v?"unshift":"push"](()=>{d=v,e(6,d)})}function C(v){m=v,e(2,m)}function y(v){s=v,e(0,s)}return n.$$set=v=>{"open"in v&&e(0,s=v.open),"workflow"in v&&e(10,a=v.workflow),"namespace"in v&&e(11,f=v.namespace),"refresh"in v&&l(e(1,u=v.refresh))},[s,u,m,i,c,_,d,h,I,M,a,f,D,b,C,y]}class vr extends pe{constructor(r){super(),_e(this,r,br,kr,me,{open:0,workflow:10,namespace:11,refresh:1})}}const Ir=n=>!n.disableWriteActions&&!n.workflowResetDisabled,Er=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function He(n,r,e){const t=n.slice();return t[29]=r[e].onClick,t[30]=r[e].destructive,t[31]=r[e].label,t[32]=r[e].allowed,t[33]=r[e].testId,t[34]=r[e].tooltip,t}function Cr(n){let r,e;return r=new We({props:{bottomRight:!0,width:200,text:n[4],hide:n[5],$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o[0]&16&&(l.text=t[4]),o[0]&32&&(l.hide=t[5]),o[0]&288|o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Ar(n){let r,e;return r=new Bt({props:{id:"workflow-actions",position:"right",disabled:n[11],primaryActionDisabled:!n[12]||n[2],label:R("workflows.request-cancellation"),menuLabel:R("workflows.workflow-actions"),$$slots:{default:[Tr]},$$scope:{ctx:n}}}),r.$on("click",n[23]),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o[0]&2048&&(l.disabled=t[11]),o[0]&4100&&(l.primaryActionDisabled=!t[12]||t[2]),o[0]&1024|o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Rr(n){let r=R("workflows.reset")+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p:x,d(t){t&&$(e)}}}function Dr(n){let r,e;return r=new yt({props:{"aria-label":R("workflows.reset"),disabled:!n[5],variant:"primary",$$slots:{default:[Rr]},$$scope:{ctx:n}}}),r.$on("click",n[24]),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o[0]&32&&(l.disabled=!t[5]),o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Ue(n){let r,e;return r=new Ft({}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Pr(n){let r=n[31]+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p(t,o){o[0]&1024&&r!==(r=t[31]+"")&&ae(e,r)},d(t){t&&$(e)}}}function Sr(n){let r,e,t;return r=new Nt({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[Pr]},$$scope:{ctx:n}}}),r.$on("click",function(){xe(n[29])&&n[29].apply(this,arguments)}),{c(){P(r.$$.fragment),e=L()},l(o){S(r.$$.fragment,o),e=O(o)},m(o,l){T(r,o,l),V(o,e,l),t=!0},p(o,l){n=o;const s={};l[0]&1024&&(s.destructive=n[30]),l[0]&1024&&(s.disabled=!n[32]),l[0]&1024&&(s["data-testid"]=n[33]),l[0]&1024|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),r.$set(s)},i(o){t||(g(r.$$.fragment,o),t=!0)},o(o){k(r.$$.fragment,o),t=!1},d(o){o&&$(e),W(r,o)}}}function Le(n){let r,e,t,o=n[30]&&Ue();return e=new We({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[Sr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),r=L(),P(e.$$.fragment)},l(l){o&&o.l(l),r=O(l),S(e.$$.fragment,l)},m(l,s){o&&o.m(l,s),V(l,r,s),T(e,l,s),t=!0},p(l,s){l[30]?o?s[0]&1024&&g(o,1):(o=Ue(),o.c(),g(o,1),o.m(r.parentNode,r)):o&&(te(),k(o,1,1,()=>{o=null}),re());const a={};s[0]&1024&&(a.text=l[34]),s[0]&1024&&(a.hide=!l[34]),s[0]&1024|s[1]&64&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(g(o),g(e.$$.fragment,l),t=!0)},o(l){k(o),k(e.$$.fragment,l),t=!1},d(l){l&&$(r),o&&o.d(l),W(e,l)}}}function Tr(n){let r,e,t=De(n[10]),o=[];for(let s=0;s<t.length;s+=1)o[s]=Le(He(n,t,s));const l=s=>k(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=ce()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);r=ce()},m(s,a){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,a);V(s,r,a),e=!0},p(s,a){if(a[0]&1024){t=De(s[10]);let f;for(f=0;f<t.length;f+=1){const u=He(s,t,f);o[f]?(o[f].p(u,a),g(o[f],1)):(o[f]=Le(u),o[f].c(),g(o[f],1),o[f].m(r.parentNode,r))}for(te(),f=t.length;f<o.length;f+=1)l(f);re()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)g(o[a]);e=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)k(o[a]);e=!1},d(s){s&&$(r),tt(o,s)}}}function Wr(n){let r,e,t,o,l,s,a,f,u,m,i,c,_,d,h;const I=[Ar,Cr],M=[];function D(p,H){return p[3]?0:1}r=D(n),e=M[r]=I[r](n);function b(p){n[25](p)}let C={refresh:fe,workflow:n[0],namespace:n[1]};n[8]!==void 0&&(C.open=n[8]),o=new wr({props:C}),oe.push(()=>se(o,"open",b));function y(p){n[26](p)}let v={refresh:fe,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(v.open=n[9]),a=new vr({props:v}),oe.push(()=>se(a,"open",y));function w(p){n[27](p)}let N={refresh:fe,workflow:n[0],namespace:n[1]};n[6]!==void 0&&(N.open=n[6]),m=new bt({props:N}),oe.push(()=>se(m,"open",w));function B(p){n[28](p)}let U={refresh:fe,workflow:n[0],namespace:n[1]};return n[7]!==void 0&&(U.open=n[7]),_=new vt({props:U}),oe.push(()=>se(_,"open",B)),{c(){e.c(),t=L(),P(o.$$.fragment),s=L(),P(a.$$.fragment),u=L(),P(m.$$.fragment),c=L(),P(_.$$.fragment)},l(p){e.l(p),t=O(p),S(o.$$.fragment,p),s=O(p),S(a.$$.fragment,p),u=O(p),S(m.$$.fragment,p),c=O(p),S(_.$$.fragment,p)},m(p,H){M[r].m(p,H),V(p,t,H),T(o,p,H),V(p,s,H),T(a,p,H),V(p,u,H),T(m,p,H),V(p,c,H),T(_,p,H),h=!0},p(p,H){let X=r;r=D(p),r===X?M[r].p(p,H):(te(),k(M[X],1,1,()=>{M[X]=null}),re(),e=M[r],e?e.p(p,H):(e=M[r]=I[r](p),e.c()),g(e,1),e.m(t.parentNode,t));const A={};H[0]&1&&(A.workflow=p[0]),H[0]&2&&(A.namespace=p[1]),!l&&H[0]&256&&(l=!0,A.open=p[8],le(()=>l=!1)),o.$set(A);const E={};H[0]&1&&(E.workflow=p[0]),H[0]&2&&(E.namespace=p[1]),!f&&H[0]&512&&(f=!0,E.open=p[9],le(()=>f=!1)),a.$set(E);const F={};H[0]&1&&(F.workflow=p[0]),H[0]&2&&(F.namespace=p[1]),!i&&H[0]&64&&(i=!0,F.open=p[6],le(()=>i=!1)),m.$set(F);const ee={};H[0]&1&&(ee.workflow=p[0]),H[0]&2&&(ee.namespace=p[1]),!d&&H[0]&128&&(d=!0,ee.open=p[7],le(()=>d=!1)),_.$set(ee)},i(p){h||(g(e),g(o.$$.fragment,p),g(a.$$.fragment,p),g(m.$$.fragment,p),g(_.$$.fragment,p),h=!0)},o(p){k(e),k(o.$$.fragment,p),k(a.$$.fragment,p),k(m.$$.fragment,p),k(_.$$.fragment,p),h=!1},d(p){p&&($(t),$(s),$(u),$(c)),M[r].d(p),W(o,p),W(a,p),W(m,p),W(_,p)}}}function Vr(n,r,e){let t,o,l,s,a,f,u,m,i;K(n,_t,F=>e(21,m=F)),K(n,Pe,F=>e(22,i=F));var c,_,d;let{workflow:h}=r,{namespace:I}=r,{cancelInProgress:M}=r,{isRunning:D}=r,b=!1,C=!1,y=!1,v=!1,w,N,B=Ht();K(n,B,F=>e(20,u=F));const U=()=>e(6,b=!0),p=()=>e(8,y=!0);function H(F){y=F,e(8,y),e(5,a),e(4,w),e(18,o),e(17,l),e(19,s),e(0,h),e(16,d),e(21,m),e(14,c),e(15,_),e(22,i)}function X(F){v=F,e(9,v),e(5,a),e(4,w),e(18,o),e(17,l),e(19,s),e(0,h),e(16,d),e(21,m),e(14,c),e(15,_),e(22,i)}function A(F){b=F,e(6,b)}function E(F){C=F,e(7,C),e(5,a),e(4,w),e(18,o),e(17,l),e(19,s),e(0,h),e(16,d),e(21,m),e(14,c),e(15,_),e(22,i)}return n.$$set=F=>{"workflow"in F&&e(0,h=F.workflow),"namespace"in F&&e(1,I=F.namespace),"cancelInProgress"in F&&e(2,M=F.cancelInProgress),"isRunning"in F&&e(3,D=F.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&e(12,t=It(i.data.settings)),n.$$.dirty[0]&4194304&&e(18,o=Er(i.data.settings)),n.$$.dirty[0]&4194304&&e(17,l=Et(i.data.settings)),n.$$.dirty[0]&4194304&&e(19,s=Ir(i.data.settings)),n.$$.dirty[0]&2670593&&(s?s&&(e(14,c=h==null?void 0:h.pendingChildren)===null||c===void 0?void 0:c.length)>0?e(4,w=R("workflows.reset-disabled-pending-children")):s&&(e(15,_=h==null?void 0:h.pendingChildren)===null||_===void 0?void 0:_.length)===0&&m.length===0&&e(4,w=R("workflows.reset-disabled-no-events")):e(4,w=R("workflows.reset-disabled"))),n.$$.dirty[0]&2686977&&e(5,a=s&&(e(16,d=h==null?void 0:h.pendingChildren)===null||d===void 0?void 0:d.length)===0&&m.length>0),n.$$.dirty[0]&393264&&e(10,N=[{label:R("workflows.reset"),onClick:()=>e(8,y=!0),testId:"reset-button",allowed:a,tooltip:a?"":w},{label:R("workflows.signal"),onClick:()=>e(9,v=!0),testId:"signal-button",allowed:o,tooltip:o?"":R("workflows.signal-disabled")},{label:R("workflows.terminate"),onClick:()=>e(7,C=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":R("workflows.terminate-disabled")}]),n.$$.dirty[0]&1048578&&e(11,f=u.namespaceWriteDisabled(I)||!Ot(Ut))},[h,I,M,D,w,a,b,C,y,v,N,f,t,B,c,_,d,l,o,s,u,m,i,U,p,H,X,A,E]}class Mr extends pe{constructor(r){super(),_e(this,r,Vr,Wr,me,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}const yr=(n,r)=>{var o;const e=n==="Running",t=(o=r==null?void 0:r.end)==null?void 0:o.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&t},Oe=n=>{const r=n==null?void 0:n.indexOf("?");return r>-1?n.slice(0,r):n},ne=(n,r,e=!1)=>{const t=Oe(n).split("/"),o=Oe(r).split("/");if(e&&t.length!==o.length)return!1;for(let l=0;l<t.length;l++){const s=t[l],a=o[l];if(s!==a)return!1}return!0};function qr(n){let r=(n[14]?R("common.workflows"):R("workflows.back-to-workflows"))+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p(t,o){o&16384&&r!==(r=(t[14]?R("common.workflows"):R("workflows.back-to-workflows"))+"")&&ae(e,r)},d(t){t&&$(e)}}}function je(n){let r,e;return r=new Se({props:{href:ue({...n[13]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Nr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o&8192&&(l.href=ue({...t[13]})),o&268435460&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Nr(n){var t;let r=((t=n[2])==null?void 0:t.runId)+"",e;return{c(){e=z(r)},l(o){e=G(o,r)},m(o,l){V(o,e,l)},p(o,l){var s;l&4&&r!==(r=((s=o[2])==null?void 0:s.runId)+"")&&ae(e,r)},d(o){o&&$(e)}}}function Qe(n){let r,e,t=R("workers.last-used-version")+"",o,l,s,a,f,u=R("workers.next-version")+"",m,i,c;return l=new Ne({props:{defaultVersion:n[1]===n[7]||n[1]===n[8],active:n[1]===n[8],buildId:n[1],$$slots:{"default-worker":[Br],"overall-default-worker":[Fr]},$$scope:{ctx:n}}}),i=new Ne({props:{defaultVersion:!!n[7],active:n[7]===n[8],buildId:n[7],$$slots:{"default-worker":[Ur],"overall-default-worker":[Hr]},$$scope:{ctx:n}}}),{c(){r=j("p"),e=j("span"),o=z(t),P(l.$$.fragment),s=L(),a=j("p"),f=j("span"),m=z(u),P(i.$$.fragment),this.h()},l(_){r=Q(_,"P",{class:!0});var d=J(r);e=Q(d,"SPAN",{});var h=J(e);o=G(h,t),h.forEach($),S(l.$$.fragment,d),d.forEach($),s=O(_),a=Q(_,"P",{class:!0});var I=J(a);f=Q(I,"SPAN",{});var M=J(f);m=G(M,u),M.forEach($),S(i.$$.fragment,I),I.forEach($),this.h()},h(){Y(r,"class","flex items-center gap-1"),Y(a,"class","flex items-center gap-1")},m(_,d){V(_,r,d),q(r,e),q(e,o),T(l,r,null),V(_,s,d),V(_,a,d),q(a,f),q(f,m),T(i,a,null),c=!0},p(_,d){const h={};d&386&&(h.defaultVersion=_[1]===_[7]||_[1]===_[8]),d&258&&(h.active=_[1]===_[8]),d&2&&(h.buildId=_[1]),d&268435714&&(h.$$scope={dirty:d,ctx:_}),l.$set(h);const I={};d&128&&(I.defaultVersion=!!_[7]),d&384&&(I.active=_[7]===_[8]),d&128&&(I.buildId=_[7]),d&268435840&&(I.$$scope={dirty:d,ctx:_}),i.$set(I)},i(_){c||(g(l.$$.fragment,_),g(i.$$.fragment,_),c=!0)},o(_){k(l.$$.fragment,_),k(i.$$.fragment,_),c=!1},d(_){_&&($(r),$(s),$(a)),W(l),W(i)}}}function Je(n){let r=R("workers.overall")+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p:x,d(t){t&&$(e)}}}function Fr(n){let r,e=n[1]===n[8]&&Je();return{c(){e&&e.c(),r=ce()},l(t){e&&e.l(t),r=ce()},m(t,o){e&&e.m(t,o),V(t,r,o)},p(t,o){t[1]===t[8]?e?e.p(t,o):(e=Je(),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&$(r),e&&e.d(t)}}}function Br(n){let r=R("workers.default")+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p:x,d(t){t&&$(e)}}}function Ye(n){let r=R("workers.overall")+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p:x,d(t){t&&$(e)}}}function Hr(n){let r,e=n[7]===n[8]&&Ye();return{c(){e&&e.c(),r=ce()},l(t){e&&e.l(t),r=ce()},m(t,o){e&&e.m(t,o),V(t,r,o)},p(t,o){t[7]===t[8]?e?e.p(t,o):(e=Ye(),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&$(r),e&&e.d(t)}}}function Ur(n){let r=R("workers.default")+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p:x,d(t){t&&$(e)}}}function ze(n){let r,e;return r=new cr({props:{onChange:n[17]}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p:x,i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Ge(n){let r,e,t,o;return e=new gt({props:{bold:!0,icon:"info",intent:"info",title:R("workflows.cancel-request-sent"),$$slots:{default:[Lr]},$$scope:{ctx:n}}}),{c(){r=j("div"),P(e.$$.fragment),this.h()},l(l){r=Q(l,"DIV",{class:!0});var s=J(r);S(e.$$.fragment,s),s.forEach($),this.h()},h(){Y(r,"class","mb-4")},m(l,s){V(l,r,s),T(e,r,null),o=!0},p(l,s){const a={};s&268435456&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){o||(g(e.$$.fragment,l),l&&(t||ot(()=>{t=at(r,ut,{duration:200,delay:100}),t.start()})),o=!0)},o(l){k(e.$$.fragment,l),o=!1},d(l){l&&$(r),W(e)}}}function Lr(n){let r=R("workflows.cancel-request-sent-description")+"",e;return{c(){e=z(r)},l(t){e=G(t,r)},m(t,o){V(t,e,o)},p:x,d(t){t&&$(e)}}}function Ke(n){let r,e,t,o;return e=new gt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:R("workflows.reset-success-alert-title"),$$slots:{default:[jr]},$$scope:{ctx:n}}}),{c(){r=j("div"),P(e.$$.fragment),this.h()},l(l){r=Q(l,"DIV",{class:!0});var s=J(r);S(e.$$.fragment,s),s.forEach($),this.h()},h(){Y(r,"class","mb-4")},m(l,s){V(l,r,s),T(e,r,null),o=!0},p(l,s){const a={};s&268435505&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){o||(g(e.$$.fragment,l),l&&(t||ot(()=>{t=at(r,ut,{duration:200,delay:100}),t.start()})),o=!0)},o(l){k(e.$$.fragment,l),o=!1},d(l){l&&$(r),W(e)}}}function Or(n){let r;return{c(){r=z("here")},l(e){r=G(e,"here")},m(e,t){V(e,r,t)},d(e){e&&$(r)}}}function jr(n){var l,s,a,f;let r,e,t,o;return e=new Se({props:{href:ue({namespace:n[0],workflow:(s=(l=n[4])==null?void 0:l.workflow)==null?void 0:s.id,run:n[5][(f=(a=n[4])==null?void 0:a.workflow)==null?void 0:f.runId]}),$$slots:{default:[Or]},$$scope:{ctx:n}}}),{c(){r=z("You can find the resulting Workflow Execution "),P(e.$$.fragment),t=z(".")},l(u){r=G(u,"You can find the resulting Workflow Execution "),S(e.$$.fragment,u),t=G(u,".")},m(u,m){V(u,r,m),T(e,u,m),V(u,t,m),o=!0},p(u,m){var c,_,d,h;const i={};m&49&&(i.href=ue({namespace:u[0],workflow:(_=(c=u[4])==null?void 0:c.workflow)==null?void 0:_.id,run:u[5][(h=(d=u[4])==null?void 0:d.workflow)==null?void 0:h.runId]})),m&268435456&&(i.$$scope={dirty:m,ctx:u}),e.$set(i)},i(u){o||(g(e.$$.fragment,u),o=!0)},o(u){k(e.$$.fragment,u),o=!1},d(u){u&&($(r),$(t)),W(e,u)}}}function Qr(n){var t;let r=((t=n[2])==null?void 0:t.historyEvents)+"",e;return{c(){e=z(r)},l(o){e=G(o,r)},m(o,l){V(o,e,l)},p(o,l){var s;l&4&&r!==(r=((s=o[2])==null?void 0:s.historyEvents)+"")&&ae(e,r)},d(o){o&&$(e)}}}function Jr(n){let r,e;return r=new Ve({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Qr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o&268435460&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Yr(n){var t,o;let r=((o=(t=n[15])==null?void 0:t.pollers)==null?void 0:o.length)+"",e;return{c(){e=z(r)},l(l){e=G(l,r)},m(l,s){V(l,e,s)},p(l,s){var a,f;s&32768&&r!==(r=((f=(a=l[15])==null?void 0:a.pollers)==null?void 0:f.length)+"")&&ae(e,r)},d(l){l&&$(e)}}}function zr(n){let r,e;return r=new Ve({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Yr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o&268468224&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Xe(n){let r,e;return r=new qt({props:{name:"canceled",width:20,height:20}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Gr(n){var s,a;let r,e=((a=(s=n[2])==null?void 0:s.pendingActivities)==null?void 0:a.length)+"",t,o,l=n[12]&&Xe();return{c(){l&&l.c(),r=L(),t=z(e)},l(f){l&&l.l(f),r=O(f),t=G(f,e)},m(f,u){l&&l.m(f,u),V(f,r,u),V(f,t,u),o=!0},p(f,u){var m,i;f[12]?l?u&4096&&g(l,1):(l=Xe(),l.c(),g(l,1),l.m(r.parentNode,r)):l&&(te(),k(l,1,1,()=>{l=null}),re()),(!o||u&4)&&e!==(e=((i=(m=f[2])==null?void 0:m.pendingActivities)==null?void 0:i.length)+"")&&ae(t,e)},i(f){o||(g(l),o=!0)},o(f){k(l),o=!1},d(f){f&&($(r),$(t)),l&&l.d(f)}}}function Kr(n){let r,e;return r=new Ve({props:{type:n[12]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Gr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o&4096&&(l.type=t[12]?"warning":"blue"),o&268439556&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function Xr(n){let r,e,t,o,l,s,a,f,u,m;return r=new he({props:{label:R("workflows.history-tab"),id:"history-tab",href:ue({...n[13]}),active:ne(n[6].url.pathname,ue({...n[13]})),$$slots:{default:[Jr]},$$scope:{ctx:n}}}),t=new he({props:{label:R("workflows.workers-tab"),id:"workers-tab",href:ke(n[13]),active:ne(n[6].url.pathname,ke(n[13])),$$slots:{default:[zr]},$$scope:{ctx:n}}}),l=new he({props:{label:R("workflows.pending-activities-tab"),id:"pending-activities-tab",href:be(n[13]),active:ne(n[6].url.pathname,be(n[13])),$$slots:{default:[Kr]},$$scope:{ctx:n}}}),a=new he({props:{label:R("workflows.call-stack-tab"),id:"call-stack-tab",href:ve(n[13]),active:ne(n[6].url.pathname,ve(n[13]))}}),u=new he({props:{label:R("workflows.queries-tab"),id:"queries-tab",href:Ie(n[13]),active:ne(n[6].url.pathname,Ie(n[13]))}}),{c(){P(r.$$.fragment),e=L(),P(t.$$.fragment),o=L(),P(l.$$.fragment),s=L(),P(a.$$.fragment),f=L(),P(u.$$.fragment)},l(i){S(r.$$.fragment,i),e=O(i),S(t.$$.fragment,i),o=O(i),S(l.$$.fragment,i),s=O(i),S(a.$$.fragment,i),f=O(i),S(u.$$.fragment,i)},m(i,c){T(r,i,c),V(i,e,c),T(t,i,c),V(i,o,c),T(l,i,c),V(i,s,c),T(a,i,c),V(i,f,c),T(u,i,c),m=!0},p(i,c){const _={};c&8192&&(_.href=ue({...i[13]})),c&8256&&(_.active=ne(i[6].url.pathname,ue({...i[13]}))),c&268435460&&(_.$$scope={dirty:c,ctx:i}),r.$set(_);const d={};c&8192&&(d.href=ke(i[13])),c&8256&&(d.active=ne(i[6].url.pathname,ke(i[13]))),c&268468224&&(d.$$scope={dirty:c,ctx:i}),t.$set(d);const h={};c&8192&&(h.href=be(i[13])),c&8256&&(h.active=ne(i[6].url.pathname,be(i[13]))),c&268439556&&(h.$$scope={dirty:c,ctx:i}),l.$set(h);const I={};c&8192&&(I.href=ve(i[13])),c&8256&&(I.active=ne(i[6].url.pathname,ve(i[13]))),a.$set(I);const M={};c&8192&&(M.href=Ie(i[13])),c&8256&&(M.active=ne(i[6].url.pathname,Ie(i[13]))),u.$set(M)},i(i){m||(g(r.$$.fragment,i),g(t.$$.fragment,i),g(l.$$.fragment,i),g(a.$$.fragment,i),g(u.$$.fragment,i),m=!0)},o(i){k(r.$$.fragment,i),k(t.$$.fragment,i),k(l.$$.fragment,i),k(a.$$.fragment,i),k(u.$$.fragment,i),m=!1},d(i){i&&($(e),$(o),$(s),$(f)),W(r,i),W(t,i),W(l,i),W(a,i),W(u,i)}}}function Zr(n){let r,e;return r=new Gt({props:{class:"flex flex-wrap gap-6",label:"workflow detail",$$slots:{default:[Xr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o&268480580&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function xr(n){var H,X;let r,e,t,o,l,s,a,f,u,m,i,c,_,d,h,I,M,D,b,C,y,v;t=new Se({props:{href:`${Re({namespace:n[0]})}?${n[16]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[qr]},$$scope:{ctx:n}}});let w=n[14]&&je(n);u=new Yt({props:{copyIconTitle:R("common.copy-icon-title"),copySuccessIconTitle:R("common.copy-success-icon-title"),content:(H=n[2])==null?void 0:H.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}}),c=new jt({props:{status:(X=n[2])==null?void 0:X.status}});let N=n[9]&&Qe(n),B=n[3]&&ze(n);M=new Mr({props:{isRunning:n[3],cancelInProgress:n[11],workflow:n[2],namespace:n[0]}});let U=n[11]&&Ge(n),p=n[10]&&Ke(n);return y=new zt({props:{$$slots:{default:[Zr]},$$scope:{ctx:n}}}),{c(){r=j("header"),e=j("div"),P(t.$$.fragment),o=L(),w&&w.c(),l=L(),s=j("div"),a=j("div"),f=j("h1"),P(u.$$.fragment),m=L(),i=j("div"),P(c.$$.fragment),_=L(),N&&N.c(),d=L(),h=j("div"),B&&B.c(),I=L(),P(M.$$.fragment),D=L(),U&&U.c(),b=L(),p&&p.c(),C=L(),P(y.$$.fragment),this.h()},l(A){r=Q(A,"HEADER",{class:!0});var E=J(r);e=Q(E,"DIV",{class:!0});var F=J(e);S(t.$$.fragment,F),o=O(F),w&&w.l(F),F.forEach($),l=O(E),s=Q(E,"DIV",{class:!0});var ee=J(s);a=Q(ee,"DIV",{class:!0});var de=J(a);f=Q(de,"H1",{"data-testid":!0,class:!0});var ie=J(f);S(u.$$.fragment,ie),ie.forEach($),m=O(de),i=Q(de,"DIV",{class:!0});var ge=J(i);S(c.$$.fragment,ge),_=O(ge),N&&N.l(ge),ge.forEach($),de.forEach($),d=O(ee),h=Q(ee,"DIV",{class:!0});var we=J(h);B&&B.l(we),I=O(we),S(M.$$.fragment,we),we.forEach($),ee.forEach($),D=O(E),U&&U.l(E),b=O(E),p&&p.l(E),C=O(E),S(y.$$.fragment,E),E.forEach($),this.h()},h(){Y(e,"class","mb-4 block"),Y(f,"data-testid","workflow-id-heading"),Y(f,"class","overflow-hidden text-2xl font-medium"),Y(i,"class","flex flex-wrap items-center gap-4"),Y(a,"class","flex w-full flex-col justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),Y(h,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end"),Y(s,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),Y(r,"class","mb-4 flex flex-col gap-1")},m(A,E){V(A,r,E),q(r,e),T(t,e,null),q(e,o),w&&w.m(e,null),q(r,l),q(r,s),q(s,a),q(a,f),T(u,f,null),q(a,m),q(a,i),T(c,i,null),q(i,_),N&&N.m(i,null),q(s,d),q(s,h),B&&B.m(h,null),q(h,I),T(M,h,null),q(r,D),U&&U.m(r,null),q(r,b),p&&p.m(r,null),q(r,C),T(y,r,null),v=!0},p(A,[E]){var we,Me;const F={};E&65537&&(F.href=`${Re({namespace:A[0]})}?${A[16]}`),E&268451840&&(F.$$scope={dirty:E,ctx:A}),t.$set(F),A[14]?w?(w.p(A,E),E&16384&&g(w,1)):(w=je(A),w.c(),g(w,1),w.m(e,null)):w&&(te(),k(w,1,1,()=>{w=null}),re());const ee={};E&4&&(ee.content=(we=A[2])==null?void 0:we.id),u.$set(ee);const de={};E&4&&(de.status=(Me=A[2])==null?void 0:Me.status),c.$set(de),A[9]?N?(N.p(A,E),E&512&&g(N,1)):(N=Qe(A),N.c(),g(N,1),N.m(i,null)):N&&(te(),k(N,1,1,()=>{N=null}),re()),A[3]?B?(B.p(A,E),E&8&&g(B,1)):(B=ze(A),B.c(),g(B,1),B.m(h,I)):B&&(te(),k(B,1,1,()=>{B=null}),re());const ie={};E&8&&(ie.isRunning=A[3]),E&2048&&(ie.cancelInProgress=A[11]),E&4&&(ie.workflow=A[2]),E&1&&(ie.namespace=A[0]),M.$set(ie),A[11]?U?(U.p(A,E),E&2048&&g(U,1)):(U=Ge(A),U.c(),g(U,1),U.m(r,b)):U&&(te(),k(U,1,1,()=>{U=null}),re()),A[10]?p?(p.p(A,E),E&1024&&g(p,1)):(p=Ke(A),p.c(),g(p,1),p.m(r,C)):p&&(te(),k(p,1,1,()=>{p=null}),re());const ge={};E&268480580&&(ge.$$scope={dirty:E,ctx:A}),y.$set(ge)},i(A){v||(g(t.$$.fragment,A),g(w),g(u.$$.fragment,A),g(c.$$.fragment,A),g(N),g(B),g(M.$$.fragment,A),g(U),g(p),g(y.$$.fragment,A),v=!0)},o(A){k(t.$$.fragment,A),k(w),k(u.$$.fragment,A),k(c.$$.fragment,A),k(N),k(B),k(M.$$.fragment,A),k(U),k(p),k(y.$$.fragment,A),v=!1},d(A){A&&$(r),W(t),w&&w.d(),W(u),W(c),N&&N.d(),B&&B.d(),W(M),U&&U.d(),p&&p.d(),W(y)}}}const Ze=15e3;function eo(n,r,e){let t,o,l,s,a,f,u,m,i,c,_,d,h,I,M,D,b,C,y,v;K(n,Ae,E=>e(4,I=E)),K(n,wt,E=>e(5,M=E)),K(n,Ce,E=>e(25,D=E)),K(n,fe,E=>e(26,b=E)),K(n,Ee,E=>e(27,C=E)),K(n,Pe,E=>e(6,y=E)),K(n,it,E=>e(16,v=E));var w,N,B,U,p;let{namespace:H}=r,X;rt(()=>{f&&C==="on"&&(clearInterval(X),e(23,X=setInterval(()=>Z(fe,b=Date.now(),b),Ze)))});const A=()=>{C==="on"?(Z(Ee,C="off",C),clearInterval(X)):(Z(fe,b=Date.now(),b),Z(Ee,C="on",C),clearInterval(X),e(23,X=setInterval(()=>Z(fe,b=Date.now(),b),Ze)))};return Te(()=>{clearInterval(X)}),n.$$set=E=>{"namespace"in E&&e(0,H=E.namespace)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{workflow:t,workers:o,compatibility:l}=I,t,(e(15,o),e(4,I)),(e(24,l),e(4,I))),n.$$.dirty&64&&e(14,s=y.params.id),n.$$.dirty&5&&e(13,a={namespace:H,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&262160&&e(3,f=e(18,w=I==null?void 0:I.workflow)===null||w===void 0?void 0:w.isRunning),n.$$.dirty&524304&&e(12,u=["Terminated","TimedOut","Canceled"].includes(e(19,N=I.workflow)===null||N===void 0?void 0:N.status)),n.$$.dirty&8388616&&(f||clearInterval(X)),n.$$.dirty&34603024&&e(11,m=yr(e(20,B=I==null?void 0:I.workflow)===null||B===void 0?void 0:B.status,D)),n.$$.dirty&2097200&&e(10,i=Kt(M,e(21,U=I==null?void 0:I.workflow)===null||U===void 0?void 0:U.runId)),n.$$.dirty&4194308&&e(9,c=e(22,p=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||p===void 0?void 0:p.useVersioning),n.$$.dirty&4&&e(1,_=Xt(t)),n.$$.dirty&16777216&&e(8,d=Zt(l)),n.$$.dirty&16777218&&e(7,h=xt(l,_))},[H,_,t,f,I,M,y,h,d,c,i,m,u,a,s,o,v,A,w,N,B,U,p,X,l,D]}class to extends pe{constructor(r){super(),_e(this,r,eo,xr,me,{namespace:0})}}async function ro({activity:n,namespace:r,settings:e,accessToken:t},{convertWithCodec:o=er,decodeAttributes:l=tr}={}){const s=await o({attributes:n,namespace:r,settings:e,accessToken:t});return l(s)}const oo=async({activity:n,namespace:r,settings:e,accessToken:t})=>await ro({activity:n,namespace:r,settings:e,accessToken:t}),no=async(n,r,e,t)=>{const o=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of o){const a=await oo({activity:s,namespace:r,settings:e,accessToken:t});l.push(a)}return l};function lo(n){let r,e,t;r=new to({props:{namespace:n[0].params.namespace}});const o=n[8].default,l=nt(o,n,n[7],null);return{c(){P(r.$$.fragment),e=L(),l&&l.c()},l(s){S(r.$$.fragment,s),e=O(s),l&&l.l(s)},m(s,a){T(r,s,a),V(s,e,a),l&&l.m(s,a),t=!0},p(s,a){const f={};a&1&&(f.namespace=s[0].params.namespace),r.$set(f),l&&l.p&&(!t||a&128)&&lt(l,o,s,s[7],t?ft(o,s[7],a,null):st(s[7]),null)},i(s){t||(g(r.$$.fragment,s),g(l,s),t=!0)},o(s){k(r.$$.fragment,s),k(l,s),t=!1},d(s){s&&$(e),W(r,s),l&&l.d(s)}}}function so(n){let r,e;return r=new $t({}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p:x,i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function fo(n){let r,e;return r=new fr({props:{error:n[1]}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,o){const l={};o&2&&(l.error=t[1]),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function ao(n){let r,e,t,o;const l=[fo,so,lo],s=[];function a(f,u){return f[1]?0:f[2].workflow?2:1}return e=a(n),t=s[e]=l[e](n),{c(){r=j("div"),t.c(),this.h()},l(f){r=Q(f,"DIV",{class:!0});var u=J(r);t.l(u),u.forEach($),this.h()},h(){Y(r,"class","flex h-full flex-col gap-6")},m(f,u){V(f,r,u),s[e].m(r,null),o=!0},p(f,[u]){let m=e;e=a(f),e===m?s[e].p(f,u):(te(),k(s[m],1,1,()=>{s[m]=null}),re(),t=s[e],t?t.p(f,u):(t=s[e]=l[e](f),t.c()),g(t,1),t.m(r,null))},i(f){o||(g(t),o=!0)},o(f){k(t),o=!1},d(f){f&&$(r),s[e].d()}}}function io(n,r,e){let t,o,l,s,a,f,u,m,i,c;K(n,Ce,D=>e(9,s=D)),K(n,Ae,D=>e(2,a=D)),K(n,qe,D=>e(10,f=D)),K(n,ye,D=>e(11,u=D)),K(n,Pe,D=>e(0,m=D)),K(n,fe,D=>e(6,i=D)),K(n,or,D=>e(12,c=D));let{$$slots:_={},$$scope:d}=r,h;const I=async(D,b)=>{var C;if(!((C=D==null?void 0:D.mostRecentWorkerVersionStamp)===null||C===void 0)&&C.useVersioning)return await Jt({queue:b,namespace:t})},M=async(D,b,C)=>{const{settings:y}=m.data,{workflow:v,error:w}=await St({namespace:D,workflowId:b,runId:C});if(w){e(1,h=w);return}const{taskQueue:N}=v,B=await Qt({queue:N,namespace:D}),U=await I(v,N);v.pendingActivities=await no(v,D,y,c==null?void 0:c.accessToken),Z(Ae,a={workflow:v,workers:B,compatibility:U},a);const p=await rr({namespace:D,workflowId:b,runId:C});Z(Ce,s=p,s)};return rt(()=>{const D=m.url.searchParams.get("sort");D&&Z(ye,u=D,u)}),Te(()=>{Z(qe,f=null,f),Z(Ae,a=Lt,a),Z(Ce,s=Tt,s),e(1,h=void 0)}),n.$$set=D=>{"$$scope"in D&&e(7,d=D.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(5,{namespace:t,workflow:o,run:l}=m.params,t,(e(4,o),e(0,m)),(e(3,l),e(0,m))),n.$$.dirty&120&&M(t,o,l)},[m,h,a,l,o,t,i,d,_]}class uo extends pe{constructor(r){super(),_e(this,r,io,ao,me,{})}}const ht={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},co=ct(ht),mo=()=>{co.set(ht)};function po(n){let r;const e=n[0].default,t=nt(e,n,n[1],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,l){t&&t.m(o,l),r=!0},p(o,l){t&&t.p&&(!r||l&2)&&lt(t,e,o,o[1],r?ft(e,o[1],l,null):st(o[1]),null)},i(o){r||(g(t,o),r=!0)},o(o){k(t,o),r=!1},d(o){t&&t.d(o)}}}function _o(n){let r,e;return r=new uo({props:{$$slots:{default:[po]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){S(r.$$.fragment,t)},m(t,o){T(r,t,o),e=!0},p(t,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(g(r.$$.fragment,t),e=!0)},o(t){k(r.$$.fragment,t),e=!1},d(t){W(r,t)}}}function go(n,r,e){let{$$slots:t={},$$scope:o}=r;return Te(()=>{mo()}),n.$$set=l=>{"$$scope"in l&&e(1,o=l.$$scope)},[t,o]}class un extends pe{constructor(r){super(),_e(this,r,go,_o,me,{})}}export{un as component};
