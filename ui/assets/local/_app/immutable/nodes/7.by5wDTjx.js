import{s as ue,e as Q,a as O,t as G,b as Y,d as z,g as w,h as U,f as K,j,k as y,l as q,n as ae,c as J,v as fe,L as x,V as oe,a5 as tt,w as re,x as De,y as rt,ae as bt,$ as ot,S as vt,a3 as nt,p as Me,u as ye,q as qe,r as He}from"../chunks/scheduler.78ThUSKQ.js";import{S as ce,i as me,c as D,a as R,m as P,t as d,b as _,d as S,f as ne,g as ee,e as te,h as lt}from"../chunks/index.G2Max4V_.js";import{p as Se}from"../chunks/stores.SaFu9TQB.js";import{v as Et}from"../chunks/data-encoder-settings.jFPqgPXH.js";import{L as We}from"../chunks/link.N3L0TO5H.js";import{t as V}from"../chunks/translate.HrioCK44.js";import{h as st,i as It,s as Ct,j as Ne}from"../chunks/workflows.XgZu26tw.js";import{e as Re,b as ie,m as ke,n as be,c as ve,o as Ee,p as Ie,q as Ce}from"../chunks/route-for.xdUSSU96.js";import{l as at,L as At}from"../chunks/labs-mode-guard.fxDh_9EK.js";import{L as ft}from"../chunks/loading.dhOLw0Qo.js";import{a as it}from"../chunks/index.GCKs2DhI.js";import{e as Pe}from"../chunks/each.ycdfgOIg.js";import{C as Dt,T as Rt,w as Pt,a as St,b as Wt}from"../chunks/workflow-terminate-enabled.5uOOSX8l.js";import{w as ut}from"../chunks/entry.Ir0gi6yw.js";import{C as Tt}from"../chunks/checkbox.TYNQnXkP.js";import{I as ct}from"../chunks/input.mM_gpfXB.js";import{M as mt}from"../chunks/modal.dldW0Jlc.js";import{R as Vt,a as Mt}from"../chunks/radio-input.Dh595gzk.js";import{R as Be}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as pt,f as Ae,t as Ve}from"../chunks/events.iF45poir.js";import{p as yt}from"../chunks/persist-store.Ef9502yF.js";import{i as dt}from"../chunks/is-network-error.g37jlIvb.js";import{C as qt}from"../chunks/code-block.Go4GpiXJ.js";import{t as Ht}from"../chunks/toaster.hi7ycJYu.js";import{B as Ft}from"../chunks/button.4fZXbMtX.js";import{I as Nt}from"../chunks/icon.sJ0QhDtT.js";import{c as Bt}from"../chunks/menu.DjiPNUkK.js";import{M as Lt}from"../chunks/menu-divider.OpI0aaoG.js";import{S as Ot}from"../chunks/split-button.p69NVtb1.js";import{T as _t}from"../chunks/tooltip.QItismIq.js";import{c as Ut}from"../chunks/core-user.d7SsWdgB.js";import{s as jt}from"../chunks/settings.TULeL-Vl.js";import{r as $e,w as he,i as Qt}from"../chunks/workflow-run.H4BR10ng.js";import{w as Yt}from"../chunks/write-actions-are-allowed.wJIVk8wy.js";import{W as zt}from"../chunks/workflow-status.DY3dZ1ex.js";import{C as Jt,k as Gt,g as Kt}from"../chunks/pollers-service.BEexyQaH.js";import{A as gt}from"../chunks/alert.IkBpHV6_.js";import{B as Te}from"../chunks/badge.PHjP2oTf.js";import{C as Xt}from"../chunks/index.NJPIQEf0.js";import{a as Zt,b as xt,c as _e}from"../chunks/tab.M_ObfWkv.js";import{n as er}from"../chunks/namespaces.bmVhsmTY.js";import{g as tr}from"../chunks/get-workflow-relationships.c7dtsESF.js";import{h as rr}from"../chunks/has.rY0Oe_rJ.js";import{f as or,d as nr}from"../chunks/decode-payload.mXl6MMb5.js";import{f as lr}from"../chunks/events-service.8eUpWaGL.js";import{a as sr}from"../chunks/auth-user.FOV4F4iF.js";import{a as Le}from"../chunks/event-view.CrY4w67Z.js";function ar(n){let t=V("workflows.back-to-workflows")+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p:fe,d(e){e&&w(r)}}}function fr(n){var W,H;let t,r,e,o,l,s,a=(((W=n[0])==null?void 0:W.statusCode)??"500")+"",f,u,c,$,k,h,m=(((H=n[0])==null?void 0:H.statusText)??"")+"",i,g;return e=new We({props:{href:`${Re({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[ar]},$$scope:{ctx:n}}}),{c(){t=Q("header"),r=Q("div"),D(e.$$.fragment),o=O(),l=Q("div"),s=Q("h1"),f=G(a),u=O(),c=Q("p"),$=G(n[1]),k=O(),h=Q("p"),i=G(m),this.h()},l(E){t=Y(E,"HEADER",{class:!0});var C=z(t);r=Y(C,"DIV",{class:!0});var M=z(r);R(e.$$.fragment,M),M.forEach(w),C.forEach(w),o=U(E),l=Y(E,"DIV",{class:!0});var b=z(l);s=Y(b,"H1",{class:!0});var I=z(s);f=K(I,a),I.forEach(w),u=U(b),c=Y(b,"P",{class:!0});var v=z(c);$=K(v,n[1]),v.forEach(w),k=U(b),h=Y(b,"P",{class:!0});var F=z(h);i=K(F,m),F.forEach(w),b.forEach(w),this.h()},h(){j(r,"class","mb-4 block"),j(t,"class","mb-4 flex flex-col gap-1"),j(s,"class","leading-0 text-[12rem] font-semibold"),j(c,"class","-mt-12 text-lg"),j(h,"class","text-2xl font-bold text-red-700"),j(l,"class","text-center align-middle")},m(E,C){y(E,t,C),q(t,r),P(e,r,null),y(E,o,C),y(E,l,C),q(l,s),q(s,f),q(l,u),q(l,c),q(c,$),q(l,k),q(l,h),q(h,i),g=!0},p(E,[C]){var b,I;const M={};C&12&&(M.href=`${Re({namespace:E[2]})}?${E[3]}`),C&32&&(M.$$scope={dirty:C,ctx:E}),e.$set(M),(!g||C&1)&&a!==(a=(((b=E[0])==null?void 0:b.statusCode)??"500")+"")&&ae(f,a),(!g||C&2)&&ae($,E[1]),(!g||C&1)&&m!==(m=(((I=E[0])==null?void 0:I.statusText)??"")+"")&&ae(i,m)},i(E){g||(d(e.$$.fragment,E),g=!0)},o(E){_(e.$$.fragment,E),g=!1},d(E){E&&(w(t),w(o),w(l)),S(e)}}}function ir(n,t,r){let e,o,l,s;J(n,Se,f=>r(4,l=f)),J(n,st,f=>r(3,s=f));let{error:a}=t;return n.$$set=f=>{"error"in f&&r(0,a=f.error)},n.$$.update=()=>{n.$$.dirty&16&&r(2,{namespace:e}=l.params,e),n.$$.dirty&1&&r(1,o=a.statusCode===404?V("workflows.workflow-404-title"):V("workflows.workflow-error-title"))},[a,o,e,s,l]}class wt extends ce{constructor(t){super(),me(this,t,ir,fr,ue,{error:0})}}const $t=yt("resetWorkflows",{});function Oe(n,t,r){const e=n.slice();return e[18]=t[r],e}function ur(n){let t,r=V("workflows.reset-modal-title")+"",e;return{c(){t=Q("h3"),e=G(r),this.h()},l(o){t=Y(o,"H3",{slot:!0});var l=z(t);e=K(l,r),l.forEach(w),this.h()},h(){j(t,"slot","title")},m(o,l){y(o,t,l),q(t,e)},p:fe,d(o){o&&w(t)}}}function Ue(n){let t,r;return t=new Mt({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&64&&(l.id="reset-event-"+e[18].id),o&64&&(l.value=e[18].id),o&64&&(l.label=e[18].id+" - "+e[18].eventType),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function cr(n){let t,r,e=Pe(n[6]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Ue(Oe(n,e,s));const l=s=>_(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=De()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);t=De()},m(s,a){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,a);y(s,t,a),r=!0},p(s,a){if(a&64){e=Pe(s[6]);let f;for(f=0;f<e.length;f+=1){const u=Oe(s,e,f);o[f]?(o[f].p(u,a),d(o[f],1)):(o[f]=Ue(u),o[f].c(),d(o[f],1),o[f].m(t.parentNode,t))}for(ee(),f=e.length;f<o.length;f+=1)l(f);te()}},i(s){if(!r){for(let a=0;a<e.length;a+=1)d(o[a]);r=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)_(o[a]);r=!1},d(s){s&&w(t),rt(o,s)}}}function mr(n){let t,r,e,o,l,s,a,f,u;r=new Vt({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:V("workflows.reset-event-radio-group-description"),$$slots:{default:[cr]},$$scope:{ctx:n}}});function c(m){n[12](m)}let $={id:"reset-reapply-type-checkbox",label:V("workflows.reset-reapply-type-label")};n[5]!==void 0&&($.checked=n[5]),o=new Tt({props:$}),x.push(()=>ne(o,"checked",c));function k(m){n[13](m)}let h={id:"reset-reason",label:V("common.reason")};return n[4]!==void 0&&(h.value=n[4]),a=new ct({props:h}),x.push(()=>ne(a,"value",k)),{c(){t=Q("div"),D(r.$$.fragment),e=O(),D(o.$$.fragment),s=O(),D(a.$$.fragment),this.h()},l(m){t=Y(m,"DIV",{class:!0});var i=z(t);R(r.$$.fragment,i),e=U(i),R(o.$$.fragment,i),s=U(i),R(a.$$.fragment,i),i.forEach(w),this.h()},h(){j(t,"class","flex w-full flex-col gap-4")},m(m,i){y(m,t,i),P(r,t,null),q(t,e),P(o,t,null),q(t,s),P(a,t,null),u=!0},p(m,i){const g={};i&2097216&&(g.$$scope={dirty:i,ctx:m}),r.$set(g);const W={};!l&&i&32&&(l=!0,W.checked=m[5],oe(()=>l=!1)),o.$set(W);const H={};!f&&i&16&&(f=!0,H.value=m[4],oe(()=>f=!1)),a.$set(H)},i(m){u||(d(r.$$.fragment,m),d(o.$$.fragment,m),d(a.$$.fragment,m),u=!0)},o(m){_(r.$$.fragment,m),_(o.$$.fragment,m),_(a.$$.fragment,m),u=!1},d(m){m&&w(t),S(r),S(o),S(a)}}}function pr(n){let t,r,e,o;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:V("common.confirm"),cancelText:V("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[mr],title:[ur]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),t=new mt({props:a}),x.push(()=>ne(t,"error",l)),x.push(()=>ne(t,"open",s)),t.$on("confirmModal",n[9]),t.$on("cancelModal",n[8]),{c(){D(t.$$.fragment)},l(f){R(t.$$.fragment,f)},m(f,u){P(t,f,u),o=!0},p(f,[u]){const c={};u&8&&(c.loading=f[3]),u&2097264&&(c.$$scope={dirty:u,ctx:f}),!r&&u&4&&(r=!0,c.error=f[2],oe(()=>r=!1)),!e&&u&1&&(e=!0,c.open=f[0],oe(()=>e=!1)),t.$set(c)},i(f){o||(d(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){S(t,f)}}}function dr(n,t,r){let e,o=fe,l=()=>(o(),o=tt($,I=>r(16,e=I)),$),s,a;J(n,pt,I=>r(6,a=I)),n.$$.on_destroy.push(()=>o());let{open:f}=t,{workflow:u}=t,{namespace:c}=t,{refresh:$}=t;l();let k="",h=!1,m=ut("");J(n,m,I=>r(17,s=I));let i,g=!1;const W=()=>{r(0,f=!1),r(5,g=!1),re(m,s="",s),r(4,i="")},H=async()=>{r(2,k=""),r(3,h=!0);try{const I=await It({namespace:c,workflow:u,eventId:s,reason:i,reapplyType:g?Be.Signal:Be.None});I&&I.runId&&$t.update(v=>({...v,[u.runId]:I.runId})),re($,e=Date.now(),e),W()}catch(I){r(2,k=dt(I)?I.message:V("common.unknown-error"))}finally{r(3,h=!1)}W()};function E(I){g=I,r(5,g)}function C(I){i=I,r(4,i)}function M(I){k=I,r(2,k)}function b(I){f=I,r(0,f)}return n.$$set=I=>{"open"in I&&r(0,f=I.open),"workflow"in I&&r(10,u=I.workflow),"namespace"in I&&r(11,c=I.namespace),"refresh"in I&&l(r(1,$=I.refresh))},[f,$,k,h,i,g,a,m,W,H,u,c,E,C,M,b]}class _r extends ce{constructor(t){super(),me(this,t,dr,pr,ue,{open:0,workflow:10,namespace:11,refresh:1})}}function gr(n){let t,r=V("workflows.signal-modal-title")+"",e;return{c(){t=Q("h3"),e=G(r),this.h()},l(o){t=Y(o,"H3",{slot:!0});var l=z(t);e=K(l,r),l.forEach(w),this.h()},h(){j(t,"slot","title")},m(o,l){y(o,t,l),q(t,e)},p:fe,d(o){o&&w(t)}}}function wr(n){let t,r,e,o,l,s,a=V("workflows.signal-payload-input-label")+"",f,u,c,$=V("workflows.signal-payload-input-label-hint")+"",k,h,m,i;function g(E){n[12](E)}let W={id:"signal-name",label:V("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(W.value=n[4]),r=new ct({props:W}),x.push(()=>ne(r,"value",g));let H={maxHeight:320,content:n[5],editable:!0,copyable:!1};return m=new qt({props:H}),n[13](m),m.$on("change",n[9]),{c(){t=Q("div"),D(r.$$.fragment),o=O(),l=Q("div"),s=Q("span"),f=G(a),u=O(),c=Q("span"),k=G($),h=O(),D(m.$$.fragment),this.h()},l(E){t=Y(E,"DIV",{slot:!0,class:!0});var C=z(t);R(r.$$.fragment,C),o=U(C),l=Y(C,"DIV",{});var M=z(l);s=Y(M,"SPAN",{class:!0});var b=z(s);f=K(b,a),b.forEach(w),u=U(M),c=Y(M,"SPAN",{class:!0});var I=z(c);k=K(I,$),I.forEach(w),h=U(M),R(m.$$.fragment,M),M.forEach(w),C.forEach(w),this.h()},h(){j(s,"class","font-secondary text-sm font-medium"),j(c,"class","font-secondary text-xs font-light italic"),j(t,"slot","content"),j(t,"class","flex flex-col gap-4")},m(E,C){y(E,t,C),P(r,t,null),q(t,o),q(t,l),q(l,s),q(s,f),q(l,u),q(l,c),q(c,k),q(l,h),P(m,l,null),i=!0},p(E,C){const M={};!e&&C&16&&(e=!0,M.value=E[4],oe(()=>e=!1)),r.$set(M);const b={};C&32&&(b.content=E[5]),m.$set(b)},i(E){i||(d(r.$$.fragment,E),d(m.$$.fragment,E),i=!0)},o(E){_(r.$$.fragment,E),_(m.$$.fragment,E),i=!1},d(E){E&&w(t),S(r),n[13](null),S(m)}}}function $r(n){let t,r,e,o;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:V("common.submit"),cancelText:V("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[wr],title:[gr]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),t=new mt({props:a}),x.push(()=>ne(t,"error",l)),x.push(()=>ne(t,"open",s)),t.$on("cancelModal",n[7]),t.$on("confirmModal",n[8]),{c(){D(t.$$.fragment)},l(f){R(t.$$.fragment,f)},m(f,u){P(t,f,u),o=!0},p(f,[u]){const c={};u&8&&(c.loading=f[3]),u&16&&(c.confirmDisabled=!f[4]),u&131184&&(c.$$scope={dirty:u,ctx:f}),!r&&u&4&&(r=!0,c.error=f[2],oe(()=>r=!1)),!e&&u&1&&(e=!0,c.open=f[0],oe(()=>e=!1)),t.$set(c)},i(f){o||(d(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){S(t,f)}}}function hr(n,t,r){let e,o=fe,l=()=>(o(),o=tt(u,b=>r(16,e=b)),u);n.$$.on_destroy.push(()=>o());let{open:s}=t,{workflow:a}=t,{namespace:f}=t,{refresh:u}=t;l();let c="",$=!1,k="",h="",m;const i=()=>{r(0,s=!1),r(5,h=""),r(4,k=""),m==null||m.resetView(h)},g=async()=>{r(2,c=""),r(3,$=!0);try{await Ct({namespace:f,workflow:a,input:h,name:k}),re(u,e=Date.now(),e),Ht.push({message:V("workflows.signal-success"),id:"workflow-signal-success-toast"}),i()}catch(b){r(2,c=dt(b)?b.message:V("common.unknown-error"))}finally{r(3,$=!1)}},W=b=>{r(5,h=b.detail)};function H(b){k=b,r(4,k)}function E(b){x[b?"unshift":"push"](()=>{m=b,r(6,m)})}function C(b){c=b,r(2,c)}function M(b){s=b,r(0,s)}return n.$$set=b=>{"open"in b&&r(0,s=b.open),"workflow"in b&&r(10,a=b.workflow),"namespace"in b&&r(11,f=b.namespace),"refresh"in b&&l(r(1,u=b.refresh))},[s,u,c,$,k,h,m,i,g,W,a,f,H,E,C,M]}class kr extends ce{constructor(t){super(),me(this,t,hr,$r,ue,{open:0,workflow:10,namespace:11,refresh:1})}}const br=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function je(n,t,r){const e=n.slice();return e[29]=t[r].onClick,e[30]=t[r].destructive,e[31]=t[r].label,e[32]=t[r].allowed,e[33]=t[r].testId,e[34]=t[r].tooltip,e}function vr(n){let t,r;return t=new _t({props:{bottomRight:!0,width:200,text:n[4],hide:n[5],$$slots:{default:[Cr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o[0]&16&&(l.text=e[4]),o[0]&32&&(l.hide=e[5]),o[0]&288|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Er(n){let t,r;return t=new Ot({props:{id:"workflow-actions",position:"right",disabled:n[11],primaryActionDisabled:!n[12]||n[2],label:V("workflows.request-cancellation"),menuLabel:V("workflows.workflow-actions"),$$slots:{default:[Rr]},$$scope:{ctx:n}}}),t.$on("click",n[23]),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o[0]&2048&&(l.disabled=e[11]),o[0]&4100&&(l.primaryActionDisabled=!e[12]||e[2]),o[0]&1024|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ir(n){let t=V("workflows.reset")+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p:fe,d(e){e&&w(r)}}}function Cr(n){let t,r;return t=new Ft({props:{"aria-label":V("workflows.reset"),disabled:!n[5],variant:"primary","data-testid":"workflow-reset-button",$$slots:{default:[Ir]},$$scope:{ctx:n}}}),t.$on("click",n[24]),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o[0]&32&&(l.disabled=!e[5]),o[1]&64&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Qe(n){let t,r;return t=new Lt({}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ar(n){let t=n[31]+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p(e,o){o[0]&1024&&t!==(t=e[31]+"")&&ae(r,t)},d(e){e&&w(r)}}}function Dr(n){let t,r,e;return t=new Bt({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[Ar]},$$scope:{ctx:n}}}),t.$on("click",function(){bt(n[29])&&n[29].apply(this,arguments)}),{c(){D(t.$$.fragment),r=O()},l(o){R(t.$$.fragment,o),r=U(o)},m(o,l){P(t,o,l),y(o,r,l),e=!0},p(o,l){n=o;const s={};l[0]&1024&&(s.destructive=n[30]),l[0]&1024&&(s.disabled=!n[32]),l[0]&1024&&(s["data-testid"]=n[33]),l[0]&1024|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),t.$set(s)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){_(t.$$.fragment,o),e=!1},d(o){o&&w(r),S(t,o)}}}function Ye(n){let t,r,e,o=n[30]&&Qe();return r=new _t({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),t=O(),D(r.$$.fragment)},l(l){o&&o.l(l),t=U(l),R(r.$$.fragment,l)},m(l,s){o&&o.m(l,s),y(l,t,s),P(r,l,s),e=!0},p(l,s){l[30]?o?s[0]&1024&&d(o,1):(o=Qe(),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(ee(),_(o,1,1,()=>{o=null}),te());const a={};s[0]&1024&&(a.text=l[34]),s[0]&1024&&(a.hide=!l[34]),s[0]&1024|s[1]&64&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){e||(d(o),d(r.$$.fragment,l),e=!0)},o(l){_(o),_(r.$$.fragment,l),e=!1},d(l){l&&w(t),o&&o.d(l),S(r,l)}}}function Rr(n){let t,r,e=Pe(n[10]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Ye(je(n,e,s));const l=s=>_(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=De()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);t=De()},m(s,a){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,a);y(s,t,a),r=!0},p(s,a){if(a[0]&1024){e=Pe(s[10]);let f;for(f=0;f<e.length;f+=1){const u=je(s,e,f);o[f]?(o[f].p(u,a),d(o[f],1)):(o[f]=Ye(u),o[f].c(),d(o[f],1),o[f].m(t.parentNode,t))}for(ee(),f=e.length;f<o.length;f+=1)l(f);te()}},i(s){if(!r){for(let a=0;a<e.length;a+=1)d(o[a]);r=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)_(o[a]);r=!1},d(s){s&&w(t),rt(o,s)}}}function Pr(n){let t,r,e,o,l,s,a,f,u,c,$,k,h,m,i;const g=[Er,vr],W=[];function H(p,L){return p[3]?0:1}t=H(n),r=W[t]=g[t](n);function E(p){n[25](p)}let C={refresh:$e,workflow:n[0],namespace:n[1]};n[8]!==void 0&&(C.open=n[8]),o=new _r({props:C}),x.push(()=>ne(o,"open",E));function M(p){n[26](p)}let b={refresh:$e,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(b.open=n[9]),a=new kr({props:b}),x.push(()=>ne(a,"open",M));function I(p){n[27](p)}let v={refresh:$e,workflow:n[0],namespace:n[1]};n[6]!==void 0&&(v.open=n[6]),c=new Dt({props:v}),x.push(()=>ne(c,"open",I));function F(p){n[28](p)}let T={refresh:$e,workflow:n[0],namespace:n[1]};return n[7]!==void 0&&(T.open=n[7]),h=new Rt({props:T}),x.push(()=>ne(h,"open",F)),{c(){r.c(),e=O(),D(o.$$.fragment),s=O(),D(a.$$.fragment),u=O(),D(c.$$.fragment),k=O(),D(h.$$.fragment)},l(p){r.l(p),e=U(p),R(o.$$.fragment,p),s=U(p),R(a.$$.fragment,p),u=U(p),R(c.$$.fragment,p),k=U(p),R(h.$$.fragment,p)},m(p,L){W[t].m(p,L),y(p,e,L),P(o,p,L),y(p,s,L),P(a,p,L),y(p,u,L),P(c,p,L),y(p,k,L),P(h,p,L),i=!0},p(p,L){let le=t;t=H(p),t===le?W[t].p(p,L):(ee(),_(W[le],1,1,()=>{W[le]=null}),te(),r=W[t],r?r.p(p,L):(r=W[t]=g[t](p),r.c()),d(r,1),r.m(e.parentNode,e));const A={};L[0]&1&&(A.workflow=p[0]),L[0]&2&&(A.namespace=p[1]),!l&&L[0]&256&&(l=!0,A.open=p[8],oe(()=>l=!1)),o.$set(A);const B={};L[0]&1&&(B.workflow=p[0]),L[0]&2&&(B.namespace=p[1]),!f&&L[0]&512&&(f=!0,B.open=p[9],oe(()=>f=!1)),a.$set(B);const N={};L[0]&1&&(N.workflow=p[0]),L[0]&2&&(N.namespace=p[1]),!$&&L[0]&64&&($=!0,N.open=p[6],oe(()=>$=!1)),c.$set(N);const X={};L[0]&1&&(X.workflow=p[0]),L[0]&2&&(X.namespace=p[1]),!m&&L[0]&128&&(m=!0,X.open=p[7],oe(()=>m=!1)),h.$set(X)},i(p){i||(d(r),d(o.$$.fragment,p),d(a.$$.fragment,p),d(c.$$.fragment,p),d(h.$$.fragment,p),i=!0)},o(p){_(r),_(o.$$.fragment,p),_(a.$$.fragment,p),_(c.$$.fragment,p),_(h.$$.fragment,p),i=!1},d(p){p&&(w(e),w(s),w(u),w(k)),W[t].d(p),S(o,p),S(a,p),S(c,p),S(h,p)}}}function Sr(n,t,r){let e,o,l,s,a,f,u,c,$;J(n,pt,N=>r(21,c=N)),J(n,Se,N=>r(22,$=N));var k,h,m;let{workflow:i}=t,{namespace:g}=t,{cancelInProgress:W}=t,{isRunning:H}=t,E=!1,C=!1,M=!1,b=!1,I,v,F=Ut();J(n,F,N=>r(20,u=N));const T=()=>r(6,E=!0),p=()=>r(8,M=!0);function L(N){M=N,r(8,M),r(5,a),r(4,I),r(18,o),r(17,l),r(19,s),r(0,i),r(16,m),r(21,c),r(14,k),r(15,h),r(22,$)}function le(N){b=N,r(9,b),r(5,a),r(4,I),r(18,o),r(17,l),r(19,s),r(0,i),r(16,m),r(21,c),r(14,k),r(15,h),r(22,$)}function A(N){E=N,r(6,E)}function B(N){C=N,r(7,C),r(5,a),r(4,I),r(18,o),r(17,l),r(19,s),r(0,i),r(16,m),r(21,c),r(14,k),r(15,h),r(22,$)}return n.$$set=N=>{"workflow"in N&&r(0,i=N.workflow),"namespace"in N&&r(1,g=N.namespace),"cancelInProgress"in N&&r(2,W=N.cancelInProgress),"isRunning"in N&&r(3,H=N.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&r(12,e=Pt($.data.settings)),n.$$.dirty[0]&4194304&&r(18,o=br($.data.settings)),n.$$.dirty[0]&4194304&&r(17,l=St($.data.settings)),n.$$.dirty[0]&4194304&&r(19,s=Wt($.data.settings)),n.$$.dirty[0]&2670593&&(s?s&&(r(14,k=i==null?void 0:i.pendingChildren)===null||k===void 0?void 0:k.length)>0?r(4,I=V("workflows.reset-disabled-pending-children")):s&&(r(15,h=i==null?void 0:i.pendingChildren)===null||h===void 0?void 0:h.length)===0&&c.length===0&&r(4,I=V("workflows.reset-disabled-no-events")):r(4,I=V("workflows.reset-disabled"))),n.$$.dirty[0]&2686977&&r(5,a=s&&(r(16,m=i==null?void 0:i.pendingChildren)===null||m===void 0?void 0:m.length)===0&&c.length>0),n.$$.dirty[0]&393264&&r(10,v=[{label:V("workflows.reset"),onClick:()=>r(8,M=!0),testId:"reset-button",allowed:a,tooltip:a?"":I},{label:V("workflows.signal"),onClick:()=>r(9,b=!0),testId:"signal-button",allowed:o,tooltip:o?"":V("workflows.signal-disabled")},{label:V("workflows.terminate"),onClick:()=>r(7,C=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":V("workflows.terminate-disabled")}]),n.$$.dirty[0]&1048578&&r(11,f=u.namespaceWriteDisabled(g)||!Yt(jt))},[i,g,W,H,I,a,E,C,M,b,v,f,e,F,k,h,m,l,o,s,u,c,$,T,p,L,le,A,B]}class Wr extends ce{constructor(t){super(),me(this,t,Sr,Pr,ue,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}function Tr(n){let t,r,e=V("workers.buildId")+"",o,l,s;return l=new Jt({props:{active:!0,buildId:n[0]}}),{c(){t=Q("p"),r=Q("span"),o=G(e),D(l.$$.fragment),this.h()},l(a){t=Y(a,"P",{class:!0});var f=z(t);r=Y(f,"SPAN",{});var u=z(r);o=K(u,e),u.forEach(w),R(l.$$.fragment,f),f.forEach(w),this.h()},h(){j(t,"class","flex items-center gap-1")},m(a,f){y(a,t,f),q(t,r),q(r,o),P(l,t,null),s=!0},p(a,[f]){const u={};f&1&&(u.buildId=a[0]),l.$set(u)},i(a){s||(d(l.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),s=!1},d(a){a&&w(t),S(l)}}}function Vr(n,t,r){let e,{workflow:o}=t;return n.$$set=l=>{"workflow"in l&&r(1,o=l.workflow)},n.$$.update=()=>{n.$$.dirty&2&&r(0,e=Gt(o))},[e,o]}class Mr extends ce{constructor(t){super(),me(this,t,Vr,Tr,ue,{workflow:1})}}const yr=(n,t)=>{const r=n==="Running",e=t==null?void 0:t.some(o=>(o==null?void 0:o.eventType)==="WorkflowExecutionCancelRequested");return r&&e},ze=n=>{const t=n==null?void 0:n.indexOf("?");return t>-1?n.slice(0,t):n},Z=(n,t,r=!1)=>{const e=ze(n).split("/"),o=ze(t).split("/");if(r&&e.length!==o.length)return!1;for(let l=0;l<e.length;l++){const s=e[l],a=o[l];if(s!==a)return!1}return!0};function qr(n){let t=(n[12]?V("common.workflows"):V("workflows.back-to-workflows"))+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p(e,o){o&4096&&t!==(t=(e[12]?V("common.workflows"):V("workflows.back-to-workflows"))+"")&&ae(r,t)},d(e){e&&w(r)}}}function Je(n){let t,r;return t=new We({props:{href:ie({...n[11]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Hr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2048&&(l.href=ie({...e[11]})),o&8388610&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Hr(n){var e;let t=((e=n[1])==null?void 0:e.runId)+"",r;return{c(){r=G(t)},l(o){r=K(o,t)},m(o,l){y(o,r,l)},p(o,l){var s;l&2&&t!==(t=((s=o[1])==null?void 0:s.runId)+"")&&ae(r,t)},d(o){o&&w(r)}}}function Ge(n){let t,r;return t=new Mr({props:{workflow:n[1]}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2&&(l.workflow=e[1]),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Fr(n){var e;let t=((e=n[1])==null?void 0:e.historyEvents)+"",r;return{c(){r=G(t)},l(o){r=K(o,t)},m(o,l){y(o,r,l)},p(o,l){var s;l&2&&t!==(t=((s=o[1])==null?void 0:s.historyEvents)+"")&&ae(r,t)},d(o){o&&w(r)}}}function Nr(n){let t,r;return t=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Fr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&8388610&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Br(n){var e,o;let t=((o=(e=n[13])==null?void 0:e.pollers)==null?void 0:o.length)+"",r;return{c(){r=G(t)},l(l){r=K(l,t)},m(l,s){y(l,r,s)},p(l,s){var a,f;s&8192&&t!==(t=((f=(a=l[13])==null?void 0:a.pollers)==null?void 0:f.length)+"")&&ae(r,t)},d(l){l&&w(r)}}}function Lr(n){let t,r;return t=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&8396800&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Or(n){let t=n[5].relationshipCount+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p(e,o){o&32&&t!==(t=e[5].relationshipCount+"")&&ae(r,t)},d(e){e&&w(r)}}}function Ur(n){let t,r;return t=new Te({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Or]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&8388640&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ke(n){let t,r;return t=new _e({props:{label:V("workflows.pending-activities-tab"),id:"pending-activities-tab",href:Ce(n[11]),active:Z(n[4].url.pathname,Ce(n[11])),$$slots:{default:[Qr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2048&&(l.href=Ce(e[11])),o&2064&&(l.active=Z(e[4].url.pathname,Ce(e[11]))),o&8389122&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Xe(n){let t,r;return t=new Nt({props:{name:"canceled"}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function jr(n){var a,f;let t,r,e=((f=(a=n[1])==null?void 0:a.pendingActivities)==null?void 0:f.length)+"",o,l,s=n[9]&&Xe();return{c(){t=Q("div"),s&&s.c(),r=O(),o=G(e),this.h()},l(u){t=Y(u,"DIV",{class:!0});var c=z(t);s&&s.l(c),r=U(c),o=K(c,e),c.forEach(w),this.h()},h(){j(t,"class","flex items-center gap-1")},m(u,c){y(u,t,c),s&&s.m(t,null),q(t,r),q(t,o),l=!0},p(u,c){var $,k;u[9]?s?c&512&&d(s,1):(s=Xe(),s.c(),d(s,1),s.m(t,r)):s&&(ee(),_(s,1,1,()=>{s=null}),te()),(!l||c&2)&&e!==(e=((k=($=u[1])==null?void 0:$.pendingActivities)==null?void 0:k.length)+"")&&ae(o,e)},i(u){l||(d(s),l=!0)},o(u){_(s),l=!1},d(u){u&&w(t),s&&s.d()}}}function Qr(n){let t,r;return t=new Te({props:{type:n[9]?"warning":"information",class:"px-2 py-0",$$slots:{default:[jr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&512&&(l.type=e[9]?"warning":"information"),o&8389122&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Yr(n){let t,r,e,o,l,s,a,f,u,c,$,k,h;t=new _e({props:{label:V("workflows.history-tab"),id:"history-tab",href:ie({...n[11]}),active:Z(n[4].url.pathname,ie({...n[11]})),$$slots:{default:[Nr]},$$scope:{ctx:n}}}),e=new _e({props:{label:V("workflows.workers-tab"),id:"workers-tab",href:ke(n[11]),active:Z(n[4].url.pathname,ke(n[11])),$$slots:{default:[Lr]},$$scope:{ctx:n}}}),l=new _e({props:{label:V("workflows.relationships"),id:"relationships-tab",href:be(n[11]),active:Z(n[4].url.pathname,be(n[11])),$$slots:{default:[Ur]},$$scope:{ctx:n}}});let m=!n[15]&&Ke(n);return f=new _e({props:{label:V("workflows.call-stack-tab"),id:"call-stack-tab",href:ve(n[11]),active:Z(n[4].url.pathname,ve(n[11]))}}),c=new _e({props:{label:V("workflows.queries-tab"),id:"queries-tab",href:Ee(n[11]),active:Z(n[4].url.pathname,Ee(n[11]))}}),k=new _e({props:{label:V("workflows.metadata-tab"),id:"metadata-tab",href:Ie(n[11]),active:Z(n[4].url.pathname,Ie(n[11]))}}),{c(){D(t.$$.fragment),r=O(),D(e.$$.fragment),o=O(),D(l.$$.fragment),s=O(),m&&m.c(),a=O(),D(f.$$.fragment),u=O(),D(c.$$.fragment),$=O(),D(k.$$.fragment)},l(i){R(t.$$.fragment,i),r=U(i),R(e.$$.fragment,i),o=U(i),R(l.$$.fragment,i),s=U(i),m&&m.l(i),a=U(i),R(f.$$.fragment,i),u=U(i),R(c.$$.fragment,i),$=U(i),R(k.$$.fragment,i)},m(i,g){P(t,i,g),y(i,r,g),P(e,i,g),y(i,o,g),P(l,i,g),y(i,s,g),m&&m.m(i,g),y(i,a,g),P(f,i,g),y(i,u,g),P(c,i,g),y(i,$,g),P(k,i,g),h=!0},p(i,g){const W={};g&2048&&(W.href=ie({...i[11]})),g&2064&&(W.active=Z(i[4].url.pathname,ie({...i[11]}))),g&8388610&&(W.$$scope={dirty:g,ctx:i}),t.$set(W);const H={};g&2048&&(H.href=ke(i[11])),g&2064&&(H.active=Z(i[4].url.pathname,ke(i[11]))),g&8396800&&(H.$$scope={dirty:g,ctx:i}),e.$set(H);const E={};g&2048&&(E.href=be(i[11])),g&2064&&(E.active=Z(i[4].url.pathname,be(i[11]))),g&8388640&&(E.$$scope={dirty:g,ctx:i}),l.$set(E),i[15]?m&&(ee(),_(m,1,1,()=>{m=null}),te()):m?(m.p(i,g),g&32768&&d(m,1)):(m=Ke(i),m.c(),d(m,1),m.m(a.parentNode,a));const C={};g&2048&&(C.href=ve(i[11])),g&2064&&(C.active=Z(i[4].url.pathname,ve(i[11]))),f.$set(C);const M={};g&2048&&(M.href=Ee(i[11])),g&2064&&(M.active=Z(i[4].url.pathname,Ee(i[11]))),c.$set(M);const b={};g&2048&&(b.href=Ie(i[11])),g&2064&&(b.active=Z(i[4].url.pathname,Ie(i[11]))),k.$set(b)},i(i){h||(d(t.$$.fragment,i),d(e.$$.fragment,i),d(l.$$.fragment,i),d(m),d(f.$$.fragment,i),d(c.$$.fragment,i),d(k.$$.fragment,i),h=!0)},o(i){_(t.$$.fragment,i),_(e.$$.fragment,i),_(l.$$.fragment,i),_(m),_(f.$$.fragment,i),_(c.$$.fragment,i),_(k.$$.fragment,i),h=!1},d(i){i&&(w(r),w(o),w(s),w(a),w(u),w($)),S(t,i),S(e,i),S(l,i),m&&m.d(i),S(f,i),S(c,i),S(k,i)}}}function zr(n){let t,r;return t=new xt({props:{class:"surface-secondary flex flex-wrap gap-6 p-4",label:"workflow detail",$$slots:{default:[Yr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&8432178&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ze(n){let t,r,e,o;return r=new gt({props:{bold:!0,icon:"info",intent:"info",title:V("workflows.cancel-request-sent"),$$slots:{default:[Jr]},$$scope:{ctx:n}}}),{c(){t=Q("div"),D(r.$$.fragment)},l(l){t=Y(l,"DIV",{});var s=z(t);R(r.$$.fragment,s),s.forEach(w)},m(l,s){y(l,t,s),P(r,t,null),o=!0},p(l,s){const a={};s&8388608&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){o||(d(r.$$.fragment,l),l&&(e||ot(()=>{e=lt(t,it,{duration:200,delay:100}),e.start()})),o=!0)},o(l){_(r.$$.fragment,l),o=!1},d(l){l&&w(t),S(r)}}}function Jr(n){let t=V("workflows.cancel-request-sent-description")+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p:fe,d(e){e&&w(r)}}}function xe(n){let t,r,e,o;return r=new gt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:V("workflows.reset-success-alert-title"),$$slots:{default:[Kr]},$$scope:{ctx:n}}}),{c(){t=Q("div"),D(r.$$.fragment)},l(l){t=Y(l,"DIV",{});var s=z(t);R(r.$$.fragment,s),s.forEach(w)},m(l,s){y(l,t,s),P(r,t,null),o=!0},p(l,s){const a={};s&8388621&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){o||(d(r.$$.fragment,l),l&&(e||ot(()=>{e=lt(t,it,{duration:200,delay:100}),e.start()})),o=!0)},o(l){_(r.$$.fragment,l),o=!1},d(l){l&&w(t),S(r)}}}function Gr(n){let t;return{c(){t=G("here")},l(r){t=K(r,"here")},m(r,e){y(r,t,e)},d(r){r&&w(t)}}}function Kr(n){var l,s,a,f;let t,r,e,o;return r=new We({props:{href:ie({namespace:n[0],workflow:(s=(l=n[2])==null?void 0:l.workflow)==null?void 0:s.id,run:n[3][(f=(a=n[2])==null?void 0:a.workflow)==null?void 0:f.runId]}),$$slots:{default:[Gr]},$$scope:{ctx:n}}}),{c(){t=G("You can find the resulting Workflow Execution "),D(r.$$.fragment),e=G(".")},l(u){t=K(u,"You can find the resulting Workflow Execution "),R(r.$$.fragment,u),e=K(u,".")},m(u,c){y(u,t,c),P(r,u,c),y(u,e,c),o=!0},p(u,c){var k,h,m,i;const $={};c&13&&($.href=ie({namespace:u[0],workflow:(h=(k=u[2])==null?void 0:k.workflow)==null?void 0:h.id,run:u[3][(i=(m=u[2])==null?void 0:m.workflow)==null?void 0:i.runId]})),c&8388608&&($.$$scope={dirty:c,ctx:u}),r.$set($)},i(u){o||(d(r.$$.fragment,u),o=!0)},o(u){_(r.$$.fragment,u),o=!1},d(u){u&&(w(t),w(e)),S(r,u)}}}function Xr(n){var L,le;let t,r,e,o,l,s,a,f,u,c,$,k,h,m,i,g,W,H,E,C,M,b,I;e=new We({props:{href:`${Re({namespace:n[0]})}?${n[14]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[qr]},$$scope:{ctx:n}}});let v=n[12]&&Je(n);c=new zt({props:{status:(L=n[1])==null?void 0:L.status,big:!0}}),m=new Xt({props:{copyIconTitle:V("common.copy-icon-title"),copySuccessIconTitle:V("common.copy-success-icon-title"),content:(le=n[1])==null?void 0:le.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}});let F=n[6]&&Ge(n);H=new Wr({props:{isRunning:n[10],cancelInProgress:n[8],workflow:n[1],namespace:n[0]}}),C=new Zt({props:{$$slots:{default:[zr]},$$scope:{ctx:n}}});let T=n[8]&&Ze(n),p=n[7]&&xe(n);return{c(){t=Q("div"),r=Q("div"),D(e.$$.fragment),o=O(),v&&v.c(),l=O(),s=Q("header"),a=Q("div"),f=Q("div"),u=Q("div"),D(c.$$.fragment),$=O(),k=Q("div"),h=Q("h1"),D(m.$$.fragment),i=O(),F&&F.c(),g=O(),W=Q("div"),D(H.$$.fragment),E=O(),D(C.$$.fragment),M=O(),T&&T.c(),b=O(),p&&p.c(),this.h()},l(A){t=Y(A,"DIV",{class:!0});var B=z(t);r=Y(B,"DIV",{class:!0});var N=z(r);R(e.$$.fragment,N),o=U(N),v&&v.l(N),N.forEach(w),l=U(B),s=Y(B,"HEADER",{class:!0});var X=z(s);a=Y(X,"DIV",{class:!0});var pe=z(a);f=Y(pe,"DIV",{class:!0});var se=z(f);u=Y(se,"DIV",{class:!0});var ge=z(u);R(c.$$.fragment,ge),ge.forEach(w),$=U(se),k=Y(se,"DIV",{class:!0});var de=z(k);h=Y(de,"H1",{"data-testid":!0,class:!0});var we=z(h);R(m.$$.fragment,we),we.forEach(w),i=U(de),F&&F.l(de),de.forEach(w),se.forEach(w),g=U(pe),W=Y(pe,"DIV",{class:!0});var Fe=z(W);R(H.$$.fragment,Fe),Fe.forEach(w),pe.forEach(w),E=U(X),R(C.$$.fragment,X),M=U(X),T&&T.l(X),b=U(X),p&&p.l(X),X.forEach(w),B.forEach(w),this.h()},h(){j(r,"class","pb-4"),j(u,"class","px-2"),j(h,"data-testid","workflow-id-heading"),j(h,"class","overflow-hidden text-base font-medium lg:text-2xl"),j(k,"class","flex flex-col flex-wrap gap-0"),j(f,"class","flex flex-col items-center gap-4 lg:flex-row"),j(W,"class","px-2"),j(a,"class","flex flex-col items-center justify-between gap-4 lg:flex-row"),j(s,"class","rounded-top flex flex-col gap-0"),j(t,"class","surface-secondary")},m(A,B){y(A,t,B),q(t,r),P(e,r,null),q(r,o),v&&v.m(r,null),q(t,l),q(t,s),q(s,a),q(a,f),q(f,u),P(c,u,null),q(f,$),q(f,k),q(k,h),P(m,h,null),q(k,i),F&&F.m(k,null),q(a,g),q(a,W),P(H,W,null),q(s,E),P(C,s,null),q(s,M),T&&T.m(s,null),q(s,b),p&&p.m(s,null),I=!0},p(A,[B]){var de,we;const N={};B&16385&&(N.href=`${Re({namespace:A[0]})}?${A[14]}`),B&8392704&&(N.$$scope={dirty:B,ctx:A}),e.$set(N),A[12]?v?(v.p(A,B),B&4096&&d(v,1)):(v=Je(A),v.c(),d(v,1),v.m(r,null)):v&&(ee(),_(v,1,1,()=>{v=null}),te());const X={};B&2&&(X.status=(de=A[1])==null?void 0:de.status),c.$set(X);const pe={};B&2&&(pe.content=(we=A[1])==null?void 0:we.id),m.$set(pe),A[6]?F?(F.p(A,B),B&64&&d(F,1)):(F=Ge(A),F.c(),d(F,1),F.m(k,null)):F&&(ee(),_(F,1,1,()=>{F=null}),te());const se={};B&1024&&(se.isRunning=A[10]),B&256&&(se.cancelInProgress=A[8]),B&2&&(se.workflow=A[1]),B&1&&(se.namespace=A[0]),H.$set(se);const ge={};B&8432178&&(ge.$$scope={dirty:B,ctx:A}),C.$set(ge),A[8]?T?(T.p(A,B),B&256&&d(T,1)):(T=Ze(A),T.c(),d(T,1),T.m(s,b)):T&&(ee(),_(T,1,1,()=>{T=null}),te()),A[7]?p?(p.p(A,B),B&128&&d(p,1)):(p=xe(A),p.c(),d(p,1),p.m(s,null)):p&&(ee(),_(p,1,1,()=>{p=null}),te())},i(A){I||(d(e.$$.fragment,A),d(v),d(c.$$.fragment,A),d(m.$$.fragment,A),d(F),d(H.$$.fragment,A),d(C.$$.fragment,A),d(T),d(p),I=!0)},o(A){_(e.$$.fragment,A),_(v),_(c.$$.fragment,A),_(m.$$.fragment,A),_(F),_(H.$$.fragment,A),_(C.$$.fragment,A),_(T),_(p),I=!1},d(A){A&&w(t),S(e),v&&v.d(),S(c),S(m),F&&F.d(),S(H),S(C),T&&T.d(),p&&p.d()}}}function Zr(n,t,r){let e,o,l,s,a,f,u,c,$,k,h,m,i,g,W,H,E;J(n,er,T=>r(21,h=T)),J(n,Ae,T=>r(22,m=T)),J(n,he,T=>r(2,i=T)),J(n,$t,T=>r(3,g=T)),J(n,Se,T=>r(4,W=T)),J(n,st,T=>r(14,H=T)),J(n,at,T=>r(15,E=T));var C,M,b,I,v;let{namespace:F}=t;return n.$$set=T=>{"namespace"in T&&r(0,F=T.namespace)},n.$$.update=()=>{n.$$.dirty&4&&r(1,{workflow:e,workers:o}=i,e,(r(13,o),r(2,i))),n.$$.dirty&16&&r(12,l=W.params.id),n.$$.dirty&3&&r(11,s={namespace:F,workflow:e==null?void 0:e.id,run:e==null?void 0:e.runId}),n.$$.dirty&65540&&r(10,a=r(16,C=i==null?void 0:i.workflow)===null||C===void 0?void 0:C.isRunning),n.$$.dirty&131076&&r(9,f=["Terminated","TimedOut","Canceled"].includes(r(17,M=i.workflow)===null||M===void 0?void 0:M.status)),n.$$.dirty&4456452&&r(8,u=yr(r(18,b=i==null?void 0:i.workflow)===null||b===void 0?void 0:b.status,m)),n.$$.dirty&524300&&r(7,c=rr(g,r(19,I=i==null?void 0:i.workflow)===null||I===void 0?void 0:I.runId)),n.$$.dirty&1048578&&r(6,$=r(20,v=e==null?void 0:e.mostRecentWorkerVersionStamp)===null||v===void 0?void 0:v.useVersioning),n.$$.dirty&6291458&&r(5,k=tr(e,m,h))},[F,e,i,g,W,k,$,c,u,f,a,s,l,o,H,E,C,M,b,I,v,h,m]}class ht extends ce{constructor(t){super(),me(this,t,Zr,Xr,ue,{namespace:0})}}async function xr({activity:n,namespace:t,settings:r,accessToken:e},{convertWithCodec:o=or,decodeAttributes:l=nr}={}){const s=await o({attributes:n,namespace:t,settings:r,accessToken:e});return l(s)}const eo=async({activity:n,namespace:t,settings:r,accessToken:e})=>await xr({activity:n,namespace:t,settings:r,accessToken:e}),et=async(n,t,r,e)=>{const o=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of o){const a=await eo({activity:s,namespace:t,settings:r,accessToken:e});l.push(a)}return l};function to(n){let t,r,e,o;r=new ht({props:{namespace:n[0].params.namespace}});const l=n[10].default,s=Me(l,n,n[11],null);return{c(){t=Q("div"),D(r.$$.fragment),e=O(),s&&s.c(),this.h()},l(a){t=Y(a,"DIV",{class:!0});var f=z(t);R(r.$$.fragment,f),f.forEach(w),e=U(a),s&&s.l(a),this.h()},h(){j(t,"class","px-8 pt-24 md:pt-20")},m(a,f){y(a,t,f),P(r,t,null),y(a,e,f),s&&s.m(a,f),o=!0},p(a,f){const u={};f&1&&(u.namespace=a[0].params.namespace),r.$set(u),s&&s.p&&(!o||f&2048)&&ye(s,l,a,a[11],o?He(l,a[11],f,null):qe(a[11]),null)},i(a){o||(d(r.$$.fragment,a),d(s,a),o=!0)},o(a){_(r.$$.fragment,a),_(s,a),o=!1},d(a){a&&(w(t),w(e)),S(r),s&&s.d(a)}}}function ro(n){let t,r;return t=new ft({props:{class:"pt-24"}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p:fe,i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function oo(n){let t,r;return t=new wt({props:{error:n[1]}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2&&(l.error=e[1]),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function no(n){let t,r,e,o,l;const s=[oo,ro,to],a=[];function f(u,c){return u[1]?0:u[2].workflow?2:1}return r=f(n),e=a[r]=s[r](n),{c(){t=Q("div"),e.c(),this.h()},l(u){t=Y(u,"DIV",{class:!0});var c=z(t);e.l(c),c.forEach(w),this.h()},h(){j(t,"class",o="surface-secondary absolute bottom-0 left-0 right-0 "+(n[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0")},m(u,c){y(u,t,c),a[r].m(t,null),l=!0},p(u,c){let $=r;r=f(u),r===$?a[r].p(u,c):(ee(),_(a[$],1,1,()=>{a[$]=null}),te(),e=a[r],e?e.p(u,c):(e=a[r]=s[r](u),e.c()),d(e,1),e.m(t,null)),(!l||c&8&&o!==(o="surface-secondary absolute bottom-0 left-0 right-0 "+(u[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0"))&&j(t,"class",o)},i(u){l||(d(e),l=!0)},o(u){_(e),l=!1},d(u){u&&w(t),a[r].d()}}}function lo(n){let t,r,e;t=new ht({props:{namespace:n[0].params.namespace}});const o=n[10].default,l=Me(o,n,n[11],null);return{c(){D(t.$$.fragment),r=O(),l&&l.c()},l(s){R(t.$$.fragment,s),r=U(s),l&&l.l(s)},m(s,a){P(t,s,a),y(s,r,a),l&&l.m(s,a),e=!0},p(s,a){const f={};a&1&&(f.namespace=s[0].params.namespace),t.$set(f),l&&l.p&&(!e||a&2048)&&ye(l,o,s,s[11],e?He(o,s[11],a,null):qe(s[11]),null)},i(s){e||(d(t.$$.fragment,s),d(l,s),e=!0)},o(s){_(t.$$.fragment,s),_(l,s),e=!1},d(s){s&&w(r),S(t,s),l&&l.d(s)}}}function so(n){let t,r;return t=new ft({}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p:fe,i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function ao(n){let t,r;return t=new wt({props:{error:n[1]}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2&&(l.error=e[1]),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function fo(n){let t,r,e,o;const l=[ao,so,lo],s=[];function a(f,u){return f[1]?0:f[2].workflow?2:1}return r=a(n),e=s[r]=l[r](n),{c(){t=Q("div"),e.c(),this.h()},l(f){t=Y(f,"DIV",{class:!0,slot:!0});var u=z(t);e.l(u),u.forEach(w),this.h()},h(){j(t,"class","flex h-full flex-col gap-0"),j(t,"slot","fallback")},m(f,u){y(f,t,u),s[r].m(t,null),o=!0},p(f,u){let c=r;r=a(f),r===c?s[r].p(f,u):(ee(),_(s[c],1,1,()=>{s[c]=null}),te(),e=s[r],e?e.p(f,u):(e=s[r]=l[r](f),e.c()),d(e,1),e.m(t,null))},i(f){o||(d(e),o=!0)},o(f){_(e),o=!1},d(f){f&&w(t),s[r].d()}}}function io(n){let t,r;return t=new At({props:{$$slots:{fallback:[fo],default:[no]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,[o]){const l={};o&2063&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function uo(n,t,r){let e,o,l,s,a,f,u,c,$,k,h,m;J(n,Le,v=>r(7,s=v)),J(n,Se,v=>r(0,a=v)),J(n,$e,v=>r(8,f=v)),J(n,at,v=>r(9,u=v)),J(n,Ve,v=>r(13,c=v)),J(n,he,v=>r(2,$=v)),J(n,Ae,v=>r(14,k=v)),J(n,sr,v=>r(15,h=v)),J(n,Et,v=>r(3,m=v));let{$$slots:i={},$$scope:g}=t,W,H;const E=async(v,F,T,p,L)=>{const{settings:le}=a.data,{workflow:A,error:B}=await Ne({namespace:v,workflowId:F,runId:T});if(B){r(1,W=B);return}const{taskQueue:N}=A,X=await Kt({queue:N,namespace:v});A.pendingActivities=await et(A,v,le,h==null?void 0:h.accessToken),re(he,$={workflow:A,workers:X},$),H=new AbortController,re(Ae,k=await lr({namespace:v,workflowId:F,runId:T,sort:L?"ascending":p,signal:H.signal,historySize:A.historyEvents}),k)},C=async v=>{var F;if(v&&(!((F=$==null?void 0:$.workflow)===null||F===void 0)&&F.isRunning)){const{settings:T}=a.data,{workflow:p,error:L}=await Ne({namespace:e,workflowId:o,runId:l});if(L){r(1,W=L);return}p.pendingActivities=await et(p,e,T,h==null?void 0:h.accessToken),re(he,$={...$,workflow:p},$)}},M=()=>{re(Ae,k=[],k),H&&H.abort()},b=()=>{re(Ve,c=null,c),re(he,$=Qt,$),r(1,W=void 0),M()},I=()=>{re(Ve,c=null,c),M()};return vt(()=>{const v=a.url.searchParams.get("sort");v&&re(Le,s=v,s)}),nt(()=>{b()}),n.$$set=v=>{"$$scope"in v&&r(11,g=v.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r(6,{namespace:e,workflow:o,run:l}=a.params,e,(r(5,o),r(0,a)),(r(4,l),r(0,a))),n.$$.dirty&16&&b(),n.$$.dirty&640&&I(),n.$$.dirty&752&&E(e,o,l,s,u),n.$$.dirty&256&&C(f)},[a,W,$,m,l,o,e,s,f,u,i,g]}class co extends ce{constructor(t){super(),me(this,t,uo,io,ue,{})}}const kt={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},mo=ut(kt),po=()=>{mo.set(kt)};function _o(n){let t;const r=n[0].default,e=Me(r,n,n[1],null);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,l){e&&e.m(o,l),t=!0},p(o,l){e&&e.p&&(!t||l&2)&&ye(e,r,o,o[1],t?He(r,o[1],l,null):qe(o[1]),null)},i(o){t||(d(e,o),t=!0)},o(o){_(e,o),t=!1},d(o){e&&e.d(o)}}}function go(n){let t,r;return t=new co({props:{$$slots:{default:[_o]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function wo(n,t,r){let{$$slots:e={},$$scope:o}=t;return nt(()=>{po()}),n.$$set=l=>{"$$scope"in l&&r(1,o=l.$$scope)},[e,o]}class mn extends ce{constructor(t){super(),me(this,t,wo,go,ue,{})}}export{mn as component};
