import{s as _e,e as U,a as j,t as J,b as O,d as Q,g as w,h as Y,f as G,j as z,k as M,l as q,n as fe,c as K,v as ee,S as oe,T as se,a5 as nt,w as le,x as ce,y as lt,a0 as It,_ as st,P as Ct,a3 as at,p as Me,u as ye,q as qe,r as Ne}from"../chunks/scheduler.nTMv1MXo.js";import{S as de,i as ge,c as P,a as V,m as W,t as _,b,d as T,f as ae,g as te,e as re,h as ft}from"../chunks/index.7zaskILM.js";import{d as At}from"../chunks/index.OI4ueFuJ.js";import{p as Ve}from"../chunks/stores.KDd_Cjc6.js";import{v as Dt}from"../chunks/data-encoder-settings.YVgjZV-X.js";import{L as We}from"../chunks/link.N-9XPlE4.js";import{t as S}from"../chunks/translate.gmg0mSLF.js";import{a as it}from"../chunks/workflows.y93Xh_BY.js";import{e as Se,b as ue,m as ve,n as Ee,c as Ie,o as Ce,p as Ae,q as De}from"../chunks/route-for.JJeI0iy7.js";import{L as Rt}from"../chunks/labs-mode-guard.6WHACdz4.js";import{L as ut}from"../chunks/loading.EPn0DoMJ.js";import{a as ct}from"../chunks/index.9WTMLd_y.js";import{e as Pe}from"../chunks/each.QNxPTb87.js";import{C as St,T as Pt,w as Vt,a as Wt}from"../chunks/workflow-terminate-enabled.viXUyb2f.js";import{w as mt}from"../chunks/entry.cjCEkBJA.js";import{C as Tt}from"../chunks/checkbox.qajqqsyw.js";import{I as pt}from"../chunks/input.UvMjP7iW.js";import{M as _t}from"../chunks/modal.179YypDJ.js";import{R as Mt,a as yt}from"../chunks/radio-input.TVOoVeKR.js";import{R as ke}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as qt,g as Nt,h as He}from"../chunks/workflow-service.8Ihls681.js";import{r as dt,f as Re,e as Ft,t as Be}from"../chunks/events.sP0ja2vH.js";import{p as Ht}from"../chunks/persist-store.Bt0rm_3X.js";import{i as gt}from"../chunks/is-network-error.S9c7UGKS.js";import{C as Bt}from"../chunks/code-block.D676djbh.js";import{t as Lt}from"../chunks/toaster.aSgVlf9P.js";import{B as Ut}from"../chunks/button.xcS1ehqi.js";import{B as Te}from"../chunks/badge.AoEUBnwG.js";import{I as Ot}from"../chunks/icon.ohXH-MYs.js";import{c as Qt}from"../chunks/menu.ETLv3S-j.js";import{M as jt}from"../chunks/menu-divider.l1Gg4hu5.js";import{S as Yt}from"../chunks/split-button.pjdPWB3m.js";import{T as wt}from"../chunks/tooltip.R_OnMv4o.js";import{c as zt}from"../chunks/core-user.SCM6T2zr.js";import{s as Jt}from"../chunks/settings.h0y7-zcN.js";import{r as he,w as be,i as Gt}from"../chunks/workflow-run.7aTtZhKZ.js";import{w as Kt}from"../chunks/write-actions-are-allowed.DBo07m17.js";import{W as Xt}from"../chunks/workflow-status.m0ZuM8Jo.js";import{A as $t}from"../chunks/alert.F2cshnpa.js";import{C as Le,g as Zt,a as xt}from"../chunks/pollers-service.mMPI5XAI.js";import{C as er}from"../chunks/index.2DtnhQSa.js";import{T as tr,a as rr,b as pe}from"../chunks/tab.B4TdFnAz.js";import{l as ht}from"../chunks/labs-mode.zW1qJGi3.js";import{n as or}from"../chunks/namespaces.1JEdqDl9.js";import{g as nr}from"../chunks/get-workflow-relationships.T9G2EbCu.js";import{h as lr}from"../chunks/has.V_8WQmBH.js";import{f as sr,b as ar,h as fr}from"../chunks/task-queue-compatibility.52mtxoi2.js";import{f as ir,d as ur}from"../chunks/decode-payload.vLdMQ65X.js";import{f as cr}from"../chunks/events-service.G91A3xly.js";import{a as mr}from"../chunks/auth-user.tNeez1D5.js";import{a as Ue}from"../chunks/event-view.LlDZBJ-o.js";function pr(n){let r=S("workflows.back-to-workflows")+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p:ee,d(t){t&&w(e)}}}function _r(n){var R,H;let r,e,t,o,l,s,f=(((R=n[0])==null?void 0:R.statusCode)??"500")+"",a,u,c,g,d,k,m=(((H=n[0])==null?void 0:H.statusText)??"")+"",i,$;return t=new We({props:{href:`${Se({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[pr]},$$scope:{ctx:n}}}),{c(){r=U("header"),e=U("div"),P(t.$$.fragment),o=j(),l=U("div"),s=U("h1"),a=J(f),u=j(),c=U("p"),g=J(n[1]),d=j(),k=U("p"),i=J(m),this.h()},l(h){r=O(h,"HEADER",{class:!0});var D=Q(r);e=O(D,"DIV",{class:!0});var N=Q(e);V(t.$$.fragment,N),N.forEach(w),D.forEach(w),o=Y(h),l=O(h,"DIV",{class:!0});var E=Q(l);s=O(E,"H1",{class:!0});var I=Q(s);a=G(I,f),I.forEach(w),u=Y(E),c=O(E,"P",{class:!0});var v=Q(c);g=G(v,n[1]),v.forEach(w),d=Y(E),k=O(E,"P",{class:!0});var F=Q(k);i=G(F,m),F.forEach(w),E.forEach(w),this.h()},h(){z(e,"class","mb-4 block"),z(r,"class","mb-4 flex flex-col gap-1"),z(s,"class","leading-0 text-[12rem] font-semibold"),z(c,"class","-mt-12 text-lg"),z(k,"class","text-2xl font-bold text-red-700"),z(l,"class","text-center align-middle")},m(h,D){M(h,r,D),q(r,e),W(t,e,null),M(h,o,D),M(h,l,D),q(l,s),q(s,a),q(l,u),q(l,c),q(c,g),q(l,d),q(l,k),q(k,i),$=!0},p(h,[D]){var E,I;const N={};D&12&&(N.href=`${Se({namespace:h[2]})}?${h[3]}`),D&32&&(N.$$scope={dirty:D,ctx:h}),t.$set(N),(!$||D&1)&&f!==(f=(((E=h[0])==null?void 0:E.statusCode)??"500")+"")&&fe(a,f),(!$||D&2)&&fe(g,h[1]),(!$||D&1)&&m!==(m=(((I=h[0])==null?void 0:I.statusText)??"")+"")&&fe(i,m)},i(h){$||(_(t.$$.fragment,h),$=!0)},o(h){b(t.$$.fragment,h),$=!1},d(h){h&&(w(r),w(o),w(l)),T(t)}}}function dr(n,r,e){let t,o,l,s;K(n,Ve,a=>e(4,l=a)),K(n,it,a=>e(3,s=a));let{error:f}=r;return n.$$set=a=>{"error"in a&&e(0,f=a.error)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{namespace:t}=l.params,t),n.$$.dirty&1&&e(1,o=f.statusCode===404?S("workflows.workflow-404-title"):S("workflows.workflow-error-title"))},[f,o,t,s,l]}class bt extends de{constructor(r){super(),ge(this,r,dr,_r,_e,{error:0})}}const kt=Ht("resetWorkflows",{});function Oe(n,r,e){const t=n.slice();return t[18]=r[e],t}function gr(n){let r,e=S("workflows.reset-modal-title")+"",t;return{c(){r=U("h3"),t=J(e),this.h()},l(o){r=O(o,"H3",{slot:!0});var l=Q(r);t=G(l,e),l.forEach(w),this.h()},h(){z(r,"slot","title")},m(o,l){M(o,r,l),q(r,t)},p:ee,d(o){o&&w(r)}}}function Qe(n){let r,e;return r=new yt({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&64&&(l.id="reset-event-"+t[18].id),o&64&&(l.value=t[18].id),o&64&&(l.label=t[18].id+" - "+t[18].eventType),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function wr(n){let r,e,t=Pe(n[6]),o=[];for(let s=0;s<t.length;s+=1)o[s]=Qe(Oe(n,t,s));const l=s=>b(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=ce()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);r=ce()},m(s,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,f);M(s,r,f),e=!0},p(s,f){if(f&64){t=Pe(s[6]);let a;for(a=0;a<t.length;a+=1){const u=Oe(s,t,a);o[a]?(o[a].p(u,f),_(o[a],1)):(o[a]=Qe(u),o[a].c(),_(o[a],1),o[a].m(r.parentNode,r))}for(te(),a=t.length;a<o.length;a+=1)l(a);re()}},i(s){if(!e){for(let f=0;f<t.length;f+=1)_(o[f]);e=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)b(o[f]);e=!1},d(s){s&&w(r),lt(o,s)}}}function $r(n){let r,e,t,o,l,s,f,a;e=new Mt({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:S("workflows.reset-event-radio-group-description"),$$slots:{default:[wr]},$$scope:{ctx:n}}}),o=new Tt({props:{id:"reset-reapply-type-checkbox",checked:n[4]===ke.Signal,label:S("workflows.reset-reapply-type-label")}}),o.$on("change",n[9]);function u(g){n[13](g)}let c={id:"reset-reason",label:S("common.reason")};return n[5]!==void 0&&(c.value=n[5]),s=new pt({props:c}),oe.push(()=>ae(s,"value",u)),{c(){r=U("div"),P(e.$$.fragment),t=j(),P(o.$$.fragment),l=j(),P(s.$$.fragment),this.h()},l(g){r=O(g,"DIV",{class:!0});var d=Q(r);V(e.$$.fragment,d),t=Y(d),V(o.$$.fragment,d),l=Y(d),V(s.$$.fragment,d),d.forEach(w),this.h()},h(){z(r,"class","flex w-full flex-col gap-4")},m(g,d){M(g,r,d),W(e,r,null),q(r,t),W(o,r,null),q(r,l),W(s,r,null),a=!0},p(g,d){const k={};d&2097216&&(k.$$scope={dirty:d,ctx:g}),e.$set(k);const m={};d&16&&(m.checked=g[4]===ke.Signal),o.$set(m);const i={};!f&&d&32&&(f=!0,i.value=g[5],se(()=>f=!1)),s.$set(i)},i(g){a||(_(e.$$.fragment,g),_(o.$$.fragment,g),_(s.$$.fragment,g),a=!0)},o(g){b(e.$$.fragment,g),b(o.$$.fragment,g),b(s.$$.fragment,g),a=!1},d(g){g&&w(r),T(e),T(o),T(s)}}}function hr(n){let r,e,t,o;function l(a){n[14](a)}function s(a){n[15](a)}let f={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:S("common.confirm"),cancelText:S("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[$r],title:[gr]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),r=new _t({props:f}),oe.push(()=>ae(r,"error",l)),oe.push(()=>ae(r,"open",s)),r.$on("confirmModal",n[10]),r.$on("cancelModal",n[8]),{c(){P(r.$$.fragment)},l(a){V(r.$$.fragment,a)},m(a,u){W(r,a,u),o=!0},p(a,[u]){const c={};u&8&&(c.loading=a[3]),u&2097264&&(c.$$scope={dirty:u,ctx:a}),!e&&u&4&&(e=!0,c.error=a[2],se(()=>e=!1)),!t&&u&1&&(t=!0,c.open=a[0],se(()=>t=!1)),r.$set(c)},i(a){o||(_(r.$$.fragment,a),o=!0)},o(a){b(r.$$.fragment,a),o=!1},d(a){T(r,a)}}}function br(n,r,e){let t,o=ee,l=()=>(o(),o=nt(g,I=>e(16,t=I)),g),s,f;K(n,dt,I=>e(6,f=I)),n.$$.on_destroy.push(()=>o());let{open:a}=r,{workflow:u}=r,{namespace:c}=r,{refresh:g}=r;l();let d="",k=!1,m,i=mt("");K(n,i,I=>e(17,s=I));let $;const R=()=>{e(0,a=!1),e(4,m=ke.Signal),le(i,s="",s),e(5,$="")},H=I=>{e(4,m=I.detail.checked?ke.Signal:ke.None)},h=async()=>{e(2,d=""),e(3,k=!0);try{const I=await qt({namespace:c,workflow:u,eventId:s,reason:$,reapplyType:m});I&&I.runId&&kt.update(v=>({...v,[u.runId]:I.runId})),le(g,t=Date.now(),t),R()}catch(I){e(2,d=gt(I)?I.message:S("common.unknown-error"))}finally{e(3,k=!1)}R()};function D(I){$=I,e(5,$)}function N(I){d=I,e(2,d)}function E(I){a=I,e(0,a)}return n.$$set=I=>{"open"in I&&e(0,a=I.open),"workflow"in I&&e(11,u=I.workflow),"namespace"in I&&e(12,c=I.namespace),"refresh"in I&&l(e(1,g=I.refresh))},[a,g,d,k,m,$,f,i,R,H,h,u,c,D,N,E]}class kr extends de{constructor(r){super(),ge(this,r,br,hr,_e,{open:0,workflow:11,namespace:12,refresh:1})}}function vr(n){let r,e=S("workflows.signal-modal-title")+"",t;return{c(){r=U("h3"),t=J(e),this.h()},l(o){r=O(o,"H3",{slot:!0});var l=Q(r);t=G(l,e),l.forEach(w),this.h()},h(){z(r,"slot","title")},m(o,l){M(o,r,l),q(r,t)},p:ee,d(o){o&&w(r)}}}function Er(n){let r,e,t,o,l,s,f=S("workflows.signal-payload-input-label")+"",a,u,c,g=S("workflows.signal-payload-input-label-hint")+"",d,k,m,i;function $(h){n[12](h)}let R={id:"signal-name",label:S("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(R.value=n[4]),e=new pt({props:R}),oe.push(()=>ae(e,"value",$));let H={class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1};return m=new Bt({props:H}),n[13](m),m.$on("change",n[9]),{c(){r=U("div"),P(e.$$.fragment),o=j(),l=U("div"),s=U("span"),a=J(f),u=j(),c=U("span"),d=J(g),k=j(),P(m.$$.fragment),this.h()},l(h){r=O(h,"DIV",{slot:!0,class:!0});var D=Q(r);V(e.$$.fragment,D),o=Y(D),l=O(D,"DIV",{});var N=Q(l);s=O(N,"SPAN",{class:!0});var E=Q(s);a=G(E,f),E.forEach(w),u=Y(N),c=O(N,"SPAN",{class:!0});var I=Q(c);d=G(I,g),I.forEach(w),k=Y(N),V(m.$$.fragment,N),N.forEach(w),D.forEach(w),this.h()},h(){z(s,"class","font-secondary text-sm font-medium"),z(c,"class","font-secondary text-xs font-light italic"),z(r,"slot","content"),z(r,"class","flex flex-col gap-4")},m(h,D){M(h,r,D),W(e,r,null),q(r,o),q(r,l),q(l,s),q(s,a),q(l,u),q(l,c),q(c,d),q(l,k),W(m,l,null),i=!0},p(h,D){const N={};!t&&D&16&&(t=!0,N.value=h[4],se(()=>t=!1)),e.$set(N);const E={};D&32&&(E.content=h[5]),m.$set(E)},i(h){i||(_(e.$$.fragment,h),_(m.$$.fragment,h),i=!0)},o(h){b(e.$$.fragment,h),b(m.$$.fragment,h),i=!1},d(h){h&&w(r),T(e),n[13](null),T(m)}}}function Ir(n){let r,e,t,o;function l(a){n[14](a)}function s(a){n[15](a)}let f={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:S("common.submit"),cancelText:S("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[Er],title:[vr]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),r=new _t({props:f}),oe.push(()=>ae(r,"error",l)),oe.push(()=>ae(r,"open",s)),r.$on("cancelModal",n[7]),r.$on("confirmModal",n[8]),{c(){P(r.$$.fragment)},l(a){V(r.$$.fragment,a)},m(a,u){W(r,a,u),o=!0},p(a,[u]){const c={};u&8&&(c.loading=a[3]),u&16&&(c.confirmDisabled=!a[4]),u&131184&&(c.$$scope={dirty:u,ctx:a}),!e&&u&4&&(e=!0,c.error=a[2],se(()=>e=!1)),!t&&u&1&&(t=!0,c.open=a[0],se(()=>t=!1)),r.$set(c)},i(a){o||(_(r.$$.fragment,a),o=!0)},o(a){b(r.$$.fragment,a),o=!1},d(a){T(r,a)}}}function Cr(n,r,e){let t,o=ee,l=()=>(o(),o=nt(u,E=>e(16,t=E)),u);n.$$.on_destroy.push(()=>o());let{open:s}=r,{workflow:f}=r,{namespace:a}=r,{refresh:u}=r;l();let c="",g=!1,d="",k="",m;const i=()=>{e(0,s=!1),e(5,k=""),e(4,d=""),m==null||m.resetView(k)},$=async()=>{e(2,c=""),e(3,g=!0);try{await Nt({namespace:a,workflow:f,input:k,name:d}),le(u,t=Date.now(),t),Lt.push({message:S("workflows.signal-success"),id:"workflow-signal-success-toast"}),i()}catch(E){e(2,c=gt(E)?E.message:S("common.unknown-error"))}finally{e(3,g=!1)}},R=E=>{e(5,k=E.detail)};function H(E){d=E,e(4,d)}function h(E){oe[E?"unshift":"push"](()=>{m=E,e(6,m)})}function D(E){c=E,e(2,c)}function N(E){s=E,e(0,s)}return n.$$set=E=>{"open"in E&&e(0,s=E.open),"workflow"in E&&e(10,f=E.workflow),"namespace"in E&&e(11,a=E.namespace),"refresh"in E&&l(e(1,u=E.refresh))},[s,u,c,g,d,k,m,i,$,R,f,a,H,h,D,N]}class Ar extends de{constructor(r){super(),ge(this,r,Cr,Ir,_e,{open:0,workflow:10,namespace:11,refresh:1})}}const Dr=n=>!n.disableWriteActions&&!n.workflowResetDisabled,Rr=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function je(n,r,e){const t=n.slice();return t[29]=r[e].onClick,t[30]=r[e].destructive,t[31]=r[e].label,t[32]=r[e].allowed,t[33]=r[e].testId,t[34]=r[e].tooltip,t}function Sr(n){let r,e;return r=new wt({props:{bottomRight:!0,width:200,text:n[4],hide:n[5],$$slots:{default:[Wr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o[0]&16&&(l.text=t[4]),o[0]&32&&(l.hide=t[5]),o[0]&288|o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Pr(n){let r,e;return r=new Yt({props:{id:"workflow-actions",position:"right",disabled:n[11],primaryActionDisabled:!n[12]||n[2],label:S("workflows.request-cancellation"),menuLabel:S("workflows.workflow-actions"),$$slots:{default:[yr]},$$scope:{ctx:n}}}),r.$on("click",n[23]),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o[0]&2048&&(l.disabled=t[11]),o[0]&4100&&(l.primaryActionDisabled=!t[12]||t[2]),o[0]&1024|o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Vr(n){let r=S("workflows.reset")+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p:ee,d(t){t&&w(e)}}}function Wr(n){let r,e;return r=new Ut({props:{"aria-label":S("workflows.reset"),disabled:!n[5],variant:"primary",$$slots:{default:[Vr]},$$scope:{ctx:n}}}),r.$on("click",n[24]),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o[0]&32&&(l.disabled=!t[5]),o[1]&64&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Ye(n){let r,e;return r=new jt({}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Tr(n){let r=n[31]+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p(t,o){o[0]&1024&&r!==(r=t[31]+"")&&fe(e,r)},d(t){t&&w(e)}}}function Mr(n){let r,e,t;return r=new Qt({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[Tr]},$$scope:{ctx:n}}}),r.$on("click",function(){It(n[29])&&n[29].apply(this,arguments)}),{c(){P(r.$$.fragment),e=j()},l(o){V(r.$$.fragment,o),e=Y(o)},m(o,l){W(r,o,l),M(o,e,l),t=!0},p(o,l){n=o;const s={};l[0]&1024&&(s.destructive=n[30]),l[0]&1024&&(s.disabled=!n[32]),l[0]&1024&&(s["data-testid"]=n[33]),l[0]&1024|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),r.$set(s)},i(o){t||(_(r.$$.fragment,o),t=!0)},o(o){b(r.$$.fragment,o),t=!1},d(o){o&&w(e),T(r,o)}}}function ze(n){let r,e,t,o=n[30]&&Ye();return e=new wt({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[Mr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),r=j(),P(e.$$.fragment)},l(l){o&&o.l(l),r=Y(l),V(e.$$.fragment,l)},m(l,s){o&&o.m(l,s),M(l,r,s),W(e,l,s),t=!0},p(l,s){l[30]?o?s[0]&1024&&_(o,1):(o=Ye(),o.c(),_(o,1),o.m(r.parentNode,r)):o&&(te(),b(o,1,1,()=>{o=null}),re());const f={};s[0]&1024&&(f.text=l[34]),s[0]&1024&&(f.hide=!l[34]),s[0]&1024|s[1]&64&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){t||(_(o),_(e.$$.fragment,l),t=!0)},o(l){b(o),b(e.$$.fragment,l),t=!1},d(l){l&&w(r),o&&o.d(l),T(e,l)}}}function yr(n){let r,e,t=Pe(n[10]),o=[];for(let s=0;s<t.length;s+=1)o[s]=ze(je(n,t,s));const l=s=>b(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=ce()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);r=ce()},m(s,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,f);M(s,r,f),e=!0},p(s,f){if(f[0]&1024){t=Pe(s[10]);let a;for(a=0;a<t.length;a+=1){const u=je(s,t,a);o[a]?(o[a].p(u,f),_(o[a],1)):(o[a]=ze(u),o[a].c(),_(o[a],1),o[a].m(r.parentNode,r))}for(te(),a=t.length;a<o.length;a+=1)l(a);re()}},i(s){if(!e){for(let f=0;f<t.length;f+=1)_(o[f]);e=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)b(o[f]);e=!1},d(s){s&&w(r),lt(o,s)}}}function qr(n){let r,e,t,o,l,s,f,a,u,c,g,d,k,m,i;const $=[Pr,Sr],R=[];function H(p,y){return p[3]?0:1}r=H(n),e=R[r]=$[r](n);function h(p){n[25](p)}let D={refresh:he,workflow:n[0],namespace:n[1]};n[8]!==void 0&&(D.open=n[8]),o=new kr({props:D}),oe.push(()=>ae(o,"open",h));function N(p){n[26](p)}let E={refresh:he,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(E.open=n[9]),f=new Ar({props:E}),oe.push(()=>ae(f,"open",N));function I(p){n[27](p)}let v={refresh:he,workflow:n[0],namespace:n[1]};n[6]!==void 0&&(v.open=n[6]),c=new St({props:v}),oe.push(()=>ae(c,"open",I));function F(p){n[28](p)}let B={refresh:he,workflow:n[0],namespace:n[1]};return n[7]!==void 0&&(B.open=n[7]),k=new Pt({props:B}),oe.push(()=>ae(k,"open",F)),{c(){e.c(),t=j(),P(o.$$.fragment),s=j(),P(f.$$.fragment),u=j(),P(c.$$.fragment),d=j(),P(k.$$.fragment)},l(p){e.l(p),t=Y(p),V(o.$$.fragment,p),s=Y(p),V(f.$$.fragment,p),u=Y(p),V(c.$$.fragment,p),d=Y(p),V(k.$$.fragment,p)},m(p,y){R[r].m(p,y),M(p,t,y),W(o,p,y),M(p,s,y),W(f,p,y),M(p,u,y),W(c,p,y),M(p,d,y),W(k,p,y),i=!0},p(p,y){let X=r;r=H(p),r===X?R[r].p(p,y):(te(),b(R[X],1,1,()=>{R[X]=null}),re(),e=R[r],e?e.p(p,y):(e=R[r]=$[r](p),e.c()),_(e,1),e.m(t.parentNode,t));const C={};y[0]&1&&(C.workflow=p[0]),y[0]&2&&(C.namespace=p[1]),!l&&y[0]&256&&(l=!0,C.open=p[8],se(()=>l=!1)),o.$set(C);const A={};y[0]&1&&(A.workflow=p[0]),y[0]&2&&(A.namespace=p[1]),!a&&y[0]&512&&(a=!0,A.open=p[9],se(()=>a=!1)),f.$set(A);const L={};y[0]&1&&(L.workflow=p[0]),y[0]&2&&(L.namespace=p[1]),!g&&y[0]&64&&(g=!0,L.open=p[6],se(()=>g=!1)),c.$set(L);const Z={};y[0]&1&&(Z.workflow=p[0]),y[0]&2&&(Z.namespace=p[1]),!m&&y[0]&128&&(m=!0,Z.open=p[7],se(()=>m=!1)),k.$set(Z)},i(p){i||(_(e),_(o.$$.fragment,p),_(f.$$.fragment,p),_(c.$$.fragment,p),_(k.$$.fragment,p),i=!0)},o(p){b(e),b(o.$$.fragment,p),b(f.$$.fragment,p),b(c.$$.fragment,p),b(k.$$.fragment,p),i=!1},d(p){p&&(w(t),w(s),w(u),w(d)),R[r].d(p),T(o,p),T(f,p),T(c,p),T(k,p)}}}function Nr(n,r,e){let t,o,l,s,f,a,u,c,g;K(n,dt,L=>e(21,c=L)),K(n,Ve,L=>e(22,g=L));var d,k,m;let{workflow:i}=r,{namespace:$}=r,{cancelInProgress:R}=r,{isRunning:H}=r,h=!1,D=!1,N=!1,E=!1,I,v,F=zt();K(n,F,L=>e(20,u=L));const B=()=>e(6,h=!0),p=()=>e(8,N=!0);function y(L){N=L,e(8,N),e(5,f),e(4,I),e(18,o),e(17,l),e(19,s),e(0,i),e(16,m),e(21,c),e(14,d),e(15,k),e(22,g)}function X(L){E=L,e(9,E),e(5,f),e(4,I),e(18,o),e(17,l),e(19,s),e(0,i),e(16,m),e(21,c),e(14,d),e(15,k),e(22,g)}function C(L){h=L,e(6,h)}function A(L){D=L,e(7,D),e(5,f),e(4,I),e(18,o),e(17,l),e(19,s),e(0,i),e(16,m),e(21,c),e(14,d),e(15,k),e(22,g)}return n.$$set=L=>{"workflow"in L&&e(0,i=L.workflow),"namespace"in L&&e(1,$=L.namespace),"cancelInProgress"in L&&e(2,R=L.cancelInProgress),"isRunning"in L&&e(3,H=L.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&e(12,t=Vt(g.data.settings)),n.$$.dirty[0]&4194304&&e(18,o=Rr(g.data.settings)),n.$$.dirty[0]&4194304&&e(17,l=Wt(g.data.settings)),n.$$.dirty[0]&4194304&&e(19,s=Dr(g.data.settings)),n.$$.dirty[0]&2670593&&(s?s&&(e(14,d=i==null?void 0:i.pendingChildren)===null||d===void 0?void 0:d.length)>0?e(4,I=S("workflows.reset-disabled-pending-children")):s&&(e(15,k=i==null?void 0:i.pendingChildren)===null||k===void 0?void 0:k.length)===0&&c.length===0&&e(4,I=S("workflows.reset-disabled-no-events")):e(4,I=S("workflows.reset-disabled"))),n.$$.dirty[0]&2686977&&e(5,f=s&&(e(16,m=i==null?void 0:i.pendingChildren)===null||m===void 0?void 0:m.length)===0&&c.length>0),n.$$.dirty[0]&393264&&e(10,v=[{label:S("workflows.reset"),onClick:()=>e(8,N=!0),testId:"reset-button",allowed:f,tooltip:f?"":I},{label:S("workflows.signal"),onClick:()=>e(9,E=!0),testId:"signal-button",allowed:o,tooltip:o?"":S("workflows.signal-disabled")},{label:S("workflows.terminate"),onClick:()=>e(7,D=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":S("workflows.terminate-disabled")}]),n.$$.dirty[0]&1048578&&e(11,a=u.namespaceWriteDisabled($)||!Kt(Jt))},[i,$,R,H,I,f,h,D,N,E,v,a,t,F,d,k,m,l,o,s,u,c,g,B,p,y,X,C,A]}class Fr extends de{constructor(r){super(),ge(this,r,Nr,qr,_e,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}const Hr=(n,r)=>{var o;const e=n==="Running",t=(o=r==null?void 0:r.end)==null?void 0:o.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&t},Je=n=>{const r=n==null?void 0:n.indexOf("?");return r>-1?n.slice(0,r):n},x=(n,r,e=!1)=>{const t=Je(n).split("/"),o=Je(r).split("/");if(e&&t.length!==o.length)return!1;for(let l=0;l<t.length;l++){const s=t[l],f=o[l];if(s!==f)return!1}return!0};function Br(n){let r=(n[15]?S("common.workflows"):S("workflows.back-to-workflows"))+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p(t,o){o&32768&&r!==(r=(t[15]?S("common.workflows"):S("workflows.back-to-workflows"))+"")&&fe(e,r)},d(t){t&&w(e)}}}function Ge(n){let r,e;return r=new We({props:{href:ue({...n[14]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Lr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&16384&&(l.href=ue({...t[14]})),o&268435458&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Lr(n){var t;let r=((t=n[1])==null?void 0:t.runId)+"",e;return{c(){e=J(r)},l(o){e=G(o,r)},m(o,l){M(o,e,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.runId)+"")&&fe(e,r)},d(o){o&&w(e)}}}function Ke(n){let r,e,t,o=S("workers.last-used-version")+"",l,s,f,a,u,c=S("workers.next-version")+"",g,d,k;return s=new Le({props:{defaultVersion:n[2]===n[7]||n[2]===n[8],active:n[2]===n[8],buildId:n[2],$$slots:{"default-worker":[Or],"overall-default-worker":[Ur]},$$scope:{ctx:n}}}),d=new Le({props:{defaultVersion:!!n[7],active:n[7]===n[8],buildId:n[7],$$slots:{"default-worker":[jr],"overall-default-worker":[Qr]},$$scope:{ctx:n}}}),{c(){r=U("div"),e=U("p"),t=U("span"),l=J(o),P(s.$$.fragment),f=j(),a=U("p"),u=U("span"),g=J(c),P(d.$$.fragment),this.h()},l(m){r=O(m,"DIV",{class:!0});var i=Q(r);e=O(i,"P",{class:!0});var $=Q(e);t=O($,"SPAN",{});var R=Q(t);l=G(R,o),R.forEach(w),V(s.$$.fragment,$),$.forEach(w),f=Y(i),a=O(i,"P",{class:!0});var H=Q(a);u=O(H,"SPAN",{});var h=Q(u);g=G(h,c),h.forEach(w),V(d.$$.fragment,H),H.forEach(w),i.forEach(w),this.h()},h(){z(e,"class","flex items-center gap-1"),z(a,"class","flex items-center gap-1"),z(r,"class","flex gap-4")},m(m,i){M(m,r,i),q(r,e),q(e,t),q(t,l),W(s,e,null),q(r,f),q(r,a),q(a,u),q(u,g),W(d,a,null),k=!0},p(m,i){const $={};i&388&&($.defaultVersion=m[2]===m[7]||m[2]===m[8]),i&260&&($.active=m[2]===m[8]),i&4&&($.buildId=m[2]),i&268435716&&($.$$scope={dirty:i,ctx:m}),s.$set($);const R={};i&128&&(R.defaultVersion=!!m[7]),i&384&&(R.active=m[7]===m[8]),i&128&&(R.buildId=m[7]),i&268435840&&(R.$$scope={dirty:i,ctx:m}),d.$set(R)},i(m){k||(_(s.$$.fragment,m),_(d.$$.fragment,m),k=!0)},o(m){b(s.$$.fragment,m),b(d.$$.fragment,m),k=!1},d(m){m&&w(r),T(s),T(d)}}}function Xe(n){let r=S("workers.overall")+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p:ee,d(t){t&&w(e)}}}function Ur(n){let r,e=n[2]===n[8]&&Xe();return{c(){e&&e.c(),r=ce()},l(t){e&&e.l(t),r=ce()},m(t,o){e&&e.m(t,o),M(t,r,o)},p(t,o){t[2]===t[8]?e?e.p(t,o):(e=Xe(),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&w(r),e&&e.d(t)}}}function Or(n){let r=S("workers.default")+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p:ee,d(t){t&&w(e)}}}function Ze(n){let r=S("workers.overall")+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p:ee,d(t){t&&w(e)}}}function Qr(n){let r,e=n[7]===n[8]&&Ze();return{c(){e&&e.c(),r=ce()},l(t){e&&e.l(t),r=ce()},m(t,o){e&&e.m(t,o),M(t,r,o)},p(t,o){t[7]===t[8]?e?e.p(t,o):(e=Ze(),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&w(r),e&&e.d(t)}}}function jr(n){let r=S("workers.default")+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p:ee,d(t){t&&w(e)}}}function Yr(n){var t;let r=((t=n[1])==null?void 0:t.historyEvents)+"",e;return{c(){e=J(r)},l(o){e=G(o,r)},m(o,l){M(o,e,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.historyEvents)+"")&&fe(e,r)},d(o){o&&w(e)}}}function zr(n){let r,e;return r=new Te({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Yr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&268435458&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Jr(n){var t,o;let r=((o=(t=n[16])==null?void 0:t.pollers)==null?void 0:o.length)+"",e;return{c(){e=J(r)},l(l){e=G(l,r)},m(l,s){M(l,e,s)},p(l,s){var f,a;s&65536&&r!==(r=((a=(f=l[16])==null?void 0:f.pollers)==null?void 0:a.length)+"")&&fe(e,r)},d(l){l&&w(e)}}}function Gr(n){let r,e;return r=new Te({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Jr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&268500992&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Kr(n){let r=n[6].relationshipCount+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p(t,o){o&64&&r!==(r=t[6].relationshipCount+"")&&fe(e,r)},d(t){t&&w(e)}}}function Xr(n){let r,e;return r=new Te({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Kr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&268435520&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function xe(n){let r,e;return r=new pe({props:{label:S("workflows.pending-activities-tab"),id:"pending-activities-tab",href:De(n[14]),active:x(n[5].url.pathname,De(n[14])),$$slots:{default:[xr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&16384&&(l.href=De(t[14])),o&16416&&(l.active=x(t[5].url.pathname,De(t[14]))),o&268439554&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function et(n){let r,e;return r=new Ot({props:{name:"canceled",width:20,height:20}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Zr(n){var s,f;let r,e=((f=(s=n[1])==null?void 0:s.pendingActivities)==null?void 0:f.length)+"",t,o,l=n[12]&&et();return{c(){l&&l.c(),r=j(),t=J(e)},l(a){l&&l.l(a),r=Y(a),t=G(a,e)},m(a,u){l&&l.m(a,u),M(a,r,u),M(a,t,u),o=!0},p(a,u){var c,g;a[12]?l?u&4096&&_(l,1):(l=et(),l.c(),_(l,1),l.m(r.parentNode,r)):l&&(te(),b(l,1,1,()=>{l=null}),re()),(!o||u&2)&&e!==(e=((g=(c=a[1])==null?void 0:c.pendingActivities)==null?void 0:g.length)+"")&&fe(t,e)},i(a){o||(_(l),o=!0)},o(a){b(l),o=!1},d(a){a&&(w(r),w(t)),l&&l.d(a)}}}function xr(n){let r,e;return r=new Te({props:{type:n[12]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Zr]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&4096&&(l.type=t[12]?"warning":"blue"),o&268439554&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function eo(n){let r,e,t,o,l,s,f,a,u,c,g,d,k;r=new pe({props:{label:S("workflows.history-tab"),id:"history-tab",href:ue({...n[14]}),active:x(n[5].url.pathname,ue({...n[14]})),$$slots:{default:[zr]},$$scope:{ctx:n}}}),t=new pe({props:{label:S("workflows.workers-tab"),id:"workers-tab",href:ve(n[14]),active:x(n[5].url.pathname,ve(n[14])),$$slots:{default:[Gr]},$$scope:{ctx:n}}}),l=new pe({props:{label:S("workflows.relationships"),id:"relationships-tab",href:Ee(n[14]),active:x(n[5].url.pathname,Ee(n[14])),$$slots:{default:[Xr]},$$scope:{ctx:n}}});let m=!n[18]&&xe(n);return a=new pe({props:{label:S("workflows.call-stack-tab"),id:"call-stack-tab",href:Ie(n[14]),active:x(n[5].url.pathname,Ie(n[14]))}}),c=new pe({props:{label:S("workflows.queries-tab"),id:"queries-tab",href:Ce(n[14]),active:x(n[5].url.pathname,Ce(n[14]))}}),d=new pe({props:{label:S("workflows.metadata-tab"),id:"metadata-tab",href:Ae(n[14]),active:x(n[5].url.pathname,Ae(n[14]))}}),{c(){P(r.$$.fragment),e=j(),P(t.$$.fragment),o=j(),P(l.$$.fragment),s=j(),m&&m.c(),f=j(),P(a.$$.fragment),u=j(),P(c.$$.fragment),g=j(),P(d.$$.fragment)},l(i){V(r.$$.fragment,i),e=Y(i),V(t.$$.fragment,i),o=Y(i),V(l.$$.fragment,i),s=Y(i),m&&m.l(i),f=Y(i),V(a.$$.fragment,i),u=Y(i),V(c.$$.fragment,i),g=Y(i),V(d.$$.fragment,i)},m(i,$){W(r,i,$),M(i,e,$),W(t,i,$),M(i,o,$),W(l,i,$),M(i,s,$),m&&m.m(i,$),M(i,f,$),W(a,i,$),M(i,u,$),W(c,i,$),M(i,g,$),W(d,i,$),k=!0},p(i,$){const R={};$&16384&&(R.href=ue({...i[14]})),$&16416&&(R.active=x(i[5].url.pathname,ue({...i[14]}))),$&268435458&&(R.$$scope={dirty:$,ctx:i}),r.$set(R);const H={};$&16384&&(H.href=ve(i[14])),$&16416&&(H.active=x(i[5].url.pathname,ve(i[14]))),$&268500992&&(H.$$scope={dirty:$,ctx:i}),t.$set(H);const h={};$&16384&&(h.href=Ee(i[14])),$&16416&&(h.active=x(i[5].url.pathname,Ee(i[14]))),$&268435520&&(h.$$scope={dirty:$,ctx:i}),l.$set(h),i[18]?m&&(te(),b(m,1,1,()=>{m=null}),re()):m?(m.p(i,$),$&262144&&_(m,1)):(m=xe(i),m.c(),_(m,1),m.m(f.parentNode,f));const D={};$&16384&&(D.href=Ie(i[14])),$&16416&&(D.active=x(i[5].url.pathname,Ie(i[14]))),a.$set(D);const N={};$&16384&&(N.href=Ce(i[14])),$&16416&&(N.active=x(i[5].url.pathname,Ce(i[14]))),c.$set(N);const E={};$&16384&&(E.href=Ae(i[14])),$&16416&&(E.active=x(i[5].url.pathname,Ae(i[14]))),d.$set(E)},i(i){k||(_(r.$$.fragment,i),_(t.$$.fragment,i),_(l.$$.fragment,i),_(m),_(a.$$.fragment,i),_(c.$$.fragment,i),_(d.$$.fragment,i),k=!0)},o(i){b(r.$$.fragment,i),b(t.$$.fragment,i),b(l.$$.fragment,i),b(m),b(a.$$.fragment,i),b(c.$$.fragment,i),b(d.$$.fragment,i),k=!1},d(i){i&&(w(e),w(o),w(s),w(f),w(u),w(g)),T(r,i),T(t,i),T(l,i),m&&m.d(i),T(a,i),T(c,i),T(d,i)}}}function to(n){let r,e;return r=new rr({props:{class:"surface-secondary flex flex-wrap gap-6 p-4",label:"workflow detail",$$slots:{default:[eo]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&268783714&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function tt(n){let r,e,t,o;return e=new $t({props:{bold:!0,icon:"info",intent:"info",title:S("workflows.cancel-request-sent"),$$slots:{default:[ro]},$$scope:{ctx:n}}}),{c(){r=U("div"),P(e.$$.fragment)},l(l){r=O(l,"DIV",{});var s=Q(r);V(e.$$.fragment,s),s.forEach(w)},m(l,s){M(l,r,s),W(e,r,null),o=!0},p(l,s){const f={};s&268435456&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){o||(_(e.$$.fragment,l),l&&(t||st(()=>{t=ft(r,ct,{duration:200,delay:100}),t.start()})),o=!0)},o(l){b(e.$$.fragment,l),o=!1},d(l){l&&w(r),T(e)}}}function ro(n){let r=S("workflows.cancel-request-sent-description")+"",e;return{c(){e=J(r)},l(t){e=G(t,r)},m(t,o){M(t,e,o)},p:ee,d(t){t&&w(e)}}}function rt(n){let r,e,t,o;return e=new $t({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:S("workflows.reset-success-alert-title"),$$slots:{default:[no]},$$scope:{ctx:n}}}),{c(){r=U("div"),P(e.$$.fragment)},l(l){r=O(l,"DIV",{});var s=Q(r);V(e.$$.fragment,s),s.forEach(w)},m(l,s){M(l,r,s),W(e,r,null),o=!0},p(l,s){const f={};s&268435481&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){o||(_(e.$$.fragment,l),l&&(t||st(()=>{t=ft(r,ct,{duration:200,delay:100}),t.start()})),o=!0)},o(l){b(e.$$.fragment,l),o=!1},d(l){l&&w(r),T(e)}}}function oo(n){let r;return{c(){r=J("here")},l(e){r=G(e,"here")},m(e,t){M(e,r,t)},d(e){e&&w(r)}}}function no(n){var l,s,f,a;let r,e,t,o;return e=new We({props:{href:ue({namespace:n[0],workflow:(s=(l=n[3])==null?void 0:l.workflow)==null?void 0:s.id,run:n[4][(a=(f=n[3])==null?void 0:f.workflow)==null?void 0:a.runId]}),$$slots:{default:[oo]},$$scope:{ctx:n}}}),{c(){r=J("You can find the resulting Workflow Execution "),P(e.$$.fragment),t=J(".")},l(u){r=G(u,"You can find the resulting Workflow Execution "),V(e.$$.fragment,u),t=G(u,".")},m(u,c){M(u,r,c),W(e,u,c),M(u,t,c),o=!0},p(u,c){var d,k,m,i;const g={};c&25&&(g.href=ue({namespace:u[0],workflow:(k=(d=u[3])==null?void 0:d.workflow)==null?void 0:k.id,run:u[4][(i=(m=u[3])==null?void 0:m.workflow)==null?void 0:i.runId]})),c&268435456&&(g.$$scope={dirty:c,ctx:u}),e.$set(g)},i(u){o||(_(e.$$.fragment,u),o=!0)},o(u){b(e.$$.fragment,u),o=!1},d(u){u&&(w(r),w(t)),T(e,u)}}}function lo(n){var y,X;let r,e,t,o,l,s,f,a,u,c,g,d,k,m,i,$,R,H,h,D,N,E,I;t=new We({props:{href:`${Se({namespace:n[0]})}?${n[17]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Br]},$$scope:{ctx:n}}});let v=n[15]&&Ge(n);c=new Xt({props:{status:(y=n[1])==null?void 0:y.status,big:!0}}),m=new er({props:{copyIconTitle:S("common.copy-icon-title"),copySuccessIconTitle:S("common.copy-success-icon-title"),content:(X=n[1])==null?void 0:X.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}});let F=n[9]&&Ke(n);H=new Fr({props:{isRunning:n[13],cancelInProgress:n[11],workflow:n[1],namespace:n[0]}}),D=new tr({props:{$$slots:{default:[to]},$$scope:{ctx:n}}});let B=n[11]&&tt(n),p=n[10]&&rt(n);return{c(){r=U("div"),e=U("div"),P(t.$$.fragment),o=j(),v&&v.c(),l=j(),s=U("header"),f=U("div"),a=U("div"),u=U("div"),P(c.$$.fragment),g=j(),d=U("div"),k=U("h1"),P(m.$$.fragment),i=j(),F&&F.c(),$=j(),R=U("div"),P(H.$$.fragment),h=j(),P(D.$$.fragment),N=j(),B&&B.c(),E=j(),p&&p.c(),this.h()},l(C){r=O(C,"DIV",{class:!0});var A=Q(r);e=O(A,"DIV",{class:!0});var L=Q(e);V(t.$$.fragment,L),o=Y(L),v&&v.l(L),L.forEach(w),l=Y(A),s=O(A,"HEADER",{class:!0});var Z=Q(s);f=O(Z,"DIV",{class:!0});var ie=Q(f);a=O(ie,"DIV",{class:!0});var ne=Q(a);u=O(ne,"DIV",{class:!0});var we=Q(u);V(c.$$.fragment,we),we.forEach(w),g=Y(ne),d=O(ne,"DIV",{class:!0});var me=Q(d);k=O(me,"H1",{"data-testid":!0,class:!0});var $e=Q(k);V(m.$$.fragment,$e),$e.forEach(w),i=Y(me),F&&F.l(me),me.forEach(w),ne.forEach(w),$=Y(ie),R=O(ie,"DIV",{class:!0});var Fe=Q(R);V(H.$$.fragment,Fe),Fe.forEach(w),ie.forEach(w),h=Y(Z),V(D.$$.fragment,Z),N=Y(Z),B&&B.l(Z),E=Y(Z),p&&p.l(Z),Z.forEach(w),A.forEach(w),this.h()},h(){z(e,"class","pb-4"),z(u,"class","px-2"),z(k,"data-testid","workflow-id-heading"),z(k,"class","overflow-hidden text-base font-medium lg:text-2xl"),z(d,"class","flex flex-col flex-wrap gap-0"),z(a,"class","flex flex-col items-center gap-4 lg:flex-row"),z(R,"class","px-2"),z(f,"class","flex flex-col items-center justify-between gap-4 lg:flex-row"),z(s,"class","rounded-top flex flex-col gap-0"),z(r,"class","surface-secondary")},m(C,A){M(C,r,A),q(r,e),W(t,e,null),q(e,o),v&&v.m(e,null),q(r,l),q(r,s),q(s,f),q(f,a),q(a,u),W(c,u,null),q(a,g),q(a,d),q(d,k),W(m,k,null),q(d,i),F&&F.m(d,null),q(f,$),q(f,R),W(H,R,null),q(s,h),W(D,s,null),q(s,N),B&&B.m(s,null),q(s,E),p&&p.m(s,null),I=!0},p(C,[A]){var me,$e;const L={};A&131073&&(L.href=`${Se({namespace:C[0]})}?${C[17]}`),A&268468224&&(L.$$scope={dirty:A,ctx:C}),t.$set(L),C[15]?v?(v.p(C,A),A&32768&&_(v,1)):(v=Ge(C),v.c(),_(v,1),v.m(e,null)):v&&(te(),b(v,1,1,()=>{v=null}),re());const Z={};A&2&&(Z.status=(me=C[1])==null?void 0:me.status),c.$set(Z);const ie={};A&2&&(ie.content=($e=C[1])==null?void 0:$e.id),m.$set(ie),C[9]?F?(F.p(C,A),A&512&&_(F,1)):(F=Ke(C),F.c(),_(F,1),F.m(d,null)):F&&(te(),b(F,1,1,()=>{F=null}),re());const ne={};A&8192&&(ne.isRunning=C[13]),A&2048&&(ne.cancelInProgress=C[11]),A&2&&(ne.workflow=C[1]),A&1&&(ne.namespace=C[0]),H.$set(ne);const we={};A&268783714&&(we.$$scope={dirty:A,ctx:C}),D.$set(we),C[11]?B?(B.p(C,A),A&2048&&_(B,1)):(B=tt(C),B.c(),_(B,1),B.m(s,E)):B&&(te(),b(B,1,1,()=>{B=null}),re()),C[10]?p?(p.p(C,A),A&1024&&_(p,1)):(p=rt(C),p.c(),_(p,1),p.m(s,null)):p&&(te(),b(p,1,1,()=>{p=null}),re())},i(C){I||(_(t.$$.fragment,C),_(v),_(c.$$.fragment,C),_(m.$$.fragment,C),_(F),_(H.$$.fragment,C),_(D.$$.fragment,C),_(B),_(p),I=!0)},o(C){b(t.$$.fragment,C),b(v),b(c.$$.fragment,C),b(m.$$.fragment,C),b(F),b(H.$$.fragment,C),b(D.$$.fragment,C),b(B),b(p),I=!1},d(C){C&&w(r),T(t),v&&v.d(),T(c),T(m),F&&F.d(),T(H),T(D),B&&B.d(),p&&p.d()}}}function so(n,r,e){let t,o,l,s,f,a,u,c,g,d,k,m,i,$,R,H,h,D,N,E,I,v;K(n,or,A=>e(25,R=A)),K(n,Re,A=>e(26,H=A)),K(n,be,A=>e(3,h=A)),K(n,kt,A=>e(4,D=A)),K(n,Ft,A=>e(27,N=A)),K(n,Ve,A=>e(5,E=A)),K(n,it,A=>e(17,I=A)),K(n,ht,A=>e(18,v=A));var F,B,p,y,X;let{namespace:C}=r;return n.$$set=A=>{"namespace"in A&&e(0,C=A.namespace)},n.$$.update=()=>{n.$$.dirty&8&&e(1,{workflow:t,workers:o,compatibility:l}=h,t,(e(16,o),e(3,h)),(e(24,l),e(3,h))),n.$$.dirty&32&&e(15,s=E.params.id),n.$$.dirty&3&&e(14,f={namespace:C,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&524296&&e(13,a=e(19,F=h==null?void 0:h.workflow)===null||F===void 0?void 0:F.isRunning),n.$$.dirty&1048584&&e(12,u=["Terminated","TimedOut","Canceled"].includes(e(20,B=h.workflow)===null||B===void 0?void 0:B.status)),n.$$.dirty&136314888&&e(11,c=Hr(e(21,p=h==null?void 0:h.workflow)===null||p===void 0?void 0:p.status,N)),n.$$.dirty&4194328&&e(10,g=lr(D,e(22,y=h==null?void 0:h.workflow)===null||y===void 0?void 0:y.runId)),n.$$.dirty&8388610&&e(9,d=e(23,X=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||X===void 0?void 0:X.useVersioning),n.$$.dirty&2&&e(2,k=sr(t)),n.$$.dirty&16777216&&e(8,m=ar(l)),n.$$.dirty&16777220&&e(7,i=fr(l,k)),n.$$.dirty&100663298&&e(6,$=nr(t,H,R))},[C,t,k,h,D,E,$,i,m,d,g,c,u,a,f,s,o,I,v,F,B,p,y,X,l,R,H,N]}class vt extends de{constructor(r){super(),ge(this,r,so,lo,_e,{namespace:0})}}async function ao({activity:n,namespace:r,settings:e,accessToken:t},{convertWithCodec:o=ir,decodeAttributes:l=ur}={}){const s=await o({attributes:n,namespace:r,settings:e,accessToken:t});return l(s)}const fo=async({activity:n,namespace:r,settings:e,accessToken:t})=>await ao({activity:n,namespace:r,settings:e,accessToken:t}),ot=async(n,r,e,t)=>{const o=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of o){const f=await fo({activity:s,namespace:r,settings:e,accessToken:t});l.push(f)}return l};function io(n){let r,e,t,o;e=new vt({props:{namespace:n[0].params.namespace}});const l=n[10].default,s=Me(l,n,n[11],null);return{c(){r=U("div"),P(e.$$.fragment),t=j(),s&&s.c(),this.h()},l(f){r=O(f,"DIV",{class:!0});var a=Q(r);V(e.$$.fragment,a),a.forEach(w),t=Y(f),s&&s.l(f),this.h()},h(){z(r,"class","px-8 pt-24 md:pt-20")},m(f,a){M(f,r,a),W(e,r,null),M(f,t,a),s&&s.m(f,a),o=!0},p(f,a){const u={};a&1&&(u.namespace=f[0].params.namespace),e.$set(u),s&&s.p&&(!o||a&2048)&&ye(s,l,f,f[11],o?Ne(l,f[11],a,null):qe(f[11]),null)},i(f){o||(_(e.$$.fragment,f),_(s,f),o=!0)},o(f){b(e.$$.fragment,f),b(s,f),o=!1},d(f){f&&(w(r),w(t)),T(e),s&&s.d(f)}}}function uo(n){let r,e;return r=new ut({}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p:ee,i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function co(n){let r,e;return r=new bt({props:{error:n[1]}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&2&&(l.error=t[1]),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function mo(n){let r,e,t,o,l;const s=[co,uo,io],f=[];function a(u,c){return u[1]?0:u[2].workflow?2:1}return e=a(n),t=f[e]=s[e](n),{c(){r=U("div"),t.c(),this.h()},l(u){r=O(u,"DIV",{class:!0});var c=Q(r);t.l(c),c.forEach(w),this.h()},h(){z(r,"class",o="surface-secondary absolute bottom-0 left-0 right-0 "+(n[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0")},m(u,c){M(u,r,c),f[e].m(r,null),l=!0},p(u,c){let g=e;e=a(u),e===g?f[e].p(u,c):(te(),b(f[g],1,1,()=>{f[g]=null}),re(),t=f[e],t?t.p(u,c):(t=f[e]=s[e](u),t.c()),_(t,1),t.m(r,null)),(!l||c&8&&o!==(o="surface-secondary absolute bottom-0 left-0 right-0 "+(u[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0"))&&z(r,"class",o)},i(u){l||(_(t),l=!0)},o(u){b(t),l=!1},d(u){u&&w(r),f[e].d()}}}function po(n){let r,e,t;r=new vt({props:{namespace:n[0].params.namespace}});const o=n[10].default,l=Me(o,n,n[11],null);return{c(){P(r.$$.fragment),e=j(),l&&l.c()},l(s){V(r.$$.fragment,s),e=Y(s),l&&l.l(s)},m(s,f){W(r,s,f),M(s,e,f),l&&l.m(s,f),t=!0},p(s,f){const a={};f&1&&(a.namespace=s[0].params.namespace),r.$set(a),l&&l.p&&(!t||f&2048)&&ye(l,o,s,s[11],t?Ne(o,s[11],f,null):qe(s[11]),null)},i(s){t||(_(r.$$.fragment,s),_(l,s),t=!0)},o(s){b(r.$$.fragment,s),b(l,s),t=!1},d(s){s&&w(e),T(r,s),l&&l.d(s)}}}function _o(n){let r,e;return r=new ut({}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p:ee,i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function go(n){let r,e;return r=new bt({props:{error:n[1]}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,o){const l={};o&2&&(l.error=t[1]),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function wo(n){let r,e,t,o;const l=[go,_o,po],s=[];function f(a,u){return a[1]?0:a[2].workflow?2:1}return e=f(n),t=s[e]=l[e](n),{c(){r=U("div"),t.c(),this.h()},l(a){r=O(a,"DIV",{class:!0,slot:!0});var u=Q(r);t.l(u),u.forEach(w),this.h()},h(){z(r,"class","flex h-full flex-col gap-0"),z(r,"slot","fallback")},m(a,u){M(a,r,u),s[e].m(r,null),o=!0},p(a,u){let c=e;e=f(a),e===c?s[e].p(a,u):(te(),b(s[c],1,1,()=>{s[c]=null}),re(),t=s[e],t?t.p(a,u):(t=s[e]=l[e](a),t.c()),_(t,1),t.m(r,null))},i(a){o||(_(t),o=!0)},o(a){b(t),o=!1},d(a){a&&w(r),s[e].d()}}}function $o(n){let r,e;return r=new Rt({props:{$$slots:{fallback:[wo],default:[mo]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,[o]){const l={};o&2063&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function ho(n,r,e){let t,o,l,s,f,a,u,c,g,d,k,m;K(n,Ue,v=>e(7,s=v)),K(n,Ve,v=>e(0,f=v)),K(n,Re,v=>e(13,a=v)),K(n,be,v=>e(2,u=v)),K(n,Be,v=>e(14,c=v)),K(n,he,v=>e(8,g=v)),K(n,ht,v=>e(9,d=v)),K(n,mr,v=>e(15,k=v)),K(n,Dt,v=>e(3,m=v));let{$$slots:i={},$$scope:$}=r,R,H;const h=async(v,F)=>{var B;if(!((B=v==null?void 0:v.mostRecentWorkerVersionStamp)===null||B===void 0)&&B.useVersioning)return await xt({queue:F,namespace:t})},D=async(v,F,B,p,y)=>{const{settings:X}=f.data,{workflow:C,error:A}=await He({namespace:v,workflowId:F,runId:B});if(A){e(1,R=A);return}const{taskQueue:L}=C,Z=await Zt({queue:L,namespace:v}),ie=await h(C,L);C.pendingActivities=await ot(C,v,X,k==null?void 0:k.accessToken),le(be,u={workflow:C,workers:Z,compatibility:ie},u),H=new AbortController,le(Re,a=await cr({namespace:v,workflowId:F,runId:B,sort:y?"ascending":p,signal:H.signal,historySize:C.historyEvents}),a)},N=At(async(v,F,B)=>{const{settings:p}=f.data,{workflow:y,error:X}=await He({namespace:v,workflowId:F,runId:B});if(X){e(1,R=X);return}y.pendingActivities=await ot(y,v,p,k==null?void 0:k.accessToken),le(be,u={...u,workflow:y},u)},500),E=async(v,F,B,p)=>{var y;v&&(!((y=u==null?void 0:u.workflow)===null||y===void 0)&&y.isRunning)&&N(F,B,p)},I=()=>{le(Be,c=null,c),le(be,u=Gt,u),le(Re,a=[],a),e(1,R=void 0),H&&H.abort()};return Ct(()=>{const v=f.url.searchParams.get("sort");v&&le(Ue,s=v,s)}),at(()=>{I()}),n.$$set=v=>{"$$scope"in v&&e(11,$=v.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(6,{namespace:t,workflow:o,run:l}=f.params,t,(e(5,o),e(0,f)),(e(4,l),e(0,f))),n.$$.dirty&752&&D(t,o,l,s,d),n.$$.dirty&368&&E(g,t,o,l),n.$$.dirty&16&&I()},[f,R,u,m,l,o,t,s,g,d,i,$]}class bo extends de{constructor(r){super(),ge(this,r,ho,$o,_e,{})}}const Et={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},ko=mt(Et),vo=()=>{ko.set(Et)};function Eo(n){let r;const e=n[0].default,t=Me(e,n,n[1],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,l){t&&t.m(o,l),r=!0},p(o,l){t&&t.p&&(!r||l&2)&&ye(t,e,o,o[1],r?Ne(e,o[1],l,null):qe(o[1]),null)},i(o){r||(_(t,o),r=!0)},o(o){b(t,o),r=!1},d(o){t&&t.d(o)}}}function Io(n){let r,e;return r=new bo({props:{$$slots:{default:[Eo]},$$scope:{ctx:n}}}),{c(){P(r.$$.fragment)},l(t){V(r.$$.fragment,t)},m(t,o){W(r,t,o),e=!0},p(t,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){e||(_(r.$$.fragment,t),e=!0)},o(t){b(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function Co(n,r,e){let{$$slots:t={},$$scope:o}=r;return at(()=>{vo()}),n.$$set=l=>{"$$scope"in l&&e(1,o=l.$$scope)},[t,o]}class In extends de{constructor(r){super(),ge(this,r,Co,Io,_e,{})}}export{In as component};
