import{s as ue,e as Q,a as O,t as G,b as Y,d as z,g as $,h as U,f as K,j,k as y,l as q,n as ae,c as J,v as fe,L as re,V as le,a5 as tt,w as te,x as Re,y as rt,ae as bt,$ as ot,S as vt,a3 as nt,p as ye,u as qe,q as He,r as Fe}from"../chunks/scheduler.78ThUSKQ.js";import{S as ce,i as me,c as D,a as R,m as P,t as d,b as w,d as S,f as se,g as x,e as ee,h as lt}from"../chunks/index.G2Max4V_.js";import{p as We}from"../chunks/stores.DdBCvRFR.js";import{v as Et}from"../chunks/data-encoder-settings.5WCPFOV5.js";import{L as Te}from"../chunks/link.ncGfNt3_.js";import{t as T}from"../chunks/translate.HrioCK44.js";import{h as st,i as It,s as Ct,j as Be}from"../chunks/workflows.2gBlLQ6D.js";import{e as Pe,b as ie,m as be,n as ve,c as Ee,o as Ie,p as Ce,q as Ae}from"../chunks/route-for.UvGzyOe8.js";import{l as at,L as At}from"../chunks/labs-mode-guard.Yk1NtrnY.js";import{L as ft}from"../chunks/loading.dhOLw0Qo.js";import{a as it}from"../chunks/index.GCKs2DhI.js";import{e as Se}from"../chunks/each.ycdfgOIg.js";import{C as Dt,T as Rt,w as Pt,a as St,b as Wt}from"../chunks/workflow-terminate-enabled.yL8svhV1.js";import{w as ut}from"../chunks/entry.Rre23682.js";import{C as Tt}from"../chunks/checkbox.TYNQnXkP.js";import{I as ct}from"../chunks/input.QMz4nGGi.js";import{M as mt}from"../chunks/modal.5pIYfJN5.js";import{R as Vt,a as Mt}from"../chunks/radio-input.iPBnhSEK.js";import{R as ke}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as pt,f as De,t as Me}from"../chunks/events.01cLXuZr.js";import{p as yt}from"../chunks/persist-store.HiY-Qs7R.js";import{i as dt}from"../chunks/is-network-error.g37jlIvb.js";import{C as qt}from"../chunks/code-block.WvHRfcn4.js";import{t as Ht}from"../chunks/toaster.Hlu5zEs4.js";import{B as Ft}from"../chunks/button.XXkLTXtO.js";import{I as Nt}from"../chunks/icon.sJ0QhDtT.js";import{c as Bt}from"../chunks/menu.eohlKIAU.js";import{M as Lt}from"../chunks/menu-divider.OpI0aaoG.js";import{S as Ot}from"../chunks/split-button.2VT9HKpr.js";import{T as _t}from"../chunks/tooltip.3-ryDjAh.js";import{c as Ut}from"../chunks/core-user.-mVDi4XX.js";import{s as jt}from"../chunks/settings.zxRfWSe5.js";import{r as $e,w as he,i as Qt}from"../chunks/workflow-run.GiJyG19C.js";import{w as Yt}from"../chunks/write-actions-are-allowed.x-N5U6iX.js";import{W as zt}from"../chunks/workflow-status.DY3dZ1ex.js";import{C as Jt,k as Gt,g as Kt}from"../chunks/pollers-service.lkpOjpND.js";import{A as gt}from"../chunks/alert.IkBpHV6_.js";import{B as Ve}from"../chunks/badge.PHjP2oTf.js";import{C as Xt}from"../chunks/index.K9Js6fKj.js";import{a as Zt,b as xt,c as _e}from"../chunks/tab.sy1YqCvt.js";import{n as er}from"../chunks/namespaces.ZAcXTcY_.js";import{g as tr}from"../chunks/get-workflow-relationships.c7dtsESF.js";import{h as rr}from"../chunks/has.rY0Oe_rJ.js";import{f as or,d as nr}from"../chunks/decode-payload.rnNKOktT.js";import{f as lr}from"../chunks/events-service.SwPDBVYA.js";import{a as sr}from"../chunks/auth-user.785wOukd.js";import{a as Le}from"../chunks/event-view.xuEhKQkU.js";function ar(n){let t=T("workflows.back-to-workflows")+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p:fe,d(e){e&&$(r)}}}function fr(n){var V,N;let t,r,e,o,l,s,a=(((V=n[0])==null?void 0:V.statusCode)??"500")+"",f,u,c,p,g,k,_=(((N=n[0])==null?void 0:N.statusText)??"")+"",i,h;return e=new Te({props:{href:`${Pe({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[ar]},$$scope:{ctx:n}}}),{c(){t=Q("header"),r=Q("div"),D(e.$$.fragment),o=O(),l=Q("div"),s=Q("h1"),f=G(a),u=O(),c=Q("p"),p=G(n[1]),g=O(),k=Q("p"),i=G(_),this.h()},l(E){t=Y(E,"HEADER",{class:!0});var C=z(t);r=Y(C,"DIV",{class:!0});var M=z(r);R(e.$$.fragment,M),M.forEach($),C.forEach($),o=U(E),l=Y(E,"DIV",{class:!0});var b=z(l);s=Y(b,"H1",{class:!0});var I=z(s);f=K(I,a),I.forEach($),u=U(b),c=Y(b,"P",{class:!0});var v=z(c);p=K(v,n[1]),v.forEach($),g=U(b),k=Y(b,"P",{class:!0});var H=z(k);i=K(H,_),H.forEach($),b.forEach($),this.h()},h(){j(r,"class","mb-4 block"),j(t,"class","mb-4 flex flex-col gap-1"),j(s,"class","leading-0 text-[12rem] font-semibold"),j(c,"class","-mt-12 text-lg"),j(k,"class","text-2xl font-bold text-red-700"),j(l,"class","text-center align-middle")},m(E,C){y(E,t,C),q(t,r),P(e,r,null),y(E,o,C),y(E,l,C),q(l,s),q(s,f),q(l,u),q(l,c),q(c,p),q(l,g),q(l,k),q(k,i),h=!0},p(E,[C]){var b,I;const M={};C&12&&(M.href=`${Pe({namespace:E[2]})}?${E[3]}`),C&32&&(M.$$scope={dirty:C,ctx:E}),e.$set(M),(!h||C&1)&&a!==(a=(((b=E[0])==null?void 0:b.statusCode)??"500")+"")&&ae(f,a),(!h||C&2)&&ae(p,E[1]),(!h||C&1)&&_!==(_=(((I=E[0])==null?void 0:I.statusText)??"")+"")&&ae(i,_)},i(E){h||(d(e.$$.fragment,E),h=!0)},o(E){w(e.$$.fragment,E),h=!1},d(E){E&&($(t),$(o),$(l)),S(e)}}}function ir(n,t,r){let e,o,l,s;J(n,We,f=>r(4,l=f)),J(n,st,f=>r(3,s=f));let{error:a}=t;return n.$$set=f=>{"error"in f&&r(0,a=f.error)},n.$$.update=()=>{n.$$.dirty&16&&r(2,{namespace:e}=l.params,e),n.$$.dirty&1&&r(1,o=a.statusCode===404?T("workflows.workflow-404-title"):T("workflows.workflow-error-title"))},[a,o,e,s,l]}class wt extends ce{constructor(t){super(),me(this,t,ir,fr,ue,{error:0})}}const $t=yt("resetWorkflows",{});function Oe(n,t,r){const e=n.slice();return e[18]=t[r],e}function ur(n){let t,r=T("workflows.reset-modal-title")+"",e;return{c(){t=Q("h3"),e=G(r),this.h()},l(o){t=Y(o,"H3",{slot:!0});var l=z(t);e=K(l,r),l.forEach($),this.h()},h(){j(t,"slot","title")},m(o,l){y(o,t,l),q(t,e)},p:fe,d(o){o&&$(t)}}}function Ue(n){let t,r;return t=new Mt({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&64&&(l.id="reset-event-"+e[18].id),o&64&&(l.value=e[18].id),o&64&&(l.label=e[18].id+" - "+e[18].eventType),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function cr(n){let t,r,e=Se(n[6]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Ue(Oe(n,e,s));const l=s=>w(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=Re()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);t=Re()},m(s,a){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,a);y(s,t,a),r=!0},p(s,a){if(a&64){e=Se(s[6]);let f;for(f=0;f<e.length;f+=1){const u=Oe(s,e,f);o[f]?(o[f].p(u,a),d(o[f],1)):(o[f]=Ue(u),o[f].c(),d(o[f],1),o[f].m(t.parentNode,t))}for(x(),f=e.length;f<o.length;f+=1)l(f);ee()}},i(s){if(!r){for(let a=0;a<e.length;a+=1)d(o[a]);r=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)w(o[a]);r=!1},d(s){s&&$(t),rt(o,s)}}}function mr(n){let t,r,e,o,l,s,a,f;r=new Vt({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:T("workflows.reset-event-radio-group-description"),$$slots:{default:[cr]},$$scope:{ctx:n}}}),o=new Tt({props:{id:"reset-reapply-type-checkbox",checked:n[4]===ke.Signal,label:T("workflows.reset-reapply-type-label")}}),o.$on("change",n[9]);function u(p){n[13](p)}let c={id:"reset-reason",label:T("common.reason")};return n[5]!==void 0&&(c.value=n[5]),s=new ct({props:c}),re.push(()=>se(s,"value",u)),{c(){t=Q("div"),D(r.$$.fragment),e=O(),D(o.$$.fragment),l=O(),D(s.$$.fragment),this.h()},l(p){t=Y(p,"DIV",{class:!0});var g=z(t);R(r.$$.fragment,g),e=U(g),R(o.$$.fragment,g),l=U(g),R(s.$$.fragment,g),g.forEach($),this.h()},h(){j(t,"class","flex w-full flex-col gap-4")},m(p,g){y(p,t,g),P(r,t,null),q(t,e),P(o,t,null),q(t,l),P(s,t,null),f=!0},p(p,g){const k={};g&2097216&&(k.$$scope={dirty:g,ctx:p}),r.$set(k);const _={};g&16&&(_.checked=p[4]===ke.Signal),o.$set(_);const i={};!a&&g&32&&(a=!0,i.value=p[5],le(()=>a=!1)),s.$set(i)},i(p){f||(d(r.$$.fragment,p),d(o.$$.fragment,p),d(s.$$.fragment,p),f=!0)},o(p){w(r.$$.fragment,p),w(o.$$.fragment,p),w(s.$$.fragment,p),f=!1},d(p){p&&$(t),S(r),S(o),S(s)}}}function pr(n){let t,r,e,o;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:T("common.confirm"),cancelText:T("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[mr],title:[ur]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),t=new mt({props:a}),re.push(()=>se(t,"error",l)),re.push(()=>se(t,"open",s)),t.$on("confirmModal",n[10]),t.$on("cancelModal",n[8]),{c(){D(t.$$.fragment)},l(f){R(t.$$.fragment,f)},m(f,u){P(t,f,u),o=!0},p(f,[u]){const c={};u&8&&(c.loading=f[3]),u&2097264&&(c.$$scope={dirty:u,ctx:f}),!r&&u&4&&(r=!0,c.error=f[2],le(()=>r=!1)),!e&&u&1&&(e=!0,c.open=f[0],le(()=>e=!1)),t.$set(c)},i(f){o||(d(t.$$.fragment,f),o=!0)},o(f){w(t.$$.fragment,f),o=!1},d(f){S(t,f)}}}function dr(n,t,r){let e,o=fe,l=()=>(o(),o=tt(p,I=>r(16,e=I)),p),s,a;J(n,pt,I=>r(6,a=I)),n.$$.on_destroy.push(()=>o());let{open:f}=t,{workflow:u}=t,{namespace:c}=t,{refresh:p}=t;l();let g="",k=!1,_,i=ut("");J(n,i,I=>r(17,s=I));let h;const V=()=>{r(0,f=!1),r(4,_=ke.Signal),te(i,s="",s),r(5,h="")},N=I=>{r(4,_=I.detail.checked?ke.Signal:ke.None)},E=async()=>{r(2,g=""),r(3,k=!0);try{const I=await It({namespace:c,workflow:u,eventId:s,reason:h,reapplyType:_});I&&I.runId&&$t.update(v=>({...v,[u.runId]:I.runId})),te(p,e=Date.now(),e),V()}catch(I){r(2,g=dt(I)?I.message:T("common.unknown-error"))}finally{r(3,k=!1)}V()};function C(I){h=I,r(5,h)}function M(I){g=I,r(2,g)}function b(I){f=I,r(0,f)}return n.$$set=I=>{"open"in I&&r(0,f=I.open),"workflow"in I&&r(11,u=I.workflow),"namespace"in I&&r(12,c=I.namespace),"refresh"in I&&l(r(1,p=I.refresh))},[f,p,g,k,_,h,a,i,V,N,E,u,c,C,M,b]}class _r extends ce{constructor(t){super(),me(this,t,dr,pr,ue,{open:0,workflow:11,namespace:12,refresh:1})}}function gr(n){let t,r=T("workflows.signal-modal-title")+"",e;return{c(){t=Q("h3"),e=G(r),this.h()},l(o){t=Y(o,"H3",{slot:!0});var l=z(t);e=K(l,r),l.forEach($),this.h()},h(){j(t,"slot","title")},m(o,l){y(o,t,l),q(t,e)},p:fe,d(o){o&&$(t)}}}function wr(n){let t,r,e,o,l,s,a=T("workflows.signal-payload-input-label")+"",f,u,c,p=T("workflows.signal-payload-input-label-hint")+"",g,k,_,i;function h(E){n[12](E)}let V={id:"signal-name",label:T("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(V.value=n[4]),r=new ct({props:V}),re.push(()=>se(r,"value",h));let N={maxHeight:320,content:n[5],editable:!0,copyable:!1};return _=new qt({props:N}),n[13](_),_.$on("change",n[9]),{c(){t=Q("div"),D(r.$$.fragment),o=O(),l=Q("div"),s=Q("span"),f=G(a),u=O(),c=Q("span"),g=G(p),k=O(),D(_.$$.fragment),this.h()},l(E){t=Y(E,"DIV",{slot:!0,class:!0});var C=z(t);R(r.$$.fragment,C),o=U(C),l=Y(C,"DIV",{});var M=z(l);s=Y(M,"SPAN",{class:!0});var b=z(s);f=K(b,a),b.forEach($),u=U(M),c=Y(M,"SPAN",{class:!0});var I=z(c);g=K(I,p),I.forEach($),k=U(M),R(_.$$.fragment,M),M.forEach($),C.forEach($),this.h()},h(){j(s,"class","font-secondary text-sm font-medium"),j(c,"class","font-secondary text-xs font-light italic"),j(t,"slot","content"),j(t,"class","flex flex-col gap-4")},m(E,C){y(E,t,C),P(r,t,null),q(t,o),q(t,l),q(l,s),q(s,f),q(l,u),q(l,c),q(c,g),q(l,k),P(_,l,null),i=!0},p(E,C){const M={};!e&&C&16&&(e=!0,M.value=E[4],le(()=>e=!1)),r.$set(M);const b={};C&32&&(b.content=E[5]),_.$set(b)},i(E){i||(d(r.$$.fragment,E),d(_.$$.fragment,E),i=!0)},o(E){w(r.$$.fragment,E),w(_.$$.fragment,E),i=!1},d(E){E&&$(t),S(r),n[13](null),S(_)}}}function $r(n){let t,r,e,o;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:T("common.submit"),cancelText:T("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[wr],title:[gr]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),t=new mt({props:a}),re.push(()=>se(t,"error",l)),re.push(()=>se(t,"open",s)),t.$on("cancelModal",n[7]),t.$on("confirmModal",n[8]),{c(){D(t.$$.fragment)},l(f){R(t.$$.fragment,f)},m(f,u){P(t,f,u),o=!0},p(f,[u]){const c={};u&8&&(c.loading=f[3]),u&16&&(c.confirmDisabled=!f[4]),u&131184&&(c.$$scope={dirty:u,ctx:f}),!r&&u&4&&(r=!0,c.error=f[2],le(()=>r=!1)),!e&&u&1&&(e=!0,c.open=f[0],le(()=>e=!1)),t.$set(c)},i(f){o||(d(t.$$.fragment,f),o=!0)},o(f){w(t.$$.fragment,f),o=!1},d(f){S(t,f)}}}function hr(n,t,r){let e,o=fe,l=()=>(o(),o=tt(u,b=>r(16,e=b)),u);n.$$.on_destroy.push(()=>o());let{open:s}=t,{workflow:a}=t,{namespace:f}=t,{refresh:u}=t;l();let c="",p=!1,g="",k="",_;const i=()=>{r(0,s=!1),r(5,k=""),r(4,g=""),_==null||_.resetView(k)},h=async()=>{r(2,c=""),r(3,p=!0);try{await Ct({namespace:f,workflow:a,input:k,name:g}),te(u,e=Date.now(),e),Ht.push({message:T("workflows.signal-success"),id:"workflow-signal-success-toast"}),i()}catch(b){r(2,c=dt(b)?b.message:T("common.unknown-error"))}finally{r(3,p=!1)}},V=b=>{r(5,k=b.detail)};function N(b){g=b,r(4,g)}function E(b){re[b?"unshift":"push"](()=>{_=b,r(6,_)})}function C(b){c=b,r(2,c)}function M(b){s=b,r(0,s)}return n.$$set=b=>{"open"in b&&r(0,s=b.open),"workflow"in b&&r(10,a=b.workflow),"namespace"in b&&r(11,f=b.namespace),"refresh"in b&&l(r(1,u=b.refresh))},[s,u,c,p,g,k,_,i,h,V,a,f,N,E,C,M]}class kr extends ce{constructor(t){super(),me(this,t,hr,$r,ue,{open:0,workflow:10,namespace:11,refresh:1})}}const br=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function je(n,t,r){const e=n.slice();return e[29]=t[r].onClick,e[30]=t[r].destructive,e[31]=t[r].label,e[32]=t[r].allowed,e[33]=t[r].testId,e[34]=t[r].tooltip,e}function vr(n){let t,r;return t=new _t({props:{bottomRight:!0,width:200,text:n[4],hide:n[5],$$slots:{default:[Cr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o[0]&16&&(l.text=e[4]),o[0]&32&&(l.hide=e[5]),o[0]&288|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Er(n){let t,r;return t=new Ot({props:{id:"workflow-actions",position:"right",disabled:n[11],primaryActionDisabled:!n[12]||n[2],label:T("workflows.request-cancellation"),menuLabel:T("workflows.workflow-actions"),$$slots:{default:[Rr]},$$scope:{ctx:n}}}),t.$on("click",n[23]),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o[0]&2048&&(l.disabled=e[11]),o[0]&4100&&(l.primaryActionDisabled=!e[12]||e[2]),o[0]&1024|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ir(n){let t=T("workflows.reset")+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p:fe,d(e){e&&$(r)}}}function Cr(n){let t,r;return t=new Ft({props:{"aria-label":T("workflows.reset"),disabled:!n[5],variant:"primary",$$slots:{default:[Ir]},$$scope:{ctx:n}}}),t.$on("click",n[24]),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o[0]&32&&(l.disabled=!e[5]),o[1]&64&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Qe(n){let t,r;return t=new Lt({}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ar(n){let t=n[31]+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p(e,o){o[0]&1024&&t!==(t=e[31]+"")&&ae(r,t)},d(e){e&&$(r)}}}function Dr(n){let t,r,e;return t=new Bt({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[Ar]},$$scope:{ctx:n}}}),t.$on("click",function(){bt(n[29])&&n[29].apply(this,arguments)}),{c(){D(t.$$.fragment),r=O()},l(o){R(t.$$.fragment,o),r=U(o)},m(o,l){P(t,o,l),y(o,r,l),e=!0},p(o,l){n=o;const s={};l[0]&1024&&(s.destructive=n[30]),l[0]&1024&&(s.disabled=!n[32]),l[0]&1024&&(s["data-testid"]=n[33]),l[0]&1024|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),t.$set(s)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){w(t.$$.fragment,o),e=!1},d(o){o&&$(r),S(t,o)}}}function Ye(n){let t,r,e,o=n[30]&&Qe();return r=new _t({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),t=O(),D(r.$$.fragment)},l(l){o&&o.l(l),t=U(l),R(r.$$.fragment,l)},m(l,s){o&&o.m(l,s),y(l,t,s),P(r,l,s),e=!0},p(l,s){l[30]?o?s[0]&1024&&d(o,1):(o=Qe(),o.c(),d(o,1),o.m(t.parentNode,t)):o&&(x(),w(o,1,1,()=>{o=null}),ee());const a={};s[0]&1024&&(a.text=l[34]),s[0]&1024&&(a.hide=!l[34]),s[0]&1024|s[1]&64&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){e||(d(o),d(r.$$.fragment,l),e=!0)},o(l){w(o),w(r.$$.fragment,l),e=!1},d(l){l&&$(t),o&&o.d(l),S(r,l)}}}function Rr(n){let t,r,e=Se(n[10]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Ye(je(n,e,s));const l=s=>w(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();t=Re()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);t=Re()},m(s,a){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,a);y(s,t,a),r=!0},p(s,a){if(a[0]&1024){e=Se(s[10]);let f;for(f=0;f<e.length;f+=1){const u=je(s,e,f);o[f]?(o[f].p(u,a),d(o[f],1)):(o[f]=Ye(u),o[f].c(),d(o[f],1),o[f].m(t.parentNode,t))}for(x(),f=e.length;f<o.length;f+=1)l(f);ee()}},i(s){if(!r){for(let a=0;a<e.length;a+=1)d(o[a]);r=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)w(o[a]);r=!1},d(s){s&&$(t),rt(o,s)}}}function Pr(n){let t,r,e,o,l,s,a,f,u,c,p,g,k,_,i;const h=[Er,vr],V=[];function N(m,L){return m[3]?0:1}t=N(n),r=V[t]=h[t](n);function E(m){n[25](m)}let C={refresh:$e,workflow:n[0],namespace:n[1]};n[8]!==void 0&&(C.open=n[8]),o=new _r({props:C}),re.push(()=>se(o,"open",E));function M(m){n[26](m)}let b={refresh:$e,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(b.open=n[9]),a=new kr({props:b}),re.push(()=>se(a,"open",M));function I(m){n[27](m)}let v={refresh:$e,workflow:n[0],namespace:n[1]};n[6]!==void 0&&(v.open=n[6]),c=new Dt({props:v}),re.push(()=>se(c,"open",I));function H(m){n[28](m)}let W={refresh:$e,workflow:n[0],namespace:n[1]};return n[7]!==void 0&&(W.open=n[7]),k=new Rt({props:W}),re.push(()=>se(k,"open",H)),{c(){r.c(),e=O(),D(o.$$.fragment),s=O(),D(a.$$.fragment),u=O(),D(c.$$.fragment),g=O(),D(k.$$.fragment)},l(m){r.l(m),e=U(m),R(o.$$.fragment,m),s=U(m),R(a.$$.fragment,m),u=U(m),R(c.$$.fragment,m),g=U(m),R(k.$$.fragment,m)},m(m,L){V[t].m(m,L),y(m,e,L),P(o,m,L),y(m,s,L),P(a,m,L),y(m,u,L),P(c,m,L),y(m,g,L),P(k,m,L),i=!0},p(m,L){let oe=t;t=N(m),t===oe?V[t].p(m,L):(x(),w(V[oe],1,1,()=>{V[oe]=null}),ee(),r=V[t],r?r.p(m,L):(r=V[t]=h[t](m),r.c()),d(r,1),r.m(e.parentNode,e));const A={};L[0]&1&&(A.workflow=m[0]),L[0]&2&&(A.namespace=m[1]),!l&&L[0]&256&&(l=!0,A.open=m[8],le(()=>l=!1)),o.$set(A);const B={};L[0]&1&&(B.workflow=m[0]),L[0]&2&&(B.namespace=m[1]),!f&&L[0]&512&&(f=!0,B.open=m[9],le(()=>f=!1)),a.$set(B);const F={};L[0]&1&&(F.workflow=m[0]),L[0]&2&&(F.namespace=m[1]),!p&&L[0]&64&&(p=!0,F.open=m[6],le(()=>p=!1)),c.$set(F);const X={};L[0]&1&&(X.workflow=m[0]),L[0]&2&&(X.namespace=m[1]),!_&&L[0]&128&&(_=!0,X.open=m[7],le(()=>_=!1)),k.$set(X)},i(m){i||(d(r),d(o.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),d(k.$$.fragment,m),i=!0)},o(m){w(r),w(o.$$.fragment,m),w(a.$$.fragment,m),w(c.$$.fragment,m),w(k.$$.fragment,m),i=!1},d(m){m&&($(e),$(s),$(u),$(g)),V[t].d(m),S(o,m),S(a,m),S(c,m),S(k,m)}}}function Sr(n,t,r){let e,o,l,s,a,f,u,c,p;J(n,pt,F=>r(21,c=F)),J(n,We,F=>r(22,p=F));var g,k,_;let{workflow:i}=t,{namespace:h}=t,{cancelInProgress:V}=t,{isRunning:N}=t,E=!1,C=!1,M=!1,b=!1,I,v,H=Ut();J(n,H,F=>r(20,u=F));const W=()=>r(6,E=!0),m=()=>r(8,M=!0);function L(F){M=F,r(8,M),r(5,a),r(4,I),r(18,o),r(17,l),r(19,s),r(0,i),r(16,_),r(21,c),r(14,g),r(15,k),r(22,p)}function oe(F){b=F,r(9,b),r(5,a),r(4,I),r(18,o),r(17,l),r(19,s),r(0,i),r(16,_),r(21,c),r(14,g),r(15,k),r(22,p)}function A(F){E=F,r(6,E)}function B(F){C=F,r(7,C),r(5,a),r(4,I),r(18,o),r(17,l),r(19,s),r(0,i),r(16,_),r(21,c),r(14,g),r(15,k),r(22,p)}return n.$$set=F=>{"workflow"in F&&r(0,i=F.workflow),"namespace"in F&&r(1,h=F.namespace),"cancelInProgress"in F&&r(2,V=F.cancelInProgress),"isRunning"in F&&r(3,N=F.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&r(12,e=Pt(p.data.settings)),n.$$.dirty[0]&4194304&&r(18,o=br(p.data.settings)),n.$$.dirty[0]&4194304&&r(17,l=St(p.data.settings)),n.$$.dirty[0]&4194304&&r(19,s=Wt(p.data.settings)),n.$$.dirty[0]&2670593&&(s?s&&(r(14,g=i==null?void 0:i.pendingChildren)===null||g===void 0?void 0:g.length)>0?r(4,I=T("workflows.reset-disabled-pending-children")):s&&(r(15,k=i==null?void 0:i.pendingChildren)===null||k===void 0?void 0:k.length)===0&&c.length===0&&r(4,I=T("workflows.reset-disabled-no-events")):r(4,I=T("workflows.reset-disabled"))),n.$$.dirty[0]&2686977&&r(5,a=s&&(r(16,_=i==null?void 0:i.pendingChildren)===null||_===void 0?void 0:_.length)===0&&c.length>0),n.$$.dirty[0]&393264&&r(10,v=[{label:T("workflows.reset"),onClick:()=>r(8,M=!0),testId:"reset-button",allowed:a,tooltip:a?"":I},{label:T("workflows.signal"),onClick:()=>r(9,b=!0),testId:"signal-button",allowed:o,tooltip:o?"":T("workflows.signal-disabled")},{label:T("workflows.terminate"),onClick:()=>r(7,C=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":T("workflows.terminate-disabled")}]),n.$$.dirty[0]&1048578&&r(11,f=u.namespaceWriteDisabled(h)||!Yt(jt))},[i,h,V,N,I,a,E,C,M,b,v,f,e,H,g,k,_,l,o,s,u,c,p,W,m,L,oe,A,B]}class Wr extends ce{constructor(t){super(),me(this,t,Sr,Pr,ue,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}function Tr(n){let t,r,e=T("workers.buildId")+"",o,l,s;return l=new Jt({props:{active:!0,buildId:n[0]}}),{c(){t=Q("p"),r=Q("span"),o=G(e),D(l.$$.fragment),this.h()},l(a){t=Y(a,"P",{class:!0});var f=z(t);r=Y(f,"SPAN",{});var u=z(r);o=K(u,e),u.forEach($),R(l.$$.fragment,f),f.forEach($),this.h()},h(){j(t,"class","flex items-center gap-1")},m(a,f){y(a,t,f),q(t,r),q(r,o),P(l,t,null),s=!0},p(a,[f]){const u={};f&1&&(u.buildId=a[0]),l.$set(u)},i(a){s||(d(l.$$.fragment,a),s=!0)},o(a){w(l.$$.fragment,a),s=!1},d(a){a&&$(t),S(l)}}}function Vr(n,t,r){let e,{workflow:o}=t;return n.$$set=l=>{"workflow"in l&&r(1,o=l.workflow)},n.$$.update=()=>{n.$$.dirty&2&&r(0,e=Gt(o))},[e,o]}class Mr extends ce{constructor(t){super(),me(this,t,Vr,Tr,ue,{workflow:1})}}const yr=(n,t)=>{const r=n==="Running",e=t==null?void 0:t.some(o=>(o==null?void 0:o.eventType)==="WorkflowExecutionCancelRequested");return r&&e},ze=n=>{const t=n==null?void 0:n.indexOf("?");return t>-1?n.slice(0,t):n},Z=(n,t,r=!1)=>{const e=ze(n).split("/"),o=ze(t).split("/");if(r&&e.length!==o.length)return!1;for(let l=0;l<e.length;l++){const s=e[l],a=o[l];if(s!==a)return!1}return!0};function qr(n){let t=(n[12]?T("common.workflows"):T("workflows.back-to-workflows"))+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p(e,o){o&4096&&t!==(t=(e[12]?T("common.workflows"):T("workflows.back-to-workflows"))+"")&&ae(r,t)},d(e){e&&$(r)}}}function Je(n){let t,r;return t=new Te({props:{href:ie({...n[11]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Hr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2048&&(l.href=ie({...e[11]})),o&8388610&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Hr(n){var e;let t=((e=n[1])==null?void 0:e.runId)+"",r;return{c(){r=G(t)},l(o){r=K(o,t)},m(o,l){y(o,r,l)},p(o,l){var s;l&2&&t!==(t=((s=o[1])==null?void 0:s.runId)+"")&&ae(r,t)},d(o){o&&$(r)}}}function Ge(n){let t,r;return t=new Mr({props:{workflow:n[1]}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2&&(l.workflow=e[1]),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Fr(n){var e;let t=((e=n[1])==null?void 0:e.historyEvents)+"",r;return{c(){r=G(t)},l(o){r=K(o,t)},m(o,l){y(o,r,l)},p(o,l){var s;l&2&&t!==(t=((s=o[1])==null?void 0:s.historyEvents)+"")&&ae(r,t)},d(o){o&&$(r)}}}function Nr(n){let t,r;return t=new Ve({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Fr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&8388610&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Br(n){var e,o;let t=((o=(e=n[13])==null?void 0:e.pollers)==null?void 0:o.length)+"",r;return{c(){r=G(t)},l(l){r=K(l,t)},m(l,s){y(l,r,s)},p(l,s){var a,f;s&8192&&t!==(t=((f=(a=l[13])==null?void 0:a.pollers)==null?void 0:f.length)+"")&&ae(r,t)},d(l){l&&$(r)}}}function Lr(n){let t,r;return t=new Ve({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&8396800&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Or(n){let t=n[5].relationshipCount+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p(e,o){o&32&&t!==(t=e[5].relationshipCount+"")&&ae(r,t)},d(e){e&&$(r)}}}function Ur(n){let t,r;return t=new Ve({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Or]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&8388640&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ke(n){let t,r;return t=new _e({props:{label:T("workflows.pending-activities-tab"),id:"pending-activities-tab",href:Ae(n[11]),active:Z(n[4].url.pathname,Ae(n[11])),$$slots:{default:[Qr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2048&&(l.href=Ae(e[11])),o&2064&&(l.active=Z(e[4].url.pathname,Ae(e[11]))),o&8389122&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Xe(n){let t,r;return t=new Nt({props:{name:"canceled"}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function jr(n){var a,f;let t,r,e=((f=(a=n[1])==null?void 0:a.pendingActivities)==null?void 0:f.length)+"",o,l,s=n[9]&&Xe();return{c(){t=Q("div"),s&&s.c(),r=O(),o=G(e),this.h()},l(u){t=Y(u,"DIV",{class:!0});var c=z(t);s&&s.l(c),r=U(c),o=K(c,e),c.forEach($),this.h()},h(){j(t,"class","flex items-center gap-1")},m(u,c){y(u,t,c),s&&s.m(t,null),q(t,r),q(t,o),l=!0},p(u,c){var p,g;u[9]?s?c&512&&d(s,1):(s=Xe(),s.c(),d(s,1),s.m(t,r)):s&&(x(),w(s,1,1,()=>{s=null}),ee()),(!l||c&2)&&e!==(e=((g=(p=u[1])==null?void 0:p.pendingActivities)==null?void 0:g.length)+"")&&ae(o,e)},i(u){l||(d(s),l=!0)},o(u){w(s),l=!1},d(u){u&&$(t),s&&s.d()}}}function Qr(n){let t,r;return t=new Ve({props:{type:n[9]?"warning":"information",class:"px-2 py-0",$$slots:{default:[jr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&512&&(l.type=e[9]?"warning":"information"),o&8389122&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Yr(n){let t,r,e,o,l,s,a,f,u,c,p,g,k;t=new _e({props:{label:T("workflows.history-tab"),id:"history-tab",href:ie({...n[11]}),active:Z(n[4].url.pathname,ie({...n[11]})),$$slots:{default:[Nr]},$$scope:{ctx:n}}}),e=new _e({props:{label:T("workflows.workers-tab"),id:"workers-tab",href:be(n[11]),active:Z(n[4].url.pathname,be(n[11])),$$slots:{default:[Lr]},$$scope:{ctx:n}}}),l=new _e({props:{label:T("workflows.relationships"),id:"relationships-tab",href:ve(n[11]),active:Z(n[4].url.pathname,ve(n[11])),$$slots:{default:[Ur]},$$scope:{ctx:n}}});let _=!n[15]&&Ke(n);return f=new _e({props:{label:T("workflows.call-stack-tab"),id:"call-stack-tab",href:Ee(n[11]),active:Z(n[4].url.pathname,Ee(n[11]))}}),c=new _e({props:{label:T("workflows.queries-tab"),id:"queries-tab",href:Ie(n[11]),active:Z(n[4].url.pathname,Ie(n[11]))}}),g=new _e({props:{label:T("workflows.metadata-tab"),id:"metadata-tab",href:Ce(n[11]),active:Z(n[4].url.pathname,Ce(n[11]))}}),{c(){D(t.$$.fragment),r=O(),D(e.$$.fragment),o=O(),D(l.$$.fragment),s=O(),_&&_.c(),a=O(),D(f.$$.fragment),u=O(),D(c.$$.fragment),p=O(),D(g.$$.fragment)},l(i){R(t.$$.fragment,i),r=U(i),R(e.$$.fragment,i),o=U(i),R(l.$$.fragment,i),s=U(i),_&&_.l(i),a=U(i),R(f.$$.fragment,i),u=U(i),R(c.$$.fragment,i),p=U(i),R(g.$$.fragment,i)},m(i,h){P(t,i,h),y(i,r,h),P(e,i,h),y(i,o,h),P(l,i,h),y(i,s,h),_&&_.m(i,h),y(i,a,h),P(f,i,h),y(i,u,h),P(c,i,h),y(i,p,h),P(g,i,h),k=!0},p(i,h){const V={};h&2048&&(V.href=ie({...i[11]})),h&2064&&(V.active=Z(i[4].url.pathname,ie({...i[11]}))),h&8388610&&(V.$$scope={dirty:h,ctx:i}),t.$set(V);const N={};h&2048&&(N.href=be(i[11])),h&2064&&(N.active=Z(i[4].url.pathname,be(i[11]))),h&8396800&&(N.$$scope={dirty:h,ctx:i}),e.$set(N);const E={};h&2048&&(E.href=ve(i[11])),h&2064&&(E.active=Z(i[4].url.pathname,ve(i[11]))),h&8388640&&(E.$$scope={dirty:h,ctx:i}),l.$set(E),i[15]?_&&(x(),w(_,1,1,()=>{_=null}),ee()):_?(_.p(i,h),h&32768&&d(_,1)):(_=Ke(i),_.c(),d(_,1),_.m(a.parentNode,a));const C={};h&2048&&(C.href=Ee(i[11])),h&2064&&(C.active=Z(i[4].url.pathname,Ee(i[11]))),f.$set(C);const M={};h&2048&&(M.href=Ie(i[11])),h&2064&&(M.active=Z(i[4].url.pathname,Ie(i[11]))),c.$set(M);const b={};h&2048&&(b.href=Ce(i[11])),h&2064&&(b.active=Z(i[4].url.pathname,Ce(i[11]))),g.$set(b)},i(i){k||(d(t.$$.fragment,i),d(e.$$.fragment,i),d(l.$$.fragment,i),d(_),d(f.$$.fragment,i),d(c.$$.fragment,i),d(g.$$.fragment,i),k=!0)},o(i){w(t.$$.fragment,i),w(e.$$.fragment,i),w(l.$$.fragment,i),w(_),w(f.$$.fragment,i),w(c.$$.fragment,i),w(g.$$.fragment,i),k=!1},d(i){i&&($(r),$(o),$(s),$(a),$(u),$(p)),S(t,i),S(e,i),S(l,i),_&&_.d(i),S(f,i),S(c,i),S(g,i)}}}function zr(n){let t,r;return t=new xt({props:{class:"surface-secondary flex flex-wrap gap-6 p-4",label:"workflow detail",$$slots:{default:[Yr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&8432178&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function Ze(n){let t,r,e,o;return r=new gt({props:{bold:!0,icon:"info",intent:"info",title:T("workflows.cancel-request-sent"),$$slots:{default:[Jr]},$$scope:{ctx:n}}}),{c(){t=Q("div"),D(r.$$.fragment)},l(l){t=Y(l,"DIV",{});var s=z(t);R(r.$$.fragment,s),s.forEach($)},m(l,s){y(l,t,s),P(r,t,null),o=!0},p(l,s){const a={};s&8388608&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){o||(d(r.$$.fragment,l),l&&(e||ot(()=>{e=lt(t,it,{duration:200,delay:100}),e.start()})),o=!0)},o(l){w(r.$$.fragment,l),o=!1},d(l){l&&$(t),S(r)}}}function Jr(n){let t=T("workflows.cancel-request-sent-description")+"",r;return{c(){r=G(t)},l(e){r=K(e,t)},m(e,o){y(e,r,o)},p:fe,d(e){e&&$(r)}}}function xe(n){let t,r,e,o;return r=new gt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:T("workflows.reset-success-alert-title"),$$slots:{default:[Kr]},$$scope:{ctx:n}}}),{c(){t=Q("div"),D(r.$$.fragment)},l(l){t=Y(l,"DIV",{});var s=z(t);R(r.$$.fragment,s),s.forEach($)},m(l,s){y(l,t,s),P(r,t,null),o=!0},p(l,s){const a={};s&8388621&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){o||(d(r.$$.fragment,l),l&&(e||ot(()=>{e=lt(t,it,{duration:200,delay:100}),e.start()})),o=!0)},o(l){w(r.$$.fragment,l),o=!1},d(l){l&&$(t),S(r)}}}function Gr(n){let t;return{c(){t=G("here")},l(r){t=K(r,"here")},m(r,e){y(r,t,e)},d(r){r&&$(t)}}}function Kr(n){var l,s,a,f;let t,r,e,o;return r=new Te({props:{href:ie({namespace:n[0],workflow:(s=(l=n[2])==null?void 0:l.workflow)==null?void 0:s.id,run:n[3][(f=(a=n[2])==null?void 0:a.workflow)==null?void 0:f.runId]}),$$slots:{default:[Gr]},$$scope:{ctx:n}}}),{c(){t=G("You can find the resulting Workflow Execution "),D(r.$$.fragment),e=G(".")},l(u){t=K(u,"You can find the resulting Workflow Execution "),R(r.$$.fragment,u),e=K(u,".")},m(u,c){y(u,t,c),P(r,u,c),y(u,e,c),o=!0},p(u,c){var g,k,_,i;const p={};c&13&&(p.href=ie({namespace:u[0],workflow:(k=(g=u[2])==null?void 0:g.workflow)==null?void 0:k.id,run:u[3][(i=(_=u[2])==null?void 0:_.workflow)==null?void 0:i.runId]})),c&8388608&&(p.$$scope={dirty:c,ctx:u}),r.$set(p)},i(u){o||(d(r.$$.fragment,u),o=!0)},o(u){w(r.$$.fragment,u),o=!1},d(u){u&&($(t),$(e)),S(r,u)}}}function Xr(n){var L,oe;let t,r,e,o,l,s,a,f,u,c,p,g,k,_,i,h,V,N,E,C,M,b,I;e=new Te({props:{href:`${Pe({namespace:n[0]})}?${n[14]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[qr]},$$scope:{ctx:n}}});let v=n[12]&&Je(n);c=new zt({props:{status:(L=n[1])==null?void 0:L.status,big:!0}}),_=new Xt({props:{copyIconTitle:T("common.copy-icon-title"),copySuccessIconTitle:T("common.copy-success-icon-title"),content:(oe=n[1])==null?void 0:oe.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}});let H=n[6]&&Ge(n);N=new Wr({props:{isRunning:n[10],cancelInProgress:n[8],workflow:n[1],namespace:n[0]}}),C=new Zt({props:{$$slots:{default:[zr]},$$scope:{ctx:n}}});let W=n[8]&&Ze(n),m=n[7]&&xe(n);return{c(){t=Q("div"),r=Q("div"),D(e.$$.fragment),o=O(),v&&v.c(),l=O(),s=Q("header"),a=Q("div"),f=Q("div"),u=Q("div"),D(c.$$.fragment),p=O(),g=Q("div"),k=Q("h1"),D(_.$$.fragment),i=O(),H&&H.c(),h=O(),V=Q("div"),D(N.$$.fragment),E=O(),D(C.$$.fragment),M=O(),W&&W.c(),b=O(),m&&m.c(),this.h()},l(A){t=Y(A,"DIV",{class:!0});var B=z(t);r=Y(B,"DIV",{class:!0});var F=z(r);R(e.$$.fragment,F),o=U(F),v&&v.l(F),F.forEach($),l=U(B),s=Y(B,"HEADER",{class:!0});var X=z(s);a=Y(X,"DIV",{class:!0});var pe=z(a);f=Y(pe,"DIV",{class:!0});var ne=z(f);u=Y(ne,"DIV",{class:!0});var ge=z(u);R(c.$$.fragment,ge),ge.forEach($),p=U(ne),g=Y(ne,"DIV",{class:!0});var de=z(g);k=Y(de,"H1",{"data-testid":!0,class:!0});var we=z(k);R(_.$$.fragment,we),we.forEach($),i=U(de),H&&H.l(de),de.forEach($),ne.forEach($),h=U(pe),V=Y(pe,"DIV",{class:!0});var Ne=z(V);R(N.$$.fragment,Ne),Ne.forEach($),pe.forEach($),E=U(X),R(C.$$.fragment,X),M=U(X),W&&W.l(X),b=U(X),m&&m.l(X),X.forEach($),B.forEach($),this.h()},h(){j(r,"class","pb-4"),j(u,"class","px-2"),j(k,"data-testid","workflow-id-heading"),j(k,"class","overflow-hidden text-base font-medium lg:text-2xl"),j(g,"class","flex flex-col flex-wrap gap-0"),j(f,"class","flex flex-col items-center gap-4 lg:flex-row"),j(V,"class","px-2"),j(a,"class","flex flex-col items-center justify-between gap-4 lg:flex-row"),j(s,"class","rounded-top flex flex-col gap-0"),j(t,"class","surface-secondary")},m(A,B){y(A,t,B),q(t,r),P(e,r,null),q(r,o),v&&v.m(r,null),q(t,l),q(t,s),q(s,a),q(a,f),q(f,u),P(c,u,null),q(f,p),q(f,g),q(g,k),P(_,k,null),q(g,i),H&&H.m(g,null),q(a,h),q(a,V),P(N,V,null),q(s,E),P(C,s,null),q(s,M),W&&W.m(s,null),q(s,b),m&&m.m(s,null),I=!0},p(A,[B]){var de,we;const F={};B&16385&&(F.href=`${Pe({namespace:A[0]})}?${A[14]}`),B&8392704&&(F.$$scope={dirty:B,ctx:A}),e.$set(F),A[12]?v?(v.p(A,B),B&4096&&d(v,1)):(v=Je(A),v.c(),d(v,1),v.m(r,null)):v&&(x(),w(v,1,1,()=>{v=null}),ee());const X={};B&2&&(X.status=(de=A[1])==null?void 0:de.status),c.$set(X);const pe={};B&2&&(pe.content=(we=A[1])==null?void 0:we.id),_.$set(pe),A[6]?H?(H.p(A,B),B&64&&d(H,1)):(H=Ge(A),H.c(),d(H,1),H.m(g,null)):H&&(x(),w(H,1,1,()=>{H=null}),ee());const ne={};B&1024&&(ne.isRunning=A[10]),B&256&&(ne.cancelInProgress=A[8]),B&2&&(ne.workflow=A[1]),B&1&&(ne.namespace=A[0]),N.$set(ne);const ge={};B&8432178&&(ge.$$scope={dirty:B,ctx:A}),C.$set(ge),A[8]?W?(W.p(A,B),B&256&&d(W,1)):(W=Ze(A),W.c(),d(W,1),W.m(s,b)):W&&(x(),w(W,1,1,()=>{W=null}),ee()),A[7]?m?(m.p(A,B),B&128&&d(m,1)):(m=xe(A),m.c(),d(m,1),m.m(s,null)):m&&(x(),w(m,1,1,()=>{m=null}),ee())},i(A){I||(d(e.$$.fragment,A),d(v),d(c.$$.fragment,A),d(_.$$.fragment,A),d(H),d(N.$$.fragment,A),d(C.$$.fragment,A),d(W),d(m),I=!0)},o(A){w(e.$$.fragment,A),w(v),w(c.$$.fragment,A),w(_.$$.fragment,A),w(H),w(N.$$.fragment,A),w(C.$$.fragment,A),w(W),w(m),I=!1},d(A){A&&$(t),S(e),v&&v.d(),S(c),S(_),H&&H.d(),S(N),S(C),W&&W.d(),m&&m.d()}}}function Zr(n,t,r){let e,o,l,s,a,f,u,c,p,g,k,_,i,h,V,N,E;J(n,er,W=>r(21,k=W)),J(n,De,W=>r(22,_=W)),J(n,he,W=>r(2,i=W)),J(n,$t,W=>r(3,h=W)),J(n,We,W=>r(4,V=W)),J(n,st,W=>r(14,N=W)),J(n,at,W=>r(15,E=W));var C,M,b,I,v;let{namespace:H}=t;return n.$$set=W=>{"namespace"in W&&r(0,H=W.namespace)},n.$$.update=()=>{n.$$.dirty&4&&r(1,{workflow:e,workers:o}=i,e,(r(13,o),r(2,i))),n.$$.dirty&16&&r(12,l=V.params.id),n.$$.dirty&3&&r(11,s={namespace:H,workflow:e==null?void 0:e.id,run:e==null?void 0:e.runId}),n.$$.dirty&65540&&r(10,a=r(16,C=i==null?void 0:i.workflow)===null||C===void 0?void 0:C.isRunning),n.$$.dirty&131076&&r(9,f=["Terminated","TimedOut","Canceled"].includes(r(17,M=i.workflow)===null||M===void 0?void 0:M.status)),n.$$.dirty&4456452&&r(8,u=yr(r(18,b=i==null?void 0:i.workflow)===null||b===void 0?void 0:b.status,_)),n.$$.dirty&524300&&r(7,c=rr(h,r(19,I=i==null?void 0:i.workflow)===null||I===void 0?void 0:I.runId)),n.$$.dirty&1048578&&r(6,p=r(20,v=e==null?void 0:e.mostRecentWorkerVersionStamp)===null||v===void 0?void 0:v.useVersioning),n.$$.dirty&6291458&&r(5,g=tr(e,_,k))},[H,e,i,h,V,g,p,c,u,f,a,s,l,o,N,E,C,M,b,I,v,k,_]}class ht extends ce{constructor(t){super(),me(this,t,Zr,Xr,ue,{namespace:0})}}async function xr({activity:n,namespace:t,settings:r,accessToken:e},{convertWithCodec:o=or,decodeAttributes:l=nr}={}){const s=await o({attributes:n,namespace:t,settings:r,accessToken:e});return l(s)}const eo=async({activity:n,namespace:t,settings:r,accessToken:e})=>await xr({activity:n,namespace:t,settings:r,accessToken:e}),et=async(n,t,r,e)=>{const o=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of o){const a=await eo({activity:s,namespace:t,settings:r,accessToken:e});l.push(a)}return l};function to(n){let t,r,e,o;r=new ht({props:{namespace:n[0].params.namespace}});const l=n[10].default,s=ye(l,n,n[11],null);return{c(){t=Q("div"),D(r.$$.fragment),e=O(),s&&s.c(),this.h()},l(a){t=Y(a,"DIV",{class:!0});var f=z(t);R(r.$$.fragment,f),f.forEach($),e=U(a),s&&s.l(a),this.h()},h(){j(t,"class","px-8 pt-24 md:pt-20")},m(a,f){y(a,t,f),P(r,t,null),y(a,e,f),s&&s.m(a,f),o=!0},p(a,f){const u={};f&1&&(u.namespace=a[0].params.namespace),r.$set(u),s&&s.p&&(!o||f&2048)&&qe(s,l,a,a[11],o?Fe(l,a[11],f,null):He(a[11]),null)},i(a){o||(d(r.$$.fragment,a),d(s,a),o=!0)},o(a){w(r.$$.fragment,a),w(s,a),o=!1},d(a){a&&($(t),$(e)),S(r),s&&s.d(a)}}}function ro(n){let t,r;return t=new ft({props:{class:"pt-24"}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p:fe,i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function oo(n){let t,r;return t=new wt({props:{error:n[1]}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2&&(l.error=e[1]),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function no(n){let t,r,e,o,l;const s=[oo,ro,to],a=[];function f(u,c){return u[1]?0:u[2].workflow?2:1}return r=f(n),e=a[r]=s[r](n),{c(){t=Q("div"),e.c(),this.h()},l(u){t=Y(u,"DIV",{class:!0});var c=z(t);e.l(c),c.forEach($),this.h()},h(){j(t,"class",o="surface-secondary absolute bottom-0 left-0 right-0 "+(n[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0")},m(u,c){y(u,t,c),a[r].m(t,null),l=!0},p(u,c){let p=r;r=f(u),r===p?a[r].p(u,c):(x(),w(a[p],1,1,()=>{a[p]=null}),ee(),e=a[r],e?e.p(u,c):(e=a[r]=s[r](u),e.c()),d(e,1),e.m(t,null)),(!l||c&8&&o!==(o="surface-secondary absolute bottom-0 left-0 right-0 "+(u[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0"))&&j(t,"class",o)},i(u){l||(d(e),l=!0)},o(u){w(e),l=!1},d(u){u&&$(t),a[r].d()}}}function lo(n){let t,r,e;t=new ht({props:{namespace:n[0].params.namespace}});const o=n[10].default,l=ye(o,n,n[11],null);return{c(){D(t.$$.fragment),r=O(),l&&l.c()},l(s){R(t.$$.fragment,s),r=U(s),l&&l.l(s)},m(s,a){P(t,s,a),y(s,r,a),l&&l.m(s,a),e=!0},p(s,a){const f={};a&1&&(f.namespace=s[0].params.namespace),t.$set(f),l&&l.p&&(!e||a&2048)&&qe(l,o,s,s[11],e?Fe(o,s[11],a,null):He(s[11]),null)},i(s){e||(d(t.$$.fragment,s),d(l,s),e=!0)},o(s){w(t.$$.fragment,s),w(l,s),e=!1},d(s){s&&$(r),S(t,s),l&&l.d(s)}}}function so(n){let t,r;return t=new ft({}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p:fe,i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function ao(n){let t,r;return t=new wt({props:{error:n[1]}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,o){const l={};o&2&&(l.error=e[1]),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function fo(n){let t,r,e,o;const l=[ao,so,lo],s=[];function a(f,u){return f[1]?0:f[2].workflow?2:1}return r=a(n),e=s[r]=l[r](n),{c(){t=Q("div"),e.c(),this.h()},l(f){t=Y(f,"DIV",{class:!0,slot:!0});var u=z(t);e.l(u),u.forEach($),this.h()},h(){j(t,"class","flex h-full flex-col gap-0"),j(t,"slot","fallback")},m(f,u){y(f,t,u),s[r].m(t,null),o=!0},p(f,u){let c=r;r=a(f),r===c?s[r].p(f,u):(x(),w(s[c],1,1,()=>{s[c]=null}),ee(),e=s[r],e?e.p(f,u):(e=s[r]=l[r](f),e.c()),d(e,1),e.m(t,null))},i(f){o||(d(e),o=!0)},o(f){w(e),o=!1},d(f){f&&$(t),s[r].d()}}}function io(n){let t,r;return t=new At({props:{$$slots:{fallback:[fo],default:[no]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,[o]){const l={};o&2063&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function uo(n,t,r){let e,o,l,s,a,f,u,c,p,g,k,_;J(n,Le,v=>r(7,s=v)),J(n,We,v=>r(0,a=v)),J(n,$e,v=>r(8,f=v)),J(n,at,v=>r(9,u=v)),J(n,Me,v=>r(13,c=v)),J(n,he,v=>r(2,p=v)),J(n,De,v=>r(14,g=v)),J(n,sr,v=>r(15,k=v)),J(n,Et,v=>r(3,_=v));let{$$slots:i={},$$scope:h}=t,V,N;const E=async(v,H,W,m,L)=>{const{settings:oe}=a.data,{workflow:A,error:B}=await Be({namespace:v,workflowId:H,runId:W});if(B){r(1,V=B);return}const{taskQueue:F}=A,X=await Kt({queue:F,namespace:v});A.pendingActivities=await et(A,v,oe,k==null?void 0:k.accessToken),te(he,p={workflow:A,workers:X},p),N=new AbortController,te(De,g=await lr({namespace:v,workflowId:H,runId:W,sort:L?"ascending":m,signal:N.signal,historySize:A.historyEvents}),g)},C=async v=>{var H;if(v&&(!((H=p==null?void 0:p.workflow)===null||H===void 0)&&H.isRunning)){const{settings:W}=a.data,{workflow:m,error:L}=await Be({namespace:e,workflowId:o,runId:l});if(L){r(1,V=L);return}m.pendingActivities=await et(m,e,W,k==null?void 0:k.accessToken),te(he,p={...p,workflow:m},p)}},M=()=>{te(De,g=[],g),N&&N.abort()},b=()=>{te(Me,c=null,c),te(he,p=Qt,p),r(1,V=void 0),M()},I=()=>{te(Me,c=null,c),M()};return vt(()=>{const v=a.url.searchParams.get("sort");v&&te(Le,s=v,s)}),nt(()=>{b()}),n.$$set=v=>{"$$scope"in v&&r(11,h=v.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r(6,{namespace:e,workflow:o,run:l}=a.params,e,(r(5,o),r(0,a)),(r(4,l),r(0,a))),n.$$.dirty&16&&b(),n.$$.dirty&640&&I(),n.$$.dirty&752&&E(e,o,l,s,u),n.$$.dirty&256&&C(f)},[a,V,p,_,l,o,e,s,f,u,i,h]}class co extends ce{constructor(t){super(),me(this,t,uo,io,ue,{})}}const kt={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},mo=ut(kt),po=()=>{mo.set(kt)};function _o(n){let t;const r=n[0].default,e=ye(r,n,n[1],null);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,l){e&&e.m(o,l),t=!0},p(o,l){e&&e.p&&(!t||l&2)&&qe(e,r,o,o[1],t?Fe(r,o[1],l,null):He(o[1]),null)},i(o){t||(d(e,o),t=!0)},o(o){w(e,o),t=!1},d(o){e&&e.d(o)}}}function go(n){let t,r;return t=new co({props:{$$slots:{default:[_o]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(e){R(t.$$.fragment,e)},m(e,o){P(t,e,o),r=!0},p(e,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){w(t.$$.fragment,e),r=!1},d(e){S(t,e)}}}function wo(n,t,r){let{$$slots:e={},$$scope:o}=t;return nt(()=>{po()}),n.$$set=l=>{"$$scope"in l&&r(1,o=l.$$scope)},[e,o]}class mn extends ce{constructor(t){super(),me(this,t,wo,go,ue,{})}}export{mn as component};
