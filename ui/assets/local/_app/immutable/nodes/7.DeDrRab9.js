import{s as ve,e as O,a as J,t as G,b as j,d as Q,g as d,h as Y,f as K,j as z,k as A,l as q,n as he,c as X,v as ae,ac as pt,_ as se,$ as ie,x as ke,y as dt,a3 as to,w as le,Q as _t,ad as Be,J as gt,p as wt,u as ht,q as $t,r as kt}from"../chunks/scheduler.yuwC4fMQ.js";import{S as Ie,i as Ee,c as P,a as W,m as V,t as _,b as $,d as M,h as ue,g as pe,e as de,f as bt}from"../chunks/index.m6evPz-M.js";import{p as qe}from"../chunks/stores.-6rcgpqM.js";import{L as Ne}from"../chunks/link.8ZNA0KjK.js";import{t as k}from"../chunks/translate.eu_ZgPaL.js";import{a as vt}from"../chunks/workflows.08TFKbol.js";import{e as Ve,b as $e,p as Re,q as Ce,c as Ae,s as De}from"../chunks/route-for.5EXY-_-Z.js";import{L as oo}from"../chunks/loading.zgfbl5xF.js";import{a as It}from"../chunks/index.VnKdIPSl.js";import{T as ro}from"../chunks/toggle-switch.gTAMbkvT.js";import{T as Fe}from"../chunks/tooltip.aPF0RmVi.js";import{b as ye,a as Ye}from"../chunks/event-view.E-6qe0gn.js";import{e as Me}from"../chunks/each.oHGYpoql.js";import{w as Et}from"../chunks/entry.ghogGMAk.js";import{C as no}from"../chunks/checkbox.pQLcbkc6.js";import{I as Ue}from"../chunks/input.uu97RhAE.js";import{R as lo,a as so}from"../chunks/radio-input.WcgjsT3m.js";import{R as be,A as ze}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as Tt,e as Pe,t as Ge,i as ao}from"../chunks/events.29dYI7t4.js";import{B as fo}from"../chunks/button.dS1PdVnx.js";import{C as io}from"../chunks/code-block.x6cf1K-N.js";import{B as Le}from"../chunks/badge.XPdPhSiN.js";import{I as uo}from"../chunks/icon.Pdyk06Sg.js";import{c as co}from"../chunks/menu.x8jhEGer.js";import{M as mo}from"../chunks/menu-divider.dja-D4ii.js";import{M as Se}from"../chunks/modal.I6qzwuxn.js";import{S as po}from"../chunks/split-button.OkVb35p1.js";import{e as _o,g as go,h as wo,r as ho,i as $o}from"../chunks/workflow-service.weqdYyem.js";import{a as Rt}from"../chunks/auth-user.YfSHjaOi.js";import{c as ko}from"../chunks/core-user.91WjDYSs.js";import{p as bo,i as vo,c as Io}from"../chunks/data-encoder-config.PZ0DKkXd.js";import{p as Eo}from"../chunks/persist-store.AQf0dmco.js";import{s as To}from"../chunks/settings.sQbq8Y8T.js";import{t as He}from"../chunks/toaster.U5EoQAuE.js";import{r as ge,w as We,i as Ro}from"../chunks/workflow-run.avsPHiEA.js";import{w as Co,a as Ao,f as Ke}from"../chunks/workflow-terminate-enabled.BYei9Lai.js";import{w as Do}from"../chunks/write-actions-are-allowed.I-pnGKYx.js";import{W as So}from"../chunks/workflow-status.7Za6Como.js";import{A as Ct}from"../chunks/alert.jcUjNG36.js";import{C as Xe,g as yo,a as Po}from"../chunks/pollers-service.CivBdcLA.js";import{C as Wo}from"../chunks/index.zPKr0HDq.js";import{a as Vo,b as Mo,c as Te}from"../chunks/tab.qML8GSQ_.js";import{h as qo}from"../chunks/has._Y9Lh-nL.js";import{f as No,b as Ho,h as Bo}from"../chunks/task-queue-compatibility.52mtxoi2.js";import{f as Fo,d as Uo}from"../chunks/decode-payload.iwLN2SA_.js";import{a as Lo}from"../chunks/events-service.zmSo5Kp-.js";function Oo(n){let o=k("workflows.back-to-workflows")+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p:ae,d(t){t&&d(e)}}}function jo(n){var F,D;let o,e,t,r,l,s,i=(((F=n[0])==null?void 0:F.statusCode)??"500")+"",a,u,p,f,c,g,b=(((D=n[0])==null?void 0:D.statusText)??"")+"",T,I;return t=new Ne({props:{href:`${Ve({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Oo]},$$scope:{ctx:n}}}),{c(){o=O("header"),e=O("div"),P(t.$$.fragment),r=J(),l=O("div"),s=O("h1"),a=G(i),u=J(),p=O("p"),f=G(n[1]),c=J(),g=O("p"),T=G(b),this.h()},l(h){o=j(h,"HEADER",{class:!0});var R=Q(o);e=j(R,"DIV",{class:!0});var S=Q(e);W(t.$$.fragment,S),S.forEach(d),R.forEach(d),r=Y(h),l=j(h,"DIV",{class:!0});var H=Q(l);s=j(H,"H1",{class:!0});var v=Q(s);a=K(v,i),v.forEach(d),u=Y(H),p=j(H,"P",{class:!0});var N=Q(p);f=K(N,n[1]),N.forEach(d),c=Y(H),g=j(H,"P",{class:!0});var B=Q(g);T=K(B,b),B.forEach(d),H.forEach(d),this.h()},h(){z(e,"class","mb-4 block"),z(o,"class","mb-4 flex flex-col gap-1"),z(s,"class","leading-0 text-[12rem] font-semibold"),z(p,"class","-mt-12 text-lg"),z(g,"class","text-2xl font-bold text-red-700"),z(l,"class","text-center align-middle")},m(h,R){A(h,o,R),q(o,e),V(t,e,null),A(h,r,R),A(h,l,R),q(l,s),q(s,a),q(l,u),q(l,p),q(p,f),q(l,c),q(l,g),q(g,T),I=!0},p(h,[R]){var H,v;const S={};R&12&&(S.href=`${Ve({namespace:h[2]})}?${h[3]}`),R&32&&(S.$$scope={dirty:R,ctx:h}),t.$set(S),(!I||R&1)&&i!==(i=(((H=h[0])==null?void 0:H.statusCode)??"500")+"")&&he(a,i),(!I||R&2)&&he(f,h[1]),(!I||R&1)&&b!==(b=(((v=h[0])==null?void 0:v.statusText)??"")+"")&&he(T,b)},i(h){I||(_(t.$$.fragment,h),I=!0)},o(h){$(t.$$.fragment,h),I=!1},d(h){h&&(d(o),d(r),d(l)),M(t)}}}function Qo(n,o,e){let t,r,l,s;X(n,qe,a=>e(4,l=a)),X(n,vt,a=>e(3,s=a));let{error:i}=o;return n.$$set=a=>{"error"in a&&e(0,i=a.error)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{namespace:t}=l.params,t),n.$$.dirty&1&&e(1,r=i.statusCode===404?k("workflows.workflow-404-title"):k("workflows.workflow-error-title"))},[i,r,t,s,l]}class Jo extends Ie{constructor(o){super(),Ee(this,o,Qo,jo,ve,{error:0})}}function Yo(n){let o,e;return o=new ro({props:{label:k("common.auto-refresh"),labelPosition:"left",id:"autorefresh",checked:n[1]}}),o.$on("change",function(){pt(n[0])&&n[0].apply(this,arguments)}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){n=t;const l={};r&2&&(l.checked=n[1]),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function zo(n){let o,e;return o=new Fe({props:{bottomLeft:!0,text:k("common.auto-refresh-tooltip",{interval:"15"}),$$slots:{default:[Yo]},$$scope:{ctx:n}}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,[r]){const l={};r&11&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Go(n,o,e){let t,r;X(n,ye,s=>e(2,r=s));let{onChange:l}=o;return n.$$set=s=>{"onChange"in s&&e(0,l=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&e(1,t=r==="on")},[l,t,r]}class Ko extends Ie{constructor(o){super(),Ee(this,o,Go,zo,ve,{onChange:0})}}function Ze(n,o,e){const t=n.slice();return t[6]=o[e],t}function xe(n){let o,e;return o=new so({props:{id:"reset-event-"+n[6].id,value:n[6].id,label:n[6].id+" - "+n[6].eventType}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&8&&(l.id="reset-event-"+t[6].id),r&8&&(l.value=t[6].id),r&8&&(l.label=t[6].id+" - "+t[6].eventType),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Xo(n){let o,e,t=Me(n[3]),r=[];for(let s=0;s<t.length;s+=1)r[s]=xe(Ze(n,t,s));const l=s=>$(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=ke()},l(s){for(let i=0;i<r.length;i+=1)r[i].l(s);o=ke()},m(s,i){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,i);A(s,o,i),e=!0},p(s,i){if(i&8){t=Me(s[3]);let a;for(a=0;a<t.length;a+=1){const u=Ze(s,t,a);r[a]?(r[a].p(u,i),_(r[a],1)):(r[a]=xe(u),r[a].c(),_(r[a],1),r[a].m(o.parentNode,o))}for(pe(),a=t.length;a<r.length;a+=1)l(a);de()}},i(s){if(!e){for(let i=0;i<t.length;i+=1)_(r[i]);e=!0}},o(s){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);e=!1},d(s){s&&d(o),dt(r,s)}}}function Zo(n){let o,e,t,r,l,s,i,a;e=new lo({props:{name:"reset-event-id",group:n[2],class:"max-h-40 overflow-auto",description:k("workflows.reset-event-radio-group-description"),$$slots:{default:[Xo]},$$scope:{ctx:n}}}),r=new no({props:{id:"reset-reapply-type-checkbox",checked:n[0]===be.Signal,label:k("workflows.reset-reapply-type-label")}}),r.$on("change",n[4]);function u(f){n[5](f)}let p={id:"reset-reason",label:k("common.reason")};return n[1]!==void 0&&(p.value=n[1]),s=new Ue({props:p}),se.push(()=>ue(s,"value",u)),{c(){o=O("div"),P(e.$$.fragment),t=J(),P(r.$$.fragment),l=J(),P(s.$$.fragment),this.h()},l(f){o=j(f,"DIV",{class:!0});var c=Q(o);W(e.$$.fragment,c),t=Y(c),W(r.$$.fragment,c),l=Y(c),W(s.$$.fragment,c),c.forEach(d),this.h()},h(){z(o,"class","flex w-full flex-col gap-4")},m(f,c){A(f,o,c),V(e,o,null),q(o,t),V(r,o,null),q(o,l),V(s,o,null),a=!0},p(f,[c]){const g={};c&4&&(g.group=f[2]),c&520&&(g.$$scope={dirty:c,ctx:f}),e.$set(g);const b={};c&1&&(b.checked=f[0]===be.Signal),r.$set(b);const T={};!i&&c&2&&(i=!0,T.value=f[1],ie(()=>i=!1)),s.$set(T)},i(f){a||(_(e.$$.fragment,f),_(r.$$.fragment,f),_(s.$$.fragment,f),a=!0)},o(f){$(e.$$.fragment,f),$(r.$$.fragment,f),$(s.$$.fragment,f),a=!1},d(f){f&&d(o),M(e),M(r),M(s)}}}function xo(n,o,e){let t;X(n,Tt,u=>e(3,t=u));let{resetReapplyType:r=be.Signal}=o,{reason:l=""}=o,{eventId:s}=o;const i=u=>{e(0,r=u.detail.checked?be.Signal:be.None)};function a(u){l=u,e(1,l)}return n.$$set=u=>{"resetReapplyType"in u&&e(0,r=u.resetReapplyType),"reason"in u&&e(1,l=u.reason),"eventId"in u&&e(2,s=u.eventId)},[r,l,s,t,i,a]}class er extends Ie{constructor(o){super(),Ee(this,o,xo,Zo,ve,{resetReapplyType:0,reason:1,eventId:2})}}const At=Eo("resetWorkflows",{}),tr=n=>!n.disableWriteActions&&!n.workflowResetDisabled,or=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function et(n,o,e){const t=n.slice();return t[65]=o[e].onClick,t[66]=o[e].destructive,t[67]=o[e].label,t[68]=o[e].allowed,t[69]=o[e].testId,t[70]=o[e].tooltip,t}function rr(n){let o,e;return o=new Fe({props:{bottomRight:!0,width:200,text:n[2],hide:n[3],$$slots:{default:[sr]},$$scope:{ctx:n}}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r[0]&4&&(l.text=t[2]),r[0]&8&&(l.hide=t[3]),r[0]&520|r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function nr(n){let o,e;return o=new po({props:{id:"workflow-actions",position:"right",disabled:n[18],primaryActionDisabled:!n[19]||n[0],label:k("workflows.request-cancellation"),menuLabel:k("workflows.workflow-actions"),$$slots:{default:[ir]},$$scope:{ctx:n}}}),o.$on("click",n[41]),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r[0]&262144&&(l.disabled=t[18]),r[0]&524289&&(l.primaryActionDisabled=!t[19]||t[0]),r[0]&131072|r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function lr(n){let o=k("workflows.reset")+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p:ae,d(t){t&&d(e)}}}function sr(n){let o,e;return o=new fo({props:{"aria-label":k("workflows.reset"),disabled:!n[3],variant:"primary",$$slots:{default:[lr]},$$scope:{ctx:n}}}),o.$on("click",n[42]),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r[0]&8&&(l.disabled=!t[3]),r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function tt(n){let o,e;return o=new mo({}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function ar(n){let o=n[67]+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p(t,r){r[0]&131072&&o!==(o=t[67]+"")&&he(e,o)},d(t){t&&d(e)}}}function fr(n){let o,e,t;return o=new co({props:{destructive:n[66],disabled:!n[68],"data-testid":n[69],$$slots:{default:[ar]},$$scope:{ctx:n}}}),o.$on("click",function(){pt(n[65])&&n[65].apply(this,arguments)}),{c(){P(o.$$.fragment),e=J()},l(r){W(o.$$.fragment,r),e=Y(r)},m(r,l){V(o,r,l),A(r,e,l),t=!0},p(r,l){n=r;const s={};l[0]&131072&&(s.destructive=n[66]),l[0]&131072&&(s.disabled=!n[68]),l[0]&131072&&(s["data-testid"]=n[69]),l[0]&131072|l[2]&2048&&(s.$$scope={dirty:l,ctx:n}),o.$set(s)},i(r){t||(_(o.$$.fragment,r),t=!0)},o(r){$(o.$$.fragment,r),t=!1},d(r){r&&d(e),M(o,r)}}}function ot(n){let o,e,t,r=n[66]&&tt();return e=new Fe({props:{text:n[70],hide:!n[70],width:200,left:!0,$$slots:{default:[fr]},$$scope:{ctx:n}}}),{c(){r&&r.c(),o=J(),P(e.$$.fragment)},l(l){r&&r.l(l),o=Y(l),W(e.$$.fragment,l)},m(l,s){r&&r.m(l,s),A(l,o,s),V(e,l,s),t=!0},p(l,s){l[66]?r?s[0]&131072&&_(r,1):(r=tt(),r.c(),_(r,1),r.m(o.parentNode,o)):r&&(pe(),$(r,1,1,()=>{r=null}),de());const i={};s[0]&131072&&(i.text=l[70]),s[0]&131072&&(i.hide=!l[70]),s[0]&131072|s[2]&2048&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){t||(_(r),_(e.$$.fragment,l),t=!0)},o(l){$(r),$(e.$$.fragment,l),t=!1},d(l){l&&d(o),r&&r.d(l),M(e,l)}}}function ir(n){let o,e,t=Me(n[17]),r=[];for(let s=0;s<t.length;s+=1)r[s]=ot(et(n,t,s));const l=s=>$(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=ke()},l(s){for(let i=0;i<r.length;i+=1)r[i].l(s);o=ke()},m(s,i){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,i);A(s,o,i),e=!0},p(s,i){if(i[0]&131072){t=Me(s[17]);let a;for(a=0;a<t.length;a+=1){const u=et(s,t,a);r[a]?(r[a].p(u,i),_(r[a],1)):(r[a]=ot(u),r[a].c(),_(r[a],1),r[a].m(o.parentNode,o))}for(pe(),a=t.length;a<r.length;a+=1)l(a);de()}},i(s){if(!e){for(let i=0;i<t.length;i+=1)_(r[i]);e=!0}},o(s){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);e=!1},d(s){s&&d(o),dt(r,s)}}}function ur(n){let o,e=k("workflows.reset-modal-title")+"",t;return{c(){o=O("h3"),t=G(e),this.h()},l(r){o=j(r,"H3",{slot:!0});var l=Q(o);t=K(l,e),l.forEach(d),this.h()},h(){z(o,"slot","title")},m(r,l){A(r,o,l),q(o,t)},p:ae,d(r){r&&d(o)}}}function cr(n){let o,e,t,r,l;function s(p){n[43](p)}function i(p){n[44](p)}function a(p){n[45](p)}let u={};return n[13]!==void 0&&(u.eventId=n[13]),n[12]!==void 0&&(u.resetReapplyType=n[12]),n[14]!==void 0&&(u.reason=n[14]),o=new er({props:u}),se.push(()=>ue(o,"eventId",s)),se.push(()=>ue(o,"resetReapplyType",i)),se.push(()=>ue(o,"reason",a)),{c(){P(o.$$.fragment)},l(p){W(o.$$.fragment,p)},m(p,f){V(o,p,f),l=!0},p(p,f){const c={};!e&&f[0]&8192&&(e=!0,c.eventId=p[13],ie(()=>e=!1)),!t&&f[0]&4096&&(t=!0,c.resetReapplyType=p[12],ie(()=>t=!1)),!r&&f[0]&16384&&(r=!0,c.reason=p[14],ie(()=>r=!1)),o.$set(c)},i(p){l||(_(o.$$.fragment,p),l=!0)},o(p){$(o.$$.fragment,p),l=!1},d(p){M(o,p)}}}function mr(n){let o,e=k("workflows.cancel-modal-title")+"",t;return{c(){o=O("h3"),t=G(e),this.h()},l(r){o=j(r,"H3",{slot:!0});var l=Q(o);t=K(l,e),l.forEach(d),this.h()},h(){z(o,"slot","title")},m(r,l){A(r,o,l),q(o,t)},p:ae,d(r){r&&d(o)}}}function pr(n){let o,e=k("workflows.cancel-modal-confirmation")+"",t;return{c(){o=O("p"),t=G(e)},l(r){o=j(r,"P",{});var l=Q(o);t=K(l,e),l.forEach(d)},m(r,l){A(r,o,l),q(o,t)},p:ae,d(r){r&&d(o)}}}function dr(n){let o,e=k("workflows.terminate-modal-title")+"",t;return{c(){o=O("h3"),t=G(e),this.h()},l(r){o=j(r,"H3",{slot:!0});var l=Q(o);t=K(l,e),l.forEach(d),this.h()},h(){z(o,"slot","title")},m(r,l){A(r,o,l),q(o,t)},p:ae,d(r){r&&d(o)}}}function _r(n){let o,e,t=k("workflows.terminate-modal-confirmation")+"",r,l,s,i,a;function u(f){n[50](f)}let p={id:"workflow-termination-reason",class:"mt-4",placeholder:k("common.reason-placeholder"),label:k("common.reason-placeholder"),labelHidden:!0};return n[4]!==void 0&&(p.value=n[4]),s=new Ue({props:p}),se.push(()=>ue(s,"value",u)),{c(){o=O("div"),e=O("p"),r=G(t),l=J(),P(s.$$.fragment),this.h()},l(f){o=j(f,"DIV",{slot:!0});var c=Q(o);e=j(c,"P",{});var g=Q(e);r=K(g,t),g.forEach(d),l=Y(c),W(s.$$.fragment,c),c.forEach(d),this.h()},h(){z(o,"slot","content")},m(f,c){A(f,o,c),q(o,e),q(e,r),q(o,l),V(s,o,null),a=!0},p(f,c){const g={};!i&&c[0]&16&&(i=!0,g.value=f[4],ie(()=>i=!1)),s.$set(g)},i(f){a||(_(s.$$.fragment,f),a=!0)},o(f){$(s.$$.fragment,f),a=!1},d(f){f&&d(o),M(s)}}}function gr(n){let o,e=k("workflows.signal-modal-title")+"",t;return{c(){o=O("h3"),t=G(e),this.h()},l(r){o=j(r,"H3",{slot:!0});var l=Q(o);t=K(l,e),l.forEach(d),this.h()},h(){z(o,"slot","title")},m(r,l){A(r,o,l),q(o,t)},p:ae,d(r){r&&d(o)}}}function wr(n){let o,e,t,r,l,s,i=k("workflows.signal-payload-input-label")+"",a,u,p,f=k("workflows.signal-payload-input-label-hint")+"",c,g,b,T;function I(h){n[53](h)}let F={id:"signal-name",label:k("workflows.signal-name-label"),required:!0};n[6]!==void 0&&(F.value=n[6]),e=new Ue({props:F}),se.push(()=>ue(e,"value",I));let D={class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1};return b=new io({props:D}),n[54](b),b.$on("change",n[26]),{c(){o=O("div"),P(e.$$.fragment),r=J(),l=O("div"),s=O("span"),a=G(i),u=J(),p=O("span"),c=G(f),g=J(),P(b.$$.fragment),this.h()},l(h){o=j(h,"DIV",{slot:!0,class:!0});var R=Q(o);W(e.$$.fragment,R),r=Y(R),l=j(R,"DIV",{});var S=Q(l);s=j(S,"SPAN",{class:!0});var H=Q(s);a=K(H,i),H.forEach(d),u=Y(S),p=j(S,"SPAN",{class:!0});var v=Q(p);c=K(v,f),v.forEach(d),g=Y(S),W(b.$$.fragment,S),S.forEach(d),R.forEach(d),this.h()},h(){z(s,"class","font-secondary text-sm font-medium"),z(p,"class","font-secondary text-xs font-light italic"),z(o,"slot","content"),z(o,"class","flex flex-col gap-4")},m(h,R){A(h,o,R),V(e,o,null),q(o,r),q(o,l),q(l,s),q(s,a),q(l,u),q(l,p),q(p,c),q(l,g),V(b,l,null),T=!0},p(h,R){const S={};!t&&R[0]&64&&(t=!0,S.value=h[6],ie(()=>t=!1)),e.$set(S);const H={};R[0]&32&&(H.content=h[5]),b.$set(H)},i(h){T||(_(e.$$.fragment,h),_(b.$$.fragment,h),T=!0)},o(h){$(e.$$.fragment,h),$(b.$$.fragment,h),T=!1},d(h){h&&d(o),M(e),n[54](null),M(b)}}}function hr(n){let o,e,t,r,l,s,i,a,u,p,f,c,g,b,T,I,F,D,h;const R=[nr,rr],S=[];function H(m,y){return m[1]?0:1}o=H(n),e=S[o]=R[o](n);function v(m){n[46](m)}function N(m){n[47](m)}let B={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:k("common.confirm"),cancelText:k("common.cancel"),confirmDisabled:!n[20],$$slots:{content:[cr],title:[ur]},$$scope:{ctx:n}};n[11]!==void 0&&(B.error=n[11]),n[9]!==void 0&&(B.open=n[9]),r=new Se({props:B}),se.push(()=>ue(r,"error",v)),se.push(()=>ue(r,"open",N)),r.$on("confirmModal",n[28]),r.$on("cancelModal",n[23]);function U(m){n[48](m)}function L(m){n[49](m)}let te={id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",confirmText:k("common.confirm"),cancelText:k("common.cancel"),loading:n[15],confirmType:"destructive",$$slots:{content:[pr],title:[mr]},$$scope:{ctx:n}};n[11]!==void 0&&(te.error=n[11]),n[7]!==void 0&&(te.open=n[7]),a=new Se({props:te}),se.push(()=>ue(a,"error",U)),se.push(()=>ue(a,"open",L)),a.$on("confirmModal",n[25]);function Z(m){n[51](m)}function C(m){n[52](m)}let E={id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",confirmText:k("workflows.terminate"),cancelText:k("common.cancel"),confirmType:"destructive",$$slots:{content:[_r],title:[dr]},$$scope:{ctx:n}};n[11]!==void 0&&(E.error=n[11]),n[8]!==void 0&&(E.open=n[8]),c=new Se({props:E}),se.push(()=>ue(c,"error",Z)),se.push(()=>ue(c,"open",C)),c.$on("cancelModal",n[21]),c.$on("confirmModal",n[24]);function re(m){n[55](m)}function ne(m){n[56](m)}let oe={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",confirmText:k("common.submit"),cancelText:k("common.cancel"),confirmDisabled:!n[6],$$slots:{content:[wr],title:[gr]},$$scope:{ctx:n}};return n[11]!==void 0&&(oe.error=n[11]),n[10]!==void 0&&(oe.open=n[10]),I=new Se({props:oe}),se.push(()=>ue(I,"error",re)),se.push(()=>ue(I,"open",ne)),I.$on("cancelModal",n[22]),I.$on("confirmModal",n[27]),{c(){e.c(),t=J(),P(r.$$.fragment),i=J(),P(a.$$.fragment),f=J(),P(c.$$.fragment),T=J(),P(I.$$.fragment)},l(m){e.l(m),t=Y(m),W(r.$$.fragment,m),i=Y(m),W(a.$$.fragment,m),f=Y(m),W(c.$$.fragment,m),T=Y(m),W(I.$$.fragment,m)},m(m,y){S[o].m(m,y),A(m,t,y),V(r,m,y),A(m,i,y),V(a,m,y),A(m,f,y),V(c,m,y),A(m,T,y),V(I,m,y),h=!0},p(m,y){let ee=o;o=H(m),o===ee?S[o].p(m,y):(pe(),$(S[ee],1,1,()=>{S[ee]=null}),de(),e=S[o],e?e.p(m,y):(e=S[o]=R[o](m),e.c()),_(e,1),e.m(t.parentNode,t));const fe={};y[0]&1048576&&(fe.confirmDisabled=!m[20]),y[0]&28672|y[2]&2048&&(fe.$$scope={dirty:y,ctx:m}),!l&&y[0]&2048&&(l=!0,fe.error=m[11],ie(()=>l=!1)),!s&&y[0]&512&&(s=!0,fe.open=m[9],ie(()=>s=!1)),r.$set(fe);const we={};y[0]&32768&&(we.loading=m[15]),y[2]&2048&&(we.$$scope={dirty:y,ctx:m}),!u&&y[0]&2048&&(u=!0,we.error=m[11],ie(()=>u=!1)),!p&&y[0]&128&&(p=!0,we.open=m[7],ie(()=>p=!1)),a.$set(we);const ce={};y[0]&16|y[2]&2048&&(ce.$$scope={dirty:y,ctx:m}),!g&&y[0]&2048&&(g=!0,ce.error=m[11],ie(()=>g=!1)),!b&&y[0]&256&&(b=!0,ce.open=m[8],ie(()=>b=!1)),c.$set(ce);const me={};y[0]&64&&(me.confirmDisabled=!m[6]),y[0]&65632|y[2]&2048&&(me.$$scope={dirty:y,ctx:m}),!F&&y[0]&2048&&(F=!0,me.error=m[11],ie(()=>F=!1)),!D&&y[0]&1024&&(D=!0,me.open=m[10],ie(()=>D=!1)),I.$set(me)},i(m){h||(_(e),_(r.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),_(I.$$.fragment,m),h=!0)},o(m){$(e),$(r.$$.fragment,m),$(a.$$.fragment,m),$(c.$$.fragment,m),$(I.$$.fragment,m),h=!1},d(m){m&&(d(t),d(i),d(f),d(T)),S[o].d(m),M(r,m),M(a,m),M(c,m),M(I,m)}}}function $r(n,o,e){let t,r,l,s,i,a,u,p,f,c,g,b=ae,T=()=>(b(),b=to(ee,w=>e(20,g=w)),ee),I,F,D,h;X(n,Tt,w=>e(39,p=w)),X(n,ge,w=>e(57,f=w)),X(n,Rt,w=>e(58,c=w)),X(n,bo,w=>e(59,I=w)),X(n,vo,w=>e(60,F=w)),X(n,Io,w=>e(61,D=w)),X(n,qe,w=>e(40,h=w)),n.$$.on_destroy.push(()=>b());var R,S,H;let{workflow:v}=o,{namespace:N}=o,{cancelInProgress:B}=o,{isRunning:U}=o;const L=()=>D?'{"metadata": {"encoding": ""}, "data": ""}':"";let te="",Z=L(),C="",E=!1,re=!1,ne=!1,oe=!1,m="",y=be.Signal,ee=Et();T();let fe,we=!1,ce,me;const St=()=>{e(4,te="")},Oe=()=>{e(5,Z=L()),e(6,C=""),me==null||me.resetView(Z)},je=()=>{e(12,y=be.Signal),le(ee,g=void 0,g),e(14,fe=void 0)},yt=async()=>{e(8,re=!1),le(ge,f=Date.now(),f),He.push({id:"workflow-termination-success-toast",message:k("workflows.terminate-success")})},Pt=w=>{var x;e(4,te=""),e(11,m=(x=w==null?void 0:w.message)!==null&&x!==void 0?x:k("common.unknown-error"))},Wt=()=>{e(11,m=""),v.canBeTerminated&&_o({workflow:v,namespace:N,reason:Ke({action:ze.Terminate,reason:te,email:c.email}),identity:c.email}).then(yt).catch(Pt)},Vt=async()=>{var w;e(15,we=!0),e(11,m="");try{await go({namespace:N,workflowId:v.id,runId:v.runId}),e(7,E=!1),e(15,we=!1),le(ge,f=Date.now(),f),He.push({id:"workflow-cancelation-success-toast",message:k("workflows.cancel-success")})}catch(x){e(11,m=(w=x==null?void 0:x.message)!==null&&w!==void 0?w:k("common.unknown-error"))}},Mt=w=>{e(5,Z=w.detail)},qt=async()=>{var w;e(11,m="");try{await wo({namespace:N,workflowId:v.id,runId:v.runId,signalInput:Z,signalName:C,settings:{...h.data.settings,codec:{endpoint:D,includeCredentials:F,passAccessToken:I}},accessToken:c.accessToken}),e(10,oe=!1),le(ge,f=Date.now(),f),He.push({message:k("workflows.signal-success"),id:"workflow-signal-success-toast"}),Oe()}catch(x){e(11,m=(w=x==null?void 0:x.message)!==null&&w!==void 0?w:k("common.unknown-error"))}},Nt=async()=>{var w;e(11,m="");try{const x=await ho({namespace:N,workflowId:v.id,runId:v.runId,eventId:g,reason:Ke({action:ze.Reset,reason:fe,email:c.email}),resetReapplyType:y});x&&x.runId&&At.update(eo=>({...eo,[v.runId]:x.runId})),e(9,ne=!1),le(ge,f=Date.now(),f)}catch(x){e(11,m=(w=x==null?void 0:x.message)!==null&&w!==void 0?w:k("common.unknown-error"))}je()};let Qe,Je=ko();X(n,Je,w=>e(38,u=w));const Ht=()=>e(7,E=!0),Bt=()=>e(9,ne=!0);function Ft(w){ee=w,T(e(13,ee))}function Ut(w){y=w,e(12,y)}function Lt(w){fe=w,e(14,fe)}function Ot(w){m=w,e(11,m)}function jt(w){ne=w,e(9,ne),e(3,i),e(2,ce),e(36,r),e(35,l),e(37,s),e(30,v),e(34,H),e(39,p),e(32,R),e(33,S),e(40,h)}function Qt(w){m=w,e(11,m)}function Jt(w){E=w,e(7,E)}function Yt(w){te=w,e(4,te)}function zt(w){m=w,e(11,m)}function Gt(w){re=w,e(8,re),e(3,i),e(2,ce),e(36,r),e(35,l),e(37,s),e(30,v),e(34,H),e(39,p),e(32,R),e(33,S),e(40,h)}function Kt(w){C=w,e(6,C)}function Xt(w){se[w?"unshift":"push"](()=>{me=w,e(16,me)})}function Zt(w){m=w,e(11,m)}function xt(w){oe=w,e(10,oe),e(3,i),e(2,ce),e(36,r),e(35,l),e(37,s),e(30,v),e(34,H),e(39,p),e(32,R),e(33,S),e(40,h)}return n.$$set=w=>{"workflow"in w&&e(30,v=w.workflow),"namespace"in w&&e(31,N=w.namespace),"cancelInProgress"in w&&e(0,B=w.cancelInProgress),"isRunning"in w&&e(1,U=w.isRunning)},n.$$.update=()=>{n.$$.dirty[1]&512&&e(19,t=Co(h.data.settings)),n.$$.dirty[1]&512&&e(36,r=or(h.data.settings)),n.$$.dirty[1]&512&&e(35,l=Ao(h.data.settings)),n.$$.dirty[1]&512&&e(37,s=tr(h.data.settings)),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&326&&(s?s&&(e(32,R=v==null?void 0:v.pendingChildren)===null||R===void 0?void 0:R.length)>0?e(2,ce=k("workflows.reset-disabled-pending-children")):s&&(e(33,S=v==null?void 0:v.pendingChildren)===null||S===void 0?void 0:S.length)===0&&p.length===0&&e(2,ce=k("workflows.reset-disabled-no-events")):e(2,ce=k("workflows.reset-disabled"))),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&328&&e(3,i=s&&(e(34,H=v==null?void 0:v.pendingChildren)===null||H===void 0?void 0:H.length)===0&&p.length>0),n.$$.dirty[0]&12|n.$$.dirty[1]&48&&e(17,Qe=[{label:k("workflows.reset"),onClick:()=>e(9,ne=!0),testId:"reset-button",allowed:i,tooltip:i?"":ce},{label:k("workflows.signal"),onClick:()=>e(10,oe=!0),testId:"signal-button",allowed:r,tooltip:r?"":k("workflows.signal-disabled")},{label:k("workflows.terminate"),onClick:()=>e(8,re=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":k("workflows.terminate-disabled")}]),n.$$.dirty[1]&129&&e(18,a=u.namespaceWriteDisabled(N)||!Do(To))},[B,U,ce,i,te,Z,C,E,re,ne,oe,m,y,ee,fe,we,me,Qe,a,t,g,St,Oe,je,Wt,Vt,Mt,qt,Nt,Je,v,N,R,S,H,l,r,s,u,p,h,Ht,Bt,Ft,Ut,Lt,Ot,jt,Qt,Jt,Yt,zt,Gt,Kt,Xt,Zt,xt]}class kr extends Ie{constructor(o){super(),Ee(this,o,$r,hr,ve,{workflow:30,namespace:31,cancelInProgress:0,isRunning:1},null,[-1,-1,-1])}}const br=(n,o)=>{var r;const e=n==="Running",t=(r=o==null?void 0:o.end)==null?void 0:r.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&t},rt=n=>{const o=n==null?void 0:n.indexOf("?");return o>-1?n.slice(0,o):n},_e=(n,o,e=!1)=>{const t=rt(n).split("/"),r=rt(o).split("/");if(e&&t.length!==r.length)return!1;for(let l=0;l<t.length;l++){const s=t[l],i=r[l];if(s!==i)return!1}return!0};function vr(n){let o=(n[14]?k("common.workflows"):k("workflows.back-to-workflows"))+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p(t,r){r&16384&&o!==(o=(t[14]?k("common.workflows"):k("workflows.back-to-workflows"))+"")&&he(e,o)},d(t){t&&d(e)}}}function nt(n){let o,e;return o=new Ne({props:{href:$e({...n[13]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Ir]},$$scope:{ctx:n}}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&8192&&(l.href=$e({...t[13]})),r&268435460&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Ir(n){var t;let o=((t=n[2])==null?void 0:t.runId)+"",e;return{c(){e=G(o)},l(r){e=K(r,o)},m(r,l){A(r,e,l)},p(r,l){var s;l&4&&o!==(o=((s=r[2])==null?void 0:s.runId)+"")&&he(e,o)},d(r){r&&d(e)}}}function lt(n){let o,e,t=k("workers.last-used-version")+"",r,l,s,i,a,u=k("workers.next-version")+"",p,f,c;return l=new Xe({props:{defaultVersion:n[1]===n[7]||n[1]===n[8],active:n[1]===n[8],buildId:n[1],$$slots:{"default-worker":[Tr],"overall-default-worker":[Er]},$$scope:{ctx:n}}}),f=new Xe({props:{defaultVersion:!!n[7],active:n[7]===n[8],buildId:n[7],$$slots:{"default-worker":[Cr],"overall-default-worker":[Rr]},$$scope:{ctx:n}}}),{c(){o=O("p"),e=O("span"),r=G(t),P(l.$$.fragment),s=J(),i=O("p"),a=O("span"),p=G(u),P(f.$$.fragment),this.h()},l(g){o=j(g,"P",{class:!0});var b=Q(o);e=j(b,"SPAN",{});var T=Q(e);r=K(T,t),T.forEach(d),W(l.$$.fragment,b),b.forEach(d),s=Y(g),i=j(g,"P",{class:!0});var I=Q(i);a=j(I,"SPAN",{});var F=Q(a);p=K(F,u),F.forEach(d),W(f.$$.fragment,I),I.forEach(d),this.h()},h(){z(o,"class","flex items-center gap-1"),z(i,"class","flex items-center gap-1")},m(g,b){A(g,o,b),q(o,e),q(e,r),V(l,o,null),A(g,s,b),A(g,i,b),q(i,a),q(a,p),V(f,i,null),c=!0},p(g,b){const T={};b&386&&(T.defaultVersion=g[1]===g[7]||g[1]===g[8]),b&258&&(T.active=g[1]===g[8]),b&2&&(T.buildId=g[1]),b&268435714&&(T.$$scope={dirty:b,ctx:g}),l.$set(T);const I={};b&128&&(I.defaultVersion=!!g[7]),b&384&&(I.active=g[7]===g[8]),b&128&&(I.buildId=g[7]),b&268435840&&(I.$$scope={dirty:b,ctx:g}),f.$set(I)},i(g){c||(_(l.$$.fragment,g),_(f.$$.fragment,g),c=!0)},o(g){$(l.$$.fragment,g),$(f.$$.fragment,g),c=!1},d(g){g&&(d(o),d(s),d(i)),M(l),M(f)}}}function st(n){let o=k("workers.overall")+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p:ae,d(t){t&&d(e)}}}function Er(n){let o,e=n[1]===n[8]&&st();return{c(){e&&e.c(),o=ke()},l(t){e&&e.l(t),o=ke()},m(t,r){e&&e.m(t,r),A(t,o,r)},p(t,r){t[1]===t[8]?e?e.p(t,r):(e=st(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){t&&d(o),e&&e.d(t)}}}function Tr(n){let o=k("workers.default")+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p:ae,d(t){t&&d(e)}}}function at(n){let o=k("workers.overall")+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p:ae,d(t){t&&d(e)}}}function Rr(n){let o,e=n[7]===n[8]&&at();return{c(){e&&e.c(),o=ke()},l(t){e&&e.l(t),o=ke()},m(t,r){e&&e.m(t,r),A(t,o,r)},p(t,r){t[7]===t[8]?e?e.p(t,r):(e=at(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){t&&d(o),e&&e.d(t)}}}function Cr(n){let o=k("workers.default")+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p:ae,d(t){t&&d(e)}}}function ft(n){let o,e;return o=new Ko({props:{onChange:n[17]}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p:ae,i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function it(n){let o,e,t,r;return e=new Ct({props:{bold:!0,icon:"info",intent:"info",title:k("workflows.cancel-request-sent"),$$slots:{default:[Ar]},$$scope:{ctx:n}}}),{c(){o=O("div"),P(e.$$.fragment),this.h()},l(l){o=j(l,"DIV",{class:!0});var s=Q(o);W(e.$$.fragment,s),s.forEach(d),this.h()},h(){z(o,"class","mb-4")},m(l,s){A(l,o,s),V(e,o,null),r=!0},p(l,s){const i={};s&268435456&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){r||(_(e.$$.fragment,l),l&&(t||gt(()=>{t=bt(o,It,{duration:200,delay:100}),t.start()})),r=!0)},o(l){$(e.$$.fragment,l),r=!1},d(l){l&&d(o),M(e)}}}function Ar(n){let o=k("workflows.cancel-request-sent-description")+"",e;return{c(){e=G(o)},l(t){e=K(t,o)},m(t,r){A(t,e,r)},p:ae,d(t){t&&d(e)}}}function ut(n){let o,e,t,r;return e=new Ct({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:k("workflows.reset-success-alert-title"),$$slots:{default:[Sr]},$$scope:{ctx:n}}}),{c(){o=O("div"),P(e.$$.fragment),this.h()},l(l){o=j(l,"DIV",{class:!0});var s=Q(o);W(e.$$.fragment,s),s.forEach(d),this.h()},h(){z(o,"class","mb-4")},m(l,s){A(l,o,s),V(e,o,null),r=!0},p(l,s){const i={};s&268435505&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){r||(_(e.$$.fragment,l),l&&(t||gt(()=>{t=bt(o,It,{duration:200,delay:100}),t.start()})),r=!0)},o(l){$(e.$$.fragment,l),r=!1},d(l){l&&d(o),M(e)}}}function Dr(n){let o;return{c(){o=G("here")},l(e){o=K(e,"here")},m(e,t){A(e,o,t)},d(e){e&&d(o)}}}function Sr(n){var l,s,i,a;let o,e,t,r;return e=new Ne({props:{href:$e({namespace:n[0],workflow:(s=(l=n[4])==null?void 0:l.workflow)==null?void 0:s.id,run:n[5][(a=(i=n[4])==null?void 0:i.workflow)==null?void 0:a.runId]}),$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){o=G("You can find the resulting Workflow Execution "),P(e.$$.fragment),t=G(".")},l(u){o=K(u,"You can find the resulting Workflow Execution "),W(e.$$.fragment,u),t=K(u,".")},m(u,p){A(u,o,p),V(e,u,p),A(u,t,p),r=!0},p(u,p){var c,g,b,T;const f={};p&49&&(f.href=$e({namespace:u[0],workflow:(g=(c=u[4])==null?void 0:c.workflow)==null?void 0:g.id,run:u[5][(T=(b=u[4])==null?void 0:b.workflow)==null?void 0:T.runId]})),p&268435456&&(f.$$scope={dirty:p,ctx:u}),e.$set(f)},i(u){r||(_(e.$$.fragment,u),r=!0)},o(u){$(e.$$.fragment,u),r=!1},d(u){u&&(d(o),d(t)),M(e,u)}}}function yr(n){var t;let o=((t=n[2])==null?void 0:t.historyEvents)+"",e;return{c(){e=G(o)},l(r){e=K(r,o)},m(r,l){A(r,e,l)},p(r,l){var s;l&4&&o!==(o=((s=r[2])==null?void 0:s.historyEvents)+"")&&he(e,o)},d(r){r&&d(e)}}}function Pr(n){let o,e;return o=new Le({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[yr]},$$scope:{ctx:n}}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&268435460&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Wr(n){var t,r;let o=((r=(t=n[15])==null?void 0:t.pollers)==null?void 0:r.length)+"",e;return{c(){e=G(o)},l(l){e=K(l,o)},m(l,s){A(l,e,s)},p(l,s){var i,a;s&32768&&o!==(o=((a=(i=l[15])==null?void 0:i.pollers)==null?void 0:a.length)+"")&&he(e,o)},d(l){l&&d(e)}}}function Vr(n){let o,e;return o=new Le({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Wr]},$$scope:{ctx:n}}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&268468224&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function ct(n){let o,e;return o=new uo({props:{name:"canceled",width:20,height:20}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Mr(n){var s,i;let o,e=((i=(s=n[2])==null?void 0:s.pendingActivities)==null?void 0:i.length)+"",t,r,l=n[12]&&ct();return{c(){l&&l.c(),o=J(),t=G(e)},l(a){l&&l.l(a),o=Y(a),t=K(a,e)},m(a,u){l&&l.m(a,u),A(a,o,u),A(a,t,u),r=!0},p(a,u){var p,f;a[12]?l?u&4096&&_(l,1):(l=ct(),l.c(),_(l,1),l.m(o.parentNode,o)):l&&(pe(),$(l,1,1,()=>{l=null}),de()),(!r||u&4)&&e!==(e=((f=(p=a[2])==null?void 0:p.pendingActivities)==null?void 0:f.length)+"")&&he(t,e)},i(a){r||(_(l),r=!0)},o(a){$(l),r=!1},d(a){a&&(d(o),d(t)),l&&l.d(a)}}}function qr(n){let o,e;return o=new Le({props:{type:n[12]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Mr]},$$scope:{ctx:n}}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&4096&&(l.type=t[12]?"warning":"blue"),r&268439556&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Nr(n){let o,e,t,r,l,s,i,a,u,p;return o=new Te({props:{label:k("workflows.history-tab"),id:"history-tab",href:$e({...n[13]}),active:_e(n[6].url.pathname,$e({...n[13]})),$$slots:{default:[Pr]},$$scope:{ctx:n}}}),t=new Te({props:{label:k("workflows.workers-tab"),id:"workers-tab",href:Re(n[13]),active:_e(n[6].url.pathname,Re(n[13])),$$slots:{default:[Vr]},$$scope:{ctx:n}}}),l=new Te({props:{label:k("workflows.pending-activities-tab"),id:"pending-activities-tab",href:Ce(n[13]),active:_e(n[6].url.pathname,Ce(n[13])),$$slots:{default:[qr]},$$scope:{ctx:n}}}),i=new Te({props:{label:k("workflows.call-stack-tab"),id:"call-stack-tab",href:Ae(n[13]),active:_e(n[6].url.pathname,Ae(n[13]))}}),u=new Te({props:{label:k("workflows.queries-tab"),id:"queries-tab",href:De(n[13]),active:_e(n[6].url.pathname,De(n[13]))}}),{c(){P(o.$$.fragment),e=J(),P(t.$$.fragment),r=J(),P(l.$$.fragment),s=J(),P(i.$$.fragment),a=J(),P(u.$$.fragment)},l(f){W(o.$$.fragment,f),e=Y(f),W(t.$$.fragment,f),r=Y(f),W(l.$$.fragment,f),s=Y(f),W(i.$$.fragment,f),a=Y(f),W(u.$$.fragment,f)},m(f,c){V(o,f,c),A(f,e,c),V(t,f,c),A(f,r,c),V(l,f,c),A(f,s,c),V(i,f,c),A(f,a,c),V(u,f,c),p=!0},p(f,c){const g={};c&8192&&(g.href=$e({...f[13]})),c&8256&&(g.active=_e(f[6].url.pathname,$e({...f[13]}))),c&268435460&&(g.$$scope={dirty:c,ctx:f}),o.$set(g);const b={};c&8192&&(b.href=Re(f[13])),c&8256&&(b.active=_e(f[6].url.pathname,Re(f[13]))),c&268468224&&(b.$$scope={dirty:c,ctx:f}),t.$set(b);const T={};c&8192&&(T.href=Ce(f[13])),c&8256&&(T.active=_e(f[6].url.pathname,Ce(f[13]))),c&268439556&&(T.$$scope={dirty:c,ctx:f}),l.$set(T);const I={};c&8192&&(I.href=Ae(f[13])),c&8256&&(I.active=_e(f[6].url.pathname,Ae(f[13]))),i.$set(I);const F={};c&8192&&(F.href=De(f[13])),c&8256&&(F.active=_e(f[6].url.pathname,De(f[13]))),u.$set(F)},i(f){p||(_(o.$$.fragment,f),_(t.$$.fragment,f),_(l.$$.fragment,f),_(i.$$.fragment,f),_(u.$$.fragment,f),p=!0)},o(f){$(o.$$.fragment,f),$(t.$$.fragment,f),$(l.$$.fragment,f),$(i.$$.fragment,f),$(u.$$.fragment,f),p=!1},d(f){f&&(d(e),d(r),d(s),d(a)),M(o,f),M(t,f),M(l,f),M(i,f),M(u,f)}}}function Hr(n){let o,e;return o=new Mo({props:{class:"flex flex-wrap gap-6",label:"workflow detail",$$slots:{default:[Nr]},$$scope:{ctx:n}}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&268480580&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Br(n){var te,Z;let o,e,t,r,l,s,i,a,u,p,f,c,g,b,T,I,F,D,h,R,S,H;t=new Ne({props:{href:`${Ve({namespace:n[0]})}?${n[16]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[vr]},$$scope:{ctx:n}}});let v=n[14]&&nt(n);u=new Wo({props:{copyIconTitle:k("common.copy-icon-title"),copySuccessIconTitle:k("common.copy-success-icon-title"),content:(te=n[2])==null?void 0:te.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}}),c=new So({props:{status:(Z=n[2])==null?void 0:Z.status}});let N=n[9]&&lt(n),B=n[3]&&ft(n);F=new kr({props:{isRunning:n[3],cancelInProgress:n[11],workflow:n[2],namespace:n[0]}});let U=n[11]&&it(n),L=n[10]&&ut(n);return S=new Vo({props:{$$slots:{default:[Hr]},$$scope:{ctx:n}}}),{c(){o=O("header"),e=O("div"),P(t.$$.fragment),r=J(),v&&v.c(),l=J(),s=O("div"),i=O("div"),a=O("h1"),P(u.$$.fragment),p=J(),f=O("div"),P(c.$$.fragment),g=J(),N&&N.c(),b=J(),T=O("div"),B&&B.c(),I=J(),P(F.$$.fragment),D=J(),U&&U.c(),h=J(),L&&L.c(),R=J(),P(S.$$.fragment),this.h()},l(C){o=j(C,"HEADER",{class:!0});var E=Q(o);e=j(E,"DIV",{class:!0});var re=Q(e);W(t.$$.fragment,re),r=Y(re),v&&v.l(re),re.forEach(d),l=Y(E),s=j(E,"DIV",{class:!0});var ne=Q(s);i=j(ne,"DIV",{class:!0});var oe=Q(i);a=j(oe,"H1",{"data-testid":!0,class:!0});var m=Q(a);W(u.$$.fragment,m),m.forEach(d),p=Y(oe),f=j(oe,"DIV",{class:!0});var y=Q(f);W(c.$$.fragment,y),g=Y(y),N&&N.l(y),y.forEach(d),oe.forEach(d),b=Y(ne),T=j(ne,"DIV",{class:!0});var ee=Q(T);B&&B.l(ee),I=Y(ee),W(F.$$.fragment,ee),ee.forEach(d),ne.forEach(d),D=Y(E),U&&U.l(E),h=Y(E),L&&L.l(E),R=Y(E),W(S.$$.fragment,E),E.forEach(d),this.h()},h(){z(e,"class","mb-4 block"),z(a,"data-testid","workflow-id-heading"),z(a,"class","overflow-hidden text-2xl font-medium"),z(f,"class","flex flex-wrap items-center gap-4"),z(i,"class","flex w-full flex-col justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),z(T,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end"),z(s,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),z(o,"class","mb-4 flex flex-col gap-1")},m(C,E){A(C,o,E),q(o,e),V(t,e,null),q(e,r),v&&v.m(e,null),q(o,l),q(o,s),q(s,i),q(i,a),V(u,a,null),q(i,p),q(i,f),V(c,f,null),q(f,g),N&&N.m(f,null),q(s,b),q(s,T),B&&B.m(T,null),q(T,I),V(F,T,null),q(o,D),U&&U.m(o,null),q(o,h),L&&L.m(o,null),q(o,R),V(S,o,null),H=!0},p(C,[E]){var ee,fe;const re={};E&65537&&(re.href=`${Ve({namespace:C[0]})}?${C[16]}`),E&268451840&&(re.$$scope={dirty:E,ctx:C}),t.$set(re),C[14]?v?(v.p(C,E),E&16384&&_(v,1)):(v=nt(C),v.c(),_(v,1),v.m(e,null)):v&&(pe(),$(v,1,1,()=>{v=null}),de());const ne={};E&4&&(ne.content=(ee=C[2])==null?void 0:ee.id),u.$set(ne);const oe={};E&4&&(oe.status=(fe=C[2])==null?void 0:fe.status),c.$set(oe),C[9]?N?(N.p(C,E),E&512&&_(N,1)):(N=lt(C),N.c(),_(N,1),N.m(f,null)):N&&(pe(),$(N,1,1,()=>{N=null}),de()),C[3]?B?(B.p(C,E),E&8&&_(B,1)):(B=ft(C),B.c(),_(B,1),B.m(T,I)):B&&(pe(),$(B,1,1,()=>{B=null}),de());const m={};E&8&&(m.isRunning=C[3]),E&2048&&(m.cancelInProgress=C[11]),E&4&&(m.workflow=C[2]),E&1&&(m.namespace=C[0]),F.$set(m),C[11]?U?(U.p(C,E),E&2048&&_(U,1)):(U=it(C),U.c(),_(U,1),U.m(o,h)):U&&(pe(),$(U,1,1,()=>{U=null}),de()),C[10]?L?(L.p(C,E),E&1024&&_(L,1)):(L=ut(C),L.c(),_(L,1),L.m(o,R)):L&&(pe(),$(L,1,1,()=>{L=null}),de());const y={};E&268480580&&(y.$$scope={dirty:E,ctx:C}),S.$set(y)},i(C){H||(_(t.$$.fragment,C),_(v),_(u.$$.fragment,C),_(c.$$.fragment,C),_(N),_(B),_(F.$$.fragment,C),_(U),_(L),_(S.$$.fragment,C),H=!0)},o(C){$(t.$$.fragment,C),$(v),$(u.$$.fragment,C),$(c.$$.fragment,C),$(N),$(B),$(F.$$.fragment,C),$(U),$(L),$(S.$$.fragment,C),H=!1},d(C){C&&d(o),M(t),v&&v.d(),M(u),M(c),N&&N.d(),B&&B.d(),M(F),U&&U.d(),L&&L.d(),M(S)}}}const mt=15e3;function Fr(n,o,e){let t,r,l,s,i,a,u,p,f,c,g,b,T,I,F,D,h,R,S,H;X(n,We,E=>e(4,I=E)),X(n,At,E=>e(5,F=E)),X(n,Pe,E=>e(25,D=E)),X(n,ge,E=>e(26,h=E)),X(n,ye,E=>e(27,R=E)),X(n,qe,E=>e(6,S=E)),X(n,vt,E=>e(16,H=E));var v,N,B,U,L;let{namespace:te}=o,Z;_t(()=>{a&&R==="on"&&(clearInterval(Z),e(23,Z=setInterval(()=>le(ge,h=Date.now(),h),mt)))});const C=()=>{R==="on"?(le(ye,R="off",R),clearInterval(Z)):(le(ge,h=Date.now(),h),le(ye,R="on",R),clearInterval(Z),e(23,Z=setInterval(()=>le(ge,h=Date.now(),h),mt)))};return Be(()=>{clearInterval(Z)}),n.$$set=E=>{"namespace"in E&&e(0,te=E.namespace)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{workflow:t,workers:r,compatibility:l}=I,t,(e(15,r),e(4,I)),(e(24,l),e(4,I))),n.$$.dirty&64&&e(14,s=S.params.id),n.$$.dirty&5&&e(13,i={namespace:te,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&262160&&e(3,a=e(18,v=I==null?void 0:I.workflow)===null||v===void 0?void 0:v.isRunning),n.$$.dirty&524304&&e(12,u=["Terminated","TimedOut","Canceled"].includes(e(19,N=I.workflow)===null||N===void 0?void 0:N.status)),n.$$.dirty&8388616&&(a||clearInterval(Z)),n.$$.dirty&34603024&&e(11,p=br(e(20,B=I==null?void 0:I.workflow)===null||B===void 0?void 0:B.status,D)),n.$$.dirty&2097200&&e(10,f=qo(F,e(21,U=I==null?void 0:I.workflow)===null||U===void 0?void 0:U.runId)),n.$$.dirty&4194308&&e(9,c=e(22,L=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||L===void 0?void 0:L.useVersioning),n.$$.dirty&4&&e(1,g=No(t)),n.$$.dirty&16777216&&e(8,b=Ho(l)),n.$$.dirty&16777218&&e(7,T=Bo(l,g))},[te,g,t,a,I,F,S,T,b,c,f,p,u,i,s,r,H,C,v,N,B,U,L,Z,l,D]}class Ur extends Ie{constructor(o){super(),Ee(this,o,Fr,Br,ve,{namespace:0})}}async function Lr({activity:n,namespace:o,settings:e,accessToken:t},{convertWithCodec:r=Fo,decodeAttributes:l=Uo}={}){const s=await r({attributes:n,namespace:o,settings:e,accessToken:t});return l(s)}const Or=async({activity:n,namespace:o,settings:e,accessToken:t})=>await Lr({activity:n,namespace:o,settings:e,accessToken:t}),jr=async(n,o,e,t)=>{const r=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of r){const i=await Or({activity:s,namespace:o,settings:e,accessToken:t});l.push(i)}return l};function Qr(n){let o,e,t;o=new Ur({props:{namespace:n[0].params.namespace}});const r=n[8].default,l=wt(r,n,n[7],null);return{c(){P(o.$$.fragment),e=J(),l&&l.c()},l(s){W(o.$$.fragment,s),e=Y(s),l&&l.l(s)},m(s,i){V(o,s,i),A(s,e,i),l&&l.m(s,i),t=!0},p(s,i){const a={};i&1&&(a.namespace=s[0].params.namespace),o.$set(a),l&&l.p&&(!t||i&128)&&ht(l,r,s,s[7],t?kt(r,s[7],i,null):$t(s[7]),null)},i(s){t||(_(o.$$.fragment,s),_(l,s),t=!0)},o(s){$(o.$$.fragment,s),$(l,s),t=!1},d(s){s&&d(e),M(o,s),l&&l.d(s)}}}function Jr(n){let o,e;return o=new oo({}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p:ae,i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function Yr(n){let o,e;return o=new Jo({props:{error:n[1]}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,r){const l={};r&2&&(l.error=t[1]),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function zr(n){let o,e,t,r;const l=[Yr,Jr,Qr],s=[];function i(a,u){return a[1]?0:a[2].workflow?2:1}return e=i(n),t=s[e]=l[e](n),{c(){o=O("div"),t.c(),this.h()},l(a){o=j(a,"DIV",{class:!0});var u=Q(o);t.l(u),u.forEach(d),this.h()},h(){z(o,"class","flex h-full flex-col gap-6")},m(a,u){A(a,o,u),s[e].m(o,null),r=!0},p(a,[u]){let p=e;e=i(a),e===p?s[e].p(a,u):(pe(),$(s[p],1,1,()=>{s[p]=null}),de(),t=s[e],t?t.p(a,u):(t=s[e]=l[e](a),t.c()),_(t,1),t.m(o,null))},i(a){r||(_(t),r=!0)},o(a){$(t),r=!1},d(a){a&&d(o),s[e].d()}}}function Gr(n,o,e){let t,r,l,s,i,a,u,p,f,c;X(n,Pe,D=>e(9,s=D)),X(n,We,D=>e(2,i=D)),X(n,Ge,D=>e(10,a=D)),X(n,Ye,D=>e(11,u=D)),X(n,qe,D=>e(0,p=D)),X(n,ge,D=>e(6,f=D)),X(n,Rt,D=>e(12,c=D));let{$$slots:g={},$$scope:b}=o,T;const I=async(D,h)=>{var R;if(!((R=D==null?void 0:D.mostRecentWorkerVersionStamp)===null||R===void 0)&&R.useVersioning)return await Po({queue:h,namespace:t})},F=async(D,h,R)=>{const{settings:S}=p.data,{workflow:H,error:v}=await $o({namespace:D,workflowId:h,runId:R});if(v){e(1,T=v);return}const{taskQueue:N}=H,B=await yo({queue:N,namespace:D}),U=await I(H,N);H.pendingActivities=await jr(H,D,S,c==null?void 0:c.accessToken),le(We,i={workflow:H,workers:B,compatibility:U},i);const L=await Lo({namespace:D,workflowId:h,runId:R});le(Pe,s=L,s)};return _t(()=>{const D=p.url.searchParams.get("sort");D&&le(Ye,u=D,u)}),Be(()=>{le(Ge,a=null,a),le(We,i=Ro,i),le(Pe,s=ao,s),e(1,T=void 0)}),n.$$set=D=>{"$$scope"in D&&e(7,b=D.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(5,{namespace:t,workflow:r,run:l}=p.params,t,(e(4,r),e(0,p)),(e(3,l),e(0,p))),n.$$.dirty&120&&F(t,r,l)},[p,T,i,l,r,t,f,b,g]}class Kr extends Ie{constructor(o){super(),Ee(this,o,Gr,zr,ve,{})}}const Dt={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},Xr=Et(Dt),Zr=()=>{Xr.set(Dt)};function xr(n){let o;const e=n[0].default,t=wt(e,n,n[1],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),o=!0},p(r,l){t&&t.p&&(!o||l&2)&&ht(t,e,r,r[1],o?kt(e,r[1],l,null):$t(r[1]),null)},i(r){o||(_(t,r),o=!0)},o(r){$(t,r),o=!1},d(r){t&&t.d(r)}}}function en(n){let o,e;return o=new Kr({props:{$$slots:{default:[xr]},$$scope:{ctx:n}}}),{c(){P(o.$$.fragment)},l(t){W(o.$$.fragment,t)},m(t,r){V(o,t,r),e=!0},p(t,[r]){const l={};r&2&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){$(o.$$.fragment,t),e=!1},d(t){M(o,t)}}}function tn(n,o,e){let{$$slots:t={},$$scope:r}=o;return Be(()=>{Zr()}),n.$$set=l=>{"$$scope"in l&&e(1,r=l.$$scope)},[t,r]}class Gn extends Ie{constructor(o){super(),Ee(this,o,tn,en,ve,{})}}export{Gn as component};
