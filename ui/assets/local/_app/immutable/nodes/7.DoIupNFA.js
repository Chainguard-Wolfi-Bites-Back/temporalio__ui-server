import{s as _e,e as U,a as j,t as J,b as O,d as Q,g as d,h as Y,f as Z,j as z,k as P,l as q,n as ne,c as G,v as oe,S as ae,T as ce,a3 as pt,w as se,x as pe,y as _t,ac as dt,Z as tt,P as gt,a1 as rt,p as Te,u as Me,q as qe,r as Fe}from"../chunks/scheduler.LRpOgQOC.js";import{S as de,i as ge,c as V,a as S,m as R,t as _,b as $,d as W,f as me,g as te,e as re,h as ot}from"../chunks/index.dE1eZLcR.js";import{p as Ve}from"../chunks/stores.78bbcUIh.js";import{v as wt}from"../chunks/data-encoder-settings.GVLoV2Fe.js";import{L as Se}from"../chunks/link.PxhS5WhU.js";import{t as T}from"../chunks/translate.HrioCK44.js";import{a as nt}from"../chunks/workflows.fw_KhZmg.js";import{e as Pe,b as fe,m as he,n as ve,c as Ee,o as Ie,p as Ce,q as Ae}from"../chunks/route-for.KBKiLKBc.js";import{l as lt,L as $t}from"../chunks/labs-mode-guard.2eNmcS0k.js";import{L as st}from"../chunks/loading.fe0eU3fG.js";import{a as at}from"../chunks/index.R3eqKFGb.js";import{e as He}from"../chunks/each._Tp_Nd1G.js";import{R as bt,C as kt,T as ht,w as vt,a as Et,b as It,r as Ct}from"../chunks/workflow-terminate-enabled.g6M4VIul.js";import{C as At}from"../chunks/code-block.xnGzZNUq.js";import{I as Dt}from"../chunks/input.Bu_cyFLs.js";import{M as Pt}from"../chunks/modal.s2nzU7x1.js";import{g as Vt,h as Ne}from"../chunks/workflow-service.vLZZgdF1.js";import{t as St}from"../chunks/toaster.r5xKDufi.js";import{i as Rt}from"../chunks/is-network-error.m1ZFLdb3.js";import{B as Wt}from"../chunks/button.WY2EtZdm.js";import{B as Re}from"../chunks/badge.zwL2z7Ws.js";import{I as Tt}from"../chunks/icon.sGymrl_w.js";import{c as Mt}from"../chunks/menu.ARX4sAZd.js";import{M as qt}from"../chunks/menu-divider.bAksmGGE.js";import{S as Ft}from"../chunks/split-button.7nO1tH8W.js";import{T as ft}from"../chunks/tooltip.KFIV5Kmr.js";import{c as yt}from"../chunks/core-user.abGfpqDl.js";import{r as Ht,f as De,e as Nt,t as We}from"../chunks/events.ywww6IId.js";import{s as Bt}from"../chunks/settings.0tpaBrD2.js";import{r as be,w as ke,i as Lt}from"../chunks/workflow-run.LWu3YI7E.js";import{w as Ut}from"../chunks/write-actions-are-allowed.ww5VT5nv.js";import{W as Ot}from"../chunks/workflow-status.Urf251Vu.js";import{A as it}from"../chunks/alert.dmAJjn24.js";import{C as Be,g as Qt,a as jt}from"../chunks/pollers-service.dkRPG6Mn.js";import{C as Yt}from"../chunks/index.ZWz36j99.js";import{T as zt,a as Jt,b as ue}from"../chunks/tab.bZw6hB96.js";import{n as Zt}from"../chunks/namespaces.cEqzYRDw.js";import{g as Gt}from"../chunks/get-workflow-relationships.2Tmpi-4H.js";import{h as Kt}from"../chunks/has.iatLMeUG.js";import{f as Xt,b as xt,h as er}from"../chunks/task-queue-compatibility.52mtxoi2.js";import{f as tr,d as rr}from"../chunks/decode-payload.PXAxoduN.js";import{f as or}from"../chunks/events-service.890IWE_W.js";import{a as nr}from"../chunks/auth-user.ojYXxslN.js";import{b as Le}from"../chunks/filters.jbdvA4ws.js";import{w as lr}from"../chunks/entry.Pm27i8w4.js";function sr(n){let r=T("workflows.back-to-workflows")+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p:oe,d(e){e&&d(t)}}}function ar(n){var D,y;let r,t,e,o,l,s,a=(((D=n[0])==null?void 0:D.statusCode)??"500")+"",f,u,p,v,h,k,c=(((y=n[0])==null?void 0:y.statusText)??"")+"",i,w;return e=new Se({props:{href:`${Pe({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[sr]},$$scope:{ctx:n}}}),{c(){r=U("header"),t=U("div"),V(e.$$.fragment),o=j(),l=U("div"),s=U("h1"),f=J(a),u=j(),p=U("p"),v=J(n[1]),h=j(),k=U("p"),i=J(c),this.h()},l(g){r=O(g,"HEADER",{class:!0});var A=Q(r);t=O(A,"DIV",{class:!0});var F=Q(t);S(e.$$.fragment,F),F.forEach(d),A.forEach(d),o=Y(g),l=O(g,"DIV",{class:!0});var E=Q(l);s=O(E,"H1",{class:!0});var L=Q(s);f=Z(L,a),L.forEach(d),u=Y(E),p=O(E,"P",{class:!0});var B=Q(p);v=Z(B,n[1]),B.forEach(d),h=Y(E),k=O(E,"P",{class:!0});var b=Q(k);i=Z(b,c),b.forEach(d),E.forEach(d),this.h()},h(){z(t,"class","mb-4 block"),z(r,"class","mb-4 flex flex-col gap-1"),z(s,"class","leading-0 text-[12rem] font-semibold"),z(p,"class","-mt-12 text-lg"),z(k,"class","text-2xl font-bold text-red-700"),z(l,"class","text-center align-middle")},m(g,A){P(g,r,A),q(r,t),R(e,t,null),P(g,o,A),P(g,l,A),q(l,s),q(s,f),q(l,u),q(l,p),q(p,v),q(l,h),q(l,k),q(k,i),w=!0},p(g,[A]){var E,L;const F={};A&12&&(F.href=`${Pe({namespace:g[2]})}?${g[3]}`),A&32&&(F.$$scope={dirty:A,ctx:g}),e.$set(F),(!w||A&1)&&a!==(a=(((E=g[0])==null?void 0:E.statusCode)??"500")+"")&&ne(f,a),(!w||A&2)&&ne(v,g[1]),(!w||A&1)&&c!==(c=(((L=g[0])==null?void 0:L.statusText)??"")+"")&&ne(i,c)},i(g){w||(_(e.$$.fragment,g),w=!0)},o(g){$(e.$$.fragment,g),w=!1},d(g){g&&(d(r),d(o),d(l)),W(e)}}}function fr(n,r,t){let e,o,l,s;G(n,Ve,f=>t(4,l=f)),G(n,nt,f=>t(3,s=f));let{error:a}=r;return n.$$set=f=>{"error"in f&&t(0,a=f.error)},n.$$.update=()=>{n.$$.dirty&16&&t(2,{namespace:e}=l.params,e),n.$$.dirty&1&&t(1,o=a.statusCode===404?T("workflows.workflow-404-title"):T("workflows.workflow-error-title"))},[a,o,e,s,l]}class ut extends de{constructor(r){super(),ge(this,r,fr,ar,_e,{error:0})}}function ir(n){let r,t=T("workflows.signal-modal-title")+"",e;return{c(){r=U("h3"),e=J(t),this.h()},l(o){r=O(o,"H3",{slot:!0});var l=Q(r);e=Z(l,t),l.forEach(d),this.h()},h(){z(r,"slot","title")},m(o,l){P(o,r,l),q(r,e)},p:oe,d(o){o&&d(r)}}}function ur(n){let r,t,e,o,l,s,a=T("workflows.signal-payload-input-label")+"",f,u,p,v=T("workflows.signal-payload-input-label-hint")+"",h,k,c,i;function w(g){n[12](g)}let D={id:"signal-name",label:T("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(D.value=n[4]),t=new Dt({props:D}),ae.push(()=>me(t,"value",w));let y={maxHeight:320,content:n[5],editable:!0,copyable:!1};return c=new At({props:y}),n[13](c),c.$on("change",n[9]),{c(){r=U("div"),V(t.$$.fragment),o=j(),l=U("div"),s=U("span"),f=J(a),u=j(),p=U("span"),h=J(v),k=j(),V(c.$$.fragment),this.h()},l(g){r=O(g,"DIV",{slot:!0,class:!0});var A=Q(r);S(t.$$.fragment,A),o=Y(A),l=O(A,"DIV",{});var F=Q(l);s=O(F,"SPAN",{class:!0});var E=Q(s);f=Z(E,a),E.forEach(d),u=Y(F),p=O(F,"SPAN",{class:!0});var L=Q(p);h=Z(L,v),L.forEach(d),k=Y(F),S(c.$$.fragment,F),F.forEach(d),A.forEach(d),this.h()},h(){z(s,"class","font-secondary text-sm font-medium"),z(p,"class","font-secondary text-xs font-light italic"),z(r,"slot","content"),z(r,"class","flex flex-col gap-4")},m(g,A){P(g,r,A),R(t,r,null),q(r,o),q(r,l),q(l,s),q(s,f),q(l,u),q(l,p),q(p,h),q(l,k),R(c,l,null),i=!0},p(g,A){const F={};!e&&A&16&&(e=!0,F.value=g[4],ce(()=>e=!1)),t.$set(F);const E={};A&32&&(E.content=g[5]),c.$set(E)},i(g){i||(_(t.$$.fragment,g),_(c.$$.fragment,g),i=!0)},o(g){$(t.$$.fragment,g),$(c.$$.fragment,g),i=!1},d(g){g&&d(r),W(t),n[13](null),W(c)}}}function cr(n){let r,t,e,o;function l(f){n[14](f)}function s(f){n[15](f)}let a={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:T("common.submit"),cancelText:T("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[ur],title:[ir]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.error=n[2]),n[0]!==void 0&&(a.open=n[0]),r=new Pt({props:a}),ae.push(()=>me(r,"error",l)),ae.push(()=>me(r,"open",s)),r.$on("cancelModal",n[7]),r.$on("confirmModal",n[8]),{c(){V(r.$$.fragment)},l(f){S(r.$$.fragment,f)},m(f,u){R(r,f,u),o=!0},p(f,[u]){const p={};u&8&&(p.loading=f[3]),u&16&&(p.confirmDisabled=!f[4]),u&131184&&(p.$$scope={dirty:u,ctx:f}),!t&&u&4&&(t=!0,p.error=f[2],ce(()=>t=!1)),!e&&u&1&&(e=!0,p.open=f[0],ce(()=>e=!1)),r.$set(p)},i(f){o||(_(r.$$.fragment,f),o=!0)},o(f){$(r.$$.fragment,f),o=!1},d(f){W(r,f)}}}function mr(n,r,t){let e,o=oe,l=()=>(o(),o=pt(u,E=>t(16,e=E)),u);n.$$.on_destroy.push(()=>o());let{open:s}=r,{workflow:a}=r,{namespace:f}=r,{refresh:u}=r;l();let p="",v=!1,h="",k="",c;const i=()=>{t(0,s=!1),t(5,k=""),t(4,h=""),c==null||c.resetView(k)},w=async()=>{t(2,p=""),t(3,v=!0);try{await Vt({namespace:f,workflow:a,input:k,name:h}),se(u,e=Date.now(),e),St.push({message:T("workflows.signal-success"),id:"workflow-signal-success-toast"}),i()}catch(E){t(2,p=Rt(E)?E.message:T("common.unknown-error"))}finally{t(3,v=!1)}},D=E=>{t(5,k=E.detail)};function y(E){h=E,t(4,h)}function g(E){ae[E?"unshift":"push"](()=>{c=E,t(6,c)})}function A(E){p=E,t(2,p)}function F(E){s=E,t(0,s)}return n.$$set=E=>{"open"in E&&t(0,s=E.open),"workflow"in E&&t(10,a=E.workflow),"namespace"in E&&t(11,f=E.namespace),"refresh"in E&&l(t(1,u=E.refresh))},[s,u,p,v,h,k,c,i,w,D,a,f,y,g,A,F]}class pr extends de{constructor(r){super(),ge(this,r,mr,cr,_e,{open:0,workflow:10,namespace:11,refresh:1})}}const _r=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function Ue(n,r,t){const e=n.slice();return e[29]=r[t].onClick,e[30]=r[t].destructive,e[31]=r[t].label,e[32]=r[t].allowed,e[33]=r[t].testId,e[34]=r[t].tooltip,e}function dr(n){let r,t;return r=new ft({props:{bottomRight:!0,width:200,text:n[4],hide:n[5],$$slots:{default:[$r]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o[0]&16&&(l.text=e[4]),o[0]&32&&(l.hide=e[5]),o[0]&288|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function gr(n){let r,t;return r=new Ft({props:{id:"workflow-actions",position:"right",disabled:n[11],primaryActionDisabled:!n[12]||n[2],label:T("workflows.request-cancellation"),menuLabel:T("workflows.workflow-actions"),$$slots:{default:[hr]},$$scope:{ctx:n}}}),r.$on("click",n[23]),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o[0]&2048&&(l.disabled=e[11]),o[0]&4100&&(l.primaryActionDisabled=!e[12]||e[2]),o[0]&1024|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function wr(n){let r=T("workflows.reset")+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p:oe,d(e){e&&d(t)}}}function $r(n){let r,t;return r=new Wt({props:{"aria-label":T("workflows.reset"),disabled:!n[5],variant:"primary",$$slots:{default:[wr]},$$scope:{ctx:n}}}),r.$on("click",n[24]),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o[0]&32&&(l.disabled=!e[5]),o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Oe(n){let r,t;return r=new qt({}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function br(n){let r=n[31]+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p(e,o){o[0]&1024&&r!==(r=e[31]+"")&&ne(t,r)},d(e){e&&d(t)}}}function kr(n){let r,t,e;return r=new Mt({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[br]},$$scope:{ctx:n}}}),r.$on("click",function(){dt(n[29])&&n[29].apply(this,arguments)}),{c(){V(r.$$.fragment),t=j()},l(o){S(r.$$.fragment,o),t=Y(o)},m(o,l){R(r,o,l),P(o,t,l),e=!0},p(o,l){n=o;const s={};l[0]&1024&&(s.destructive=n[30]),l[0]&1024&&(s.disabled=!n[32]),l[0]&1024&&(s["data-testid"]=n[33]),l[0]&1024|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),r.$set(s)},i(o){e||(_(r.$$.fragment,o),e=!0)},o(o){$(r.$$.fragment,o),e=!1},d(o){o&&d(t),W(r,o)}}}function Qe(n){let r,t,e,o=n[30]&&Oe();return t=new ft({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[kr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),r=j(),V(t.$$.fragment)},l(l){o&&o.l(l),r=Y(l),S(t.$$.fragment,l)},m(l,s){o&&o.m(l,s),P(l,r,s),R(t,l,s),e=!0},p(l,s){l[30]?o?s[0]&1024&&_(o,1):(o=Oe(),o.c(),_(o,1),o.m(r.parentNode,r)):o&&(te(),$(o,1,1,()=>{o=null}),re());const a={};s[0]&1024&&(a.text=l[34]),s[0]&1024&&(a.hide=!l[34]),s[0]&1024|s[1]&64&&(a.$$scope={dirty:s,ctx:l}),t.$set(a)},i(l){e||(_(o),_(t.$$.fragment,l),e=!0)},o(l){$(o),$(t.$$.fragment,l),e=!1},d(l){l&&d(r),o&&o.d(l),W(t,l)}}}function hr(n){let r,t,e=He(n[10]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Qe(Ue(n,e,s));const l=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=pe()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);r=pe()},m(s,a){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,a);P(s,r,a),t=!0},p(s,a){if(a[0]&1024){e=He(s[10]);let f;for(f=0;f<e.length;f+=1){const u=Ue(s,e,f);o[f]?(o[f].p(u,a),_(o[f],1)):(o[f]=Qe(u),o[f].c(),_(o[f],1),o[f].m(r.parentNode,r))}for(te(),f=e.length;f<o.length;f+=1)l(f);re()}},i(s){if(!t){for(let a=0;a<e.length;a+=1)_(o[a]);t=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)$(o[a]);t=!1},d(s){s&&d(r),_t(o,s)}}}function vr(n){let r,t,e,o,l,s,a,f,u,p,v,h,k,c,i;const w=[gr,dr],D=[];function y(m,M){return m[3]?0:1}r=y(n),t=D[r]=w[r](n);function g(m){n[25](m)}let A={refresh:be,workflow:n[0],namespace:n[1]};n[8]!==void 0&&(A.open=n[8]),o=new bt({props:A}),ae.push(()=>me(o,"open",g));function F(m){n[26](m)}let E={refresh:be,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(E.open=n[9]),a=new pr({props:E}),ae.push(()=>me(a,"open",F));function L(m){n[27](m)}let B={refresh:be,workflow:n[0],namespace:n[1]};n[6]!==void 0&&(B.open=n[6]),p=new kt({props:B}),ae.push(()=>me(p,"open",L));function b(m){n[28](m)}let H={refresh:be,workflow:n[0],namespace:n[1]};return n[7]!==void 0&&(H.open=n[7]),k=new ht({props:H}),ae.push(()=>me(k,"open",b)),{c(){t.c(),e=j(),V(o.$$.fragment),s=j(),V(a.$$.fragment),u=j(),V(p.$$.fragment),h=j(),V(k.$$.fragment)},l(m){t.l(m),e=Y(m),S(o.$$.fragment,m),s=Y(m),S(a.$$.fragment,m),u=Y(m),S(p.$$.fragment,m),h=Y(m),S(k.$$.fragment,m)},m(m,M){D[r].m(m,M),P(m,e,M),R(o,m,M),P(m,s,M),R(a,m,M),P(m,u,M),R(p,m,M),P(m,h,M),R(k,m,M),i=!0},p(m,M){let X=r;r=y(m),r===X?D[r].p(m,M):(te(),$(D[X],1,1,()=>{D[X]=null}),re(),t=D[r],t?t.p(m,M):(t=D[r]=w[r](m),t.c()),_(t,1),t.m(e.parentNode,e));const C={};M[0]&1&&(C.workflow=m[0]),M[0]&2&&(C.namespace=m[1]),!l&&M[0]&256&&(l=!0,C.open=m[8],ce(()=>l=!1)),o.$set(C);const I={};M[0]&1&&(I.workflow=m[0]),M[0]&2&&(I.namespace=m[1]),!f&&M[0]&512&&(f=!0,I.open=m[9],ce(()=>f=!1)),a.$set(I);const N={};M[0]&1&&(N.workflow=m[0]),M[0]&2&&(N.namespace=m[1]),!v&&M[0]&64&&(v=!0,N.open=m[6],ce(()=>v=!1)),p.$set(N);const K={};M[0]&1&&(K.workflow=m[0]),M[0]&2&&(K.namespace=m[1]),!c&&M[0]&128&&(c=!0,K.open=m[7],ce(()=>c=!1)),k.$set(K)},i(m){i||(_(t),_(o.$$.fragment,m),_(a.$$.fragment,m),_(p.$$.fragment,m),_(k.$$.fragment,m),i=!0)},o(m){$(t),$(o.$$.fragment,m),$(a.$$.fragment,m),$(p.$$.fragment,m),$(k.$$.fragment,m),i=!1},d(m){m&&(d(e),d(s),d(u),d(h)),D[r].d(m),W(o,m),W(a,m),W(p,m),W(k,m)}}}function Er(n,r,t){let e,o,l,s,a,f,u,p,v;G(n,Ht,N=>t(21,p=N)),G(n,Ve,N=>t(22,v=N));var h,k,c;let{workflow:i}=r,{namespace:w}=r,{cancelInProgress:D}=r,{isRunning:y}=r,g=!1,A=!1,F=!1,E=!1,L,B,b=yt();G(n,b,N=>t(20,u=N));const H=()=>t(6,g=!0),m=()=>t(8,F=!0);function M(N){F=N,t(8,F),t(5,a),t(4,L),t(18,o),t(17,l),t(19,s),t(0,i),t(16,c),t(21,p),t(14,h),t(15,k),t(22,v)}function X(N){E=N,t(9,E),t(5,a),t(4,L),t(18,o),t(17,l),t(19,s),t(0,i),t(16,c),t(21,p),t(14,h),t(15,k),t(22,v)}function C(N){g=N,t(6,g)}function I(N){A=N,t(7,A),t(5,a),t(4,L),t(18,o),t(17,l),t(19,s),t(0,i),t(16,c),t(21,p),t(14,h),t(15,k),t(22,v)}return n.$$set=N=>{"workflow"in N&&t(0,i=N.workflow),"namespace"in N&&t(1,w=N.namespace),"cancelInProgress"in N&&t(2,D=N.cancelInProgress),"isRunning"in N&&t(3,y=N.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&t(12,e=vt(v.data.settings)),n.$$.dirty[0]&4194304&&t(18,o=_r(v.data.settings)),n.$$.dirty[0]&4194304&&t(17,l=Et(v.data.settings)),n.$$.dirty[0]&4194304&&t(19,s=It(v.data.settings)),n.$$.dirty[0]&2670593&&(s?s&&(t(14,h=i==null?void 0:i.pendingChildren)===null||h===void 0?void 0:h.length)>0?t(4,L=T("workflows.reset-disabled-pending-children")):s&&(t(15,k=i==null?void 0:i.pendingChildren)===null||k===void 0?void 0:k.length)===0&&p.length===0&&t(4,L=T("workflows.reset-disabled-no-events")):t(4,L=T("workflows.reset-disabled"))),n.$$.dirty[0]&2686977&&t(5,a=s&&(t(16,c=i==null?void 0:i.pendingChildren)===null||c===void 0?void 0:c.length)===0&&p.length>0),n.$$.dirty[0]&393264&&t(10,B=[{label:T("workflows.reset"),onClick:()=>t(8,F=!0),testId:"reset-button",allowed:a,tooltip:a?"":L},{label:T("workflows.signal"),onClick:()=>t(9,E=!0),testId:"signal-button",allowed:o,tooltip:o?"":T("workflows.signal-disabled")},{label:T("workflows.terminate"),onClick:()=>t(7,A=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":T("workflows.terminate-disabled")}]),n.$$.dirty[0]&1048578&&t(11,f=u.namespaceWriteDisabled(w)||!Ut(Bt))},[i,w,D,y,L,a,g,A,F,E,B,f,e,b,h,k,c,l,o,s,u,p,v,H,m,M,X,C,I]}class Ir extends de{constructor(r){super(),ge(this,r,Er,vr,_e,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}const Cr=(n,r)=>{var o;const t=n==="Running",e=(o=r==null?void 0:r.end)==null?void 0:o.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return t&&e},je=n=>{const r=n==null?void 0:n.indexOf("?");return r>-1?n.slice(0,r):n},x=(n,r,t=!1)=>{const e=je(n).split("/"),o=je(r).split("/");if(t&&e.length!==o.length)return!1;for(let l=0;l<e.length;l++){const s=e[l],a=o[l];if(s!==a)return!1}return!0};function Ar(n){let r=(n[15]?T("common.workflows"):T("workflows.back-to-workflows"))+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p(e,o){o&32768&&r!==(r=(e[15]?T("common.workflows"):T("workflows.back-to-workflows"))+"")&&ne(t,r)},d(e){e&&d(t)}}}function Ye(n){let r,t;return r=new Se({props:{href:fe({...n[14]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&16384&&(l.href=fe({...e[14]})),o&268435458&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Dr(n){var e;let r=((e=n[1])==null?void 0:e.runId)+"",t;return{c(){t=J(r)},l(o){t=Z(o,r)},m(o,l){P(o,t,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.runId)+"")&&ne(t,r)},d(o){o&&d(t)}}}function ze(n){let r,t,e,o=T("workers.last-used-version")+"",l,s,a,f,u,p=T("workers.next-version")+"",v,h,k;return s=new Be({props:{defaultVersion:n[2]===n[7]||n[2]===n[8],active:n[2]===n[8],buildId:n[2],$$slots:{"default-worker":[Vr],"overall-default-worker":[Pr]},$$scope:{ctx:n}}}),h=new Be({props:{defaultVersion:!!n[7],active:n[7]===n[8],buildId:n[7],$$slots:{"default-worker":[Rr],"overall-default-worker":[Sr]},$$scope:{ctx:n}}}),{c(){r=U("div"),t=U("p"),e=U("span"),l=J(o),V(s.$$.fragment),a=j(),f=U("p"),u=U("span"),v=J(p),V(h.$$.fragment),this.h()},l(c){r=O(c,"DIV",{class:!0});var i=Q(r);t=O(i,"P",{class:!0});var w=Q(t);e=O(w,"SPAN",{});var D=Q(e);l=Z(D,o),D.forEach(d),S(s.$$.fragment,w),w.forEach(d),a=Y(i),f=O(i,"P",{class:!0});var y=Q(f);u=O(y,"SPAN",{});var g=Q(u);v=Z(g,p),g.forEach(d),S(h.$$.fragment,y),y.forEach(d),i.forEach(d),this.h()},h(){z(t,"class","flex items-center gap-1"),z(f,"class","flex items-center gap-1"),z(r,"class","flex gap-4")},m(c,i){P(c,r,i),q(r,t),q(t,e),q(e,l),R(s,t,null),q(r,a),q(r,f),q(f,u),q(u,v),R(h,f,null),k=!0},p(c,i){const w={};i&388&&(w.defaultVersion=c[2]===c[7]||c[2]===c[8]),i&260&&(w.active=c[2]===c[8]),i&4&&(w.buildId=c[2]),i&268435716&&(w.$$scope={dirty:i,ctx:c}),s.$set(w);const D={};i&128&&(D.defaultVersion=!!c[7]),i&384&&(D.active=c[7]===c[8]),i&128&&(D.buildId=c[7]),i&268435840&&(D.$$scope={dirty:i,ctx:c}),h.$set(D)},i(c){k||(_(s.$$.fragment,c),_(h.$$.fragment,c),k=!0)},o(c){$(s.$$.fragment,c),$(h.$$.fragment,c),k=!1},d(c){c&&d(r),W(s),W(h)}}}function Je(n){let r=T("workers.overall")+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p:oe,d(e){e&&d(t)}}}function Pr(n){let r,t=n[2]===n[8]&&Je();return{c(){t&&t.c(),r=pe()},l(e){t&&t.l(e),r=pe()},m(e,o){t&&t.m(e,o),P(e,r,o)},p(e,o){e[2]===e[8]?t?t.p(e,o):(t=Je(),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(e){e&&d(r),t&&t.d(e)}}}function Vr(n){let r=T("workers.default")+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p:oe,d(e){e&&d(t)}}}function Ze(n){let r=T("workers.overall")+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p:oe,d(e){e&&d(t)}}}function Sr(n){let r,t=n[7]===n[8]&&Ze();return{c(){t&&t.c(),r=pe()},l(e){t&&t.l(e),r=pe()},m(e,o){t&&t.m(e,o),P(e,r,o)},p(e,o){e[7]===e[8]?t?t.p(e,o):(t=Ze(),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(e){e&&d(r),t&&t.d(e)}}}function Rr(n){let r=T("workers.default")+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p:oe,d(e){e&&d(t)}}}function Wr(n){var e;let r=((e=n[1])==null?void 0:e.historyEvents)+"",t;return{c(){t=J(r)},l(o){t=Z(o,r)},m(o,l){P(o,t,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.historyEvents)+"")&&ne(t,r)},d(o){o&&d(t)}}}function Tr(n){let r,t;return r=new Re({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Wr]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&268435458&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Mr(n){var e,o;let r=((o=(e=n[16])==null?void 0:e.pollers)==null?void 0:o.length)+"",t;return{c(){t=J(r)},l(l){t=Z(l,r)},m(l,s){P(l,t,s)},p(l,s){var a,f;s&65536&&r!==(r=((f=(a=l[16])==null?void 0:a.pollers)==null?void 0:f.length)+"")&&ne(t,r)},d(l){l&&d(t)}}}function qr(n){let r,t;return r=new Re({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Mr]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&268500992&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Fr(n){let r=n[6].relationshipCount+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p(e,o){o&64&&r!==(r=e[6].relationshipCount+"")&&ne(t,r)},d(e){e&&d(t)}}}function yr(n){let r,t;return r=new Re({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Fr]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&268435520&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Ge(n){let r,t;return r=new ue({props:{label:T("workflows.pending-activities-tab"),id:"pending-activities-tab",href:Ae(n[14]),active:x(n[5].url.pathname,Ae(n[14])),$$slots:{default:[Nr]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&16384&&(l.href=Ae(e[14])),o&16416&&(l.active=x(e[5].url.pathname,Ae(e[14]))),o&268439554&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Ke(n){let r,t;return r=new Tt({props:{name:"canceled",width:20,height:20}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Hr(n){var s,a;let r,t=((a=(s=n[1])==null?void 0:s.pendingActivities)==null?void 0:a.length)+"",e,o,l=n[12]&&Ke();return{c(){l&&l.c(),r=j(),e=J(t)},l(f){l&&l.l(f),r=Y(f),e=Z(f,t)},m(f,u){l&&l.m(f,u),P(f,r,u),P(f,e,u),o=!0},p(f,u){var p,v;f[12]?l?u&4096&&_(l,1):(l=Ke(),l.c(),_(l,1),l.m(r.parentNode,r)):l&&(te(),$(l,1,1,()=>{l=null}),re()),(!o||u&2)&&t!==(t=((v=(p=f[1])==null?void 0:p.pendingActivities)==null?void 0:v.length)+"")&&ne(e,t)},i(f){o||(_(l),o=!0)},o(f){$(l),o=!1},d(f){f&&(d(r),d(e)),l&&l.d(f)}}}function Nr(n){let r,t;return r=new Re({props:{type:n[12]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Hr]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&4096&&(l.type=e[12]?"warning":"blue"),o&268439554&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Br(n){let r,t,e,o,l,s,a,f,u,p,v,h,k;r=new ue({props:{label:T("workflows.history-tab"),id:"history-tab",href:fe({...n[14]}),active:x(n[5].url.pathname,fe({...n[14]})),$$slots:{default:[Tr]},$$scope:{ctx:n}}}),e=new ue({props:{label:T("workflows.workers-tab"),id:"workers-tab",href:he(n[14]),active:x(n[5].url.pathname,he(n[14])),$$slots:{default:[qr]},$$scope:{ctx:n}}}),l=new ue({props:{label:T("workflows.relationships"),id:"relationships-tab",href:ve(n[14]),active:x(n[5].url.pathname,ve(n[14])),$$slots:{default:[yr]},$$scope:{ctx:n}}});let c=!n[18]&&Ge(n);return f=new ue({props:{label:T("workflows.call-stack-tab"),id:"call-stack-tab",href:Ee(n[14]),active:x(n[5].url.pathname,Ee(n[14]))}}),p=new ue({props:{label:T("workflows.queries-tab"),id:"queries-tab",href:Ie(n[14]),active:x(n[5].url.pathname,Ie(n[14]))}}),h=new ue({props:{label:T("workflows.metadata-tab"),id:"metadata-tab",href:Ce(n[14]),active:x(n[5].url.pathname,Ce(n[14]))}}),{c(){V(r.$$.fragment),t=j(),V(e.$$.fragment),o=j(),V(l.$$.fragment),s=j(),c&&c.c(),a=j(),V(f.$$.fragment),u=j(),V(p.$$.fragment),v=j(),V(h.$$.fragment)},l(i){S(r.$$.fragment,i),t=Y(i),S(e.$$.fragment,i),o=Y(i),S(l.$$.fragment,i),s=Y(i),c&&c.l(i),a=Y(i),S(f.$$.fragment,i),u=Y(i),S(p.$$.fragment,i),v=Y(i),S(h.$$.fragment,i)},m(i,w){R(r,i,w),P(i,t,w),R(e,i,w),P(i,o,w),R(l,i,w),P(i,s,w),c&&c.m(i,w),P(i,a,w),R(f,i,w),P(i,u,w),R(p,i,w),P(i,v,w),R(h,i,w),k=!0},p(i,w){const D={};w&16384&&(D.href=fe({...i[14]})),w&16416&&(D.active=x(i[5].url.pathname,fe({...i[14]}))),w&268435458&&(D.$$scope={dirty:w,ctx:i}),r.$set(D);const y={};w&16384&&(y.href=he(i[14])),w&16416&&(y.active=x(i[5].url.pathname,he(i[14]))),w&268500992&&(y.$$scope={dirty:w,ctx:i}),e.$set(y);const g={};w&16384&&(g.href=ve(i[14])),w&16416&&(g.active=x(i[5].url.pathname,ve(i[14]))),w&268435520&&(g.$$scope={dirty:w,ctx:i}),l.$set(g),i[18]?c&&(te(),$(c,1,1,()=>{c=null}),re()):c?(c.p(i,w),w&262144&&_(c,1)):(c=Ge(i),c.c(),_(c,1),c.m(a.parentNode,a));const A={};w&16384&&(A.href=Ee(i[14])),w&16416&&(A.active=x(i[5].url.pathname,Ee(i[14]))),f.$set(A);const F={};w&16384&&(F.href=Ie(i[14])),w&16416&&(F.active=x(i[5].url.pathname,Ie(i[14]))),p.$set(F);const E={};w&16384&&(E.href=Ce(i[14])),w&16416&&(E.active=x(i[5].url.pathname,Ce(i[14]))),h.$set(E)},i(i){k||(_(r.$$.fragment,i),_(e.$$.fragment,i),_(l.$$.fragment,i),_(c),_(f.$$.fragment,i),_(p.$$.fragment,i),_(h.$$.fragment,i),k=!0)},o(i){$(r.$$.fragment,i),$(e.$$.fragment,i),$(l.$$.fragment,i),$(c),$(f.$$.fragment,i),$(p.$$.fragment,i),$(h.$$.fragment,i),k=!1},d(i){i&&(d(t),d(o),d(s),d(a),d(u),d(v)),W(r,i),W(e,i),W(l,i),c&&c.d(i),W(f,i),W(p,i),W(h,i)}}}function Lr(n){let r,t;return r=new Jt({props:{class:"surface-secondary flex flex-wrap gap-6 p-4",label:"workflow detail",$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&268783714&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Xe(n){let r,t,e,o;return t=new it({props:{bold:!0,icon:"info",intent:"info",title:T("workflows.cancel-request-sent"),$$slots:{default:[Ur]},$$scope:{ctx:n}}}),{c(){r=U("div"),V(t.$$.fragment)},l(l){r=O(l,"DIV",{});var s=Q(r);S(t.$$.fragment,s),s.forEach(d)},m(l,s){P(l,r,s),R(t,r,null),o=!0},p(l,s){const a={};s&268435456&&(a.$$scope={dirty:s,ctx:l}),t.$set(a)},i(l){o||(_(t.$$.fragment,l),l&&(e||tt(()=>{e=ot(r,at,{duration:200,delay:100}),e.start()})),o=!0)},o(l){$(t.$$.fragment,l),o=!1},d(l){l&&d(r),W(t)}}}function Ur(n){let r=T("workflows.cancel-request-sent-description")+"",t;return{c(){t=J(r)},l(e){t=Z(e,r)},m(e,o){P(e,t,o)},p:oe,d(e){e&&d(t)}}}function xe(n){let r,t,e,o;return t=new it({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:T("workflows.reset-success-alert-title"),$$slots:{default:[Qr]},$$scope:{ctx:n}}}),{c(){r=U("div"),V(t.$$.fragment)},l(l){r=O(l,"DIV",{});var s=Q(r);S(t.$$.fragment,s),s.forEach(d)},m(l,s){P(l,r,s),R(t,r,null),o=!0},p(l,s){const a={};s&268435481&&(a.$$scope={dirty:s,ctx:l}),t.$set(a)},i(l){o||(_(t.$$.fragment,l),l&&(e||tt(()=>{e=ot(r,at,{duration:200,delay:100}),e.start()})),o=!0)},o(l){$(t.$$.fragment,l),o=!1},d(l){l&&d(r),W(t)}}}function Or(n){let r;return{c(){r=J("here")},l(t){r=Z(t,"here")},m(t,e){P(t,r,e)},d(t){t&&d(r)}}}function Qr(n){var l,s,a,f;let r,t,e,o;return t=new Se({props:{href:fe({namespace:n[0],workflow:(s=(l=n[3])==null?void 0:l.workflow)==null?void 0:s.id,run:n[4][(f=(a=n[3])==null?void 0:a.workflow)==null?void 0:f.runId]}),$$slots:{default:[Or]},$$scope:{ctx:n}}}),{c(){r=J("You can find the resulting Workflow Execution "),V(t.$$.fragment),e=J(".")},l(u){r=Z(u,"You can find the resulting Workflow Execution "),S(t.$$.fragment,u),e=Z(u,".")},m(u,p){P(u,r,p),R(t,u,p),P(u,e,p),o=!0},p(u,p){var h,k,c,i;const v={};p&25&&(v.href=fe({namespace:u[0],workflow:(k=(h=u[3])==null?void 0:h.workflow)==null?void 0:k.id,run:u[4][(i=(c=u[3])==null?void 0:c.workflow)==null?void 0:i.runId]})),p&268435456&&(v.$$scope={dirty:p,ctx:u}),t.$set(v)},i(u){o||(_(t.$$.fragment,u),o=!0)},o(u){$(t.$$.fragment,u),o=!1},d(u){u&&(d(r),d(e)),W(t,u)}}}function jr(n){var M,X;let r,t,e,o,l,s,a,f,u,p,v,h,k,c,i,w,D,y,g,A,F,E,L;e=new Se({props:{href:`${Pe({namespace:n[0]})}?${n[17]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Ar]},$$scope:{ctx:n}}});let B=n[15]&&Ye(n);p=new Ot({props:{status:(M=n[1])==null?void 0:M.status,big:!0}}),c=new Yt({props:{copyIconTitle:T("common.copy-icon-title"),copySuccessIconTitle:T("common.copy-success-icon-title"),content:(X=n[1])==null?void 0:X.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}});let b=n[9]&&ze(n);y=new Ir({props:{isRunning:n[13],cancelInProgress:n[11],workflow:n[1],namespace:n[0]}}),A=new zt({props:{$$slots:{default:[Lr]},$$scope:{ctx:n}}});let H=n[11]&&Xe(n),m=n[10]&&xe(n);return{c(){r=U("div"),t=U("div"),V(e.$$.fragment),o=j(),B&&B.c(),l=j(),s=U("header"),a=U("div"),f=U("div"),u=U("div"),V(p.$$.fragment),v=j(),h=U("div"),k=U("h1"),V(c.$$.fragment),i=j(),b&&b.c(),w=j(),D=U("div"),V(y.$$.fragment),g=j(),V(A.$$.fragment),F=j(),H&&H.c(),E=j(),m&&m.c(),this.h()},l(C){r=O(C,"DIV",{class:!0});var I=Q(r);t=O(I,"DIV",{class:!0});var N=Q(t);S(e.$$.fragment,N),o=Y(N),B&&B.l(N),N.forEach(d),l=Y(I),s=O(I,"HEADER",{class:!0});var K=Q(s);a=O(K,"DIV",{class:!0});var le=Q(a);f=O(le,"DIV",{class:!0});var ee=Q(f);u=O(ee,"DIV",{class:!0});var we=Q(u);S(p.$$.fragment,we),we.forEach(d),v=Y(ee),h=O(ee,"DIV",{class:!0});var ie=Q(h);k=O(ie,"H1",{"data-testid":!0,class:!0});var $e=Q(k);S(c.$$.fragment,$e),$e.forEach(d),i=Y(ie),b&&b.l(ie),ie.forEach(d),ee.forEach(d),w=Y(le),D=O(le,"DIV",{class:!0});var ye=Q(D);S(y.$$.fragment,ye),ye.forEach(d),le.forEach(d),g=Y(K),S(A.$$.fragment,K),F=Y(K),H&&H.l(K),E=Y(K),m&&m.l(K),K.forEach(d),I.forEach(d),this.h()},h(){z(t,"class","pb-4"),z(u,"class","px-2"),z(k,"data-testid","workflow-id-heading"),z(k,"class","overflow-hidden text-base font-medium lg:text-2xl"),z(h,"class","flex flex-col flex-wrap gap-0"),z(f,"class","flex flex-col items-center gap-4 lg:flex-row"),z(D,"class","px-2"),z(a,"class","flex flex-col items-center justify-between gap-4 lg:flex-row"),z(s,"class","rounded-top flex flex-col gap-0"),z(r,"class","surface-secondary")},m(C,I){P(C,r,I),q(r,t),R(e,t,null),q(t,o),B&&B.m(t,null),q(r,l),q(r,s),q(s,a),q(a,f),q(f,u),R(p,u,null),q(f,v),q(f,h),q(h,k),R(c,k,null),q(h,i),b&&b.m(h,null),q(a,w),q(a,D),R(y,D,null),q(s,g),R(A,s,null),q(s,F),H&&H.m(s,null),q(s,E),m&&m.m(s,null),L=!0},p(C,[I]){var ie,$e;const N={};I&131073&&(N.href=`${Pe({namespace:C[0]})}?${C[17]}`),I&268468224&&(N.$$scope={dirty:I,ctx:C}),e.$set(N),C[15]?B?(B.p(C,I),I&32768&&_(B,1)):(B=Ye(C),B.c(),_(B,1),B.m(t,null)):B&&(te(),$(B,1,1,()=>{B=null}),re());const K={};I&2&&(K.status=(ie=C[1])==null?void 0:ie.status),p.$set(K);const le={};I&2&&(le.content=($e=C[1])==null?void 0:$e.id),c.$set(le),C[9]?b?(b.p(C,I),I&512&&_(b,1)):(b=ze(C),b.c(),_(b,1),b.m(h,null)):b&&(te(),$(b,1,1,()=>{b=null}),re());const ee={};I&8192&&(ee.isRunning=C[13]),I&2048&&(ee.cancelInProgress=C[11]),I&2&&(ee.workflow=C[1]),I&1&&(ee.namespace=C[0]),y.$set(ee);const we={};I&268783714&&(we.$$scope={dirty:I,ctx:C}),A.$set(we),C[11]?H?(H.p(C,I),I&2048&&_(H,1)):(H=Xe(C),H.c(),_(H,1),H.m(s,E)):H&&(te(),$(H,1,1,()=>{H=null}),re()),C[10]?m?(m.p(C,I),I&1024&&_(m,1)):(m=xe(C),m.c(),_(m,1),m.m(s,null)):m&&(te(),$(m,1,1,()=>{m=null}),re())},i(C){L||(_(e.$$.fragment,C),_(B),_(p.$$.fragment,C),_(c.$$.fragment,C),_(b),_(y.$$.fragment,C),_(A.$$.fragment,C),_(H),_(m),L=!0)},o(C){$(e.$$.fragment,C),$(B),$(p.$$.fragment,C),$(c.$$.fragment,C),$(b),$(y.$$.fragment,C),$(A.$$.fragment,C),$(H),$(m),L=!1},d(C){C&&d(r),W(e),B&&B.d(),W(p),W(c),b&&b.d(),W(y),W(A),H&&H.d(),m&&m.d()}}}function Yr(n,r,t){let e,o,l,s,a,f,u,p,v,h,k,c,i,w,D,y,g,A,F,E,L,B;G(n,Zt,I=>t(25,D=I)),G(n,De,I=>t(26,y=I)),G(n,ke,I=>t(3,g=I)),G(n,Ct,I=>t(4,A=I)),G(n,Nt,I=>t(27,F=I)),G(n,Ve,I=>t(5,E=I)),G(n,nt,I=>t(17,L=I)),G(n,lt,I=>t(18,B=I));var b,H,m,M,X;let{namespace:C}=r;return n.$$set=I=>{"namespace"in I&&t(0,C=I.namespace)},n.$$.update=()=>{n.$$.dirty&8&&t(1,{workflow:e,workers:o,compatibility:l}=g,e,(t(16,o),t(3,g)),(t(24,l),t(3,g))),n.$$.dirty&32&&t(15,s=E.params.id),n.$$.dirty&3&&t(14,a={namespace:C,workflow:e==null?void 0:e.id,run:e==null?void 0:e.runId}),n.$$.dirty&524296&&t(13,f=t(19,b=g==null?void 0:g.workflow)===null||b===void 0?void 0:b.isRunning),n.$$.dirty&1048584&&t(12,u=["Terminated","TimedOut","Canceled"].includes(t(20,H=g.workflow)===null||H===void 0?void 0:H.status)),n.$$.dirty&136314888&&t(11,p=Cr(t(21,m=g==null?void 0:g.workflow)===null||m===void 0?void 0:m.status,F)),n.$$.dirty&4194328&&t(10,v=Kt(A,t(22,M=g==null?void 0:g.workflow)===null||M===void 0?void 0:M.runId)),n.$$.dirty&8388610&&t(9,h=t(23,X=e==null?void 0:e.mostRecentWorkerVersionStamp)===null||X===void 0?void 0:X.useVersioning),n.$$.dirty&2&&t(2,k=Xt(e)),n.$$.dirty&16777216&&t(8,c=xt(l)),n.$$.dirty&16777220&&t(7,i=er(l,k)),n.$$.dirty&100663298&&t(6,w=Gt(e,y,D))},[C,e,k,g,A,E,w,i,c,h,v,p,u,f,a,s,o,L,B,b,H,m,M,X,l,D,y,F]}class ct extends de{constructor(r){super(),ge(this,r,Yr,jr,_e,{namespace:0})}}async function zr({activity:n,namespace:r,settings:t,accessToken:e},{convertWithCodec:o=tr,decodeAttributes:l=rr}={}){const s=await o({attributes:n,namespace:r,settings:t,accessToken:e});return l(s)}const Jr=async({activity:n,namespace:r,settings:t,accessToken:e})=>await zr({activity:n,namespace:r,settings:t,accessToken:e}),et=async(n,r,t,e)=>{const o=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of o){const a=await Jr({activity:s,namespace:r,settings:t,accessToken:e});l.push(a)}return l};function Zr(n){let r,t,e,o;t=new ct({props:{namespace:n[0].params.namespace}});const l=n[10].default,s=Te(l,n,n[11],null);return{c(){r=U("div"),V(t.$$.fragment),e=j(),s&&s.c(),this.h()},l(a){r=O(a,"DIV",{class:!0});var f=Q(r);S(t.$$.fragment,f),f.forEach(d),e=Y(a),s&&s.l(a),this.h()},h(){z(r,"class","px-8 pt-24 md:pt-20")},m(a,f){P(a,r,f),R(t,r,null),P(a,e,f),s&&s.m(a,f),o=!0},p(a,f){const u={};f&1&&(u.namespace=a[0].params.namespace),t.$set(u),s&&s.p&&(!o||f&2048)&&Me(s,l,a,a[11],o?Fe(l,a[11],f,null):qe(a[11]),null)},i(a){o||(_(t.$$.fragment,a),_(s,a),o=!0)},o(a){$(t.$$.fragment,a),$(s,a),o=!1},d(a){a&&(d(r),d(e)),W(t),s&&s.d(a)}}}function Gr(n){let r,t;return r=new st({}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p:oe,i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Kr(n){let r,t;return r=new ut({props:{error:n[1]}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&2&&(l.error=e[1]),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function Xr(n){let r,t,e,o,l;const s=[Kr,Gr,Zr],a=[];function f(u,p){return u[1]?0:u[2].workflow?2:1}return t=f(n),e=a[t]=s[t](n),{c(){r=U("div"),e.c(),this.h()},l(u){r=O(u,"DIV",{class:!0});var p=Q(r);e.l(p),p.forEach(d),this.h()},h(){z(r,"class",o="surface-secondary absolute bottom-0 left-0 right-0 "+(n[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0")},m(u,p){P(u,r,p),a[t].m(r,null),l=!0},p(u,p){let v=t;t=f(u),t===v?a[t].p(u,p):(te(),$(a[v],1,1,()=>{a[v]=null}),re(),e=a[t],e?e.p(u,p):(e=a[t]=s[t](u),e.c()),_(e,1),e.m(r,null)),(!l||p&8&&o!==(o="surface-secondary absolute bottom-0 left-0 right-0 "+(u[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0"))&&z(r,"class",o)},i(u){l||(_(e),l=!0)},o(u){$(e),l=!1},d(u){u&&d(r),a[t].d()}}}function xr(n){let r,t,e;r=new ct({props:{namespace:n[0].params.namespace}});const o=n[10].default,l=Te(o,n,n[11],null);return{c(){V(r.$$.fragment),t=j(),l&&l.c()},l(s){S(r.$$.fragment,s),t=Y(s),l&&l.l(s)},m(s,a){R(r,s,a),P(s,t,a),l&&l.m(s,a),e=!0},p(s,a){const f={};a&1&&(f.namespace=s[0].params.namespace),r.$set(f),l&&l.p&&(!e||a&2048)&&Me(l,o,s,s[11],e?Fe(o,s[11],a,null):qe(s[11]),null)},i(s){e||(_(r.$$.fragment,s),_(l,s),e=!0)},o(s){$(r.$$.fragment,s),$(l,s),e=!1},d(s){s&&d(t),W(r,s),l&&l.d(s)}}}function eo(n){let r,t;return r=new st({}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p:oe,i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function to(n){let r,t;return r=new ut({props:{error:n[1]}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,o){const l={};o&2&&(l.error=e[1]),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function ro(n){let r,t,e,o;const l=[to,eo,xr],s=[];function a(f,u){return f[1]?0:f[2].workflow?2:1}return t=a(n),e=s[t]=l[t](n),{c(){r=U("div"),e.c(),this.h()},l(f){r=O(f,"DIV",{class:!0,slot:!0});var u=Q(r);e.l(u),u.forEach(d),this.h()},h(){z(r,"class","flex h-full flex-col gap-0"),z(r,"slot","fallback")},m(f,u){P(f,r,u),s[t].m(r,null),o=!0},p(f,u){let p=t;t=a(f),t===p?s[t].p(f,u):(te(),$(s[p],1,1,()=>{s[p]=null}),re(),e=s[t],e?e.p(f,u):(e=s[t]=l[t](f),e.c()),_(e,1),e.m(r,null))},i(f){o||(_(e),o=!0)},o(f){$(e),o=!1},d(f){f&&d(r),s[t].d()}}}function oo(n){let r,t;return r=new $t({props:{$$slots:{fallback:[ro],default:[Xr]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,[o]){const l={};o&2063&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function no(n,r,t){let e,o,l,s,a,f,u,p,v,h,k,c;G(n,Le,b=>t(7,s=b)),G(n,Ve,b=>t(0,a=b)),G(n,be,b=>t(8,f=b)),G(n,lt,b=>t(9,u=b)),G(n,We,b=>t(13,p=b)),G(n,ke,b=>t(2,v=b)),G(n,De,b=>t(14,h=b)),G(n,nr,b=>t(15,k=b)),G(n,wt,b=>t(3,c=b));let{$$slots:i={},$$scope:w}=r,D,y;const g=async(b,H)=>{var m;if(!((m=b==null?void 0:b.mostRecentWorkerVersionStamp)===null||m===void 0)&&m.useVersioning)return await jt({queue:H,namespace:e})},A=async(b,H,m,M,X)=>{const{settings:C}=a.data,{workflow:I,error:N}=await Ne({namespace:b,workflowId:H,runId:m});if(N){t(1,D=N);return}const{taskQueue:K}=I,le=await Qt({queue:K,namespace:b}),ee=await g(I,K);I.pendingActivities=await et(I,b,C,k==null?void 0:k.accessToken),se(ke,v={workflow:I,workers:le,compatibility:ee},v),y=new AbortController,se(De,h=await or({namespace:b,workflowId:H,runId:m,sort:X?"ascending":M,signal:y.signal,historySize:I.historyEvents}),h)},F=async b=>{var H;if(b&&(!((H=v==null?void 0:v.workflow)===null||H===void 0)&&H.isRunning)){const{settings:m}=a.data,{workflow:M,error:X}=await Ne({namespace:e,workflowId:o,runId:l});if(X){t(1,D=X);return}M.pendingActivities=await et(M,e,m,k==null?void 0:k.accessToken),se(ke,v={...v,workflow:M},v)}},E=()=>{se(De,h=[],h),y&&y.abort()},L=()=>{se(We,p=null,p),se(ke,v=Lt,v),t(1,D=void 0),E()},B=()=>{se(We,p=null,p),E()};return gt(()=>{const b=a.url.searchParams.get("sort");b&&se(Le,s=b,s)}),rt(()=>{L()}),n.$$set=b=>{"$$scope"in b&&t(11,w=b.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(6,{namespace:e,workflow:o,run:l}=a.params,e,(t(5,o),t(0,a)),(t(4,l),t(0,a))),n.$$.dirty&16&&L(),n.$$.dirty&640&&B(),n.$$.dirty&752&&A(e,o,l,s,u),n.$$.dirty&256&&F(f)},[a,D,v,c,l,o,e,s,f,u,i,w]}class lo extends de{constructor(r){super(),ge(this,r,no,oo,_e,{})}}const mt={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},so=lr(mt),ao=()=>{so.set(mt)};function fo(n){let r;const t=n[0].default,e=Te(t,n,n[1],null);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,l){e&&e.m(o,l),r=!0},p(o,l){e&&e.p&&(!r||l&2)&&Me(e,t,o,o[1],r?Fe(t,o[1],l,null):qe(o[1]),null)},i(o){r||(_(e,o),r=!0)},o(o){$(e,o),r=!1},d(o){e&&e.d(o)}}}function io(n){let r,t;return r=new lo({props:{$$slots:{default:[fo]},$$scope:{ctx:n}}}),{c(){V(r.$$.fragment)},l(e){S(r.$$.fragment,e)},m(e,o){R(r,e,o),t=!0},p(e,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(_(r.$$.fragment,e),t=!0)},o(e){$(r.$$.fragment,e),t=!1},d(e){W(r,e)}}}function uo(n,r,t){let{$$slots:e={},$$scope:o}=r;return rt(()=>{ao()}),n.$$set=l=>{"$$scope"in l&&t(1,o=l.$$scope)},[e,o]}class on extends de{constructor(r){super(),ge(this,r,uo,io,_e,{})}}export{on as component};
