import{s as _e,e as U,a as Y,t as J,b as O,d as Q,g as w,h as z,f as G,j,k as W,l as M,n as fe,c as K,v as ee,L as le,V as se,a5 as nt,w as ne,x as ce,y as lt,ae as It,$ as st,S as Ct,a3 as at,p as ye,u as qe,q as Fe,r as Ne}from"../chunks/scheduler.78ThUSKQ.js";import{S as de,i as ge,c as R,a as V,m as P,t as g,b,d as T,f as ae,g as re,e as oe,h as ft}from"../chunks/index.G2Max4V_.js";import{p as Pe}from"../chunks/stores.Vis96sTe.js";import{v as At}from"../chunks/data-encoder-settings.Moi08-PQ.js";import{L as Te}from"../chunks/link.TgwLy-aI.js";import{t as S}from"../chunks/translate.HrioCK44.js";import{h as it,i as Dt,s as St,j as Be}from"../chunks/workflows.j-hryJz7.js";import{e as Re,b as ue,m as ve,n as Ee,c as Ie,o as Ce,p as Ae,q as De}from"../chunks/route-for.A5WEU2GW.js";import{l as ut,L as Rt}from"../chunks/labs-mode-guard.mScvl8lM.js";import{L as ct}from"../chunks/loading.dhOLw0Qo.js";import{a as mt}from"../chunks/index.GCKs2DhI.js";import{e as Ve}from"../chunks/each.ycdfgOIg.js";import{C as Vt,T as Pt,w as Tt,a as Wt,b as Mt}from"../chunks/workflow-terminate-enabled.vsGbXJ8B.js";import{w as pt}from"../chunks/entry.URU-vSzs.js";import{C as yt}from"../chunks/checkbox.KHpdNNdK.js";import{I as _t}from"../chunks/input.OimNmJH7.js";import{M as dt}from"../chunks/modal.nij8KHG7.js";import{R as qt,a as Ft}from"../chunks/radio-input.4-P5cRXQ.js";import{R as ke}from"../chunks/workflow-actions.-K4W_iAA.js";import{r as gt,f as Se,t as Me}from"../chunks/events.U4gaqugV.js";import{p as Nt}from"../chunks/persist-store.akB4qqGd.js";import{i as wt}from"../chunks/is-network-error.m1ZFLdb3.js";import{C as Ht}from"../chunks/code-block.nEjYlmUg.js";import{t as Bt}from"../chunks/toaster.elEmwIFG.js";import{B as Lt}from"../chunks/button.NDN6dQXa.js";import{I as Ut}from"../chunks/icon.63Khk0lC.js";import{c as Ot}from"../chunks/menu.1umjwoFI.js";import{M as Qt}from"../chunks/menu-divider.OpI0aaoG.js";import{S as jt}from"../chunks/split-button.lK47CamM.js";import{T as $t}from"../chunks/tooltip.BuJJIpa-.js";import{c as Yt}from"../chunks/core-user.6n_xxQ1e.js";import{s as zt}from"../chunks/settings.3PgeZGxr.js";import{r as he,w as be,i as Jt}from"../chunks/workflow-run.xhkUKUJn.js";import{w as Gt}from"../chunks/write-actions-are-allowed.zHZJmiBz.js";import{W as Kt}from"../chunks/workflow-status.lydveu7_.js";import{A as ht}from"../chunks/alert.FHCstp--.js";import{B as We}from"../chunks/badge.PHjP2oTf.js";import{C as Le,g as Xt,a as Zt}from"../chunks/pollers-service.Q0ynTwyq.js";import{C as xt}from"../chunks/index.swfPJm87.js";import{a as er,b as tr,c as pe}from"../chunks/tab.ZLzdRRU7.js";import{n as rr}from"../chunks/namespaces.Kye-qCNJ.js";import{g as or}from"../chunks/get-workflow-relationships.ypE6GBby.js";import{h as nr}from"../chunks/has.iatLMeUG.js";import{f as lr,b as sr,h as ar}from"../chunks/task-queue-compatibility.52mtxoi2.js";import{f as fr,d as ir}from"../chunks/decode-payload.CtnbTfCr.js";import{f as ur}from"../chunks/events-service.vQGWYZdQ.js";import{a as cr}from"../chunks/auth-user.6NFLOgaQ.js";import{a as Ue}from"../chunks/event-view.1aR1vSR-.js";function mr(n){let r=S("workflows.back-to-workflows")+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p:ee,d(e){e&&w(t)}}}function pr(n){var D,y;let r,t,e,o,l,s,f=(((D=n[0])==null?void 0:D.statusCode)??"500")+"",a,u,c,_,d,k,m=(((y=n[0])==null?void 0:y.statusText)??"")+"",i,$;return e=new Te({props:{href:`${Re({namespace:n[2]})}?${n[3]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[mr]},$$scope:{ctx:n}}}),{c(){r=U("header"),t=U("div"),R(e.$$.fragment),o=Y(),l=U("div"),s=U("h1"),a=J(f),u=Y(),c=U("p"),_=J(n[1]),d=Y(),k=U("p"),i=J(m),this.h()},l(h){r=O(h,"HEADER",{class:!0});var A=Q(r);t=O(A,"DIV",{class:!0});var q=Q(t);V(e.$$.fragment,q),q.forEach(w),A.forEach(w),o=z(h),l=O(h,"DIV",{class:!0});var I=Q(l);s=O(I,"H1",{class:!0});var C=Q(s);a=G(C,f),C.forEach(w),u=z(I),c=O(I,"P",{class:!0});var L=Q(c);_=G(L,n[1]),L.forEach(w),d=z(I),k=O(I,"P",{class:!0});var v=Q(k);i=G(v,m),v.forEach(w),I.forEach(w),this.h()},h(){j(t,"class","mb-4 block"),j(r,"class","mb-4 flex flex-col gap-1"),j(s,"class","leading-0 text-[12rem] font-semibold"),j(c,"class","-mt-12 text-lg"),j(k,"class","text-2xl font-bold text-red-700"),j(l,"class","text-center align-middle")},m(h,A){W(h,r,A),M(r,t),P(e,t,null),W(h,o,A),W(h,l,A),M(l,s),M(s,a),M(l,u),M(l,c),M(c,_),M(l,d),M(l,k),M(k,i),$=!0},p(h,[A]){var I,C;const q={};A&12&&(q.href=`${Re({namespace:h[2]})}?${h[3]}`),A&32&&(q.$$scope={dirty:A,ctx:h}),e.$set(q),(!$||A&1)&&f!==(f=(((I=h[0])==null?void 0:I.statusCode)??"500")+"")&&fe(a,f),(!$||A&2)&&fe(_,h[1]),(!$||A&1)&&m!==(m=(((C=h[0])==null?void 0:C.statusText)??"")+"")&&fe(i,m)},i(h){$||(g(e.$$.fragment,h),$=!0)},o(h){b(e.$$.fragment,h),$=!1},d(h){h&&(w(r),w(o),w(l)),T(e)}}}function _r(n,r,t){let e,o,l,s;K(n,Pe,a=>t(4,l=a)),K(n,it,a=>t(3,s=a));let{error:f}=r;return n.$$set=a=>{"error"in a&&t(0,f=a.error)},n.$$.update=()=>{n.$$.dirty&16&&t(2,{namespace:e}=l.params,e),n.$$.dirty&1&&t(1,o=f.statusCode===404?S("workflows.workflow-404-title"):S("workflows.workflow-error-title"))},[f,o,e,s,l]}class bt extends de{constructor(r){super(),ge(this,r,_r,pr,_e,{error:0})}}const kt=Nt("resetWorkflows",{});function Oe(n,r,t){const e=n.slice();return e[18]=r[t],e}function dr(n){let r,t=S("workflows.reset-modal-title")+"",e;return{c(){r=U("h3"),e=J(t),this.h()},l(o){r=O(o,"H3",{slot:!0});var l=Q(r);e=G(l,t),l.forEach(w),this.h()},h(){j(r,"slot","title")},m(o,l){W(o,r,l),M(r,e)},p:ee,d(o){o&&w(r)}}}function Qe(n){let r,t;return r=new Ft({props:{id:"reset-event-"+n[18].id,value:n[18].id,label:n[18].id+" - "+n[18].eventType}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&64&&(l.id="reset-event-"+e[18].id),o&64&&(l.value=e[18].id),o&64&&(l.label=e[18].id+" - "+e[18].eventType),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function gr(n){let r,t,e=Ve(n[6]),o=[];for(let s=0;s<e.length;s+=1)o[s]=Qe(Oe(n,e,s));const l=s=>b(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=ce()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);r=ce()},m(s,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,f);W(s,r,f),t=!0},p(s,f){if(f&64){e=Ve(s[6]);let a;for(a=0;a<e.length;a+=1){const u=Oe(s,e,a);o[a]?(o[a].p(u,f),g(o[a],1)):(o[a]=Qe(u),o[a].c(),g(o[a],1),o[a].m(r.parentNode,r))}for(re(),a=e.length;a<o.length;a+=1)l(a);oe()}},i(s){if(!t){for(let f=0;f<e.length;f+=1)g(o[f]);t=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)b(o[f]);t=!1},d(s){s&&w(r),lt(o,s)}}}function wr(n){let r,t,e,o,l,s,f,a;t=new qt({props:{name:"reset-event-id",group:n[7],class:"max-h-40 overflow-auto",description:S("workflows.reset-event-radio-group-description"),$$slots:{default:[gr]},$$scope:{ctx:n}}}),o=new yt({props:{id:"reset-reapply-type-checkbox",checked:n[4]===ke.Signal,label:S("workflows.reset-reapply-type-label")}}),o.$on("change",n[9]);function u(_){n[13](_)}let c={id:"reset-reason",label:S("common.reason")};return n[5]!==void 0&&(c.value=n[5]),s=new _t({props:c}),le.push(()=>ae(s,"value",u)),{c(){r=U("div"),R(t.$$.fragment),e=Y(),R(o.$$.fragment),l=Y(),R(s.$$.fragment),this.h()},l(_){r=O(_,"DIV",{class:!0});var d=Q(r);V(t.$$.fragment,d),e=z(d),V(o.$$.fragment,d),l=z(d),V(s.$$.fragment,d),d.forEach(w),this.h()},h(){j(r,"class","flex w-full flex-col gap-4")},m(_,d){W(_,r,d),P(t,r,null),M(r,e),P(o,r,null),M(r,l),P(s,r,null),a=!0},p(_,d){const k={};d&2097216&&(k.$$scope={dirty:d,ctx:_}),t.$set(k);const m={};d&16&&(m.checked=_[4]===ke.Signal),o.$set(m);const i={};!f&&d&32&&(f=!0,i.value=_[5],se(()=>f=!1)),s.$set(i)},i(_){a||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(s.$$.fragment,_),a=!0)},o(_){b(t.$$.fragment,_),b(o.$$.fragment,_),b(s.$$.fragment,_),a=!1},d(_){_&&w(r),T(t),T(o),T(s)}}}function $r(n){let r,t,e,o;function l(a){n[14](a)}function s(a){n[15](a)}let f={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:S("common.confirm"),cancelText:S("common.cancel"),loading:n[3],confirmDisabled:!n[7],$$slots:{content:[wr],title:[dr]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),r=new dt({props:f}),le.push(()=>ae(r,"error",l)),le.push(()=>ae(r,"open",s)),r.$on("confirmModal",n[10]),r.$on("cancelModal",n[8]),{c(){R(r.$$.fragment)},l(a){V(r.$$.fragment,a)},m(a,u){P(r,a,u),o=!0},p(a,[u]){const c={};u&8&&(c.loading=a[3]),u&2097264&&(c.$$scope={dirty:u,ctx:a}),!t&&u&4&&(t=!0,c.error=a[2],se(()=>t=!1)),!e&&u&1&&(e=!0,c.open=a[0],se(()=>e=!1)),r.$set(c)},i(a){o||(g(r.$$.fragment,a),o=!0)},o(a){b(r.$$.fragment,a),o=!1},d(a){T(r,a)}}}function hr(n,r,t){let e,o=ee,l=()=>(o(),o=nt(_,C=>t(16,e=C)),_),s,f;K(n,gt,C=>t(6,f=C)),n.$$.on_destroy.push(()=>o());let{open:a}=r,{workflow:u}=r,{namespace:c}=r,{refresh:_}=r;l();let d="",k=!1,m,i=pt("");K(n,i,C=>t(17,s=C));let $;const D=()=>{t(0,a=!1),t(4,m=ke.Signal),ne(i,s="",s),t(5,$="")},y=C=>{t(4,m=C.detail.checked?ke.Signal:ke.None)},h=async()=>{t(2,d=""),t(3,k=!0);try{const C=await Dt({namespace:c,workflow:u,eventId:s,reason:$,reapplyType:m});C&&C.runId&&kt.update(L=>({...L,[u.runId]:C.runId})),ne(_,e=Date.now(),e),D()}catch(C){t(2,d=wt(C)?C.message:S("common.unknown-error"))}finally{t(3,k=!1)}D()};function A(C){$=C,t(5,$)}function q(C){d=C,t(2,d)}function I(C){a=C,t(0,a)}return n.$$set=C=>{"open"in C&&t(0,a=C.open),"workflow"in C&&t(11,u=C.workflow),"namespace"in C&&t(12,c=C.namespace),"refresh"in C&&l(t(1,_=C.refresh))},[a,_,d,k,m,$,f,i,D,y,h,u,c,A,q,I]}class br extends de{constructor(r){super(),ge(this,r,hr,$r,_e,{open:0,workflow:11,namespace:12,refresh:1})}}function kr(n){let r,t=S("workflows.signal-modal-title")+"",e;return{c(){r=U("h3"),e=J(t),this.h()},l(o){r=O(o,"H3",{slot:!0});var l=Q(r);e=G(l,t),l.forEach(w),this.h()},h(){j(r,"slot","title")},m(o,l){W(o,r,l),M(r,e)},p:ee,d(o){o&&w(r)}}}function vr(n){let r,t,e,o,l,s,f=S("workflows.signal-payload-input-label")+"",a,u,c,_=S("workflows.signal-payload-input-label-hint")+"",d,k,m,i;function $(h){n[12](h)}let D={id:"signal-name",label:S("workflows.signal-name-label"),required:!0};n[4]!==void 0&&(D.value=n[4]),t=new _t({props:D}),le.push(()=>ae(t,"value",$));let y={maxHeight:320,content:n[5],editable:!0,copyable:!1};return m=new Ht({props:y}),n[13](m),m.$on("change",n[9]),{c(){r=U("div"),R(t.$$.fragment),o=Y(),l=U("div"),s=U("span"),a=J(f),u=Y(),c=U("span"),d=J(_),k=Y(),R(m.$$.fragment),this.h()},l(h){r=O(h,"DIV",{slot:!0,class:!0});var A=Q(r);V(t.$$.fragment,A),o=z(A),l=O(A,"DIV",{});var q=Q(l);s=O(q,"SPAN",{class:!0});var I=Q(s);a=G(I,f),I.forEach(w),u=z(q),c=O(q,"SPAN",{class:!0});var C=Q(c);d=G(C,_),C.forEach(w),k=z(q),V(m.$$.fragment,q),q.forEach(w),A.forEach(w),this.h()},h(){j(s,"class","font-secondary text-sm font-medium"),j(c,"class","font-secondary text-xs font-light italic"),j(r,"slot","content"),j(r,"class","flex flex-col gap-4")},m(h,A){W(h,r,A),P(t,r,null),M(r,o),M(r,l),M(l,s),M(s,a),M(l,u),M(l,c),M(c,d),M(l,k),P(m,l,null),i=!0},p(h,A){const q={};!e&&A&16&&(e=!0,q.value=h[4],se(()=>e=!1)),t.$set(q);const I={};A&32&&(I.content=h[5]),m.$set(I)},i(h){i||(g(t.$$.fragment,h),g(m.$$.fragment,h),i=!0)},o(h){b(t.$$.fragment,h),b(m.$$.fragment,h),i=!1},d(h){h&&w(r),T(t),n[13](null),T(m)}}}function Er(n){let r,t,e,o;function l(a){n[14](a)}function s(a){n[15](a)}let f={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",loading:n[3],confirmText:S("common.submit"),cancelText:S("common.cancel"),confirmDisabled:!n[4],$$slots:{content:[vr],title:[kr]},$$scope:{ctx:n}};return n[2]!==void 0&&(f.error=n[2]),n[0]!==void 0&&(f.open=n[0]),r=new dt({props:f}),le.push(()=>ae(r,"error",l)),le.push(()=>ae(r,"open",s)),r.$on("cancelModal",n[7]),r.$on("confirmModal",n[8]),{c(){R(r.$$.fragment)},l(a){V(r.$$.fragment,a)},m(a,u){P(r,a,u),o=!0},p(a,[u]){const c={};u&8&&(c.loading=a[3]),u&16&&(c.confirmDisabled=!a[4]),u&131184&&(c.$$scope={dirty:u,ctx:a}),!t&&u&4&&(t=!0,c.error=a[2],se(()=>t=!1)),!e&&u&1&&(e=!0,c.open=a[0],se(()=>e=!1)),r.$set(c)},i(a){o||(g(r.$$.fragment,a),o=!0)},o(a){b(r.$$.fragment,a),o=!1},d(a){T(r,a)}}}function Ir(n,r,t){let e,o=ee,l=()=>(o(),o=nt(u,I=>t(16,e=I)),u);n.$$.on_destroy.push(()=>o());let{open:s}=r,{workflow:f}=r,{namespace:a}=r,{refresh:u}=r;l();let c="",_=!1,d="",k="",m;const i=()=>{t(0,s=!1),t(5,k=""),t(4,d=""),m==null||m.resetView(k)},$=async()=>{t(2,c=""),t(3,_=!0);try{await St({namespace:a,workflow:f,input:k,name:d}),ne(u,e=Date.now(),e),Bt.push({message:S("workflows.signal-success"),id:"workflow-signal-success-toast"}),i()}catch(I){t(2,c=wt(I)?I.message:S("common.unknown-error"))}finally{t(3,_=!1)}},D=I=>{t(5,k=I.detail)};function y(I){d=I,t(4,d)}function h(I){le[I?"unshift":"push"](()=>{m=I,t(6,m)})}function A(I){c=I,t(2,c)}function q(I){s=I,t(0,s)}return n.$$set=I=>{"open"in I&&t(0,s=I.open),"workflow"in I&&t(10,f=I.workflow),"namespace"in I&&t(11,a=I.namespace),"refresh"in I&&l(t(1,u=I.refresh))},[s,u,c,_,d,k,m,i,$,D,f,a,y,h,A,q]}class Cr extends de{constructor(r){super(),ge(this,r,Ir,Er,_e,{open:0,workflow:10,namespace:11,refresh:1})}}const Ar=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function je(n,r,t){const e=n.slice();return e[29]=r[t].onClick,e[30]=r[t].destructive,e[31]=r[t].label,e[32]=r[t].allowed,e[33]=r[t].testId,e[34]=r[t].tooltip,e}function Dr(n){let r,t;return r=new $t({props:{bottomRight:!0,width:200,text:n[4],hide:n[5],$$slots:{default:[Vr]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o[0]&16&&(l.text=e[4]),o[0]&32&&(l.hide=e[5]),o[0]&288|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Sr(n){let r,t;return r=new jt({props:{id:"workflow-actions",position:"right",disabled:n[11],primaryActionDisabled:!n[12]||n[2],label:S("workflows.request-cancellation"),menuLabel:S("workflows.workflow-actions"),$$slots:{default:[Wr]},$$scope:{ctx:n}}}),r.$on("click",n[23]),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o[0]&2048&&(l.disabled=e[11]),o[0]&4100&&(l.primaryActionDisabled=!e[12]||e[2]),o[0]&1024|o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Rr(n){let r=S("workflows.reset")+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p:ee,d(e){e&&w(t)}}}function Vr(n){let r,t;return r=new Lt({props:{"aria-label":S("workflows.reset"),disabled:!n[5],variant:"primary",$$slots:{default:[Rr]},$$scope:{ctx:n}}}),r.$on("click",n[24]),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o[0]&32&&(l.disabled=!e[5]),o[1]&64&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Ye(n){let r,t;return r=new Qt({}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Pr(n){let r=n[31]+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p(e,o){o[0]&1024&&r!==(r=e[31]+"")&&fe(t,r)},d(e){e&&w(t)}}}function Tr(n){let r,t,e;return r=new Ot({props:{destructive:n[30],disabled:!n[32],"data-testid":n[33],$$slots:{default:[Pr]},$$scope:{ctx:n}}}),r.$on("click",function(){It(n[29])&&n[29].apply(this,arguments)}),{c(){R(r.$$.fragment),t=Y()},l(o){V(r.$$.fragment,o),t=z(o)},m(o,l){P(r,o,l),W(o,t,l),e=!0},p(o,l){n=o;const s={};l[0]&1024&&(s.destructive=n[30]),l[0]&1024&&(s.disabled=!n[32]),l[0]&1024&&(s["data-testid"]=n[33]),l[0]&1024|l[1]&64&&(s.$$scope={dirty:l,ctx:n}),r.$set(s)},i(o){e||(g(r.$$.fragment,o),e=!0)},o(o){b(r.$$.fragment,o),e=!1},d(o){o&&w(t),T(r,o)}}}function ze(n){let r,t,e,o=n[30]&&Ye();return t=new $t({props:{text:n[34],hide:!n[34],width:200,left:!0,$$slots:{default:[Tr]},$$scope:{ctx:n}}}),{c(){o&&o.c(),r=Y(),R(t.$$.fragment)},l(l){o&&o.l(l),r=z(l),V(t.$$.fragment,l)},m(l,s){o&&o.m(l,s),W(l,r,s),P(t,l,s),e=!0},p(l,s){l[30]?o?s[0]&1024&&g(o,1):(o=Ye(),o.c(),g(o,1),o.m(r.parentNode,r)):o&&(re(),b(o,1,1,()=>{o=null}),oe());const f={};s[0]&1024&&(f.text=l[34]),s[0]&1024&&(f.hide=!l[34]),s[0]&1024|s[1]&64&&(f.$$scope={dirty:s,ctx:l}),t.$set(f)},i(l){e||(g(o),g(t.$$.fragment,l),e=!0)},o(l){b(o),b(t.$$.fragment,l),e=!1},d(l){l&&w(r),o&&o.d(l),T(t,l)}}}function Wr(n){let r,t,e=Ve(n[10]),o=[];for(let s=0;s<e.length;s+=1)o[s]=ze(je(n,e,s));const l=s=>b(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();r=ce()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);r=ce()},m(s,f){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,f);W(s,r,f),t=!0},p(s,f){if(f[0]&1024){e=Ve(s[10]);let a;for(a=0;a<e.length;a+=1){const u=je(s,e,a);o[a]?(o[a].p(u,f),g(o[a],1)):(o[a]=ze(u),o[a].c(),g(o[a],1),o[a].m(r.parentNode,r))}for(re(),a=e.length;a<o.length;a+=1)l(a);oe()}},i(s){if(!t){for(let f=0;f<e.length;f+=1)g(o[f]);t=!0}},o(s){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)b(o[f]);t=!1},d(s){s&&w(r),lt(o,s)}}}function Mr(n){let r,t,e,o,l,s,f,a,u,c,_,d,k,m,i;const $=[Sr,Dr],D=[];function y(p,F){return p[3]?0:1}r=y(n),t=D[r]=$[r](n);function h(p){n[25](p)}let A={refresh:he,workflow:n[0],namespace:n[1]};n[8]!==void 0&&(A.open=n[8]),o=new br({props:A}),le.push(()=>ae(o,"open",h));function q(p){n[26](p)}let I={refresh:he,workflow:n[0],namespace:n[1]};n[9]!==void 0&&(I.open=n[9]),f=new Cr({props:I}),le.push(()=>ae(f,"open",q));function C(p){n[27](p)}let L={refresh:he,workflow:n[0],namespace:n[1]};n[6]!==void 0&&(L.open=n[6]),c=new Vt({props:L}),le.push(()=>ae(c,"open",C));function v(p){n[28](p)}let H={refresh:he,workflow:n[0],namespace:n[1]};return n[7]!==void 0&&(H.open=n[7]),k=new Pt({props:H}),le.push(()=>ae(k,"open",v)),{c(){t.c(),e=Y(),R(o.$$.fragment),s=Y(),R(f.$$.fragment),u=Y(),R(c.$$.fragment),d=Y(),R(k.$$.fragment)},l(p){t.l(p),e=z(p),V(o.$$.fragment,p),s=z(p),V(f.$$.fragment,p),u=z(p),V(c.$$.fragment,p),d=z(p),V(k.$$.fragment,p)},m(p,F){D[r].m(p,F),W(p,e,F),P(o,p,F),W(p,s,F),P(f,p,F),W(p,u,F),P(c,p,F),W(p,d,F),P(k,p,F),i=!0},p(p,F){let Z=r;r=y(p),r===Z?D[r].p(p,F):(re(),b(D[Z],1,1,()=>{D[Z]=null}),oe(),t=D[r],t?t.p(p,F):(t=D[r]=$[r](p),t.c()),g(t,1),t.m(e.parentNode,e));const E={};F[0]&1&&(E.workflow=p[0]),F[0]&2&&(E.namespace=p[1]),!l&&F[0]&256&&(l=!0,E.open=p[8],se(()=>l=!1)),o.$set(E);const N={};F[0]&1&&(N.workflow=p[0]),F[0]&2&&(N.namespace=p[1]),!a&&F[0]&512&&(a=!0,N.open=p[9],se(()=>a=!1)),f.$set(N);const B={};F[0]&1&&(B.workflow=p[0]),F[0]&2&&(B.namespace=p[1]),!_&&F[0]&64&&(_=!0,B.open=p[6],se(()=>_=!1)),c.$set(B);const X={};F[0]&1&&(X.workflow=p[0]),F[0]&2&&(X.namespace=p[1]),!m&&F[0]&128&&(m=!0,X.open=p[7],se(()=>m=!1)),k.$set(X)},i(p){i||(g(t),g(o.$$.fragment,p),g(f.$$.fragment,p),g(c.$$.fragment,p),g(k.$$.fragment,p),i=!0)},o(p){b(t),b(o.$$.fragment,p),b(f.$$.fragment,p),b(c.$$.fragment,p),b(k.$$.fragment,p),i=!1},d(p){p&&(w(e),w(s),w(u),w(d)),D[r].d(p),T(o,p),T(f,p),T(c,p),T(k,p)}}}function yr(n,r,t){let e,o,l,s,f,a,u,c,_;K(n,gt,B=>t(21,c=B)),K(n,Pe,B=>t(22,_=B));var d,k,m;let{workflow:i}=r,{namespace:$}=r,{cancelInProgress:D}=r,{isRunning:y}=r,h=!1,A=!1,q=!1,I=!1,C,L,v=Yt();K(n,v,B=>t(20,u=B));const H=()=>t(6,h=!0),p=()=>t(8,q=!0);function F(B){q=B,t(8,q),t(5,f),t(4,C),t(18,o),t(17,l),t(19,s),t(0,i),t(16,m),t(21,c),t(14,d),t(15,k),t(22,_)}function Z(B){I=B,t(9,I),t(5,f),t(4,C),t(18,o),t(17,l),t(19,s),t(0,i),t(16,m),t(21,c),t(14,d),t(15,k),t(22,_)}function E(B){h=B,t(6,h)}function N(B){A=B,t(7,A),t(5,f),t(4,C),t(18,o),t(17,l),t(19,s),t(0,i),t(16,m),t(21,c),t(14,d),t(15,k),t(22,_)}return n.$$set=B=>{"workflow"in B&&t(0,i=B.workflow),"namespace"in B&&t(1,$=B.namespace),"cancelInProgress"in B&&t(2,D=B.cancelInProgress),"isRunning"in B&&t(3,y=B.isRunning)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&t(12,e=Tt(_.data.settings)),n.$$.dirty[0]&4194304&&t(18,o=Ar(_.data.settings)),n.$$.dirty[0]&4194304&&t(17,l=Wt(_.data.settings)),n.$$.dirty[0]&4194304&&t(19,s=Mt(_.data.settings)),n.$$.dirty[0]&2670593&&(s?s&&(t(14,d=i==null?void 0:i.pendingChildren)===null||d===void 0?void 0:d.length)>0?t(4,C=S("workflows.reset-disabled-pending-children")):s&&(t(15,k=i==null?void 0:i.pendingChildren)===null||k===void 0?void 0:k.length)===0&&c.length===0&&t(4,C=S("workflows.reset-disabled-no-events")):t(4,C=S("workflows.reset-disabled"))),n.$$.dirty[0]&2686977&&t(5,f=s&&(t(16,m=i==null?void 0:i.pendingChildren)===null||m===void 0?void 0:m.length)===0&&c.length>0),n.$$.dirty[0]&393264&&t(10,L=[{label:S("workflows.reset"),onClick:()=>t(8,q=!0),testId:"reset-button",allowed:f,tooltip:f?"":C},{label:S("workflows.signal"),onClick:()=>t(9,I=!0),testId:"signal-button",allowed:o,tooltip:o?"":S("workflows.signal-disabled")},{label:S("workflows.terminate"),onClick:()=>t(7,A=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":S("workflows.terminate-disabled")}]),n.$$.dirty[0]&1048578&&t(11,a=u.namespaceWriteDisabled($)||!Gt(zt))},[i,$,D,y,C,f,h,A,q,I,L,a,e,v,d,k,m,l,o,s,u,c,_,H,p,F,Z,E,N]}class qr extends de{constructor(r){super(),ge(this,r,yr,Mr,_e,{workflow:0,namespace:1,cancelInProgress:2,isRunning:3},null,[-1,-1])}}const Fr=(n,r)=>{const t=n==="Running",e=r==null?void 0:r.some(o=>(o==null?void 0:o.eventType)==="WorkflowExecutionCancelRequested");return t&&e},Je=n=>{const r=n==null?void 0:n.indexOf("?");return r>-1?n.slice(0,r):n},x=(n,r,t=!1)=>{const e=Je(n).split("/"),o=Je(r).split("/");if(t&&e.length!==o.length)return!1;for(let l=0;l<e.length;l++){const s=e[l],f=o[l];if(s!==f)return!1}return!0};function Nr(n){let r=(n[15]?S("common.workflows"):S("workflows.back-to-workflows"))+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p(e,o){o&32768&&r!==(r=(e[15]?S("common.workflows"):S("workflows.back-to-workflows"))+"")&&fe(t,r)},d(e){e&&w(t)}}}function Ge(n){let r,t;return r=new Te({props:{href:ue({...n[14]}),"data-testid":"back-to-workflow-execution",icon:"chevron-left",$$slots:{default:[Hr]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&16384&&(l.href=ue({...e[14]})),o&134217730&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Hr(n){var e;let r=((e=n[1])==null?void 0:e.runId)+"",t;return{c(){t=J(r)},l(o){t=G(o,r)},m(o,l){W(o,t,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.runId)+"")&&fe(t,r)},d(o){o&&w(t)}}}function Ke(n){let r,t,e,o=S("workers.last-used-version")+"",l,s,f,a,u,c=S("workers.next-version")+"",_,d,k;return s=new Le({props:{defaultVersion:n[2]===n[7]||n[2]===n[8],active:n[2]===n[8],buildId:n[2],$$slots:{"default-worker":[Lr],"overall-default-worker":[Br]},$$scope:{ctx:n}}}),d=new Le({props:{defaultVersion:!!n[7],active:n[7]===n[8],buildId:n[7],$$slots:{"default-worker":[Or],"overall-default-worker":[Ur]},$$scope:{ctx:n}}}),{c(){r=U("div"),t=U("p"),e=U("span"),l=J(o),R(s.$$.fragment),f=Y(),a=U("p"),u=U("span"),_=J(c),R(d.$$.fragment),this.h()},l(m){r=O(m,"DIV",{class:!0});var i=Q(r);t=O(i,"P",{class:!0});var $=Q(t);e=O($,"SPAN",{});var D=Q(e);l=G(D,o),D.forEach(w),V(s.$$.fragment,$),$.forEach(w),f=z(i),a=O(i,"P",{class:!0});var y=Q(a);u=O(y,"SPAN",{});var h=Q(u);_=G(h,c),h.forEach(w),V(d.$$.fragment,y),y.forEach(w),i.forEach(w),this.h()},h(){j(t,"class","flex items-center gap-1"),j(a,"class","flex items-center gap-1"),j(r,"class","flex gap-4")},m(m,i){W(m,r,i),M(r,t),M(t,e),M(e,l),P(s,t,null),M(r,f),M(r,a),M(a,u),M(u,_),P(d,a,null),k=!0},p(m,i){const $={};i&388&&($.defaultVersion=m[2]===m[7]||m[2]===m[8]),i&260&&($.active=m[2]===m[8]),i&4&&($.buildId=m[2]),i&134217988&&($.$$scope={dirty:i,ctx:m}),s.$set($);const D={};i&128&&(D.defaultVersion=!!m[7]),i&384&&(D.active=m[7]===m[8]),i&128&&(D.buildId=m[7]),i&134218112&&(D.$$scope={dirty:i,ctx:m}),d.$set(D)},i(m){k||(g(s.$$.fragment,m),g(d.$$.fragment,m),k=!0)},o(m){b(s.$$.fragment,m),b(d.$$.fragment,m),k=!1},d(m){m&&w(r),T(s),T(d)}}}function Xe(n){let r=S("workers.overall")+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p:ee,d(e){e&&w(t)}}}function Br(n){let r,t=n[2]===n[8]&&Xe();return{c(){t&&t.c(),r=ce()},l(e){t&&t.l(e),r=ce()},m(e,o){t&&t.m(e,o),W(e,r,o)},p(e,o){e[2]===e[8]?t?t.p(e,o):(t=Xe(),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(e){e&&w(r),t&&t.d(e)}}}function Lr(n){let r=S("workers.default")+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p:ee,d(e){e&&w(t)}}}function Ze(n){let r=S("workers.overall")+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p:ee,d(e){e&&w(t)}}}function Ur(n){let r,t=n[7]===n[8]&&Ze();return{c(){t&&t.c(),r=ce()},l(e){t&&t.l(e),r=ce()},m(e,o){t&&t.m(e,o),W(e,r,o)},p(e,o){e[7]===e[8]?t?t.p(e,o):(t=Ze(),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(e){e&&w(r),t&&t.d(e)}}}function Or(n){let r=S("workers.default")+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p:ee,d(e){e&&w(t)}}}function Qr(n){var e;let r=((e=n[1])==null?void 0:e.historyEvents)+"",t;return{c(){t=J(r)},l(o){t=G(o,r)},m(o,l){W(o,t,l)},p(o,l){var s;l&2&&r!==(r=((s=o[1])==null?void 0:s.historyEvents)+"")&&fe(t,r)},d(o){o&&w(t)}}}function jr(n){let r,t;return r=new We({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Qr]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&134217730&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Yr(n){var e,o;let r=((o=(e=n[16])==null?void 0:e.pollers)==null?void 0:o.length)+"",t;return{c(){t=J(r)},l(l){t=G(l,r)},m(l,s){W(l,t,s)},p(l,s){var f,a;s&65536&&r!==(r=((a=(f=l[16])==null?void 0:f.pollers)==null?void 0:a.length)+"")&&fe(t,r)},d(l){l&&w(t)}}}function zr(n){let r,t;return r=new We({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Yr]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&134283264&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Jr(n){let r=n[6].relationshipCount+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p(e,o){o&64&&r!==(r=e[6].relationshipCount+"")&&fe(t,r)},d(e){e&&w(t)}}}function Gr(n){let r,t;return r=new We({props:{type:"information",class:"px-2 py-0",$$slots:{default:[Jr]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&134217792&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function xe(n){let r,t;return r=new pe({props:{label:S("workflows.pending-activities-tab"),id:"pending-activities-tab",href:De(n[14]),active:x(n[5].url.pathname,De(n[14])),$$slots:{default:[Xr]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&16384&&(l.href=De(e[14])),o&16416&&(l.active=x(e[5].url.pathname,De(e[14]))),o&134221826&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function et(n){let r,t;return r=new Ut({props:{name:"canceled"}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Kr(n){var f,a;let r,t,e=((a=(f=n[1])==null?void 0:f.pendingActivities)==null?void 0:a.length)+"",o,l,s=n[12]&&et();return{c(){r=U("div"),s&&s.c(),t=Y(),o=J(e),this.h()},l(u){r=O(u,"DIV",{class:!0});var c=Q(r);s&&s.l(c),t=z(c),o=G(c,e),c.forEach(w),this.h()},h(){j(r,"class","flex items-center gap-1")},m(u,c){W(u,r,c),s&&s.m(r,null),M(r,t),M(r,o),l=!0},p(u,c){var _,d;u[12]?s?c&4096&&g(s,1):(s=et(),s.c(),g(s,1),s.m(r,t)):s&&(re(),b(s,1,1,()=>{s=null}),oe()),(!l||c&2)&&e!==(e=((d=(_=u[1])==null?void 0:_.pendingActivities)==null?void 0:d.length)+"")&&fe(o,e)},i(u){l||(g(s),l=!0)},o(u){b(s),l=!1},d(u){u&&w(r),s&&s.d()}}}function Xr(n){let r,t;return r=new We({props:{type:n[12]?"warning":"information",class:"px-2 py-0",$$slots:{default:[Kr]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&4096&&(l.type=e[12]?"warning":"information"),o&134221826&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Zr(n){let r,t,e,o,l,s,f,a,u,c,_,d,k;r=new pe({props:{label:S("workflows.history-tab"),id:"history-tab",href:ue({...n[14]}),active:x(n[5].url.pathname,ue({...n[14]})),$$slots:{default:[jr]},$$scope:{ctx:n}}}),e=new pe({props:{label:S("workflows.workers-tab"),id:"workers-tab",href:ve(n[14]),active:x(n[5].url.pathname,ve(n[14])),$$slots:{default:[zr]},$$scope:{ctx:n}}}),l=new pe({props:{label:S("workflows.relationships"),id:"relationships-tab",href:Ee(n[14]),active:x(n[5].url.pathname,Ee(n[14])),$$slots:{default:[Gr]},$$scope:{ctx:n}}});let m=!n[18]&&xe(n);return a=new pe({props:{label:S("workflows.call-stack-tab"),id:"call-stack-tab",href:Ie(n[14]),active:x(n[5].url.pathname,Ie(n[14]))}}),c=new pe({props:{label:S("workflows.queries-tab"),id:"queries-tab",href:Ce(n[14]),active:x(n[5].url.pathname,Ce(n[14]))}}),d=new pe({props:{label:S("workflows.metadata-tab"),id:"metadata-tab",href:Ae(n[14]),active:x(n[5].url.pathname,Ae(n[14]))}}),{c(){R(r.$$.fragment),t=Y(),R(e.$$.fragment),o=Y(),R(l.$$.fragment),s=Y(),m&&m.c(),f=Y(),R(a.$$.fragment),u=Y(),R(c.$$.fragment),_=Y(),R(d.$$.fragment)},l(i){V(r.$$.fragment,i),t=z(i),V(e.$$.fragment,i),o=z(i),V(l.$$.fragment,i),s=z(i),m&&m.l(i),f=z(i),V(a.$$.fragment,i),u=z(i),V(c.$$.fragment,i),_=z(i),V(d.$$.fragment,i)},m(i,$){P(r,i,$),W(i,t,$),P(e,i,$),W(i,o,$),P(l,i,$),W(i,s,$),m&&m.m(i,$),W(i,f,$),P(a,i,$),W(i,u,$),P(c,i,$),W(i,_,$),P(d,i,$),k=!0},p(i,$){const D={};$&16384&&(D.href=ue({...i[14]})),$&16416&&(D.active=x(i[5].url.pathname,ue({...i[14]}))),$&134217730&&(D.$$scope={dirty:$,ctx:i}),r.$set(D);const y={};$&16384&&(y.href=ve(i[14])),$&16416&&(y.active=x(i[5].url.pathname,ve(i[14]))),$&134283264&&(y.$$scope={dirty:$,ctx:i}),e.$set(y);const h={};$&16384&&(h.href=Ee(i[14])),$&16416&&(h.active=x(i[5].url.pathname,Ee(i[14]))),$&134217792&&(h.$$scope={dirty:$,ctx:i}),l.$set(h),i[18]?m&&(re(),b(m,1,1,()=>{m=null}),oe()):m?(m.p(i,$),$&262144&&g(m,1)):(m=xe(i),m.c(),g(m,1),m.m(f.parentNode,f));const A={};$&16384&&(A.href=Ie(i[14])),$&16416&&(A.active=x(i[5].url.pathname,Ie(i[14]))),a.$set(A);const q={};$&16384&&(q.href=Ce(i[14])),$&16416&&(q.active=x(i[5].url.pathname,Ce(i[14]))),c.$set(q);const I={};$&16384&&(I.href=Ae(i[14])),$&16416&&(I.active=x(i[5].url.pathname,Ae(i[14]))),d.$set(I)},i(i){k||(g(r.$$.fragment,i),g(e.$$.fragment,i),g(l.$$.fragment,i),g(m),g(a.$$.fragment,i),g(c.$$.fragment,i),g(d.$$.fragment,i),k=!0)},o(i){b(r.$$.fragment,i),b(e.$$.fragment,i),b(l.$$.fragment,i),b(m),b(a.$$.fragment,i),b(c.$$.fragment,i),b(d.$$.fragment,i),k=!1},d(i){i&&(w(t),w(o),w(s),w(f),w(u),w(_)),T(r,i),T(e,i),T(l,i),m&&m.d(i),T(a,i),T(c,i),T(d,i)}}}function xr(n){let r,t;return r=new tr({props:{class:"surface-secondary flex flex-wrap gap-6 p-4",label:"workflow detail",$$slots:{default:[Zr]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&134565986&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function tt(n){let r,t,e,o;return t=new ht({props:{bold:!0,icon:"info",intent:"info",title:S("workflows.cancel-request-sent"),$$slots:{default:[eo]},$$scope:{ctx:n}}}),{c(){r=U("div"),R(t.$$.fragment)},l(l){r=O(l,"DIV",{});var s=Q(r);V(t.$$.fragment,s),s.forEach(w)},m(l,s){W(l,r,s),P(t,r,null),o=!0},p(l,s){const f={};s&134217728&&(f.$$scope={dirty:s,ctx:l}),t.$set(f)},i(l){o||(g(t.$$.fragment,l),l&&(e||st(()=>{e=ft(r,mt,{duration:200,delay:100}),e.start()})),o=!0)},o(l){b(t.$$.fragment,l),o=!1},d(l){l&&w(r),T(t)}}}function eo(n){let r=S("workflows.cancel-request-sent-description")+"",t;return{c(){t=J(r)},l(e){t=G(e,r)},m(e,o){W(e,t,o)},p:ee,d(e){e&&w(t)}}}function rt(n){let r,t,e,o;return t=new ht({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:S("workflows.reset-success-alert-title"),$$slots:{default:[ro]},$$scope:{ctx:n}}}),{c(){r=U("div"),R(t.$$.fragment)},l(l){r=O(l,"DIV",{});var s=Q(r);V(t.$$.fragment,s),s.forEach(w)},m(l,s){W(l,r,s),P(t,r,null),o=!0},p(l,s){const f={};s&134217753&&(f.$$scope={dirty:s,ctx:l}),t.$set(f)},i(l){o||(g(t.$$.fragment,l),l&&(e||st(()=>{e=ft(r,mt,{duration:200,delay:100}),e.start()})),o=!0)},o(l){b(t.$$.fragment,l),o=!1},d(l){l&&w(r),T(t)}}}function to(n){let r;return{c(){r=J("here")},l(t){r=G(t,"here")},m(t,e){W(t,r,e)},d(t){t&&w(r)}}}function ro(n){var l,s,f,a;let r,t,e,o;return t=new Te({props:{href:ue({namespace:n[0],workflow:(s=(l=n[3])==null?void 0:l.workflow)==null?void 0:s.id,run:n[4][(a=(f=n[3])==null?void 0:f.workflow)==null?void 0:a.runId]}),$$slots:{default:[to]},$$scope:{ctx:n}}}),{c(){r=J("You can find the resulting Workflow Execution "),R(t.$$.fragment),e=J(".")},l(u){r=G(u,"You can find the resulting Workflow Execution "),V(t.$$.fragment,u),e=G(u,".")},m(u,c){W(u,r,c),P(t,u,c),W(u,e,c),o=!0},p(u,c){var d,k,m,i;const _={};c&25&&(_.href=ue({namespace:u[0],workflow:(k=(d=u[3])==null?void 0:d.workflow)==null?void 0:k.id,run:u[4][(i=(m=u[3])==null?void 0:m.workflow)==null?void 0:i.runId]})),c&134217728&&(_.$$scope={dirty:c,ctx:u}),t.$set(_)},i(u){o||(g(t.$$.fragment,u),o=!0)},o(u){b(t.$$.fragment,u),o=!1},d(u){u&&(w(r),w(e)),T(t,u)}}}function oo(n){var F,Z;let r,t,e,o,l,s,f,a,u,c,_,d,k,m,i,$,D,y,h,A,q,I,C;e=new Te({props:{href:`${Re({namespace:n[0]})}?${n[17]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Nr]},$$scope:{ctx:n}}});let L=n[15]&&Ge(n);c=new Kt({props:{status:(F=n[1])==null?void 0:F.status,big:!0}}),m=new xt({props:{copyIconTitle:S("common.copy-icon-title"),copySuccessIconTitle:S("common.copy-success-icon-title"),content:(Z=n[1])==null?void 0:Z.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}});let v=n[9]&&Ke(n);y=new qr({props:{isRunning:n[13],cancelInProgress:n[11],workflow:n[1],namespace:n[0]}}),A=new er({props:{$$slots:{default:[xr]},$$scope:{ctx:n}}});let H=n[11]&&tt(n),p=n[10]&&rt(n);return{c(){r=U("div"),t=U("div"),R(e.$$.fragment),o=Y(),L&&L.c(),l=Y(),s=U("header"),f=U("div"),a=U("div"),u=U("div"),R(c.$$.fragment),_=Y(),d=U("div"),k=U("h1"),R(m.$$.fragment),i=Y(),v&&v.c(),$=Y(),D=U("div"),R(y.$$.fragment),h=Y(),R(A.$$.fragment),q=Y(),H&&H.c(),I=Y(),p&&p.c(),this.h()},l(E){r=O(E,"DIV",{class:!0});var N=Q(r);t=O(N,"DIV",{class:!0});var B=Q(t);V(e.$$.fragment,B),o=z(B),L&&L.l(B),B.forEach(w),l=z(N),s=O(N,"HEADER",{class:!0});var X=Q(s);f=O(X,"DIV",{class:!0});var ie=Q(f);a=O(ie,"DIV",{class:!0});var te=Q(a);u=O(te,"DIV",{class:!0});var we=Q(u);V(c.$$.fragment,we),we.forEach(w),_=z(te),d=O(te,"DIV",{class:!0});var me=Q(d);k=O(me,"H1",{"data-testid":!0,class:!0});var $e=Q(k);V(m.$$.fragment,$e),$e.forEach(w),i=z(me),v&&v.l(me),me.forEach(w),te.forEach(w),$=z(ie),D=O(ie,"DIV",{class:!0});var He=Q(D);V(y.$$.fragment,He),He.forEach(w),ie.forEach(w),h=z(X),V(A.$$.fragment,X),q=z(X),H&&H.l(X),I=z(X),p&&p.l(X),X.forEach(w),N.forEach(w),this.h()},h(){j(t,"class","pb-4"),j(u,"class","px-2"),j(k,"data-testid","workflow-id-heading"),j(k,"class","overflow-hidden text-base font-medium lg:text-2xl"),j(d,"class","flex flex-col flex-wrap gap-0"),j(a,"class","flex flex-col items-center gap-4 lg:flex-row"),j(D,"class","px-2"),j(f,"class","flex flex-col items-center justify-between gap-4 lg:flex-row"),j(s,"class","rounded-top flex flex-col gap-0"),j(r,"class","surface-secondary")},m(E,N){W(E,r,N),M(r,t),P(e,t,null),M(t,o),L&&L.m(t,null),M(r,l),M(r,s),M(s,f),M(f,a),M(a,u),P(c,u,null),M(a,_),M(a,d),M(d,k),P(m,k,null),M(d,i),v&&v.m(d,null),M(f,$),M(f,D),P(y,D,null),M(s,h),P(A,s,null),M(s,q),H&&H.m(s,null),M(s,I),p&&p.m(s,null),C=!0},p(E,[N]){var me,$e;const B={};N&131073&&(B.href=`${Re({namespace:E[0]})}?${E[17]}`),N&134250496&&(B.$$scope={dirty:N,ctx:E}),e.$set(B),E[15]?L?(L.p(E,N),N&32768&&g(L,1)):(L=Ge(E),L.c(),g(L,1),L.m(t,null)):L&&(re(),b(L,1,1,()=>{L=null}),oe());const X={};N&2&&(X.status=(me=E[1])==null?void 0:me.status),c.$set(X);const ie={};N&2&&(ie.content=($e=E[1])==null?void 0:$e.id),m.$set(ie),E[9]?v?(v.p(E,N),N&512&&g(v,1)):(v=Ke(E),v.c(),g(v,1),v.m(d,null)):v&&(re(),b(v,1,1,()=>{v=null}),oe());const te={};N&8192&&(te.isRunning=E[13]),N&2048&&(te.cancelInProgress=E[11]),N&2&&(te.workflow=E[1]),N&1&&(te.namespace=E[0]),y.$set(te);const we={};N&134565986&&(we.$$scope={dirty:N,ctx:E}),A.$set(we),E[11]?H?(H.p(E,N),N&2048&&g(H,1)):(H=tt(E),H.c(),g(H,1),H.m(s,I)):H&&(re(),b(H,1,1,()=>{H=null}),oe()),E[10]?p?(p.p(E,N),N&1024&&g(p,1)):(p=rt(E),p.c(),g(p,1),p.m(s,null)):p&&(re(),b(p,1,1,()=>{p=null}),oe())},i(E){C||(g(e.$$.fragment,E),g(L),g(c.$$.fragment,E),g(m.$$.fragment,E),g(v),g(y.$$.fragment,E),g(A.$$.fragment,E),g(H),g(p),C=!0)},o(E){b(e.$$.fragment,E),b(L),b(c.$$.fragment,E),b(m.$$.fragment,E),b(v),b(y.$$.fragment,E),b(A.$$.fragment,E),b(H),b(p),C=!1},d(E){E&&w(r),T(e),L&&L.d(),T(c),T(m),v&&v.d(),T(y),T(A),H&&H.d(),p&&p.d()}}}function no(n,r,t){let e,o,l,s,f,a,u,c,_,d,k,m,i,$,D,y,h,A,q,I,C;K(n,rr,E=>t(25,D=E)),K(n,Se,E=>t(26,y=E)),K(n,be,E=>t(3,h=E)),K(n,kt,E=>t(4,A=E)),K(n,Pe,E=>t(5,q=E)),K(n,it,E=>t(17,I=E)),K(n,ut,E=>t(18,C=E));var L,v,H,p,F;let{namespace:Z}=r;return n.$$set=E=>{"namespace"in E&&t(0,Z=E.namespace)},n.$$.update=()=>{n.$$.dirty&8&&t(1,{workflow:e,workers:o,compatibility:l}=h,e,(t(16,o),t(3,h)),(t(24,l),t(3,h))),n.$$.dirty&32&&t(15,s=q.params.id),n.$$.dirty&3&&t(14,f={namespace:Z,workflow:e==null?void 0:e.id,run:e==null?void 0:e.runId}),n.$$.dirty&524296&&t(13,a=t(19,L=h==null?void 0:h.workflow)===null||L===void 0?void 0:L.isRunning),n.$$.dirty&1048584&&t(12,u=["Terminated","TimedOut","Canceled"].includes(t(20,v=h.workflow)===null||v===void 0?void 0:v.status)),n.$$.dirty&69206024&&t(11,c=Fr(t(21,H=h==null?void 0:h.workflow)===null||H===void 0?void 0:H.status,y)),n.$$.dirty&4194328&&t(10,_=nr(A,t(22,p=h==null?void 0:h.workflow)===null||p===void 0?void 0:p.runId)),n.$$.dirty&8388610&&t(9,d=t(23,F=e==null?void 0:e.mostRecentWorkerVersionStamp)===null||F===void 0?void 0:F.useVersioning),n.$$.dirty&2&&t(2,k=lr(e)),n.$$.dirty&16777216&&t(8,m=sr(l)),n.$$.dirty&16777220&&t(7,i=ar(l,k)),n.$$.dirty&100663298&&t(6,$=or(e,y,D))},[Z,e,k,h,A,q,$,i,m,d,_,c,u,a,f,s,o,I,C,L,v,H,p,F,l,D,y]}class vt extends de{constructor(r){super(),ge(this,r,no,oo,_e,{namespace:0})}}async function lo({activity:n,namespace:r,settings:t,accessToken:e},{convertWithCodec:o=fr,decodeAttributes:l=ir}={}){const s=await o({attributes:n,namespace:r,settings:t,accessToken:e});return l(s)}const so=async({activity:n,namespace:r,settings:t,accessToken:e})=>await lo({activity:n,namespace:r,settings:t,accessToken:e}),ot=async(n,r,t,e)=>{const o=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of o){const f=await so({activity:s,namespace:r,settings:t,accessToken:e});l.push(f)}return l};function ao(n){let r,t,e,o;t=new vt({props:{namespace:n[0].params.namespace}});const l=n[10].default,s=ye(l,n,n[11],null);return{c(){r=U("div"),R(t.$$.fragment),e=Y(),s&&s.c(),this.h()},l(f){r=O(f,"DIV",{class:!0});var a=Q(r);V(t.$$.fragment,a),a.forEach(w),e=z(f),s&&s.l(f),this.h()},h(){j(r,"class","px-8 pt-24 md:pt-20")},m(f,a){W(f,r,a),P(t,r,null),W(f,e,a),s&&s.m(f,a),o=!0},p(f,a){const u={};a&1&&(u.namespace=f[0].params.namespace),t.$set(u),s&&s.p&&(!o||a&2048)&&qe(s,l,f,f[11],o?Ne(l,f[11],a,null):Fe(f[11]),null)},i(f){o||(g(t.$$.fragment,f),g(s,f),o=!0)},o(f){b(t.$$.fragment,f),b(s,f),o=!1},d(f){f&&(w(r),w(e)),T(t),s&&s.d(f)}}}function fo(n){let r,t;return r=new ct({props:{class:"pt-24"}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p:ee,i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function io(n){let r,t;return r=new bt({props:{error:n[1]}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&2&&(l.error=e[1]),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function uo(n){let r,t,e,o,l;const s=[io,fo,ao],f=[];function a(u,c){return u[1]?0:u[2].workflow?2:1}return t=a(n),e=f[t]=s[t](n),{c(){r=U("div"),e.c(),this.h()},l(u){r=O(u,"DIV",{class:!0});var c=Q(r);e.l(c),c.forEach(w),this.h()},h(){j(r,"class",o="surface-secondary absolute bottom-0 left-0 right-0 "+(n[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0")},m(u,c){W(u,r,c),f[t].m(r,null),l=!0},p(u,c){let _=t;t=a(u),t===_?f[t].p(u,c):(re(),b(f[_],1,1,()=>{f[_]=null}),oe(),e=f[t],e?e.p(u,c):(e=f[t]=s[t](u),e.c()),g(e,1),e.m(r,null)),(!l||c&8&&o!==(o="surface-secondary absolute bottom-0 left-0 right-0 "+(u[3]?"top-[540px]":"top-0")+" } flex h-full flex-col gap-0"))&&j(r,"class",o)},i(u){l||(g(e),l=!0)},o(u){b(e),l=!1},d(u){u&&w(r),f[t].d()}}}function co(n){let r,t,e;r=new vt({props:{namespace:n[0].params.namespace}});const o=n[10].default,l=ye(o,n,n[11],null);return{c(){R(r.$$.fragment),t=Y(),l&&l.c()},l(s){V(r.$$.fragment,s),t=z(s),l&&l.l(s)},m(s,f){P(r,s,f),W(s,t,f),l&&l.m(s,f),e=!0},p(s,f){const a={};f&1&&(a.namespace=s[0].params.namespace),r.$set(a),l&&l.p&&(!e||f&2048)&&qe(l,o,s,s[11],e?Ne(o,s[11],f,null):Fe(s[11]),null)},i(s){e||(g(r.$$.fragment,s),g(l,s),e=!0)},o(s){b(r.$$.fragment,s),b(l,s),e=!1},d(s){s&&w(t),T(r,s),l&&l.d(s)}}}function mo(n){let r,t;return r=new ct({}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p:ee,i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function po(n){let r,t;return r=new bt({props:{error:n[1]}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,o){const l={};o&2&&(l.error=e[1]),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function _o(n){let r,t,e,o;const l=[po,mo,co],s=[];function f(a,u){return a[1]?0:a[2].workflow?2:1}return t=f(n),e=s[t]=l[t](n),{c(){r=U("div"),e.c(),this.h()},l(a){r=O(a,"DIV",{class:!0,slot:!0});var u=Q(r);e.l(u),u.forEach(w),this.h()},h(){j(r,"class","flex h-full flex-col gap-0"),j(r,"slot","fallback")},m(a,u){W(a,r,u),s[t].m(r,null),o=!0},p(a,u){let c=t;t=f(a),t===c?s[t].p(a,u):(re(),b(s[c],1,1,()=>{s[c]=null}),oe(),e=s[t],e?e.p(a,u):(e=s[t]=l[t](a),e.c()),g(e,1),e.m(r,null))},i(a){o||(g(e),o=!0)},o(a){b(e),o=!1},d(a){a&&w(r),s[t].d()}}}function go(n){let r,t;return r=new Rt({props:{$$slots:{fallback:[_o],default:[uo]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,[o]){const l={};o&2063&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function wo(n,r,t){let e,o,l,s,f,a,u,c,_,d,k,m;K(n,Ue,v=>t(7,s=v)),K(n,Pe,v=>t(0,f=v)),K(n,he,v=>t(8,a=v)),K(n,ut,v=>t(9,u=v)),K(n,Me,v=>t(13,c=v)),K(n,be,v=>t(2,_=v)),K(n,Se,v=>t(14,d=v)),K(n,cr,v=>t(15,k=v)),K(n,At,v=>t(3,m=v));let{$$slots:i={},$$scope:$}=r,D,y;const h=async(v,H)=>{var p;if(!((p=v==null?void 0:v.mostRecentWorkerVersionStamp)===null||p===void 0)&&p.useVersioning)return await Zt({queue:H,namespace:e})},A=async(v,H,p,F,Z)=>{const{settings:E}=f.data,{workflow:N,error:B}=await Be({namespace:v,workflowId:H,runId:p});if(B){t(1,D=B);return}const{taskQueue:X}=N,ie=await Xt({queue:X,namespace:v}),te=await h(N,X);N.pendingActivities=await ot(N,v,E,k==null?void 0:k.accessToken),ne(be,_={workflow:N,workers:ie,compatibility:te},_),y=new AbortController,ne(Se,d=await ur({namespace:v,workflowId:H,runId:p,sort:Z?"ascending":F,signal:y.signal,historySize:N.historyEvents}),d)},q=async v=>{var H;if(v&&(!((H=_==null?void 0:_.workflow)===null||H===void 0)&&H.isRunning)){const{settings:p}=f.data,{workflow:F,error:Z}=await Be({namespace:e,workflowId:o,runId:l});if(Z){t(1,D=Z);return}F.pendingActivities=await ot(F,e,p,k==null?void 0:k.accessToken),ne(be,_={..._,workflow:F},_)}},I=()=>{ne(Se,d=[],d),y&&y.abort()},C=()=>{ne(Me,c=null,c),ne(be,_=Jt,_),t(1,D=void 0),I()},L=()=>{ne(Me,c=null,c),I()};return Ct(()=>{const v=f.url.searchParams.get("sort");v&&ne(Ue,s=v,s)}),at(()=>{C()}),n.$$set=v=>{"$$scope"in v&&t(11,$=v.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(6,{namespace:e,workflow:o,run:l}=f.params,e,(t(5,o),t(0,f)),(t(4,l),t(0,f))),n.$$.dirty&16&&C(),n.$$.dirty&640&&L(),n.$$.dirty&752&&A(e,o,l,s,u),n.$$.dirty&256&&q(a)},[f,D,_,m,l,o,e,s,a,u,i,$]}class $o extends de{constructor(r){super(),ge(this,r,wo,go,_e,{})}}const Et={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},ho=pt(Et),bo=()=>{ho.set(Et)};function ko(n){let r;const t=n[0].default,e=ye(t,n,n[1],null);return{c(){e&&e.c()},l(o){e&&e.l(o)},m(o,l){e&&e.m(o,l),r=!0},p(o,l){e&&e.p&&(!r||l&2)&&qe(e,t,o,o[1],r?Ne(t,o[1],l,null):Fe(o[1]),null)},i(o){r||(g(e,o),r=!0)},o(o){b(e,o),r=!1},d(o){e&&e.d(o)}}}function vo(n){let r,t;return r=new $o({props:{$$slots:{default:[ko]},$$scope:{ctx:n}}}),{c(){R(r.$$.fragment)},l(e){V(r.$$.fragment,e)},m(e,o){P(r,e,o),t=!0},p(e,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:e}),r.$set(l)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function Eo(n,r,t){let{$$slots:e={},$$scope:o}=r;return at(()=>{bo()}),n.$$set=l=>{"$$scope"in l&&t(1,o=l.$$scope)},[e,o]}class hn extends de{constructor(r){super(),ge(this,r,Eo,vo,_e,{})}}export{hn as component};
