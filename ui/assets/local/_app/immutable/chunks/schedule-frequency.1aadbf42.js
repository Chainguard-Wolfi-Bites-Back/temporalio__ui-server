import{s as g}from"./parse-with-big-int.bccd89af.js";import{r as m,a as p}from"./route-for-api.ac3cfefa.js";import{v as b}from"./toaster.7027624d.js";import{S as H,b as j,a as B,m as S,p as $,q as _,k as h,u as v,f as y,n as O,N as I,O as C,w as E,c as U,x as D,d as V,L as M,y as z}from"./index.c37b9eda.js";import{g as G,w as F,m as N}from"./calendar.81d1e381.js";const dt=async(s,t=fetch)=>{let n="";const o=l=>{var a;return n=((a=l==null?void 0:l.body)==null?void 0:a.message)??`Error fetching schedules: ${l.status}: ${l.statusText}`},e=m("schedules",{namespace:s}),{schedules:i,nextPageToken:r}=await p(e,{params:{},onError:o,request:t})??{schedules:[],nextPageToken:""};return{schedules:i,nextPageToken:String(r),error:n}};async function mt(s,t=fetch){const n=m("schedule",s);return p(n,{request:t})}async function pt(s,t=fetch){const n=m("schedule.delete",s);return p(n,{request:t,options:{method:"DELETE"}})}async function yt({namespace:s,body:t}){let n="";const o=r=>{var l;return n=((l=r==null?void 0:r.body)==null?void 0:l.message)??`Error creating schedule: ${r.status}: ${r.statusText}`},e=m("schedules",{namespace:s}),{conflictToken:i}=await p(e,{options:{method:"POST",body:g({request_id:b(),...t})},onError:o});return{conflictToken:i,error:n}}async function vt({namespace:s,scheduleId:t,body:n}){let o="";const e=r=>{var l;return o=((l=r==null?void 0:r.body)==null?void 0:l.message)??`Error editing schedule: ${r.status}: ${r.statusText}`},i=m("schedule",{namespace:s,scheduleId:t});return await p(i,{options:{method:"POST",body:g({request_id:b(),...n})},onError:e}),{error:o}}async function St({namespace:s,scheduleId:t,reason:n}){const o={patch:{pause:n}},e=m("schedule",{namespace:s,scheduleId:t});return await p(e,{options:{method:"PATCH",body:g({...o,request_id:b()})},onError:i=>console.error(i)})}async function $t({namespace:s,scheduleId:t,reason:n}){const o={patch:{unpause:n}},e=m("schedule",{namespace:s,scheduleId:t});return await p(e,{options:{method:"PATCH",body:g({...o,request_id:b()})}})}const _t=({preset:s,month:t,dayOfMonth:n,dayOfWeek:o,hour:e,minute:i})=>{let r="";const l=!e||!parseInt(e)||parseInt(e)<12?"am":"pm",c=`${(!e||!parseInt(e)?"12":parseInt(e)<=12?e:(parseInt(e)-12).toString()).padStart(2,"0")}:${i?i.padStart(2,"0"):"00"}${l}`;if(s==="week"){const u=G.find(f=>f.value===o);u?r=`${u.label} at ${c}`:r=`${o.split(",").map(x=>F.find(w=>w.value===x).label).join(", ")} at ${c}`}else if(s==="month")if(t==="*")r=`Every ${n} of the month at ${c}`;else{const f=t.split(",").map(d=>N.find(W=>W.value===d).label).join(", ");r=`Every ${n} of ${f} at ${c}`}return r},L=(s="",t=!1)=>{let n="";if(!s)return n;const o=parseInt(s.slice(0,-1)),e=Math.floor(o/(60*60*24));let i=o-(e>0?e*60*60*24:0);const r=Math.floor(i/(60*60));i=i-(r>0?r*60*60:0);const l=Math.floor(i/60),a=l>0?i-l*60:i,c=`${r?r.toString().padStart(2,"0"):"00"}hrs`,u=`${l?l.toString().padStart(2,"0"):"00"}min`,f=`${a?a.toString().padStart(2,"0"):"00"}sec`,d=t?"Offset":"Every";return e?n=`${d} ${e}days:${c}:${u}:${f}`:r?n=`${d} ${c}:${u}:${f}`:l?n=`${d} ${u}:${f}`:a&&(n=`${d} ${f}`),n},q=s=>{var t,n,o;return((t=s.dayOfMonth)==null?void 0:t.length)===1&&((n=s.dayOfMonth[0])==null?void 0:n.start)===1&&((o=s.dayOfMonth[0])==null?void 0:o.end)===31},P=s=>{var t,n,o;return((t=s.dayOfWeek)==null?void 0:t.length)===1&&((n=s.dayOfWeek[0])==null?void 0:n.start)===0&&((o=s.dayOfWeek[0])==null?void 0:o.end)===6},J=s=>{var t,n;return(s==null?void 0:s.month.length)===1&&((t=s==null?void 0:s.month[0])==null?void 0:t.start)===1&&((n=s==null?void 0:s.month[0])==null?void 0:n.end)===12},K=s=>P(s)&&q(s),Q=s=>!P(s)&&q(s),X=s=>P(s)&&!q(s),T=s=>{const t=F.find(n=>s===0?n.value==="7":n.value===s.toString());return t==null?void 0:t.label},Y=s=>{const t=s.dayOfWeek;let n="";if(t.length)for(let o=0;o<t.length;o++){const e=t[o];if((e==null?void 0:e.start)===(e==null?void 0:e.end)){const i=T(e.start);n?n+=`, ${i}`:n=i}else{const i=T(e.start),r=T(e.end);n?n+=`, ${i} - ${r}`:n=`${i} - ${r}`}}return n},Z=s=>{const t=s.dayOfMonth;let n="";if(t.length)for(let o=0;o<t.length;o++){const e=t[o];(e==null?void 0:e.start)===(e==null?void 0:e.end)&&(n?n+=`, ${e==null?void 0:e.start}`:n=e==null?void 0:e.start.toString())}return n},k=s=>{const t=N.find(n=>n.value===s.toString());return t==null?void 0:t.label},R=s=>{const t=s.month;let n="";if(J(s))n="the month";else if(t!=null&&t.length)for(let o=0;o<t.length;o++){const e=t[o];if((e==null?void 0:e.start)===(e==null?void 0:e.end)){const i=k(e.start);n?n+=`, ${i}`:n=i}else{const i=k(e.start),r=k(e.end);n?n+=`, ${i} - ${r}`:n=`${i} - ${r}`}}return n},tt=s=>{const t=s.hour;let n=12,o="am";if(t!=null&&t.length){const e=t[0];(e==null?void 0:e.start)===(e==null?void 0:e.end)&&(e.start<12?(n=e.start===0?12:e.start,o="am"):e.start===12?(n=e.start,o="pm"):(n=e.start-12,o="pm"))}return{hour:n.toString().padStart(2,"0"),amOrpm:o}},et=s=>{const t=s.minute;let n=0;if(t!=null&&t.length){const o=t[0];(o==null?void 0:o.start)===(o==null?void 0:o.end)&&(n=o.start)}return n.toString().padStart(2,"0")},st=s=>{const{hour:t,amOrpm:n}=tt(s),o=et(s);if(t)return`${t}:${o}${n} UTC`},nt=s=>{const t=st(s);return K(s)?`Daily at ${t}`:Q(s)?`${Y(s)} at ${t}`:X(s)?`Every ${Z(s)} of ${R(s)} at ${t}`:""},A=s=>{const t=s==null?void 0:s.comment;return t||nt(s)};function ot(s){let t,n=L(s[1])+"",o,e,i,r=L(s[2],!0)+"",l;return{c(){t=S("p"),o=E(n),e=U(),i=S("p"),l=E(r),this.h()},l(a){t=$(a,"P",{"data-testid":!0});var c=_(t);o=D(c,n),c.forEach(h),e=V(a),i=$(a,"P",{"data-testid":!0});var u=_(i);l=D(u,r),u.forEach(h),this.h()},h(){v(t,"data-testid","schedule-interval-frequency"),v(i,"data-testid","schedule-phase-frequency")},m(a,c){y(a,t,c),M(t,o),y(a,e,c),y(a,i,c),M(i,l)},p:O,d(a){a&&h(t),a&&h(e),a&&h(i)}}}function it(s){let t,n=A(s[0])+"",o;return{c(){t=S("p"),o=E(n),this.h()},l(e){t=$(e,"P",{"data-testid":!0});var i=_(t);o=D(i,n),i.forEach(h),this.h()},h(){v(t,"data-testid","schedule-calendar-frequency")},m(e,i){y(e,t,i),M(t,o)},p(e,i){i&1&&n!==(n=A(e[0])+"")&&z(o,n)},d(e){e&&h(t)}}}function rt(s){let t,n;function o(r,l){return r[0]?it:ot}let e=o(s),i=e(s);return{c(){t=S("div"),i.c(),this.h()},l(r){t=$(r,"DIV",{class:!0});var l=_(t);i.l(l),l.forEach(h),this.h()},h(){v(t,"class",n="flex flex-col "+s[3].class)},m(r,l){y(r,t,l),i.m(t,null)},p(r,[l]){e===(e=o(r))&&i?i.p(r,l):(i.d(1),i=e(r),i&&(i.c(),i.m(t,null))),l&8&&n!==(n="flex flex-col "+r[3].class)&&v(t,"class",n)},i:O,o:O,d(r){r&&h(t),i.d()}}}function lt(s,t,n){let{calendar:o=void 0}=t,{interval:e=void 0}=t;const i=e==null?void 0:e.interval,r=e==null?void 0:e.phase;return s.$$set=l=>{n(3,t=I(I({},t),C(l))),"calendar"in l&&n(0,o=l.calendar),"interval"in l&&n(4,e=l.interval)},t=C(t),[o,i,r,t,e]}class gt extends H{constructor(t){super(),j(this,t,lt,rt,B,{calendar:0,interval:4})}}export{gt as S,mt as a,_t as b,yt as c,pt as d,vt as e,dt as f,St as p,$t as u};
