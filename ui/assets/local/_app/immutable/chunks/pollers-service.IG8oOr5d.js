import{s as D,e as I,b as Q,d as w,g,j as b,k as v,t as R,f as W,l as k,n as K,p as E,a as A,h as S,u as C,q as O,r as V}from"./scheduler.78ThUSKQ.js";import{S as M,i as U,g as z,b as m,e as G,t as p,c as N,a as Y,m as j,d as q}from"./index.G2Max4V_.js";import{I as B}from"./icon.63Khk0lC.js";import{t as F}from"./tw-merge.NbP7EmZe.js";import{t as T}from"./translate.HrioCK44.js";import{r as y,a as h}from"./route-for-api.0T3DYJvu.js";const H=r=>({}),L=r=>({}),J=r=>({}),P=r=>({});function X(r){let e,s,t,a;return s=new B({props:{name:"merge"}}),{c(){e=I("span"),N(s.$$.fragment),t=R(r[2]),this.h()},l(i){e=Q(i,"SPAN",{class:!0});var o=w(e);Y(s.$$.fragment,o),t=W(o,r[2]),o.forEach(g),this.h()},h(){b(e,"class","flex items-center gap-1 rounded border px-1 text-sm")},m(i,o){v(i,e,o),j(s,e,null),k(e,t),a=!0},p(i,o){(!a||o&4)&&K(t,i[2])},i(i){a||(p(s.$$.fragment,i),a=!0)},o(i){m(s.$$.fragment,i),a=!1},d(i){i&&g(e),q(s)}}}function Z(r){let e,s,t,a,i,o,c;s=new B({props:{name:"merge"}});const n=r[4]["overall-default-worker"],l=E(n,r,r[3],P),_=r[4]["default-worker"],f=E(_,r,r[3],L);return{c(){e=I("span"),N(s.$$.fragment),t=R(r[2]),a=A(),l&&l.c(),i=A(),f&&f.c(),this.h()},l(u){e=Q(u,"SPAN",{class:!0});var d=w(e);Y(s.$$.fragment,d),t=W(d,r[2]),a=S(d),l&&l.l(d),i=S(d),f&&f.l(d),d.forEach(g),this.h()},h(){b(e,"class",o=F("flex items-center gap-1 rounded border px-1 text-sm",r[1]&&"border-green-100 bg-green-100 text-green-800"))},m(u,d){v(u,e,d),j(s,e,null),k(e,t),k(e,a),l&&l.m(e,null),k(e,i),f&&f.m(e,null),c=!0},p(u,d){(!c||d&4)&&K(t,u[2]),l&&l.p&&(!c||d&8)&&C(l,n,u,u[3],c?V(n,u[3],d,J):O(u[3]),P),f&&f.p&&(!c||d&8)&&C(f,_,u,u[3],c?V(_,u[3],d,H):O(u[3]),L),(!c||d&2&&o!==(o=F("flex items-center gap-1 rounded border px-1 text-sm",u[1]&&"border-green-100 bg-green-100 text-green-800")))&&b(e,"class",o)},i(u){c||(p(s.$$.fragment,u),p(l,u),p(f,u),c=!0)},o(u){m(s.$$.fragment,u),m(l,u),m(f,u),c=!1},d(u){u&&g(e),q(s),l&&l.d(u),f&&f.d(u)}}}function $(r){let e,s,t,a;const i=[Z,X],o=[];function c(n,l){return n[0]&&n[2]?0:n[2]?1:-1}return~(s=c(r))&&(t=o[s]=i[s](r)),{c(){e=I("p"),t&&t.c(),this.h()},l(n){e=Q(n,"P",{class:!0});var l=w(e);t&&t.l(l),l.forEach(g),this.h()},h(){b(e,"class","flex select-all gap-2 font-mono")},m(n,l){v(n,e,l),~s&&o[s].m(e,null),a=!0},p(n,[l]){let _=s;s=c(n),s===_?~s&&o[s].p(n,l):(t&&(z(),m(o[_],1,1,()=>{o[_]=null}),G()),~s?(t=o[s],t?t.p(n,l):(t=o[s]=i[s](n),t.c()),p(t,1),t.m(e,null)):t=null)},i(n){a||(p(t),a=!0)},o(n){m(t),a=!1},d(n){n&&g(e),~s&&o[s].d()}}}function x(r,e,s){let{$$slots:t={},$$scope:a}=e,{defaultVersion:i=!1}=e,{active:o=!1}=e,{buildId:c}=e;return r.$$set=n=>{"defaultVersion"in n&&s(0,i=n.defaultVersion),"active"in n&&s(1,o=n.active),"buildId"in n&&s(2,c=n.buildId),"$$scope"in n&&s(3,a=n.$$scope)},[i,o,c,a,t]}class le extends M{constructor(e){super(),U(this,e,x,$,D,{defaultVersion:0,active:1,buildId:2})}}async function ue(r,e=fetch){var n;const s=y("task-queue",r),t=await h(s,{request:e,params:{taskQueueType:"1"}}),a=await h(s,{request:e,params:{taskQueueType:"2"}});t!=null&&t.pollers||(t.pollers=[]),a!=null&&a.pollers||(a.pollers=[]),a.pollers.forEach(l=>{l.taskQueueTypes=["ACTIVITY"]}),t.pollers.forEach(l=>{l.taskQueueTypes=["WORKFLOW"]});const i=l=>(_,f)=>{const u=_[f.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return _[f.identity]={lastAccessTime:!u.lastAccessTime||u.lastAccessTime<f.lastAccessTime?f.lastAccessTime:u.lastAccessTime,taskQueueTypes:u.taskQueueTypes.concat([l])},_};a.pollers.filter(l=>t.pollers.some(_=>{if(l.identity===_.identity)return l.taskQueueTypes=[..._.taskQueueTypes,...l.taskQueueTypes],l})),(n=a.pollers)==null||n.reduce(i("ACTIVITY"),t.pollers.reduce(i("WORKFLOW"),{}));const o=a.pollers.length?a.pollers:t.pollers,c=a.pollers.length?a.taskQueueStatus:t.taskQueueStatus;return{pollers:o,taskQueueStatus:c}}async function ie(r,e=fetch){const s=y("task-queue.rules",r);return h(s,{request:e,notifyOnError:!1,onError:t=>{}})}async function ce(r,e=fetch){const s=y("task-queue.compatibility",r);return h(s,{request:e,notifyOnError:!1,onError:t=>{console.error(t)}})}async function fe(r,e=fetch){const{namespace:s,buildIds:t,taskQueue:a}=r,i=y("worker-task-reachability",{namespace:s}),o=new URLSearchParams;if(t.length)for(const c of t)o.append("buildIds",c);else o.append("buildIds",""),o.append("taskQueues",a);return await h(i,{request:e,params:o,onError:c=>(console.error(c),{buildIdReachability:[]})})}function ee(r){return!r||!r.length?T("workers.ready-to-be-retired"):r.length===1&&r.includes("CLOSED")?T("common.maybe"):T("common.no")}function de(r,e,s){var o,c;const t=(o=r==null?void 0:r.buildIdReachability)==null?void 0:o.find(n=>n.buildId===s);if(!t)return"";const a=(c=t==null?void 0:t.taskQueueReachability)==null?void 0:c.find(n=>(n==null?void 0:n.taskQueue)===e);if(!a)return"";const i=a==null?void 0:a.reachability;return ee(i)}export{le as C,ce as a,fe as b,de as c,ie as d,ue as g};
