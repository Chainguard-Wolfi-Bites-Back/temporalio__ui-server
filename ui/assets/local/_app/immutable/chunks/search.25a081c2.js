import{S as Ee,b as Ie,a as we,e as Ne,f as b,j as g,z as ge,g as q,h as ve,k as c,K as he,m as E,c as P,p as I,q as S,d as D,u as y,L as k,Q as N,a1 as pe,ag as re,n as oe,r as Ve,P as Re,i as Je,C as U,D as Q,E as A,F as M,w as C,x as H,y as le,a5 as Xe,G as Ye,H as Ze,I as $e,J as xe,V as je}from"./index.6779d4e2.js";import{g as et}from"./navigation.4f7f4bf5.js";import{p as tt}from"./stores.7471b054.js";import{W as lt}from"./workflow-status.29e9d95a.js";import{I as Ge}from"./icon.b599579e.js";import{c as st}from"./copy-to-clipboard.cf09df45.js";import{L as rt}from"./link.0c375d98.js";import{T as ot}from"./table-row.e455010e.js";import{t as G}from"./translate.ba73e37c.js";import{t as at,r as nt,b as Z}from"./format-date.f07a9180.js";import{t as ft,w as Be}from"./workflows.4b486543.js";import{v as it,w as ut,x as ct,y as Oe}from"./format-time.d81f945a.js";import{e as Ue}from"./workflow-service.842f1dac.js";import{k as mt}from"./is.5f877332.js";import{g as _t}from"./route-for.33e21fab.js";import{u as ht}from"./update-query-parameters.14f4f9e1.js";import{T as pt,a as wt}from"./table-header-row.5433617e.js";import{B as dt}from"./button.78fc7814.js";import{I as bt}from"./input.002a0441.js";function Qe(r){let e,l,t,s,o,i,a=r[1]&&Ae(r),n=r[2]&&ze(r);return{c(){e=E("div"),a&&a.c(),l=P(),n&&n.c(),this.h()},l(u){e=I(u,"DIV",{class:!0});var m=S(e);a&&a.l(m),l=D(m),n&&n.l(m),m.forEach(c),this.h()},h(){y(e,"class",t="copy-or-filter "+r[9]+" svelte-1f7279h")},m(u,m){b(u,e,m),a&&a.m(e,null),k(e,l),n&&n.m(e,null),s=!0,o||(i=[N(e,"click",pe(re(oe))),N(e,"keyup",pe(re(oe)))],o=!0)},p(u,m){u[1]?a?(a.p(u,m),m&2&&g(a,1)):(a=Ae(u),a.c(),g(a,1),a.m(e,l)):a&&(ge(),q(a,1,1,()=>{a=null}),ve()),u[2]?n?(n.p(u,m),m&4&&g(n,1)):(n=ze(u),n.c(),g(n,1),n.m(e,null)):n&&(ge(),q(n,1,1,()=>{n=null}),ve()),(!s||m&512&&t!==(t="copy-or-filter "+u[9]+" svelte-1f7279h"))&&y(e,"class",t)},i(u){s||(g(a),g(n),s=!0)},o(u){q(a),q(n),s=!1},d(u){u&&c(e),a&&a.d(),n&&n.d(),o=!1,Ve(i)}}}function Ae(r){let e,l=r[5],t,s,o,i=Me(r);return{c(){e=E("button"),i.c(),this.h()},l(a){e=I(a,"BUTTON",{class:!0});var n=S(e);i.l(n),n.forEach(c),this.h()},h(){y(e,"class","copy-or-filter-button svelte-1f7279h"),Re(e,"filtered",r[5])},m(a,n){b(a,e,n),i.m(e,null),t=!0,s||(o=N(e,"click",pe(re(function(){Je(r[4])&&r[4].apply(this,arguments)}))),s=!0)},p(a,n){r=a,n&32&&we(l,l=r[5])?(ge(),q(i,1,1,oe),ve(),i=Me(r),i.c(),g(i,1),i.m(e,null)):i.p(r,n),(!t||n&32)&&Re(e,"filtered",r[5])},i(a){t||(g(i),t=!0)},o(a){q(i),t=!1},d(a){a&&c(e),i.d(a),s=!1,o()}}}function Me(r){let e,l;return e=new Ge({props:{title:r[8],name:"filter"}}),{c(){U(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,s){A(e,t,s),l=!0},p(t,s){const o={};s&256&&(o.title=t[8]),e.$set(o)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function ze(r){let e,l,t,s,o;return l=new Ge({props:{title:r[10]?r[7]:r[6],name:r[10]?"checkmark":"copy",stroke:"#000"}}),{c(){e=E("button"),U(l.$$.fragment),this.h()},l(i){e=I(i,"BUTTON",{class:!0});var a=S(e);Q(l.$$.fragment,a),a.forEach(c),this.h()},h(){y(e,"class","copy-or-filter-button svelte-1f7279h")},m(i,a){b(i,e,a),A(l,e,null),t=!0,s||(o=N(e,"click",pe(re(r[13]))),s=!0)},p(i,a){const n={};a&1216&&(n.title=i[10]?i[7]:i[6]),a&1024&&(n.name=i[10]?"checkmark":"copy"),l.$set(n)},i(i){t||(g(l.$$.fragment,i),t=!0)},o(i){q(l.$$.fragment,i),t=!1},d(i){i&&c(e),M(l),s=!1,o()}}}function kt(r){let e,l,t=r[0]&&Qe(r);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,o){t&&t.m(s,o),b(s,e,o),l=!0},p(s,[o]){s[0]?t?(t.p(s,o),o&1&&g(t,1)):(t=Qe(s),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ge(),q(t,1,1,()=>{t=null}),ve())},i(s){l||(g(t),l=!0)},o(s){q(t),l=!1},d(s){t&&t.d(s),s&&c(e)}}}function Tt(r,e,l){let t,{show:s=!1}=e,{filterable:o=!0}=e,{copyable:i=!0}=e,{content:a}=e,{onFilter:n=oe}=e,{filtered:u=!1}=e,{copyIconTitle:m}=e,{copySuccessIconTitle:h}=e,{filterIconTitle:L}=e,{class:w=""}=e;const{copy:W,copied:j}=st();he(r,j,p=>l(10,t=p));const F=p=>W(p,a);return r.$$set=p=>{"show"in p&&l(0,s=p.show),"filterable"in p&&l(1,o=p.filterable),"copyable"in p&&l(2,i=p.copyable),"content"in p&&l(3,a=p.content),"onFilter"in p&&l(4,n=p.onFilter),"filtered"in p&&l(5,u=p.filtered),"copyIconTitle"in p&&l(6,m=p.copyIconTitle),"copySuccessIconTitle"in p&&l(7,h=p.copySuccessIconTitle),"filterIconTitle"in p&&l(8,L=p.filterIconTitle),"class"in p&&l(9,w=p.class)},[s,o,i,a,n,u,m,h,L,w,t,W,j,F]}class Ke extends Ee{constructor(e){super(),Ie(this,e,Tt,kt,we,{show:0,filterable:1,copyable:2,content:3,onFilter:4,filtered:5,copyIconTitle:6,copySuccessIconTitle:7,filterIconTitle:8,class:9})}}const Se=r=>e=>e.toLowerCase()===r.toLowerCase(),ye=(r,e)=>r[e+2],yt=r=>{if(r){for(const e of ct)if(r[e])return{[e]:r[e]}}},gt=Se("WorkflowType"),vt=Se("WorkflowId"),Et=Se("StartTime"),It=Se("ExecutionStatus"),St=r=>{const e=ft(r),l={workflowId:"",workflowType:"",executionStatus:null,timeRange:null};return e.forEach((t,s)=>{if(vt(t)&&(l.workflowId=ye(e,s)),gt(t)&&(l.workflowType=ye(e,s)),It(t)){const o=ye(e,s);mt(o)&&(l.executionStatus=o)}if(Et(t)){const o=ye(e,s);try{const i=it(o),a=yt(i);l.timeRange=ut(a)}catch(i){console.error("Error parsing StartTime from query",i)}}}),l};function qt(r){let e=r[0].id+"",l;return{c(){l=C(e)},l(t){l=H(t,e)},m(t,s){b(t,l,s)},p(t,s){s&1&&e!==(e=t[0].id+"")&&le(l,e)},d(t){t&&c(l)}}}function Wt(r){var Fe,Pe,De;let e,l,t,s,o,i,a,n,u,m=Z(r[0].startTime,r[5],{relative:r[6]})+"",h,L,w,W,j=G("workflows","workflow-name")+"",F,p,_,T,z=r[0].name+"",J,X,v,R,$,O,x=Z(r[0].endTime,r[5],{relative:r[6]})+"",se,de,ee,ae,ne=Z(r[0].startTime,r[5],{relative:r[6]})+"",be,ke,te,fe,ie=Z(r[0].endTime,r[5],{relative:r[6]})+"",Te,K,qe,We;return l=new lt({props:{status:r[0].status,delay:Oe(r[0].startTime)}}),o=new rt({props:{$$slots:{default:[qt]},$$scope:{ctx:r}}}),o.$on("click",r[9]),a=new Ke({props:{copyIconTitle:G("copy-icon-title"),copySuccessIconTitle:G("copy-success-icon-title"),filterIconTitle:G("filter-workflows"),show:r[1],content:r[0].id,filterable:!1}}),R=new Ke({props:{copyIconTitle:G("copy-icon-title"),copySuccessIconTitle:G("copy-success-icon-title"),filterIconTitle:G("filter-workflows"),show:r[1],content:r[0].name,onFilter:r[15],filtered:(De=(Pe=(Fe=r[3].url)==null?void 0:Fe.searchParams)==null?void 0:Pe.get("query"))==null?void 0:De.includes(r[0].name)}}),{c(){e=E("td"),U(l.$$.fragment),t=P(),s=E("td"),U(o.$$.fragment),i=P(),U(a.$$.fragment),n=P(),u=E("p"),h=C(m),L=P(),w=E("td"),W=E("h3"),F=C(j),p=C(":"),_=P(),T=E("button"),J=C(z),v=P(),U(R.$$.fragment),$=P(),O=E("p"),se=C(x),de=P(),ee=E("td"),ae=E("p"),be=C(ne),ke=P(),te=E("td"),fe=E("p"),Te=C(ie),this.h()},l(f){e=I(f,"TD",{});var d=S(e);Q(l.$$.fragment,d),d.forEach(c),t=D(f),s=I(f,"TD",{class:!0});var V=S(s);Q(o.$$.fragment,V),i=D(V),Q(a.$$.fragment,V),n=D(V),u=I(V,"P",{class:!0});var ue=S(u);h=H(ue,m),ue.forEach(c),V.forEach(c),L=D(f),w=I(f,"TD",{class:!0});var B=S(w);W=I(B,"H3",{class:!0});var Y=S(W);F=H(Y,j),p=H(Y,":"),Y.forEach(c),_=D(B),T=I(B,"BUTTON",{class:!0,"aria-label":!0});var ce=S(T);J=H(ce,z),ce.forEach(c),v=D(B),Q(R.$$.fragment,B),$=D(B),O=I(B,"P",{class:!0});var me=S(O);se=H(me,x),me.forEach(c),B.forEach(c),de=D(f),ee=I(f,"TD",{class:!0});var _e=S(ee);ae=I(_e,"P",{});var Ce=S(ae);be=H(Ce,ne),Ce.forEach(c),_e.forEach(c),ke=D(f),te=I(f,"TD",{class:!0});var He=S(te);fe=I(He,"P",{});var Le=S(fe);Te=H(Le,ie),Le.forEach(c),He.forEach(c),this.h()},h(){y(u,"class","inline-time-cell svelte-tyqpjy"),y(s,"class","relative break-words pr-4"),y(W,"class","md:hidden"),y(T,"class","table-link svelte-tyqpjy"),y(T,"aria-label",X=G("workflows","filter-by",{workflowName:r[0].name})),y(O,"class","inline-time-cell svelte-tyqpjy"),y(w,"class","relative truncate"),y(ee,"class","time-cell svelte-tyqpjy"),y(te,"class","time-cell svelte-tyqpjy")},m(f,d){b(f,e,d),A(l,e,null),b(f,t,d),b(f,s,d),A(o,s,null),k(s,i),A(a,s,null),k(s,n),k(s,u),k(u,h),b(f,L,d),b(f,w,d),k(w,W),k(W,F),k(W,p),k(w,_),k(w,T),k(T,J),k(w,v),A(R,w,null),k(w,$),k(w,O),k(O,se),b(f,de,d),b(f,ee,d),k(ee,ae),k(ae,be),b(f,ke,d),b(f,te,d),k(te,fe),k(fe,Te),K=!0,qe||(We=[N(s,"mouseover",r[10]),N(s,"focus",r[11]),N(s,"mouseleave",r[12]),N(s,"blur",r[13]),N(T,"click",pe(re(r[14]))),N(w,"mouseover",r[16]),N(w,"focus",r[17]),N(w,"mouseleave",r[18]),N(w,"blur",r[19])],qe=!0)},p(f,d){var ce,me,_e;const V={};d&1&&(V.status=f[0].status),d&1&&(V.delay=Oe(f[0].startTime)),l.$set(V);const ue={};d&1048577&&(ue.$$scope={dirty:d,ctx:f}),o.$set(ue);const B={};d&2&&(B.show=f[1]),d&1&&(B.content=f[0].id),a.$set(B),(!K||d&97)&&m!==(m=Z(f[0].startTime,f[5],{relative:f[6]})+"")&&le(h,m),(!K||d&1)&&z!==(z=f[0].name+"")&&le(J,z),(!K||d&1&&X!==(X=G("workflows","filter-by",{workflowName:f[0].name})))&&y(T,"aria-label",X);const Y={};d&2&&(Y.show=f[1]),d&1&&(Y.content=f[0].name),d&1&&(Y.onFilter=f[15]),d&9&&(Y.filtered=(_e=(me=(ce=f[3].url)==null?void 0:ce.searchParams)==null?void 0:me.get("query"))==null?void 0:_e.includes(f[0].name)),R.$set(Y),(!K||d&97)&&x!==(x=Z(f[0].endTime,f[5],{relative:f[6]})+"")&&le(se,x),(!K||d&97)&&ne!==(ne=Z(f[0].startTime,f[5],{relative:f[6]})+"")&&le(be,ne),(!K||d&97)&&ie!==(ie=Z(f[0].endTime,f[5],{relative:f[6]})+"")&&le(Te,ie)},i(f){K||(g(l.$$.fragment,f),g(o.$$.fragment,f),g(a.$$.fragment,f),g(R.$$.fragment,f),K=!0)},o(f){q(l.$$.fragment,f),q(o.$$.fragment,f),q(a.$$.fragment,f),q(R.$$.fragment,f),K=!1},d(f){f&&c(e),M(l),f&&c(t),f&&c(s),M(o),M(a),f&&c(L),f&&c(w),M(R),f&&c(de),f&&c(ee),f&&c(ke),f&&c(te),qe=!1,Ve(We)}}}function Ft(r){let e,l;return e=new ot({props:{class:"workflow-summary-row",$$slots:{default:[Wt]},$$scope:{ctx:r}}}),{c(){U(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,s){A(e,t,s),l=!0},p(t,[s]){const o={};s&1048703&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function Pt(r,e,l){let t,s,o,i,a;he(r,tt,v=>l(3,s=v)),he(r,Be,v=>l(4,o=v)),he(r,at,v=>l(5,i=v)),he(r,nt,v=>l(6,a=v));let{namespace:n}=e,{workflow:u}=e,m=!1;const h=v=>{const R=Ue({timeRange:"All"}),$=s.url.searchParams.get("query"),O=St($??R),x=(O==null?void 0:O.workflowType)===v?"":v,se=Ue({...O,workflowType:x});ht({url:s.url,parameter:"query",value:se,allowEmpty:!0})},L=()=>{Xe(Be,o=s.url.searchParams.toString(),o),et(t)},w=()=>l(1,m=!0),W=()=>l(1,m=!0),j=()=>l(1,m=!1),F=()=>l(1,m=!1),p=()=>h(u.name),_=()=>h(u.name),T=()=>l(1,m=!0),z=()=>l(1,m=!0),J=()=>l(1,m=!1),X=()=>l(1,m=!1);return r.$$set=v=>{"namespace"in v&&l(8,n=v.namespace),"workflow"in v&&l(0,u=v.workflow)},r.$$.update=()=>{r.$$.dirty&257&&l(2,t=_t({namespace:n,workflow:u.id,run:u.runId}))},[u,m,t,s,o,i,a,h,n,L,w,W,j,F,p,_,T,z,J,X]}class ol extends Ee{constructor(e){super(),Ie(this,e,Pt,Ft,we,{namespace:8,workflow:0})}}function Dt(r){let e;const l=r[1].default,t=Ye(l,r,r[2],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o&4)&&Ze(t,l,s,s[2],e?xe(l,s[2],o,null):$e(s[2]),null)},i(s){e||(g(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function Ct(r){let e,l;return{c(){e=E("caption"),l=C("Workflows"),this.h()},l(t){e=I(t,"CAPTION",{class:!0,slot:!0});var s=S(e);l=H(s,"Workflows"),s.forEach(c),this.h()},h(){y(e,"class","sr-only"),y(e,"slot","caption")},m(t,s){b(t,e,s),k(e,l)},p:oe,d(t){t&&c(e)}}}function Ht(r){let e,l,t,s,o,i,a,n,u,m,h,L,w,W,j,F,p;return{c(){e=E("th"),l=C("Status"),t=P(),s=E("th"),o=C("Workflow ID"),i=P(),a=E("th"),n=C("Type"),u=P(),m=E("th"),h=C("Start"),L=P(),w=E("th"),W=C("End"),j=P(),F=E("th"),p=C("Summary"),this.h()},l(_){e=I(_,"TH",{class:!0});var T=S(e);l=H(T,"Status"),T.forEach(c),t=D(_),s=I(_,"TH",{class:!0});var z=S(s);o=H(z,"Workflow ID"),z.forEach(c),i=D(_),a=I(_,"TH",{class:!0});var J=S(a);n=H(J,"Type"),J.forEach(c),u=D(_),m=I(_,"TH",{class:!0});var X=S(m);h=H(X,"Start"),X.forEach(c),L=D(_),w=I(_,"TH",{class:!0});var v=S(w);W=H(v,"End"),v.forEach(c),j=D(_),F=I(_,"TH",{class:!0,colspan:!0});var R=S(F);p=H(R,"Summary"),R.forEach(c),this.h()},h(){y(e,"class","w-32 max-md:hidden"),y(s,"class","max-md:hidden md:w-auto"),y(a,"class","w-60 max-md:hidden"),y(m,"class","w-60 max-xl:hidden"),y(w,"class","w-60 max-xl:hidden"),y(F,"class","md:hidden"),y(F,"colspan","3")},m(_,T){b(_,e,T),k(e,l),b(_,t,T),b(_,s,T),k(s,o),b(_,i,T),b(_,a,T),k(a,n),b(_,u,T),b(_,m,T),k(m,h),b(_,L,T),b(_,w,T),k(w,W),b(_,j,T),b(_,F,T),k(F,p)},p:oe,d(_){_&&c(e),_&&c(t),_&&c(s),_&&c(i),_&&c(a),_&&c(u),_&&c(m),_&&c(L),_&&c(w),_&&c(j),_&&c(F)}}}function Lt(r){let e,l;return e=new wt({props:{slot:"headers",$$slots:{default:[Ht]},$$scope:{ctx:r}}}),{c(){U(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,s){A(e,t,s),l=!0},p(t,s){const o={};s&4&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function Nt(r){let e,l;return e=new pt({props:{class:"w-full md:table-fixed",updating:r[0],"data-testid":"workflows-table",$$slots:{headers:[Lt],caption:[Ct],default:[Dt]},$$scope:{ctx:r}}}),{c(){U(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,s){A(e,t,s),l=!0},p(t,[s]){const o={};s&1&&(o.updating=t[0]),s&4&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){M(e,t)}}}function Rt(r,e,l){let{$$slots:t={},$$scope:s}=e,{updating:o=!1}=e;return r.$$set=i=>{"updating"in i&&l(0,o=i.updating),"$$scope"in i&&l(2,s=i.$$scope)},[o,t,s]}class al extends Ee{constructor(e){super(),Ie(this,e,Rt,Nt,we,{updating:0})}}function jt(r){let e;return{c(){e=C(r[2])},l(l){e=H(l,r[2])},m(l,t){b(l,e,t)},p(l,t){t&4&&le(e,l[2])},d(l){l&&c(e)}}}function Bt(r){let e,l,t,s,o,i,a;return l=new bt({props:{class:"w-full",unroundRight:!0,label:r[2],id:r[5],labelHidden:!0,icon:r[4]?"search":null,type:"search",name:r[3],value:r[1],placeholder:r[0],autocomplete:"off"}}),l.$on("input",r[7]),s=new dt({props:{borderRadiusModifier:"square-left",type:"submit",$$slots:{default:[jt]},$$scope:{ctx:r}}}),{c(){e=E("form"),U(l.$$.fragment),t=P(),U(s.$$.fragment),this.h()},l(n){e=I(n,"FORM",{role:!0,class:!0});var u=S(e);Q(l.$$.fragment,u),t=D(u),Q(s.$$.fragment,u),u.forEach(c),this.h()},h(){y(e,"role","search"),y(e,"class","flex items-center")},m(n,u){b(n,e,u),A(l,e,null),k(e,t),A(s,e,null),o=!0,i||(a=N(e,"submit",re(r[6])),i=!0)},p(n,[u]){const m={};u&4&&(m.label=n[2]),u&32&&(m.id=n[5]),u&16&&(m.icon=n[4]?"search":null),u&8&&(m.name=n[3]),u&2&&(m.value=n[1]),u&1&&(m.placeholder=n[0]),l.$set(m);const h={};u&260&&(h.$$scope={dirty:u,ctx:n}),s.$set(h)},i(n){o||(g(l.$$.fragment,n),g(s.$$.fragment,n),o=!0)},o(n){q(l.$$.fragment,n),q(s.$$.fragment,n),o=!1},d(n){n&&c(e),M(l),M(s),i=!1,a()}}}function Ot(r,e,l){let{placeholder:t=""}=e,{value:s=""}=e,{label:o=G("search")}=e,{name:i="query"}=e,{icon:a=!1}=e,{id:n=`${o.toLocaleUpperCase()}-input`}=e;function u(h){je.call(this,r,h)}function m(h){je.call(this,r,h)}return r.$$set=h=>{"placeholder"in h&&l(0,t=h.placeholder),"value"in h&&l(1,s=h.value),"label"in h&&l(2,o=h.label),"name"in h&&l(3,i=h.name),"icon"in h&&l(4,a=h.icon),"id"in h&&l(5,n=h.id)},[t,s,o,i,a,n,u,m]}class nl extends Ee{constructor(e){super(),Ie(this,e,Ot,Bt,we,{placeholder:0,value:1,label:2,name:3,icon:4,id:5})}}export{Ke as F,nl as S,al as W,ol as a,St as t};
