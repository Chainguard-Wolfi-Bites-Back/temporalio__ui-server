import{r as h,a as p}from"./route-for-api.b9941043.js";import{s as $}from"./parse-with-big-int.02af2f95.js";import{v as k}from"./toaster.a63b2610.js";import{S as w,b as D,a as H,m as y,p as S,q as b,k as f,u as v,f as _,n as P,O as I,P as C,w as g,c as L,x as E,d as M,M as T,y as j}from"./index.48f48b0a.js";import{g as F,w as O,m as U}from"./calendar.81d1e381.js";const X=async(c,e=fetch)=>{let n="";const l=a=>{var i;return n=((i=a==null?void 0:a.body)==null?void 0:i.message)??`Error fetching schedules: ${a.status}: ${a.statusText}`},s=h("schedules",{namespace:c}),{schedules:o,nextPageToken:t}=await p(s,{params:{},onError:l,request:e})??{schedules:[],nextPageToken:""};return{schedules:o,nextPageToken:String(t),error:n}};async function Y(c,e=fetch){const n=h("schedule",c);return p(n,{request:e})}async function Z(c,e=fetch){const n=h("schedule.delete",c);return p(n,{request:e,options:{method:"DELETE"}})}async function ee({namespace:c,body:e}){let n="";const l=t=>{var a;return n=((a=t==null?void 0:t.body)==null?void 0:a.message)??`Error creating schedule: ${t.status}: ${t.statusText}`},s=h("schedules",{namespace:c}),{conflictToken:o}=await p(s,{options:{method:"POST",body:$({request_id:k(),...e})},onError:l});return{conflictToken:o,error:n}}async function te({namespace:c,scheduleId:e,body:n}){let l="";const s=t=>{var a;return l=((a=t==null?void 0:t.body)==null?void 0:a.message)??`Error editing schedule: ${t.status}: ${t.statusText}`},o=h("schedule",{namespace:c,scheduleId:e});return await p(o,{options:{method:"POST",body:$({request_id:k(),...n})},onError:s}),{error:l}}async function se({namespace:c,scheduleId:e,reason:n}){const l={patch:{pause:n}},s=h("schedule",{namespace:c,scheduleId:e});return await p(s,{options:{method:"PATCH",body:$({...l,request_id:k()})},onError:o=>console.error(o)})}async function ae({namespace:c,scheduleId:e,reason:n}){const l={patch:{unpause:n}},s=h("schedule",{namespace:c,scheduleId:e});return await p(s,{options:{method:"PATCH",body:$({...l,request_id:k()})}})}const ne=({preset:c,month:e,dayOfMonth:n,dayOfWeek:l,hour:s,minute:o})=>{let t="";const a=!s||!parseInt(s)||parseInt(s)<12?"am":"pm",r=`${(!s||!parseInt(s)?"12":parseInt(s)<=12?s:(parseInt(s)-12).toString()).padStart(2,"0")}:${o?o.padStart(2,"0"):"00"}${a}`;if(c==="week"){const u=F.find(d=>d.value===l);u?t=`${u.label} at ${r}`:t=`${l.split(",").map(q=>O.find(N=>N.value===q).label).join(", ")} at ${r}`}else if(c==="month")if(e==="*")t=`Every ${n} of the month at ${r}`;else{const d=e.split(",").map(m=>U.find(x=>x.value===m).label).join(", ");t=`Every ${n} of ${d} at ${r}`}return t},A=(c="",e=!1)=>{let n="";if(!c)return n;const l=parseInt(c.slice(0,-1)),s=Math.floor(l/(60*60*24));let o=l-(s>0?s*60*60*24:0);const t=Math.floor(o/(60*60));o=o-(t>0?t*60*60:0);const a=Math.floor(o/60),i=a>0?o-a*60:o,r=`${t?t.toString().padStart(2,"0"):"00"}hrs`,u=`${a?a.toString().padStart(2,"0"):"00"}min`,d=`${i?i.toString().padStart(2,"0"):"00"}sec`,m=e?"Offset":"Every";return s?n=`${m} ${s}days:${r}:${u}:${d}`:t?n=`${m} ${r}:${u}:${d}`:a?n=`${m} ${u}:${d}`:i&&(n=`${m} ${d}`),n};function W(c){let e,n=A(c[1])+"",l,s,o,t=A(c[2],!0)+"",a;return{c(){e=y("p"),l=g(n),s=L(),o=y("p"),a=g(t),this.h()},l(i){e=S(i,"P",{"data-testid":!0});var r=b(e);l=E(r,n),r.forEach(f),s=M(i),o=S(i,"P",{"data-testid":!0});var u=b(o);a=E(u,t),u.forEach(f),this.h()},h(){v(e,"data-testid","schedule-interval-frequency"),v(o,"data-testid","schedule-phase-frequency")},m(i,r){_(i,e,r),T(e,l),_(i,s,r),_(i,o,r),T(o,a)},p:P,d(i){i&&f(e),i&&f(s),i&&f(o)}}}function B(c){var o;let e,n=(((o=c[0])==null?void 0:o.comment)??"")+"",l,s;return{c(){e=y("p"),l=g(n),s=g(" UTC"),this.h()},l(t){e=S(t,"P",{"data-testid":!0});var a=b(e);l=E(a,n),s=E(a," UTC"),a.forEach(f),this.h()},h(){v(e,"data-testid","schedule-calendar-frequency")},m(t,a){_(t,e,a),T(e,l),T(e,s)},p(t,a){var i;a&1&&n!==(n=(((i=t[0])==null?void 0:i.comment)??"")+"")&&j(l,n)},d(t){t&&f(e)}}}function V(c){let e,n;function l(t,a){return t[0]?B:W}let s=l(c),o=s(c);return{c(){e=y("div"),o.c(),this.h()},l(t){e=S(t,"DIV",{class:!0});var a=b(e);o.l(a),a.forEach(f),this.h()},h(){v(e,"class",n="flex flex-col "+c[3].class)},m(t,a){_(t,e,a),o.m(e,null)},p(t,[a]){s===(s=l(t))&&o?o.p(t,a):(o.d(1),o=s(t),o&&(o.c(),o.m(e,null))),a&8&&n!==(n="flex flex-col "+t[3].class)&&v(e,"class",n)},i:P,o:P,d(t){t&&f(e),o.d()}}}function z(c,e,n){let{calendar:l=void 0}=e,{interval:s=void 0}=e;const o=s==null?void 0:s.interval,t=s==null?void 0:s.phase;return c.$$set=a=>{n(3,e=I(I({},e),C(a))),"calendar"in a&&n(0,l=a.calendar),"interval"in a&&n(4,s=a.interval)},e=C(e),[l,o,t,e,s]}class oe extends w{constructor(e){super(),D(this,e,z,V,H,{calendar:0,interval:4})}}export{oe as S,Y as a,ne as b,ee as c,Z as d,te as e,X as f,se as p,ae as u};
