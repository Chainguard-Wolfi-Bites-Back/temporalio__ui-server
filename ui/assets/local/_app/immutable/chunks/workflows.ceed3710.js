import{t as a}from"./translate.2e1ad657.js";import{d as c,r as k,w as t}from"./index.9af4d667.js";import{p as w}from"./stores.7548fc60.js";import{a as m,b as h}from"./workflow-service.7f524041.js";import{s as b}from"./list-workflow-query.9c21dd24.js";var p=(r=>(r[r.Unspecified=0]="Unspecified",r[r.Signal=1]="Signal",r[r.None=2]="None",r))(p||{}),n=(r=>(r[r.Cancel=0]="Cancel",r[r.Reset=1]="Reset",r[r.Terminate=2]="Terminate",r))(n||{});function C(r){console.error("Unhandled action:",r)}const g=r=>{switch(r){case n.Cancel:return"canceled";case n.Reset:return"reset";case n.Terminate:return"terminated";default:C(r)}},W=(r,o)=>{const e=a("workflows",g(r));return o?a("workflows","workflow-action-reason-placeholder-with-email",{action:e,email:o}):a("workflows","workflow-action-reason-placeholder",{action:e})},B=({action:r,reason:o,email:e})=>{const s=W(r,e);return o?[o.trim(),s].join(" "):s},F=r=>!r.disableWriteActions&&!r.workflowCancelDisabled,G=r=>!r.disableWriteActions&&!r.workflowTerminateDisabled,y=300,E=async(r,o,e)=>{o.set(!0);try{await e()}catch(s){console.error(s)}r.set(!1),setTimeout(()=>{o.set(!1)},y)},v=t(0),q=c([w],([r])=>{var o,e;return(e=(o=r.data)==null?void 0:o.settings)==null?void 0:e.hideWorkflowQueryErrors}),A=c([w],([r])=>r.params.namespace),Q=c([w],([r])=>r.url.searchParams.get("query")),P=c([A,Q,v,b,q],([r,o,e,s,l])=>({namespace:r,query:o,refresh:e,supportsAdvancedVisibility:s,hideWorkflowQueryErrors:l})),S=r=>{x.set(r)},T=r=>P.subscribe(({namespace:o,query:e,supportsAdvancedVisibility:s,hideWorkflowQueryErrors:l})=>{E(V,U,async()=>{const{workflows:u,error:f}=await m(o,{query:e});if(r(u),s){const d=await h(o,e);S(d)}f?l?i.set(a("workflows","workflows-error-querying")):i.set(f):i.set("")})}),H=t(""),U=t(!0),V=t(!0),x=t({count:0,totalCount:0}),i=t(""),I=k([],T),J=t("");export{n as A,p as R,G as a,H as b,J as c,i as d,x as e,B as f,W as g,I as h,V as l,v as r,U as u,F as w};
