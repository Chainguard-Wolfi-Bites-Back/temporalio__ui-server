import{S as ye,b as Te,a as he,C as M,D as z,E as V,j as S,g as D,F as G,G as Xe,H as Ye,I as Ze,J as $e,m as g,w as H,c as C,p as E,q as F,x as L,k as c,d as P,u as b,f as T,M as k,n as te,e as Ue,z as me,h as _e,L as Ke,U as j,W as le,ac as se,r as We,T as Ae,i as xe,y as Y,Q as Se}from"./index.d29c66be.js";import{T as et,a as tt}from"./table-header-row.a7bab5a4.js";import{p as lt}from"./stores.f1e1a186.js";import{f as X}from"./format-date.100c5f23.js";import{u as st,v as rt,w as at,x as Oe}from"./format-time.66fea38b.js";import{f as ot}from"./route-for.de3620ca.js";import{u as nt}from"./pagination.e1040ddc.js";import{t as Qe}from"./list-workflow-query.909738bb.js";import{d as ft,e as Fe,f as ut,g as it,j as ct}from"./has.8da86d13.js";import{W as mt}from"./workflow-status.7ac16897.js";import{I as qe}from"./icon.5aa23970.js";import{c as _t}from"./copy-to-clipboard.a65bc890.js";import{T as ht}from"./table-row.4a68a50d.js";import{B as dt}from"./button.e7112b29.js";function pt(r){let e;const s=r[1].default,t=Xe(s,r,r[2],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&4)&&Ye(t,s,l,l[2],e?$e(s,l[2],o,null):Ze(l[2]),null)},i(l){e||(S(t,l),e=!0)},o(l){D(t,l),e=!1},d(l){t&&t.d(l)}}}function wt(r){let e,s,t,l,o,a,n,f,i,h,q,p,w,m,_,W,B;return{c(){e=g("th"),s=H("Status"),t=C(),l=g("th"),o=H("Workflow ID"),a=C(),n=g("th"),f=H("Type"),i=C(),h=g("th"),q=H("Start"),p=C(),w=g("th"),m=H("End"),_=C(),W=g("th"),B=H("Summary"),this.h()},l(d){e=E(d,"TH",{class:!0});var y=F(e);s=L(y,"Status"),y.forEach(c),t=P(d),l=E(d,"TH",{class:!0});var I=F(l);o=L(I,"Workflow ID"),I.forEach(c),a=P(d),n=E(d,"TH",{class:!0});var J=F(n);f=L(J,"Type"),J.forEach(c),i=P(d),h=E(d,"TH",{class:!0});var U=F(h);q=L(U,"Start"),U.forEach(c),p=P(d),w=E(d,"TH",{class:!0});var A=F(w);m=L(A,"End"),A.forEach(c),_=P(d),W=E(d,"TH",{class:!0,colspan:!0});var N=F(W);B=L(N,"Summary"),N.forEach(c),this.h()},h(){b(e,"class","w-32 max-md:hidden"),b(l,"class","max-md:hidden md:w-auto"),b(n,"class","w-60 max-md:hidden"),b(h,"class","w-60 max-xl:hidden"),b(w,"class","w-60 max-xl:hidden"),b(W,"class","md:hidden"),b(W,"colspan","3")},m(d,y){T(d,e,y),k(e,s),T(d,t,y),T(d,l,y),k(l,o),T(d,a,y),T(d,n,y),k(n,f),T(d,i,y),T(d,h,y),k(h,q),T(d,p,y),T(d,w,y),k(w,m),T(d,_,y),T(d,W,y),k(W,B)},p:te,d(d){d&&c(e),d&&c(t),d&&c(l),d&&c(a),d&&c(n),d&&c(i),d&&c(h),d&&c(p),d&&c(w),d&&c(_),d&&c(W)}}}function bt(r){let e,s;return e=new tt({props:{slot:"headers",$$slots:{default:[wt]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),s=!0},p(t,l){const o={};l&4&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function kt(r){let e,s;return e=new et({props:{class:"w-full md:table-fixed",updating:r[0],"data-testid":"workflows-table",$$slots:{headers:[bt],default:[pt]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),s=!0},p(t,[l]){const o={};l&1&&(o.updating=t[0]),l&4&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function vt(r,e,s){let{$$slots:t={},$$scope:l}=e,{updating:o=!1}=e;return r.$$set=a=>{"updating"in a&&s(0,o=a.updating),"$$scope"in a&&s(2,l=a.$$scope)},[o,t,l]}class Zt extends ye{constructor(e){super(),Te(this,e,vt,kt,he,{updating:0})}}const yt=r=>{const e=[],s=()=>{t&&(e.push(t),t="")};let t="",l=0;for(;l<r.length;){const o=r[l];if(ft(o)){t+=o,s(),l++;continue}if(Fe(o)){const a=`${r[l]}${r[l+1]}`,n=`${r[l]}${r[l+1]}${r[l+2]}`;if(Fe(n)){s(),t+=n,l+=3;continue}else if(Fe(a)){s(),t+=a,l+=2;continue}else{s(),t+=o,l++;continue}}if(ut(o)||it(o)){s(),l++;continue}t+=o,l++}return s(),e},ge=r=>e=>e.toLowerCase()===r.toLowerCase(),ve=(r,e)=>r[e+2],Tt=r=>{if(r){for(const e of at)if(r[e])return{[e]:r[e]}}},gt=ge("WorkflowType"),Et=ge("WorkflowId"),St=ge("StartTime"),Ft=ge("ExecutionStatus"),Wt=r=>{const e=yt(r),s={workflowId:"",workflowType:"",executionStatus:null,timeRange:null};return e.forEach((t,l)=>{if(Et(t)&&(s.workflowId=ve(e,l)),gt(t)&&(s.workflowType=ve(e,l)),Ft(t)){const o=ve(e,l);ct(o)&&(s.executionStatus=o)}if(St(t)){const o=ve(e,l);try{const a=st(o),n=Tt(a);s.timeRange=rt(n)}catch(a){console.error("Error parsing StartTime from query",a)}}}),s};function Re(r){let e,s,t,l,o,a,n=r[1]&&Me(r),f=r[2]&&Ve(r);return{c(){e=g("div"),n&&n.c(),s=C(),f&&f.c(),this.h()},l(i){e=E(i,"DIV",{class:!0});var h=F(e);n&&n.l(h),s=P(h),f&&f.l(h),h.forEach(c),this.h()},h(){b(e,"class",t="copy-or-filter "+r[6]+" svelte-1f7279h")},m(i,h){T(i,e,h),n&&n.m(e,null),k(e,s),f&&f.m(e,null),l=!0,o||(a=[j(e,"click",le(se(te))),j(e,"keyup",le(se(te)))],o=!0)},p(i,h){i[1]?n?(n.p(i,h),h&2&&S(n,1)):(n=Me(i),n.c(),S(n,1),n.m(e,s)):n&&(me(),D(n,1,1,()=>{n=null}),_e()),i[2]?f?(f.p(i,h),h&4&&S(f,1)):(f=Ve(i),f.c(),S(f,1),f.m(e,null)):f&&(me(),D(f,1,1,()=>{f=null}),_e()),(!l||h&64&&t!==(t="copy-or-filter "+i[6]+" svelte-1f7279h"))&&b(e,"class",t)},i(i){l||(S(n),S(f),l=!0)},o(i){D(n),D(f),l=!1},d(i){i&&c(e),n&&n.d(),f&&f.d(),o=!1,We(a)}}}function Me(r){let e,s=r[5],t,l,o,a=ze();return{c(){e=g("button"),a.c(),this.h()},l(n){e=E(n,"BUTTON",{class:!0});var f=F(e);a.l(f),f.forEach(c),this.h()},h(){b(e,"class","copy-or-filter-button svelte-1f7279h"),Ae(e,"filtered",r[5])},m(n,f){T(n,e,f),a.m(e,null),t=!0,l||(o=j(e,"click",le(se(function(){xe(r[4])&&r[4].apply(this,arguments)}))),l=!0)},p(n,f){r=n,f&32&&he(s,s=r[5])?(me(),D(a,1,1,te),_e(),a=ze(),a.c(),S(a,1),a.m(e,null)):a.p(r,f),(!t||f&32)&&Ae(e,"filtered",r[5])},i(n){t||(S(a),t=!0)},o(n){D(a),t=!1},d(n){n&&c(e),a.d(n),l=!1,o()}}}function ze(r){let e,s;return e=new qe({props:{name:"filter"}}),{c(){M(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),s=!0},p:te,i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function Ve(r){let e,s,t,l,o;return s=new qe({props:{name:r[7]?"checkmark":"copy",stroke:"#000"}}),{c(){e=g("button"),M(s.$$.fragment),this.h()},l(a){e=E(a,"BUTTON",{class:!0});var n=F(e);z(s.$$.fragment,n),n.forEach(c),this.h()},h(){b(e,"class","copy-or-filter-button svelte-1f7279h")},m(a,n){T(a,e,n),V(s,e,null),t=!0,l||(o=j(e,"click",le(se(r[10]))),l=!0)},p(a,n){const f={};n&128&&(f.name=a[7]?"checkmark":"copy"),s.$set(f)},i(a){t||(S(s.$$.fragment,a),t=!0)},o(a){D(s.$$.fragment,a),t=!1},d(a){a&&c(e),G(s),l=!1,o()}}}function qt(r){let e,s,t=r[0]&&Re(r);return{c(){t&&t.c(),e=Ue()},l(l){t&&t.l(l),e=Ue()},m(l,o){t&&t.m(l,o),T(l,e,o),s=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&S(t,1)):(t=Re(l),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(me(),D(t,1,1,()=>{t=null}),_e())},i(l){s||(S(t),s=!0)},o(l){D(t),s=!1},d(l){t&&t.d(l),l&&c(e)}}}function Dt(r,e,s){let t,{show:l=!1}=e,{filterable:o=!0}=e,{copyable:a=!0}=e,{content:n}=e,{onFilter:f=te}=e,{filtered:i=!1}=e,{class:h=""}=e;const{copy:q,copied:p}=_t(700);Ke(r,p,m=>s(7,t=m));const w=m=>q(m,n);return r.$$set=m=>{"show"in m&&s(0,l=m.show),"filterable"in m&&s(1,o=m.filterable),"copyable"in m&&s(2,a=m.copyable),"content"in m&&s(3,n=m.content),"onFilter"in m&&s(4,f=m.onFilter),"filtered"in m&&s(5,i=m.filtered),"class"in m&&s(6,h=m.class)},[l,o,a,n,f,i,h,t,q,p,w]}class Ge extends ye{constructor(e){super(),Te(this,e,Dt,qt,he,{show:0,filterable:1,copyable:2,content:3,onFilter:4,filtered:5,class:6})}}function It(r){var Ie,Ce,Pe;let e,s,t,l,o,a=r[0].id+"",n,f,i,h,q,p=X(r[0].startTime,r[1])+"",w,m,_,W,B,d,y,I=r[0].name+"",J,U,A,N,re,x,ae=X(r[0].endTime,r[1])+"",de,pe,Z,oe,ne=X(r[0].startTime,r[1])+"",we,be,$,fe,ue=X(r[0].endTime,r[1])+"",ke,O,Ee,De;return s=new mt({props:{status:r[0].status,delay:Oe(r[0].startTime)}}),i=new Ge({props:{show:r[2],content:r[0].id,filterable:!1}}),N=new Ge({props:{show:r[2],content:r[0].name,onFilter:r[12],filtered:(Pe=(Ce=(Ie=r[4].url)==null?void 0:Ie.searchParams)==null?void 0:Ce.get("query"))==null?void 0:Pe.includes(r[0].name)}}),{c(){e=g("td"),M(s.$$.fragment),t=C(),l=g("td"),o=g("span"),n=H(a),f=C(),M(i.$$.fragment),h=C(),q=g("p"),w=H(p),m=C(),_=g("td"),W=g("h3"),B=H("Workflow Name:"),d=C(),y=g("button"),J=H(I),A=C(),M(N.$$.fragment),re=C(),x=g("p"),de=H(ae),pe=C(),Z=g("td"),oe=g("p"),we=H(ne),be=C(),$=g("td"),fe=g("p"),ke=H(ue),this.h()},l(u){e=E(u,"TD",{});var v=F(e);z(s.$$.fragment,v),v.forEach(c),t=P(u),l=E(u,"TD",{class:!0});var R=F(l);o=E(R,"SPAN",{class:!0});var ee=F(o);n=L(ee,a),ee.forEach(c),f=P(R),z(i.$$.fragment,R),h=P(R),q=E(R,"P",{class:!0});var K=F(q);w=L(K,p),K.forEach(c),R.forEach(c),m=P(u),_=E(u,"TD",{class:!0});var Q=F(_);W=E(Q,"H3",{class:!0});var ie=F(W);B=L(ie,"Workflow Name:"),ie.forEach(c),d=P(Q),y=E(Q,"BUTTON",{class:!0,"aria-label":!0});var ce=F(y);J=L(ce,I),ce.forEach(c),A=P(Q),z(N.$$.fragment,Q),re=P(Q),x=E(Q,"P",{class:!0});var je=F(x);de=L(je,ae),je.forEach(c),Q.forEach(c),pe=P(u),Z=E(u,"TD",{class:!0});var He=F(Z);oe=E(He,"P",{});var Le=F(oe);we=L(Le,ne),Le.forEach(c),He.forEach(c),be=P(u),$=E(u,"TD",{class:!0});var Ne=F($);fe=E(Ne,"P",{});var Be=F(fe);ke=L(Be,ue),Be.forEach(c),Ne.forEach(c),this.h()},h(){b(o,"class","table-link svelte-tyqpjy"),b(q,"class","inline-time-cell svelte-tyqpjy"),b(l,"class","relative break-words pr-4"),b(W,"class","md:hidden"),b(y,"class","table-link svelte-tyqpjy"),b(y,"aria-label",U="filter by "+r[0].name+" type"),b(x,"class","inline-time-cell svelte-tyqpjy"),b(_,"class","relative truncate"),b(Z,"class","time-cell svelte-tyqpjy"),b($,"class","time-cell svelte-tyqpjy")},m(u,v){T(u,e,v),V(s,e,null),T(u,t,v),T(u,l,v),k(l,o),k(o,n),k(l,f),V(i,l,null),k(l,h),k(l,q),k(q,w),T(u,m,v),T(u,_,v),k(_,W),k(W,B),k(_,d),k(_,y),k(y,J),k(_,A),V(N,_,null),k(_,re),k(_,x),k(x,de),T(u,pe,v),T(u,Z,v),k(Z,oe),k(oe,we),T(u,be,v),T(u,$,v),k($,fe),k(fe,ke),O=!0,Ee||(De=[j(l,"mouseover",r[7]),j(l,"focus",r[8]),j(l,"mouseleave",r[9]),j(l,"blur",r[10]),j(y,"click",le(se(r[11]))),j(_,"mouseover",r[13]),j(_,"focus",r[14]),j(_,"mouseleave",r[15]),j(_,"blur",r[16])],Ee=!0)},p(u,v){var Q,ie,ce;const R={};v&1&&(R.status=u[0].status),v&1&&(R.delay=Oe(u[0].startTime)),s.$set(R),(!O||v&1)&&a!==(a=u[0].id+"")&&Y(n,a);const ee={};v&4&&(ee.show=u[2]),v&1&&(ee.content=u[0].id),i.$set(ee),(!O||v&3)&&p!==(p=X(u[0].startTime,u[1])+"")&&Y(w,p),(!O||v&1)&&I!==(I=u[0].name+"")&&Y(J,I),(!O||v&1&&U!==(U="filter by "+u[0].name+" type"))&&b(y,"aria-label",U);const K={};v&4&&(K.show=u[2]),v&1&&(K.content=u[0].name),v&1&&(K.onFilter=u[12]),v&17&&(K.filtered=(ce=(ie=(Q=u[4].url)==null?void 0:Q.searchParams)==null?void 0:ie.get("query"))==null?void 0:ce.includes(u[0].name)),N.$set(K),(!O||v&3)&&ae!==(ae=X(u[0].endTime,u[1])+"")&&Y(de,ae),(!O||v&3)&&ne!==(ne=X(u[0].startTime,u[1])+"")&&Y(we,ne),(!O||v&3)&&ue!==(ue=X(u[0].endTime,u[1])+"")&&Y(ke,ue)},i(u){O||(S(s.$$.fragment,u),S(i.$$.fragment,u),S(N.$$.fragment,u),O=!0)},o(u){D(s.$$.fragment,u),D(i.$$.fragment,u),D(N.$$.fragment,u),O=!1},d(u){u&&c(e),G(s),u&&c(t),u&&c(l),G(i),u&&c(m),u&&c(_),G(N),u&&c(pe),u&&c(Z),u&&c(be),u&&c($),Ee=!1,We(De)}}}function Ct(r){let e,s;return e=new ht({props:{href:r[3],class:"workflow-summary-row",$$slots:{default:[It]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),s=!0},p(t,[l]){const o={};l&8&&(o.href=t[3]),l&131095&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function Pt(r,e,s){let t,l;Ke(r,lt,I=>s(4,l=I));let{namespace:o}=e,{workflow:a}=e,{timeFormat:n}=e,f=!1;const i=I=>{const J=Qe({timeRange:"All"}),U=l.url.searchParams.get("query"),A=Wt(U??J),N=(A==null?void 0:A.workflowType)===I?"":I,re=Qe({...A,workflowType:N});nt({url:l.url,parameter:"query",value:re,allowEmpty:!0})},h=()=>s(2,f=!0),q=()=>s(2,f=!0),p=()=>s(2,f=!1),w=()=>s(2,f=!1),m=()=>i(a.name),_=()=>i(a.name),W=()=>s(2,f=!0),B=()=>s(2,f=!0),d=()=>s(2,f=!1),y=()=>s(2,f=!1);return r.$$set=I=>{"namespace"in I&&s(6,o=I.namespace),"workflow"in I&&s(0,a=I.workflow),"timeFormat"in I&&s(1,n=I.timeFormat)},r.$$.update=()=>{r.$$.dirty&65&&s(3,t=ot({namespace:o,workflow:a.id,run:a.runId}))},[a,n,f,t,l,i,o,h,q,p,w,m,_,W,B,d,y]}class $t extends ye{constructor(e){super(),Te(this,e,Pt,Ct,he,{namespace:6,workflow:0,timeFormat:1})}}var xt=jt;function jt(r,e,s,t){var l,o,a;return function(){if(a=this,o=Array.prototype.slice.call(arguments),l&&(s||t))return;if(!s)return i(),l=setTimeout(f,e),l;l=setTimeout(i,e),r.apply(a,o);function f(){i(),r.apply(a,o)}function i(){clearTimeout(l),l=null}}}function Je(r){let e,s;return e=new qe({props:{name:"search",class:"ml-4 flex items-center text-gray-700"}}),{c(){M(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),s=!0},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){D(e.$$.fragment,t),s=!1},d(t){G(e,t)}}}function Ht(r){let e;return{c(){e=H(r[2])},l(s){e=L(s,r[2])},m(s,t){T(s,e,t)},p(s,t){t&4&&Y(e,s[2])},d(s){s&&c(e)}}}function Lt(r){let e,s,t,l,o,a,n,f,i,h,q,p,w=r[4]&&Je();return i=new dt({props:{class:"m-2",type:"submit",$$slots:{default:[Ht]},$$scope:{ctx:r}}}),{c(){e=g("form"),w&&w.c(),s=C(),t=g("label"),l=H(r[2]),o=C(),a=g("input"),n=C(),f=g("div"),M(i.$$.fragment),this.h()},l(m){e=E(m,"FORM",{class:!0,role:!0});var _=F(e);w&&w.l(_),s=P(_),t=E(_,"LABEL",{for:!0,class:!0});var W=F(t);l=L(W,r[2]),W.forEach(c),o=P(_),a=E(_,"INPUT",{id:!0,type:!0,class:!0,name:!0,placeholder:!0,autocomplete:!0}),n=P(_),f=E(_,"DIV",{});var B=F(f);z(i.$$.fragment,B),B.forEach(c),_.forEach(c),this.h()},h(){b(t,"for",r[5]),b(t,"class","hidden"),b(a,"id",r[5]),b(a,"type","search"),b(a,"class","w-full rounded-l-lg px-4 focus:outline-none"),b(a,"name",r[3]),a.value=r[1],b(a,"placeholder",r[0]),b(a,"autocomplete","off"),b(e,"class","relative flex items-center rounded-lg border-2 bg-white transition-colors focus-within:border-blue-700"),b(e,"role","search")},m(m,_){T(m,e,_),w&&w.m(e,null),k(e,s),k(e,t),k(t,l),k(e,o),k(e,a),k(e,n),k(e,f),V(i,f,null),h=!0,q||(p=[j(a,"input",r[7]),j(a,"keydown",le(r[8])),j(e,"submit",se(r[6]))],q=!0)},p(m,[_]){m[4]?w?_&16&&S(w,1):(w=Je(),w.c(),S(w,1),w.m(e,s)):w&&(me(),D(w,1,1,()=>{w=null}),_e()),(!h||_&4)&&Y(l,m[2]),(!h||_&32)&&b(t,"for",m[5]),(!h||_&32)&&b(a,"id",m[5]),(!h||_&8)&&b(a,"name",m[3]),(!h||_&2&&a.value!==m[1])&&(a.value=m[1]),(!h||_&1)&&b(a,"placeholder",m[0]);const W={};_&516&&(W.$$scope={dirty:_,ctx:m}),i.$set(W)},i(m){h||(S(w),S(i.$$.fragment,m),h=!0)},o(m){D(w),D(i.$$.fragment,m),h=!1},d(m){m&&c(e),w&&w.d(),G(i),q=!1,We(p)}}}function Nt(r,e,s){let{placeholder:t=""}=e,{value:l=""}=e,{label:o="Search"}=e,{name:a="query"}=e,{icon:n=!1}=e,{id:f=`${o.toLocaleUpperCase()}-input`}=e;function i(p){Se.call(this,r,p)}function h(p){Se.call(this,r,p)}function q(p){Se.call(this,r,p)}return r.$$set=p=>{"placeholder"in p&&s(0,t=p.placeholder),"value"in p&&s(1,l=p.value),"label"in p&&s(2,o=p.label),"name"in p&&s(3,a=p.name),"icon"in p&&s(4,n=p.icon),"id"in p&&s(5,f=p.id)},[t,l,o,a,n,f,i,h,q]}class el extends ye{constructor(e){super(),Te(this,e,Nt,Lt,he,{placeholder:0,value:1,label:2,name:3,icon:4,id:5})}}export{Ge as F,el as S,Zt as W,$t as a,yt as b,xt as j,Wt as t};
