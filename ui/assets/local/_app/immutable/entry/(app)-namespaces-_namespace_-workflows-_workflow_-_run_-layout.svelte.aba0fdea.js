import{S as be,b as ke,a as ve,C as A,D as C,E as D,j as _,g as b,F as P,K as Z,i as ct,A as se,Z as ae,m as Q,c as O,p as J,q as Y,d as j,k as w,u as K,f as R,L as q,_ as fe,e as me,z as ie,h as ue,a7 as Me,w as z,x as G,n as ne,s as zt,a5 as re,y as Se,o as pt,a6 as Ue,a3 as mt,a4 as dt,G as _t,H as gt,I as wt,J as ht}from"../chunks/index.6779d4e2.js";import{p as qe}from"../chunks/stores.7ec965ad.js";import{L as Gt}from"../chunks/loading.17c040db.js";import{d as Kt,f as $t}from"../chunks/menu.7e3d54af.js";import{T as Zt}from"../chunks/toggle-switch.0d2aaadb.js";import{T as Ne}from"../chunks/tooltip.65a7fa6c.js";import{t as v}from"../chunks/translate.3b72a770.js";import{a as De,e as Oe}from"../chunks/event-view.446dd84e.js";import{w as bt}from"../chunks/index.1302fd9b.js";import{I as Fe}from"../chunks/input.86f6e192.js";import{R as Xt,a as xt}from"../chunks/radio-input.d451f838.js";import{S as eo,O as to}from"../chunks/option.3359f258.js";import{R as he,A as je}from"../chunks/workflow-actions.6f88149c.js";import{r as kt,e as Pe,t as Qe,i as oo,f as ro}from"../chunks/events-service.f7a838aa.js";import{B as no}from"../chunks/button.0b50a4b4.js";import{C as lo}from"../chunks/code-block.944d89cb.js";import{B as Be}from"../chunks/badge.d458ea0a.js";import{I as so}from"../chunks/icon.a4e81b70.js";import{M as ao}from"../chunks/menu-divider.def6f259.js";import{M as Ee}from"../chunks/modal.118648f9.js";import{S as fo}from"../chunks/split-button.9aad1ebf.js";import{w as io,t as uo,c as co,s as po,r as mo,f as _o}from"../chunks/workflow-service.aec2ce77.js";import{a as vt}from"../chunks/auth-user.6f15fe0f.js";import{c as go}from"../chunks/core-user.1973d180.js";import{p as wo}from"../chunks/persist-store.d8264c86.js";import{s as ho}from"../chunks/settings.b49a4593.js";import{t as Ve}from"../chunks/toaster.ef510498.js";import{r as pe,w as We,i as $o}from"../chunks/workflow-run.4e335848.js";import{w as bo,a as ko,f as Je}from"../chunks/workflow-terminate-enabled.12fbbbc7.js";import{W as vo}from"../chunks/workflow-status.2f21c28d.js";import{A as It}from"../chunks/alert.dcbef44a.js";import{C as Ye,g as Io,a as To,b as Eo}from"../chunks/pollers-service.d4613034.js";import{C as Ro}from"../chunks/index.408ca409.js";import{L as Tt}from"../chunks/link.8030aa06.js";import{T as yo,a as Ao,b as Te}from"../chunks/tab.9e7175ff.js";import{w as Co}from"../chunks/workflows.a157f8f8.js";import{h as Do}from"../chunks/has.f5323580.js";import{r as ze,g as $e,h as Re,i as ye,j as Ae,k as Ce}from"../chunks/route-for.796d1ee3.js";import{g as Po,a as Wo,b as So,p as Vo,c as Mo}from"../chunks/task-queue-compatibility.cf5696f8.js";import{p as Uo,c as qo}from"../chunks/data-encoder-config.af2c5703.js";import{c as No,a as Fo,d as Bo}from"../chunks/decode-payload.ba220c5b.js";import{g as Ho,a as Lo}from"../chunks/get-codec.a7e83ad4.js";function Oo(n){let o,e;return o=new Zt({props:{label:v("auto-refresh"),labelPosition:"left",id:"autorefresh",checked:n[1]}}),o.$on("change",function(){ct(n[0])&&n[0].apply(this,arguments)}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){n=t;const l={};r&2&&(l.checked=n[1]),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function jo(n){let o,e;return o=new Ne({props:{bottomLeft:!0,text:v("auto-refresh-tooltip",{interval:"15"}),$$slots:{default:[Oo]},$$scope:{ctx:n}}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,[r]){const l={};r&11&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function Qo(n,o,e){let t,r;Z(n,De,s=>e(2,r=s));let{onChange:l}=o;return n.$$set=s=>{"onChange"in s&&e(0,l=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&e(1,t=r==="on")},[l,t,r]}class Jo extends be{constructor(o){super(),ke(this,o,Qo,jo,ve,{onChange:0})}}function Ge(n,o,e){const t=n.slice();return t[7]=o[e].value,t[8]=o[e].label,t}function Ke(n,o,e){const t=n.slice();return t[11]=o[e],t}function Ze(n){let o,e;return o=new xt({props:{id:"reset-event-"+n[11].id,value:n[11].id,label:n[11].id+" - "+n[11].eventType}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r&8&&(l.id="reset-event-"+t[11].id),r&8&&(l.value=t[11].id),r&8&&(l.label=t[11].id+" - "+t[11].eventType),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function Yo(n){let o,e,t=n[3],r=[];for(let s=0;s<t.length;s+=1)r[s]=Ze(Ke(n,t,s));const l=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=me()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);o=me()},m(s,a){for(let f=0;f<r.length;f+=1)r[f].m(s,a);R(s,o,a),e=!0},p(s,a){if(a&8){t=s[3];let f;for(f=0;f<t.length;f+=1){const c=Ke(s,t,f);r[f]?(r[f].p(c,a),_(r[f],1)):(r[f]=Ze(c),r[f].c(),_(r[f],1),r[f].m(o.parentNode,o))}for(ie(),f=t.length;f<r.length;f+=1)l(f);ue()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)_(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);e=!1},d(s){Me(r,s),s&&w(o)}}}function zo(n){let o=n[8]+"",e,t;return{c(){e=z(o),t=O()},l(r){e=G(r,o),t=j(r)},m(r,l){R(r,e,l),R(r,t,l)},p:ne,d(r){r&&w(e),r&&w(t)}}}function Xe(n){let o,e;return o=new to({props:{value:n[7],$$slots:{default:[zo]},$$scope:{ctx:n}}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r&16384&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function Go(n){let o,e,t=n[4],r=[];for(let s=0;s<t.length;s+=1)r[s]=Xe(Ge(n,t,s));const l=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=me()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);o=me()},m(s,a){for(let f=0;f<r.length;f+=1)r[f].m(s,a);R(s,o,a),e=!0},p(s,a){if(a&16){t=s[4];let f;for(f=0;f<t.length;f+=1){const c=Ge(s,t,f);r[f]?(r[f].p(c,a),_(r[f],1)):(r[f]=Xe(c),r[f].c(),_(r[f],1),r[f].m(o.parentNode,o))}for(ie(),f=t.length;f<r.length;f+=1)l(f);ue()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)_(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);e=!1},d(s){Me(r,s),s&&w(o)}}}function Ko(n){let o,e,t,r,l,s,a,f,c;e=new Xt({props:{name:"reset-event-id",group:n[2],class:"max-h-40 overflow-auto",$$slots:{default:[Yo]},$$scope:{ctx:n}}});function u(d){n[5](d)}let i={label:v("workflows","reset-reapply-type-label"),id:"reset-reapply-type-select","data-testid":"workflow-reset-reapply-type-select",$$slots:{default:[Go]},$$scope:{ctx:n}};n[0]!==void 0&&(i.value=n[0]),r=new eo({props:i}),se.push(()=>ae(r,"value",u));function p(d){n[6](d)}let h={id:"reset-reason",label:v("reason")};return n[1]!==void 0&&(h.value=n[1]),a=new Fe({props:h}),se.push(()=>ae(a,"value",p)),{c(){o=Q("div"),A(e.$$.fragment),t=O(),A(r.$$.fragment),s=O(),A(a.$$.fragment),this.h()},l(d){o=J(d,"DIV",{class:!0});var $=Y(o);C(e.$$.fragment,$),t=j($),C(r.$$.fragment,$),s=j($),C(a.$$.fragment,$),$.forEach(w),this.h()},h(){K(o,"class","flex w-full flex-col gap-4")},m(d,$){R(d,o,$),D(e,o,null),q(o,t),D(r,o,null),q(o,s),D(a,o,null),c=!0},p(d,[$]){const T={};$&4&&(T.group=d[2]),$&16392&&(T.$$scope={dirty:$,ctx:d}),e.$set(T);const N={};$&16384&&(N.$$scope={dirty:$,ctx:d}),!l&&$&1&&(l=!0,N.value=d[0],fe(()=>l=!1)),r.$set(N);const g={};!f&&$&2&&(f=!0,g.value=d[1],fe(()=>f=!1)),a.$set(g)},i(d){c||(_(e.$$.fragment,d),_(r.$$.fragment,d),_(a.$$.fragment,d),c=!0)},o(d){b(e.$$.fragment,d),b(r.$$.fragment,d),b(a.$$.fragment,d),c=!1},d(d){d&&w(o),P(e),P(r),P(a)}}}function Zo(n,o,e){let t;Z(n,kt,u=>e(3,t=u));let{resetReapplyType:r=he.Unspecified}=o,{reason:l=""}=o,{eventId:s}=o;const a=[{value:he.Unspecified,label:v("workflows","reset-reapply-all")},{value:he.Signal,label:v("workflows","reset-reapply-signals-only")},{value:he.None,label:v("workflows","reset-reapply-none")}];function f(u){r=u,e(0,r)}function c(u){l=u,e(1,l)}return n.$$set=u=>{"resetReapplyType"in u&&e(0,r=u.resetReapplyType),"reason"in u&&e(1,l=u.reason),"eventId"in u&&e(2,s=u.eventId)},[r,l,s,t,a,f,c]}class Xo extends be{constructor(o){super(),ke(this,o,Zo,Ko,ve,{resetReapplyType:0,reason:1,eventId:2})}}const Et=wo("resetWorkflows",{}),xo=n=>!n.disableWriteActions&&!n.workflowResetDisabled,er=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function xe(n,o,e){const t=n.slice();return t[59]=o[e].onClick,t[60]=o[e].destructive,t[61]=o[e].label,t[62]=o[e].allowed,t[63]=o[e].testId,t[64]=o[e].tooltip,t}function tr(n){let o,e;return o=new Ne({props:{bottomRight:!0,width:200,text:n[2],hide:n[3],$$slots:{default:[nr]},$$scope:{ctx:n}}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r[0]&4&&(l.text=t[2]),r[0]&8&&(l.hide=t[3]),r[0]&520|r[2]&32&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function or(n){let o,e;return o=new fo({props:{id:"workflow-actions",position:"right",disabled:n[17],primaryActionDisabled:!n[18]||n[0],label:v("workflows","request-cancellation"),menuLabel:v("workflows","workflow-actions"),$$slots:{default:[ar]},$$scope:{ctx:n}}}),o.$on("click",n[40]),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r[0]&131072&&(l.disabled=t[17]),r[0]&262145&&(l.primaryActionDisabled=!t[18]||t[0]),r[0]&65536|r[2]&32&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function rr(n){let o=v("workflows","reset")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){R(t,e,r)},p:ne,d(t){t&&w(e)}}}function nr(n){let o,e;return o=new no({props:{"aria-label":v("workflows","reset"),disabled:!n[3],variant:"primary",$$slots:{default:[rr]},$$scope:{ctx:n}}}),o.$on("click",n[41]),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r[0]&8&&(l.disabled=!t[3]),r[2]&32&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function et(n){let o,e;return o=new ao({}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function lr(n){let o=n[61]+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){R(t,e,r)},p(t,r){r[0]&65536&&o!==(o=t[61]+"")&&Se(e,o)},d(t){t&&w(e)}}}function sr(n){let o,e,t;return o=new Kt({props:{destructive:n[60],disabled:!n[62],"data-testid":n[63],$$slots:{default:[lr]},$$scope:{ctx:n}}}),o.$on("click",function(){ct(n[59])&&n[59].apply(this,arguments)}),{c(){A(o.$$.fragment),e=O()},l(r){C(o.$$.fragment,r),e=j(r)},m(r,l){D(o,r,l),R(r,e,l),t=!0},p(r,l){n=r;const s={};l[0]&65536&&(s.destructive=n[60]),l[0]&65536&&(s.disabled=!n[62]),l[0]&65536&&(s["data-testid"]=n[63]),l[0]&65536|l[2]&32&&(s.$$scope={dirty:l,ctx:n}),o.$set(s)},i(r){t||(_(o.$$.fragment,r),t=!0)},o(r){b(o.$$.fragment,r),t=!1},d(r){P(o,r),r&&w(e)}}}function tt(n){let o,e,t,r=n[60]&&et();return e=new Ne({props:{text:n[64],hide:!n[64],width:200,left:!0,$$slots:{default:[sr]},$$scope:{ctx:n}}}),{c(){r&&r.c(),o=O(),A(e.$$.fragment)},l(l){r&&r.l(l),o=j(l),C(e.$$.fragment,l)},m(l,s){r&&r.m(l,s),R(l,o,s),D(e,l,s),t=!0},p(l,s){l[60]?r?s[0]&65536&&_(r,1):(r=et(),r.c(),_(r,1),r.m(o.parentNode,o)):r&&(ie(),b(r,1,1,()=>{r=null}),ue());const a={};s[0]&65536&&(a.text=l[64]),s[0]&65536&&(a.hide=!l[64]),s[0]&65536|s[2]&32&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(_(r),_(e.$$.fragment,l),t=!0)},o(l){b(r),b(e.$$.fragment,l),t=!1},d(l){r&&r.d(l),l&&w(o),P(e,l)}}}function ar(n){let o,e,t=n[16],r=[];for(let s=0;s<t.length;s+=1)r[s]=tt(xe(n,t,s));const l=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=me()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);o=me()},m(s,a){for(let f=0;f<r.length;f+=1)r[f].m(s,a);R(s,o,a),e=!0},p(s,a){if(a[0]&65536){t=s[16];let f;for(f=0;f<t.length;f+=1){const c=xe(s,t,f);r[f]?(r[f].p(c,a),_(r[f],1)):(r[f]=tt(c),r[f].c(),_(r[f],1),r[f].m(o.parentNode,o))}for(ie(),f=t.length;f<r.length;f+=1)l(f);ue()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)_(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);e=!1},d(s){Me(r,s),s&&w(o)}}}function fr(n){let o,e=v("workflows","reset-modal-title")+"",t;return{c(){o=Q("h3"),t=z(e),this.h()},l(r){o=J(r,"H3",{slot:!0});var l=Y(o);t=G(l,e),l.forEach(w),this.h()},h(){K(o,"slot","title")},m(r,l){R(r,o,l),q(o,t)},p:ne,d(r){r&&w(o)}}}function ir(n){let o,e,t,r,l;function s(u){n[42](u)}function a(u){n[43](u)}function f(u){n[44](u)}let c={};return n[13]!==void 0&&(c.eventId=n[13]),n[12]!==void 0&&(c.resetReapplyType=n[12]),n[14]!==void 0&&(c.reason=n[14]),o=new Xo({props:c}),se.push(()=>ae(o,"eventId",s)),se.push(()=>ae(o,"resetReapplyType",a)),se.push(()=>ae(o,"reason",f)),{c(){A(o.$$.fragment)},l(u){C(o.$$.fragment,u)},m(u,i){D(o,u,i),l=!0},p(u,i){const p={};!e&&i[0]&8192&&(e=!0,p.eventId=u[13],fe(()=>e=!1)),!t&&i[0]&4096&&(t=!0,p.resetReapplyType=u[12],fe(()=>t=!1)),!r&&i[0]&16384&&(r=!0,p.reason=u[14],fe(()=>r=!1)),o.$set(p)},i(u){l||(_(o.$$.fragment,u),l=!0)},o(u){b(o.$$.fragment,u),l=!1},d(u){P(o,u)}}}function ur(n){let o,e=v("workflows","cancel-modal-title")+"",t;return{c(){o=Q("h3"),t=z(e),this.h()},l(r){o=J(r,"H3",{slot:!0});var l=Y(o);t=G(l,e),l.forEach(w),this.h()},h(){K(o,"slot","title")},m(r,l){R(r,o,l),q(o,t)},p:ne,d(r){r&&w(o)}}}function cr(n){let o,e=v("workflows","cancel-modal-confirmation")+"",t;return{c(){o=Q("p"),t=z(e)},l(r){o=J(r,"P",{});var l=Y(o);t=G(l,e),l.forEach(w)},m(r,l){R(r,o,l),q(o,t)},p:ne,d(r){r&&w(o)}}}function pr(n){let o,e=v("workflows","terminate-modal-title")+"",t;return{c(){o=Q("h3"),t=z(e),this.h()},l(r){o=J(r,"H3",{slot:!0});var l=Y(o);t=G(l,e),l.forEach(w),this.h()},h(){K(o,"slot","title")},m(r,l){R(r,o,l),q(o,t)},p:ne,d(r){r&&w(o)}}}function mr(n){let o,e,t=v("workflows","terminate-modal-confirmation")+"",r,l,s,a,f;function c(i){n[49](i)}let u={id:"workflow-termination-reason",class:"mt-4",placeholder:v("reason-placeholder"),label:v("reason-placeholder"),labelHidden:!0};return n[4]!==void 0&&(u.value=n[4]),s=new Fe({props:u}),se.push(()=>ae(s,"value",c)),{c(){o=Q("div"),e=Q("p"),r=z(t),l=O(),A(s.$$.fragment),this.h()},l(i){o=J(i,"DIV",{slot:!0});var p=Y(o);e=J(p,"P",{});var h=Y(e);r=G(h,t),h.forEach(w),l=j(p),C(s.$$.fragment,p),p.forEach(w),this.h()},h(){K(o,"slot","content")},m(i,p){R(i,o,p),q(o,e),q(e,r),q(o,l),D(s,o,null),f=!0},p(i,p){const h={};!a&&p[0]&16&&(a=!0,h.value=i[4],fe(()=>a=!1)),s.$set(h)},i(i){f||(_(s.$$.fragment,i),f=!0)},o(i){b(s.$$.fragment,i),f=!1},d(i){i&&w(o),P(s)}}}function dr(n){let o,e=v("workflows","signal-modal-title")+"",t;return{c(){o=Q("h3"),t=z(e),this.h()},l(r){o=J(r,"H3",{slot:!0});var l=Y(o);t=G(l,e),l.forEach(w),this.h()},h(){K(o,"slot","title")},m(r,l){R(r,o,l),q(o,t)},p:ne,d(r){r&&w(o)}}}function _r(n){let o,e,t,r,l,s,a=v("workflows","signal-payload-input-label")+"",f,c,u,i=v("workflows","signal-payload-input-label-hint")+"",p,h,d,$;function T(g){n[52](g)}let N={id:"signal-name",label:v("workflows","signal-name-label"),required:!0};return n[6]!==void 0&&(N.value=n[6]),e=new Fe({props:N}),se.push(()=>ae(e,"value",T)),d=new lo({props:{class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1}}),d.$on("change",n[25]),{c(){o=Q("div"),A(e.$$.fragment),r=O(),l=Q("div"),s=Q("span"),f=z(a),c=O(),u=Q("span"),p=z(i),h=O(),A(d.$$.fragment),this.h()},l(g){o=J(g,"DIV",{slot:!0,class:!0});var W=Y(o);C(e.$$.fragment,W),r=j(W),l=J(W,"DIV",{});var E=Y(l);s=J(E,"SPAN",{class:!0});var F=Y(s);f=G(F,a),F.forEach(w),c=j(E),u=J(E,"SPAN",{class:!0});var V=Y(u);p=G(V,i),V.forEach(w),h=j(E),C(d.$$.fragment,E),E.forEach(w),W.forEach(w),this.h()},h(){K(s,"class","font-secondary text-sm font-medium"),K(u,"class","font-secondary text-xs font-light italic"),K(o,"slot","content"),K(o,"class","flex flex-col gap-4")},m(g,W){R(g,o,W),D(e,o,null),q(o,r),q(o,l),q(l,s),q(s,f),q(l,c),q(l,u),q(u,p),q(l,h),D(d,l,null),$=!0},p(g,W){const E={};!t&&W[0]&64&&(t=!0,E.value=g[6],fe(()=>t=!1)),e.$set(E);const F={};W[0]&32&&(F.content=g[5]),d.$set(F)},i(g){$||(_(e.$$.fragment,g),_(d.$$.fragment,g),$=!0)},o(g){b(e.$$.fragment,g),b(d.$$.fragment,g),$=!1},d(g){g&&w(o),P(e),P(d)}}}function gr(n){let o,e,t,r,l,s,a,f,c,u,i,p,h,d,$,T,N,g,W;const E=[or,tr],F=[];function V(m,y){return m[1]?0:1}o=V(n),e=F[o]=E[o](n);function B(m){n[45](m)}function M(m){n[46](m)}let U={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:v("confirm"),cancelText:v("cancel"),confirmDisabled:!n[19],$$slots:{content:[ir],title:[fr]},$$scope:{ctx:n}};n[11]!==void 0&&(U.error=n[11]),n[9]!==void 0&&(U.open=n[9]),r=new Ee({props:U}),se.push(()=>ae(r,"error",B)),se.push(()=>ae(r,"open",M)),r.$on("confirmModal",n[27]),r.$on("cancelModal",n[22]);function x(m){n[47](m)}function oe(m){n[48](m)}let I={id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",confirmText:v("confirm"),cancelText:v("cancel"),loading:n[15],confirmType:"destructive",$$slots:{content:[cr],title:[ur]},$$scope:{ctx:n}};n[11]!==void 0&&(I.error=n[11]),n[7]!==void 0&&(I.open=n[7]),f=new Ee({props:I}),se.push(()=>ae(f,"error",x)),se.push(()=>ae(f,"open",oe)),f.$on("confirmModal",n[24]);function S(m){n[50](m)}function H(m){n[51](m)}let L={id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",confirmText:v("workflows","terminate"),cancelText:v("cancel"),confirmType:"destructive",$$slots:{content:[mr],title:[pr]},$$scope:{ctx:n}};n[11]!==void 0&&(L.error=n[11]),n[8]!==void 0&&(L.open=n[8]),p=new Ee({props:L}),se.push(()=>ae(p,"error",S)),se.push(()=>ae(p,"open",H)),p.$on("cancelModal",n[20]),p.$on("confirmModal",n[23]);function le(m){n[53](m)}function ee(m){n[54](m)}let te={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",confirmText:v("submit"),cancelText:v("cancel"),confirmDisabled:!n[6],$$slots:{content:[_r],title:[dr]},$$scope:{ctx:n}};return n[11]!==void 0&&(te.error=n[11]),n[10]!==void 0&&(te.open=n[10]),T=new Ee({props:te}),se.push(()=>ae(T,"error",le)),se.push(()=>ae(T,"open",ee)),T.$on("cancelModal",n[21]),T.$on("confirmModal",n[26]),{c(){e.c(),t=O(),A(r.$$.fragment),a=O(),A(f.$$.fragment),i=O(),A(p.$$.fragment),$=O(),A(T.$$.fragment)},l(m){e.l(m),t=j(m),C(r.$$.fragment,m),a=j(m),C(f.$$.fragment,m),i=j(m),C(p.$$.fragment,m),$=j(m),C(T.$$.fragment,m)},m(m,y){F[o].m(m,y),R(m,t,y),D(r,m,y),R(m,a,y),D(f,m,y),R(m,i,y),D(p,m,y),R(m,$,y),D(T,m,y),W=!0},p(m,y){let Ie=o;o=V(m),o===Ie?F[o].p(m,y):(ie(),b(F[Ie],1,1,()=>{F[Ie]=null}),ue(),e=F[o],e?e.p(m,y):(e=F[o]=E[o](m),e.c()),_(e,1),e.m(t.parentNode,t));const de={};y[0]&524288&&(de.confirmDisabled=!m[19]),y[0]&28672|y[2]&32&&(de.$$scope={dirty:y,ctx:m}),!l&&y[0]&2048&&(l=!0,de.error=m[11],fe(()=>l=!1)),!s&&y[0]&512&&(s=!0,de.open=m[9],fe(()=>s=!1)),r.$set(de);const _e={};y[0]&32768&&(_e.loading=m[15]),y[2]&32&&(_e.$$scope={dirty:y,ctx:m}),!c&&y[0]&2048&&(c=!0,_e.error=m[11],fe(()=>c=!1)),!u&&y[0]&128&&(u=!0,_e.open=m[7],fe(()=>u=!1)),f.$set(_e);const we={};y[0]&16|y[2]&32&&(we.$$scope={dirty:y,ctx:m}),!h&&y[0]&2048&&(h=!0,we.error=m[11],fe(()=>h=!1)),!d&&y[0]&256&&(d=!0,we.open=m[8],fe(()=>d=!1)),p.$set(we);const ge={};y[0]&64&&(ge.confirmDisabled=!m[6]),y[0]&96|y[2]&32&&(ge.$$scope={dirty:y,ctx:m}),!N&&y[0]&2048&&(N=!0,ge.error=m[11],fe(()=>N=!1)),!g&&y[0]&1024&&(g=!0,ge.open=m[10],fe(()=>g=!1)),T.$set(ge)},i(m){W||(_(e),_(r.$$.fragment,m),_(f.$$.fragment,m),_(p.$$.fragment,m),_(T.$$.fragment,m),W=!0)},o(m){b(e),b(r.$$.fragment,m),b(f.$$.fragment,m),b(p.$$.fragment,m),b(T.$$.fragment,m),W=!1},d(m){F[o].d(m),m&&w(t),P(r,m),m&&w(a),P(f,m),m&&w(i),P(p,m),m&&w($),P(T,m)}}}function wr(n,o,e){let t,r,l,s,a,f,c,u,i,p,h,d=ne,$=()=>(d(),d=zt(ee,k=>e(19,h=k)),ee),T;Z(n,kt,k=>e(38,u=k)),Z(n,pe,k=>e(55,i=k)),Z(n,vt,k=>e(56,p=k)),Z(n,qe,k=>e(39,T=k)),n.$$.on_destroy.push(()=>d());var N,g,W;let{workflow:E}=o,{namespace:F}=o,{cancelInProgress:V}=o,{isRunning:B}=o,M="",U="",x="",oe=!1,I=!1,S=!1,H=!1,L="",le=he.Unspecified,ee=bt();$();let te,m=!1,y;const Ie=()=>{e(4,M="")},de=()=>{e(5,U=""),e(6,x="")},_e=()=>{e(12,le=he.Unspecified),re(ee,h=void 0,h),e(14,te=void 0)},we=async()=>{e(8,I=!1),re(pe,i=Date.now(),i),Ve.push({id:"workflow-termination-success-toast",message:v("workflows","terminate-success")})},ge=k=>{var X;e(4,M=""),e(11,L=(X=k==null?void 0:k.message)!==null&&X!==void 0?X:v("unknown-error"))},yt=()=>{e(11,L=""),E.canBeTerminated&&uo({workflow:E,namespace:F,reason:Je({action:je.Terminate,reason:M,email:p.email}),identity:p.email}).then(we).catch(ge)},At=async()=>{var k;e(15,m=!0),e(11,L="");try{await co({namespace:F,workflowId:E.id,runId:E.runId}),e(7,oe=!1),e(15,m=!1),re(pe,i=Date.now(),i),Ve.push({id:"workflow-cancelation-success-toast",message:v("workflows","cancel-success")})}catch(X){e(11,L=(k=X==null?void 0:X.message)!==null&&k!==void 0?k:v("unknown-error"))}},Ct=k=>{e(5,U=k.detail)},Dt=async()=>{var k;e(11,L="");try{await po({namespace:F,workflowId:E.id,runId:E.runId,signalInput:U,signalName:x}),e(10,H=!1),re(pe,i=Date.now(),i),Ve.push({message:v("workflows","signal-success"),id:"workflow-signal-success-toast"})}catch(X){e(11,L=(k=X==null?void 0:X.message)!==null&&k!==void 0?k:v("unknown-error"))}de()},Pt=async()=>{var k;e(11,L="");try{const X=await mo({namespace:F,workflowId:E.id,runId:E.runId,eventId:h,reason:Je({action:je.Reset,reason:te,email:p.email}),resetReapplyType:le});X&&X.runId&&Et.update(Yt=>({...Yt,[E.runId]:X.runId})),e(9,S=!1),re(pe,i=Date.now(),i)}catch(X){e(11,L=(k=X==null?void 0:X.message)!==null&&k!==void 0?k:v("unknown-error"))}_e()};let He,Le=go();Z(n,Le,k=>e(37,c=k));const Wt=()=>e(7,oe=!0),St=()=>e(9,S=!0);function Vt(k){ee=k,$(e(13,ee))}function Mt(k){le=k,e(12,le)}function Ut(k){te=k,e(14,te)}function qt(k){L=k,e(11,L)}function Nt(k){S=k,e(9,S),e(3,a),e(2,y),e(35,r),e(34,l),e(36,s),e(29,E),e(33,W),e(38,u),e(31,N),e(32,g),e(39,T)}function Ft(k){L=k,e(11,L)}function Bt(k){oe=k,e(7,oe)}function Ht(k){M=k,e(4,M)}function Lt(k){L=k,e(11,L)}function Ot(k){I=k,e(8,I),e(3,a),e(2,y),e(35,r),e(34,l),e(36,s),e(29,E),e(33,W),e(38,u),e(31,N),e(32,g),e(39,T)}function jt(k){x=k,e(6,x)}function Qt(k){L=k,e(11,L)}function Jt(k){H=k,e(10,H),e(3,a),e(2,y),e(35,r),e(34,l),e(36,s),e(29,E),e(33,W),e(38,u),e(31,N),e(32,g),e(39,T)}return n.$$set=k=>{"workflow"in k&&e(29,E=k.workflow),"namespace"in k&&e(30,F=k.namespace),"cancelInProgress"in k&&e(0,V=k.cancelInProgress),"isRunning"in k&&e(1,B=k.isRunning)},n.$$.update=()=>{n.$$.dirty[1]&256&&e(18,t=bo(T.data.settings)),n.$$.dirty[1]&256&&e(35,r=er(T.data.settings)),n.$$.dirty[1]&256&&e(34,l=ko(T.data.settings)),n.$$.dirty[1]&256&&e(36,s=xo(T.data.settings)),n.$$.dirty[0]&536870912|n.$$.dirty[1]&163&&(s?s&&(e(31,N=E==null?void 0:E.pendingChildren)===null||N===void 0?void 0:N.length)>0?e(2,y=v("workflows","reset-disabled-pending-children")):s&&(e(32,g=E==null?void 0:E.pendingChildren)===null||g===void 0?void 0:g.length)===0&&u.length===0&&e(2,y=v("workflows","reset-disabled-no-events")):e(2,y=v("workflows","reset-disabled"))),n.$$.dirty[0]&536870912|n.$$.dirty[1]&164&&e(3,a=s&&(e(33,W=E==null?void 0:E.pendingChildren)===null||W===void 0?void 0:W.length)===0&&u.length>0),n.$$.dirty[0]&12|n.$$.dirty[1]&24&&e(16,He=[{label:v("workflows","reset"),onClick:()=>e(9,S=!0),testId:"reset-button",allowed:a,tooltip:a?"":y},{label:v("workflows","signal"),onClick:()=>e(10,H=!0),testId:"signal-button",allowed:r,tooltip:r?"":v("workflows","signal-disabled")},{label:v("workflows","terminate"),onClick:()=>e(8,I=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":v("workflows","terminate-disabled")}]),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&64&&e(17,f=c.namespaceWriteDisabled(F)||!io(ho))},[V,B,y,a,M,U,x,oe,I,S,H,L,le,ee,te,m,He,f,t,h,Ie,de,_e,yt,At,Ct,Dt,Pt,Le,E,F,N,g,W,l,r,s,c,u,T,Wt,St,Vt,Mt,Ut,qt,Nt,Ft,Bt,Ht,Lt,Ot,jt,Qt,Jt]}class hr extends be{constructor(o){super(),ke(this,o,wr,gr,ve,{workflow:29,namespace:30,cancelInProgress:0,isRunning:1},null,[-1,-1,-1])}}const $r=(n,o)=>{var r;const e=n==="Running",t=(r=o==null?void 0:o.end)==null?void 0:r.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&t},ot=n=>{const o=n==null?void 0:n.indexOf("?");return o>-1?n.slice(0,o):n},ce=(n,o,e=!1)=>{const t=ot(n).split("/"),r=ot(o).split("/");if(e&&t.length!==r.length)return!1;for(let l=0;l<t.length;l++){const s=t[l],a=r[l];if(s!==a)return!1}return!0};function br(n){let o=v("workflows","back-to-workflows")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){R(t,e,r)},p:ne,d(t){t&&w(e)}}}function rt(n){let o,e,t=v("workers","last-used-version")+"",r,l,s,a,f,c=v("workers","next-version")+"",u,i,p;return l=new Ye({props:{defaultVersion:n[1]===n[6]||n[1]===n[7],active:n[1]===n[7],buildId:n[1],$$slots:{"default-worker":[vr],"overall-default-worker":[kr]},$$scope:{ctx:n}}}),i=new Ye({props:{defaultVersion:!!n[6],active:n[6]===n[7],buildId:n[6],$$slots:{"default-worker":[Tr],"overall-default-worker":[Ir]},$$scope:{ctx:n}}}),{c(){o=Q("p"),e=Q("span"),r=z(t),A(l.$$.fragment),s=O(),a=Q("p"),f=Q("span"),u=z(c),A(i.$$.fragment),this.h()},l(h){o=J(h,"P",{class:!0});var d=Y(o);e=J(d,"SPAN",{});var $=Y(e);r=G($,t),$.forEach(w),C(l.$$.fragment,d),d.forEach(w),s=j(h),a=J(h,"P",{class:!0});var T=Y(a);f=J(T,"SPAN",{});var N=Y(f);u=G(N,c),N.forEach(w),C(i.$$.fragment,T),T.forEach(w),this.h()},h(){K(o,"class","flex items-center gap-1"),K(a,"class","flex items-center gap-1")},m(h,d){R(h,o,d),q(o,e),q(e,r),D(l,o,null),R(h,s,d),R(h,a,d),q(a,f),q(f,u),D(i,a,null),p=!0},p(h,d){const $={};d&194&&($.defaultVersion=h[1]===h[6]||h[1]===h[7]),d&130&&($.active=h[1]===h[7]),d&2&&($.buildId=h[1]),d&134217858&&($.$$scope={dirty:d,ctx:h}),l.$set($);const T={};d&64&&(T.defaultVersion=!!h[6]),d&192&&(T.active=h[6]===h[7]),d&64&&(T.buildId=h[6]),d&134217920&&(T.$$scope={dirty:d,ctx:h}),i.$set(T)},i(h){p||(_(l.$$.fragment,h),_(i.$$.fragment,h),p=!0)},o(h){b(l.$$.fragment,h),b(i.$$.fragment,h),p=!1},d(h){h&&w(o),P(l),h&&w(s),h&&w(a),P(i)}}}function nt(n){let o=v("workers","overall")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){R(t,e,r)},p:ne,d(t){t&&w(e)}}}function kr(n){let o,e=n[1]===n[7]&&nt();return{c(){e&&e.c(),o=me()},l(t){e&&e.l(t),o=me()},m(t,r){e&&e.m(t,r),R(t,o,r)},p(t,r){t[1]===t[7]?e?e.p(t,r):(e=nt(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&w(o)}}}function vr(n){let o=v("workers","default")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){R(t,e,r)},p:ne,d(t){t&&w(e)}}}function lt(n){let o=v("workers","overall")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){R(t,e,r)},p:ne,d(t){t&&w(e)}}}function Ir(n){let o,e=n[6]===n[7]&&lt();return{c(){e&&e.c(),o=me()},l(t){e&&e.l(t),o=me()},m(t,r){e&&e.m(t,r),R(t,o,r)},p(t,r){t[6]===t[7]?e?e.p(t,r):(e=lt(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&w(o)}}}function Tr(n){let o=v("workers","default")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){R(t,e,r)},p:ne,d(t){t&&w(e)}}}function st(n){let o,e;return o=new Jo({props:{onChange:n[16]}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p:ne,i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function at(n){let o,e,t,r;return e=new It({props:{bold:!0,icon:"info",intent:"info",title:v("workflows","cancel-request-sent"),$$slots:{default:[Er]},$$scope:{ctx:n}}}),{c(){o=Q("div"),A(e.$$.fragment),this.h()},l(l){o=J(l,"DIV",{class:!0});var s=Y(o);C(e.$$.fragment,s),s.forEach(w),this.h()},h(){K(o,"class","mb-4")},m(l,s){R(l,o,s),D(e,o,null),r=!0},p(l,s){const a={};s&134217728&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){r||(_(e.$$.fragment,l),t||mt(()=>{t=dt(o,$t,{duration:200,delay:100}),t.start()}),r=!0)},o(l){b(e.$$.fragment,l),r=!1},d(l){l&&w(o),P(e)}}}function Er(n){let o=v("workflows","cancel-request-sent-description")+"",e;return{c(){e=z(o)},l(t){e=G(t,o)},m(t,r){R(t,e,r)},p:ne,d(t){t&&w(e)}}}function ft(n){let o,e,t,r;return e=new It({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:v("workflows","reset-success-alert-title"),$$slots:{default:[yr]},$$scope:{ctx:n}}}),{c(){o=Q("div"),A(e.$$.fragment),this.h()},l(l){o=J(l,"DIV",{class:!0});var s=Y(o);C(e.$$.fragment,s),s.forEach(w),this.h()},h(){K(o,"class","mb-4")},m(l,s){R(l,o,s),D(e,o,null),r=!0},p(l,s){const a={};s&134217777&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){r||(_(e.$$.fragment,l),t||mt(()=>{t=dt(o,$t,{duration:200,delay:100}),t.start()}),r=!0)},o(l){b(e.$$.fragment,l),r=!1},d(l){l&&w(o),P(e)}}}function Rr(n){let o;return{c(){o=z("here")},l(e){o=G(e,"here")},m(e,t){R(e,o,t)},d(e){e&&w(o)}}}function yr(n){var l,s,a,f;let o,e,t,r;return e=new Tt({props:{href:$e({namespace:n[0],workflow:(s=(l=n[4])==null?void 0:l.workflow)==null?void 0:s.id,run:n[5][(f=(a=n[4])==null?void 0:a.workflow)==null?void 0:f.runId]}),$$slots:{default:[Rr]},$$scope:{ctx:n}}}),{c(){o=z("You can find the resulting Workflow Execution "),A(e.$$.fragment),t=z(".")},l(c){o=G(c,"You can find the resulting Workflow Execution "),C(e.$$.fragment,c),t=G(c,".")},m(c,u){R(c,o,u),D(e,c,u),R(c,t,u),r=!0},p(c,u){var p,h,d,$;const i={};u&49&&(i.href=$e({namespace:c[0],workflow:(h=(p=c[4])==null?void 0:p.workflow)==null?void 0:h.id,run:c[5][($=(d=c[4])==null?void 0:d.workflow)==null?void 0:$.runId]})),u&134217728&&(i.$$scope={dirty:u,ctx:c}),e.$set(i)},i(c){r||(_(e.$$.fragment,c),r=!0)},o(c){b(e.$$.fragment,c),r=!1},d(c){c&&w(o),P(e,c),c&&w(t)}}}function Ar(n){var t;let o=((t=n[2])==null?void 0:t.historyEvents)+"",e;return{c(){e=z(o)},l(r){e=G(r,o)},m(r,l){R(r,e,l)},p(r,l){var s;l&4&&o!==(o=((s=r[2])==null?void 0:s.historyEvents)+"")&&Se(e,o)},d(r){r&&w(e)}}}function Cr(n){let o,e;return o=new Be({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Ar]},$$scope:{ctx:n}}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r&134217732&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function Dr(n){var t,r;let o=((r=(t=n[13])==null?void 0:t.pollers)==null?void 0:r.length)+"",e;return{c(){e=z(o)},l(l){e=G(l,o)},m(l,s){R(l,e,s)},p(l,s){var a,f;s&8192&&o!==(o=((f=(a=l[13])==null?void 0:a.pollers)==null?void 0:f.length)+"")&&Se(e,o)},d(l){l&&w(e)}}}function Pr(n){let o,e;return o=new Be({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r&134225920&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function it(n){let o,e;return o=new so({props:{name:"canceled",width:20,height:20}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function Wr(n){var s,a;let o,e=((a=(s=n[2])==null?void 0:s.pendingActivities)==null?void 0:a.length)+"",t,r,l=n[11]&&it();return{c(){l&&l.c(),o=O(),t=z(e)},l(f){l&&l.l(f),o=j(f),t=G(f,e)},m(f,c){l&&l.m(f,c),R(f,o,c),R(f,t,c),r=!0},p(f,c){var u,i;f[11]?l?c&2048&&_(l,1):(l=it(),l.c(),_(l,1),l.m(o.parentNode,o)):l&&(ie(),b(l,1,1,()=>{l=null}),ue()),(!r||c&4)&&e!==(e=((i=(u=f[2])==null?void 0:u.pendingActivities)==null?void 0:i.length)+"")&&Se(t,e)},i(f){r||(_(l),r=!0)},o(f){b(l),r=!1},d(f){l&&l.d(f),f&&w(o),f&&w(t)}}}function Sr(n){let o,e;return o=new Be({props:{type:n[11]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Wr]},$$scope:{ctx:n}}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r&2048&&(l.type=t[11]?"warning":"blue"),r&134219780&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function Vr(n){let o,e,t,r,l,s,a,f,c,u;return o=new Te({props:{label:v("workflows","history-tab"),id:"history-tab",href:$e({...n[12]}),active:ce(n[15].url.pathname,$e({...n[12]})),$$slots:{default:[Cr]},$$scope:{ctx:n}}}),t=new Te({props:{label:v("workflows","workers-tab"),id:"workers-tab",href:Re(n[12]),active:ce(n[15].url.pathname,Re(n[12])),$$slots:{default:[Pr]},$$scope:{ctx:n}}}),l=new Te({props:{label:v("workflows","pending-activities-tab"),id:"pending-activities-tab",href:ye(n[12]),active:ce(n[15].url.pathname,ye(n[12])),$$slots:{default:[Sr]},$$scope:{ctx:n}}}),a=new Te({props:{label:v("workflows","stack-trace-tab"),id:"stack-trace-tab",href:Ae(n[12]),active:ce(n[15].url.pathname,Ae(n[12]))}}),c=new Te({props:{label:v("workflows","queries-tab"),id:"queries-tab",href:Ce(n[12]),active:ce(n[15].url.pathname,Ce(n[12]))}}),{c(){A(o.$$.fragment),e=O(),A(t.$$.fragment),r=O(),A(l.$$.fragment),s=O(),A(a.$$.fragment),f=O(),A(c.$$.fragment)},l(i){C(o.$$.fragment,i),e=j(i),C(t.$$.fragment,i),r=j(i),C(l.$$.fragment,i),s=j(i),C(a.$$.fragment,i),f=j(i),C(c.$$.fragment,i)},m(i,p){D(o,i,p),R(i,e,p),D(t,i,p),R(i,r,p),D(l,i,p),R(i,s,p),D(a,i,p),R(i,f,p),D(c,i,p),u=!0},p(i,p){const h={};p&4096&&(h.href=$e({...i[12]})),p&36864&&(h.active=ce(i[15].url.pathname,$e({...i[12]}))),p&134217732&&(h.$$scope={dirty:p,ctx:i}),o.$set(h);const d={};p&4096&&(d.href=Re(i[12])),p&36864&&(d.active=ce(i[15].url.pathname,Re(i[12]))),p&134225920&&(d.$$scope={dirty:p,ctx:i}),t.$set(d);const $={};p&4096&&($.href=ye(i[12])),p&36864&&($.active=ce(i[15].url.pathname,ye(i[12]))),p&134219780&&($.$$scope={dirty:p,ctx:i}),l.$set($);const T={};p&4096&&(T.href=Ae(i[12])),p&36864&&(T.active=ce(i[15].url.pathname,Ae(i[12]))),a.$set(T);const N={};p&4096&&(N.href=Ce(i[12])),p&36864&&(N.active=ce(i[15].url.pathname,Ce(i[12]))),c.$set(N)},i(i){u||(_(o.$$.fragment,i),_(t.$$.fragment,i),_(l.$$.fragment,i),_(a.$$.fragment,i),_(c.$$.fragment,i),u=!0)},o(i){b(o.$$.fragment,i),b(t.$$.fragment,i),b(l.$$.fragment,i),b(a.$$.fragment,i),b(c.$$.fragment,i),u=!1},d(i){P(o,i),i&&w(e),P(t,i),i&&w(r),P(l,i),i&&w(s),P(a,i),i&&w(f),P(c,i)}}}function Mr(n){let o,e;return o=new Ao({props:{class:"flex flex-wrap gap-6",label:"workflow detail",$$slots:{default:[Vr]},$$scope:{ctx:n}}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,r){const l={};r&134264836&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function Ur(n){var x,oe;let o,e,t,r,l,s,a,f,c,u,i,p,h,d,$,T,N,g,W,E,F;t=new Tt({props:{href:`${ze({namespace:n[0]})}?${n[14]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[br]},$$scope:{ctx:n}}}),f=new Ro({props:{copyIconTitle:v("copy-icon-title"),copySuccessIconTitle:v("copy-success-icon-title"),content:(x=n[2])==null?void 0:x.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}}),i=new vo({props:{status:(oe=n[2])==null?void 0:oe.status}});let V=n[8]&&rt(n),B=n[3]&&st(n);T=new hr({props:{isRunning:n[3],cancelInProgress:n[10],workflow:n[2],namespace:n[0]}});let M=n[10]&&at(n),U=n[9]&&ft(n);return E=new yo({props:{$$slots:{default:[Mr]},$$scope:{ctx:n}}}),{c(){o=Q("header"),e=Q("div"),A(t.$$.fragment),r=O(),l=Q("div"),s=Q("div"),a=Q("h1"),A(f.$$.fragment),c=O(),u=Q("div"),A(i.$$.fragment),p=O(),V&&V.c(),h=O(),d=Q("div"),B&&B.c(),$=O(),A(T.$$.fragment),N=O(),M&&M.c(),g=O(),U&&U.c(),W=O(),A(E.$$.fragment),this.h()},l(I){o=J(I,"HEADER",{class:!0});var S=Y(o);e=J(S,"DIV",{class:!0});var H=Y(e);C(t.$$.fragment,H),H.forEach(w),r=j(S),l=J(S,"DIV",{class:!0});var L=Y(l);s=J(L,"DIV",{class:!0});var le=Y(s);a=J(le,"H1",{"data-testid":!0,class:!0});var ee=Y(a);C(f.$$.fragment,ee),ee.forEach(w),c=j(le),u=J(le,"DIV",{class:!0});var te=Y(u);C(i.$$.fragment,te),p=j(te),V&&V.l(te),te.forEach(w),le.forEach(w),h=j(L),d=J(L,"DIV",{class:!0});var m=Y(d);B&&B.l(m),$=j(m),C(T.$$.fragment,m),m.forEach(w),L.forEach(w),N=j(S),M&&M.l(S),g=j(S),U&&U.l(S),W=j(S),C(E.$$.fragment,S),S.forEach(w),this.h()},h(){K(e,"class","mb-4 block"),K(a,"data-testid","workflow-id-heading"),K(a,"class","overflow-hidden text-2xl font-medium"),K(u,"class","flex flex-wrap items-center gap-4"),K(s,"class","flex w-full flex-col justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),K(d,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end"),K(l,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),K(o,"class","mb-4 flex flex-col gap-1")},m(I,S){R(I,o,S),q(o,e),D(t,e,null),q(o,r),q(o,l),q(l,s),q(s,a),D(f,a,null),q(s,c),q(s,u),D(i,u,null),q(u,p),V&&V.m(u,null),q(l,h),q(l,d),B&&B.m(d,null),q(d,$),D(T,d,null),q(o,N),M&&M.m(o,null),q(o,g),U&&U.m(o,null),q(o,W),D(E,o,null),F=!0},p(I,[S]){var m,y;const H={};S&16385&&(H.href=`${ze({namespace:I[0]})}?${I[14]}`),S&134217728&&(H.$$scope={dirty:S,ctx:I}),t.$set(H);const L={};S&4&&(L.content=(m=I[2])==null?void 0:m.id),f.$set(L);const le={};S&4&&(le.status=(y=I[2])==null?void 0:y.status),i.$set(le),I[8]?V?(V.p(I,S),S&256&&_(V,1)):(V=rt(I),V.c(),_(V,1),V.m(u,null)):V&&(ie(),b(V,1,1,()=>{V=null}),ue()),I[3]?B?(B.p(I,S),S&8&&_(B,1)):(B=st(I),B.c(),_(B,1),B.m(d,$)):B&&(ie(),b(B,1,1,()=>{B=null}),ue());const ee={};S&8&&(ee.isRunning=I[3]),S&1024&&(ee.cancelInProgress=I[10]),S&4&&(ee.workflow=I[2]),S&1&&(ee.namespace=I[0]),T.$set(ee),I[10]?M?(M.p(I,S),S&1024&&_(M,1)):(M=at(I),M.c(),_(M,1),M.m(o,g)):M&&(ie(),b(M,1,1,()=>{M=null}),ue()),I[9]?U?(U.p(I,S),S&512&&_(U,1)):(U=ft(I),U.c(),_(U,1),U.m(o,W)):U&&(ie(),b(U,1,1,()=>{U=null}),ue());const te={};S&134264836&&(te.$$scope={dirty:S,ctx:I}),E.$set(te)},i(I){F||(_(t.$$.fragment,I),_(f.$$.fragment,I),_(i.$$.fragment,I),_(V),_(B),_(T.$$.fragment,I),_(M),_(U),_(E.$$.fragment,I),F=!0)},o(I){b(t.$$.fragment,I),b(f.$$.fragment,I),b(i.$$.fragment,I),b(V),b(B),b(T.$$.fragment,I),b(M),b(U),b(E.$$.fragment,I),F=!1},d(I){I&&w(o),P(t),P(f),P(i),V&&V.d(),B&&B.d(),P(T),M&&M.d(),U&&U.d(),P(E)}}}const ut=15e3;function qr(n,o,e){let t,r,l,s,a,f,c,u,i,p,h,d,$,T,N,g,W,E,F;Z(n,We,H=>e(4,$=H)),Z(n,Et,H=>e(5,T=H)),Z(n,Pe,H=>e(24,N=H)),Z(n,pe,H=>e(25,g=H)),Z(n,De,H=>e(26,W=H)),Z(n,Co,H=>e(14,E=H)),Z(n,qe,H=>e(15,F=H));var V,B,M,U,x;let{namespace:oe}=o,I;pt(()=>{a&&W==="on"&&(clearInterval(I),e(22,I=setInterval(()=>re(pe,g=Date.now(),g),ut)))});const S=()=>{W==="on"?(re(De,W="off",W),clearInterval(I)):(re(pe,g=Date.now(),g),re(De,W="on",W),clearInterval(I),e(22,I=setInterval(()=>re(pe,g=Date.now(),g),ut)))};return Ue(()=>{clearInterval(I)}),n.$$set=H=>{"namespace"in H&&e(0,oe=H.namespace)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{workflow:t,workers:r,compatibility:l}=$,t,(e(13,r),e(4,$)),(e(23,l),e(4,$))),n.$$.dirty&5&&e(12,s={namespace:oe,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&131088&&e(3,a=e(17,V=$==null?void 0:$.workflow)===null||V===void 0?void 0:V.isRunning),n.$$.dirty&262160&&e(11,f=["Terminated","TimedOut","Canceled"].includes(e(18,B=$.workflow)===null||B===void 0?void 0:B.status)),n.$$.dirty&4194312&&(a||clearInterval(I)),n.$$.dirty&17301520&&e(10,c=$r(e(19,M=$==null?void 0:$.workflow)===null||M===void 0?void 0:M.status,N)),n.$$.dirty&1048624&&e(9,u=Do(T,e(20,U=$==null?void 0:$.workflow)===null||U===void 0?void 0:U.runId)),n.$$.dirty&2097156&&e(8,i=e(21,x=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||x===void 0?void 0:x.useVersioning),n.$$.dirty&4&&e(1,p=Po(t)),n.$$.dirty&8388608&&e(7,h=Wo(l)),n.$$.dirty&8388610&&e(6,d=So(l,p))},[oe,p,t,a,$,T,d,h,i,u,c,f,s,r,E,F,S,V,B,M,U,x,I,l,N]}class Nr extends be{constructor(o){super(),ke(this,o,qr,Ur,ve,{namespace:0})}}async function Fr({activity:n,namespace:o,settings:e,accessToken:t},{convertWithCodec:r=No,convertWithWebsocket:l=Fo,decodeAttributes:s=Bo,encoderEndpoint:a=qo}={}){const f=Ho(e,a),c=Lo(e,Uo),u={...e,codec:{...e==null?void 0:e.codec,endpoint:f,passAccessToken:c}},i=f?await r({attributes:n,namespace:o,settings:u,accessToken:t}):await l(n);return s(i)}const Br=async({activity:n,namespace:o,settings:e,accessToken:t})=>await Fr({activity:n,namespace:o,settings:e,accessToken:t}),Hr=async(n,o,e,t)=>{const r=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of r){const a=await Br({activity:s,namespace:o,settings:e,accessToken:t});l.push(a)}return l};function Lr(n){let o,e,t;o=new Nr({props:{namespace:n[0].params.namespace}});const r=n[7].default,l=_t(r,n,n[6],null);return{c(){A(o.$$.fragment),e=O(),l&&l.c()},l(s){C(o.$$.fragment,s),e=j(s),l&&l.l(s)},m(s,a){D(o,s,a),R(s,e,a),l&&l.m(s,a),t=!0},p(s,a){const f={};a&1&&(f.namespace=s[0].params.namespace),o.$set(f),l&&l.p&&(!t||a&64)&&gt(l,r,s,s[6],t?ht(r,s[6],a,null):wt(s[6]),null)},i(s){t||(_(o.$$.fragment,s),_(l,s),t=!0)},o(s){b(o.$$.fragment,s),b(l,s),t=!1},d(s){P(o,s),s&&w(e),l&&l.d(s)}}}function Or(n){let o,e;return o=new Gt({}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p:ne,i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function jr(n){let o,e,t,r;const l=[Or,Lr],s=[];function a(f,c){return f[1].workflow?1:0}return e=a(n),t=s[e]=l[e](n),{c(){o=Q("div"),t.c(),this.h()},l(f){o=J(f,"DIV",{class:!0});var c=Y(o);t.l(c),c.forEach(w),this.h()},h(){K(o,"class","flex h-full flex-col gap-6")},m(f,c){R(f,o,c),s[e].m(o,null),r=!0},p(f,[c]){let u=e;e=a(f),e===u?s[e].p(f,c):(ie(),b(s[u],1,1,()=>{s[u]=null}),ue(),t=s[e],t?t.p(f,c):(t=s[e]=l[e](f),t.c()),_(t,1),t.m(o,null))},i(f){r||(_(t),r=!0)},o(f){b(t),r=!1},d(f){f&&w(o),s[e].d()}}}function Qr(n,o,e){let t,r,l,s,a,f,c,u,i,p;Z(n,Pe,g=>e(8,s=g)),Z(n,We,g=>e(1,a=g)),Z(n,Qe,g=>e(9,f=g)),Z(n,Oe,g=>e(10,c=g)),Z(n,qe,g=>e(0,u=g)),Z(n,pe,g=>e(5,i=g)),Z(n,vt,g=>e(11,p=g));let{$$slots:h={},$$scope:d}=o;const $=async(g,W)=>{var E;if(!((E=g==null?void 0:g.mostRecentWorkerVersionStamp)===null||E===void 0)&&E.useVersioning)return await To({queue:W,namespace:t})},T=async({namespace:g,workers:W,taskQueue:E})=>{if(!Vo(W.pollers))return;const V=Mo(W.pollers);return await Eo({namespace:g,buildIds:V,taskQueue:E})},N=async(g,W,E)=>{const{settings:F}=u.data,V=await _o({namespace:g,workflowId:W,runId:E}),{taskQueue:B}=V,M=await Io({queue:B,namespace:g}),U=await $(V,B),x=await T({namespace:g,workers:M,taskQueue:B});V.pendingActivities=await Hr(V,g,F,p==null?void 0:p.accessToken),re(We,a={workflow:V,workers:M,compatibility:U,reachability:x},a);const oe=await ro({namespace:g,workflowId:W,runId:E,settings:F,accessToken:p==null?void 0:p.accessToken});re(Pe,s=oe,s)};return pt(()=>{const g=u.url.searchParams.get("sort");g&&re(Oe,c=g,c)}),Ue(()=>{re(Qe,f=null,f),re(We,a=$o,a),re(Pe,s=oo,s)}),n.$$set=g=>{"$$scope"in g&&e(6,d=g.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(4,{namespace:t,workflow:r,run:l}=u.params,t,(e(3,r),e(0,u)),(e(2,l),e(0,u))),n.$$.dirty&60&&N(t,r,l)},[u,a,l,r,t,i,d,h]}class Jr extends be{constructor(o){super(),ke(this,o,Qr,jr,ve,{})}}const Rt={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},Yr=bt(Rt),zr=()=>{Yr.set(Rt)};function Gr(n){let o;const e=n[0].default,t=_t(e,n,n[1],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),o=!0},p(r,l){t&&t.p&&(!o||l&2)&&gt(t,e,r,r[1],o?ht(e,r[1],l,null):wt(r[1]),null)},i(r){o||(_(t,r),o=!0)},o(r){b(t,r),o=!1},d(r){t&&t.d(r)}}}function Kr(n){let o,e;return o=new Jr({props:{$$slots:{default:[Gr]},$$scope:{ctx:n}}}),{c(){A(o.$$.fragment)},l(t){C(o.$$.fragment,t)},m(t,r){D(o,t,r),e=!0},p(t,[r]){const l={};r&2&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){P(o,t)}}}function Zr(n,o,e){let{$$slots:t={},$$scope:r}=o;return Ue(()=>{zr()}),n.$$set=l=>{"$$scope"in l&&e(1,r=l.$$scope)},[t,r]}class Hn extends be{constructor(o){super(),ke(this,o,Zr,Kr,ve,{})}}export{Hn as default};
