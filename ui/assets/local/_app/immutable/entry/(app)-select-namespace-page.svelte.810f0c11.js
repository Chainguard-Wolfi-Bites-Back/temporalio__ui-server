import{S as be,b as ke,a as we,m as H,p as N,q as S,k,v as K,av as re,a0 as Te,f as j,L as b,am as Le,T as le,z as ne,aa as Ie,ab as Ve,h as oe,j as R,g as A,o as He,G as Ne,c as B,d as q,H as Se,I as Ue,J as ze,t as se,A as _e,w as X,x as Y,C as Z,D as x,u as w,E as $,_ as fe,V as Pe,F as ee,r as Re,K as ae,a2 as Ae,P as Ce,n as ye,e as he,R as te,y as Me}from"../chunks/index.f15f06ee.js";import{g as Oe}from"../chunks/navigation.1bce1f79.js";import{p as De}from"../chunks/stores.c0e11f2d.js";import{P as Fe}from"../chunks/page-title.60fc2164.js";import{E as Ee}from"../chunks/empty-state.39c64288.js";import{I as We}from"../chunks/icon.6a988f87.js";import{t as O}from"../chunks/translate.2e1ad657.js";import{d as Be}from"../chunks/workflow-service.c83d9824.js";import{l as me,n as qe}from"../chunks/namespaces.43fd8926.js";import{t as je}from"../chunks/toaster.926220f2.js";import{r as Ge}from"../chunks/route-for.2719f3cd.js";function pe(s,e,t){const l=s.slice();return l[23]=e[t],l}const Je=s=>({item:s&16}),de=s=>({item:s[23].data});function Ke(s){let e;return{c(){e=X("Missing template")},l(t){e=Y(t,"Missing template")},m(t,l){j(t,e,l)},d(t){t&&k(e)}}}function ge(s,e){let t,l,o;const h=e[14].default,u=Ne(h,e,e[13],de),_=u||Ke();return{key:s,first:null,c(){t=H("svelte-virtual-list-row"),_&&_.c(),l=B(),this.h()},l(a){t=N(a,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var r=S(t);_&&_.l(r),l=q(r),r.forEach(k),this.h()},h(){re(t,"class","svelte-1kdxoed"),this.first=t},m(a,r){j(a,t,r),_&&_.m(t,null),b(t,l),o=!0},p(a,r){e=a,u&&u.p&&(!o||r&8208)&&Se(u,h,e,e[13],o?ze(h,e[13],r,Je):Ue(e[13]),de)},i(a){o||(R(_,a),o=!0)},o(a){A(_,a),o=!1},d(a){a&&k(t),_&&_.d(a)}}}function Qe(s){let e,t,l=[],o=new Map,h,u,_,a,r=s[4];const g=c=>c[23].index;for(let c=0;c<r.length;c+=1){let n=pe(s,r,c),i=g(n);o.set(i,l[c]=ge(i,n))}return{c(){e=H("svelte-virtual-list-viewport"),t=H("svelte-virtual-list-contents");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){e=N(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var n=S(e);t=N(n,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var i=S(t);for(let p=0;p<l.length;p+=1)l[p].l(i);i.forEach(k),n.forEach(k),this.h()},h(){K(t,"padding-top",s[5]+"px"),K(t,"padding-bottom",s[6]+"px"),re(t,"class","svelte-1kdxoed"),K(e,"height",s[0]),re(e,"class","svelte-1kdxoed"),Te(()=>s[17].call(e))},m(c,n){j(c,e,n),b(e,t);for(let i=0;i<l.length;i+=1)l[i].m(t,null);s[15](t),s[16](e),h=Le(e,s[17].bind(e)),u=!0,_||(a=le(e,"scroll",s[7]),_=!0)},p(c,[n]){n&8208&&(r=c[4],ne(),l=Ie(l,n,g,1,c,r,o,t,Ve,ge,null,pe),oe()),(!u||n&32)&&K(t,"padding-top",c[5]+"px"),(!u||n&64)&&K(t,"padding-bottom",c[6]+"px"),(!u||n&1)&&K(e,"height",c[0])},i(c){if(!u){for(let n=0;n<r.length;n+=1)R(l[n]);u=!0}},o(c){for(let n=0;n<l.length;n+=1)A(l[n]);u=!1},d(c){c&&k(e);for(let n=0;n<l.length;n+=1)l[n].d();s[15](null),s[16](null),h(),_=!1,a()}}}function Xe(s,e,t){let{$$slots:l={},$$scope:o}=e,{items:h}=e,{height:u="100%"}=e,{itemHeight:_=void 0}=e,{start:a=0}=e,{end:r=0}=e,g=[],c,n,i,p=0,D,U,F=0,W=0,z;async function I(f,M,y){const{scrollTop:P}=n;await se();let L=F-P,v=a;for(;L<M&&v<f.length;){let d=c[v-a];d||(t(9,r=v+1),await se(),d=c[v-a]);const V=g[v]=y||d.offsetHeight;L+=V,v+=1}t(9,r=v);const m=f.length-r;z=(F+L)/r,t(6,W=m*z),g.length=f.length}async function Q(){const{scrollTop:f}=n,M=a;for(let v=0;v<c.length;v+=1)g[a+v]=_||c[v].offsetHeight;let y=0,P=0;for(;y<h.length;){const v=g[y]||z;if(P+v>f){t(8,a=y),t(5,F=P);break}P+=v,y+=1}for(;y<h.length&&(P+=g[y]||z,y+=1,!(P>f+p)););t(9,r=y);const L=h.length-r;for(z=P/r;y<h.length;)g[y++]=z;if(t(6,W=L*z),a<M){await se();let v=0,m=0;for(let V=a;V<M;V+=1)c[V-a]&&(v+=g[V],m+=_||c[V-a].offsetHeight);const d=m-v;n.scrollTo(0,f+d)}}He(()=>{c=i.getElementsByTagName("svelte-virtual-list-row"),t(12,U=!0)});function C(f){_e[f?"unshift":"push"](()=>{i=f,t(3,i)})}function E(f){_e[f?"unshift":"push"](()=>{n=f,t(2,n)})}function T(){p=this.offsetHeight,t(1,p)}return s.$$set=f=>{"items"in f&&t(10,h=f.items),"height"in f&&t(0,u=f.height),"itemHeight"in f&&t(11,_=f.itemHeight),"start"in f&&t(8,a=f.start),"end"in f&&t(9,r=f.end),"$$scope"in f&&t(13,o=f.$$scope)},s.$$.update=()=>{s.$$.dirty&1792&&t(4,D=h.slice(a,r).map((f,M)=>({index:M+a,data:f}))),s.$$.dirty&7170&&U&&I(h,p,_)},[u,p,n,i,D,F,W,Q,a,r,h,_,U,o,l,C,E,T]}class Ye extends be{constructor(e){super(),ke(this,e,Xe,Qe,we,{items:10,height:0,itemHeight:11,start:8,end:9})}}function ve(s){const e=s[10]===s[2][0];s[11]=e;const t=s[10]===s[2][s[2].length-1];s[12]=t}function Ze(s){let e,t;return e=new Ee({props:{title:O("namespaces","select-namespace-empty-state")}}),{c(){Z(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,o){$(e,l,o),t=!0},p:ye,i(l){t||(R(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function xe(s){let e,t,l,o;const h=[et,$e],u=[];function _(a,r){return a[2].length?0:1}return e=_(s),t=u[e]=h[e](s),{c(){t.c(),l=he()},l(a){t.l(a),l=he()},m(a,r){u[e].m(a,r),j(a,l,r),o=!0},p(a,r){let g=e;e=_(a),e===g?u[e].p(a,r):(ne(),A(u[g],1,1,()=>{u[g]=null}),oe(),t=u[e],t?t.p(a,r):(t=u[e]=h[e](a),t.c()),R(t,1),t.m(l.parentNode,l))},i(a){o||(R(t),o=!0)},o(a){A(t),o=!1},d(a){u[e].d(a),a&&k(l)}}}function $e(s){let e,t;return e=new Ee({props:{title:O("no-results")}}),{c(){Z(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,o){$(e,l,o),t=!0},p:ye,i(l){t||(R(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function et(s){let e,t;return e=new Ye({props:{items:s[2],itemHeight:50,$$slots:{default:[tt,({item:l})=>({10:l}),({item:l})=>l?1024:0]},$$scope:{ctx:s}}}),{c(){Z(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,o){$(e,l,o),t=!0},p(l,o){const h={};o&4&&(h.items=l[2]),o&9220&&(h.$$scope={dirty:o,ctx:l}),e.$set(h)},i(l){t||(R(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function tt(s){ve(s);let e,t,l=s[10].namespace+"",o,h,u;function _(){return s[8](s[10])}return{c(){e=H("div"),t=H("button"),o=X(l),this.h()},l(a){e=N(a,"DIV",{class:!0});var r=S(e);t=N(r,"BUTTON",{class:!0});var g=S(t);o=Y(g,l),g.forEach(k),r.forEach(k),this.h()},h(){w(t,"class","w-full p-3 text-left"),w(e,"class","link-item svelte-8ihh0f"),te(e,"first",s[11]),te(e,"last",s[12])},m(a,r){j(a,e,r),b(e,t),b(t,o),h||(u=le(t,"click",_),h=!0)},p(a,r){s=a,ve(s),r&1024&&l!==(l=s[10].namespace+"")&&Me(o,l),r&1028&&te(e,"first",s[11]),r&1028&&te(e,"last",s[12])},d(a){a&&k(e),h=!1,u()}}}function lt(s){let e,t,l,o,h=O("namespaces","select-namespace-welcome")+"",u,_,a,r=O("namespaces","select-namespace")+"",g,c,n,i,p,D,U,F=O("namespaces","search-namespaces")+"",W,z,I,Q,C,E,T,f,M,y;e=new Fe({props:{title:O("namespaces","namespace-select-header"),url:s[3].url.href}}),p=new We({props:{name:"search"}});const P=[xe,Ze],L=[];function v(m,d){return m[1].length?0:1}return E=v(s),T=L[E]=P[E](s),{c(){Z(e.$$.fragment),t=B(),l=H("div"),o=H("h1"),u=X(h),_=B(),a=H("p"),g=X(r),c=B(),n=H("form"),i=H("div"),Z(p.$$.fragment),D=B(),U=H("label"),W=X(F),z=B(),I=H("input"),Q=B(),C=H("ul"),T.c(),this.h()},l(m){x(e.$$.fragment,m),t=q(m),l=N(m,"DIV",{class:!0});var d=S(l);o=N(d,"H1",{class:!0});var V=S(o);u=Y(V,h),V.forEach(k),_=q(d),a=N(d,"P",{class:!0});var G=S(a);g=Y(G,r),G.forEach(k),c=q(d),n=N(d,"FORM",{class:!0,role:!0});var J=S(n);i=N(J,"DIV",{class:!0});var ie=S(i);x(p.$$.fragment,ie),ie.forEach(k),D=q(J),U=N(J,"LABEL",{class:!0,for:!0});var ce=S(U);W=Y(ce,F),ce.forEach(k),z=q(J),I=N(J,"INPUT",{class:!0,placeholder:!0,type:!0,id:!0}),J.forEach(k),Q=q(d),C=N(d,"UL",{class:!0,"aria-label":!0});var ue=S(C);T.l(ue),ue.forEach(k),d.forEach(k),this.h()},h(){w(o,"class","my-4 text-3xl"),w(a,"class","mb-8"),w(i,"class","ml-4 mr-2"),w(U,"class","sr-only"),w(U,"for","search-namespaces"),w(I,"class","w-full"),w(I,"placeholder",O("search")),w(I,"type","search"),w(I,"id","search-namespaces"),w(n,"class","search svelte-8ihh0f"),w(n,"role","search"),w(C,"class","h-screen w-full"),w(C,"aria-label",O("namespaces")),w(l,"class","w-full p-8 xl:w-1/2")},m(m,d){$(e,m,d),j(m,t,d),j(m,l,d),b(l,o),b(o,u),b(l,_),b(l,a),b(a,g),b(l,c),b(l,n),b(n,i),$(p,i,null),b(n,D),b(n,U),b(U,W),b(n,z),b(n,I),fe(I,s[0]),b(l,Q),b(l,C),L[E].m(C,null),f=!0,M||(y=[le(I,"keydown",Pe(s[6])),le(I,"input",s[7])],M=!0)},p(m,[d]){const V={};d&8&&(V.url=m[3].url.href),e.$set(V),d&1&&fe(I,m[0]);let G=E;E=v(m),E===G?L[E].p(m,d):(ne(),A(L[G],1,1,()=>{L[G]=null}),oe(),T=L[E],T?T.p(m,d):(T=L[E]=P[E](m),T.c()),R(T,1),T.m(C,null))},i(m){f||(R(e.$$.fragment,m),R(p.$$.fragment,m),R(T),f=!0)},o(m){A(e.$$.fragment,m),A(p.$$.fragment,m),A(T),f=!1},d(m){ee(e,m),m&&k(t),m&&k(l),ee(p),L[E].d(),M=!1,Re(y)}}}function st(s,e,t){let l,o,h,u,_,a;ae(s,me,i=>t(9,u=i)),ae(s,qe,i=>t(5,_=i)),ae(s,De,i=>t(3,a=i));let r="";function g(i){Ce.call(this,s,i)}function c(){r=this.value,t(0,r)}const n=i=>i==null?void 0:i.onClick(i.namespace);return s.$$.update=()=>{s.$$.dirty&32&&t(4,l=_.map(i=>{var p;return(p=i==null?void 0:i.namespaceInfo)===null||p===void 0?void 0:p.name})),s.$$.dirty&16&&t(1,o=l.map(i=>({namespace:i,onClick:async p=>{const{authorized:D}=await Be(p);D?(Ae(me,u=p,u),Oe(Ge({namespace:p}))):je.push({variant:"error",message:O("namespaces","unauthorized-namespace-error")})}}))),s.$$.dirty&3&&t(2,h=o.filter(({namespace:i})=>i.includes(r)))},[r,o,h,a,l,_,g,c,n]}class pt extends be{constructor(e){super(),ke(this,e,st,lt,we,{})}}export{pt as default};
