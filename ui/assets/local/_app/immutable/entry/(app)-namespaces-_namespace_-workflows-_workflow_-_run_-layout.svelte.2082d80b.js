import{S as ke,b as ve,a as Ie,C as S,D as W,E as V,j as h,g as I,F as M,K,i as ct,A as oe,Z as re,m as L,c as J,p as O,q as j,k as w,d as Y,u as H,f as C,L as D,_ as ne,a6 as Me,w as z,x as G,Q as jt,y as be,e as me,z as ce,h as pe,n as se,a5 as le,o as pt,aj as Ue,a3 as mt,a4 as dt,G as _t,H as gt,I as wt,J as ht}from"../chunks/index.efded970.js";import{p as Ne}from"../chunks/stores.d9513992.js";import{L as Qt}from"../chunks/loading.32266c92.js";import{d as Jt,f as $t}from"../chunks/menu.e6ce0580.js";import{T as Yt}from"../chunks/toggle-switch.f8f2487a.js";import{T as qe}from"../chunks/tooltip.407e84a1.js";import{t as T}from"../chunks/translate.230dcc19.js";import{a as De,e as Oe}from"../chunks/event-view.62b44238.js";import{I as Fe}from"../chunks/input.551fa648.js";import{S as zt,O as Gt}from"../chunks/option.345f2630.js";import{R as he,w as Kt,a as Zt,f as je,A as Qe}from"../chunks/workflow-terminate-enabled.d56fddc4.js";import{r as bt,e as Se,t as Je,i as Xt,f as xt}from"../chunks/events-service.f3063bc7.js";import{B as eo}from"../chunks/button.8e56bc18.js";import{C as to}from"../chunks/code-block.6090192d.js";import{B as Be}from"../chunks/badge.90a170d0.js";import{I as oo}from"../chunks/icon.91a9bf44.js";import{M as ro}from"../chunks/menu-divider.99a2857a.js";import{M as ye}from"../chunks/modal.f25fffb9.js";import{S as no}from"../chunks/split-button.77172703.js";import{w as lo,t as so,c as ao,s as fo,r as io,f as uo}from"../chunks/workflow-service.c993e067.js";import{a as kt}from"../chunks/auth-user.58d364c3.js";import{c as co}from"../chunks/core-user.c3fa437a.js";import{p as po}from"../chunks/persist-store.b76d8148.js";import{s as mo}from"../chunks/settings.f4bcc2b2.js";import{t as Ve}from"../chunks/toaster.fd2b66a2.js";import{r as ue,w as We,i as _o}from"../chunks/workflow-run.b0b7432d.js";import{W as go}from"../chunks/workflow-status.2f87b4a5.js";import{A as vt}from"../chunks/alert.74b3d5fb.js";import{C as Ye,g as wo,a as ho,b as $o}from"../chunks/pollers-service.7e9dc4d6.js";import{C as bo}from"../chunks/copyable.6f6014ce.js";import{L as It}from"../chunks/link.cac19769.js";import{T as ko,a as vo,b as Te}from"../chunks/tab.492ff65b.js";import{w as Io}from"../chunks/workflows.4f0d89ef.js";import{h as Eo}from"../chunks/has.f5323580.js";import{r as ze,f as $e,g as Ae,h as Re,i as Ce,j as Pe}from"../chunks/route-for.f0c739e2.js";import{g as To,a as yo,b as Ao,p as Ro,c as Co}from"../chunks/task-queue-compatibility.cf5696f8.js";import{p as Po,c as Do}from"../chunks/data-encoder-config.28ddff16.js";import{c as So,a as Wo,d as Vo}from"../chunks/decode-payload.1100f8eb.js";import{g as Mo,a as Uo}from"../chunks/get-codec.7a4acd59.js";import{w as No}from"../chunks/index.c0615b9d.js";function qo(n){let t,e;return t=new Yt({props:{label:T("workflows","auto-refresh"),labelPosition:"left",id:"autorefresh",checked:n[1]}}),t.$on("change",function(){ct(n[0])&&n[0].apply(this,arguments)}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){n=o;const l={};r&2&&(l.checked=n[1]),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Fo(n){let t,e;return t=new qe({props:{bottomLeft:!0,text:T("workflows","auto-refresh-tooltip"),$$slots:{default:[qo]},$$scope:{ctx:n}}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,[r]){const l={};r&11&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Bo(n,t,e){let o,r;K(n,De,s=>e(2,r=s));let{onChange:l}=t;return n.$$set=s=>{"onChange"in s&&e(0,l=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&e(1,o=r==="on")},[l,o,r]}class Ho extends ke{constructor(t){super(),ve(this,t,Bo,Fo,Ie,{onChange:0})}}function Ge(n,t,e){const o=n.slice();return o[8]=t[e].value,o[9]=t[e].label,o}function Ke(n,t,e){const o=n.slice();return o[12]=t[e],o}function Ze(n){let t,e,o,r,l,s,f,i,c=n[12].eventId+"",u,a,p,g=n[12].eventType+"",$,v,d,k,_;function P(){return n[5](n[12])}return{c(){t=L("li"),e=L("label"),o=L("input"),s=J(),f=L("p"),i=L("span"),u=z(c),a=J(),p=L("span"),$=z(g),d=J(),this.h()},l(y){t=O(y,"LI",{class:!0});var A=j(t);e=O(A,"LABEL",{class:!0,for:!0});var R=j(e);o=O(R,"INPUT",{type:!0,name:!0,id:!0}),s=Y(R),f=O(R,"P",{class:!0});var U=j(f);i=O(U,"SPAN",{class:!0});var B=j(i);u=G(B,c),B.forEach(w),a=Y(U),p=O(U,"SPAN",{class:!0});var F=j(p);$=G(F,g),F.forEach(w),U.forEach(w),R.forEach(w),d=Y(A),A.forEach(w),this.h()},h(){H(o,"type","radio"),o.checked=r=n[12].id===n[2],H(o,"name","reset-event-id"),H(o,"id",l="reset-event-"+n[12].id),H(i,"class","col-span-1 font-medium text-gray-500"),H(p,"class","font-semibold"),H(f,"class","grid grid-cols-8"),H(e,"class","flex h-full w-full cursor-pointer flex-row items-center gap-2 px-4 py-2"),H(e,"for",v="reset-event-"+n[12].id),H(t,"class","h-10 w-full border-b border-primary from-blue-100 to-purple-100 bg-fixed first-of-type:rounded-t last-of-type:rounded-b last-of-type:border-none hover:bg-gradient-to-br")},m(y,A){C(y,t,A),D(t,e),D(e,o),D(e,s),D(e,f),D(f,i),D(i,u),D(f,a),D(f,p),D(p,$),D(t,d),k||(_=jt(o,"click",P),k=!0)},p(y,A){n=y,A&12&&r!==(r=n[12].id===n[2])&&(o.checked=r),A&8&&l!==(l="reset-event-"+n[12].id)&&H(o,"id",l),A&8&&c!==(c=n[12].eventId+"")&&be(u,c),A&8&&g!==(g=n[12].eventType+"")&&be($,g),A&8&&v!==(v="reset-event-"+n[12].id)&&H(e,"for",v)},d(y){y&&w(t),k=!1,_()}}}function Lo(n){let t=n[9]+"",e,o;return{c(){e=z(t),o=J()},l(r){e=G(r,t),o=Y(r)},m(r,l){C(r,e,l),C(r,o,l)},p:se,d(r){r&&w(e),r&&w(o)}}}function Xe(n){let t,e;return t=new Gt({props:{value:n[8],$$slots:{default:[Lo]},$$scope:{ctx:n}}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){const l={};r&32768&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Oo(n){let t,e,o=n[4],r=[];for(let s=0;s<o.length;s+=1)r[s]=Xe(Ge(n,o,s));const l=s=>I(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=me()},l(s){for(let f=0;f<r.length;f+=1)r[f].l(s);t=me()},m(s,f){for(let i=0;i<r.length;i+=1)r[i].m(s,f);C(s,t,f),e=!0},p(s,f){if(f&16){o=s[4];let i;for(i=0;i<o.length;i+=1){const c=Ge(s,o,i);r[i]?(r[i].p(c,f),h(r[i],1)):(r[i]=Xe(c),r[i].c(),h(r[i],1),r[i].m(t.parentNode,t))}for(ce(),i=o.length;i<r.length;i+=1)l(i);pe()}},i(s){if(!e){for(let f=0;f<o.length;f+=1)h(r[f]);e=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)I(r[f]);e=!1},d(s){Me(r,s),s&&w(t)}}}function jo(n){let t,e,o,r,l,s,f,i,c,u=n[3],a=[];for(let d=0;d<u.length;d+=1)a[d]=Ze(Ke(n,u,d));function p(d){n[6](d)}let g={label:T("workflows","reset-reapply-type-label"),id:"reset-reapply-type-select","data-testid":"workflow-reset-reapply-type-select",$$slots:{default:[Oo]},$$scope:{ctx:n}};n[0]!==void 0&&(g.value=n[0]),r=new zt({props:g}),oe.push(()=>re(r,"value",p));function $(d){n[7](d)}let v={id:"reset-reason",label:T("reason")};return n[1]!==void 0&&(v.value=n[1]),f=new Fe({props:v}),oe.push(()=>re(f,"value",$)),{c(){t=L("div"),e=L("ul");for(let d=0;d<a.length;d+=1)a[d].c();o=J(),S(r.$$.fragment),s=J(),S(f.$$.fragment),this.h()},l(d){t=O(d,"DIV",{class:!0});var k=j(t);e=O(k,"UL",{class:!0});var _=j(e);for(let P=0;P<a.length;P+=1)a[P].l(_);_.forEach(w),o=Y(k),W(r.$$.fragment,k),s=Y(k),W(f.$$.fragment,k),k.forEach(w),this.h()},h(){H(e,"class","max-h-40 w-full overflow-y-scroll rounded border border-primary"),H(t,"class","flex w-full flex-col gap-4")},m(d,k){C(d,t,k),D(t,e);for(let _=0;_<a.length;_+=1)a[_].m(e,null);D(t,o),V(r,t,null),D(t,s),V(f,t,null),c=!0},p(d,[k]){if(k&12){u=d[3];let y;for(y=0;y<u.length;y+=1){const A=Ke(d,u,y);a[y]?a[y].p(A,k):(a[y]=Ze(A),a[y].c(),a[y].m(e,null))}for(;y<a.length;y+=1)a[y].d(1);a.length=u.length}const _={};k&32768&&(_.$$scope={dirty:k,ctx:d}),!l&&k&1&&(l=!0,_.value=d[0],ne(()=>l=!1)),r.$set(_);const P={};!i&&k&2&&(i=!0,P.value=d[1],ne(()=>i=!1)),f.$set(P)},i(d){c||(h(r.$$.fragment,d),h(f.$$.fragment,d),c=!0)},o(d){I(r.$$.fragment,d),I(f.$$.fragment,d),c=!1},d(d){d&&w(t),Me(a,d),M(r),M(f)}}}function Qo(n,t,e){let o;K(n,bt,a=>e(3,o=a));let{resetReapplyType:r=he.Unspecified}=t,{reason:l=""}=t,{eventId:s}=t;const f=[{value:he.Unspecified,label:T("workflows","reset-reapply-all")},{value:he.Signal,label:T("workflows","reset-reapply-signals-only")},{value:he.None,label:T("workflows","reset-reapply-none")}],i=a=>e(2,s=a.id);function c(a){r=a,e(0,r)}function u(a){l=a,e(1,l)}return n.$$set=a=>{"resetReapplyType"in a&&e(0,r=a.resetReapplyType),"reason"in a&&e(1,l=a.reason),"eventId"in a&&e(2,s=a.eventId)},[r,l,s,o,f,i,c,u]}class Jo extends ke{constructor(t){super(),ve(this,t,Qo,jo,Ie,{resetReapplyType:0,reason:1,eventId:2})}}const Et=po("resetWorkflows",{}),Yo=n=>!n.disableWriteActions&&!n.workflowResetDisabled,zo=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function xe(n,t,e){const o=n.slice();return o[58]=t[e].onClick,o[59]=t[e].destructive,o[60]=t[e].label,o[61]=t[e].allowed,o[62]=t[e].testId,o[63]=t[e].tooltip,o}function Go(n){let t,e;return t=new qe({props:{bottomRight:!0,width:200,text:n[2],hide:n[3],$$slots:{default:[Xo]},$$scope:{ctx:n}}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){const l={};r[0]&4&&(l.text=o[2]),r[0]&8&&(l.hide=o[3]),r[0]&520|r[2]&16&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Ko(n){let t,e;return t=new no({props:{id:"workflow-actions",position:"right",disabled:n[17],primaryActionDisabled:!n[18]||n[0],label:T("workflows","request-cancellation"),menuLabel:T("workflows","workflow-actions"),$$slots:{default:[tr]},$$scope:{ctx:n}}}),t.$on("click",n[39]),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){const l={};r[0]&131072&&(l.disabled=o[17]),r[0]&262145&&(l.primaryActionDisabled=!o[18]||o[0]),r[0]&65536|r[2]&16&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Zo(n){let t=T("workflows","reset")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:se,d(o){o&&w(e)}}}function Xo(n){let t,e;return t=new eo({props:{"aria-label":T("workflows","reset"),disabled:!n[3],variant:"primary",$$slots:{default:[Zo]},$$scope:{ctx:n}}}),t.$on("click",n[40]),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){const l={};r[0]&8&&(l.disabled=!o[3]),r[2]&16&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function et(n){let t,e;return t=new ro({}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function xo(n){let t=n[60]+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p(o,r){r[0]&65536&&t!==(t=o[60]+"")&&be(e,t)},d(o){o&&w(e)}}}function er(n){let t,e,o;return t=new Jt({props:{destructive:n[59],disabled:!n[61],"data-testid":n[62],$$slots:{default:[xo]},$$scope:{ctx:n}}}),t.$on("click",function(){ct(n[58])&&n[58].apply(this,arguments)}),{c(){S(t.$$.fragment),e=J()},l(r){W(t.$$.fragment,r),e=Y(r)},m(r,l){V(t,r,l),C(r,e,l),o=!0},p(r,l){n=r;const s={};l[0]&65536&&(s.destructive=n[59]),l[0]&65536&&(s.disabled=!n[61]),l[0]&65536&&(s["data-testid"]=n[62]),l[0]&65536|l[2]&16&&(s.$$scope={dirty:l,ctx:n}),t.$set(s)},i(r){o||(h(t.$$.fragment,r),o=!0)},o(r){I(t.$$.fragment,r),o=!1},d(r){M(t,r),r&&w(e)}}}function tt(n){let t,e,o,r=n[59]&&et();return e=new qe({props:{text:n[63],hide:!n[63],width:200,left:!0,$$slots:{default:[er]},$$scope:{ctx:n}}}),{c(){r&&r.c(),t=J(),S(e.$$.fragment)},l(l){r&&r.l(l),t=Y(l),W(e.$$.fragment,l)},m(l,s){r&&r.m(l,s),C(l,t,s),V(e,l,s),o=!0},p(l,s){l[59]?r?s[0]&65536&&h(r,1):(r=et(),r.c(),h(r,1),r.m(t.parentNode,t)):r&&(ce(),I(r,1,1,()=>{r=null}),pe());const f={};s[0]&65536&&(f.text=l[63]),s[0]&65536&&(f.hide=!l[63]),s[0]&65536|s[2]&16&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){o||(h(r),h(e.$$.fragment,l),o=!0)},o(l){I(r),I(e.$$.fragment,l),o=!1},d(l){r&&r.d(l),l&&w(t),M(e,l)}}}function tr(n){let t,e,o=n[16],r=[];for(let s=0;s<o.length;s+=1)r[s]=tt(xe(n,o,s));const l=s=>I(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=me()},l(s){for(let f=0;f<r.length;f+=1)r[f].l(s);t=me()},m(s,f){for(let i=0;i<r.length;i+=1)r[i].m(s,f);C(s,t,f),e=!0},p(s,f){if(f[0]&65536){o=s[16];let i;for(i=0;i<o.length;i+=1){const c=xe(s,o,i);r[i]?(r[i].p(c,f),h(r[i],1)):(r[i]=tt(c),r[i].c(),h(r[i],1),r[i].m(t.parentNode,t))}for(ce(),i=o.length;i<r.length;i+=1)l(i);pe()}},i(s){if(!e){for(let f=0;f<o.length;f+=1)h(r[f]);e=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)I(r[f]);e=!1},d(s){Me(r,s),s&&w(t)}}}function or(n){let t,e=T("workflows","reset-modal-title")+"",o;return{c(){t=L("h3"),o=z(e),this.h()},l(r){t=O(r,"H3",{slot:!0});var l=j(t);o=G(l,e),l.forEach(w),this.h()},h(){H(t,"slot","title")},m(r,l){C(r,t,l),D(t,o)},p:se,d(r){r&&w(t)}}}function rr(n){let t,e,o,r,l;function s(u){n[41](u)}function f(u){n[42](u)}function i(u){n[43](u)}let c={};return n[13]!==void 0&&(c.eventId=n[13]),n[12]!==void 0&&(c.resetReapplyType=n[12]),n[14]!==void 0&&(c.reason=n[14]),t=new Jo({props:c}),oe.push(()=>re(t,"eventId",s)),oe.push(()=>re(t,"resetReapplyType",f)),oe.push(()=>re(t,"reason",i)),{c(){S(t.$$.fragment)},l(u){W(t.$$.fragment,u)},m(u,a){V(t,u,a),l=!0},p(u,a){const p={};!e&&a[0]&8192&&(e=!0,p.eventId=u[13],ne(()=>e=!1)),!o&&a[0]&4096&&(o=!0,p.resetReapplyType=u[12],ne(()=>o=!1)),!r&&a[0]&16384&&(r=!0,p.reason=u[14],ne(()=>r=!1)),t.$set(p)},i(u){l||(h(t.$$.fragment,u),l=!0)},o(u){I(t.$$.fragment,u),l=!1},d(u){M(t,u)}}}function nr(n){let t,e=T("workflows","cancel-modal-title")+"",o;return{c(){t=L("h3"),o=z(e),this.h()},l(r){t=O(r,"H3",{slot:!0});var l=j(t);o=G(l,e),l.forEach(w),this.h()},h(){H(t,"slot","title")},m(r,l){C(r,t,l),D(t,o)},p:se,d(r){r&&w(t)}}}function lr(n){let t,e=T("workflows","cancel-modal-confirmation")+"",o;return{c(){t=L("p"),o=z(e)},l(r){t=O(r,"P",{});var l=j(t);o=G(l,e),l.forEach(w)},m(r,l){C(r,t,l),D(t,o)},p:se,d(r){r&&w(t)}}}function sr(n){let t,e=T("workflows","terminate-modal-title")+"",o;return{c(){t=L("h3"),o=z(e),this.h()},l(r){t=O(r,"H3",{slot:!0});var l=j(t);o=G(l,e),l.forEach(w),this.h()},h(){H(t,"slot","title")},m(r,l){C(r,t,l),D(t,o)},p:se,d(r){r&&w(t)}}}function ar(n){let t,e,o=T("workflows","terminate-modal-confirmation")+"",r,l,s,f,i;function c(a){n[48](a)}let u={id:"workflow-termination-reason",class:"mt-4",placeholder:T("reason-placeholder"),label:T("reason-placeholder"),labelHidden:!0};return n[4]!==void 0&&(u.value=n[4]),s=new Fe({props:u}),oe.push(()=>re(s,"value",c)),{c(){t=L("div"),e=L("p"),r=z(o),l=J(),S(s.$$.fragment),this.h()},l(a){t=O(a,"DIV",{slot:!0});var p=j(t);e=O(p,"P",{});var g=j(e);r=G(g,o),g.forEach(w),l=Y(p),W(s.$$.fragment,p),p.forEach(w),this.h()},h(){H(t,"slot","content")},m(a,p){C(a,t,p),D(t,e),D(e,r),D(t,l),V(s,t,null),i=!0},p(a,p){const g={};!f&&p[0]&16&&(f=!0,g.value=a[4],ne(()=>f=!1)),s.$set(g)},i(a){i||(h(s.$$.fragment,a),i=!0)},o(a){I(s.$$.fragment,a),i=!1},d(a){a&&w(t),M(s)}}}function fr(n){let t,e=T("workflows","signal-modal-title")+"",o;return{c(){t=L("h3"),o=z(e),this.h()},l(r){t=O(r,"H3",{slot:!0});var l=j(t);o=G(l,e),l.forEach(w),this.h()},h(){H(t,"slot","title")},m(r,l){C(r,t,l),D(t,o)},p:se,d(r){r&&w(t)}}}function ir(n){let t,e,o,r,l,s,f=T("workflows","signal-payload-input-label")+"",i,c,u,a=T("workflows","signal-payload-input-label-hint")+"",p,g,$,v;function d(_){n[51](_)}let k={id:"signal-name",label:T("workflows","signal-name-label"),required:!0};return n[6]!==void 0&&(k.value=n[6]),e=new Fe({props:k}),oe.push(()=>re(e,"value",d)),$=new to({props:{class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1}}),$.$on("change",n[24]),{c(){t=L("div"),S(e.$$.fragment),r=J(),l=L("div"),s=L("span"),i=z(f),c=J(),u=L("span"),p=z(a),g=J(),S($.$$.fragment),this.h()},l(_){t=O(_,"DIV",{slot:!0,class:!0});var P=j(t);W(e.$$.fragment,P),r=Y(P),l=O(P,"DIV",{});var y=j(l);s=O(y,"SPAN",{class:!0});var A=j(s);i=G(A,f),A.forEach(w),c=Y(y),u=O(y,"SPAN",{class:!0});var R=j(u);p=G(R,a),R.forEach(w),g=Y(y),W($.$$.fragment,y),y.forEach(w),P.forEach(w),this.h()},h(){H(s,"class","font-secondary text-sm font-medium"),H(u,"class","font-secondary text-xs font-light italic"),H(t,"slot","content"),H(t,"class","flex flex-col gap-4")},m(_,P){C(_,t,P),V(e,t,null),D(t,r),D(t,l),D(l,s),D(s,i),D(l,c),D(l,u),D(u,p),D(l,g),V($,l,null),v=!0},p(_,P){const y={};!o&&P[0]&64&&(o=!0,y.value=_[6],ne(()=>o=!1)),e.$set(y);const A={};P[0]&32&&(A.content=_[5]),$.$set(A)},i(_){v||(h(e.$$.fragment,_),h($.$$.fragment,_),v=!0)},o(_){I(e.$$.fragment,_),I($.$$.fragment,_),v=!1},d(_){_&&w(t),M(e),M($)}}}function ur(n){let t,e,o,r,l,s,f,i,c,u,a,p,g,$,v,d,k,_,P;const y=[Ko,Go],A=[];function R(m,q){return m[1]?0:1}t=R(n),e=A[t]=y[t](n);function U(m){n[44](m)}function B(m){n[45](m)}let F={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:T("confirm"),cancelText:T("cancel"),confirmDisabled:!n[13],$$slots:{content:[rr],title:[or]},$$scope:{ctx:n}};n[11]!==void 0&&(F.error=n[11]),n[9]!==void 0&&(F.open=n[9]),r=new ye({props:F}),oe.push(()=>re(r,"error",U)),oe.push(()=>re(r,"open",B)),r.$on("confirmModal",n[26]),r.$on("cancelModal",n[21]);function x(m){n[46](m)}function te(m){n[47](m)}let b={id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",confirmText:T("confirm"),cancelText:T("cancel"),loading:n[15],confirmType:"destructive",$$slots:{content:[lr],title:[nr]},$$scope:{ctx:n}};n[11]!==void 0&&(b.error=n[11]),n[7]!==void 0&&(b.open=n[7]),i=new ye({props:b}),oe.push(()=>re(i,"error",x)),oe.push(()=>re(i,"open",te)),i.$on("confirmModal",n[23]);function N(m){n[49](m)}function Q(m){n[50](m)}let ee={id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",confirmText:T("workflows","terminate"),cancelText:T("cancel"),confirmType:"destructive",$$slots:{content:[ar],title:[sr]},$$scope:{ctx:n}};n[11]!==void 0&&(ee.error=n[11]),n[8]!==void 0&&(ee.open=n[8]),p=new ye({props:ee}),oe.push(()=>re(p,"error",N)),oe.push(()=>re(p,"open",Q)),p.$on("cancelModal",n[19]),p.$on("confirmModal",n[22]);function ae(m){n[52](m)}function Z(m){n[53](m)}let fe={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",confirmText:T("submit"),cancelText:T("cancel"),confirmDisabled:!n[6],$$slots:{content:[ir],title:[fr]},$$scope:{ctx:n}};return n[11]!==void 0&&(fe.error=n[11]),n[10]!==void 0&&(fe.open=n[10]),d=new ye({props:fe}),oe.push(()=>re(d,"error",ae)),oe.push(()=>re(d,"open",Z)),d.$on("cancelModal",n[20]),d.$on("confirmModal",n[25]),{c(){e.c(),o=J(),S(r.$$.fragment),f=J(),S(i.$$.fragment),a=J(),S(p.$$.fragment),v=J(),S(d.$$.fragment)},l(m){e.l(m),o=Y(m),W(r.$$.fragment,m),f=Y(m),W(i.$$.fragment,m),a=Y(m),W(p.$$.fragment,m),v=Y(m),W(d.$$.fragment,m)},m(m,q){A[t].m(m,q),C(m,o,q),V(r,m,q),C(m,f,q),V(i,m,q),C(m,a,q),V(p,m,q),C(m,v,q),V(d,m,q),P=!0},p(m,q){let Ee=t;t=R(m),t===Ee?A[t].p(m,q):(ce(),I(A[Ee],1,1,()=>{A[Ee]=null}),pe(),e=A[t],e?e.p(m,q):(e=A[t]=y[t](m),e.c()),h(e,1),e.m(o.parentNode,o));const de={};q[0]&8192&&(de.confirmDisabled=!m[13]),q[0]&28672|q[2]&16&&(de.$$scope={dirty:q,ctx:m}),!l&&q[0]&2048&&(l=!0,de.error=m[11],ne(()=>l=!1)),!s&&q[0]&512&&(s=!0,de.open=m[9],ne(()=>s=!1)),r.$set(de);const _e={};q[0]&32768&&(_e.loading=m[15]),q[2]&16&&(_e.$$scope={dirty:q,ctx:m}),!c&&q[0]&2048&&(c=!0,_e.error=m[11],ne(()=>c=!1)),!u&&q[0]&128&&(u=!0,_e.open=m[7],ne(()=>u=!1)),i.$set(_e);const we={};q[0]&16|q[2]&16&&(we.$$scope={dirty:q,ctx:m}),!g&&q[0]&2048&&(g=!0,we.error=m[11],ne(()=>g=!1)),!$&&q[0]&256&&($=!0,we.open=m[8],ne(()=>$=!1)),p.$set(we);const ge={};q[0]&64&&(ge.confirmDisabled=!m[6]),q[0]&96|q[2]&16&&(ge.$$scope={dirty:q,ctx:m}),!k&&q[0]&2048&&(k=!0,ge.error=m[11],ne(()=>k=!1)),!_&&q[0]&1024&&(_=!0,ge.open=m[10],ne(()=>_=!1)),d.$set(ge)},i(m){P||(h(e),h(r.$$.fragment,m),h(i.$$.fragment,m),h(p.$$.fragment,m),h(d.$$.fragment,m),P=!0)},o(m){I(e),I(r.$$.fragment,m),I(i.$$.fragment,m),I(p.$$.fragment,m),I(d.$$.fragment,m),P=!1},d(m){A[t].d(m),m&&w(o),M(r,m),m&&w(f),M(i,m),m&&w(a),M(p,m),m&&w(v),M(d,m)}}}function cr(n,t,e){let o,r,l,s,f,i,c,u,a,p,g;K(n,bt,E=>e(37,u=E)),K(n,ue,E=>e(54,a=E)),K(n,kt,E=>e(55,p=E)),K(n,Ne,E=>e(38,g=E));var $,v,d;let{workflow:k}=t,{namespace:_}=t,{cancelInProgress:P}=t,{isRunning:y}=t,A="",R="",U="",B=!1,F=!1,x=!1,te=!1,b="",N=he.Unspecified,Q,ee,ae=!1,Z;const fe=()=>{e(4,A="")},m=()=>{e(5,R=""),e(6,U="")},q=()=>{e(12,N=he.Unspecified),e(13,Q=void 0),e(14,ee=void 0)},Ee=async()=>{e(8,F=!1),le(ue,a=Date.now(),a),Ve.push({id:"workflow-termination-success-toast",message:T("workflows","terminate-success")})},de=E=>{var X;e(4,A=""),e(11,b=(X=E==null?void 0:E.message)!==null&&X!==void 0?X:T("unknown-error"))},_e=()=>{e(11,b=""),k.canBeTerminated&&so({workflow:k,namespace:_,reason:je({action:Qe.Terminate,reason:A,email:p.email}),identity:p.email}).then(Ee).catch(de)},we=async()=>{var E;e(15,ae=!0),e(11,b="");try{await ao({namespace:_,workflowId:k.id,runId:k.runId}),e(7,B=!1),e(15,ae=!1),le(ue,a=Date.now(),a),Ve.push({id:"workflow-cancelation-success-toast",message:T("workflows","cancel-success")})}catch(X){e(11,b=(E=X==null?void 0:X.message)!==null&&E!==void 0?E:T("unknown-error"))}},ge=E=>{e(5,R=E.detail)},yt=async()=>{var E;e(11,b="");try{await fo({namespace:_,workflowId:k.id,runId:k.runId,signalInput:R,signalName:U}),e(10,te=!1),le(ue,a=Date.now(),a),Ve.push({message:T("workflows","signal-success"),id:"workflow-signal-success-toast"})}catch(X){e(11,b=(E=X==null?void 0:X.message)!==null&&E!==void 0?E:T("unknown-error"))}m()},At=async()=>{var E;e(11,b="");try{const X=await io({namespace:_,workflowId:k.id,runId:k.runId,eventId:Q,reason:je({action:Qe.Reset,reason:ee,email:p.email}),resetReapplyType:N});X&&X.runId&&Et.update(Ot=>({...Ot,[k.runId]:X.runId})),e(9,x=!1),le(ue,a=Date.now(),a)}catch(X){e(11,b=(E=X==null?void 0:X.message)!==null&&E!==void 0?E:T("unknown-error"))}q()};let He,Le=co();K(n,Le,E=>e(36,c=E));const Rt=()=>e(7,B=!0),Ct=()=>e(9,x=!0);function Pt(E){Q=E,e(13,Q)}function Dt(E){N=E,e(12,N)}function St(E){ee=E,e(14,ee)}function Wt(E){b=E,e(11,b)}function Vt(E){x=E,e(9,x),e(3,f),e(2,Z),e(34,r),e(33,l),e(35,s),e(28,k),e(32,d),e(37,u),e(30,$),e(31,v),e(38,g)}function Mt(E){b=E,e(11,b)}function Ut(E){B=E,e(7,B)}function Nt(E){A=E,e(4,A)}function qt(E){b=E,e(11,b)}function Ft(E){F=E,e(8,F),e(3,f),e(2,Z),e(34,r),e(33,l),e(35,s),e(28,k),e(32,d),e(37,u),e(30,$),e(31,v),e(38,g)}function Bt(E){U=E,e(6,U)}function Ht(E){b=E,e(11,b)}function Lt(E){te=E,e(10,te),e(3,f),e(2,Z),e(34,r),e(33,l),e(35,s),e(28,k),e(32,d),e(37,u),e(30,$),e(31,v),e(38,g)}return n.$$set=E=>{"workflow"in E&&e(28,k=E.workflow),"namespace"in E&&e(29,_=E.namespace),"cancelInProgress"in E&&e(0,P=E.cancelInProgress),"isRunning"in E&&e(1,y=E.isRunning)},n.$$.update=()=>{n.$$.dirty[1]&128&&e(18,o=Kt(g.data.settings)),n.$$.dirty[1]&128&&e(34,r=zo(g.data.settings)),n.$$.dirty[1]&128&&e(33,l=Zt(g.data.settings)),n.$$.dirty[1]&128&&e(35,s=Yo(g.data.settings)),n.$$.dirty[0]&1342177280|n.$$.dirty[1]&81&&(s?s&&(e(30,$=k==null?void 0:k.pendingChildren)===null||$===void 0?void 0:$.length)>0?e(2,Z=T("workflows","reset-disabled-pending-children")):s&&(e(31,v=k==null?void 0:k.pendingChildren)===null||v===void 0?void 0:v.length)===0&&u.length===0&&e(2,Z=T("workflows","reset-disabled-no-events")):e(2,Z=T("workflows","reset-disabled"))),n.$$.dirty[0]&268435456|n.$$.dirty[1]&82&&e(3,f=s&&(e(32,d=k==null?void 0:k.pendingChildren)===null||d===void 0?void 0:d.length)===0&&u.length>0),n.$$.dirty[0]&12|n.$$.dirty[1]&12&&e(16,He=[{label:T("workflows","reset"),onClick:()=>e(9,x=!0),testId:"reset-button",allowed:f,tooltip:f?"":Z},{label:T("workflows","signal"),onClick:()=>e(10,te=!0),testId:"signal-button",allowed:r,tooltip:r?"":T("workflows","signal-disabled")},{label:T("workflows","terminate"),onClick:()=>e(8,F=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":T("workflows","terminate-disabled")}]),n.$$.dirty[0]&536870912|n.$$.dirty[1]&32&&e(17,i=c.namespaceWriteDisabled(_)||!lo(mo))},[P,y,Z,f,A,R,U,B,F,x,te,b,N,Q,ee,ae,He,i,o,fe,m,q,_e,we,ge,yt,At,Le,k,_,$,v,d,l,r,s,c,u,g,Rt,Ct,Pt,Dt,St,Wt,Vt,Mt,Ut,Nt,qt,Ft,Bt,Ht,Lt]}class pr extends ke{constructor(t){super(),ve(this,t,cr,ur,Ie,{workflow:28,namespace:29,cancelInProgress:0,isRunning:1},null,[-1,-1,-1])}}const mr=(n,t)=>{var r;const e=n==="Running",o=(r=t==null?void 0:t.end)==null?void 0:r.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&o},ot=n=>{const t=n==null?void 0:n.indexOf("?");return t>-1?n.slice(0,t):n},ie=(n,t,e=!1)=>{const o=ot(n).split("/"),r=ot(t).split("/");if(e&&o.length!==r.length)return!1;for(let l=0;l<o.length;l++){const s=o[l],f=r[l];if(s!==f)return!1}return!0};function dr(n){let t=T("workflows","back-to-workflows")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:se,d(o){o&&w(e)}}}function rt(n){let t,e,o=T("workers","last-used-version")+"",r,l,s,f,i,c=T("workers","next-version")+"",u,a,p;return l=new Ye({props:{defaultVersion:n[1]===n[6]||n[1]===n[7],active:n[1]===n[7],buildId:n[1],$$slots:{"default-worker":[gr],"overall-default-worker":[_r]},$$scope:{ctx:n}}}),a=new Ye({props:{defaultVersion:!!n[6],active:n[6]===n[7],buildId:n[6],$$slots:{"default-worker":[hr],"overall-default-worker":[wr]},$$scope:{ctx:n}}}),{c(){t=L("p"),e=L("span"),r=z(o),S(l.$$.fragment),s=J(),f=L("p"),i=L("span"),u=z(c),S(a.$$.fragment),this.h()},l(g){t=O(g,"P",{class:!0});var $=j(t);e=O($,"SPAN",{});var v=j(e);r=G(v,o),v.forEach(w),W(l.$$.fragment,$),$.forEach(w),s=Y(g),f=O(g,"P",{class:!0});var d=j(f);i=O(d,"SPAN",{});var k=j(i);u=G(k,c),k.forEach(w),W(a.$$.fragment,d),d.forEach(w),this.h()},h(){H(t,"class","flex items-center gap-1"),H(f,"class","flex items-center gap-1")},m(g,$){C(g,t,$),D(t,e),D(e,r),V(l,t,null),C(g,s,$),C(g,f,$),D(f,i),D(i,u),V(a,f,null),p=!0},p(g,$){const v={};$&194&&(v.defaultVersion=g[1]===g[6]||g[1]===g[7]),$&130&&(v.active=g[1]===g[7]),$&2&&(v.buildId=g[1]),$&134217858&&(v.$$scope={dirty:$,ctx:g}),l.$set(v);const d={};$&64&&(d.defaultVersion=!!g[6]),$&192&&(d.active=g[6]===g[7]),$&64&&(d.buildId=g[6]),$&134217920&&(d.$$scope={dirty:$,ctx:g}),a.$set(d)},i(g){p||(h(l.$$.fragment,g),h(a.$$.fragment,g),p=!0)},o(g){I(l.$$.fragment,g),I(a.$$.fragment,g),p=!1},d(g){g&&w(t),M(l),g&&w(s),g&&w(f),M(a)}}}function nt(n){let t=T("workers","overall")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:se,d(o){o&&w(e)}}}function _r(n){let t,e=n[1]===n[7]&&nt();return{c(){e&&e.c(),t=me()},l(o){e&&e.l(o),t=me()},m(o,r){e&&e.m(o,r),C(o,t,r)},p(o,r){o[1]===o[7]?e?e.p(o,r):(e=nt(),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(o){e&&e.d(o),o&&w(t)}}}function gr(n){let t=T("workers","default")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:se,d(o){o&&w(e)}}}function lt(n){let t=T("workers","overall")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:se,d(o){o&&w(e)}}}function wr(n){let t,e=n[6]===n[7]&&lt();return{c(){e&&e.c(),t=me()},l(o){e&&e.l(o),t=me()},m(o,r){e&&e.m(o,r),C(o,t,r)},p(o,r){o[6]===o[7]?e?e.p(o,r):(e=lt(),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(o){e&&e.d(o),o&&w(t)}}}function hr(n){let t=T("workers","default")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:se,d(o){o&&w(e)}}}function st(n){let t,e;return t=new Ho({props:{onChange:n[16]}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p:se,i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function at(n){let t,e,o,r;return e=new vt({props:{bold:!0,icon:"info",intent:"info",title:T("workflows","cancel-request-sent"),$$slots:{default:[$r]},$$scope:{ctx:n}}}),{c(){t=L("div"),S(e.$$.fragment),this.h()},l(l){t=O(l,"DIV",{class:!0});var s=j(t);W(e.$$.fragment,s),s.forEach(w),this.h()},h(){H(t,"class","mb-4")},m(l,s){C(l,t,s),V(e,t,null),r=!0},p(l,s){const f={};s&134217728&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){r||(h(e.$$.fragment,l),o||mt(()=>{o=dt(t,$t,{duration:200,delay:100}),o.start()}),r=!0)},o(l){I(e.$$.fragment,l),r=!1},d(l){l&&w(t),M(e)}}}function $r(n){let t=T("workflows","cancel-request-sent-description")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:se,d(o){o&&w(e)}}}function ft(n){let t,e,o,r;return e=new vt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:T("workflows","reset-success-alert-title"),$$slots:{default:[kr]},$$scope:{ctx:n}}}),{c(){t=L("div"),S(e.$$.fragment),this.h()},l(l){t=O(l,"DIV",{class:!0});var s=j(t);W(e.$$.fragment,s),s.forEach(w),this.h()},h(){H(t,"class","mb-4")},m(l,s){C(l,t,s),V(e,t,null),r=!0},p(l,s){const f={};s&134217777&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){r||(h(e.$$.fragment,l),o||mt(()=>{o=dt(t,$t,{duration:200,delay:100}),o.start()}),r=!0)},o(l){I(e.$$.fragment,l),r=!1},d(l){l&&w(t),M(e)}}}function br(n){let t;return{c(){t=z("here")},l(e){t=G(e,"here")},m(e,o){C(e,t,o)},d(e){e&&w(t)}}}function kr(n){var l,s,f,i;let t,e,o,r;return e=new It({props:{href:$e({namespace:n[0],workflow:(s=(l=n[4])==null?void 0:l.workflow)==null?void 0:s.id,run:n[5][(i=(f=n[4])==null?void 0:f.workflow)==null?void 0:i.runId]}),$$slots:{default:[br]},$$scope:{ctx:n}}}),{c(){t=z("You can find the resulting Workflow Execution "),S(e.$$.fragment),o=z(".")},l(c){t=G(c,"You can find the resulting Workflow Execution "),W(e.$$.fragment,c),o=G(c,".")},m(c,u){C(c,t,u),V(e,c,u),C(c,o,u),r=!0},p(c,u){var p,g,$,v;const a={};u&49&&(a.href=$e({namespace:c[0],workflow:(g=(p=c[4])==null?void 0:p.workflow)==null?void 0:g.id,run:c[5][(v=($=c[4])==null?void 0:$.workflow)==null?void 0:v.runId]})),u&134217728&&(a.$$scope={dirty:u,ctx:c}),e.$set(a)},i(c){r||(h(e.$$.fragment,c),r=!0)},o(c){I(e.$$.fragment,c),r=!1},d(c){c&&w(t),M(e,c),c&&w(o)}}}function vr(n){var o;let t=((o=n[2])==null?void 0:o.historyEvents)+"",e;return{c(){e=z(t)},l(r){e=G(r,t)},m(r,l){C(r,e,l)},p(r,l){var s;l&4&&t!==(t=((s=r[2])==null?void 0:s.historyEvents)+"")&&be(e,t)},d(r){r&&w(e)}}}function Ir(n){let t,e;return t=new Be({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[vr]},$$scope:{ctx:n}}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){const l={};r&134217732&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Er(n){var o,r;let t=((r=(o=n[13])==null?void 0:o.pollers)==null?void 0:r.length)+"",e;return{c(){e=z(t)},l(l){e=G(l,t)},m(l,s){C(l,e,s)},p(l,s){var f,i;s&8192&&t!==(t=((i=(f=l[13])==null?void 0:f.pollers)==null?void 0:i.length)+"")&&be(e,t)},d(l){l&&w(e)}}}function Tr(n){let t,e;return t=new Be({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Er]},$$scope:{ctx:n}}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){const l={};r&134225920&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function it(n){let t,e;return t=new oo({props:{name:"canceled",width:20,height:20}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function yr(n){var s,f;let t,e=((f=(s=n[2])==null?void 0:s.pendingActivities)==null?void 0:f.length)+"",o,r,l=n[11]&&it();return{c(){l&&l.c(),t=J(),o=z(e)},l(i){l&&l.l(i),t=Y(i),o=G(i,e)},m(i,c){l&&l.m(i,c),C(i,t,c),C(i,o,c),r=!0},p(i,c){var u,a;i[11]?l?c&2048&&h(l,1):(l=it(),l.c(),h(l,1),l.m(t.parentNode,t)):l&&(ce(),I(l,1,1,()=>{l=null}),pe()),(!r||c&4)&&e!==(e=((a=(u=i[2])==null?void 0:u.pendingActivities)==null?void 0:a.length)+"")&&be(o,e)},i(i){r||(h(l),r=!0)},o(i){I(l),r=!1},d(i){l&&l.d(i),i&&w(t),i&&w(o)}}}function Ar(n){let t,e;return t=new Be({props:{type:n[11]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[yr]},$$scope:{ctx:n}}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){const l={};r&2048&&(l.type=o[11]?"warning":"blue"),r&134219780&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Rr(n){let t,e,o,r,l,s,f,i,c,u;return t=new Te({props:{label:T("workflows","history-tab"),id:"history-tab",href:$e({...n[12]}),active:ie(n[15].url.pathname,$e({...n[12]})),$$slots:{default:[Ir]},$$scope:{ctx:n}}}),o=new Te({props:{label:T("workflows","workers-tab"),id:"workers-tab",href:Ae(n[12]),active:ie(n[15].url.pathname,Ae(n[12])),$$slots:{default:[Tr]},$$scope:{ctx:n}}}),l=new Te({props:{label:T("workflows","pending-activities-tab"),id:"pending-activities-tab",href:Re(n[12]),active:ie(n[15].url.pathname,Re(n[12])),$$slots:{default:[Ar]},$$scope:{ctx:n}}}),f=new Te({props:{label:T("workflows","stack-trace-tab"),id:"stack-trace-tab",href:Ce(n[12]),active:ie(n[15].url.pathname,Ce(n[12]))}}),c=new Te({props:{label:T("workflows","queries-tab"),id:"queries-tab",href:Pe(n[12]),active:ie(n[15].url.pathname,Pe(n[12]))}}),{c(){S(t.$$.fragment),e=J(),S(o.$$.fragment),r=J(),S(l.$$.fragment),s=J(),S(f.$$.fragment),i=J(),S(c.$$.fragment)},l(a){W(t.$$.fragment,a),e=Y(a),W(o.$$.fragment,a),r=Y(a),W(l.$$.fragment,a),s=Y(a),W(f.$$.fragment,a),i=Y(a),W(c.$$.fragment,a)},m(a,p){V(t,a,p),C(a,e,p),V(o,a,p),C(a,r,p),V(l,a,p),C(a,s,p),V(f,a,p),C(a,i,p),V(c,a,p),u=!0},p(a,p){const g={};p&4096&&(g.href=$e({...a[12]})),p&36864&&(g.active=ie(a[15].url.pathname,$e({...a[12]}))),p&134217732&&(g.$$scope={dirty:p,ctx:a}),t.$set(g);const $={};p&4096&&($.href=Ae(a[12])),p&36864&&($.active=ie(a[15].url.pathname,Ae(a[12]))),p&134225920&&($.$$scope={dirty:p,ctx:a}),o.$set($);const v={};p&4096&&(v.href=Re(a[12])),p&36864&&(v.active=ie(a[15].url.pathname,Re(a[12]))),p&134219780&&(v.$$scope={dirty:p,ctx:a}),l.$set(v);const d={};p&4096&&(d.href=Ce(a[12])),p&36864&&(d.active=ie(a[15].url.pathname,Ce(a[12]))),f.$set(d);const k={};p&4096&&(k.href=Pe(a[12])),p&36864&&(k.active=ie(a[15].url.pathname,Pe(a[12]))),c.$set(k)},i(a){u||(h(t.$$.fragment,a),h(o.$$.fragment,a),h(l.$$.fragment,a),h(f.$$.fragment,a),h(c.$$.fragment,a),u=!0)},o(a){I(t.$$.fragment,a),I(o.$$.fragment,a),I(l.$$.fragment,a),I(f.$$.fragment,a),I(c.$$.fragment,a),u=!1},d(a){M(t,a),a&&w(e),M(o,a),a&&w(r),M(l,a),a&&w(s),M(f,a),a&&w(i),M(c,a)}}}function Cr(n){let t,e;return t=new vo({props:{class:"flex flex-wrap gap-6",label:"workflow detail",$$slots:{default:[Rr]},$$scope:{ctx:n}}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,r){const l={};r&134264836&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Pr(n){var x,te;let t,e,o,r,l,s,f,i,c,u,a,p,g,$,v,d,k,_,P,y,A;o=new It({props:{href:`${ze({namespace:n[0]})}?${n[14]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[dr]},$$scope:{ctx:n}}}),i=new bo({props:{copyIconTitle:T("copy-icon-title"),copySuccessIconTitle:T("copy-success-icon-title"),content:(x=n[2])==null?void 0:x.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}}),a=new go({props:{status:(te=n[2])==null?void 0:te.status}});let R=n[8]&&rt(n),U=n[3]&&st(n);d=new pr({props:{isRunning:n[3],cancelInProgress:n[10],workflow:n[2],namespace:n[0]}});let B=n[10]&&at(n),F=n[9]&&ft(n);return y=new ko({props:{$$slots:{default:[Cr]},$$scope:{ctx:n}}}),{c(){t=L("header"),e=L("div"),S(o.$$.fragment),r=J(),l=L("div"),s=L("div"),f=L("h1"),S(i.$$.fragment),c=J(),u=L("div"),S(a.$$.fragment),p=J(),R&&R.c(),g=J(),$=L("div"),U&&U.c(),v=J(),S(d.$$.fragment),k=J(),B&&B.c(),_=J(),F&&F.c(),P=J(),S(y.$$.fragment),this.h()},l(b){t=O(b,"HEADER",{class:!0});var N=j(t);e=O(N,"DIV",{class:!0});var Q=j(e);W(o.$$.fragment,Q),Q.forEach(w),r=Y(N),l=O(N,"DIV",{class:!0});var ee=j(l);s=O(ee,"DIV",{class:!0});var ae=j(s);f=O(ae,"H1",{"data-testid":!0,class:!0});var Z=j(f);W(i.$$.fragment,Z),Z.forEach(w),c=Y(ae),u=O(ae,"DIV",{class:!0});var fe=j(u);W(a.$$.fragment,fe),p=Y(fe),R&&R.l(fe),fe.forEach(w),ae.forEach(w),g=Y(ee),$=O(ee,"DIV",{class:!0});var m=j($);U&&U.l(m),v=Y(m),W(d.$$.fragment,m),m.forEach(w),ee.forEach(w),k=Y(N),B&&B.l(N),_=Y(N),F&&F.l(N),P=Y(N),W(y.$$.fragment,N),N.forEach(w),this.h()},h(){H(e,"class","mb-4 block"),H(f,"data-testid","workflow-id-heading"),H(f,"class","overflow-hidden text-2xl font-medium"),H(u,"class","flex flex-wrap items-center gap-4"),H(s,"class","flex w-full flex-col justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),H($,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end"),H(l,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),H(t,"class","mb-4 flex flex-col gap-1")},m(b,N){C(b,t,N),D(t,e),V(o,e,null),D(t,r),D(t,l),D(l,s),D(s,f),V(i,f,null),D(s,c),D(s,u),V(a,u,null),D(u,p),R&&R.m(u,null),D(l,g),D(l,$),U&&U.m($,null),D($,v),V(d,$,null),D(t,k),B&&B.m(t,null),D(t,_),F&&F.m(t,null),D(t,P),V(y,t,null),A=!0},p(b,[N]){var m,q;const Q={};N&16385&&(Q.href=`${ze({namespace:b[0]})}?${b[14]}`),N&134217728&&(Q.$$scope={dirty:N,ctx:b}),o.$set(Q);const ee={};N&4&&(ee.content=(m=b[2])==null?void 0:m.id),i.$set(ee);const ae={};N&4&&(ae.status=(q=b[2])==null?void 0:q.status),a.$set(ae),b[8]?R?(R.p(b,N),N&256&&h(R,1)):(R=rt(b),R.c(),h(R,1),R.m(u,null)):R&&(ce(),I(R,1,1,()=>{R=null}),pe()),b[3]?U?(U.p(b,N),N&8&&h(U,1)):(U=st(b),U.c(),h(U,1),U.m($,v)):U&&(ce(),I(U,1,1,()=>{U=null}),pe());const Z={};N&8&&(Z.isRunning=b[3]),N&1024&&(Z.cancelInProgress=b[10]),N&4&&(Z.workflow=b[2]),N&1&&(Z.namespace=b[0]),d.$set(Z),b[10]?B?(B.p(b,N),N&1024&&h(B,1)):(B=at(b),B.c(),h(B,1),B.m(t,_)):B&&(ce(),I(B,1,1,()=>{B=null}),pe()),b[9]?F?(F.p(b,N),N&512&&h(F,1)):(F=ft(b),F.c(),h(F,1),F.m(t,P)):F&&(ce(),I(F,1,1,()=>{F=null}),pe());const fe={};N&134264836&&(fe.$$scope={dirty:N,ctx:b}),y.$set(fe)},i(b){A||(h(o.$$.fragment,b),h(i.$$.fragment,b),h(a.$$.fragment,b),h(R),h(U),h(d.$$.fragment,b),h(B),h(F),h(y.$$.fragment,b),A=!0)},o(b){I(o.$$.fragment,b),I(i.$$.fragment,b),I(a.$$.fragment,b),I(R),I(U),I(d.$$.fragment,b),I(B),I(F),I(y.$$.fragment,b),A=!1},d(b){b&&w(t),M(o),M(i),M(a),R&&R.d(),U&&U.d(),M(d),B&&B.d(),F&&F.d(),M(y)}}}const ut=15e3;function Dr(n,t,e){let o,r,l,s,f,i,c,u,a,p,g,$,v,d,k,_,P,y,A;K(n,We,Q=>e(4,v=Q)),K(n,Et,Q=>e(5,d=Q)),K(n,Se,Q=>e(24,k=Q)),K(n,ue,Q=>e(25,_=Q)),K(n,De,Q=>e(26,P=Q)),K(n,Io,Q=>e(14,y=Q)),K(n,Ne,Q=>e(15,A=Q));var R,U,B,F,x;let{namespace:te}=t,b;pt(()=>{f&&P==="on"&&(clearInterval(b),e(22,b=setInterval(()=>le(ue,_=Date.now(),_),ut)))});const N=()=>{P==="on"?(le(De,P="off",P),clearInterval(b)):(le(ue,_=Date.now(),_),le(De,P="on",P),clearInterval(b),e(22,b=setInterval(()=>le(ue,_=Date.now(),_),ut)))};return Ue(()=>{clearInterval(b)}),n.$$set=Q=>{"namespace"in Q&&e(0,te=Q.namespace)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{workflow:o,workers:r,compatibility:l}=v,o,(e(13,r),e(4,v)),(e(23,l),e(4,v))),n.$$.dirty&5&&e(12,s={namespace:te,workflow:o==null?void 0:o.id,run:o==null?void 0:o.runId}),n.$$.dirty&131088&&e(3,f=e(17,R=v==null?void 0:v.workflow)===null||R===void 0?void 0:R.isRunning),n.$$.dirty&262160&&e(11,i=["Terminated","TimedOut","Canceled"].includes(e(18,U=v.workflow)===null||U===void 0?void 0:U.status)),n.$$.dirty&4194312&&(f||clearInterval(b)),n.$$.dirty&17301520&&e(10,c=mr(e(19,B=v==null?void 0:v.workflow)===null||B===void 0?void 0:B.status,k)),n.$$.dirty&1048624&&e(9,u=Eo(d,e(20,F=v==null?void 0:v.workflow)===null||F===void 0?void 0:F.runId)),n.$$.dirty&2097156&&e(8,a=e(21,x=o==null?void 0:o.mostRecentWorkerVersionStamp)===null||x===void 0?void 0:x.useVersioning),n.$$.dirty&4&&e(1,p=To(o)),n.$$.dirty&8388608&&e(7,g=yo(l)),n.$$.dirty&8388610&&e(6,$=Ao(l,p))},[te,p,o,f,v,d,$,g,a,u,c,i,s,r,y,A,N,R,U,B,F,x,b,l,k]}class Sr extends ke{constructor(t){super(),ve(this,t,Dr,Pr,Ie,{namespace:0})}}async function Wr({activity:n,namespace:t,settings:e,accessToken:o},{convertWithCodec:r=So,convertWithWebsocket:l=Wo,decodeAttributes:s=Vo,encoderEndpoint:f=Do}={}){const i=Mo(e,f),c=Uo(e,Po),u={...e,codec:{...e==null?void 0:e.codec,endpoint:i,passAccessToken:c}},a=i?await r({attributes:n,namespace:t,settings:u,accessToken:o}):await l(n);return s(a)}const Vr=async({activity:n,namespace:t,settings:e,accessToken:o})=>await Wr({activity:n,namespace:t,settings:e,accessToken:o}),Mr=async(n,t,e,o)=>{const r=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of r){const f=await Vr({activity:s,namespace:t,settings:e,accessToken:o});l.push(f)}return l};function Ur(n){let t,e,o;t=new Sr({props:{namespace:n[0].params.namespace}});const r=n[7].default,l=_t(r,n,n[6],null);return{c(){S(t.$$.fragment),e=J(),l&&l.c()},l(s){W(t.$$.fragment,s),e=Y(s),l&&l.l(s)},m(s,f){V(t,s,f),C(s,e,f),l&&l.m(s,f),o=!0},p(s,f){const i={};f&1&&(i.namespace=s[0].params.namespace),t.$set(i),l&&l.p&&(!o||f&64)&&gt(l,r,s,s[6],o?ht(r,s[6],f,null):wt(s[6]),null)},i(s){o||(h(t.$$.fragment,s),h(l,s),o=!0)},o(s){I(t.$$.fragment,s),I(l,s),o=!1},d(s){M(t,s),s&&w(e),l&&l.d(s)}}}function Nr(n){let t,e;return t=new Qt({}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p:se,i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function qr(n){let t,e,o,r;const l=[Nr,Ur],s=[];function f(i,c){return i[1].workflow?1:0}return e=f(n),o=s[e]=l[e](n),{c(){t=L("div"),o.c(),this.h()},l(i){t=O(i,"DIV",{class:!0});var c=j(t);o.l(c),c.forEach(w),this.h()},h(){H(t,"class","flex h-full flex-col gap-6")},m(i,c){C(i,t,c),s[e].m(t,null),r=!0},p(i,[c]){let u=e;e=f(i),e===u?s[e].p(i,c):(ce(),I(s[u],1,1,()=>{s[u]=null}),pe(),o=s[e],o?o.p(i,c):(o=s[e]=l[e](i),o.c()),h(o,1),o.m(t,null))},i(i){r||(h(o),r=!0)},o(i){I(o),r=!1},d(i){i&&w(t),s[e].d()}}}function Fr(n,t,e){let o,r,l,s,f,i,c,u,a,p;K(n,Se,_=>e(8,s=_)),K(n,We,_=>e(1,f=_)),K(n,Je,_=>e(9,i=_)),K(n,Oe,_=>e(10,c=_)),K(n,Ne,_=>e(0,u=_)),K(n,ue,_=>e(5,a=_)),K(n,kt,_=>e(11,p=_));let{$$slots:g={},$$scope:$}=t;const v=async(_,P)=>{var y;if(!((y=_==null?void 0:_.mostRecentWorkerVersionStamp)===null||y===void 0)&&y.useVersioning)return await ho({queue:P,namespace:o})},d=async({namespace:_,workers:P,taskQueue:y})=>{if(!Ro(P.pollers))return;const R=Co(P.pollers);return await $o({namespace:_,buildIds:R,taskQueue:y})},k=async(_,P,y)=>{const{settings:A}=u.data,R=await uo({namespace:_,workflowId:P,runId:y}),{taskQueue:U}=R,B=await wo({queue:U,namespace:_}),F=await v(R,U),x=await d({namespace:_,workers:B,taskQueue:U});R.pendingActivities=await Mr(R,_,A,p==null?void 0:p.accessToken),le(We,f={workflow:R,workers:B,compatibility:F,reachability:x},f);const te=await xt({namespace:_,workflowId:P,runId:y,settings:A,accessToken:p==null?void 0:p.accessToken});le(Se,s=te,s)};return pt(()=>{const _=u.url.searchParams.get("sort");_&&le(Oe,c=_,c)}),Ue(()=>{le(Je,i=null,i),le(We,f=_o,f),le(Se,s=Xt,s)}),n.$$set=_=>{"$$scope"in _&&e(6,$=_.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(4,{namespace:o,workflow:r,run:l}=u.params,o,(e(3,r),e(0,u)),(e(2,l),e(0,u))),n.$$.dirty&60&&k(o,r,l)},[u,f,l,r,o,a,$,g]}class Br extends ke{constructor(t){super(),ve(this,t,Fr,qr,Ie,{})}}const Tt={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},Hr=No(Tt),Lr=()=>{Hr.set(Tt)};function Or(n){let t;const e=n[0].default,o=_t(e,n,n[1],null);return{c(){o&&o.c()},l(r){o&&o.l(r)},m(r,l){o&&o.m(r,l),t=!0},p(r,l){o&&o.p&&(!t||l&2)&&gt(o,e,r,r[1],t?ht(e,r[1],l,null):wt(r[1]),null)},i(r){t||(h(o,r),t=!0)},o(r){I(o,r),t=!1},d(r){o&&o.d(r)}}}function jr(n){let t,e;return t=new Br({props:{$$slots:{default:[Or]},$$scope:{ctx:n}}}),{c(){S(t.$$.fragment)},l(o){W(t.$$.fragment,o)},m(o,r){V(t,o,r),e=!0},p(o,[r]){const l={};r&2&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(h(t.$$.fragment,o),e=!0)},o(o){I(t.$$.fragment,o),e=!1},d(o){M(t,o)}}}function Qr(n,t,e){let{$$slots:o={},$$scope:r}=t;return Ue(()=>{Lr()}),n.$$set=l=>{"$$scope"in l&&e(1,r=l.$$scope)},[o,r]}class Wn extends ke{constructor(t){super(),ve(this,t,Qr,jr,Ie,{})}}export{Wn as default};
