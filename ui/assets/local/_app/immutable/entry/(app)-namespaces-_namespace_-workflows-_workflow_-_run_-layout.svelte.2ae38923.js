import{S as ke,b as ve,a as Ie,C,D,E as P,j as _,g as b,F as W,K as G,i as mt,A as te,Z as le,m as j,c as L,p as Q,q as J,d as O,k as g,u as K,f as A,L as N,_ as se,e as we,z as pe,h as me,a7 as Me,w as Y,x as z,n as re,s as oo,a5 as oe,y as Se,o as dt,a6 as Ue,a3 as _t,a4 as gt,G as wt,H as ht,I as $t,J as bt}from"../chunks/index.6779d4e2.js";import{p as qe}from"../chunks/stores.6afc1eb1.js";import{L as ro}from"../chunks/loading.a6f9064e.js";import{d as no,f as kt}from"../chunks/menu.7e3d54af.js";import{T as lo}from"../chunks/toggle-switch.0d2aaadb.js";import{T as Ne}from"../chunks/tooltip.65a7fa6c.js";import{t as k}from"../chunks/translate.29a4bc43.js";import{a as De,e as Qe}from"../chunks/event-view.446dd84e.js";import{w as vt}from"../chunks/index.1302fd9b.js";import{I as Be}from"../chunks/input.86f6e192.js";import{R as so,a as ao}from"../chunks/radio-input.d451f838.js";import{S as fo,O as io}from"../chunks/option.3359f258.js";import{R as $e,A as Je}from"../chunks/workflow-actions.6f88149c.js";import{r as It,e as Pe,t as Ye,i as uo,f as co}from"../chunks/events-service.83792881.js";import{B as po}from"../chunks/button.0b50a4b4.js";import{C as mo}from"../chunks/code-block.c796ec58.js";import{B as Fe}from"../chunks/badge.d458ea0a.js";import{I as _o}from"../chunks/icon.a4e81b70.js";import{M as go}from"../chunks/menu-divider.def6f259.js";import{M as Ee}from"../chunks/modal.118648f9.js";import{S as wo}from"../chunks/split-button.9aad1ebf.js";import{w as ho,t as $o,c as bo,s as ko,r as vo,f as Io}from"../chunks/workflow-service.9da2cf1d.js";import{a as Tt}from"../chunks/auth-user.6f15fe0f.js";import{c as To}from"../chunks/core-user.1973d180.js";import{p as Et,i as Eo,c as Rt}from"../chunks/data-encoder-config.37ceca8b.js";import{p as Ro}from"../chunks/persist-store.d8264c86.js";import{s as yo}from"../chunks/settings.b49a4593.js";import{t as Ve}from"../chunks/toaster.ef510498.js";import{r as ge,w as We,i as Ao}from"../chunks/workflow-run.4e335848.js";import{w as Co,a as Do,f as ze}from"../chunks/workflow-terminate-enabled.ed0d90c2.js";import{W as Po}from"../chunks/workflow-status.fc3d74d1.js";import{A as yt}from"../chunks/alert.dcbef44a.js";import{C as Ge,g as Wo,a as So,b as Vo}from"../chunks/pollers-service.d1439dfc.js";import{C as Mo}from"../chunks/index.408ca409.js";import{L as At}from"../chunks/link.8030aa06.js";import{T as Uo,a as qo,b as Te}from"../chunks/tab.9e7175ff.js";import{w as No}from"../chunks/workflows.a94e91ca.js";import{h as Bo}from"../chunks/has.f5323580.js";import{r as Ke,g as be,h as Re,i as ye,j as Ae,k as Ce}from"../chunks/route-for.fbc35ee9.js";import{g as Fo,a as Ho,b as Lo,p as Oo,c as jo}from"../chunks/task-queue-compatibility.cf5696f8.js";import{c as Qo,a as Jo,d as Yo}from"../chunks/decode-payload.04097fa2.js";import{g as zo,a as Go}from"../chunks/get-codec.658caf67.js";function Ko(n){let o,e;return o=new lo({props:{label:k("auto-refresh"),labelPosition:"left",id:"autorefresh",checked:n[1]}}),o.$on("change",function(){mt(n[0])&&n[0].apply(this,arguments)}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){n=t;const l={};r&2&&(l.checked=n[1]),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Zo(n){let o,e;return o=new Ne({props:{bottomLeft:!0,text:k("auto-refresh-tooltip",{interval:"15"}),$$slots:{default:[Ko]},$$scope:{ctx:n}}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,[r]){const l={};r&11&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Xo(n,o,e){let t,r;G(n,De,s=>e(2,r=s));let{onChange:l}=o;return n.$$set=s=>{"onChange"in s&&e(0,l=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&e(1,t=r==="on")},[l,t,r]}class xo extends ke{constructor(o){super(),ve(this,o,Xo,Zo,Ie,{onChange:0})}}function Ze(n,o,e){const t=n.slice();return t[7]=o[e].value,t[8]=o[e].label,t}function Xe(n,o,e){const t=n.slice();return t[11]=o[e],t}function xe(n){let o,e;return o=new ao({props:{id:"reset-event-"+n[11].id,value:n[11].id,label:n[11].id+" - "+n[11].eventType}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r&8&&(l.id="reset-event-"+t[11].id),r&8&&(l.value=t[11].id),r&8&&(l.label=t[11].id+" - "+t[11].eventType),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function er(n){let o,e,t=n[3],r=[];for(let s=0;s<t.length;s+=1)r[s]=xe(Xe(n,t,s));const l=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=we()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);o=we()},m(s,a){for(let f=0;f<r.length;f+=1)r[f].m(s,a);A(s,o,a),e=!0},p(s,a){if(a&8){t=s[3];let f;for(f=0;f<t.length;f+=1){const p=Xe(s,t,f);r[f]?(r[f].p(p,a),_(r[f],1)):(r[f]=xe(p),r[f].c(),_(r[f],1),r[f].m(o.parentNode,o))}for(pe(),f=t.length;f<r.length;f+=1)l(f);me()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)_(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);e=!1},d(s){Me(r,s),s&&g(o)}}}function tr(n){let o=n[8]+"",e,t;return{c(){e=Y(o),t=L()},l(r){e=z(r,o),t=O(r)},m(r,l){A(r,e,l),A(r,t,l)},p:re,d(r){r&&g(e),r&&g(t)}}}function et(n){let o,e;return o=new io({props:{value:n[7],$$slots:{default:[tr]},$$scope:{ctx:n}}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r&16384&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function or(n){let o,e,t=n[4],r=[];for(let s=0;s<t.length;s+=1)r[s]=et(Ze(n,t,s));const l=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=we()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);o=we()},m(s,a){for(let f=0;f<r.length;f+=1)r[f].m(s,a);A(s,o,a),e=!0},p(s,a){if(a&16){t=s[4];let f;for(f=0;f<t.length;f+=1){const p=Ze(s,t,f);r[f]?(r[f].p(p,a),_(r[f],1)):(r[f]=et(p),r[f].c(),_(r[f],1),r[f].m(o.parentNode,o))}for(pe(),f=t.length;f<r.length;f+=1)l(f);me()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)_(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);e=!1},d(s){Me(r,s),s&&g(o)}}}function rr(n){let o,e,t,r,l,s,a,f,p;e=new so({props:{name:"reset-event-id",group:n[2],class:"max-h-40 overflow-auto",$$slots:{default:[er]},$$scope:{ctx:n}}});function u(d){n[5](d)}let i={label:k("workflows","reset-reapply-type-label"),id:"reset-reapply-type-select","data-testid":"workflow-reset-reapply-type-select",$$slots:{default:[or]},$$scope:{ctx:n}};n[0]!==void 0&&(i.value=n[0]),r=new fo({props:i}),te.push(()=>le(r,"value",u));function m(d){n[6](d)}let h={id:"reset-reason",label:k("reason")};return n[1]!==void 0&&(h.value=n[1]),a=new Be({props:h}),te.push(()=>le(a,"value",m)),{c(){o=j("div"),C(e.$$.fragment),t=L(),C(r.$$.fragment),s=L(),C(a.$$.fragment),this.h()},l(d){o=Q(d,"DIV",{class:!0});var $=J(o);D(e.$$.fragment,$),t=O($),D(r.$$.fragment,$),s=O($),D(a.$$.fragment,$),$.forEach(g),this.h()},h(){K(o,"class","flex w-full flex-col gap-4")},m(d,$){A(d,o,$),P(e,o,null),N(o,t),P(r,o,null),N(o,s),P(a,o,null),p=!0},p(d,[$]){const R={};$&4&&(R.group=d[2]),$&16392&&(R.$$scope={dirty:$,ctx:d}),e.$set(R);const H={};$&16384&&(H.$$scope={dirty:$,ctx:d}),!l&&$&1&&(l=!0,H.value=d[0],se(()=>l=!1)),r.$set(H);const T={};!f&&$&2&&(f=!0,T.value=d[1],se(()=>f=!1)),a.$set(T)},i(d){p||(_(e.$$.fragment,d),_(r.$$.fragment,d),_(a.$$.fragment,d),p=!0)},o(d){b(e.$$.fragment,d),b(r.$$.fragment,d),b(a.$$.fragment,d),p=!1},d(d){d&&g(o),W(e),W(r),W(a)}}}function nr(n,o,e){let t;G(n,It,u=>e(3,t=u));let{resetReapplyType:r=$e.Unspecified}=o,{reason:l=""}=o,{eventId:s}=o;const a=[{value:$e.Unspecified,label:k("workflows","reset-reapply-all")},{value:$e.Signal,label:k("workflows","reset-reapply-signals-only")},{value:$e.None,label:k("workflows","reset-reapply-none")}];function f(u){r=u,e(0,r)}function p(u){l=u,e(1,l)}return n.$$set=u=>{"resetReapplyType"in u&&e(0,r=u.resetReapplyType),"reason"in u&&e(1,l=u.reason),"eventId"in u&&e(2,s=u.eventId)},[r,l,s,t,a,f,p]}class lr extends ke{constructor(o){super(),ve(this,o,nr,rr,Ie,{resetReapplyType:0,reason:1,eventId:2})}}const Ct=Ro("resetWorkflows",{}),sr=n=>!n.disableWriteActions&&!n.workflowResetDisabled,ar=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function tt(n,o,e){const t=n.slice();return t[65]=o[e].onClick,t[66]=o[e].destructive,t[67]=o[e].label,t[68]=o[e].allowed,t[69]=o[e].testId,t[70]=o[e].tooltip,t}function fr(n){let o,e;return o=new Ne({props:{bottomRight:!0,width:200,text:n[2],hide:n[3],$$slots:{default:[cr]},$$scope:{ctx:n}}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r[0]&4&&(l.text=t[2]),r[0]&8&&(l.hide=t[3]),r[0]&520|r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function ir(n){let o,e;return o=new wo({props:{id:"workflow-actions",position:"right",disabled:n[18],primaryActionDisabled:!n[19]||n[0],label:k("workflows","request-cancellation"),menuLabel:k("workflows","workflow-actions"),$$slots:{default:[dr]},$$scope:{ctx:n}}}),o.$on("click",n[41]),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r[0]&262144&&(l.disabled=t[18]),r[0]&524289&&(l.primaryActionDisabled=!t[19]||t[0]),r[0]&131072|r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function ur(n){let o=k("workflows","reset")+"",e;return{c(){e=Y(o)},l(t){e=z(t,o)},m(t,r){A(t,e,r)},p:re,d(t){t&&g(e)}}}function cr(n){let o,e;return o=new po({props:{"aria-label":k("workflows","reset"),disabled:!n[3],variant:"primary",$$slots:{default:[ur]},$$scope:{ctx:n}}}),o.$on("click",n[42]),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r[0]&8&&(l.disabled=!t[3]),r[2]&2048&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function ot(n){let o,e;return o=new go({}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function pr(n){let o=n[67]+"",e;return{c(){e=Y(o)},l(t){e=z(t,o)},m(t,r){A(t,e,r)},p(t,r){r[0]&131072&&o!==(o=t[67]+"")&&Se(e,o)},d(t){t&&g(e)}}}function mr(n){let o,e,t;return o=new no({props:{destructive:n[66],disabled:!n[68],"data-testid":n[69],$$slots:{default:[pr]},$$scope:{ctx:n}}}),o.$on("click",function(){mt(n[65])&&n[65].apply(this,arguments)}),{c(){C(o.$$.fragment),e=L()},l(r){D(o.$$.fragment,r),e=O(r)},m(r,l){P(o,r,l),A(r,e,l),t=!0},p(r,l){n=r;const s={};l[0]&131072&&(s.destructive=n[66]),l[0]&131072&&(s.disabled=!n[68]),l[0]&131072&&(s["data-testid"]=n[69]),l[0]&131072|l[2]&2048&&(s.$$scope={dirty:l,ctx:n}),o.$set(s)},i(r){t||(_(o.$$.fragment,r),t=!0)},o(r){b(o.$$.fragment,r),t=!1},d(r){W(o,r),r&&g(e)}}}function rt(n){let o,e,t,r=n[66]&&ot();return e=new Ne({props:{text:n[70],hide:!n[70],width:200,left:!0,$$slots:{default:[mr]},$$scope:{ctx:n}}}),{c(){r&&r.c(),o=L(),C(e.$$.fragment)},l(l){r&&r.l(l),o=O(l),D(e.$$.fragment,l)},m(l,s){r&&r.m(l,s),A(l,o,s),P(e,l,s),t=!0},p(l,s){l[66]?r?s[0]&131072&&_(r,1):(r=ot(),r.c(),_(r,1),r.m(o.parentNode,o)):r&&(pe(),b(r,1,1,()=>{r=null}),me());const a={};s[0]&131072&&(a.text=l[70]),s[0]&131072&&(a.hide=!l[70]),s[0]&131072|s[2]&2048&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(_(r),_(e.$$.fragment,l),t=!0)},o(l){b(r),b(e.$$.fragment,l),t=!1},d(l){r&&r.d(l),l&&g(o),W(e,l)}}}function dr(n){let o,e,t=n[17],r=[];for(let s=0;s<t.length;s+=1)r[s]=rt(tt(n,t,s));const l=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();o=we()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);o=we()},m(s,a){for(let f=0;f<r.length;f+=1)r[f].m(s,a);A(s,o,a),e=!0},p(s,a){if(a[0]&131072){t=s[17];let f;for(f=0;f<t.length;f+=1){const p=tt(s,t,f);r[f]?(r[f].p(p,a),_(r[f],1)):(r[f]=rt(p),r[f].c(),_(r[f],1),r[f].m(o.parentNode,o))}for(pe(),f=t.length;f<r.length;f+=1)l(f);me()}},i(s){if(!e){for(let a=0;a<t.length;a+=1)_(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);e=!1},d(s){Me(r,s),s&&g(o)}}}function _r(n){let o,e=k("workflows","reset-modal-title")+"",t;return{c(){o=j("h3"),t=Y(e),this.h()},l(r){o=Q(r,"H3",{slot:!0});var l=J(o);t=z(l,e),l.forEach(g),this.h()},h(){K(o,"slot","title")},m(r,l){A(r,o,l),N(o,t)},p:re,d(r){r&&g(o)}}}function gr(n){let o,e,t,r,l;function s(u){n[43](u)}function a(u){n[44](u)}function f(u){n[45](u)}let p={};return n[13]!==void 0&&(p.eventId=n[13]),n[12]!==void 0&&(p.resetReapplyType=n[12]),n[14]!==void 0&&(p.reason=n[14]),o=new lr({props:p}),te.push(()=>le(o,"eventId",s)),te.push(()=>le(o,"resetReapplyType",a)),te.push(()=>le(o,"reason",f)),{c(){C(o.$$.fragment)},l(u){D(o.$$.fragment,u)},m(u,i){P(o,u,i),l=!0},p(u,i){const m={};!e&&i[0]&8192&&(e=!0,m.eventId=u[13],se(()=>e=!1)),!t&&i[0]&4096&&(t=!0,m.resetReapplyType=u[12],se(()=>t=!1)),!r&&i[0]&16384&&(r=!0,m.reason=u[14],se(()=>r=!1)),o.$set(m)},i(u){l||(_(o.$$.fragment,u),l=!0)},o(u){b(o.$$.fragment,u),l=!1},d(u){W(o,u)}}}function wr(n){let o,e=k("workflows","cancel-modal-title")+"",t;return{c(){o=j("h3"),t=Y(e),this.h()},l(r){o=Q(r,"H3",{slot:!0});var l=J(o);t=z(l,e),l.forEach(g),this.h()},h(){K(o,"slot","title")},m(r,l){A(r,o,l),N(o,t)},p:re,d(r){r&&g(o)}}}function hr(n){let o,e=k("workflows","cancel-modal-confirmation")+"",t;return{c(){o=j("p"),t=Y(e)},l(r){o=Q(r,"P",{});var l=J(o);t=z(l,e),l.forEach(g)},m(r,l){A(r,o,l),N(o,t)},p:re,d(r){r&&g(o)}}}function $r(n){let o,e=k("workflows","terminate-modal-title")+"",t;return{c(){o=j("h3"),t=Y(e),this.h()},l(r){o=Q(r,"H3",{slot:!0});var l=J(o);t=z(l,e),l.forEach(g),this.h()},h(){K(o,"slot","title")},m(r,l){A(r,o,l),N(o,t)},p:re,d(r){r&&g(o)}}}function br(n){let o,e,t=k("workflows","terminate-modal-confirmation")+"",r,l,s,a,f;function p(i){n[50](i)}let u={id:"workflow-termination-reason",class:"mt-4",placeholder:k("reason-placeholder"),label:k("reason-placeholder"),labelHidden:!0};return n[4]!==void 0&&(u.value=n[4]),s=new Be({props:u}),te.push(()=>le(s,"value",p)),{c(){o=j("div"),e=j("p"),r=Y(t),l=L(),C(s.$$.fragment),this.h()},l(i){o=Q(i,"DIV",{slot:!0});var m=J(o);e=Q(m,"P",{});var h=J(e);r=z(h,t),h.forEach(g),l=O(m),D(s.$$.fragment,m),m.forEach(g),this.h()},h(){K(o,"slot","content")},m(i,m){A(i,o,m),N(o,e),N(e,r),N(o,l),P(s,o,null),f=!0},p(i,m){const h={};!a&&m[0]&16&&(a=!0,h.value=i[4],se(()=>a=!1)),s.$set(h)},i(i){f||(_(s.$$.fragment,i),f=!0)},o(i){b(s.$$.fragment,i),f=!1},d(i){i&&g(o),W(s)}}}function kr(n){let o,e=k("workflows","signal-modal-title")+"",t;return{c(){o=j("h3"),t=Y(e),this.h()},l(r){o=Q(r,"H3",{slot:!0});var l=J(o);t=z(l,e),l.forEach(g),this.h()},h(){K(o,"slot","title")},m(r,l){A(r,o,l),N(o,t)},p:re,d(r){r&&g(o)}}}function vr(n){let o,e,t,r,l,s,a=k("workflows","signal-payload-input-label")+"",f,p,u,i=k("workflows","signal-payload-input-label-hint")+"",m,h,d,$;function R(E){n[53](E)}let H={id:"signal-name",label:k("workflows","signal-name-label"),required:!0};n[6]!==void 0&&(H.value=n[6]),e=new Be({props:H}),te.push(()=>le(e,"value",R));let T={class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1};return d=new mo({props:T}),n[54](d),d.$on("change",n[26]),{c(){o=j("div"),C(e.$$.fragment),r=L(),l=j("div"),s=j("span"),f=Y(a),p=L(),u=j("span"),m=Y(i),h=L(),C(d.$$.fragment),this.h()},l(E){o=Q(E,"DIV",{slot:!0,class:!0});var M=J(o);D(e.$$.fragment,M),r=O(M),l=Q(M,"DIV",{});var U=J(l);s=Q(U,"SPAN",{class:!0});var y=J(s);f=z(y,a),y.forEach(g),p=O(U),u=Q(U,"SPAN",{class:!0});var I=J(u);m=z(I,i),I.forEach(g),h=O(U),D(d.$$.fragment,U),U.forEach(g),M.forEach(g),this.h()},h(){K(s,"class","font-secondary text-sm font-medium"),K(u,"class","font-secondary text-xs font-light italic"),K(o,"slot","content"),K(o,"class","flex flex-col gap-4")},m(E,M){A(E,o,M),P(e,o,null),N(o,r),N(o,l),N(l,s),N(s,f),N(l,p),N(l,u),N(u,m),N(l,h),P(d,l,null),$=!0},p(E,M){const U={};!t&&M[0]&64&&(t=!0,U.value=E[6],se(()=>t=!1)),e.$set(U);const y={};M[0]&32&&(y.content=E[5]),d.$set(y)},i(E){$||(_(e.$$.fragment,E),_(d.$$.fragment,E),$=!0)},o(E){b(e.$$.fragment,E),b(d.$$.fragment,E),$=!1},d(E){E&&g(o),W(e),n[54](null),W(d)}}}function Ir(n){let o,e,t,r,l,s,a,f,p,u,i,m,h,d,$,R,H,T,E;const M=[ir,fr],U=[];function y(c,S){return c[1]?0:1}o=y(n),e=U[o]=M[o](n);function I(c){n[46](c)}function q(c){n[47](c)}let B={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:k("confirm"),cancelText:k("cancel"),confirmDisabled:!n[20],$$slots:{content:[gr],title:[_r]},$$scope:{ctx:n}};n[11]!==void 0&&(B.error=n[11]),n[9]!==void 0&&(B.open=n[9]),r=new Ee({props:B}),te.push(()=>le(r,"error",I)),te.push(()=>le(r,"open",q)),r.$on("confirmModal",n[28]),r.$on("cancelModal",n[23]);function ae(c){n[48](c)}function fe(c){n[49](c)}let v={id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",confirmText:k("confirm"),cancelText:k("cancel"),loading:n[15],confirmType:"destructive",$$slots:{content:[hr],title:[wr]},$$scope:{ctx:n}};n[11]!==void 0&&(v.error=n[11]),n[7]!==void 0&&(v.open=n[7]),f=new Ee({props:v}),te.push(()=>le(f,"error",ae)),te.push(()=>le(f,"open",fe)),f.$on("confirmModal",n[25]);function V(c){n[51](c)}function F(c){n[52](c)}let X={id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",confirmText:k("workflows","terminate"),cancelText:k("cancel"),confirmType:"destructive",$$slots:{content:[br],title:[$r]},$$scope:{ctx:n}};n[11]!==void 0&&(X.error=n[11]),n[8]!==void 0&&(X.open=n[8]),m=new Ee({props:X}),te.push(()=>le(m,"error",V)),te.push(()=>le(m,"open",F)),m.$on("cancelModal",n[21]),m.$on("confirmModal",n[24]);function ne(c){n[55](c)}function x(c){n[56](c)}let ee={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",confirmText:k("submit"),cancelText:k("cancel"),confirmDisabled:!n[6],$$slots:{content:[vr],title:[kr]},$$scope:{ctx:n}};return n[11]!==void 0&&(ee.error=n[11]),n[10]!==void 0&&(ee.open=n[10]),R=new Ee({props:ee}),te.push(()=>le(R,"error",ne)),te.push(()=>le(R,"open",x)),R.$on("cancelModal",n[22]),R.$on("confirmModal",n[27]),{c(){e.c(),t=L(),C(r.$$.fragment),a=L(),C(f.$$.fragment),i=L(),C(m.$$.fragment),$=L(),C(R.$$.fragment)},l(c){e.l(c),t=O(c),D(r.$$.fragment,c),a=O(c),D(f.$$.fragment,c),i=O(c),D(m.$$.fragment,c),$=O(c),D(R.$$.fragment,c)},m(c,S){U[o].m(c,S),A(c,t,S),P(r,c,S),A(c,a,S),P(f,c,S),A(c,i,S),P(m,c,S),A(c,$,S),P(R,c,S),E=!0},p(c,S){let de=o;o=y(c),o===de?U[o].p(c,S):(pe(),b(U[de],1,1,()=>{U[de]=null}),me(),e=U[o],e?e.p(c,S):(e=U[o]=M[o](c),e.c()),_(e,1),e.m(t.parentNode,t));const ce={};S[0]&1048576&&(ce.confirmDisabled=!c[20]),S[0]&28672|S[2]&2048&&(ce.$$scope={dirty:S,ctx:c}),!l&&S[0]&2048&&(l=!0,ce.error=c[11],se(()=>l=!1)),!s&&S[0]&512&&(s=!0,ce.open=c[9],se(()=>s=!1)),r.$set(ce);const he={};S[0]&32768&&(he.loading=c[15]),S[2]&2048&&(he.$$scope={dirty:S,ctx:c}),!p&&S[0]&2048&&(p=!0,he.error=c[11],se(()=>p=!1)),!u&&S[0]&128&&(u=!0,he.open=c[7],se(()=>u=!1)),f.$set(he);const ie={};S[0]&16|S[2]&2048&&(ie.$$scope={dirty:S,ctx:c}),!h&&S[0]&2048&&(h=!0,ie.error=c[11],se(()=>h=!1)),!d&&S[0]&256&&(d=!0,ie.open=c[8],se(()=>d=!1)),m.$set(ie);const ue={};S[0]&64&&(ue.confirmDisabled=!c[6]),S[0]&65632|S[2]&2048&&(ue.$$scope={dirty:S,ctx:c}),!H&&S[0]&2048&&(H=!0,ue.error=c[11],se(()=>H=!1)),!T&&S[0]&1024&&(T=!0,ue.open=c[10],se(()=>T=!1)),R.$set(ue)},i(c){E||(_(e),_(r.$$.fragment,c),_(f.$$.fragment,c),_(m.$$.fragment,c),_(R.$$.fragment,c),E=!0)},o(c){b(e),b(r.$$.fragment,c),b(f.$$.fragment,c),b(m.$$.fragment,c),b(R.$$.fragment,c),E=!1},d(c){U[o].d(c),c&&g(t),W(r,c),c&&g(a),W(f,c),c&&g(i),W(m,c),c&&g($),W(R,c)}}}function Tr(n,o,e){let t,r,l,s,a,f,p,u,i,m,h,d=re,$=()=>(d(),d=oo(de,w=>e(20,h=w)),de),R,H,T,E;G(n,It,w=>e(39,u=w)),G(n,ge,w=>e(57,i=w)),G(n,Tt,w=>e(58,m=w)),G(n,Et,w=>e(59,R=w)),G(n,Eo,w=>e(60,H=w)),G(n,Rt,w=>e(61,T=w)),G(n,qe,w=>e(40,E=w)),n.$$.on_destroy.push(()=>d());var M,U,y;let{workflow:I}=o,{namespace:q}=o,{cancelInProgress:B}=o,{isRunning:ae}=o;const fe=()=>T?'{"metadata": {"encoding": ""}, "data": ""}':"";let v="",V=fe(),F="",X=!1,ne=!1,x=!1,ee=!1,c="",S=$e.Unspecified,de=vt();$();let ce,he=!1,ie,ue;const Pt=()=>{e(4,v="")},He=()=>{e(5,V=fe()),e(6,F=""),ue==null||ue.resetView(V)},Le=()=>{e(12,S=$e.Unspecified),oe(de,h=void 0,h),e(14,ce=void 0)},Wt=async()=>{e(8,ne=!1),oe(ge,i=Date.now(),i),Ve.push({id:"workflow-termination-success-toast",message:k("workflows","terminate-success")})},St=w=>{var Z;e(4,v=""),e(11,c=(Z=w==null?void 0:w.message)!==null&&Z!==void 0?Z:k("unknown-error"))},Vt=()=>{e(11,c=""),I.canBeTerminated&&$o({workflow:I,namespace:q,reason:ze({action:Je.Terminate,reason:v,email:m.email}),identity:m.email}).then(Wt).catch(St)},Mt=async()=>{var w;e(15,he=!0),e(11,c="");try{await bo({namespace:q,workflowId:I.id,runId:I.runId}),e(7,X=!1),e(15,he=!1),oe(ge,i=Date.now(),i),Ve.push({id:"workflow-cancelation-success-toast",message:k("workflows","cancel-success")})}catch(Z){e(11,c=(w=Z==null?void 0:Z.message)!==null&&w!==void 0?w:k("unknown-error"))}},Ut=w=>{e(5,V=w.detail)},qt=async()=>{var w;e(11,c="");try{await ko({namespace:q,workflowId:I.id,runId:I.runId,signalInput:V,signalName:F,settings:{...E.data.settings,codec:{endpoint:T,includeCredentials:H,passAccessToken:R}},accessToken:m.accessToken}),e(10,ee=!1),oe(ge,i=Date.now(),i),Ve.push({message:k("workflows","signal-success"),id:"workflow-signal-success-toast"}),He()}catch(Z){e(11,c=(w=Z==null?void 0:Z.message)!==null&&w!==void 0?w:k("unknown-error"))}},Nt=async()=>{var w;e(11,c="");try{const Z=await vo({namespace:q,workflowId:I.id,runId:I.runId,eventId:h,reason:ze({action:Je.Reset,reason:ce,email:m.email}),resetReapplyType:S});Z&&Z.runId&&Ct.update(to=>({...to,[I.runId]:Z.runId})),e(9,x=!1),oe(ge,i=Date.now(),i)}catch(Z){e(11,c=(w=Z==null?void 0:Z.message)!==null&&w!==void 0?w:k("unknown-error"))}Le()};let Oe,je=To();G(n,je,w=>e(38,p=w));const Bt=()=>e(7,X=!0),Ft=()=>e(9,x=!0);function Ht(w){de=w,$(e(13,de))}function Lt(w){S=w,e(12,S)}function Ot(w){ce=w,e(14,ce)}function jt(w){c=w,e(11,c)}function Qt(w){x=w,e(9,x),e(3,a),e(2,ie),e(36,r),e(35,l),e(37,s),e(30,I),e(34,y),e(39,u),e(32,M),e(33,U),e(40,E)}function Jt(w){c=w,e(11,c)}function Yt(w){X=w,e(7,X)}function zt(w){v=w,e(4,v)}function Gt(w){c=w,e(11,c)}function Kt(w){ne=w,e(8,ne),e(3,a),e(2,ie),e(36,r),e(35,l),e(37,s),e(30,I),e(34,y),e(39,u),e(32,M),e(33,U),e(40,E)}function Zt(w){F=w,e(6,F)}function Xt(w){te[w?"unshift":"push"](()=>{ue=w,e(16,ue)})}function xt(w){c=w,e(11,c)}function eo(w){ee=w,e(10,ee),e(3,a),e(2,ie),e(36,r),e(35,l),e(37,s),e(30,I),e(34,y),e(39,u),e(32,M),e(33,U),e(40,E)}return n.$$set=w=>{"workflow"in w&&e(30,I=w.workflow),"namespace"in w&&e(31,q=w.namespace),"cancelInProgress"in w&&e(0,B=w.cancelInProgress),"isRunning"in w&&e(1,ae=w.isRunning)},n.$$.update=()=>{n.$$.dirty[1]&512&&e(19,t=Co(E.data.settings)),n.$$.dirty[1]&512&&e(36,r=ar(E.data.settings)),n.$$.dirty[1]&512&&e(35,l=Do(E.data.settings)),n.$$.dirty[1]&512&&e(37,s=sr(E.data.settings)),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&326&&(s?s&&(e(32,M=I==null?void 0:I.pendingChildren)===null||M===void 0?void 0:M.length)>0?e(2,ie=k("workflows","reset-disabled-pending-children")):s&&(e(33,U=I==null?void 0:I.pendingChildren)===null||U===void 0?void 0:U.length)===0&&u.length===0&&e(2,ie=k("workflows","reset-disabled-no-events")):e(2,ie=k("workflows","reset-disabled"))),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&328&&e(3,a=s&&(e(34,y=I==null?void 0:I.pendingChildren)===null||y===void 0?void 0:y.length)===0&&u.length>0),n.$$.dirty[0]&12|n.$$.dirty[1]&48&&e(17,Oe=[{label:k("workflows","reset"),onClick:()=>e(9,x=!0),testId:"reset-button",allowed:a,tooltip:a?"":ie},{label:k("workflows","signal"),onClick:()=>e(10,ee=!0),testId:"signal-button",allowed:r,tooltip:r?"":k("workflows","signal-disabled")},{label:k("workflows","terminate"),onClick:()=>e(8,ne=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":k("workflows","terminate-disabled")}]),n.$$.dirty[1]&129&&e(18,f=p.namespaceWriteDisabled(q)||!ho(yo))},[B,ae,ie,a,v,V,F,X,ne,x,ee,c,S,de,ce,he,ue,Oe,f,t,h,Pt,He,Le,Vt,Mt,Ut,qt,Nt,je,I,q,M,U,y,l,r,s,p,u,E,Bt,Ft,Ht,Lt,Ot,jt,Qt,Jt,Yt,zt,Gt,Kt,Zt,Xt,xt,eo]}class Er extends ke{constructor(o){super(),ve(this,o,Tr,Ir,Ie,{workflow:30,namespace:31,cancelInProgress:0,isRunning:1},null,[-1,-1,-1])}}const Rr=(n,o)=>{var r;const e=n==="Running",t=(r=o==null?void 0:o.end)==null?void 0:r.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&t},nt=n=>{const o=n==null?void 0:n.indexOf("?");return o>-1?n.slice(0,o):n},_e=(n,o,e=!1)=>{const t=nt(n).split("/"),r=nt(o).split("/");if(e&&t.length!==r.length)return!1;for(let l=0;l<t.length;l++){const s=t[l],a=r[l];if(s!==a)return!1}return!0};function yr(n){let o=k("workflows","back-to-workflows")+"",e;return{c(){e=Y(o)},l(t){e=z(t,o)},m(t,r){A(t,e,r)},p:re,d(t){t&&g(e)}}}function lt(n){let o,e,t=k("workers","last-used-version")+"",r,l,s,a,f,p=k("workers","next-version")+"",u,i,m;return l=new Ge({props:{defaultVersion:n[1]===n[6]||n[1]===n[7],active:n[1]===n[7],buildId:n[1],$$slots:{"default-worker":[Cr],"overall-default-worker":[Ar]},$$scope:{ctx:n}}}),i=new Ge({props:{defaultVersion:!!n[6],active:n[6]===n[7],buildId:n[6],$$slots:{"default-worker":[Pr],"overall-default-worker":[Dr]},$$scope:{ctx:n}}}),{c(){o=j("p"),e=j("span"),r=Y(t),C(l.$$.fragment),s=L(),a=j("p"),f=j("span"),u=Y(p),C(i.$$.fragment),this.h()},l(h){o=Q(h,"P",{class:!0});var d=J(o);e=Q(d,"SPAN",{});var $=J(e);r=z($,t),$.forEach(g),D(l.$$.fragment,d),d.forEach(g),s=O(h),a=Q(h,"P",{class:!0});var R=J(a);f=Q(R,"SPAN",{});var H=J(f);u=z(H,p),H.forEach(g),D(i.$$.fragment,R),R.forEach(g),this.h()},h(){K(o,"class","flex items-center gap-1"),K(a,"class","flex items-center gap-1")},m(h,d){A(h,o,d),N(o,e),N(e,r),P(l,o,null),A(h,s,d),A(h,a,d),N(a,f),N(f,u),P(i,a,null),m=!0},p(h,d){const $={};d&194&&($.defaultVersion=h[1]===h[6]||h[1]===h[7]),d&130&&($.active=h[1]===h[7]),d&2&&($.buildId=h[1]),d&134217858&&($.$$scope={dirty:d,ctx:h}),l.$set($);const R={};d&64&&(R.defaultVersion=!!h[6]),d&192&&(R.active=h[6]===h[7]),d&64&&(R.buildId=h[6]),d&134217920&&(R.$$scope={dirty:d,ctx:h}),i.$set(R)},i(h){m||(_(l.$$.fragment,h),_(i.$$.fragment,h),m=!0)},o(h){b(l.$$.fragment,h),b(i.$$.fragment,h),m=!1},d(h){h&&g(o),W(l),h&&g(s),h&&g(a),W(i)}}}function st(n){let o=k("workers","overall")+"",e;return{c(){e=Y(o)},l(t){e=z(t,o)},m(t,r){A(t,e,r)},p:re,d(t){t&&g(e)}}}function Ar(n){let o,e=n[1]===n[7]&&st();return{c(){e&&e.c(),o=we()},l(t){e&&e.l(t),o=we()},m(t,r){e&&e.m(t,r),A(t,o,r)},p(t,r){t[1]===t[7]?e?e.p(t,r):(e=st(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&g(o)}}}function Cr(n){let o=k("workers","default")+"",e;return{c(){e=Y(o)},l(t){e=z(t,o)},m(t,r){A(t,e,r)},p:re,d(t){t&&g(e)}}}function at(n){let o=k("workers","overall")+"",e;return{c(){e=Y(o)},l(t){e=z(t,o)},m(t,r){A(t,e,r)},p:re,d(t){t&&g(e)}}}function Dr(n){let o,e=n[6]===n[7]&&at();return{c(){e&&e.c(),o=we()},l(t){e&&e.l(t),o=we()},m(t,r){e&&e.m(t,r),A(t,o,r)},p(t,r){t[6]===t[7]?e?e.p(t,r):(e=at(),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&g(o)}}}function Pr(n){let o=k("workers","default")+"",e;return{c(){e=Y(o)},l(t){e=z(t,o)},m(t,r){A(t,e,r)},p:re,d(t){t&&g(e)}}}function ft(n){let o,e;return o=new xo({props:{onChange:n[16]}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p:re,i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function it(n){let o,e,t,r;return e=new yt({props:{bold:!0,icon:"info",intent:"info",title:k("workflows","cancel-request-sent"),$$slots:{default:[Wr]},$$scope:{ctx:n}}}),{c(){o=j("div"),C(e.$$.fragment),this.h()},l(l){o=Q(l,"DIV",{class:!0});var s=J(o);D(e.$$.fragment,s),s.forEach(g),this.h()},h(){K(o,"class","mb-4")},m(l,s){A(l,o,s),P(e,o,null),r=!0},p(l,s){const a={};s&134217728&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){r||(_(e.$$.fragment,l),t||_t(()=>{t=gt(o,kt,{duration:200,delay:100}),t.start()}),r=!0)},o(l){b(e.$$.fragment,l),r=!1},d(l){l&&g(o),W(e)}}}function Wr(n){let o=k("workflows","cancel-request-sent-description")+"",e;return{c(){e=Y(o)},l(t){e=z(t,o)},m(t,r){A(t,e,r)},p:re,d(t){t&&g(e)}}}function ut(n){let o,e,t,r;return e=new yt({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:k("workflows","reset-success-alert-title"),$$slots:{default:[Vr]},$$scope:{ctx:n}}}),{c(){o=j("div"),C(e.$$.fragment),this.h()},l(l){o=Q(l,"DIV",{class:!0});var s=J(o);D(e.$$.fragment,s),s.forEach(g),this.h()},h(){K(o,"class","mb-4")},m(l,s){A(l,o,s),P(e,o,null),r=!0},p(l,s){const a={};s&134217777&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){r||(_(e.$$.fragment,l),t||_t(()=>{t=gt(o,kt,{duration:200,delay:100}),t.start()}),r=!0)},o(l){b(e.$$.fragment,l),r=!1},d(l){l&&g(o),W(e)}}}function Sr(n){let o;return{c(){o=Y("here")},l(e){o=z(e,"here")},m(e,t){A(e,o,t)},d(e){e&&g(o)}}}function Vr(n){var l,s,a,f;let o,e,t,r;return e=new At({props:{href:be({namespace:n[0],workflow:(s=(l=n[4])==null?void 0:l.workflow)==null?void 0:s.id,run:n[5][(f=(a=n[4])==null?void 0:a.workflow)==null?void 0:f.runId]}),$$slots:{default:[Sr]},$$scope:{ctx:n}}}),{c(){o=Y("You can find the resulting Workflow Execution "),C(e.$$.fragment),t=Y(".")},l(p){o=z(p,"You can find the resulting Workflow Execution "),D(e.$$.fragment,p),t=z(p,".")},m(p,u){A(p,o,u),P(e,p,u),A(p,t,u),r=!0},p(p,u){var m,h,d,$;const i={};u&49&&(i.href=be({namespace:p[0],workflow:(h=(m=p[4])==null?void 0:m.workflow)==null?void 0:h.id,run:p[5][($=(d=p[4])==null?void 0:d.workflow)==null?void 0:$.runId]})),u&134217728&&(i.$$scope={dirty:u,ctx:p}),e.$set(i)},i(p){r||(_(e.$$.fragment,p),r=!0)},o(p){b(e.$$.fragment,p),r=!1},d(p){p&&g(o),W(e,p),p&&g(t)}}}function Mr(n){var t;let o=((t=n[2])==null?void 0:t.historyEvents)+"",e;return{c(){e=Y(o)},l(r){e=z(r,o)},m(r,l){A(r,e,l)},p(r,l){var s;l&4&&o!==(o=((s=r[2])==null?void 0:s.historyEvents)+"")&&Se(e,o)},d(r){r&&g(e)}}}function Ur(n){let o,e;return o=new Fe({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Mr]},$$scope:{ctx:n}}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r&134217732&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function qr(n){var t,r;let o=((r=(t=n[13])==null?void 0:t.pollers)==null?void 0:r.length)+"",e;return{c(){e=Y(o)},l(l){e=z(l,o)},m(l,s){A(l,e,s)},p(l,s){var a,f;s&8192&&o!==(o=((f=(a=l[13])==null?void 0:a.pollers)==null?void 0:f.length)+"")&&Se(e,o)},d(l){l&&g(e)}}}function Nr(n){let o,e;return o=new Fe({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[qr]},$$scope:{ctx:n}}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r&134225920&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function ct(n){let o,e;return o=new _o({props:{name:"canceled",width:20,height:20}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Br(n){var s,a;let o,e=((a=(s=n[2])==null?void 0:s.pendingActivities)==null?void 0:a.length)+"",t,r,l=n[11]&&ct();return{c(){l&&l.c(),o=L(),t=Y(e)},l(f){l&&l.l(f),o=O(f),t=z(f,e)},m(f,p){l&&l.m(f,p),A(f,o,p),A(f,t,p),r=!0},p(f,p){var u,i;f[11]?l?p&2048&&_(l,1):(l=ct(),l.c(),_(l,1),l.m(o.parentNode,o)):l&&(pe(),b(l,1,1,()=>{l=null}),me()),(!r||p&4)&&e!==(e=((i=(u=f[2])==null?void 0:u.pendingActivities)==null?void 0:i.length)+"")&&Se(t,e)},i(f){r||(_(l),r=!0)},o(f){b(l),r=!1},d(f){l&&l.d(f),f&&g(o),f&&g(t)}}}function Fr(n){let o,e;return o=new Fe({props:{type:n[11]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r&2048&&(l.type=t[11]?"warning":"blue"),r&134219780&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Hr(n){let o,e,t,r,l,s,a,f,p,u;return o=new Te({props:{label:k("workflows","history-tab"),id:"history-tab",href:be({...n[12]}),active:_e(n[15].url.pathname,be({...n[12]})),$$slots:{default:[Ur]},$$scope:{ctx:n}}}),t=new Te({props:{label:k("workflows","workers-tab"),id:"workers-tab",href:Re(n[12]),active:_e(n[15].url.pathname,Re(n[12])),$$slots:{default:[Nr]},$$scope:{ctx:n}}}),l=new Te({props:{label:k("workflows","pending-activities-tab"),id:"pending-activities-tab",href:ye(n[12]),active:_e(n[15].url.pathname,ye(n[12])),$$slots:{default:[Fr]},$$scope:{ctx:n}}}),a=new Te({props:{label:k("workflows","stack-trace-tab"),id:"stack-trace-tab",href:Ae(n[12]),active:_e(n[15].url.pathname,Ae(n[12]))}}),p=new Te({props:{label:k("workflows","queries-tab"),id:"queries-tab",href:Ce(n[12]),active:_e(n[15].url.pathname,Ce(n[12]))}}),{c(){C(o.$$.fragment),e=L(),C(t.$$.fragment),r=L(),C(l.$$.fragment),s=L(),C(a.$$.fragment),f=L(),C(p.$$.fragment)},l(i){D(o.$$.fragment,i),e=O(i),D(t.$$.fragment,i),r=O(i),D(l.$$.fragment,i),s=O(i),D(a.$$.fragment,i),f=O(i),D(p.$$.fragment,i)},m(i,m){P(o,i,m),A(i,e,m),P(t,i,m),A(i,r,m),P(l,i,m),A(i,s,m),P(a,i,m),A(i,f,m),P(p,i,m),u=!0},p(i,m){const h={};m&4096&&(h.href=be({...i[12]})),m&36864&&(h.active=_e(i[15].url.pathname,be({...i[12]}))),m&134217732&&(h.$$scope={dirty:m,ctx:i}),o.$set(h);const d={};m&4096&&(d.href=Re(i[12])),m&36864&&(d.active=_e(i[15].url.pathname,Re(i[12]))),m&134225920&&(d.$$scope={dirty:m,ctx:i}),t.$set(d);const $={};m&4096&&($.href=ye(i[12])),m&36864&&($.active=_e(i[15].url.pathname,ye(i[12]))),m&134219780&&($.$$scope={dirty:m,ctx:i}),l.$set($);const R={};m&4096&&(R.href=Ae(i[12])),m&36864&&(R.active=_e(i[15].url.pathname,Ae(i[12]))),a.$set(R);const H={};m&4096&&(H.href=Ce(i[12])),m&36864&&(H.active=_e(i[15].url.pathname,Ce(i[12]))),p.$set(H)},i(i){u||(_(o.$$.fragment,i),_(t.$$.fragment,i),_(l.$$.fragment,i),_(a.$$.fragment,i),_(p.$$.fragment,i),u=!0)},o(i){b(o.$$.fragment,i),b(t.$$.fragment,i),b(l.$$.fragment,i),b(a.$$.fragment,i),b(p.$$.fragment,i),u=!1},d(i){W(o,i),i&&g(e),W(t,i),i&&g(r),W(l,i),i&&g(s),W(a,i),i&&g(f),W(p,i)}}}function Lr(n){let o,e;return o=new qo({props:{class:"flex flex-wrap gap-6",label:"workflow detail",$$slots:{default:[Hr]},$$scope:{ctx:n}}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,r){const l={};r&134264836&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Or(n){var ae,fe;let o,e,t,r,l,s,a,f,p,u,i,m,h,d,$,R,H,T,E,M,U;t=new At({props:{href:`${Ke({namespace:n[0]})}?${n[14]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[yr]},$$scope:{ctx:n}}}),f=new Mo({props:{copyIconTitle:k("copy-icon-title"),copySuccessIconTitle:k("copy-success-icon-title"),content:(ae=n[2])==null?void 0:ae.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}}),i=new Po({props:{status:(fe=n[2])==null?void 0:fe.status}});let y=n[8]&&lt(n),I=n[3]&&ft(n);R=new Er({props:{isRunning:n[3],cancelInProgress:n[10],workflow:n[2],namespace:n[0]}});let q=n[10]&&it(n),B=n[9]&&ut(n);return M=new Uo({props:{$$slots:{default:[Lr]},$$scope:{ctx:n}}}),{c(){o=j("header"),e=j("div"),C(t.$$.fragment),r=L(),l=j("div"),s=j("div"),a=j("h1"),C(f.$$.fragment),p=L(),u=j("div"),C(i.$$.fragment),m=L(),y&&y.c(),h=L(),d=j("div"),I&&I.c(),$=L(),C(R.$$.fragment),H=L(),q&&q.c(),T=L(),B&&B.c(),E=L(),C(M.$$.fragment),this.h()},l(v){o=Q(v,"HEADER",{class:!0});var V=J(o);e=Q(V,"DIV",{class:!0});var F=J(e);D(t.$$.fragment,F),F.forEach(g),r=O(V),l=Q(V,"DIV",{class:!0});var X=J(l);s=Q(X,"DIV",{class:!0});var ne=J(s);a=Q(ne,"H1",{"data-testid":!0,class:!0});var x=J(a);D(f.$$.fragment,x),x.forEach(g),p=O(ne),u=Q(ne,"DIV",{class:!0});var ee=J(u);D(i.$$.fragment,ee),m=O(ee),y&&y.l(ee),ee.forEach(g),ne.forEach(g),h=O(X),d=Q(X,"DIV",{class:!0});var c=J(d);I&&I.l(c),$=O(c),D(R.$$.fragment,c),c.forEach(g),X.forEach(g),H=O(V),q&&q.l(V),T=O(V),B&&B.l(V),E=O(V),D(M.$$.fragment,V),V.forEach(g),this.h()},h(){K(e,"class","mb-4 block"),K(a,"data-testid","workflow-id-heading"),K(a,"class","overflow-hidden text-2xl font-medium"),K(u,"class","flex flex-wrap items-center gap-4"),K(s,"class","flex w-full flex-col justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),K(d,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end"),K(l,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),K(o,"class","mb-4 flex flex-col gap-1")},m(v,V){A(v,o,V),N(o,e),P(t,e,null),N(o,r),N(o,l),N(l,s),N(s,a),P(f,a,null),N(s,p),N(s,u),P(i,u,null),N(u,m),y&&y.m(u,null),N(l,h),N(l,d),I&&I.m(d,null),N(d,$),P(R,d,null),N(o,H),q&&q.m(o,null),N(o,T),B&&B.m(o,null),N(o,E),P(M,o,null),U=!0},p(v,[V]){var c,S;const F={};V&16385&&(F.href=`${Ke({namespace:v[0]})}?${v[14]}`),V&134217728&&(F.$$scope={dirty:V,ctx:v}),t.$set(F);const X={};V&4&&(X.content=(c=v[2])==null?void 0:c.id),f.$set(X);const ne={};V&4&&(ne.status=(S=v[2])==null?void 0:S.status),i.$set(ne),v[8]?y?(y.p(v,V),V&256&&_(y,1)):(y=lt(v),y.c(),_(y,1),y.m(u,null)):y&&(pe(),b(y,1,1,()=>{y=null}),me()),v[3]?I?(I.p(v,V),V&8&&_(I,1)):(I=ft(v),I.c(),_(I,1),I.m(d,$)):I&&(pe(),b(I,1,1,()=>{I=null}),me());const x={};V&8&&(x.isRunning=v[3]),V&1024&&(x.cancelInProgress=v[10]),V&4&&(x.workflow=v[2]),V&1&&(x.namespace=v[0]),R.$set(x),v[10]?q?(q.p(v,V),V&1024&&_(q,1)):(q=it(v),q.c(),_(q,1),q.m(o,T)):q&&(pe(),b(q,1,1,()=>{q=null}),me()),v[9]?B?(B.p(v,V),V&512&&_(B,1)):(B=ut(v),B.c(),_(B,1),B.m(o,E)):B&&(pe(),b(B,1,1,()=>{B=null}),me());const ee={};V&134264836&&(ee.$$scope={dirty:V,ctx:v}),M.$set(ee)},i(v){U||(_(t.$$.fragment,v),_(f.$$.fragment,v),_(i.$$.fragment,v),_(y),_(I),_(R.$$.fragment,v),_(q),_(B),_(M.$$.fragment,v),U=!0)},o(v){b(t.$$.fragment,v),b(f.$$.fragment,v),b(i.$$.fragment,v),b(y),b(I),b(R.$$.fragment,v),b(q),b(B),b(M.$$.fragment,v),U=!1},d(v){v&&g(o),W(t),W(f),W(i),y&&y.d(),I&&I.d(),W(R),q&&q.d(),B&&B.d(),W(M)}}}const pt=15e3;function jr(n,o,e){let t,r,l,s,a,f,p,u,i,m,h,d,$,R,H,T,E,M,U;G(n,We,F=>e(4,$=F)),G(n,Ct,F=>e(5,R=F)),G(n,Pe,F=>e(24,H=F)),G(n,ge,F=>e(25,T=F)),G(n,De,F=>e(26,E=F)),G(n,No,F=>e(14,M=F)),G(n,qe,F=>e(15,U=F));var y,I,q,B,ae;let{namespace:fe}=o,v;dt(()=>{a&&E==="on"&&(clearInterval(v),e(22,v=setInterval(()=>oe(ge,T=Date.now(),T),pt)))});const V=()=>{E==="on"?(oe(De,E="off",E),clearInterval(v)):(oe(ge,T=Date.now(),T),oe(De,E="on",E),clearInterval(v),e(22,v=setInterval(()=>oe(ge,T=Date.now(),T),pt)))};return Ue(()=>{clearInterval(v)}),n.$$set=F=>{"namespace"in F&&e(0,fe=F.namespace)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{workflow:t,workers:r,compatibility:l}=$,t,(e(13,r),e(4,$)),(e(23,l),e(4,$))),n.$$.dirty&5&&e(12,s={namespace:fe,workflow:t==null?void 0:t.id,run:t==null?void 0:t.runId}),n.$$.dirty&131088&&e(3,a=e(17,y=$==null?void 0:$.workflow)===null||y===void 0?void 0:y.isRunning),n.$$.dirty&262160&&e(11,f=["Terminated","TimedOut","Canceled"].includes(e(18,I=$.workflow)===null||I===void 0?void 0:I.status)),n.$$.dirty&4194312&&(a||clearInterval(v)),n.$$.dirty&17301520&&e(10,p=Rr(e(19,q=$==null?void 0:$.workflow)===null||q===void 0?void 0:q.status,H)),n.$$.dirty&1048624&&e(9,u=Bo(R,e(20,B=$==null?void 0:$.workflow)===null||B===void 0?void 0:B.runId)),n.$$.dirty&2097156&&e(8,i=e(21,ae=t==null?void 0:t.mostRecentWorkerVersionStamp)===null||ae===void 0?void 0:ae.useVersioning),n.$$.dirty&4&&e(1,m=Fo(t)),n.$$.dirty&8388608&&e(7,h=Ho(l)),n.$$.dirty&8388610&&e(6,d=Lo(l,m))},[fe,m,t,a,$,R,d,h,i,u,p,f,s,r,M,U,V,y,I,q,B,ae,v,l,H]}class Qr extends ke{constructor(o){super(),ve(this,o,jr,Or,Ie,{namespace:0})}}async function Jr({activity:n,namespace:o,settings:e,accessToken:t},{convertWithCodec:r=Qo,convertWithWebsocket:l=Jo,decodeAttributes:s=Yo,encoderEndpoint:a=Rt}={}){const f=zo(e,a),p=Go(e,Et),u={...e,codec:{...e==null?void 0:e.codec,endpoint:f,passAccessToken:p}},i=f?await r({attributes:n,namespace:o,settings:u,accessToken:t}):await l(n);return s(i)}const Yr=async({activity:n,namespace:o,settings:e,accessToken:t})=>await Jr({activity:n,namespace:o,settings:e,accessToken:t}),zr=async(n,o,e,t)=>{const r=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of r){const a=await Yr({activity:s,namespace:o,settings:e,accessToken:t});l.push(a)}return l};function Gr(n){let o,e,t;o=new Qr({props:{namespace:n[0].params.namespace}});const r=n[7].default,l=wt(r,n,n[6],null);return{c(){C(o.$$.fragment),e=L(),l&&l.c()},l(s){D(o.$$.fragment,s),e=O(s),l&&l.l(s)},m(s,a){P(o,s,a),A(s,e,a),l&&l.m(s,a),t=!0},p(s,a){const f={};a&1&&(f.namespace=s[0].params.namespace),o.$set(f),l&&l.p&&(!t||a&64)&&ht(l,r,s,s[6],t?bt(r,s[6],a,null):$t(s[6]),null)},i(s){t||(_(o.$$.fragment,s),_(l,s),t=!0)},o(s){b(o.$$.fragment,s),b(l,s),t=!1},d(s){W(o,s),s&&g(e),l&&l.d(s)}}}function Kr(n){let o,e;return o=new ro({}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p:re,i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function Zr(n){let o,e,t,r;const l=[Kr,Gr],s=[];function a(f,p){return f[1].workflow?1:0}return e=a(n),t=s[e]=l[e](n),{c(){o=j("div"),t.c(),this.h()},l(f){o=Q(f,"DIV",{class:!0});var p=J(o);t.l(p),p.forEach(g),this.h()},h(){K(o,"class","flex h-full flex-col gap-6")},m(f,p){A(f,o,p),s[e].m(o,null),r=!0},p(f,[p]){let u=e;e=a(f),e===u?s[e].p(f,p):(pe(),b(s[u],1,1,()=>{s[u]=null}),me(),t=s[e],t?t.p(f,p):(t=s[e]=l[e](f),t.c()),_(t,1),t.m(o,null))},i(f){r||(_(t),r=!0)},o(f){b(t),r=!1},d(f){f&&g(o),s[e].d()}}}function Xr(n,o,e){let t,r,l,s,a,f,p,u,i,m;G(n,Pe,T=>e(8,s=T)),G(n,We,T=>e(1,a=T)),G(n,Ye,T=>e(9,f=T)),G(n,Qe,T=>e(10,p=T)),G(n,qe,T=>e(0,u=T)),G(n,ge,T=>e(5,i=T)),G(n,Tt,T=>e(11,m=T));let{$$slots:h={},$$scope:d}=o;const $=async(T,E)=>{var M;if(!((M=T==null?void 0:T.mostRecentWorkerVersionStamp)===null||M===void 0)&&M.useVersioning)return await So({queue:E,namespace:t})},R=async({namespace:T,workers:E,taskQueue:M})=>{if(!Oo(E.pollers))return;const y=jo(E.pollers);return await Vo({namespace:T,buildIds:y,taskQueue:M})},H=async(T,E,M)=>{const{settings:U}=u.data,y=await Io({namespace:T,workflowId:E,runId:M}),{taskQueue:I}=y,q=await Wo({queue:I,namespace:T}),B=await $(y,I),ae=await R({namespace:T,workers:q,taskQueue:I});y.pendingActivities=await zr(y,T,U,m==null?void 0:m.accessToken),oe(We,a={workflow:y,workers:q,compatibility:B,reachability:ae},a);const fe=await co({namespace:T,workflowId:E,runId:M,settings:U,accessToken:m==null?void 0:m.accessToken});oe(Pe,s=fe,s)};return dt(()=>{const T=u.url.searchParams.get("sort");T&&oe(Qe,p=T,p)}),Ue(()=>{oe(Ye,f=null,f),oe(We,a=Ao,a),oe(Pe,s=uo,s)}),n.$$set=T=>{"$$scope"in T&&e(6,d=T.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(4,{namespace:t,workflow:r,run:l}=u.params,t,(e(3,r),e(0,u)),(e(2,l),e(0,u))),n.$$.dirty&60&&H(t,r,l)},[u,a,l,r,t,i,d,h]}class xr extends ke{constructor(o){super(),ve(this,o,Xr,Zr,Ie,{})}}const Dt={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},en=vt(Dt),tn=()=>{en.set(Dt)};function on(n){let o;const e=n[0].default,t=wt(e,n,n[1],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),o=!0},p(r,l){t&&t.p&&(!o||l&2)&&ht(t,e,r,r[1],o?bt(e,r[1],l,null):$t(r[1]),null)},i(r){o||(_(t,r),o=!0)},o(r){b(t,r),o=!1},d(r){t&&t.d(r)}}}function rn(n){let o,e;return o=new xr({props:{$$slots:{default:[on]},$$scope:{ctx:n}}}),{c(){C(o.$$.fragment)},l(t){D(o.$$.fragment,t)},m(t,r){P(o,t,r),e=!0},p(t,[r]){const l={};r&2&&(l.$$scope={dirty:r,ctx:t}),o.$set(l)},i(t){e||(_(o.$$.fragment,t),e=!0)},o(t){b(o.$$.fragment,t),e=!1},d(t){W(o,t)}}}function nn(n,o,e){let{$$slots:t={},$$scope:r}=o;return Ue(()=>{tn()}),n.$$set=l=>{"$$scope"in l&&e(1,r=l.$$scope)},[t,r]}class zn extends ke{constructor(o){super(),ve(this,o,nn,rn,Ie,{})}}export{zn as default};
