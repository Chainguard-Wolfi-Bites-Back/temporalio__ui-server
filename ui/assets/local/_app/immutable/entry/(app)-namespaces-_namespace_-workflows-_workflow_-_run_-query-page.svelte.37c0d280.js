import{S as G,b as H,a as J,ar as U,m as T,p as C,q as S,k as $,f as b,as as M,j as _,g,K as z,C as w,D as v,E as y,n as m,F as q,A as Y,a0 as Z,c as B,d as F,u as L,L as D,a1 as x,e as O,z as ee,h as te,a7 as ne,w as A,x as K}from"../chunks/index.e6b134b1.js";import{p as X}from"../chunks/stores.0adeb2df.js";import{P as re}from"../chunks/page-title.15b49203.js";import{t as E}from"../chunks/translate.742ecd1a.js";import{B as oe}from"../chunks/button.e1623fb1.js";import{C as le}from"../chunks/code-block.b20949af.js";import{E as ae}from"../chunks/empty-state.82b0d2d8.js";import{L as se}from"../chunks/loading.cfa66999.js";import{S as ce,a as ue}from"../chunks/simple-select.e89b77d6.js";import{T as ie}from"../chunks/toggle-switch.772a1461.js";import{g as fe,a as me}from"../chunks/query-service.4100e40e.js";import{a as pe}from"../chunks/auth-user.5bbc4aee.js";function R(o,t,r){const e=o.slice();return e[16]=t[r],e}function $e(o){var e;let t,r;return t=new ae({props:{title:E("common.error-occurred"),content:E("workflows.no-workers-running-message"),error:(e=o[19])==null?void 0:e.message}}),{c(){w(t.$$.fragment)},l(n){v(t.$$.fragment,n)},m(n,l){y(t,n,l),r=!0},p:m,i(n){r||(_(t.$$.fragment,n),r=!0)},o(n){g(t.$$.fragment,n),r=!1},d(n){q(t,n)}}}function _e(o){let t,r,e,n,l,a,u,s,i,k,h,I,j;function Q(c){o[5](c)}let N={id:"query-select",label:E("workflows.query-type"),"data-testid":"query-select",$$slots:{default:[he]},$$scope:{ctx:o}};o[0]!==void 0&&(N.value=o[0]),e=new ce({props:N}),Y.push(()=>Z(e,"value",Q)),a=new oe({props:{leadingIcon:"retry",loading:qe,$$slots:{default:[de]},$$scope:{ctx:o}}}),a.$on("click",o[6]),i=new ie({props:{label:E("workflows.json-formatting"),labelPosition:"left",id:"json-formatting",checked:o[2]}}),i.$on("change",o[7]);let p={ctx:o,current:null,token:null,hasCatch:!1,pending:we,then:be,catch:ke,value:15,blocks:[,,,]};return U(I=o[1],p),{c(){t=T("div"),r=T("div"),w(e.$$.fragment),l=B(),w(a.$$.fragment),u=B(),s=T("div"),w(i.$$.fragment),k=B(),h=T("div"),p.block.c(),this.h()},l(c){t=C(c,"DIV",{class:!0});var f=S(t);r=C(f,"DIV",{class:!0});var d=S(r);v(e.$$.fragment,d),l=F(d),v(a.$$.fragment,d),d.forEach($),u=F(f),s=C(f,"DIV",{class:!0});var P=S(s);v(i.$$.fragment,P),P.forEach($),f.forEach($),k=F(c),h=C(c,"DIV",{class:!0});var V=S(h);p.block.l(V),V.forEach($),this.h()},h(){L(r,"class","flex items-center gap-4"),L(s,"class","flex justify-end"),L(t,"class","flex justify-between"),L(h,"class","my-2 flex h-full items-start")},m(c,f){b(c,t,f),D(t,r),y(e,r,null),D(r,l),y(a,r,null),D(t,u),D(t,s),y(i,s,null),b(c,k,f),b(c,h,f),p.block.m(h,p.anchor=null),p.mount=()=>h,p.anchor=null,j=!0},p(c,f){o=c;const d={};f&1048576&&(d.$$scope={dirty:f,ctx:o}),!n&&f&1&&(n=!0,d.value=o[0],x(()=>n=!1)),e.$set(d);const P={};f&1048576&&(P.$$scope={dirty:f,ctx:o}),a.$set(P);const V={};f&4&&(V.checked=o[2]),i.$set(V),p.ctx=o,f&2&&I!==(I=o[1])&&U(I,p)||M(p,o,f)},i(c){j||(_(e.$$.fragment,c),_(a.$$.fragment,c),_(i.$$.fragment,c),_(p.block),j=!0)},o(c){g(e.$$.fragment,c),g(a.$$.fragment,c),g(i.$$.fragment,c);for(let f=0;f<3;f+=1){const d=p.blocks[f];g(d)}j=!1},d(c){c&&$(t),q(e),q(a),q(i),c&&$(k),c&&$(h),p.block.d(),p.token=null,p=null}}}function ge(o){let t=o[16]+"",r;return{c(){r=A(t)},l(e){r=K(e,t)},m(e,n){b(e,r,n)},p:m,d(e){e&&$(r)}}}function W(o){let t,r;return t=new ue({props:{value:o[16],$$slots:{default:[ge]},$$scope:{ctx:o}}}),{c(){w(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){y(t,e,n),r=!0},p(e,n){const l={};n&1048576&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){q(t,e)}}}function he(o){let t,r,e=o[14],n=[];for(let a=0;a<e.length;a+=1)n[a]=W(R(o,e,a));const l=a=>g(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();t=O()},l(a){for(let u=0;u<n.length;u+=1)n[u].l(a);t=O()},m(a,u){for(let s=0;s<n.length;s+=1)n[s].m(a,u);b(a,t,u),r=!0},p(a,u){if(u&8){e=a[14];let s;for(s=0;s<e.length;s+=1){const i=R(a,e,s);n[s]?(n[s].p(i,u),_(n[s],1)):(n[s]=W(i),n[s].c(),_(n[s],1),n[s].m(t.parentNode,t))}for(ee(),s=e.length;s<n.length;s+=1)l(s);te()}},i(a){if(!r){for(let u=0;u<e.length;u+=1)_(n[u]);r=!0}},o(a){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)g(n[u]);r=!1},d(a){ne(n,a),a&&$(t)}}}function de(o){let t=E("common.refresh")+"",r;return{c(){r=A(t)},l(e){r=K(e,t)},m(e,n){b(e,r,n)},p:m,d(e){e&&$(r)}}}function ke(o){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function be(o){let t,r;return t=new le({props:{content:o[15],language:o[2]?"json":"text",copyIconTitle:E("common.copy-icon-title"),copySuccessIconTitle:E("common.copy-success-icon-title")}}),{c(){w(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){y(t,e,n),r=!0},p(e,n){const l={};n&2&&(l.content=e[15]),n&4&&(l.language=e[2]?"json":"text"),t.$set(l)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){q(t,e)}}}function we(o){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ve(o){let t,r,e,n,l=E("workflows.no-workers-failure-message")+"",a,u;return r=new se({}),{c(){t=T("div"),w(r.$$.fragment),e=B(),n=T("p"),a=A(l),this.h()},l(s){t=C(s,"DIV",{class:!0});var i=S(t);v(r.$$.fragment,i),e=F(i),n=C(i,"P",{});var k=S(n);a=K(k,l),k.forEach($),i.forEach($),this.h()},h(){L(t,"class","text-center")},m(s,i){b(s,t,i),y(r,t,null),D(t,e),D(t,n),D(n,a),u=!0},p:m,i(s){u||(_(r.$$.fragment,s),u=!0)},o(s){g(r.$$.fragment,s),u=!1},d(s){s&&$(t),q(r)}}}function ye(o){let t,r,e={ctx:o,current:null,token:null,hasCatch:!0,pending:ve,then:_e,catch:$e,value:14,error:19,blocks:[,,,]};return U(o[3],e),{c(){t=T("section"),e.block.c()},l(n){t=C(n,"SECTION",{});var l=S(t);e.block.l(l),l.forEach($)},m(n,l){b(n,t,l),e.block.m(t,e.anchor=null),e.mount=()=>t,e.anchor=null,r=!0},p(n,[l]){o=n,M(e,o,l)},i(n){r||(_(e.block),r=!0)},o(n){for(let l=0;l<3;l+=1){const a=e.blocks[l];g(a)}r=!1},d(n){n&&$(t),e.block.d(),e.token=null,e=null}}}let qe=!1;function Ee(o,t,r){let e,n;z(o,pe,c=>r(8,e=c)),z(o,X,c=>r(9,n=c));const{namespace:l,workflow:a,run:u}=n.params,s={id:a,runId:u};let i,k=fe({namespace:l,workflow:s}).then(c=>(r(0,i=i||c[0]),c)),h;const I=c=>{var f;r(1,h=me({namespace:l,workflow:s,queryType:c},(f=n.data)===null||f===void 0?void 0:f.settings,e==null?void 0:e.accessToken))};let j=!0;function Q(c){i=c,r(0,i)}const N=()=>I(i),p=()=>r(2,j=!j);return o.$$.update=()=>{o.$$.dirty&1&&i&&I(i)},[i,h,j,k,I,Q,N,p]}class Ie extends G{constructor(t){super(),H(this,t,Ee,ye,J,{})}}function je(o){let t,r,e,n;return t=new re({props:{title:`${E("workflows.queries-tab")} | ${o[1]}`,url:o[0].url.href}}),e=new Ie({}),{c(){w(t.$$.fragment),r=B(),w(e.$$.fragment)},l(l){v(t.$$.fragment,l),r=F(l),v(e.$$.fragment,l)},m(l,a){y(t,l,a),b(l,r,a),y(e,l,a),n=!0},p(l,[a]){const u={};a&1&&(u.url=l[0].url.href),t.$set(u)},i(l){n||(_(t.$$.fragment,l),_(e.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),g(e.$$.fragment,l),n=!1},d(l){q(t,l),l&&$(r),q(e,l)}}}function Te(o,t,r){let e;z(o,X,l=>r(0,e=l));const n=e.params.workflow;return[e,n]}class Ae extends G{constructor(t){super(),H(this,t,Te,je,J,{})}}export{Ae as default};
