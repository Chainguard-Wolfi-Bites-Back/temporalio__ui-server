import{S as ke,b as ve,a as Ie,C as D,D as S,E as P,j as d,g as h,F as W,K as Y,i as ut,A as re,Z as se,m as O,c as U,p as Q,q as J,d as L,k as w,u as K,f as C,L as N,_ as ae,e as he,z as _e,h as ge,a7 as ct,w as z,x as G,n as ne,s as eo,a5 as te,y as We,o as pt,a6 as Me,a3 as mt,a4 as dt,G as _t,H as gt,I as wt,J as ht}from"../chunks/index.6779d4e2.js";import{p as qe}from"../chunks/stores.6c389017.js";import{L as to}from"../chunks/loading.f0ef345a.js";import{d as oo,f as $t}from"../chunks/menu.7e3d54af.js";import{T as ro}from"../chunks/toggle-switch.0d2aaadb.js";import{T as Fe}from"../chunks/tooltip.65a7fa6c.js";import{t as k}from"../chunks/translate.64137fbc.js";import{a as De,e as Oe}from"../chunks/event-view.446dd84e.js";import{w as bt}from"../chunks/index.1302fd9b.js";import{C as no,w as lo,a as so,f as Qe}from"../chunks/workflow-terminate-enabled.e5717e54.js";import{I as Ne}from"../chunks/input.86f6e192.js";import{R as ao,a as fo}from"../chunks/radio-input.fea9b4f9.js";import{R as $e,A as Je}from"../chunks/workflow-actions.6f88149c.js";import{r as kt,e as Se,t as Ye,i as io,f as uo}from"../chunks/events-service.db7df67a.js";import{B as co}from"../chunks/button.0b50a4b4.js";import{C as po}from"../chunks/code-block.c796ec58.js";import{B as Be}from"../chunks/badge.d458ea0a.js";import{I as mo}from"../chunks/icon.a4e81b70.js";import{M as _o}from"../chunks/menu-divider.def6f259.js";import{M as Ee}from"../chunks/modal.118648f9.js";import{S as go}from"../chunks/split-button.9aad1ebf.js";import{w as wo,t as ho,c as $o,s as bo,r as ko,f as vo}from"../chunks/workflow-service.499bf420.js";import{a as vt}from"../chunks/auth-user.6f15fe0f.js";import{c as Io}from"../chunks/core-user.1973d180.js";import{p as It,i as To,c as Tt}from"../chunks/data-encoder-config.37ceca8b.js";import{p as Eo}from"../chunks/persist-store.d8264c86.js";import{s as Ro}from"../chunks/settings.b49a4593.js";import{t as Ve}from"../chunks/toaster.ef510498.js";import{r as de,w as Pe,i as Ao}from"../chunks/workflow-run.4e335848.js";import{W as Co}from"../chunks/workflow-status.e9cc3c02.js";import{A as Et}from"../chunks/alert.dcbef44a.js";import{C as ze,g as yo,a as Do,b as So}from"../chunks/pollers-service.0104d28c.js";import{C as Po}from"../chunks/index.408ca409.js";import{L as Rt}from"../chunks/link.8030aa06.js";import{T as Wo,a as Vo,b as Te}from"../chunks/tab.9e7175ff.js";import{w as Mo}from"../chunks/workflows.c45c7011.js";import{h as qo}from"../chunks/has.f5323580.js";import{r as Ge,g as be,h as Re,i as Ae,j as Ce,k as ye}from"../chunks/route-for.811be610.js";import{g as Fo,a as No,b as Bo,p as Ho,c as Uo}from"../chunks/task-queue-compatibility.cf5696f8.js";import{c as Lo,a as jo,d as Oo}from"../chunks/decode-payload.8f08cfe6.js";import{g as Qo,a as Jo}from"../chunks/get-codec.658caf67.js";function Yo(n){let t,e;return t=new ro({props:{label:k("auto-refresh"),labelPosition:"left",id:"autorefresh",checked:n[1]}}),t.$on("change",function(){ut(n[0])&&n[0].apply(this,arguments)}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){n=o;const l={};r&2&&(l.checked=n[1]),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function zo(n){let t,e;return t=new Fe({props:{bottomLeft:!0,text:k("auto-refresh-tooltip",{interval:"15"}),$$slots:{default:[Yo]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,[r]){const l={};r&11&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function Go(n,t,e){let o,r;Y(n,De,s=>e(2,r=s));let{onChange:l}=t;return n.$$set=s=>{"onChange"in s&&e(0,l=s.onChange)},n.$$.update=()=>{n.$$.dirty&4&&e(1,o=r==="on")},[l,o,r]}class Ko extends ke{constructor(t){super(),ve(this,t,Go,zo,Ie,{onChange:0})}}function Ke(n,t,e){const o=n.slice();return o[6]=t[e],o}function Ze(n){let t,e;return t=new fo({props:{id:"reset-event-"+n[6].id,value:n[6].id,label:n[6].id+" - "+n[6].eventType}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){const l={};r&8&&(l.id="reset-event-"+o[6].id),r&8&&(l.value=o[6].id),r&8&&(l.label=o[6].id+" - "+o[6].eventType),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function Zo(n){let t,e,o=n[3],r=[];for(let s=0;s<o.length;s+=1)r[s]=Ze(Ke(n,o,s));const l=s=>h(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=he()},l(s){for(let i=0;i<r.length;i+=1)r[i].l(s);t=he()},m(s,i){for(let f=0;f<r.length;f+=1)r[f].m(s,i);C(s,t,i),e=!0},p(s,i){if(i&8){o=s[3];let f;for(f=0;f<o.length;f+=1){const p=Ke(s,o,f);r[f]?(r[f].p(p,i),d(r[f],1)):(r[f]=Ze(p),r[f].c(),d(r[f],1),r[f].m(t.parentNode,t))}for(_e(),f=o.length;f<r.length;f+=1)l(f);ge()}},i(s){if(!e){for(let i=0;i<o.length;i+=1)d(r[i]);e=!0}},o(s){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)h(r[i]);e=!1},d(s){ct(r,s),s&&w(t)}}}function Xo(n){let t,e,o,r,l,s,i,f;e=new ao({props:{name:"reset-event-id",group:n[2],class:"max-h-40 overflow-auto",description:k("workflows","reset-event-radio-group-description"),$$slots:{default:[Zo]},$$scope:{ctx:n}}}),r=new no({props:{id:"reset-reapply-type-checkbox",checked:n[0]===$e.Signal,label:k("workflows","reset-reapply-type-label")}}),r.$on("change",n[4]);function p(a){n[5](a)}let m={id:"reset-reason",label:k("reason")};return n[1]!==void 0&&(m.value=n[1]),s=new Ne({props:m}),re.push(()=>se(s,"value",p)),{c(){t=O("div"),D(e.$$.fragment),o=U(),D(r.$$.fragment),l=U(),D(s.$$.fragment),this.h()},l(a){t=Q(a,"DIV",{class:!0});var u=J(t);S(e.$$.fragment,u),o=L(u),S(r.$$.fragment,u),l=L(u),S(s.$$.fragment,u),u.forEach(w),this.h()},h(){K(t,"class","flex w-full flex-col gap-4")},m(a,u){C(a,t,u),P(e,t,null),N(t,o),P(r,t,null),N(t,l),P(s,t,null),f=!0},p(a,[u]){const g={};u&4&&(g.group=a[2]),u&520&&(g.$$scope={dirty:u,ctx:a}),e.$set(g);const $={};u&1&&($.checked=a[0]===$e.Signal),r.$set($);const I={};!i&&u&2&&(i=!0,I.value=a[1],ae(()=>i=!1)),s.$set(I)},i(a){f||(d(e.$$.fragment,a),d(r.$$.fragment,a),d(s.$$.fragment,a),f=!0)},o(a){h(e.$$.fragment,a),h(r.$$.fragment,a),h(s.$$.fragment,a),f=!1},d(a){a&&w(t),W(e),W(r),W(s)}}}function xo(n,t,e){let o;Y(n,kt,p=>e(3,o=p));let{resetReapplyType:r=$e.Signal}=t,{reason:l=""}=t,{eventId:s}=t;const i=p=>{e(0,r=p.detail.checked?$e.Signal:$e.None)};function f(p){l=p,e(1,l)}return n.$$set=p=>{"resetReapplyType"in p&&e(0,r=p.resetReapplyType),"reason"in p&&e(1,l=p.reason),"eventId"in p&&e(2,s=p.eventId)},[r,l,s,o,i,f]}class er extends ke{constructor(t){super(),ve(this,t,xo,Xo,Ie,{resetReapplyType:0,reason:1,eventId:2})}}const At=Eo("resetWorkflows",{}),tr=n=>!n.disableWriteActions&&!n.workflowResetDisabled,or=n=>!n.disableWriteActions&&!n.workflowSignalDisabled;function Xe(n,t,e){const o=n.slice();return o[65]=t[e].onClick,o[66]=t[e].destructive,o[67]=t[e].label,o[68]=t[e].allowed,o[69]=t[e].testId,o[70]=t[e].tooltip,o}function rr(n){let t,e;return t=new Fe({props:{bottomRight:!0,width:200,text:n[2],hide:n[3],$$slots:{default:[sr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){const l={};r[0]&4&&(l.text=o[2]),r[0]&8&&(l.hide=o[3]),r[0]&520|r[2]&2048&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function nr(n){let t,e;return t=new go({props:{id:"workflow-actions",position:"right",disabled:n[18],primaryActionDisabled:!n[19]||n[0],label:k("workflows","request-cancellation"),menuLabel:k("workflows","workflow-actions"),$$slots:{default:[ir]},$$scope:{ctx:n}}}),t.$on("click",n[41]),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){const l={};r[0]&262144&&(l.disabled=o[18]),r[0]&524289&&(l.primaryActionDisabled=!o[19]||o[0]),r[0]&131072|r[2]&2048&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function lr(n){let t=k("workflows","reset")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:ne,d(o){o&&w(e)}}}function sr(n){let t,e;return t=new co({props:{"aria-label":k("workflows","reset"),disabled:!n[3],variant:"primary",$$slots:{default:[lr]},$$scope:{ctx:n}}}),t.$on("click",n[42]),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){const l={};r[0]&8&&(l.disabled=!o[3]),r[2]&2048&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function xe(n){let t,e;return t=new _o({}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function ar(n){let t=n[67]+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p(o,r){r[0]&131072&&t!==(t=o[67]+"")&&We(e,t)},d(o){o&&w(e)}}}function fr(n){let t,e,o;return t=new oo({props:{destructive:n[66],disabled:!n[68],"data-testid":n[69],$$slots:{default:[ar]},$$scope:{ctx:n}}}),t.$on("click",function(){ut(n[65])&&n[65].apply(this,arguments)}),{c(){D(t.$$.fragment),e=U()},l(r){S(t.$$.fragment,r),e=L(r)},m(r,l){P(t,r,l),C(r,e,l),o=!0},p(r,l){n=r;const s={};l[0]&131072&&(s.destructive=n[66]),l[0]&131072&&(s.disabled=!n[68]),l[0]&131072&&(s["data-testid"]=n[69]),l[0]&131072|l[2]&2048&&(s.$$scope={dirty:l,ctx:n}),t.$set(s)},i(r){o||(d(t.$$.fragment,r),o=!0)},o(r){h(t.$$.fragment,r),o=!1},d(r){W(t,r),r&&w(e)}}}function et(n){let t,e,o,r=n[66]&&xe();return e=new Fe({props:{text:n[70],hide:!n[70],width:200,left:!0,$$slots:{default:[fr]},$$scope:{ctx:n}}}),{c(){r&&r.c(),t=U(),D(e.$$.fragment)},l(l){r&&r.l(l),t=L(l),S(e.$$.fragment,l)},m(l,s){r&&r.m(l,s),C(l,t,s),P(e,l,s),o=!0},p(l,s){l[66]?r?s[0]&131072&&d(r,1):(r=xe(),r.c(),d(r,1),r.m(t.parentNode,t)):r&&(_e(),h(r,1,1,()=>{r=null}),ge());const i={};s[0]&131072&&(i.text=l[70]),s[0]&131072&&(i.hide=!l[70]),s[0]&131072|s[2]&2048&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){o||(d(r),d(e.$$.fragment,l),o=!0)},o(l){h(r),h(e.$$.fragment,l),o=!1},d(l){r&&r.d(l),l&&w(t),W(e,l)}}}function ir(n){let t,e,o=n[17],r=[];for(let s=0;s<o.length;s+=1)r[s]=et(Xe(n,o,s));const l=s=>h(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();t=he()},l(s){for(let i=0;i<r.length;i+=1)r[i].l(s);t=he()},m(s,i){for(let f=0;f<r.length;f+=1)r[f].m(s,i);C(s,t,i),e=!0},p(s,i){if(i[0]&131072){o=s[17];let f;for(f=0;f<o.length;f+=1){const p=Xe(s,o,f);r[f]?(r[f].p(p,i),d(r[f],1)):(r[f]=et(p),r[f].c(),d(r[f],1),r[f].m(t.parentNode,t))}for(_e(),f=o.length;f<r.length;f+=1)l(f);ge()}},i(s){if(!e){for(let i=0;i<o.length;i+=1)d(r[i]);e=!0}},o(s){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)h(r[i]);e=!1},d(s){ct(r,s),s&&w(t)}}}function ur(n){let t,e=k("workflows","reset-modal-title")+"",o;return{c(){t=O("h3"),o=z(e),this.h()},l(r){t=Q(r,"H3",{slot:!0});var l=J(t);o=G(l,e),l.forEach(w),this.h()},h(){K(t,"slot","title")},m(r,l){C(r,t,l),N(t,o)},p:ne,d(r){r&&w(t)}}}function cr(n){let t,e,o,r,l;function s(m){n[43](m)}function i(m){n[44](m)}function f(m){n[45](m)}let p={};return n[13]!==void 0&&(p.eventId=n[13]),n[12]!==void 0&&(p.resetReapplyType=n[12]),n[14]!==void 0&&(p.reason=n[14]),t=new er({props:p}),re.push(()=>se(t,"eventId",s)),re.push(()=>se(t,"resetReapplyType",i)),re.push(()=>se(t,"reason",f)),{c(){D(t.$$.fragment)},l(m){S(t.$$.fragment,m)},m(m,a){P(t,m,a),l=!0},p(m,a){const u={};!e&&a[0]&8192&&(e=!0,u.eventId=m[13],ae(()=>e=!1)),!o&&a[0]&4096&&(o=!0,u.resetReapplyType=m[12],ae(()=>o=!1)),!r&&a[0]&16384&&(r=!0,u.reason=m[14],ae(()=>r=!1)),t.$set(u)},i(m){l||(d(t.$$.fragment,m),l=!0)},o(m){h(t.$$.fragment,m),l=!1},d(m){W(t,m)}}}function pr(n){let t,e=k("workflows","cancel-modal-title")+"",o;return{c(){t=O("h3"),o=z(e),this.h()},l(r){t=Q(r,"H3",{slot:!0});var l=J(t);o=G(l,e),l.forEach(w),this.h()},h(){K(t,"slot","title")},m(r,l){C(r,t,l),N(t,o)},p:ne,d(r){r&&w(t)}}}function mr(n){let t,e=k("workflows","cancel-modal-confirmation")+"",o;return{c(){t=O("p"),o=z(e)},l(r){t=Q(r,"P",{});var l=J(t);o=G(l,e),l.forEach(w)},m(r,l){C(r,t,l),N(t,o)},p:ne,d(r){r&&w(t)}}}function dr(n){let t,e=k("workflows","terminate-modal-title")+"",o;return{c(){t=O("h3"),o=z(e),this.h()},l(r){t=Q(r,"H3",{slot:!0});var l=J(t);o=G(l,e),l.forEach(w),this.h()},h(){K(t,"slot","title")},m(r,l){C(r,t,l),N(t,o)},p:ne,d(r){r&&w(t)}}}function _r(n){let t,e,o=k("workflows","terminate-modal-confirmation")+"",r,l,s,i,f;function p(a){n[50](a)}let m={id:"workflow-termination-reason",class:"mt-4",placeholder:k("reason-placeholder"),label:k("reason-placeholder"),labelHidden:!0};return n[4]!==void 0&&(m.value=n[4]),s=new Ne({props:m}),re.push(()=>se(s,"value",p)),{c(){t=O("div"),e=O("p"),r=z(o),l=U(),D(s.$$.fragment),this.h()},l(a){t=Q(a,"DIV",{slot:!0});var u=J(t);e=Q(u,"P",{});var g=J(e);r=G(g,o),g.forEach(w),l=L(u),S(s.$$.fragment,u),u.forEach(w),this.h()},h(){K(t,"slot","content")},m(a,u){C(a,t,u),N(t,e),N(e,r),N(t,l),P(s,t,null),f=!0},p(a,u){const g={};!i&&u[0]&16&&(i=!0,g.value=a[4],ae(()=>i=!1)),s.$set(g)},i(a){f||(d(s.$$.fragment,a),f=!0)},o(a){h(s.$$.fragment,a),f=!1},d(a){a&&w(t),W(s)}}}function gr(n){let t,e=k("workflows","signal-modal-title")+"",o;return{c(){t=O("h3"),o=z(e),this.h()},l(r){t=Q(r,"H3",{slot:!0});var l=J(t);o=G(l,e),l.forEach(w),this.h()},h(){K(t,"slot","title")},m(r,l){C(r,t,l),N(t,o)},p:ne,d(r){r&&w(t)}}}function wr(n){let t,e,o,r,l,s,i=k("workflows","signal-payload-input-label")+"",f,p,m,a=k("workflows","signal-payload-input-label-hint")+"",u,g,$,I;function A(E){n[53](E)}let j={id:"signal-name",label:k("workflows","signal-name-label"),required:!0};n[6]!==void 0&&(j.value=n[6]),e=new Ne({props:j}),re.push(()=>se(e,"value",A));let T={class:"max-h-80 overflow-y-scroll overscroll-contain",content:n[5],editable:!0,copyable:!1};return $=new po({props:T}),n[54]($),$.$on("change",n[26]),{c(){t=O("div"),D(e.$$.fragment),r=U(),l=O("div"),s=O("span"),f=z(i),p=U(),m=O("span"),u=z(a),g=U(),D($.$$.fragment),this.h()},l(E){t=Q(E,"DIV",{slot:!0,class:!0});var M=J(t);S(e.$$.fragment,M),r=L(M),l=Q(M,"DIV",{});var q=J(l);s=Q(q,"SPAN",{class:!0});var R=J(s);f=G(R,i),R.forEach(w),p=L(q),m=Q(q,"SPAN",{class:!0});var v=J(m);u=G(v,a),v.forEach(w),g=L(q),S($.$$.fragment,q),q.forEach(w),M.forEach(w),this.h()},h(){K(s,"class","font-secondary text-sm font-medium"),K(m,"class","font-secondary text-xs font-light italic"),K(t,"slot","content"),K(t,"class","flex flex-col gap-4")},m(E,M){C(E,t,M),P(e,t,null),N(t,r),N(t,l),N(l,s),N(s,f),N(l,p),N(l,m),N(m,u),N(l,g),P($,l,null),I=!0},p(E,M){const q={};!o&&M[0]&64&&(o=!0,q.value=E[6],ae(()=>o=!1)),e.$set(q);const R={};M[0]&32&&(R.content=E[5]),$.$set(R)},i(E){I||(d(e.$$.fragment,E),d($.$$.fragment,E),I=!0)},o(E){h(e.$$.fragment,E),h($.$$.fragment,E),I=!1},d(E){E&&w(t),W(e),n[54](null),W($)}}}function hr(n){let t,e,o,r,l,s,i,f,p,m,a,u,g,$,I,A,j,T,E;const M=[nr,rr],q=[];function R(c,y){return c[1]?0:1}t=R(n),e=q[t]=M[t](n);function v(c){n[46](c)}function F(c){n[47](c)}let B={id:"reset-confirmation-modal","data-testid":"reset-confirmation-modal",confirmText:k("confirm"),cancelText:k("cancel"),confirmDisabled:!n[20],$$slots:{content:[cr],title:[ur]},$$scope:{ctx:n}};n[11]!==void 0&&(B.error=n[11]),n[9]!==void 0&&(B.open=n[9]),r=new Ee({props:B}),re.push(()=>se(r,"error",v)),re.push(()=>se(r,"open",F)),r.$on("confirmModal",n[28]),r.$on("cancelModal",n[23]);function le(c){n[48](c)}function fe(c){n[49](c)}let b={id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",confirmText:k("confirm"),cancelText:k("cancel"),loading:n[15],confirmType:"destructive",$$slots:{content:[mr],title:[pr]},$$scope:{ctx:n}};n[11]!==void 0&&(b.error=n[11]),n[7]!==void 0&&(b.open=n[7]),f=new Ee({props:b}),re.push(()=>se(f,"error",le)),re.push(()=>se(f,"open",fe)),f.$on("confirmModal",n[25]);function V(c){n[51](c)}function H(c){n[52](c)}let X={id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",confirmText:k("workflows","terminate"),cancelText:k("cancel"),confirmType:"destructive",$$slots:{content:[_r],title:[dr]},$$scope:{ctx:n}};n[11]!==void 0&&(X.error=n[11]),n[8]!==void 0&&(X.open=n[8]),u=new Ee({props:X}),re.push(()=>se(u,"error",V)),re.push(()=>se(u,"open",H)),u.$on("cancelModal",n[21]),u.$on("confirmModal",n[24]);function oe(c){n[55](c)}function x(c){n[56](c)}let ee={id:"signal-confirmation-modal","data-testid":"signal-confirmation-modal",confirmText:k("submit"),cancelText:k("cancel"),confirmDisabled:!n[6],$$slots:{content:[wr],title:[gr]},$$scope:{ctx:n}};return n[11]!==void 0&&(ee.error=n[11]),n[10]!==void 0&&(ee.open=n[10]),A=new Ee({props:ee}),re.push(()=>se(A,"error",oe)),re.push(()=>se(A,"open",x)),A.$on("cancelModal",n[22]),A.$on("confirmModal",n[27]),{c(){e.c(),o=U(),D(r.$$.fragment),i=U(),D(f.$$.fragment),a=U(),D(u.$$.fragment),I=U(),D(A.$$.fragment)},l(c){e.l(c),o=L(c),S(r.$$.fragment,c),i=L(c),S(f.$$.fragment,c),a=L(c),S(u.$$.fragment,c),I=L(c),S(A.$$.fragment,c)},m(c,y){q[t].m(c,y),C(c,o,y),P(r,c,y),C(c,i,y),P(f,c,y),C(c,a,y),P(u,c,y),C(c,I,y),P(A,c,y),E=!0},p(c,y){let pe=t;t=R(c),t===pe?q[t].p(c,y):(_e(),h(q[pe],1,1,()=>{q[pe]=null}),ge(),e=q[t],e?e.p(c,y):(e=q[t]=M[t](c),e.c()),d(e,1),e.m(o.parentNode,o));const ce={};y[0]&1048576&&(ce.confirmDisabled=!c[20]),y[0]&28672|y[2]&2048&&(ce.$$scope={dirty:y,ctx:c}),!l&&y[0]&2048&&(l=!0,ce.error=c[11],ae(()=>l=!1)),!s&&y[0]&512&&(s=!0,ce.open=c[9],ae(()=>s=!1)),r.$set(ce);const we={};y[0]&32768&&(we.loading=c[15]),y[2]&2048&&(we.$$scope={dirty:y,ctx:c}),!p&&y[0]&2048&&(p=!0,we.error=c[11],ae(()=>p=!1)),!m&&y[0]&128&&(m=!0,we.open=c[7],ae(()=>m=!1)),f.$set(we);const ie={};y[0]&16|y[2]&2048&&(ie.$$scope={dirty:y,ctx:c}),!g&&y[0]&2048&&(g=!0,ie.error=c[11],ae(()=>g=!1)),!$&&y[0]&256&&($=!0,ie.open=c[8],ae(()=>$=!1)),u.$set(ie);const ue={};y[0]&64&&(ue.confirmDisabled=!c[6]),y[0]&65632|y[2]&2048&&(ue.$$scope={dirty:y,ctx:c}),!j&&y[0]&2048&&(j=!0,ue.error=c[11],ae(()=>j=!1)),!T&&y[0]&1024&&(T=!0,ue.open=c[10],ae(()=>T=!1)),A.$set(ue)},i(c){E||(d(e),d(r.$$.fragment,c),d(f.$$.fragment,c),d(u.$$.fragment,c),d(A.$$.fragment,c),E=!0)},o(c){h(e),h(r.$$.fragment,c),h(f.$$.fragment,c),h(u.$$.fragment,c),h(A.$$.fragment,c),E=!1},d(c){q[t].d(c),c&&w(o),W(r,c),c&&w(i),W(f,c),c&&w(a),W(u,c),c&&w(I),W(A,c)}}}function $r(n,t,e){let o,r,l,s,i,f,p,m,a,u,g,$=ne,I=()=>($(),$=eo(pe,_=>e(20,g=_)),pe),A,j,T,E;Y(n,kt,_=>e(39,m=_)),Y(n,de,_=>e(57,a=_)),Y(n,vt,_=>e(58,u=_)),Y(n,It,_=>e(59,A=_)),Y(n,To,_=>e(60,j=_)),Y(n,Tt,_=>e(61,T=_)),Y(n,qe,_=>e(40,E=_)),n.$$.on_destroy.push(()=>$());var M,q,R;let{workflow:v}=t,{namespace:F}=t,{cancelInProgress:B}=t,{isRunning:le}=t;const fe=()=>T?'{"metadata": {"encoding": ""}, "data": ""}':"";let b="",V=fe(),H="",X=!1,oe=!1,x=!1,ee=!1,c="",y=$e.Signal,pe=bt();I();let ce,we=!1,ie,ue;const yt=()=>{e(4,b="")},He=()=>{e(5,V=fe()),e(6,H=""),ue==null||ue.resetView(V)},Ue=()=>{e(12,y=$e.Signal),te(pe,g=void 0,g),e(14,ce=void 0)},Dt=async()=>{e(8,oe=!1),te(de,a=Date.now(),a),Ve.push({id:"workflow-termination-success-toast",message:k("workflows","terminate-success")})},St=_=>{var Z;e(4,b=""),e(11,c=(Z=_==null?void 0:_.message)!==null&&Z!==void 0?Z:k("unknown-error"))},Pt=()=>{e(11,c=""),v.canBeTerminated&&ho({workflow:v,namespace:F,reason:Qe({action:Je.Terminate,reason:b,email:u.email}),identity:u.email}).then(Dt).catch(St)},Wt=async()=>{var _;e(15,we=!0),e(11,c="");try{await $o({namespace:F,workflowId:v.id,runId:v.runId}),e(7,X=!1),e(15,we=!1),te(de,a=Date.now(),a),Ve.push({id:"workflow-cancelation-success-toast",message:k("workflows","cancel-success")})}catch(Z){e(11,c=(_=Z==null?void 0:Z.message)!==null&&_!==void 0?_:k("unknown-error"))}},Vt=_=>{e(5,V=_.detail)},Mt=async()=>{var _;e(11,c="");try{await bo({namespace:F,workflowId:v.id,runId:v.runId,signalInput:V,signalName:H,settings:{...E.data.settings,codec:{endpoint:T,includeCredentials:j,passAccessToken:A}},accessToken:u.accessToken}),e(10,ee=!1),te(de,a=Date.now(),a),Ve.push({message:k("workflows","signal-success"),id:"workflow-signal-success-toast"}),He()}catch(Z){e(11,c=(_=Z==null?void 0:Z.message)!==null&&_!==void 0?_:k("unknown-error"))}},qt=async()=>{var _;e(11,c="");try{const Z=await ko({namespace:F,workflowId:v.id,runId:v.runId,eventId:g,reason:Qe({action:Je.Reset,reason:ce,email:u.email}),resetReapplyType:y});Z&&Z.runId&&At.update(xt=>({...xt,[v.runId]:Z.runId})),e(9,x=!1),te(de,a=Date.now(),a)}catch(Z){e(11,c=(_=Z==null?void 0:Z.message)!==null&&_!==void 0?_:k("unknown-error"))}Ue()};let Le,je=Io();Y(n,je,_=>e(38,p=_));const Ft=()=>e(7,X=!0),Nt=()=>e(9,x=!0);function Bt(_){pe=_,I(e(13,pe))}function Ht(_){y=_,e(12,y)}function Ut(_){ce=_,e(14,ce)}function Lt(_){c=_,e(11,c)}function jt(_){x=_,e(9,x),e(3,i),e(2,ie),e(36,r),e(35,l),e(37,s),e(30,v),e(34,R),e(39,m),e(32,M),e(33,q),e(40,E)}function Ot(_){c=_,e(11,c)}function Qt(_){X=_,e(7,X)}function Jt(_){b=_,e(4,b)}function Yt(_){c=_,e(11,c)}function zt(_){oe=_,e(8,oe),e(3,i),e(2,ie),e(36,r),e(35,l),e(37,s),e(30,v),e(34,R),e(39,m),e(32,M),e(33,q),e(40,E)}function Gt(_){H=_,e(6,H)}function Kt(_){re[_?"unshift":"push"](()=>{ue=_,e(16,ue)})}function Zt(_){c=_,e(11,c)}function Xt(_){ee=_,e(10,ee),e(3,i),e(2,ie),e(36,r),e(35,l),e(37,s),e(30,v),e(34,R),e(39,m),e(32,M),e(33,q),e(40,E)}return n.$$set=_=>{"workflow"in _&&e(30,v=_.workflow),"namespace"in _&&e(31,F=_.namespace),"cancelInProgress"in _&&e(0,B=_.cancelInProgress),"isRunning"in _&&e(1,le=_.isRunning)},n.$$.update=()=>{n.$$.dirty[1]&512&&e(19,o=lo(E.data.settings)),n.$$.dirty[1]&512&&e(36,r=or(E.data.settings)),n.$$.dirty[1]&512&&e(35,l=so(E.data.settings)),n.$$.dirty[1]&512&&e(37,s=tr(E.data.settings)),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&326&&(s?s&&(e(32,M=v==null?void 0:v.pendingChildren)===null||M===void 0?void 0:M.length)>0?e(2,ie=k("workflows","reset-disabled-pending-children")):s&&(e(33,q=v==null?void 0:v.pendingChildren)===null||q===void 0?void 0:q.length)===0&&m.length===0&&e(2,ie=k("workflows","reset-disabled-no-events")):e(2,ie=k("workflows","reset-disabled"))),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&328&&e(3,i=s&&(e(34,R=v==null?void 0:v.pendingChildren)===null||R===void 0?void 0:R.length)===0&&m.length>0),n.$$.dirty[0]&12|n.$$.dirty[1]&48&&e(17,Le=[{label:k("workflows","reset"),onClick:()=>e(9,x=!0),testId:"reset-button",allowed:i,tooltip:i?"":ie},{label:k("workflows","signal"),onClick:()=>e(10,ee=!0),testId:"signal-button",allowed:r,tooltip:r?"":k("workflows","signal-disabled")},{label:k("workflows","terminate"),onClick:()=>e(8,oe=!0),testId:"terminate-button",allowed:l,destructive:!0,tooltip:l?"":k("workflows","terminate-disabled")}]),n.$$.dirty[1]&129&&e(18,f=p.namespaceWriteDisabled(F)||!wo(Ro))},[B,le,ie,i,b,V,H,X,oe,x,ee,c,y,pe,ce,we,ue,Le,f,o,g,yt,He,Ue,Pt,Wt,Vt,Mt,qt,je,v,F,M,q,R,l,r,s,p,m,E,Ft,Nt,Bt,Ht,Ut,Lt,jt,Ot,Qt,Jt,Yt,zt,Gt,Kt,Zt,Xt]}class br extends ke{constructor(t){super(),ve(this,t,$r,hr,Ie,{workflow:30,namespace:31,cancelInProgress:0,isRunning:1},null,[-1,-1,-1])}}const kr=(n,t)=>{var r;const e=n==="Running",o=(r=t==null?void 0:t.end)==null?void 0:r.some(l=>(l==null?void 0:l.eventType)==="WorkflowExecutionCancelRequested");return e&&o},tt=n=>{const t=n==null?void 0:n.indexOf("?");return t>-1?n.slice(0,t):n},me=(n,t,e=!1)=>{const o=tt(n).split("/"),r=tt(t).split("/");if(e&&o.length!==r.length)return!1;for(let l=0;l<o.length;l++){const s=o[l],i=r[l];if(s!==i)return!1}return!0};function vr(n){let t=k("workflows","back-to-workflows")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:ne,d(o){o&&w(e)}}}function ot(n){let t,e,o=k("workers","last-used-version")+"",r,l,s,i,f,p=k("workers","next-version")+"",m,a,u;return l=new ze({props:{defaultVersion:n[1]===n[6]||n[1]===n[7],active:n[1]===n[7],buildId:n[1],$$slots:{"default-worker":[Tr],"overall-default-worker":[Ir]},$$scope:{ctx:n}}}),a=new ze({props:{defaultVersion:!!n[6],active:n[6]===n[7],buildId:n[6],$$slots:{"default-worker":[Rr],"overall-default-worker":[Er]},$$scope:{ctx:n}}}),{c(){t=O("p"),e=O("span"),r=z(o),D(l.$$.fragment),s=U(),i=O("p"),f=O("span"),m=z(p),D(a.$$.fragment),this.h()},l(g){t=Q(g,"P",{class:!0});var $=J(t);e=Q($,"SPAN",{});var I=J(e);r=G(I,o),I.forEach(w),S(l.$$.fragment,$),$.forEach(w),s=L(g),i=Q(g,"P",{class:!0});var A=J(i);f=Q(A,"SPAN",{});var j=J(f);m=G(j,p),j.forEach(w),S(a.$$.fragment,A),A.forEach(w),this.h()},h(){K(t,"class","flex items-center gap-1"),K(i,"class","flex items-center gap-1")},m(g,$){C(g,t,$),N(t,e),N(e,r),P(l,t,null),C(g,s,$),C(g,i,$),N(i,f),N(f,m),P(a,i,null),u=!0},p(g,$){const I={};$&194&&(I.defaultVersion=g[1]===g[6]||g[1]===g[7]),$&130&&(I.active=g[1]===g[7]),$&2&&(I.buildId=g[1]),$&134217858&&(I.$$scope={dirty:$,ctx:g}),l.$set(I);const A={};$&64&&(A.defaultVersion=!!g[6]),$&192&&(A.active=g[6]===g[7]),$&64&&(A.buildId=g[6]),$&134217920&&(A.$$scope={dirty:$,ctx:g}),a.$set(A)},i(g){u||(d(l.$$.fragment,g),d(a.$$.fragment,g),u=!0)},o(g){h(l.$$.fragment,g),h(a.$$.fragment,g),u=!1},d(g){g&&w(t),W(l),g&&w(s),g&&w(i),W(a)}}}function rt(n){let t=k("workers","overall")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:ne,d(o){o&&w(e)}}}function Ir(n){let t,e=n[1]===n[7]&&rt();return{c(){e&&e.c(),t=he()},l(o){e&&e.l(o),t=he()},m(o,r){e&&e.m(o,r),C(o,t,r)},p(o,r){o[1]===o[7]?e?e.p(o,r):(e=rt(),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(o){e&&e.d(o),o&&w(t)}}}function Tr(n){let t=k("workers","default")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:ne,d(o){o&&w(e)}}}function nt(n){let t=k("workers","overall")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:ne,d(o){o&&w(e)}}}function Er(n){let t,e=n[6]===n[7]&&nt();return{c(){e&&e.c(),t=he()},l(o){e&&e.l(o),t=he()},m(o,r){e&&e.m(o,r),C(o,t,r)},p(o,r){o[6]===o[7]?e?e.p(o,r):(e=nt(),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(o){e&&e.d(o),o&&w(t)}}}function Rr(n){let t=k("workers","default")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:ne,d(o){o&&w(e)}}}function lt(n){let t,e;return t=new Ko({props:{onChange:n[16]}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p:ne,i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function st(n){let t,e,o,r;return e=new Et({props:{bold:!0,icon:"info",intent:"info",title:k("workflows","cancel-request-sent"),$$slots:{default:[Ar]},$$scope:{ctx:n}}}),{c(){t=O("div"),D(e.$$.fragment),this.h()},l(l){t=Q(l,"DIV",{class:!0});var s=J(t);S(e.$$.fragment,s),s.forEach(w),this.h()},h(){K(t,"class","mb-4")},m(l,s){C(l,t,s),P(e,t,null),r=!0},p(l,s){const i={};s&134217728&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){r||(d(e.$$.fragment,l),o||mt(()=>{o=dt(t,$t,{duration:200,delay:100}),o.start()}),r=!0)},o(l){h(e.$$.fragment,l),r=!1},d(l){l&&w(t),W(e)}}}function Ar(n){let t=k("workflows","cancel-request-sent-description")+"",e;return{c(){e=z(t)},l(o){e=G(o,t)},m(o,r){C(o,e,r)},p:ne,d(o){o&&w(e)}}}function at(n){let t,e,o,r;return e=new Et({props:{bold:!0,icon:"info",intent:"info","data-testid":"workflow-reset-alert",title:k("workflows","reset-success-alert-title"),$$slots:{default:[yr]},$$scope:{ctx:n}}}),{c(){t=O("div"),D(e.$$.fragment),this.h()},l(l){t=Q(l,"DIV",{class:!0});var s=J(t);S(e.$$.fragment,s),s.forEach(w),this.h()},h(){K(t,"class","mb-4")},m(l,s){C(l,t,s),P(e,t,null),r=!0},p(l,s){const i={};s&134217777&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){r||(d(e.$$.fragment,l),o||mt(()=>{o=dt(t,$t,{duration:200,delay:100}),o.start()}),r=!0)},o(l){h(e.$$.fragment,l),r=!1},d(l){l&&w(t),W(e)}}}function Cr(n){let t;return{c(){t=z("here")},l(e){t=G(e,"here")},m(e,o){C(e,t,o)},d(e){e&&w(t)}}}function yr(n){var l,s,i,f;let t,e,o,r;return e=new Rt({props:{href:be({namespace:n[0],workflow:(s=(l=n[4])==null?void 0:l.workflow)==null?void 0:s.id,run:n[5][(f=(i=n[4])==null?void 0:i.workflow)==null?void 0:f.runId]}),$$slots:{default:[Cr]},$$scope:{ctx:n}}}),{c(){t=z("You can find the resulting Workflow Execution "),D(e.$$.fragment),o=z(".")},l(p){t=G(p,"You can find the resulting Workflow Execution "),S(e.$$.fragment,p),o=G(p,".")},m(p,m){C(p,t,m),P(e,p,m),C(p,o,m),r=!0},p(p,m){var u,g,$,I;const a={};m&49&&(a.href=be({namespace:p[0],workflow:(g=(u=p[4])==null?void 0:u.workflow)==null?void 0:g.id,run:p[5][(I=($=p[4])==null?void 0:$.workflow)==null?void 0:I.runId]})),m&134217728&&(a.$$scope={dirty:m,ctx:p}),e.$set(a)},i(p){r||(d(e.$$.fragment,p),r=!0)},o(p){h(e.$$.fragment,p),r=!1},d(p){p&&w(t),W(e,p),p&&w(o)}}}function Dr(n){var o;let t=((o=n[2])==null?void 0:o.historyEvents)+"",e;return{c(){e=z(t)},l(r){e=G(r,t)},m(r,l){C(r,e,l)},p(r,l){var s;l&4&&t!==(t=((s=r[2])==null?void 0:s.historyEvents)+"")&&We(e,t)},d(r){r&&w(e)}}}function Sr(n){let t,e;return t=new Be({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Dr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){const l={};r&134217732&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function Pr(n){var o,r;let t=((r=(o=n[13])==null?void 0:o.pollers)==null?void 0:r.length)+"",e;return{c(){e=z(t)},l(l){e=G(l,t)},m(l,s){C(l,e,s)},p(l,s){var i,f;s&8192&&t!==(t=((f=(i=l[13])==null?void 0:i.pollers)==null?void 0:f.length)+"")&&We(e,t)},d(l){l&&w(e)}}}function Wr(n){let t,e;return t=new Be({props:{type:"blue",class:"px-2 py-0",$$slots:{default:[Pr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){const l={};r&134225920&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function ft(n){let t,e;return t=new mo({props:{name:"canceled",width:20,height:20}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function Vr(n){var s,i;let t,e=((i=(s=n[2])==null?void 0:s.pendingActivities)==null?void 0:i.length)+"",o,r,l=n[11]&&ft();return{c(){l&&l.c(),t=U(),o=z(e)},l(f){l&&l.l(f),t=L(f),o=G(f,e)},m(f,p){l&&l.m(f,p),C(f,t,p),C(f,o,p),r=!0},p(f,p){var m,a;f[11]?l?p&2048&&d(l,1):(l=ft(),l.c(),d(l,1),l.m(t.parentNode,t)):l&&(_e(),h(l,1,1,()=>{l=null}),ge()),(!r||p&4)&&e!==(e=((a=(m=f[2])==null?void 0:m.pendingActivities)==null?void 0:a.length)+"")&&We(o,e)},i(f){r||(d(l),r=!0)},o(f){h(l),r=!1},d(f){l&&l.d(f),f&&w(t),f&&w(o)}}}function Mr(n){let t,e;return t=new Be({props:{type:n[11]?"warning":"blue",class:"px-2 py-0",$$slots:{default:[Vr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){const l={};r&2048&&(l.type=o[11]?"warning":"blue"),r&134219780&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function qr(n){let t,e,o,r,l,s,i,f,p,m;return t=new Te({props:{label:k("workflows","history-tab"),id:"history-tab",href:be({...n[12]}),active:me(n[15].url.pathname,be({...n[12]})),$$slots:{default:[Sr]},$$scope:{ctx:n}}}),o=new Te({props:{label:k("workflows","workers-tab"),id:"workers-tab",href:Re(n[12]),active:me(n[15].url.pathname,Re(n[12])),$$slots:{default:[Wr]},$$scope:{ctx:n}}}),l=new Te({props:{label:k("workflows","pending-activities-tab"),id:"pending-activities-tab",href:Ae(n[12]),active:me(n[15].url.pathname,Ae(n[12])),$$slots:{default:[Mr]},$$scope:{ctx:n}}}),i=new Te({props:{label:k("workflows","stack-trace-tab"),id:"stack-trace-tab",href:Ce(n[12]),active:me(n[15].url.pathname,Ce(n[12]))}}),p=new Te({props:{label:k("workflows","queries-tab"),id:"queries-tab",href:ye(n[12]),active:me(n[15].url.pathname,ye(n[12]))}}),{c(){D(t.$$.fragment),e=U(),D(o.$$.fragment),r=U(),D(l.$$.fragment),s=U(),D(i.$$.fragment),f=U(),D(p.$$.fragment)},l(a){S(t.$$.fragment,a),e=L(a),S(o.$$.fragment,a),r=L(a),S(l.$$.fragment,a),s=L(a),S(i.$$.fragment,a),f=L(a),S(p.$$.fragment,a)},m(a,u){P(t,a,u),C(a,e,u),P(o,a,u),C(a,r,u),P(l,a,u),C(a,s,u),P(i,a,u),C(a,f,u),P(p,a,u),m=!0},p(a,u){const g={};u&4096&&(g.href=be({...a[12]})),u&36864&&(g.active=me(a[15].url.pathname,be({...a[12]}))),u&134217732&&(g.$$scope={dirty:u,ctx:a}),t.$set(g);const $={};u&4096&&($.href=Re(a[12])),u&36864&&($.active=me(a[15].url.pathname,Re(a[12]))),u&134225920&&($.$$scope={dirty:u,ctx:a}),o.$set($);const I={};u&4096&&(I.href=Ae(a[12])),u&36864&&(I.active=me(a[15].url.pathname,Ae(a[12]))),u&134219780&&(I.$$scope={dirty:u,ctx:a}),l.$set(I);const A={};u&4096&&(A.href=Ce(a[12])),u&36864&&(A.active=me(a[15].url.pathname,Ce(a[12]))),i.$set(A);const j={};u&4096&&(j.href=ye(a[12])),u&36864&&(j.active=me(a[15].url.pathname,ye(a[12]))),p.$set(j)},i(a){m||(d(t.$$.fragment,a),d(o.$$.fragment,a),d(l.$$.fragment,a),d(i.$$.fragment,a),d(p.$$.fragment,a),m=!0)},o(a){h(t.$$.fragment,a),h(o.$$.fragment,a),h(l.$$.fragment,a),h(i.$$.fragment,a),h(p.$$.fragment,a),m=!1},d(a){W(t,a),a&&w(e),W(o,a),a&&w(r),W(l,a),a&&w(s),W(i,a),a&&w(f),W(p,a)}}}function Fr(n){let t,e;return t=new Vo({props:{class:"flex flex-wrap gap-6",label:"workflow detail",$$slots:{default:[qr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,r){const l={};r&134264836&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function Nr(n){var le,fe;let t,e,o,r,l,s,i,f,p,m,a,u,g,$,I,A,j,T,E,M,q;o=new Rt({props:{href:`${Ge({namespace:n[0]})}?${n[14]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[vr]},$$scope:{ctx:n}}}),f=new Po({props:{copyIconTitle:k("copy-icon-title"),copySuccessIconTitle:k("copy-success-icon-title"),content:(le=n[2])==null?void 0:le.id,clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis"}}),a=new Co({props:{status:(fe=n[2])==null?void 0:fe.status}});let R=n[8]&&ot(n),v=n[3]&&lt(n);A=new br({props:{isRunning:n[3],cancelInProgress:n[10],workflow:n[2],namespace:n[0]}});let F=n[10]&&st(n),B=n[9]&&at(n);return M=new Wo({props:{$$slots:{default:[Fr]},$$scope:{ctx:n}}}),{c(){t=O("header"),e=O("div"),D(o.$$.fragment),r=U(),l=O("div"),s=O("div"),i=O("h1"),D(f.$$.fragment),p=U(),m=O("div"),D(a.$$.fragment),u=U(),R&&R.c(),g=U(),$=O("div"),v&&v.c(),I=U(),D(A.$$.fragment),j=U(),F&&F.c(),T=U(),B&&B.c(),E=U(),D(M.$$.fragment),this.h()},l(b){t=Q(b,"HEADER",{class:!0});var V=J(t);e=Q(V,"DIV",{class:!0});var H=J(e);S(o.$$.fragment,H),H.forEach(w),r=L(V),l=Q(V,"DIV",{class:!0});var X=J(l);s=Q(X,"DIV",{class:!0});var oe=J(s);i=Q(oe,"H1",{"data-testid":!0,class:!0});var x=J(i);S(f.$$.fragment,x),x.forEach(w),p=L(oe),m=Q(oe,"DIV",{class:!0});var ee=J(m);S(a.$$.fragment,ee),u=L(ee),R&&R.l(ee),ee.forEach(w),oe.forEach(w),g=L(X),$=Q(X,"DIV",{class:!0});var c=J($);v&&v.l(c),I=L(c),S(A.$$.fragment,c),c.forEach(w),X.forEach(w),j=L(V),F&&F.l(V),T=L(V),B&&B.l(V),E=L(V),S(M.$$.fragment,V),V.forEach(w),this.h()},h(){K(e,"class","mb-4 block"),K(i,"data-testid","workflow-id-heading"),K(i,"class","overflow-hidden text-2xl font-medium"),K(m,"class","flex flex-wrap items-center gap-4"),K(s,"class","flex w-full flex-col justify-start gap-4 overflow-hidden whitespace-nowrap lg:w-auto"),K($,"class","flex flex-col items-center justify-center gap-4 whitespace-nowrap sm:flex-row lg:justify-end"),K(l,"class","mb-8 flex w-full flex-col items-center justify-between gap-4 lg:flex-row"),K(t,"class","mb-4 flex flex-col gap-1")},m(b,V){C(b,t,V),N(t,e),P(o,e,null),N(t,r),N(t,l),N(l,s),N(s,i),P(f,i,null),N(s,p),N(s,m),P(a,m,null),N(m,u),R&&R.m(m,null),N(l,g),N(l,$),v&&v.m($,null),N($,I),P(A,$,null),N(t,j),F&&F.m(t,null),N(t,T),B&&B.m(t,null),N(t,E),P(M,t,null),q=!0},p(b,[V]){var c,y;const H={};V&16385&&(H.href=`${Ge({namespace:b[0]})}?${b[14]}`),V&134217728&&(H.$$scope={dirty:V,ctx:b}),o.$set(H);const X={};V&4&&(X.content=(c=b[2])==null?void 0:c.id),f.$set(X);const oe={};V&4&&(oe.status=(y=b[2])==null?void 0:y.status),a.$set(oe),b[8]?R?(R.p(b,V),V&256&&d(R,1)):(R=ot(b),R.c(),d(R,1),R.m(m,null)):R&&(_e(),h(R,1,1,()=>{R=null}),ge()),b[3]?v?(v.p(b,V),V&8&&d(v,1)):(v=lt(b),v.c(),d(v,1),v.m($,I)):v&&(_e(),h(v,1,1,()=>{v=null}),ge());const x={};V&8&&(x.isRunning=b[3]),V&1024&&(x.cancelInProgress=b[10]),V&4&&(x.workflow=b[2]),V&1&&(x.namespace=b[0]),A.$set(x),b[10]?F?(F.p(b,V),V&1024&&d(F,1)):(F=st(b),F.c(),d(F,1),F.m(t,T)):F&&(_e(),h(F,1,1,()=>{F=null}),ge()),b[9]?B?(B.p(b,V),V&512&&d(B,1)):(B=at(b),B.c(),d(B,1),B.m(t,E)):B&&(_e(),h(B,1,1,()=>{B=null}),ge());const ee={};V&134264836&&(ee.$$scope={dirty:V,ctx:b}),M.$set(ee)},i(b){q||(d(o.$$.fragment,b),d(f.$$.fragment,b),d(a.$$.fragment,b),d(R),d(v),d(A.$$.fragment,b),d(F),d(B),d(M.$$.fragment,b),q=!0)},o(b){h(o.$$.fragment,b),h(f.$$.fragment,b),h(a.$$.fragment,b),h(R),h(v),h(A.$$.fragment,b),h(F),h(B),h(M.$$.fragment,b),q=!1},d(b){b&&w(t),W(o),W(f),W(a),R&&R.d(),v&&v.d(),W(A),F&&F.d(),B&&B.d(),W(M)}}}const it=15e3;function Br(n,t,e){let o,r,l,s,i,f,p,m,a,u,g,$,I,A,j,T,E,M,q;Y(n,Pe,H=>e(4,I=H)),Y(n,At,H=>e(5,A=H)),Y(n,Se,H=>e(24,j=H)),Y(n,de,H=>e(25,T=H)),Y(n,De,H=>e(26,E=H)),Y(n,Mo,H=>e(14,M=H)),Y(n,qe,H=>e(15,q=H));var R,v,F,B,le;let{namespace:fe}=t,b;pt(()=>{i&&E==="on"&&(clearInterval(b),e(22,b=setInterval(()=>te(de,T=Date.now(),T),it)))});const V=()=>{E==="on"?(te(De,E="off",E),clearInterval(b)):(te(de,T=Date.now(),T),te(De,E="on",E),clearInterval(b),e(22,b=setInterval(()=>te(de,T=Date.now(),T),it)))};return Me(()=>{clearInterval(b)}),n.$$set=H=>{"namespace"in H&&e(0,fe=H.namespace)},n.$$.update=()=>{n.$$.dirty&16&&e(2,{workflow:o,workers:r,compatibility:l}=I,o,(e(13,r),e(4,I)),(e(23,l),e(4,I))),n.$$.dirty&5&&e(12,s={namespace:fe,workflow:o==null?void 0:o.id,run:o==null?void 0:o.runId}),n.$$.dirty&131088&&e(3,i=e(17,R=I==null?void 0:I.workflow)===null||R===void 0?void 0:R.isRunning),n.$$.dirty&262160&&e(11,f=["Terminated","TimedOut","Canceled"].includes(e(18,v=I.workflow)===null||v===void 0?void 0:v.status)),n.$$.dirty&4194312&&(i||clearInterval(b)),n.$$.dirty&17301520&&e(10,p=kr(e(19,F=I==null?void 0:I.workflow)===null||F===void 0?void 0:F.status,j)),n.$$.dirty&1048624&&e(9,m=qo(A,e(20,B=I==null?void 0:I.workflow)===null||B===void 0?void 0:B.runId)),n.$$.dirty&2097156&&e(8,a=e(21,le=o==null?void 0:o.mostRecentWorkerVersionStamp)===null||le===void 0?void 0:le.useVersioning),n.$$.dirty&4&&e(1,u=Fo(o)),n.$$.dirty&8388608&&e(7,g=No(l)),n.$$.dirty&8388610&&e(6,$=Bo(l,u))},[fe,u,o,i,I,A,$,g,a,m,p,f,s,r,M,q,V,R,v,F,B,le,b,l,j]}class Hr extends ke{constructor(t){super(),ve(this,t,Br,Nr,Ie,{namespace:0})}}async function Ur({activity:n,namespace:t,settings:e,accessToken:o},{convertWithCodec:r=Lo,convertWithWebsocket:l=jo,decodeAttributes:s=Oo,encoderEndpoint:i=Tt}={}){const f=Qo(e,i),p=Jo(e,It),m={...e,codec:{...e==null?void 0:e.codec,endpoint:f,passAccessToken:p}},a=f?await r({attributes:n,namespace:t,settings:m,accessToken:o}):await l(n);return s(a)}const Lr=async({activity:n,namespace:t,settings:e,accessToken:o})=>await Ur({activity:n,namespace:t,settings:e,accessToken:o}),jr=async(n,t,e,o)=>{const r=(n==null?void 0:n.pendingActivities)??[],l=[];for(const s of r){const i=await Lr({activity:s,namespace:t,settings:e,accessToken:o});l.push(i)}return l};function Or(n){let t,e,o;t=new Hr({props:{namespace:n[0].params.namespace}});const r=n[7].default,l=_t(r,n,n[6],null);return{c(){D(t.$$.fragment),e=U(),l&&l.c()},l(s){S(t.$$.fragment,s),e=L(s),l&&l.l(s)},m(s,i){P(t,s,i),C(s,e,i),l&&l.m(s,i),o=!0},p(s,i){const f={};i&1&&(f.namespace=s[0].params.namespace),t.$set(f),l&&l.p&&(!o||i&64)&&gt(l,r,s,s[6],o?ht(r,s[6],i,null):wt(s[6]),null)},i(s){o||(d(t.$$.fragment,s),d(l,s),o=!0)},o(s){h(t.$$.fragment,s),h(l,s),o=!1},d(s){W(t,s),s&&w(e),l&&l.d(s)}}}function Qr(n){let t,e;return t=new to({}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p:ne,i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function Jr(n){let t,e,o,r;const l=[Qr,Or],s=[];function i(f,p){return f[1].workflow?1:0}return e=i(n),o=s[e]=l[e](n),{c(){t=O("div"),o.c(),this.h()},l(f){t=Q(f,"DIV",{class:!0});var p=J(t);o.l(p),p.forEach(w),this.h()},h(){K(t,"class","flex h-full flex-col gap-6")},m(f,p){C(f,t,p),s[e].m(t,null),r=!0},p(f,[p]){let m=e;e=i(f),e===m?s[e].p(f,p):(_e(),h(s[m],1,1,()=>{s[m]=null}),ge(),o=s[e],o?o.p(f,p):(o=s[e]=l[e](f),o.c()),d(o,1),o.m(t,null))},i(f){r||(d(o),r=!0)},o(f){h(o),r=!1},d(f){f&&w(t),s[e].d()}}}function Yr(n,t,e){let o,r,l,s,i,f,p,m,a,u;Y(n,Se,T=>e(8,s=T)),Y(n,Pe,T=>e(1,i=T)),Y(n,Ye,T=>e(9,f=T)),Y(n,Oe,T=>e(10,p=T)),Y(n,qe,T=>e(0,m=T)),Y(n,de,T=>e(5,a=T)),Y(n,vt,T=>e(11,u=T));let{$$slots:g={},$$scope:$}=t;const I=async(T,E)=>{var M;if(!((M=T==null?void 0:T.mostRecentWorkerVersionStamp)===null||M===void 0)&&M.useVersioning)return await Do({queue:E,namespace:o})},A=async({namespace:T,workers:E,taskQueue:M})=>{if(!Ho(E.pollers))return;const R=Uo(E.pollers);return await So({namespace:T,buildIds:R,taskQueue:M})},j=async(T,E,M)=>{const{settings:q}=m.data,R=await vo({namespace:T,workflowId:E,runId:M}),{taskQueue:v}=R,F=await yo({queue:v,namespace:T}),B=await I(R,v),le=await A({namespace:T,workers:F,taskQueue:v});R.pendingActivities=await jr(R,T,q,u==null?void 0:u.accessToken),te(Pe,i={workflow:R,workers:F,compatibility:B,reachability:le},i);const fe=await uo({namespace:T,workflowId:E,runId:M,settings:q,accessToken:u==null?void 0:u.accessToken});te(Se,s=fe,s)};return pt(()=>{const T=m.url.searchParams.get("sort");T&&te(Oe,p=T,p)}),Me(()=>{te(Ye,f=null,f),te(Pe,i=Ao,i),te(Se,s=io,s)}),n.$$set=T=>{"$$scope"in T&&e(6,$=T.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&e(4,{namespace:o,workflow:r,run:l}=m.params,o,(e(3,r),e(0,m)),(e(2,l),e(0,m))),n.$$.dirty&60&&j(o,r,l)},[m,i,l,r,o,a,$,g]}class zr extends ke{constructor(t){super(),ve(this,t,Yr,Jr,Ie,{})}}const Ct={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},Gr=bt(Ct),Kr=()=>{Gr.set(Ct)};function Zr(n){let t;const e=n[0].default,o=_t(e,n,n[1],null);return{c(){o&&o.c()},l(r){o&&o.l(r)},m(r,l){o&&o.m(r,l),t=!0},p(r,l){o&&o.p&&(!t||l&2)&&gt(o,e,r,r[1],t?ht(e,r[1],l,null):wt(r[1]),null)},i(r){t||(d(o,r),t=!0)},o(r){h(o,r),t=!1},d(r){o&&o.d(r)}}}function Xr(n){let t,e;return t=new zr({props:{$$slots:{default:[Zr]},$$scope:{ctx:n}}}),{c(){D(t.$$.fragment)},l(o){S(t.$$.fragment,o)},m(o,r){P(t,o,r),e=!0},p(o,[r]){const l={};r&2&&(l.$$scope={dirty:r,ctx:o}),t.$set(l)},i(o){e||(d(t.$$.fragment,o),e=!0)},o(o){h(t.$$.fragment,o),e=!1},d(o){W(t,o)}}}function xr(n,t,e){let{$$slots:o={},$$scope:r}=t;return Me(()=>{Kr()}),n.$$set=l=>{"$$scope"in l&&e(1,r=l.$$scope)},[o,r]}class Ln extends ke{constructor(t){super(),ve(this,t,xr,Xr,Ie,{})}}export{Ln as default};
